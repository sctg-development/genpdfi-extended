"use strict";var __esbuild_esm_mermaid_nm;(__esbuild_esm_mermaid_nm||={}).mermaid=(()=>{var defaultIconDimensions,defaultIconTransformations,defaultIconProps,defaultExtendedIconProps,defaultIconSizeCustomisations,defaultIconCustomisations,stringToIcon,validateIconName,__create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__name=(target,value2)=>__defProp(target,"name",{value:value2,configurable:!0}),__esm=(fn3,res)=>function(){return fn3&&(res=(0,fn3[__getOwnPropNames(fn3)[0]])(fn3=0)),res},__commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports},__export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from2,except,desc)=>{if(from2&&"object"==typeof from2||"function"==typeof from2)for(let key of __getOwnPropNames(from2))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from2[key],enumerable:!(desc=__getOwnPropDesc(from2,key))||desc.enumerable});return to},__reExport=(target,mod,secondTarget)=>(__copyProps(target,mod,"default"),secondTarget&&__copyProps(secondTarget,mod,"default")),__toESM=(mod,isNodeMode,target)=>(target=null!=mod?__create(__getProtoOf(mod)):{},__copyProps(!isNodeMode&&mod&&mod.__esModule?target:__defProp(target,"default",{value:mod,enumerable:!0}),mod)),init_defaults=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/icon/defaults.js"(){defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1})}}),init_defaults2=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/customisations/defaults.js"(){init_defaults(),defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations})}}),init_name=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/icon/name.js"(){stringToIcon=__name((value2,validate,allowSimpleName,provider="")=>{const colonSeparated=value2.split(":");if("@"===value2.slice(0,1)){if(colonSeparated.length<2||colonSeparated.length>3)return null;provider=colonSeparated.shift().slice(1)}if(colonSeparated.length>3||!colonSeparated.length)return null;if(colonSeparated.length>1){const name$1=colonSeparated.pop(),prefix=colonSeparated.pop(),result={provider:colonSeparated.length>0?colonSeparated[0]:provider,prefix:prefix,name:name$1};return validate&&!validateIconName(result)?null:result}const name=colonSeparated[0],dashSeparated=name.split("-");if(dashSeparated.length>1){const result={provider:provider,prefix:dashSeparated.shift(),name:dashSeparated.join("-")};return validate&&!validateIconName(result)?null:result}if(allowSimpleName&&""===provider){const result={provider:provider,prefix:"",name:name};return validate&&!validateIconName(result,allowSimpleName)?null:result}return null},"stringToIcon"),validateIconName=__name((icon2,allowSimpleName)=>!!icon2&&!(!(allowSimpleName&&""===icon2.prefix||icon2.prefix)||!icon2.name),"validateIconName")}});function mergeIconTransformations(obj1,obj2){const result={};!obj1.hFlip!=!obj2.hFlip&&(result.hFlip=!0),!obj1.vFlip!=!obj2.vFlip&&(result.vFlip=!0);const rotate2=((obj1.rotate||0)+(obj2.rotate||0))%4;return rotate2&&(result.rotate=rotate2),result}var init_transformations=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/icon/transformations.js"(){__name(mergeIconTransformations,"mergeIconTransformations")}});function mergeIconData(parent4,child){const result=mergeIconTransformations(parent4,child);for(const key in defaultExtendedIconProps)key in defaultIconTransformations?key in parent4&&!(key in result)&&(result[key]=defaultIconTransformations[key]):key in child?result[key]=child[key]:key in parent4&&(result[key]=parent4[key]);return result}var init_merge=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/icon/merge.js"(){init_defaults(),init_transformations(),__name(mergeIconData,"mergeIconData")}});function getIconsTree(data5,names){const icons=data5.icons,aliases=data5.aliases||Object.create(null),resolved=Object.create(null);function resolve2(name){if(icons[name])return resolved[name]=[];if(!(name in resolved)){resolved[name]=null;const parent4=aliases[name]&&aliases[name].parent,value2=parent4&&resolve2(parent4);value2&&(resolved[name]=[parent4].concat(value2))}return resolved[name]}return __name(resolve2,"resolve"),(names||Object.keys(icons).concat(Object.keys(aliases))).forEach(resolve2),resolved}var init_tree=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/icon-set/tree.js"(){__name(getIconsTree,"getIconsTree")}});function internalGetIconData(data5,name,tree){const icons=data5.icons,aliases=data5.aliases||Object.create(null);let currentProps={};function parse7(name$1){currentProps=mergeIconData(icons[name$1]||aliases[name$1],currentProps)}return __name(parse7,"parse"),parse7(name),tree.forEach(parse7),mergeIconData(data5,currentProps)}function getIconData(data5,name){if(data5.icons[name])return internalGetIconData(data5,name,[]);const tree=getIconsTree(data5,[name])[name];return tree?internalGetIconData(data5,name,tree):null}var unitsSplit,unitsTest,init_get_icon=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/icon-set/get-icon.js"(){init_merge(),init_tree(),__name(internalGetIconData,"internalGetIconData"),__name(getIconData,"getIconData")}});function calculateSize(size4,ratio,precision){if(1===ratio)return size4;if(precision=precision||100,"number"==typeof size4)return Math.ceil(size4*ratio*precision)/precision;if("string"!=typeof size4)return size4;const oldParts=size4.split(unitsSplit);if(null===oldParts||!oldParts.length)return size4;const newParts=[];let code=oldParts.shift(),isNumber=unitsTest.test(code);for(;;){if(isNumber){const num=parseFloat(code);isNaN(num)?newParts.push(code):newParts.push(Math.ceil(num*ratio*precision)/precision)}else newParts.push(code);if(code=oldParts.shift(),void 0===code)return newParts.join("");isNumber=!isNumber}}var init_size=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/svg/size.js"(){unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g,__name(calculateSize,"calculateSize")}});function splitSVGDefs(content,tag="defs"){let defs2="";const index=content.indexOf("<"+tag);for(;index>=0;){const start3=content.indexOf(">",index),end2=content.indexOf("</"+tag);if(-1===start3||-1===end2)break;const endEnd=content.indexOf(">",end2);if(-1===endEnd)break;defs2+=content.slice(start3+1,end2).trim(),content=content.slice(0,index).trim()+content.slice(endEnd+1)}return{defs:defs2,content:content}}function mergeDefsAndContent(defs2,content){return defs2?"<defs>"+defs2+"</defs>"+content:content}function wrapSVGContent(body,start3,end2){const split=splitSVGDefs(body);return mergeDefsAndContent(split.defs,start3+split.content+end2)}var isUnsetKeyword,init_defs=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/svg/defs.js"(){__name(splitSVGDefs,"splitSVGDefs"),__name(mergeDefsAndContent,"mergeDefsAndContent"),__name(wrapSVGContent,"wrapSVGContent")}});function iconToSVG(icon2,customisations){const fullIcon={...defaultIconProps,...icon2},fullCustomisations={...defaultIconCustomisations,...customisations},box={left:fullIcon.left,top:fullIcon.top,width:fullIcon.width,height:fullIcon.height};let body=fullIcon.body;[fullIcon,fullCustomisations].forEach(props=>{const transformations=[],hFlip=props.hFlip,vFlip=props.vFlip;let tempValue,rotation=props.rotate;switch(hFlip?vFlip?rotation+=2:(transformations.push("translate("+(box.width+box.left).toString()+" "+(0-box.top).toString()+")"),transformations.push("scale(-1 1)"),box.top=box.left=0):vFlip&&(transformations.push("translate("+(0-box.left).toString()+" "+(box.height+box.top).toString()+")"),transformations.push("scale(1 -1)"),box.top=box.left=0),rotation<0&&(rotation-=4*Math.floor(rotation/4)),rotation%=4,rotation){case 1:tempValue=box.height/2+box.top,transformations.unshift("rotate(90 "+tempValue.toString()+" "+tempValue.toString()+")");break;case 2:transformations.unshift("rotate(180 "+(box.width/2+box.left).toString()+" "+(box.height/2+box.top).toString()+")");break;case 3:tempValue=box.width/2+box.left,transformations.unshift("rotate(-90 "+tempValue.toString()+" "+tempValue.toString()+")")}rotation%2==1&&(box.left!==box.top&&(tempValue=box.left,box.left=box.top,box.top=tempValue),box.width!==box.height&&(tempValue=box.width,box.width=box.height,box.height=tempValue)),transformations.length&&(body=wrapSVGContent(body,'<g transform="'+transformations.join(" ")+'">',"</g>"))});const customisationsWidth=fullCustomisations.width,customisationsHeight=fullCustomisations.height,boxWidth=box.width,boxHeight=box.height;let width3,height2;null===customisationsWidth?(height2=null===customisationsHeight?"1em":"auto"===customisationsHeight?boxHeight:customisationsHeight,width3=calculateSize(height2,boxWidth/boxHeight)):(width3="auto"===customisationsWidth?boxWidth:customisationsWidth,height2=null===customisationsHeight?calculateSize(width3,boxHeight/boxWidth):"auto"===customisationsHeight?boxHeight:customisationsHeight);const attributes={},setAttr=__name((prop,value2)=>{isUnsetKeyword(value2)||(attributes[prop]=value2.toString())},"setAttr");setAttr("width",width3),setAttr("height",height2);const viewBox=[box.left,box.top,boxWidth,boxHeight];return attributes.viewBox=viewBox.join(" "),{attributes:attributes,viewBox:viewBox,body:body}}var regex,randomPrefix,counter,init_build=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/svg/build.js"(){init_defaults(),init_defaults2(),init_size(),init_defs(),isUnsetKeyword=__name(value2=>"unset"===value2||"undefined"===value2||"none"===value2,"isUnsetKeyword"),__name(iconToSVG,"iconToSVG")}});function replaceIDs(body,prefix=randomPrefix){const ids=[];let match2;for(;match2=regex.exec(body);)ids.push(match2[1]);if(!ids.length)return body;const suffix="suffix"+(16777216*Math.random()|Date.now()).toString(16);return ids.forEach(id30=>{const newID="function"==typeof prefix?prefix(id30):prefix+(counter++).toString(),escapedID=id30.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");body=body.replace(new RegExp('([#;"])('+escapedID+')([")]|\\.[a-z])',"g"),"$1"+newID+suffix+"$3")}),body=body.replace(new RegExp(suffix,"g"),"")}var init_id=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/svg/id.js"(){regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),counter=0,__name(replaceIDs,"replaceIDs")}});function iconToHTML(body,attributes){let renderAttribsHTML=-1===body.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const attr in attributes)renderAttribsHTML+=" "+attr+'="'+attributes[attr]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+renderAttribsHTML+">"+body+"</svg>"}var assignWithDepth,assignWithDepth_default,import_dayjs,LEVELS,log,setLogLevel,format,Channel,channel_default,lang_default,unit_default,utils_default,DEC2HEX,TYPE,Type,type_default,Channels,channels_default,channels,reusable_default,Hex,hex_default,HSL,hsl_default,Keyword,keyword_default,RGB,rgb_default,color_default,change,change_default,rgba_default,channel_default2,luminance_default,is_light_default,is_dark_default,adjust_channel_default,lighten_default,darken_default,adjust,adjust_default,mix_default,invert_default,oldAttributeBackgroundColorOdd,oldAttributeBackgroundColorEven,mkBorder,Theme,getThemeVariables,Theme2,getThemeVariables2,Theme3,getThemeVariables3,Theme4,getThemeVariables4,Theme5,getThemeVariables5,themes_default,config_schema_default,config,keyify,configKeys,defaultConfig_default,sanitizeDirective,sanitizeCss,defaultConfig,siteConfig,configFromInitialize,directives,currentConfig,updateCurrentConfig,setSiteConfig,saveConfigFromInitialize,updateSiteConfig,getSiteConfig,setConfig,getConfig,sanitize,addDirective,reset,ConfigWarning,issuedWarnings,issueWarning,checkConfig,getUserDefinedConfig,entries,setPrototypeOf,isFrozen,getPrototypeOf,getOwnPropertyDescriptor,freeze,seal,create,apply,construct,arrayForEach,arrayLastIndexOf,arrayPop,arrayPush,arraySplice,stringToLowerCase,stringToString,stringMatch,stringReplace,stringIndexOf,stringTrim,objectHasOwnProperty,regExpTest,typeErrorCreate,html$1,svg$1,svgFilters,svgDisallowed,mathMl$1,mathMlDisallowed,text,html,svg,mathMl,xml,MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR,DATA_ATTR,ARIA_ATTR,IS_ALLOWED_URI,IS_SCRIPT_OR_DATA,ATTR_WHITESPACE,DOCTYPE_NAME,CUSTOM_ELEMENT,EXPRESSIONS,NODE_TYPE,getGlobal,_createTrustedTypesPolicy,_createHooksMap,purify,init_html=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/svg/html.js"(){__name(iconToHTML,"iconToHTML")}}),init_lib=__esm({"../../node_modules/.pnpm/@iconify+utils@3.0.2/node_modules/@iconify/utils/lib/index.js"(){init_name(),init_get_icon(),init_build(),init_id(),init_html()}}),init_assignWithDepth=__esm({"src/assignWithDepth.ts"(){assignWithDepth_default=assignWithDepth=__name((dst,src,{depth:depth=2,clobber:clobber=!1}={})=>{const config5={depth:depth,clobber:clobber};return Array.isArray(src)&&!Array.isArray(dst)?(src.forEach(s2=>assignWithDepth(dst,s2,config5)),dst):Array.isArray(src)&&Array.isArray(dst)?(src.forEach(s2=>{dst.includes(s2)||dst.push(s2)}),dst):void 0===dst||depth<=0?null!=dst&&"object"==typeof dst&&"object"==typeof src?Object.assign(dst,src):src:(void 0!==src&&"object"==typeof dst&&"object"==typeof src&&Object.keys(src).forEach(key=>{"object"!=typeof src[key]||void 0!==dst[key]&&"object"!=typeof dst[key]?(clobber||"object"!=typeof dst[key]&&"object"!=typeof src[key])&&(dst[key]=src[key]):(void 0===dst[key]&&(dst[key]=Array.isArray(src[key])?[]:{}),dst[key]=assignWithDepth(dst[key],src[key],{depth:depth-1,clobber:clobber}))}),dst)},"assignWithDepth")}}),require_dayjs_min=__commonJS({"../../node_modules/.pnpm/dayjs@1.11.18/node_modules/dayjs/dayjs.min.js"(exports2,module2){var t4,e3;t4=exports2,e3=function(){var r2="millisecond",i2="second",s2="minute",u2="hour",a2="day",o2="week",c3="month",f2="quarter",h3="year",d3="date",l4="Invalid Date",$4=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y6=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M3={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:__name(function(t5){var e4=["th","st","nd","rd"],n3=t5%100;return"["+t5+(e4[(n3-20)%10]||e4[n3]||e4[0])+"]"},"ordinal")},m3=__name(function(t5,e4,n3){var r3=String(t5);return!r3||r3.length>=e4?t5:""+Array(e4+1-r3.length).join(n3)+t5},"m"),v3={s:m3,z:__name(function(t5){var e4=-t5.utcOffset(),n3=Math.abs(e4),r3=Math.floor(n3/60),i3=n3%60;return(e4<=0?"+":"-")+m3(r3,2,"0")+":"+m3(i3,2,"0")},"z"),m:__name(function t5(e4,n3){if(e4.date()<n3.date())return-t5(n3,e4);var r3=12*(n3.year()-e4.year())+(n3.month()-e4.month()),i3=e4.clone().add(r3,c3),s3=n3-i3<0,u3=e4.clone().add(r3+(s3?-1:1),c3);return+(-(r3+(n3-i3)/(s3?i3-u3:u3-i3))||0)},"t"),a:__name(function(t5){return t5<0?Math.ceil(t5)||0:Math.floor(t5)},"a"),p:__name(function(t5){return{M:c3,y:h3,w:o2,d:a2,D:d3,h:u2,m:s2,s:i2,ms:r2,Q:f2}[t5]||String(t5||"").toLowerCase().replace(/s$/,"")},"p"),u:__name(function(t5){return void 0===t5},"u")},g2="en",D4={};D4[g2]=M3;var p3="$isDayjsObject",S4=__name(function(t5){return t5 instanceof _3||!(!t5||!t5[p3])},"S"),w4=__name(function t5(e4,n3,r3){var i3;if(!e4)return g2;if("string"==typeof e4){var s3=e4.toLowerCase();D4[s3]&&(i3=s3),n3&&(D4[s3]=n3,i3=s3);var u3=e4.split("-");if(!i3&&u3.length>1)return t5(u3[0])}else{var a3=e4.name;D4[a3]=e4,i3=a3}return!r3&&i3&&(g2=i3),i3||!r3&&g2},"t"),O3=__name(function(t5,e4){if(S4(t5))return t5.clone();var n3="object"==typeof e4?e4:{};return n3.date=t5,n3.args=arguments,new _3(n3)},"O"),b3=v3;b3.l=w4,b3.i=S4,b3.w=function(t5,e4){return O3(t5,{locale:e4.$L,utc:e4.$u,x:e4.$x,$offset:e4.$offset})};var _3=function(){function M4(t5){this.$L=w4(t5.locale,null,!0),this.parse(t5),this.$x=this.$x||t5.x||{},this[p3]=!0}__name(M4,"M");var m4=M4.prototype;return m4.parse=function(t5){this.$d=function(t6){var e4=t6.date,n3=t6.utc;if(null===e4)return new Date(NaN);if(b3.u(e4))return new Date;if(e4 instanceof Date)return new Date(e4);if("string"==typeof e4&&!/Z$/i.test(e4)){var r3=e4.match($4);if(r3){var i3=r3[2]-1||0,s3=(r3[7]||"0").substring(0,3);return n3?new Date(Date.UTC(r3[1],i3,r3[3]||1,r3[4]||0,r3[5]||0,r3[6]||0,s3)):new Date(r3[1],i3,r3[3]||1,r3[4]||0,r3[5]||0,r3[6]||0,s3)}}return new Date(e4)}(t5),this.init()},m4.init=function(){var t5=this.$d;this.$y=t5.getFullYear(),this.$M=t5.getMonth(),this.$D=t5.getDate(),this.$W=t5.getDay(),this.$H=t5.getHours(),this.$m=t5.getMinutes(),this.$s=t5.getSeconds(),this.$ms=t5.getMilliseconds()},m4.$utils=function(){return b3},m4.isValid=function(){return!(this.$d.toString()===l4)},m4.isSame=function(t5,e4){var n3=O3(t5);return this.startOf(e4)<=n3&&n3<=this.endOf(e4)},m4.isAfter=function(t5,e4){return O3(t5)<this.startOf(e4)},m4.isBefore=function(t5,e4){return this.endOf(e4)<O3(t5)},m4.$g=function(t5,e4,n3){return b3.u(t5)?this[e4]:this.set(n3,t5)},m4.unix=function(){return Math.floor(this.valueOf()/1e3)},m4.valueOf=function(){return this.$d.getTime()},m4.startOf=function(t5,e4){var n3=this,r3=!!b3.u(e4)||e4,f3=b3.p(t5),l5=__name(function(t6,e6){var i3=b3.w(n3.$u?Date.UTC(n3.$y,e6,t6):new Date(n3.$y,e6,t6),n3);return r3?i3:i3.endOf(a2)},"l"),$5=__name(function(t6,e6){return b3.w(n3.toDate()[t6].apply(n3.toDate("s"),(r3?[0,0,0,0]:[23,59,59,999]).slice(e6)),n3)},"$"),y7=this.$W,M5=this.$M,m5=this.$D,v5="set"+(this.$u?"UTC":"");switch(f3){case h3:return r3?l5(1,0):l5(31,11);case c3:return r3?l5(1,M5):l5(0,M5+1);case o2:var g3=this.$locale().weekStart||0,D5=(y7<g3?y7+7:y7)-g3;return l5(r3?m5-D5:m5+(6-D5),M5);case a2:case d3:return $5(v5+"Hours",0);case u2:return $5(v5+"Minutes",1);case s2:return $5(v5+"Seconds",2);case i2:return $5(v5+"Milliseconds",3);default:return this.clone()}},m4.endOf=function(t5){return this.startOf(t5,!1)},m4.$set=function(t5,e4){var n3,o3=b3.p(t5),f3="set"+(this.$u?"UTC":""),l5=(n3={},n3[a2]=f3+"Date",n3[d3]=f3+"Date",n3[c3]=f3+"Month",n3[h3]=f3+"FullYear",n3[u2]=f3+"Hours",n3[s2]=f3+"Minutes",n3[i2]=f3+"Seconds",n3[r2]=f3+"Milliseconds",n3)[o3],$5=o3===a2?this.$D+(e4-this.$W):e4;if(o3===c3||o3===h3){var y7=this.clone().set(d3,1);y7.$d[l5]($5),y7.init(),this.$d=y7.set(d3,Math.min(this.$D,y7.daysInMonth())).$d}else l5&&this.$d[l5]($5);return this.init(),this},m4.set=function(t5,e4){return this.clone().$set(t5,e4)},m4.get=function(t5){return this[b3.p(t5)]()},m4.add=function(r3,f3){var d4,l5=this;r3=Number(r3);var $5=b3.p(f3),y7=__name(function(t5){var e4=O3(l5);return b3.w(e4.date(e4.date()+Math.round(t5*r3)),l5)},"y");if($5===c3)return this.set(c3,this.$M+r3);if($5===h3)return this.set(h3,this.$y+r3);if($5===a2)return y7(1);if($5===o2)return y7(7);var M5=(d4={},d4[s2]=6e4,d4[u2]=36e5,d4[i2]=1e3,d4)[$5]||1,m5=this.$d.getTime()+r3*M5;return b3.w(m5,this)},m4.subtract=function(t5,e4){return this.add(-1*t5,e4)},m4.format=function(t5){var e4=this,n3=this.$locale();if(!this.isValid())return n3.invalidDate||l4;var r3=t5||"YYYY-MM-DDTHH:mm:ssZ",i3=b3.z(this),s3=this.$H,u3=this.$m,a3=this.$M,o3=n3.weekdays,c4=n3.months,f3=n3.meridiem,h4=__name(function(t6,n4,i4,s4){return t6&&(t6[n4]||t6(e4,r3))||i4[n4].slice(0,s4)},"h"),d4=__name(function(t6){return b3.s(s3%12||12,t6,"0")},"d"),$5=f3||function(t6,e6,n4){var r4=t6<12?"AM":"PM";return n4?r4.toLowerCase():r4};return r3.replace(y6,function(t6,r4){return r4||function(t7){switch(t7){case"YY":return String(e4.$y).slice(-2);case"YYYY":return b3.s(e4.$y,4,"0");case"M":return a3+1;case"MM":return b3.s(a3+1,2,"0");case"MMM":return h4(n3.monthsShort,a3,c4,3);case"MMMM":return h4(c4,a3);case"D":return e4.$D;case"DD":return b3.s(e4.$D,2,"0");case"d":return String(e4.$W);case"dd":return h4(n3.weekdaysMin,e4.$W,o3,2);case"ddd":return h4(n3.weekdaysShort,e4.$W,o3,3);case"dddd":return o3[e4.$W];case"H":return String(s3);case"HH":return b3.s(s3,2,"0");case"h":return d4(1);case"hh":return d4(2);case"a":return $5(s3,u3,!0);case"A":return $5(s3,u3,!1);case"m":return String(u3);case"mm":return b3.s(u3,2,"0");case"s":return String(e4.$s);case"ss":return b3.s(e4.$s,2,"0");case"SSS":return b3.s(e4.$ms,3,"0");case"Z":return i3}return null}(t6)||i3.replace(":","")})},m4.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m4.diff=function(r3,d4,l5){var $5,y7=this,M5=b3.p(d4),m5=O3(r3),v5=6e4*(m5.utcOffset()-this.utcOffset()),g3=this-m5,D5=__name(function(){return b3.m(y7,m5)},"D");switch(M5){case h3:$5=D5()/12;break;case c3:$5=D5();break;case f2:$5=D5()/3;break;case o2:$5=(g3-v5)/6048e5;break;case a2:$5=(g3-v5)/864e5;break;case u2:$5=g3/36e5;break;case s2:$5=g3/6e4;break;case i2:$5=g3/1e3;break;default:$5=g3}return l5?$5:b3.a($5)},m4.daysInMonth=function(){return this.endOf(c3).$D},m4.$locale=function(){return D4[this.$L]},m4.locale=function(t5,e4){if(!t5)return this.$L;var n3=this.clone(),r3=w4(t5,e4,!0);return r3&&(n3.$L=r3),n3},m4.clone=function(){return b3.w(this.$d,this)},m4.toDate=function(){return new Date(this.valueOf())},m4.toJSON=function(){return this.isValid()?this.toISOString():null},m4.toISOString=function(){return this.$d.toISOString()},m4.toString=function(){return this.$d.toUTCString()},M4}(),k2=_3.prototype;return O3.prototype=k2,[["$ms",r2],["$s",i2],["$m",s2],["$H",u2],["$W",a2],["$M",c3],["$y",h3],["$D",d3]].forEach(function(t5){k2[t5[1]]=function(e4){return this.$g(e4,t5[0],t5[1])}}),O3.extend=function(t5,e4){return t5.$i||(t5(e4,_3,O3),t5.$i=!0),O3},O3.locale=w4,O3.isDayjs=S4,O3.unix=function(t5){return O3(1e3*t5)},O3.en=D4[g2],O3.Ls=D4,O3.p={},O3},"object"==typeof exports2&&void 0!==module2?module2.exports=e3():"function"==typeof define&&define.amd?define(e3):(t4="undefined"!=typeof globalThis?globalThis:t4||self).dayjs=e3()}}),init_logger=__esm({"src/logger.ts"(){import_dayjs=__toESM(require_dayjs_min(),1),LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log={trace:__name((..._args)=>{},"trace"),debug:__name((..._args)=>{},"debug"),info:__name((..._args)=>{},"info"),warn:__name((..._args)=>{},"warn"),error:__name((..._args)=>{},"error"),fatal:__name((..._args)=>{},"fatal")},setLogLevel=__name(function(level="fatal"){let numericLevel=LEVELS.fatal;"string"==typeof level?level.toLowerCase()in LEVELS&&(numericLevel=LEVELS[level]):"number"==typeof level&&(numericLevel=level),log.trace=()=>{},log.debug=()=>{},log.info=()=>{},log.warn=()=>{},log.error=()=>{},log.fatal=()=>{},numericLevel<=LEVELS.fatal&&(log.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"[35m",format("FATAL"))),numericLevel<=LEVELS.error&&(log.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"[31m",format("ERROR"))),numericLevel<=LEVELS.warn&&(log.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"[33m",format("WARN"))),numericLevel<=LEVELS.info&&(log.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"[34m",format("INFO"))),numericLevel<=LEVELS.debug&&(log.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",format("DEBUG"))),numericLevel<=LEVELS.trace&&(log.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",format("TRACE")))},"setLogLevel"),format=__name(level=>`%c${(0,import_dayjs.default)().format("ss.SSS")} : ${level} : `,"format")}}),init_channel=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/utils/channel.js"(){channel_default=Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:__name(r2=>r2>=255?255:r2<0?0:r2,"r"),g:__name(g2=>g2>=255?255:g2<0?0:g2,"g"),b:__name(b3=>b3>=255?255:b3<0?0:b3,"b"),h:__name(h3=>h3%360,"h"),s:__name(s2=>s2>=100?100:s2<0?0:s2,"s"),l:__name(l4=>l4>=100?100:l4<0?0:l4,"l"),a:__name(a2=>a2>=1?1:a2<0?0:a2,"a")},toLinear:__name(c3=>{const n2=c3/255;return c3>.03928?Math.pow((n2+.055)/1.055,2.4):n2/12.92},"toLinear"),hue2rgb:__name((p3,q3,t4)=>(t4<0&&(t4+=1),t4>1&&(t4-=1),t4<1/6?p3+6*(q3-p3)*t4:t4<.5?q3:t4<2/3?p3+(q3-p3)*(2/3-t4)*6:p3),"hue2rgb"),hsl2rgb:__name(({h:h3,s:s2,l:l4},channel2)=>{if(!s2)return 2.55*l4;h3/=360,s2/=100;const q3=(l4/=100)<.5?l4*(1+s2):l4+s2-l4*s2,p3=2*l4-q3;switch(channel2){case"r":return 255*Channel.hue2rgb(p3,q3,h3+1/3);case"g":return 255*Channel.hue2rgb(p3,q3,h3);case"b":return 255*Channel.hue2rgb(p3,q3,h3-1/3)}},"hsl2rgb"),rgb2hsl:__name(({r:r2,g:g2,b:b3},channel2)=>{r2/=255,g2/=255,b3/=255;const max10=Math.max(r2,g2,b3),min9=Math.min(r2,g2,b3),l4=(max10+min9)/2;if("l"===channel2)return 100*l4;if(max10===min9)return 0;const d3=max10-min9;if("s"===channel2)return 100*(l4>.5?d3/(2-max10-min9):d3/(max10+min9));switch(max10){case r2:return 60*((g2-b3)/d3+(g2<b3?6:0));case g2:return 60*((b3-r2)/d3+2);case b3:return 60*((r2-g2)/d3+4);default:return-1}},"rgb2hsl")}}}),init_lang=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/utils/lang.js"(){lang_default={clamp:__name((number7,lower2,upper)=>lower2>upper?Math.min(lower2,Math.max(upper,number7)):Math.min(upper,Math.max(lower2,number7)),"clamp"),round:__name(number7=>Math.round(1e10*number7)/1e10,"round")}}}),init_unit=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/utils/unit.js"(){unit_default={dec2hex:__name(dec=>{const hex2=Math.round(dec).toString(16);return hex2.length>1?hex2:`0${hex2}`},"dec2hex")}}}),init_utils=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/utils/index.js"(){init_channel(),init_lang(),init_unit(),utils_default={channel:channel_default,lang:lang_default,unit:unit_default}}}),init_constants=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/constants.js"(){init_utils(),DEC2HEX={};for(let i2=0;i2<=255;i2++)DEC2HEX[i2]=utils_default.unit.dec2hex(i2);TYPE={ALL:0,RGB:1,HSL:2}}}),init_type=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/channels/type.js"(){init_constants(),Type=class{static{__name(this,"Type")}constructor(){this.type=TYPE.ALL}get(){return this.type}set(type3){if(this.type&&this.type!==type3)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=type3}reset(){this.type=TYPE.ALL}is(type3){return this.type===type3}},type_default=Type}}),init_channels=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/channels/index.js"(){init_utils(),init_type(),init_constants(),Channels=class{static{__name(this,"Channels")}constructor(data5,color2){this.color=color2,this.changed=!1,this.data=data5,this.type=new type_default}set(data5,color2){return this.color=color2,this.changed=!1,this.data=data5,this.type.type=TYPE.ALL,this}_ensureHSL(){const data5=this.data,{h:h3,s:s2,l:l4}=data5;void 0===h3&&(data5.h=utils_default.channel.rgb2hsl(data5,"h")),void 0===s2&&(data5.s=utils_default.channel.rgb2hsl(data5,"s")),void 0===l4&&(data5.l=utils_default.channel.rgb2hsl(data5,"l"))}_ensureRGB(){const data5=this.data,{r:r2,g:g2,b:b3}=data5;void 0===r2&&(data5.r=utils_default.channel.hsl2rgb(data5,"r")),void 0===g2&&(data5.g=utils_default.channel.hsl2rgb(data5,"g")),void 0===b3&&(data5.b=utils_default.channel.hsl2rgb(data5,"b"))}get r(){const data5=this.data,r2=data5.r;return this.type.is(TYPE.HSL)||void 0===r2?(this._ensureHSL(),utils_default.channel.hsl2rgb(data5,"r")):r2}get g(){const data5=this.data,g2=data5.g;return this.type.is(TYPE.HSL)||void 0===g2?(this._ensureHSL(),utils_default.channel.hsl2rgb(data5,"g")):g2}get b(){const data5=this.data,b3=data5.b;return this.type.is(TYPE.HSL)||void 0===b3?(this._ensureHSL(),utils_default.channel.hsl2rgb(data5,"b")):b3}get h(){const data5=this.data,h3=data5.h;return this.type.is(TYPE.RGB)||void 0===h3?(this._ensureRGB(),utils_default.channel.rgb2hsl(data5,"h")):h3}get s(){const data5=this.data,s2=data5.s;return this.type.is(TYPE.RGB)||void 0===s2?(this._ensureRGB(),utils_default.channel.rgb2hsl(data5,"s")):s2}get l(){const data5=this.data,l4=data5.l;return this.type.is(TYPE.RGB)||void 0===l4?(this._ensureRGB(),utils_default.channel.rgb2hsl(data5,"l")):l4}get a(){return this.data.a}set r(r2){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=r2}set g(g2){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=g2}set b(b3){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=b3}set h(h3){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=h3}set s(s2){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=s2}set l(l4){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=l4}set a(a2){this.changed=!0,this.data.a=a2}},channels_default=Channels}}),init_reusable=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/channels/reusable.js"(){init_channels(),channels=new channels_default({r:0,g:0,b:0,a:0},"transparent"),reusable_default=channels}}),init_hex=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/color/hex.js"(){init_reusable(),init_constants(),hex_default=Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:__name(color2=>{if(35!==color2.charCodeAt(0))return;const match2=color2.match(Hex.re);if(!match2)return;const hex2=match2[1],dec=parseInt(hex2,16),length2=hex2.length,hasAlpha=length2%4==0,isFullLength=length2>4,multiplier=isFullLength?1:17,bits=isFullLength?8:4,bitsOffset=hasAlpha?0:-1,mask=isFullLength?255:15;return reusable_default.set({r:(dec>>bits*(bitsOffset+3)&mask)*multiplier,g:(dec>>bits*(bitsOffset+2)&mask)*multiplier,b:(dec>>bits*(bitsOffset+1)&mask)*multiplier,a:hasAlpha?(dec&mask)*multiplier/255:1},color2)},"parse"),stringify:__name(channels2=>{const{r:r2,g:g2,b:b3,a:a2}=channels2;return a2<1?`#${DEC2HEX[Math.round(r2)]}${DEC2HEX[Math.round(g2)]}${DEC2HEX[Math.round(b3)]}${DEC2HEX[Math.round(255*a2)]}`:`#${DEC2HEX[Math.round(r2)]}${DEC2HEX[Math.round(g2)]}${DEC2HEX[Math.round(b3)]}`},"stringify")}}}),init_hsl=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/color/hsl.js"(){init_utils(),init_reusable(),hsl_default=HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:__name(hue2=>{const match2=hue2.match(HSL.hueRe);if(match2){const[,number7,unit2]=match2;switch(unit2){case"grad":return utils_default.channel.clamp.h(.9*parseFloat(number7));case"rad":return utils_default.channel.clamp.h(180*parseFloat(number7)/Math.PI);case"turn":return utils_default.channel.clamp.h(360*parseFloat(number7))}}return utils_default.channel.clamp.h(parseFloat(hue2))},"_hue2deg"),parse:__name(color2=>{const charCode=color2.charCodeAt(0);if(104!==charCode&&72!==charCode)return;const match2=color2.match(HSL.re);if(!match2)return;const[,h3,s2,l4,a2,isAlphaPercentage]=match2;return reusable_default.set({h:HSL._hue2deg(h3),s:utils_default.channel.clamp.s(parseFloat(s2)),l:utils_default.channel.clamp.l(parseFloat(l4)),a:a2?utils_default.channel.clamp.a(isAlphaPercentage?parseFloat(a2)/100:parseFloat(a2)):1},color2)},"parse"),stringify:__name(channels2=>{const{h:h3,s:s2,l:l4,a:a2}=channels2;return a2<1?`hsla(${utils_default.lang.round(h3)}, ${utils_default.lang.round(s2)}%, ${utils_default.lang.round(l4)}%, ${a2})`:`hsl(${utils_default.lang.round(h3)}, ${utils_default.lang.round(s2)}%, ${utils_default.lang.round(l4)}%)`},"stringify")}}}),init_keyword=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/color/keyword.js"(){init_hex(),keyword_default=Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:__name(color2=>{color2=color2.toLowerCase();const hex2=Keyword.colors[color2];if(hex2)return hex_default.parse(hex2)},"parse"),stringify:__name(channels2=>{const hex2=hex_default.stringify(channels2);for(const name in Keyword.colors)if(Keyword.colors[name]===hex2)return name},"stringify")}}}),init_rgb=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/color/rgb.js"(){init_utils(),init_reusable(),rgb_default=RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:__name(color2=>{const charCode=color2.charCodeAt(0);if(114!==charCode&&82!==charCode)return;const match2=color2.match(RGB.re);if(!match2)return;const[,r2,isRedPercentage,g2,isGreenPercentage,b3,isBluePercentage,a2,isAlphaPercentage]=match2;return reusable_default.set({r:utils_default.channel.clamp.r(isRedPercentage?2.55*parseFloat(r2):parseFloat(r2)),g:utils_default.channel.clamp.g(isGreenPercentage?2.55*parseFloat(g2):parseFloat(g2)),b:utils_default.channel.clamp.b(isBluePercentage?2.55*parseFloat(b3):parseFloat(b3)),a:a2?utils_default.channel.clamp.a(isAlphaPercentage?parseFloat(a2)/100:parseFloat(a2)):1},color2)},"parse"),stringify:__name(channels2=>{const{r:r2,g:g2,b:b3,a:a2}=channels2;return a2<1?`rgba(${utils_default.lang.round(r2)}, ${utils_default.lang.round(g2)}, ${utils_default.lang.round(b3)}, ${utils_default.lang.round(a2)})`:`rgb(${utils_default.lang.round(r2)}, ${utils_default.lang.round(g2)}, ${utils_default.lang.round(b3)})`},"stringify")}}}),init_color=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/color/index.js"(){init_hex(),init_hsl(),init_keyword(),init_rgb(),init_constants(),color_default={format:{keyword:keyword_default,hex:hex_default,rgb:rgb_default,rgba:rgb_default,hsl:hsl_default,hsla:hsl_default},parse:__name(color2=>{if("string"!=typeof color2)return color2;const channels2=hex_default.parse(color2)||rgb_default.parse(color2)||hsl_default.parse(color2)||keyword_default.parse(color2);if(channels2)return channels2;throw new Error(`Unsupported color format: "${color2}"`)},"parse"),stringify:__name(channels2=>!channels2.changed&&channels2.color?channels2.color:channels2.type.is(TYPE.HSL)||void 0===channels2.data.r?hsl_default.stringify(channels2):channels2.a<1||!Number.isInteger(channels2.r)||!Number.isInteger(channels2.g)||!Number.isInteger(channels2.b)?rgb_default.stringify(channels2):hex_default.stringify(channels2),"stringify")}}}),init_change=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/change.js"(){init_utils(),init_color(),change=__name((color2,channels2)=>{const ch=color_default.parse(color2);for(const c3 in channels2)ch[c3]=utils_default.channel.clamp[c3](channels2[c3]);return color_default.stringify(ch)},"change"),change_default=change}}),init_rgba=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/rgba.js"(){init_utils(),init_reusable(),init_color(),init_change(),rgba_default=__name((r2,g2,b3=0,a2=1)=>{if("number"!=typeof r2)return change_default(r2,{a:g2});const channels2=reusable_default.set({r:utils_default.channel.clamp.r(r2),g:utils_default.channel.clamp.g(g2),b:utils_default.channel.clamp.b(b3),a:utils_default.channel.clamp.a(a2)});return color_default.stringify(channels2)},"rgba")}}),init_channel2=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/channel.js"(){init_utils(),init_color(),channel_default2=__name((color2,channel2)=>utils_default.lang.round(color_default.parse(color2)[channel2]),"channel")}}),init_luminance=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/luminance.js"(){init_utils(),init_color(),luminance_default=__name(color2=>{const{r:r2,g:g2,b:b3}=color_default.parse(color2),luminance2=.2126*utils_default.channel.toLinear(r2)+.7152*utils_default.channel.toLinear(g2)+.0722*utils_default.channel.toLinear(b3);return utils_default.lang.round(luminance2)},"luminance")}}),init_is_light=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/is_light.js"(){init_luminance(),is_light_default=__name(color2=>luminance_default(color2)>=.5,"isLight")}}),init_is_dark=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/is_dark.js"(){init_is_light(),is_dark_default=__name(color2=>!is_light_default(color2),"isDark")}}),init_adjust_channel=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/adjust_channel.js"(){init_utils(),init_color(),adjust_channel_default=__name((color2,channel2,amount)=>{const channels2=color_default.parse(color2),amountCurrent=channels2[channel2],amountNext=utils_default.channel.clamp[channel2](amountCurrent+amount);return amountCurrent!==amountNext&&(channels2[channel2]=amountNext),color_default.stringify(channels2)},"adjustChannel")}}),init_lighten=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/lighten.js"(){init_adjust_channel(),lighten_default=__name((color2,amount)=>adjust_channel_default(color2,"l",amount),"lighten")}}),init_darken=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/darken.js"(){init_adjust_channel(),darken_default=__name((color2,amount)=>adjust_channel_default(color2,"l",-amount),"darken")}}),init_adjust=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/adjust.js"(){init_color(),init_change(),adjust=__name((color2,channels2)=>{const ch=color_default.parse(color2),changes={};for(const c3 in channels2)channels2[c3]&&(changes[c3]=ch[c3]+channels2[c3]);return change_default(color2,changes)},"adjust"),adjust_default=adjust}}),init_mix=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/mix.js"(){init_color(),init_rgba(),mix_default=__name((color1,color2,weight8=50)=>{const{r:r1,g:g1,b:b1,a:a1}=color_default.parse(color1),{r:r2,g:g2,b:b22,a:a2}=color_default.parse(color2),weightScale=weight8/100,weightNormalized=2*weightScale-1,alphaDelta=a1-a2,weight1=((weightNormalized*alphaDelta===-1?weightNormalized:(weightNormalized+alphaDelta)/(1+weightNormalized*alphaDelta))+1)/2,weight22=1-weight1;return rgba_default(r1*weight1+r2*weight22,g1*weight1+g2*weight22,b1*weight1+b22*weight22,a1*weightScale+a2*(1-weightScale))},"mix")}}),init_invert=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/invert.js"(){init_color(),init_mix(),invert_default=__name((color2,weight8=100)=>{const inverse=color_default.parse(color2);return inverse.r=255-inverse.r,inverse.g=255-inverse.g,inverse.b=255-inverse.b,mix_default(inverse,color2,weight8)},"invert")}}),init_methods=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/methods/index.js"(){init_rgba(),init_channel2(),init_is_dark(),init_lighten(),init_darken(),init_adjust(),init_invert()}}),init_dist=__esm({"../../node_modules/.pnpm/khroma@2.1.0/node_modules/khroma/dist/index.js"(){init_methods()}}),init_erDiagram_oldHardcodedValues=__esm({"src/themes/erDiagram-oldHardcodedValues.ts"(){oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2"}}),init_theme_helpers=__esm({"src/themes/theme-helpers.js"(){init_dist(),mkBorder=__name((col,darkMode)=>adjust_default(col,darkMode?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder")}}),init_theme_base=__esm({"src/themes/theme-base.js"(){init_dist(),init_erDiagram_oldHardcodedValues(),init_theme_helpers(),Theme=class{static{__name(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust_default(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust_default(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert_default(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert_default(this.tertiaryColor),this.lineColor=this.lineColor||invert_default(this.background),this.arrowheadColor=this.arrowheadColor||invert_default(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken_default(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken_default(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert_default(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten_default(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||darken_default(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||darken_default(this.mainBkg,10)):(this.rowOdd=this.rowOdd||lighten_default(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||lighten_default(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust_default(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust_default(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust_default(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust_default(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust_default(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust_default(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust_default(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust_default(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust_default(this.primaryColor,{h:330}),this.darkMode)for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScale"+i2]=darken_default(this["cScale"+i2],75);else for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScale"+i2]=darken_default(this["cScale"+i2],25);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleInv"+i2]=this["cScaleInv"+i2]||invert_default(this["cScale"+i2]);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this.darkMode?this["cScalePeer"+i2]=this["cScalePeer"+i2]||lighten_default(this["cScale"+i2],10):this["cScalePeer"+i2]=this["cScalePeer"+i2]||darken_default(this["cScale"+i2],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleLabel"+i2]=this["cScaleLabel"+i2]||this.scaleLabelColor;const multiplier=this.darkMode?-4:-1;for(let i2=0;i2<5;i2++)this["surface"+i2]=this["surface"+i2]||adjust_default(this.mainBkg,{h:180,s:-15,l:multiplier*(5+3*i2)}),this["surfacePeer"+i2]=this["surfacePeer"+i2]||adjust_default(this.mainBkg,{h:180,s:-15,l:multiplier*(8+3*i2)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust_default(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust_default(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust_default(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust_default(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust_default(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust_default(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust_default(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust_default(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust_default(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust_default(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust_default(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust_default(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust_default(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust_default(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust_default(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust_default(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust_default(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust_default(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust_default(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust_default(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust_default(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||is_dark_default(this.quadrant1Fill)?lighten_default(this.quadrant1Fill):darken_default(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken_default(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust_default(this.primaryColor,{h:-30}),this.git4=this.git4||adjust_default(this.primaryColor,{h:-60}),this.git5=this.git5||adjust_default(this.primaryColor,{h:-90}),this.git6=this.git6||adjust_default(this.primaryColor,{h:60}),this.git7=this.git7||adjust_default(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten_default(this.git0,25),this.git1=lighten_default(this.git1,25),this.git2=lighten_default(this.git2,25),this.git3=lighten_default(this.git3,25),this.git4=lighten_default(this.git4,25),this.git5=lighten_default(this.git5,25),this.git6=lighten_default(this.git6,25),this.git7=lighten_default(this.git7,25)):(this.git0=darken_default(this.git0,25),this.git1=darken_default(this.git1,25),this.git2=darken_default(this.git2,25),this.git3=darken_default(this.git3,25),this.git4=darken_default(this.git4,25),this.git5=darken_default(this.git5,25),this.git6=darken_default(this.git6,25),this.git7=darken_default(this.git7,25)),this.gitInv0=this.gitInv0||invert_default(this.git0),this.gitInv1=this.gitInv1||invert_default(this.git1),this.gitInv2=this.gitInv2||invert_default(this.git2),this.gitInv3=this.gitInv3||invert_default(this.git3),this.gitInv4=this.gitInv4||invert_default(this.git4),this.gitInv5=this.gitInv5||invert_default(this.git5),this.gitInv6=this.gitInv6||invert_default(this.git6),this.gitInv7=this.gitInv7||invert_default(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(overrides){if("object"!=typeof overrides)return void this.updateColors();const keys2=Object.keys(overrides);keys2.forEach(k2=>{this[k2]=overrides[k2]}),this.updateColors(),keys2.forEach(k2=>{this[k2]=overrides[k2]})}},getThemeVariables=__name(userOverrides=>{const theme=new Theme;return theme.calculate(userOverrides),theme},"getThemeVariables")}}),init_theme_dark=__esm({"src/themes/theme-dark.js"(){init_dist(),init_theme_helpers(),Theme2=class{static{__name(this,"Theme")}constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten_default(this.primaryColor,16),this.tertiaryColor=adjust_default(this.primaryColor,{h:-160}),this.primaryBorderColor=invert_default(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert_default(this.primaryColor),this.secondaryTextColor=invert_default(this.secondaryColor),this.tertiaryTextColor=invert_default(this.tertiaryColor),this.lineColor=invert_default(this.background),this.textColor=invert_default(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten_default(invert_default("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=rgba_default(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken_default("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=darken_default(this.sectionBkgColor,10),this.taskBorderColor=rgba_default(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba_default(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||lighten_default(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||darken_default(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=lighten_default(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten_default(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten_default(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust_default(this.primaryColor,{h:64}),this.fillType3=adjust_default(this.secondaryColor,{h:64}),this.fillType4=adjust_default(this.primaryColor,{h:-64}),this.fillType5=adjust_default(this.secondaryColor,{h:-64}),this.fillType6=adjust_default(this.primaryColor,{h:128}),this.fillType7=adjust_default(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust_default(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust_default(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust_default(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust_default(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust_default(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust_default(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust_default(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust_default(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust_default(this.primaryColor,{h:330});for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleInv"+i2]=this["cScaleInv"+i2]||invert_default(this["cScale"+i2]);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScalePeer"+i2]=this["cScalePeer"+i2]||lighten_default(this["cScale"+i2],10);for(let i2=0;i2<5;i2++)this["surface"+i2]=this["surface"+i2]||adjust_default(this.mainBkg,{h:30,s:-30,l:-(4*i2-10)}),this["surfacePeer"+i2]=this["surfacePeer"+i2]||adjust_default(this.mainBkg,{h:30,s:-30,l:-(4*i2-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleLabel"+i2]=this["cScaleLabel"+i2]||this.scaleLabelColor;for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["pie"+i2]=this["cScale"+i2];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust_default(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust_default(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust_default(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust_default(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust_default(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust_default(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||is_dark_default(this.quadrant1Fill)?lighten_default(this.quadrant1Fill):darken_default(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken_default(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten_default(this.secondaryColor,20),this.git1=lighten_default(this.pie2||this.secondaryColor,20),this.git2=lighten_default(this.pie3||this.tertiaryColor,20),this.git3=lighten_default(this.pie4||adjust_default(this.primaryColor,{h:-30}),20),this.git4=lighten_default(this.pie5||adjust_default(this.primaryColor,{h:-60}),20),this.git5=lighten_default(this.pie6||adjust_default(this.primaryColor,{h:-90}),10),this.git6=lighten_default(this.pie7||adjust_default(this.primaryColor,{h:60}),10),this.git7=lighten_default(this.pie8||adjust_default(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert_default(this.git0),this.gitInv1=this.gitInv1||invert_default(this.git1),this.gitInv2=this.gitInv2||invert_default(this.git2),this.gitInv3=this.gitInv3||invert_default(this.git3),this.gitInv4=this.gitInv4||invert_default(this.git4),this.gitInv5=this.gitInv5||invert_default(this.git5),this.gitInv6=this.gitInv6||invert_default(this.git6),this.gitInv7=this.gitInv7||invert_default(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert_default(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert_default(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten_default(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten_default(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(overrides){if("object"!=typeof overrides)return void this.updateColors();const keys2=Object.keys(overrides);keys2.forEach(k2=>{this[k2]=overrides[k2]}),this.updateColors(),keys2.forEach(k2=>{this[k2]=overrides[k2]})}},getThemeVariables2=__name(userOverrides=>{const theme=new Theme2;return theme.calculate(userOverrides),theme},"getThemeVariables")}}),init_theme_default=__esm({"src/themes/theme-default.js"(){init_dist(),init_theme_helpers(),init_erDiagram_oldHardcodedValues(),Theme3=class{static{__name(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust_default(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust_default(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert_default(this.primaryColor),this.secondaryTextColor=invert_default(this.secondaryColor),this.tertiaryTextColor=invert_default(this.tertiaryColor),this.lineColor=invert_default(this.background),this.textColor=invert_default(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=rgba_default(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust_default(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust_default(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust_default(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust_default(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust_default(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust_default(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust_default(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust_default(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust_default(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken_default(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken_default(this.tertiaryColor,40);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScale"+i2]=darken_default(this["cScale"+i2],10),this["cScalePeer"+i2]=this["cScalePeer"+i2]||darken_default(this["cScale"+i2],25);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleInv"+i2]=this["cScaleInv"+i2]||adjust_default(this["cScale"+i2],{h:180});for(let i2=0;i2<5;i2++)this["surface"+i2]=this["surface"+i2]||adjust_default(this.mainBkg,{h:30,l:-(5+5*i2)}),this["surfacePeer"+i2]=this["surfacePeer"+i2]||adjust_default(this.mainBkg,{h:30,l:-(7+5*i2)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||invert_default(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert_default(this.labelTextColor);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleLabel"+i2]=this["cScaleLabel"+i2]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten_default(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||lighten_default(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||lighten_default(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust_default(this.primaryColor,{h:64}),this.fillType3=adjust_default(this.secondaryColor,{h:64}),this.fillType4=adjust_default(this.primaryColor,{h:-64}),this.fillType5=adjust_default(this.secondaryColor,{h:-64}),this.fillType6=adjust_default(this.primaryColor,{h:128}),this.fillType7=adjust_default(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust_default(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust_default(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust_default(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust_default(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust_default(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust_default(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust_default(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust_default(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust_default(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust_default(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust_default(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust_default(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust_default(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust_default(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust_default(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust_default(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||is_dark_default(this.quadrant1Fill)?lighten_default(this.quadrant1Fill):darken_default(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust_default(this.primaryColor,{h:-30}),this.git4=this.git4||adjust_default(this.primaryColor,{h:-60}),this.git5=this.git5||adjust_default(this.primaryColor,{h:-90}),this.git6=this.git6||adjust_default(this.primaryColor,{h:60}),this.git7=this.git7||adjust_default(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten_default(this.git0,25),this.git1=lighten_default(this.git1,25),this.git2=lighten_default(this.git2,25),this.git3=lighten_default(this.git3,25),this.git4=lighten_default(this.git4,25),this.git5=lighten_default(this.git5,25),this.git6=lighten_default(this.git6,25),this.git7=lighten_default(this.git7,25)):(this.git0=darken_default(this.git0,25),this.git1=darken_default(this.git1,25),this.git2=darken_default(this.git2,25),this.git3=darken_default(this.git3,25),this.git4=darken_default(this.git4,25),this.git5=darken_default(this.git5,25),this.git6=darken_default(this.git6,25),this.git7=darken_default(this.git7,25)),this.gitInv0=this.gitInv0||darken_default(invert_default(this.git0),25),this.gitInv1=this.gitInv1||invert_default(this.git1),this.gitInv2=this.gitInv2||invert_default(this.git2),this.gitInv3=this.gitInv3||invert_default(this.git3),this.gitInv4=this.gitInv4||invert_default(this.git4),this.gitInv5=this.gitInv5||invert_default(this.git5),this.gitInv6=this.gitInv6||invert_default(this.git6),this.gitInv7=this.gitInv7||invert_default(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert_default(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert_default(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(overrides){if(Object.keys(this).forEach(k2=>{"calculated"===this[k2]&&(this[k2]=void 0)}),"object"!=typeof overrides)return void this.updateColors();const keys2=Object.keys(overrides);keys2.forEach(k2=>{this[k2]=overrides[k2]}),this.updateColors(),keys2.forEach(k2=>{this[k2]=overrides[k2]})}},getThemeVariables3=__name(userOverrides=>{const theme=new Theme3;return theme.calculate(userOverrides),theme},"getThemeVariables")}}),init_theme_forest=__esm({"src/themes/theme-forest.js"(){init_dist(),init_erDiagram_oldHardcodedValues(),init_theme_helpers(),Theme4=class{static{__name(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten_default("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert_default(this.primaryColor),this.secondaryTextColor=invert_default(this.secondaryColor),this.tertiaryTextColor=invert_default(this.primaryColor),this.lineColor=invert_default(this.background),this.textColor=invert_default(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=darken_default(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust_default(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust_default(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust_default(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust_default(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust_default(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust_default(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust_default(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust_default(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust_default(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken_default(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken_default(this.tertiaryColor,40);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScale"+i2]=darken_default(this["cScale"+i2],10),this["cScalePeer"+i2]=this["cScalePeer"+i2]||darken_default(this["cScale"+i2],25);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleInv"+i2]=this["cScaleInv"+i2]||adjust_default(this["cScale"+i2],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleLabel"+i2]=this["cScaleLabel"+i2]||this.scaleLabelColor;for(let i2=0;i2<5;i2++)this["surface"+i2]=this["surface"+i2]||adjust_default(this.mainBkg,{h:30,s:-30,l:-(5+5*i2)}),this["surfacePeer"+i2]=this["surfacePeer"+i2]||adjust_default(this.mainBkg,{h:30,s:-30,l:-(8+5*i2)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||lighten_default(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||lighten_default(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust_default(this.primaryColor,{h:64}),this.fillType3=adjust_default(this.secondaryColor,{h:64}),this.fillType4=adjust_default(this.primaryColor,{h:-64}),this.fillType5=adjust_default(this.secondaryColor,{h:-64}),this.fillType6=adjust_default(this.primaryColor,{h:128}),this.fillType7=adjust_default(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust_default(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust_default(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust_default(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust_default(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust_default(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust_default(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust_default(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust_default(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust_default(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust_default(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust_default(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust_default(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust_default(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust_default(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust_default(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||is_dark_default(this.quadrant1Fill)?lighten_default(this.quadrant1Fill):darken_default(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust_default(this.primaryColor,{h:-30}),this.git4=this.git4||adjust_default(this.primaryColor,{h:-60}),this.git5=this.git5||adjust_default(this.primaryColor,{h:-90}),this.git6=this.git6||adjust_default(this.primaryColor,{h:60}),this.git7=this.git7||adjust_default(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten_default(this.git0,25),this.git1=lighten_default(this.git1,25),this.git2=lighten_default(this.git2,25),this.git3=lighten_default(this.git3,25),this.git4=lighten_default(this.git4,25),this.git5=lighten_default(this.git5,25),this.git6=lighten_default(this.git6,25),this.git7=lighten_default(this.git7,25)):(this.git0=darken_default(this.git0,25),this.git1=darken_default(this.git1,25),this.git2=darken_default(this.git2,25),this.git3=darken_default(this.git3,25),this.git4=darken_default(this.git4,25),this.git5=darken_default(this.git5,25),this.git6=darken_default(this.git6,25),this.git7=darken_default(this.git7,25)),this.gitInv0=this.gitInv0||invert_default(this.git0),this.gitInv1=this.gitInv1||invert_default(this.git1),this.gitInv2=this.gitInv2||invert_default(this.git2),this.gitInv3=this.gitInv3||invert_default(this.git3),this.gitInv4=this.gitInv4||invert_default(this.git4),this.gitInv5=this.gitInv5||invert_default(this.git5),this.gitInv6=this.gitInv6||invert_default(this.git6),this.gitInv7=this.gitInv7||invert_default(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert_default(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert_default(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(overrides){if("object"!=typeof overrides)return void this.updateColors();const keys2=Object.keys(overrides);keys2.forEach(k2=>{this[k2]=overrides[k2]}),this.updateColors(),keys2.forEach(k2=>{this[k2]=overrides[k2]})}},getThemeVariables4=__name(userOverrides=>{const theme=new Theme4;return theme.calculate(userOverrides),theme},"getThemeVariables")}}),init_theme_neutral=__esm({"src/themes/theme-neutral.js"(){init_dist(),init_theme_helpers(),init_erDiagram_oldHardcodedValues(),Theme5=class{static{__name(this,"Theme")}constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten_default(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust_default(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert_default(this.primaryColor),this.secondaryTextColor=invert_default(this.secondaryColor),this.tertiaryTextColor=invert_default(this.tertiaryColor),this.lineColor=invert_default(this.background),this.textColor=invert_default(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||lighten_default(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=lighten_default(this.contrast,55),this.border2=this.contrast,this.actorBorder=lighten_default(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleInv"+i2]=this["cScaleInv"+i2]||invert_default(this["cScale"+i2]);for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this.darkMode?this["cScalePeer"+i2]=this["cScalePeer"+i2]||lighten_default(this["cScale"+i2],10):this["cScalePeer"+i2]=this["cScalePeer"+i2]||darken_default(this["cScale"+i2],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["cScaleLabel"+i2]=this["cScaleLabel"+i2]||this.scaleLabelColor;for(let i2=0;i2<5;i2++)this["surface"+i2]=this["surface"+i2]||adjust_default(this.mainBkg,{l:-(5+5*i2)}),this["surfacePeer"+i2]=this["surfacePeer"+i2]||adjust_default(this.mainBkg,{l:-(8+5*i2)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=lighten_default(this.contrast,30),this.sectionBkgColor2=lighten_default(this.contrast,30),this.taskBorderColor=darken_default(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten_default(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken_default(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust_default(this.primaryColor,{h:64}),this.fillType3=adjust_default(this.secondaryColor,{h:64}),this.fillType4=adjust_default(this.primaryColor,{h:-64}),this.fillType5=adjust_default(this.secondaryColor,{h:-64}),this.fillType6=adjust_default(this.primaryColor,{h:128}),this.fillType7=adjust_default(this.secondaryColor,{h:128});for(let i2=0;i2<this.THEME_COLOR_LIMIT;i2++)this["pie"+i2]=this["cScale"+i2];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust_default(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust_default(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust_default(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust_default(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust_default(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust_default(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||is_dark_default(this.quadrant1Fill)?lighten_default(this.quadrant1Fill):darken_default(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken_default(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust_default(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust_default(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust_default(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust_default(this.primaryColor,{h:60}),this.git7=this.pie8||adjust_default(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert_default(this.git0),this.gitInv1=this.gitInv1||invert_default(this.git1),this.gitInv2=this.gitInv2||invert_default(this.git2),this.gitInv3=this.gitInv3||invert_default(this.git3),this.gitInv4=this.gitInv4||invert_default(this.git4),this.gitInv5=this.gitInv5||invert_default(this.git5),this.gitInv6=this.gitInv6||invert_default(this.git6),this.gitInv7=this.gitInv7||invert_default(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(overrides){if("object"!=typeof overrides)return void this.updateColors();const keys2=Object.keys(overrides);keys2.forEach(k2=>{this[k2]=overrides[k2]}),this.updateColors(),keys2.forEach(k2=>{this[k2]=overrides[k2]})}},getThemeVariables5=__name(userOverrides=>{const theme=new Theme5;return theme.calculate(userOverrides),theme},"getThemeVariables")}}),init_themes=__esm({"src/themes/index.js"(){init_theme_base(),init_theme_dark(),init_theme_default(),init_theme_forest(),init_theme_neutral(),themes_default={base:{getThemeVariables:getThemeVariables},dark:{getThemeVariables:getThemeVariables2},default:{getThemeVariables:getThemeVariables3},forest:{getThemeVariables:getThemeVariables4},neutral:{getThemeVariables:getThemeVariables5}}}}),init_config_schema=__esm({"src/schemas/config.schema.yaml?only-defaults=true"(){config_schema_default={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1}}}),init_defaultConfig=__esm({"src/defaultConfig.ts"(){init_themes(),init_config_schema(),config={...config_schema_default,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:themes_default.default.getThemeVariables(),sequence:{...config_schema_default.sequence,messageFont:__name(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:__name(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:__name(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...config_schema_default.gantt,tickInterval:void 0,useWidth:void 0},c4:{...config_schema_default.c4,useWidth:void 0,personFont:__name(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...config_schema_default.flowchart,inheritDir:!1},external_personFont:__name(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:__name(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:__name(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:__name(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:__name(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:__name(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:__name(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:__name(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:__name(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:__name(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:__name(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:__name(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:__name(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:__name(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:__name(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:__name(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:__name(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:__name(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:__name(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:__name(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:__name(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...config_schema_default.pie,useWidth:984},xyChart:{...config_schema_default.xyChart,useWidth:void 0},requirement:{...config_schema_default.requirement,useWidth:void 0},packet:{...config_schema_default.packet},radar:{...config_schema_default.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},keyify=__name((obj,prefix="")=>Object.keys(obj).reduce((res,el)=>Array.isArray(obj[el])?res:"object"==typeof obj[el]&&null!==obj[el]?[...res,prefix+el,...keyify(obj[el],"")]:[...res,prefix+el],[]),"keyify"),configKeys=new Set(keyify(config,"")),defaultConfig_default=config}}),init_sanitizeDirective=__esm({"src/utils/sanitizeDirective.ts"(){init_defaultConfig(),init_logger(),sanitizeDirective=__name(args=>{if(log.debug("sanitizeDirective called with",args),"object"==typeof args&&null!=args)if(Array.isArray(args))args.forEach(arg=>sanitizeDirective(arg));else{for(const key of Object.keys(args)){if(log.debug("Checking key",key),key.startsWith("__")||key.includes("proto")||key.includes("constr")||!configKeys.has(key)||null==args[key]){log.debug("sanitize deleting key: ",key),delete args[key];continue}if("object"==typeof args[key]){log.debug("sanitizing object",key),sanitizeDirective(args[key]);continue}const cssMatchers=["themeCSS","fontFamily","altFontFamily"];for(const cssKey of cssMatchers)key.includes(cssKey)&&(log.debug("sanitizing css option",key),args[key]=sanitizeCss(args[key]))}if(args.themeVariables)for(const k2 of Object.keys(args.themeVariables)){const val=args.themeVariables[k2];val?.match&&!val.match(/^[\d "#%(),.;A-Za-z]+$/)&&(args.themeVariables[k2]="")}log.debug("After sanitization",args)}},"sanitizeDirective"),sanitizeCss=__name(str2=>{let startCnt=0,endCnt=0;for(const element3 of str2){if(startCnt<endCnt)return"{ /* ERROR: Unbalanced CSS */ }";"{"===element3?startCnt++:"}"===element3&&endCnt++}return startCnt!==endCnt?"{ /* ERROR: Unbalanced CSS */ }":str2},"sanitizeCss")}}),init_config=__esm({"src/config.ts"(){init_assignWithDepth(),init_logger(),init_themes(),init_defaultConfig(),init_sanitizeDirective(),defaultConfig=Object.freeze(defaultConfig_default),siteConfig=assignWithDepth_default({},defaultConfig),directives=[],currentConfig=assignWithDepth_default({},defaultConfig),updateCurrentConfig=__name((siteCfg,_directives)=>{let cfg=assignWithDepth_default({},siteCfg),sumOfDirectives={};for(const d3 of _directives)sanitize(d3),sumOfDirectives=assignWithDepth_default(sumOfDirectives,d3);if(cfg=assignWithDepth_default(cfg,sumOfDirectives),sumOfDirectives.theme&&sumOfDirectives.theme in themes_default){const tmpConfigFromInitialize=assignWithDepth_default({},configFromInitialize),themeVariables=assignWithDepth_default(tmpConfigFromInitialize.themeVariables||{},sumOfDirectives.themeVariables);cfg.theme&&cfg.theme in themes_default&&(cfg.themeVariables=themes_default[cfg.theme].getThemeVariables(themeVariables))}return checkConfig(currentConfig=cfg),currentConfig},"updateCurrentConfig"),setSiteConfig=__name(conf5=>(siteConfig=assignWithDepth_default({},defaultConfig),siteConfig=assignWithDepth_default(siteConfig,conf5),conf5.theme&&themes_default[conf5.theme]&&(siteConfig.themeVariables=themes_default[conf5.theme].getThemeVariables(conf5.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),"setSiteConfig"),saveConfigFromInitialize=__name(conf5=>{configFromInitialize=assignWithDepth_default({},conf5)},"saveConfigFromInitialize"),updateSiteConfig=__name(conf5=>(siteConfig=assignWithDepth_default(siteConfig,conf5),updateCurrentConfig(siteConfig,directives),siteConfig),"updateSiteConfig"),getSiteConfig=__name(()=>assignWithDepth_default({},siteConfig),"getSiteConfig"),setConfig=__name(conf5=>(checkConfig(conf5),assignWithDepth_default(currentConfig,conf5),getConfig()),"setConfig"),getConfig=__name(()=>assignWithDepth_default({},currentConfig),"getConfig"),sanitize=__name(options2=>{options2&&(["secure",...siteConfig.secure??[]].forEach(key=>{Object.hasOwn(options2,key)&&(log.debug(`Denied attempt to modify a secure key ${key}`,options2[key]),delete options2[key])}),Object.keys(options2).forEach(key=>{key.startsWith("__")&&delete options2[key]}),Object.keys(options2).forEach(key=>{"string"==typeof options2[key]&&(options2[key].includes("<")||options2[key].includes(">")||options2[key].includes("url(data:"))&&delete options2[key],"object"==typeof options2[key]&&sanitize(options2[key])}))},"sanitize"),addDirective=__name(directive=>{sanitizeDirective(directive),directive.fontFamily&&!directive.themeVariables?.fontFamily&&(directive.themeVariables={...directive.themeVariables,fontFamily:directive.fontFamily}),directives.push(directive),updateCurrentConfig(siteConfig,directives)},"addDirective"),reset=__name((config5=siteConfig)=>{updateCurrentConfig(config5,directives=[])},"reset"),ConfigWarning={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},issuedWarnings={},issueWarning=__name(warning=>{issuedWarnings[warning]||(log.warn(ConfigWarning[warning]),issuedWarnings[warning]=!0)},"issueWarning"),checkConfig=__name(config5=>{config5&&(config5.lazyLoadedDiagrams||config5.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},"checkConfig"),getUserDefinedConfig=__name(()=>{let userConfig={};configFromInitialize&&(userConfig=assignWithDepth_default(userConfig,configFromInitialize));for(const d3 of directives)userConfig=assignWithDepth_default(userConfig,d3);return userConfig},"getUserDefinedConfig")}});function unapply(func){return function(thisArg){thisArg instanceof RegExp&&(thisArg.lastIndex=0);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return apply(func,thisArg,args)}}function unconstruct(func){return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return construct(func,args)}}function addToSet(set5,array4){let transformCaseFunc=arguments.length>2&&void 0!==arguments[2]?arguments[2]:stringToLowerCase;setPrototypeOf&&setPrototypeOf(set5,null);let l4=array4.length;for(;l4--;){let element3=array4[l4];if("string"==typeof element3){const lcElement=transformCaseFunc(element3);lcElement!==element3&&(isFrozen(array4)||(array4[l4]=lcElement),element3=lcElement)}set5[element3]=!0}return set5}function cleanArray(array4){for(let index=0;index<array4.length;index++){objectHasOwnProperty(array4,index)||(array4[index]=null)}return array4}function clone(object3){const newObject=create(null);for(const[property2,value2]of entries(object3)){objectHasOwnProperty(object3,property2)&&(Array.isArray(value2)?newObject[property2]=cleanArray(value2):value2&&"object"==typeof value2&&value2.constructor===Object?newObject[property2]=clone(value2):newObject[property2]=value2)}return newObject}function lookupGetter(object3,prop){for(;null!==object3;){const desc=getOwnPropertyDescriptor(object3,prop);if(desc){if(desc.get)return unapply(desc.get);if("function"==typeof desc.value)return unapply(desc.value)}object3=getPrototypeOf(object3)}function fallbackValue(){return null}return __name(fallbackValue,"fallbackValue"),fallbackValue}function createDOMPurify(){let window3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getGlobal();const DOMPurify=__name(root3=>createDOMPurify(root3),"DOMPurify");if(DOMPurify.version="3.2.6",DOMPurify.removed=[],!window3||!window3.document||window3.document.nodeType!==NODE_TYPE.document||!window3.Element)return DOMPurify.isSupported=!1,DOMPurify;let{document:document2}=window3;const originalDocument=document2,currentScript=originalDocument.currentScript,{DocumentFragment:DocumentFragment2,HTMLTemplateElement:HTMLTemplateElement,Node:Node2,Element:Element3,NodeFilter:NodeFilter,NamedNodeMap:NamedNodeMap=window3.NamedNodeMap||window3.MozNamedAttrMap,HTMLFormElement:HTMLFormElement,DOMParser:DOMParser,trustedTypes:trustedTypes}=window3,ElementPrototype=Element3.prototype,cloneNode=lookupGetter(ElementPrototype,"cloneNode"),remove3=lookupGetter(ElementPrototype,"remove"),getNextSibling=lookupGetter(ElementPrototype,"nextSibling"),getChildNodes=lookupGetter(ElementPrototype,"childNodes"),getParentNode=lookupGetter(ElementPrototype,"parentNode");if("function"==typeof HTMLTemplateElement){const template=document2.createElement("template");template.content&&template.content.ownerDocument&&(document2=template.content.ownerDocument)}let trustedTypesPolicy,emptyHTML="";const{implementation:implementation,createNodeIterator:createNodeIterator,createDocumentFragment:createDocumentFragment,getElementsByTagName:getElementsByTagName}=document2,{importNode:importNode}=originalDocument;let hooks=_createHooksMap();DOMPurify.isSupported="function"==typeof entries&&"function"==typeof getParentNode&&implementation&&void 0!==implementation.createHTMLDocument;const{MUSTACHE_EXPR:MUSTACHE_EXPR2,ERB_EXPR:ERB_EXPR2,TMPLIT_EXPR:TMPLIT_EXPR2,DATA_ATTR:DATA_ATTR2,ARIA_ATTR:ARIA_ATTR2,IS_SCRIPT_OR_DATA:IS_SCRIPT_OR_DATA2,ATTR_WHITESPACE:ATTR_WHITESPACE2,CUSTOM_ELEMENT:CUSTOM_ELEMENT2}=EXPRESSIONS;let{IS_ALLOWED_URI:IS_ALLOWED_URI$1}=EXPRESSIONS,ALLOWED_TAGS=null;const DEFAULT_ALLOWED_TAGS=addToSet({},[...html$1,...svg$1,...svgFilters,...mathMl$1,...text]);let ALLOWED_ATTR=null;const DEFAULT_ALLOWED_ATTR=addToSet({},[...html,...svg,...mathMl,...xml]);let CUSTOM_ELEMENT_HANDLING=Object.seal(create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),FORBID_TAGS=null,FORBID_ATTR=null,ALLOW_ARIA_ATTR=!0,ALLOW_DATA_ATTR=!0,ALLOW_UNKNOWN_PROTOCOLS=!1,ALLOW_SELF_CLOSE_IN_ATTR=!0,SAFE_FOR_TEMPLATES=!1,SAFE_FOR_XML=!0,WHOLE_DOCUMENT=!1,SET_CONFIG=!1,FORCE_BODY=!1,RETURN_DOM=!1,RETURN_DOM_FRAGMENT=!1,RETURN_TRUSTED_TYPE=!1,SANITIZE_DOM=!0,SANITIZE_NAMED_PROPS=!1;let KEEP_CONTENT=!0,IN_PLACE=!1,USE_PROFILES={},FORBID_CONTENTS=null;const DEFAULT_FORBID_CONTENTS=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let DATA_URI_TAGS=null;const DEFAULT_DATA_URI_TAGS=addToSet({},["audio","video","img","source","image","track"]);let URI_SAFE_ATTRIBUTES=null;const DEFAULT_URI_SAFE_ATTRIBUTES=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),MATHML_NAMESPACE="http://www.w3.org/1998/Math/MathML",SVG_NAMESPACE="http://www.w3.org/2000/svg",HTML_NAMESPACE="http://www.w3.org/1999/xhtml";let NAMESPACE2=HTML_NAMESPACE,IS_EMPTY_INPUT=!1,ALLOWED_NAMESPACES=null;const DEFAULT_ALLOWED_NAMESPACES=addToSet({},[MATHML_NAMESPACE,SVG_NAMESPACE,HTML_NAMESPACE],stringToString);let MATHML_TEXT_INTEGRATION_POINTS=addToSet({},["mi","mo","mn","ms","mtext"]),HTML_INTEGRATION_POINTS=addToSet({},["annotation-xml"]);const COMMON_SVG_AND_HTML_ELEMENTS=addToSet({},["title","style","font","a","script"]);let PARSER_MEDIA_TYPE=null;const SUPPORTED_PARSER_MEDIA_TYPES=["application/xhtml+xml","text/html"];let transformCaseFunc=null,CONFIG=null;const formElement=document2.createElement("form"),isRegexOrFunction=__name(function(testValue){return testValue instanceof RegExp||testValue instanceof Function},"isRegexOrFunction"),_parseConfig=__name(function(){let cfg=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!CONFIG||CONFIG!==cfg){if(cfg&&"object"==typeof cfg||(cfg={}),cfg=clone(cfg),PARSER_MEDIA_TYPE=-1===SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE)?"text/html":cfg.PARSER_MEDIA_TYPE,transformCaseFunc="application/xhtml+xml"===PARSER_MEDIA_TYPE?stringToString:stringToLowerCase,ALLOWED_TAGS=objectHasOwnProperty(cfg,"ALLOWED_TAGS")?addToSet({},cfg.ALLOWED_TAGS,transformCaseFunc):DEFAULT_ALLOWED_TAGS,ALLOWED_ATTR=objectHasOwnProperty(cfg,"ALLOWED_ATTR")?addToSet({},cfg.ALLOWED_ATTR,transformCaseFunc):DEFAULT_ALLOWED_ATTR,ALLOWED_NAMESPACES=objectHasOwnProperty(cfg,"ALLOWED_NAMESPACES")?addToSet({},cfg.ALLOWED_NAMESPACES,stringToString):DEFAULT_ALLOWED_NAMESPACES,URI_SAFE_ATTRIBUTES=objectHasOwnProperty(cfg,"ADD_URI_SAFE_ATTR")?addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),cfg.ADD_URI_SAFE_ATTR,transformCaseFunc):DEFAULT_URI_SAFE_ATTRIBUTES,DATA_URI_TAGS=objectHasOwnProperty(cfg,"ADD_DATA_URI_TAGS")?addToSet(clone(DEFAULT_DATA_URI_TAGS),cfg.ADD_DATA_URI_TAGS,transformCaseFunc):DEFAULT_DATA_URI_TAGS,FORBID_CONTENTS=objectHasOwnProperty(cfg,"FORBID_CONTENTS")?addToSet({},cfg.FORBID_CONTENTS,transformCaseFunc):DEFAULT_FORBID_CONTENTS,FORBID_TAGS=objectHasOwnProperty(cfg,"FORBID_TAGS")?addToSet({},cfg.FORBID_TAGS,transformCaseFunc):clone({}),FORBID_ATTR=objectHasOwnProperty(cfg,"FORBID_ATTR")?addToSet({},cfg.FORBID_ATTR,transformCaseFunc):clone({}),USE_PROFILES=!!objectHasOwnProperty(cfg,"USE_PROFILES")&&cfg.USE_PROFILES,ALLOW_ARIA_ATTR=!1!==cfg.ALLOW_ARIA_ATTR,ALLOW_DATA_ATTR=!1!==cfg.ALLOW_DATA_ATTR,ALLOW_UNKNOWN_PROTOCOLS=cfg.ALLOW_UNKNOWN_PROTOCOLS||!1,ALLOW_SELF_CLOSE_IN_ATTR=!1!==cfg.ALLOW_SELF_CLOSE_IN_ATTR,SAFE_FOR_TEMPLATES=cfg.SAFE_FOR_TEMPLATES||!1,SAFE_FOR_XML=!1!==cfg.SAFE_FOR_XML,WHOLE_DOCUMENT=cfg.WHOLE_DOCUMENT||!1,RETURN_DOM=cfg.RETURN_DOM||!1,RETURN_DOM_FRAGMENT=cfg.RETURN_DOM_FRAGMENT||!1,RETURN_TRUSTED_TYPE=cfg.RETURN_TRUSTED_TYPE||!1,FORCE_BODY=cfg.FORCE_BODY||!1,SANITIZE_DOM=!1!==cfg.SANITIZE_DOM,SANITIZE_NAMED_PROPS=cfg.SANITIZE_NAMED_PROPS||!1,KEEP_CONTENT=!1!==cfg.KEEP_CONTENT,IN_PLACE=cfg.IN_PLACE||!1,IS_ALLOWED_URI$1=cfg.ALLOWED_URI_REGEXP||IS_ALLOWED_URI,NAMESPACE2=cfg.NAMESPACE||HTML_NAMESPACE,MATHML_TEXT_INTEGRATION_POINTS=cfg.MATHML_TEXT_INTEGRATION_POINTS||MATHML_TEXT_INTEGRATION_POINTS,HTML_INTEGRATION_POINTS=cfg.HTML_INTEGRATION_POINTS||HTML_INTEGRATION_POINTS,CUSTOM_ELEMENT_HANDLING=cfg.CUSTOM_ELEMENT_HANDLING||{},cfg.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck=cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck),cfg.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(CUSTOM_ELEMENT_HANDLING.attributeNameCheck=cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),cfg.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),SAFE_FOR_TEMPLATES&&(ALLOW_DATA_ATTR=!1),RETURN_DOM_FRAGMENT&&(RETURN_DOM=!0),USE_PROFILES&&(ALLOWED_TAGS=addToSet({},text),ALLOWED_ATTR=[],!0===USE_PROFILES.html&&(addToSet(ALLOWED_TAGS,html$1),addToSet(ALLOWED_ATTR,html)),!0===USE_PROFILES.svg&&(addToSet(ALLOWED_TAGS,svg$1),addToSet(ALLOWED_ATTR,svg),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.svgFilters&&(addToSet(ALLOWED_TAGS,svgFilters),addToSet(ALLOWED_ATTR,svg),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.mathMl&&(addToSet(ALLOWED_TAGS,mathMl$1),addToSet(ALLOWED_ATTR,mathMl),addToSet(ALLOWED_ATTR,xml))),cfg.ADD_TAGS&&(ALLOWED_TAGS===DEFAULT_ALLOWED_TAGS&&(ALLOWED_TAGS=clone(ALLOWED_TAGS)),addToSet(ALLOWED_TAGS,cfg.ADD_TAGS,transformCaseFunc)),cfg.ADD_ATTR&&(ALLOWED_ATTR===DEFAULT_ALLOWED_ATTR&&(ALLOWED_ATTR=clone(ALLOWED_ATTR)),addToSet(ALLOWED_ATTR,cfg.ADD_ATTR,transformCaseFunc)),cfg.ADD_URI_SAFE_ATTR&&addToSet(URI_SAFE_ATTRIBUTES,cfg.ADD_URI_SAFE_ATTR,transformCaseFunc),cfg.FORBID_CONTENTS&&(FORBID_CONTENTS===DEFAULT_FORBID_CONTENTS&&(FORBID_CONTENTS=clone(FORBID_CONTENTS)),addToSet(FORBID_CONTENTS,cfg.FORBID_CONTENTS,transformCaseFunc)),KEEP_CONTENT&&(ALLOWED_TAGS["#text"]=!0),WHOLE_DOCUMENT&&addToSet(ALLOWED_TAGS,["html","head","body"]),ALLOWED_TAGS.table&&(addToSet(ALLOWED_TAGS,["tbody"]),delete FORBID_TAGS.tbody),cfg.TRUSTED_TYPES_POLICY){if("function"!=typeof cfg.TRUSTED_TYPES_POLICY.createHTML)throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL)throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');trustedTypesPolicy=cfg.TRUSTED_TYPES_POLICY,emptyHTML=trustedTypesPolicy.createHTML("")}else void 0===trustedTypesPolicy&&(trustedTypesPolicy=_createTrustedTypesPolicy(trustedTypes,currentScript)),null!==trustedTypesPolicy&&"string"==typeof emptyHTML&&(emptyHTML=trustedTypesPolicy.createHTML(""));freeze&&freeze(cfg),CONFIG=cfg}},"_parseConfig"),ALL_SVG_TAGS=addToSet({},[...svg$1,...svgFilters,...svgDisallowed]),ALL_MATHML_TAGS=addToSet({},[...mathMl$1,...mathMlDisallowed]),_checkValidNamespace=__name(function(element3){let parent4=getParentNode(element3);parent4&&parent4.tagName||(parent4={namespaceURI:NAMESPACE2,tagName:"template"});const tagName=stringToLowerCase(element3.tagName),parentTagName=stringToLowerCase(parent4.tagName);return!!ALLOWED_NAMESPACES[element3.namespaceURI]&&(element3.namespaceURI===SVG_NAMESPACE?parent4.namespaceURI===HTML_NAMESPACE?"svg"===tagName:parent4.namespaceURI===MATHML_NAMESPACE?"svg"===tagName&&("annotation-xml"===parentTagName||MATHML_TEXT_INTEGRATION_POINTS[parentTagName]):Boolean(ALL_SVG_TAGS[tagName]):element3.namespaceURI===MATHML_NAMESPACE?parent4.namespaceURI===HTML_NAMESPACE?"math"===tagName:parent4.namespaceURI===SVG_NAMESPACE?"math"===tagName&&HTML_INTEGRATION_POINTS[parentTagName]:Boolean(ALL_MATHML_TAGS[tagName]):element3.namespaceURI===HTML_NAMESPACE?!(parent4.namespaceURI===SVG_NAMESPACE&&!HTML_INTEGRATION_POINTS[parentTagName])&&(!(parent4.namespaceURI===MATHML_NAMESPACE&&!MATHML_TEXT_INTEGRATION_POINTS[parentTagName])&&(!ALL_MATHML_TAGS[tagName]&&(COMMON_SVG_AND_HTML_ELEMENTS[tagName]||!ALL_SVG_TAGS[tagName]))):!("application/xhtml+xml"!==PARSER_MEDIA_TYPE||!ALLOWED_NAMESPACES[element3.namespaceURI]))},"_checkValidNamespace"),_forceRemove=__name(function(node2){arrayPush(DOMPurify.removed,{element:node2});try{getParentNode(node2).removeChild(node2)}catch(_3){remove3(node2)}},"_forceRemove"),_removeAttribute=__name(function(name,element3){try{arrayPush(DOMPurify.removed,{attribute:element3.getAttributeNode(name),from:element3})}catch(_3){arrayPush(DOMPurify.removed,{attribute:null,from:element3})}if(element3.removeAttribute(name),"is"===name)if(RETURN_DOM||RETURN_DOM_FRAGMENT)try{_forceRemove(element3)}catch(_3){}else try{element3.setAttribute(name,"")}catch(_3){}},"_removeAttribute"),_initDocument=__name(function(dirty){let doc=null,leadingWhitespace=null;if(FORCE_BODY)dirty="<remove></remove>"+dirty;else{const matches33=stringMatch(dirty,/^[\r\n\t ]+/);leadingWhitespace=matches33&&matches33[0]}"application/xhtml+xml"===PARSER_MEDIA_TYPE&&NAMESPACE2===HTML_NAMESPACE&&(dirty='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+dirty+"</body></html>");const dirtyPayload=trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;if(NAMESPACE2===HTML_NAMESPACE)try{doc=(new DOMParser).parseFromString(dirtyPayload,PARSER_MEDIA_TYPE)}catch(_3){}if(!doc||!doc.documentElement){doc=implementation.createDocument(NAMESPACE2,"template",null);try{doc.documentElement.innerHTML=IS_EMPTY_INPUT?emptyHTML:dirtyPayload}catch(_3){}}const body=doc.body||doc.documentElement;return dirty&&leadingWhitespace&&body.insertBefore(document2.createTextNode(leadingWhitespace),body.childNodes[0]||null),NAMESPACE2===HTML_NAMESPACE?getElementsByTagName.call(doc,WHOLE_DOCUMENT?"html":"body")[0]:WHOLE_DOCUMENT?doc.documentElement:body},"_initDocument"),_createNodeIterator=__name(function(root3){return createNodeIterator.call(root3.ownerDocument||root3,root3,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_PROCESSING_INSTRUCTION|NodeFilter.SHOW_CDATA_SECTION,null)},"_createNodeIterator"),_isClobbered=__name(function(element3){return element3 instanceof HTMLFormElement&&("string"!=typeof element3.nodeName||"string"!=typeof element3.textContent||"function"!=typeof element3.removeChild||!(element3.attributes instanceof NamedNodeMap)||"function"!=typeof element3.removeAttribute||"function"!=typeof element3.setAttribute||"string"!=typeof element3.namespaceURI||"function"!=typeof element3.insertBefore||"function"!=typeof element3.hasChildNodes)},"_isClobbered"),_isNode=__name(function(value2){return"function"==typeof Node2&&value2 instanceof Node2},"_isNode");function _executeHooks(hooks2,currentNode,data5){arrayForEach(hooks2,hook2=>{hook2.call(DOMPurify,currentNode,data5,CONFIG)})}__name(_executeHooks,"_executeHooks");const _sanitizeElements=__name(function(currentNode){let content=null;if(_executeHooks(hooks.beforeSanitizeElements,currentNode,null),_isClobbered(currentNode))return _forceRemove(currentNode),!0;const tagName=transformCaseFunc(currentNode.nodeName);if(_executeHooks(hooks.uponSanitizeElement,currentNode,{tagName:tagName,allowedTags:ALLOWED_TAGS}),SAFE_FOR_XML&&currentNode.hasChildNodes()&&!_isNode(currentNode.firstElementChild)&&regExpTest(/<[/\w!]/g,currentNode.innerHTML)&&regExpTest(/<[/\w!]/g,currentNode.textContent))return _forceRemove(currentNode),!0;if(currentNode.nodeType===NODE_TYPE.progressingInstruction)return _forceRemove(currentNode),!0;if(SAFE_FOR_XML&&currentNode.nodeType===NODE_TYPE.comment&&regExpTest(/<[/\w]/g,currentNode.data))return _forceRemove(currentNode),!0;if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName]){if(!FORBID_TAGS[tagName]&&_isBasicCustomElement(tagName)){if(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,tagName))return!1;if(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))return!1}if(KEEP_CONTENT&&!FORBID_CONTENTS[tagName]){const parentNode=getParentNode(currentNode)||currentNode.parentNode,childNodes=getChildNodes(currentNode)||currentNode.childNodes;if(childNodes&&parentNode){for(let i2=childNodes.length-1;i2>=0;--i2){const childClone=cloneNode(childNodes[i2],!0);childClone.__removalCount=(currentNode.__removalCount||0)+1,parentNode.insertBefore(childClone,getNextSibling(currentNode))}}}return _forceRemove(currentNode),!0}return currentNode instanceof Element3&&!_checkValidNamespace(currentNode)?(_forceRemove(currentNode),!0):"noscript"!==tagName&&"noembed"!==tagName&&"noframes"!==tagName||!regExpTest(/<\/no(script|embed|frames)/i,currentNode.innerHTML)?(SAFE_FOR_TEMPLATES&&currentNode.nodeType===NODE_TYPE.text&&(content=currentNode.textContent,arrayForEach([MUSTACHE_EXPR2,ERB_EXPR2,TMPLIT_EXPR2],expr=>{content=stringReplace(content,expr," ")}),currentNode.textContent!==content&&(arrayPush(DOMPurify.removed,{element:currentNode.cloneNode()}),currentNode.textContent=content)),_executeHooks(hooks.afterSanitizeElements,currentNode,null),!1):(_forceRemove(currentNode),!0)},"_sanitizeElements"),_isValidAttribute=__name(function(lcTag,lcName,value2){if(SANITIZE_DOM&&("id"===lcName||"name"===lcName)&&(value2 in document2||value2 in formElement))return!1;if(ALLOW_DATA_ATTR&&!FORBID_ATTR[lcName]&&regExpTest(DATA_ATTR2,lcName));else if(ALLOW_ARIA_ATTR&&regExpTest(ARIA_ATTR2,lcName));else if(!ALLOWED_ATTR[lcName]||FORBID_ATTR[lcName]){if(!(_isBasicCustomElement(lcTag)&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,lcTag)||CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))&&(CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck,lcName)||CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName))||"is"===lcName&&CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,value2)||CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(value2))))return!1}else if(URI_SAFE_ATTRIBUTES[lcName]);else if(regExpTest(IS_ALLOWED_URI$1,stringReplace(value2,ATTR_WHITESPACE2,"")));else if("src"!==lcName&&"xlink:href"!==lcName&&"href"!==lcName||"script"===lcTag||0!==stringIndexOf(value2,"data:")||!DATA_URI_TAGS[lcTag]){if(ALLOW_UNKNOWN_PROTOCOLS&&!regExpTest(IS_SCRIPT_OR_DATA2,stringReplace(value2,ATTR_WHITESPACE2,"")));else if(value2)return!1}else;return!0},"_isValidAttribute"),_isBasicCustomElement=__name(function(tagName){return"annotation-xml"!==tagName&&stringMatch(tagName,CUSTOM_ELEMENT2)},"_isBasicCustomElement"),_sanitizeAttributes=__name(function(currentNode){_executeHooks(hooks.beforeSanitizeAttributes,currentNode,null);const{attributes:attributes}=currentNode;if(!attributes||_isClobbered(currentNode))return;const hookEvent={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ALLOWED_ATTR,forceKeepAttr:void 0};let l4=attributes.length;for(;l4--;){const attr=attributes[l4],{name:name,namespaceURI:namespaceURI,value:attrValue}=attr,lcName=transformCaseFunc(name),initValue=attrValue;let value2="value"===name?initValue:stringTrim(initValue);if(hookEvent.attrName=lcName,hookEvent.attrValue=value2,hookEvent.keepAttr=!0,hookEvent.forceKeepAttr=void 0,_executeHooks(hooks.uponSanitizeAttribute,currentNode,hookEvent),value2=hookEvent.attrValue,!SANITIZE_NAMED_PROPS||"id"!==lcName&&"name"!==lcName||(_removeAttribute(name,currentNode),value2="user-content-"+value2),SAFE_FOR_XML&&regExpTest(/((--!?|])>)|<\/(style|title)/i,value2)){_removeAttribute(name,currentNode);continue}if(hookEvent.forceKeepAttr)continue;if(!hookEvent.keepAttr){_removeAttribute(name,currentNode);continue}if(!ALLOW_SELF_CLOSE_IN_ATTR&&regExpTest(/\/>/i,value2)){_removeAttribute(name,currentNode);continue}SAFE_FOR_TEMPLATES&&arrayForEach([MUSTACHE_EXPR2,ERB_EXPR2,TMPLIT_EXPR2],expr=>{value2=stringReplace(value2,expr," ")});const lcTag=transformCaseFunc(currentNode.nodeName);if(_isValidAttribute(lcTag,lcName,value2)){if(trustedTypesPolicy&&"object"==typeof trustedTypes&&"function"==typeof trustedTypes.getAttributeType)if(namespaceURI);else switch(trustedTypes.getAttributeType(lcTag,lcName)){case"TrustedHTML":value2=trustedTypesPolicy.createHTML(value2);break;case"TrustedScriptURL":value2=trustedTypesPolicy.createScriptURL(value2)}if(value2!==initValue)try{namespaceURI?currentNode.setAttributeNS(namespaceURI,name,value2):currentNode.setAttribute(name,value2),_isClobbered(currentNode)?_forceRemove(currentNode):arrayPop(DOMPurify.removed)}catch(_3){_removeAttribute(name,currentNode)}}else _removeAttribute(name,currentNode)}_executeHooks(hooks.afterSanitizeAttributes,currentNode,null)},"_sanitizeAttributes"),_sanitizeShadowDOM=__name(function _sanitizeShadowDOM2(fragment){let shadowNode=null;const shadowIterator=_createNodeIterator(fragment);for(_executeHooks(hooks.beforeSanitizeShadowDOM,fragment,null);shadowNode=shadowIterator.nextNode();)_executeHooks(hooks.uponSanitizeShadowNode,shadowNode,null),_sanitizeElements(shadowNode),_sanitizeAttributes(shadowNode),shadowNode.content instanceof DocumentFragment2&&_sanitizeShadowDOM2(shadowNode.content);_executeHooks(hooks.afterSanitizeShadowDOM,fragment,null)},"_sanitizeShadowDOM");return DOMPurify.sanitize=function(dirty){let cfg=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},body=null,importedNode=null,currentNode=null,returnNode=null;if(IS_EMPTY_INPUT=!dirty,IS_EMPTY_INPUT&&(dirty="\x3c!--\x3e"),"string"!=typeof dirty&&!_isNode(dirty)){if("function"!=typeof dirty.toString)throw typeErrorCreate("toString is not a function");if("string"!=typeof(dirty=dirty.toString()))throw typeErrorCreate("dirty is not a string, aborting")}if(!DOMPurify.isSupported)return dirty;if(SET_CONFIG||_parseConfig(cfg),DOMPurify.removed=[],"string"==typeof dirty&&(IN_PLACE=!1),IN_PLACE){if(dirty.nodeName){const tagName=transformCaseFunc(dirty.nodeName);if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(dirty instanceof Node2)body=_initDocument("\x3c!----\x3e"),importedNode=body.ownerDocument.importNode(dirty,!0),importedNode.nodeType===NODE_TYPE.element&&"BODY"===importedNode.nodeName||"HTML"===importedNode.nodeName?body=importedNode:body.appendChild(importedNode);else{if(!RETURN_DOM&&!SAFE_FOR_TEMPLATES&&!WHOLE_DOCUMENT&&-1===dirty.indexOf("<"))return trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(dirty):dirty;if(body=_initDocument(dirty),!body)return RETURN_DOM?null:RETURN_TRUSTED_TYPE?emptyHTML:""}body&&FORCE_BODY&&_forceRemove(body.firstChild);const nodeIterator=_createNodeIterator(IN_PLACE?dirty:body);for(;currentNode=nodeIterator.nextNode();)_sanitizeElements(currentNode),_sanitizeAttributes(currentNode),currentNode.content instanceof DocumentFragment2&&_sanitizeShadowDOM(currentNode.content);if(IN_PLACE)return dirty;if(RETURN_DOM){if(RETURN_DOM_FRAGMENT)for(returnNode=createDocumentFragment.call(body.ownerDocument);body.firstChild;)returnNode.appendChild(body.firstChild);else returnNode=body;return(ALLOWED_ATTR.shadowroot||ALLOWED_ATTR.shadowrootmode)&&(returnNode=importNode.call(originalDocument,returnNode,!0)),returnNode}let serializedHTML=WHOLE_DOCUMENT?body.outerHTML:body.innerHTML;return WHOLE_DOCUMENT&&ALLOWED_TAGS["!doctype"]&&body.ownerDocument&&body.ownerDocument.doctype&&body.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,body.ownerDocument.doctype.name)&&(serializedHTML="<!DOCTYPE "+body.ownerDocument.doctype.name+">\n"+serializedHTML),SAFE_FOR_TEMPLATES&&arrayForEach([MUSTACHE_EXPR2,ERB_EXPR2,TMPLIT_EXPR2],expr=>{serializedHTML=stringReplace(serializedHTML,expr," ")}),trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(serializedHTML):serializedHTML},DOMPurify.setConfig=function(){_parseConfig(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),SET_CONFIG=!0},DOMPurify.clearConfig=function(){CONFIG=null,SET_CONFIG=!1},DOMPurify.isValidAttribute=function(tag,attr,value2){CONFIG||_parseConfig({});const lcTag=transformCaseFunc(tag),lcName=transformCaseFunc(attr);return _isValidAttribute(lcTag,lcName,value2)},DOMPurify.addHook=function(entryPoint,hookFunction){"function"==typeof hookFunction&&arrayPush(hooks[entryPoint],hookFunction)},DOMPurify.removeHook=function(entryPoint,hookFunction){if(void 0!==hookFunction){const index=arrayLastIndexOf(hooks[entryPoint],hookFunction);return-1===index?void 0:arraySplice(hooks[entryPoint],index,1)[0]}return arrayPop(hooks[entryPoint])},DOMPurify.removeHooks=function(entryPoint){hooks[entryPoint]=[]},DOMPurify.removeAllHooks=function(){hooks=_createHooksMap()},DOMPurify}var SourceLocation,Token,ParseError,contains,deflt,uppercase,hyphenate,ESCAPE_LOOKUP,ESCAPE_REGEX,getBaseElem,isCharacterBox,assert,utils,SETTINGS_SCHEMA,Settings,Style,styles,sup,sub,fracNum,fracDen,cramp,text$1,Style$1,scriptData,allBlocks,sqrtMain,sqrtSize1,sqrtSize2,sqrtSize3,sqrtSize4,phasePath,sqrtTall,sqrtPath,innerPath,path,tallDelim,DocumentFragment,fontMetricsData,sigmasAndXis,extraCharacterMap,fontMetricsBySizeIndex,sizeStyleMap,sizeMultipliers,sizeAtStyle,Options,ptPerUnit,relativeUnit,validUnit,calculateSize2,makeEm,createClass,initNode,toNode,invalidAttributeNameRegex,toMarkup,Span,Anchor,Img,iCombinations,SymbolNode,SvgNode,PathNode,LineNode,ATOMS,NON_ATOMS,symbols,math,text2,main,ams,accent,bin,close,mathord,op,open,rel,textord,ligatures,ch,_ch,_i,letters,_ch2,_i2,wideChar,_ch3,_i3,_ch4,_i4,_ch5,_i5,wideLatinLetterData,wideNumeralData,wideCharacterFont,lookupSymbol,makeSymbol,mathsym,boldsymbol,makeOrd,canCombine,tryCombineChars,sizeElementFromChildren,makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,getVListChildrenAndDepth,makeVList,makeGlue,retrieveTextFontName,fontMap,svgData,staticSvg,buildCommon,thinspace,mediumspace,thickspace,spacings,tightSpacings,_functions,_htmlGroupBuilders,_mathmlGroupBuilders,normalizeArgument,ordargument,makeSpan$1,binLeftCanceller,binRightCanceller,styleMap$1,DomEnum,buildExpression$1,traverseNonSpaceNodes,checkPartialGroup,getOutermostNode,getTypeOfDomTree,makeNullDelimiter,buildGroup$1,MathNode,TextNode,SpaceNode,mathMLTree,makeText,makeRow,getVariant,buildExpression2,buildExpressionRow,buildGroup2,optionsFromSettings,displayWrap,buildTree,buildHTMLTree,stretchyCodePoint,mathMLnode,katexImagesData,groupLength,svgSpan,stretchy,htmlBuilder$a,mathmlBuilder$9,NON_STRETCHY_ACCENT_REGEX,paddedNode,makeSpan2,binrelClass,cdArrowFunctionName,newCell,isStartOfArrow,isLabelEnd,htmlBuilder$8,mathmlBuilder$7,globalMap,checkControlSequence,getRHS,letCommand,getMetrics,styleWrap,centerSpan,makeSmallDelim,mathrmSize,makeLargeDelim,makeGlyphSpan,makeInner,lap,verts,doubleVerts,makeStackedDelim,sqrtSvg,makeSqrtImage,stackLargeDelimiters,stackAlwaysDelimiters,stackNeverDelimiters,sizeToMaxHeight,makeSizedDelim,stackNeverDelimiterSequence,stackAlwaysDelimiterSequence,stackLargeDelimiterSequence,delimTypeToFont,traverseSequence,makeCustomSizedDelim,makeLeftRightDelim,delimiter,delimiterSizes,delimiters,htmlBuilder$7,mathmlBuilder$6,_environments,_macros,validateAmsEnvironmentContext,htmlBuilder$6,alignMap,mathmlBuilder$5,alignedHandler,environments,htmlBuilder$5,mathmlBuilder$4,fontAliases,adjustStyle,htmlBuilder$4,mathmlBuilder$3,stylArray,delimFromValue,htmlBuilder$3,mathmlBuilder$2,sizeData,chooseMathStyle,assembleSupSub,noSuccessor,htmlBuilder$2,mathmlBuilder$1,singleCharBigOps,singleCharIntegrals,htmlBuilder$1,mathmlBuilder2,sizeFuncs,htmlBuilder2,styleMap,htmlBuilderDelegate,defaultVariant,cssSpace,regularSpace,pad,textFontFamilies,textFontWeights,textFontShapes,optionsWithFont,makeVerb,functions,combiningDiacriticalMarksEndRegex,Lexer,Namespace,macros,digitToNumber,newcommand,dotsByToken,spaceAfterDots,latexRaiseA,braketHelper,implicitCommands,MacroExpander,unicodeSubRegEx,uSubsAndSups,unicodeAccents,unicodeSymbols,Parser,parseTree,render,renderToString,generateParseTree,renderError,renderToDomTree,renderToHTMLTree,version,__domTree,katex,init_purify_es=__esm({"../../node_modules/.pnpm/dompurify@3.2.6/node_modules/dompurify/dist/purify.es.mjs"(){({entries:entries,setPrototypeOf:setPrototypeOf,isFrozen:isFrozen,getPrototypeOf:getPrototypeOf,getOwnPropertyDescriptor:getOwnPropertyDescriptor}=Object),({freeze:freeze,seal:seal,create:create}=Object),({apply:apply,construct:construct}="undefined"!=typeof Reflect&&Reflect),freeze||(freeze=__name(function(x5){return x5},"freeze")),seal||(seal=__name(function(x5){return x5},"seal")),apply||(apply=__name(function(fun,thisValue,args){return fun.apply(thisValue,args)},"apply")),construct||(construct=__name(function(Func,args){return new Func(...args)},"construct")),arrayForEach=unapply(Array.prototype.forEach),arrayLastIndexOf=unapply(Array.prototype.lastIndexOf),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),arraySplice=unapply(Array.prototype.splice),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),objectHasOwnProperty=unapply(Object.prototype.hasOwnProperty),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError),__name(unapply,"unapply"),__name(unconstruct,"unconstruct"),__name(addToSet,"addToSet"),__name(cleanArray,"cleanArray"),__name(clone,"clone"),__name(lookupGetter,"lookupGetter"),html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\$\{[\w\W]*/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]+$/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),CUSTOM_ELEMENT=seal(/^[a-z][.\w]*(-[.\w]+)+$/i),EXPRESSIONS=Object.freeze({__proto__:null,ARIA_ATTR:ARIA_ATTR,ATTR_WHITESPACE:ATTR_WHITESPACE,CUSTOM_ELEMENT:CUSTOM_ELEMENT,DATA_ATTR:DATA_ATTR,DOCTYPE_NAME:DOCTYPE_NAME,ERB_EXPR:ERB_EXPR,IS_ALLOWED_URI:IS_ALLOWED_URI,IS_SCRIPT_OR_DATA:IS_SCRIPT_OR_DATA,MUSTACHE_EXPR:MUSTACHE_EXPR,TMPLIT_EXPR:TMPLIT_EXPR}),NODE_TYPE={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},getGlobal=__name(function(){return"undefined"==typeof window?null:window},"getGlobal"),_createTrustedTypesPolicy=__name(function(trustedTypes,purifyHostElement){if("object"!=typeof trustedTypes||"function"!=typeof trustedTypes.createPolicy)return null;let suffix=null;purifyHostElement&&purifyHostElement.hasAttribute("data-tt-policy-suffix")&&(suffix=purifyHostElement.getAttribute("data-tt-policy-suffix"));const policyName="dompurify"+(suffix?"#"+suffix:"");try{return trustedTypes.createPolicy(policyName,{createHTML:html2=>html2,createScriptURL:scriptUrl=>scriptUrl})}catch(_3){return console.warn("TrustedTypes policy "+policyName+" could not be created."),null}},"_createTrustedTypesPolicy"),_createHooksMap=__name(function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},"_createHooksMap"),__name(createDOMPurify,"createDOMPurify"),purify=createDOMPurify()}}),katex_exports={};function escape2(text4){return String(text4).replace(ESCAPE_REGEX,match2=>ESCAPE_LOOKUP[match2])}function getDefaultValue(schema2){if(schema2.default)return schema2.default;var type3=schema2.type,defaultType=Array.isArray(type3)?type3[0]:type3;if("string"!=typeof defaultType)return defaultType.enum[0];switch(defaultType){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}function scriptFromCodepoint(codepoint){for(var i2=0;i2<scriptData.length;i2++)for(var script=scriptData[i2],_i=0;_i<script.blocks.length;_i++){var block2=script.blocks[_i];if(codepoint>=block2[0]&&codepoint<=block2[1])return script.name}return null}function supportedCodepoint(codepoint){for(var i2=0;i2<allBlocks.length;i2+=2)if(codepoint>=allBlocks[i2]&&codepoint<=allBlocks[i2+1])return!0;return!1}function setFontMetrics(fontName,metrics){fontMetricsData[fontName]=metrics}function getCharacterMetrics(character2,font,mode){if(!fontMetricsData[font])throw new Error("Font metrics not found for font: "+font+".");var ch=character2.charCodeAt(0),metrics=fontMetricsData[font][ch];if(!metrics&&character2[0]in extraCharacterMap&&(ch=extraCharacterMap[character2[0]].charCodeAt(0),metrics=fontMetricsData[font][ch]),metrics||"text"!==mode||supportedCodepoint(ch)&&(metrics=fontMetricsData[font][77]),metrics)return{depth:metrics[0],height:metrics[1],italic:metrics[2],skew:metrics[3],width:metrics[4]}}function getGlobalMetrics(size4){var sizeIndex;if(!fontMetricsBySizeIndex[sizeIndex=size4>=5?0:size4>=3?1:2]){var metrics=fontMetricsBySizeIndex[sizeIndex]={cssEmPerMu:sigmasAndXis.quad[sizeIndex]/18};for(var key in sigmasAndXis)sigmasAndXis.hasOwnProperty(key)&&(metrics[key]=sigmasAndXis[key][sizeIndex])}return fontMetricsBySizeIndex[sizeIndex]}function assertSymbolDomNode(group2){if(group2 instanceof SymbolNode)return group2;throw new Error("Expected symbolNode but got "+String(group2)+".")}function assertSpan(group2){if(group2 instanceof Span)return group2;throw new Error("Expected span<HtmlDomNode> but got "+String(group2)+".")}function defineSymbol(mode,font,group2,replace2,name,acceptUnicodeChar){symbols[mode][name]={font:font,group:group2,replace:replace2},acceptUnicodeChar&&replace2&&(symbols[mode][replace2]=symbols[mode][name])}function defineFunction(_ref){for(var{type:type3,names:names,props:props,handler:handler,htmlBuilder:htmlBuilder3,mathmlBuilder:mathmlBuilder3}=_ref,data5={type:type3,numArgs:props.numArgs,argTypes:props.argTypes,allowedInArgument:!!props.allowedInArgument,allowedInText:!!props.allowedInText,allowedInMath:void 0===props.allowedInMath||props.allowedInMath,numOptionalArgs:props.numOptionalArgs||0,infix:!!props.infix,primitive:!!props.primitive,handler:handler},i2=0;i2<names.length;++i2)_functions[names[i2]]=data5;type3&&(htmlBuilder3&&(_htmlGroupBuilders[type3]=htmlBuilder3),mathmlBuilder3&&(_mathmlGroupBuilders[type3]=mathmlBuilder3))}function defineFunctionBuilders(_ref2){var{type:type3,htmlBuilder:htmlBuilder3,mathmlBuilder:mathmlBuilder3}=_ref2;defineFunction({type:type3,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:htmlBuilder3,mathmlBuilder:mathmlBuilder3})}function buildHTMLUnbreakable(children2,options2){var body=makeSpan$1(["base"],children2,options2),strut=makeSpan$1(["strut"]);return strut.style.height=makeEm(body.height+body.depth),body.depth&&(strut.style.verticalAlign=makeEm(-body.depth)),body.children.unshift(strut),body}function buildHTML(tree,options2){var tag=null;1===tree.length&&"tag"===tree[0].type&&(tag=tree[0].tag,tree=tree[0].body);var eqnNum,expression=buildExpression$1(tree,options2,"root");2===expression.length&&expression[1].hasClass("tag")&&(eqnNum=expression.pop());for(var tagChild,children2=[],parts=[],i2=0;i2<expression.length;i2++)if(parts.push(expression[i2]),expression[i2].hasClass("mbin")||expression[i2].hasClass("mrel")||expression[i2].hasClass("allowbreak")){for(var nobreak=!1;i2<expression.length-1&&expression[i2+1].hasClass("mspace")&&!expression[i2+1].hasClass("newline");)i2++,parts.push(expression[i2]),expression[i2].hasClass("nobreak")&&(nobreak=!0);nobreak||(children2.push(buildHTMLUnbreakable(parts,options2)),parts=[])}else expression[i2].hasClass("newline")&&(parts.pop(),parts.length>0&&(children2.push(buildHTMLUnbreakable(parts,options2)),parts=[]),children2.push(expression[i2]));parts.length>0&&children2.push(buildHTMLUnbreakable(parts,options2)),tag?((tagChild=buildHTMLUnbreakable(buildExpression$1(tag,options2,!0))).classes=["tag"],children2.push(tagChild)):eqnNum&&children2.push(eqnNum);var htmlNode=makeSpan$1(["katex-html"],children2);if(htmlNode.setAttribute("aria-hidden","true"),tagChild){var strut=tagChild.children[0];strut.style.height=makeEm(htmlNode.height+htmlNode.depth),htmlNode.depth&&(strut.style.verticalAlign=makeEm(-htmlNode.depth))}return htmlNode}function newDocumentFragment(children2){return new DocumentFragment(children2)}function isNumberPunctuation(group2){if(!group2)return!1;if("mi"===group2.type&&1===group2.children.length){var child=group2.children[0];return child instanceof TextNode&&"."===child.text}if("mo"===group2.type&&1===group2.children.length&&"true"===group2.getAttribute("separator")&&"0em"===group2.getAttribute("lspace")&&"0em"===group2.getAttribute("rspace")){var _child=group2.children[0];return _child instanceof TextNode&&","===_child.text}return!1}function buildMathML(tree,texExpression,options2,isDisplayMode,forMathmlOnly){var wrapper,expression=buildExpression2(tree,options2);wrapper=1===expression.length&&expression[0]instanceof MathNode&&utils.contains(["mrow","mtable"],expression[0].type)?expression[0]:new mathMLTree.MathNode("mrow",expression);var annotation=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(texExpression)]);annotation.setAttribute("encoding","application/x-tex");var semantics=new mathMLTree.MathNode("semantics",[wrapper,annotation]),math2=new mathMLTree.MathNode("math",[semantics]);math2.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),isDisplayMode&&math2.setAttribute("display","block");var wrapperClass=forMathmlOnly?"katex":"katex-mathml";return buildCommon.makeSpan([wrapperClass],[math2])}function assertNodeType(node2,type3){if(!node2||node2.type!==type3)throw new Error("Expected node of type "+type3+", but got "+(node2?"node of type "+node2.type:String(node2)));return node2}function assertSymbolNodeType(node2){var typedNode=checkSymbolNodeType(node2);if(!typedNode)throw new Error("Expected node of symbol group type, but got "+(node2?"node of type "+node2.type:String(node2)));return typedNode}function checkSymbolNodeType(node2){return node2&&("atom"===node2.type||NON_ATOMS.hasOwnProperty(node2.type))?node2:null}function htmlBuilder$9(group2,options2){var elements2=buildExpression$1(group2.body,options2,!0);return makeSpan2([group2.mclass],elements2,options2)}function mathmlBuilder$8(group2,options2){var node2,inner2=buildExpression2(group2.body,options2);return"minner"===group2.mclass?node2=new mathMLTree.MathNode("mpadded",inner2):"mord"===group2.mclass?group2.isCharacterBox?(node2=inner2[0]).type="mi":node2=new mathMLTree.MathNode("mi",inner2):(group2.isCharacterBox?(node2=inner2[0]).type="mo":node2=new mathMLTree.MathNode("mo",inner2),"mbin"===group2.mclass?(node2.attributes.lspace="0.22em",node2.attributes.rspace="0.22em"):"mpunct"===group2.mclass?(node2.attributes.lspace="0em",node2.attributes.rspace="0.17em"):"mopen"===group2.mclass||"mclose"===group2.mclass?(node2.attributes.lspace="0em",node2.attributes.rspace="0em"):"minner"===group2.mclass&&(node2.attributes.lspace="0.0556em",node2.attributes.width="+0.1111em")),node2}function cdArrow(arrowChar,labels,parser24){var funcName=cdArrowFunctionName[arrowChar];switch(funcName){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return parser24.callFunction(funcName,[labels[0]],[labels[1]]);case"\\uparrow":case"\\downarrow":var bareArrow={type:"atom",text:funcName,mode:"math",family:"rel"},arrowGroup={type:"ordgroup",mode:"math",body:[parser24.callFunction("\\\\cdleft",[labels[0]],[]),parser24.callFunction("\\Big",[bareArrow],[]),parser24.callFunction("\\\\cdright",[labels[1]],[])]};return parser24.callFunction("\\\\cdparent",[arrowGroup],[]);case"\\\\cdlongequal":return parser24.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return parser24.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(parser24){var parsedRows=[];for(parser24.gullet.beginGroup(),parser24.gullet.macros.set("\\cr","\\\\\\relax"),parser24.gullet.beginGroup();;){parsedRows.push(parser24.parseExpression(!1,"\\\\")),parser24.gullet.endGroup(),parser24.gullet.beginGroup();var next3=parser24.fetch().text;if("&"!==next3&&"\\\\"!==next3){if("\\end"===next3){0===parsedRows[parsedRows.length-1].length&&parsedRows.pop();break}throw new ParseError("Expected \\\\ or \\cr or \\end",parser24.nextToken)}parser24.consume()}for(var row=[],body=[row],i2=0;i2<parsedRows.length;i2++){for(var rowNodes=parsedRows[i2],cell=newCell(),j3=0;j3<rowNodes.length;j3++)if(isStartOfArrow(rowNodes[j3])){row.push(cell);var arrowChar=assertSymbolNodeType(rowNodes[j3+=1]).text,labels=new Array(2);if(labels[0]={type:"ordgroup",mode:"math",body:[]},labels[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(arrowChar)>-1);else{if(!("<>AV".indexOf(arrowChar)>-1))throw new ParseError('Expected one of "<>AV=|." after @',rowNodes[j3]);for(var labelNum=0;labelNum<2;labelNum++){for(var inLabel=!0,k2=j3+1;k2<rowNodes.length;k2++){if(isLabelEnd(rowNodes[k2],arrowChar)){inLabel=!1,j3=k2;break}if(isStartOfArrow(rowNodes[k2]))throw new ParseError("Missing a "+arrowChar+" character to complete a CD arrow.",rowNodes[k2]);labels[labelNum].body.push(rowNodes[k2])}if(inLabel)throw new ParseError("Missing a "+arrowChar+" character to complete a CD arrow.",rowNodes[j3])}}var wrappedArrow={type:"styling",body:[cdArrow(arrowChar,labels,parser24)],mode:"math",style:"display"};row.push(wrappedArrow),cell=newCell()}else cell.body.push(rowNodes[j3]);i2%2==0?row.push(cell):row.shift(),row=[],body.push(row)}return parser24.gullet.endGroup(),parser24.gullet.endGroup(),{type:"array",mode:"math",body:body,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(body[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(body.length+1).fill([])}}function checkDelimiter(delim,context){var symDelim=checkSymbolNodeType(delim);if(symDelim&&utils.contains(delimiters,symDelim.text))return symDelim;throw new ParseError(symDelim?"Invalid delimiter '"+symDelim.text+"' after '"+context.funcName+"'":"Invalid delimiter type '"+delim.type+"'",delim)}function assertParsed(group2){if(!group2.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}function defineEnvironment(_ref){for(var{type:type3,names:names,props:props,handler:handler,htmlBuilder:htmlBuilder3,mathmlBuilder:mathmlBuilder3}=_ref,data5={type:type3,numArgs:props.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:handler},i2=0;i2<names.length;++i2)_environments[names[i2]]=data5;htmlBuilder3&&(_htmlGroupBuilders[type3]=htmlBuilder3),mathmlBuilder3&&(_mathmlGroupBuilders[type3]=mathmlBuilder3)}function defineMacro(name,body){_macros[name]=body}function getHLines(parser24){var hlineInfo=[];parser24.consumeSpaces();var nxt=parser24.fetch().text;for("\\relax"===nxt&&(parser24.consume(),parser24.consumeSpaces(),nxt=parser24.fetch().text);"\\hline"===nxt||"\\hdashline"===nxt;)parser24.consume(),hlineInfo.push("\\hdashline"===nxt),parser24.consumeSpaces(),nxt=parser24.fetch().text;return hlineInfo}function getAutoTag(name){if(-1===name.indexOf("ed"))return-1===name.indexOf("*")}function parseArray(parser24,_ref,style3){var{hskipBeforeAndAfter:hskipBeforeAndAfter,addJot:addJot,cols:cols,arraystretch:arraystretch,colSeparationType:colSeparationType,autoTag:autoTag,singleRow:singleRow,emptySingleRow:emptySingleRow,maxNumCols:maxNumCols,leqno:leqno}=_ref;if(parser24.gullet.beginGroup(),singleRow||parser24.gullet.macros.set("\\cr","\\\\\\relax"),!arraystretch){var stretch=parser24.gullet.expandMacroAsText("\\arraystretch");if(null==stretch)arraystretch=1;else if(!(arraystretch=parseFloat(stretch))||arraystretch<0)throw new ParseError("Invalid \\arraystretch: "+stretch)}parser24.gullet.beginGroup();var row=[],body=[row],rowGaps=[],hLinesBeforeRow=[],tags2=null!=autoTag?[]:void 0;function beginRow(){autoTag&&parser24.gullet.macros.set("\\@eqnsw","1",!0)}function endRow(){tags2&&(parser24.gullet.macros.get("\\df@tag")?(tags2.push(parser24.subparse([new Token("\\df@tag")])),parser24.gullet.macros.set("\\df@tag",void 0,!0)):tags2.push(Boolean(autoTag)&&"1"===parser24.gullet.macros.get("\\@eqnsw")))}for(__name(beginRow,"beginRow"),__name(endRow,"endRow"),beginRow(),hLinesBeforeRow.push(getHLines(parser24));;){var cell=parser24.parseExpression(!1,singleRow?"\\end":"\\\\");parser24.gullet.endGroup(),parser24.gullet.beginGroup(),cell={type:"ordgroup",mode:parser24.mode,body:cell},style3&&(cell={type:"styling",mode:parser24.mode,style:style3,body:[cell]}),row.push(cell);var next3=parser24.fetch().text;if("&"===next3){if(maxNumCols&&row.length===maxNumCols){if(singleRow||colSeparationType)throw new ParseError("Too many tab characters: &",parser24.nextToken);parser24.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}parser24.consume()}else{if("\\end"===next3){endRow(),1===row.length&&"styling"===cell.type&&0===cell.body[0].body.length&&(body.length>1||!emptySingleRow)&&body.pop(),hLinesBeforeRow.length<body.length+1&&hLinesBeforeRow.push([]);break}if("\\\\"!==next3)throw new ParseError("Expected & or \\\\ or \\cr or \\end",parser24.nextToken);parser24.consume();var size4=void 0;" "!==parser24.gullet.future().text&&(size4=parser24.parseSizeGroup(!0)),rowGaps.push(size4?size4.value:null),endRow(),hLinesBeforeRow.push(getHLines(parser24)),row=[],body.push(row),beginRow()}}return parser24.gullet.endGroup(),parser24.gullet.endGroup(),{type:"array",mode:parser24.mode,addJot:addJot,arraystretch:arraystretch,body:body,cols:cols,rowGaps:rowGaps,hskipBeforeAndAfter:hskipBeforeAndAfter,hLinesBeforeRow:hLinesBeforeRow,colSeparationType:colSeparationType,tags:tags2,leqno:leqno}}function dCellStyle(envName){return"d"===envName.slice(0,1)?"display":"text"}function sizingGroup(value2,options2,baseOptions){for(var inner2=buildExpression$1(value2,options2,!1),multiplier=options2.sizeMultiplier/baseOptions.sizeMultiplier,i2=0;i2<inner2.length;i2++){var pos=inner2[i2].classes.indexOf("sizing");pos<0?Array.prototype.push.apply(inner2[i2].classes,options2.sizingClasses(baseOptions)):inner2[i2].classes[pos+1]==="reset-size"+options2.size&&(inner2[i2].classes[pos+1]="reset-size"+baseOptions.size),inner2[i2].height*=multiplier,inner2[i2].depth*=multiplier}return buildCommon.makeFragment(inner2)}__export(katex_exports,{ParseError:()=>ParseError,SETTINGS_SCHEMA:()=>SETTINGS_SCHEMA,__defineFunction:()=>defineFunction,__defineMacro:()=>defineMacro,__defineSymbol:()=>defineSymbol,__domTree:()=>__domTree,__parse:()=>generateParseTree,__renderToDomTree:()=>renderToDomTree,__renderToHTMLTree:()=>renderToHTMLTree,__setFontMetrics:()=>setFontMetrics,default:()=>katex,render:()=>render,renderToString:()=>renderToString,version:()=>version});var lineBreakRegex,getRows,setupDompurifyHooksIfNotSetup,removeScript,sanitizeMore,sanitizeText,sanitizeTextOrArray,hasBreaks,splitBreaks,placeholderToBreak,breakToPlaceholder,getUrl,evaluate,getMax,getMin,parseGenericTypes,countOccurrence,shouldCombineSets,processSet,isMathMLSupported,katexRegex,hasKatex,calculateMathMLDimensions,renderKatexUnsanitized,renderKatexSanitized,common_default,init_katex=__esm({"../../node_modules/.pnpm/katex@0.16.22/node_modules/katex/dist/katex.mjs"(){for(SourceLocation=class _SourceLocation{static{__name(this,"SourceLocation")}constructor(lexer,start3,end2){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=lexer,this.start=start3,this.end=end2}static range(first3,second2){return second2?first3&&first3.loc&&second2.loc&&first3.loc.lexer===second2.loc.lexer?new _SourceLocation(first3.loc.lexer,first3.loc.start,second2.loc.end):null:first3&&first3.loc}},Token=class _Token{static{__name(this,"Token")}constructor(text4,loc){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=text4,this.loc=loc}range(endToken,text4){return new _Token(text4,SourceLocation.range(this,endToken))}},(ParseError=class _ParseError{static{__name(this,"ParseError")}constructor(message,token2){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var start3,end2,error3="KaTeX parse error: "+message,loc=token2&&token2.loc;if(loc&&loc.start<=loc.end){var input=loc.lexer.input;start3=loc.start,end2=loc.end,start3===input.length?error3+=" at end of input: ":error3+=" at position "+(start3+1)+": ";var underlined=input.slice(start3,end2).replace(/[^]/g,"$&̲");error3+=(start3>15?"…"+input.slice(start3-15,start3):input.slice(0,start3))+underlined+(end2+15<input.length?input.slice(end2,end2+15)+"…":input.slice(end2))}var self2=new Error(error3);return self2.name="ParseError",self2.__proto__=_ParseError.prototype,self2.position=start3,null!=start3&&null!=end2&&(self2.length=end2-start3),self2.rawMessage=message,self2}}).prototype.__proto__=Error.prototype,contains=__name(function(list,elem){return-1!==list.indexOf(elem)},"contains"),deflt=__name(function(setting,defaultIfUndefined){return void 0===setting?defaultIfUndefined:setting},"deflt"),uppercase=/([A-Z])/g,hyphenate=__name(function(str2){return str2.replace(uppercase,"-$1").toLowerCase()},"hyphenate"),ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g,__name(escape2,"escape"),getBaseElem=__name(function getBaseElem2(group2){return"ordgroup"===group2.type||"color"===group2.type?1===group2.body.length?getBaseElem2(group2.body[0]):group2:"font"===group2.type?getBaseElem2(group2.body):group2},"getBaseElem"),isCharacterBox=__name(function(group2){var baseElem=getBaseElem(group2);return"mathord"===baseElem.type||"textord"===baseElem.type||"atom"===baseElem.type},"isCharacterBox"),assert=__name(function(value2){if(!value2)throw new Error("Expected non-null, but got "+String(value2));return value2},"assert"),utils={contains:contains,deflt:deflt,escape:escape2,hyphenate:hyphenate,getBaseElem:getBaseElem,isCharacterBox:isCharacterBox,protocolFromUrl:__name(function(url){var protocol=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(url);return protocol?":"!==protocol[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(protocol[1])?protocol[1].toLowerCase():null:"_relative"},"protocolFromUrl")},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:__name(color2=>"#"+color2,"cliProcessor")},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:__name((def,defs2)=>(defs2.push(def),defs2),"cliProcessor")},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:__name(t4=>Math.max(0,t4),"processor"),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:__name(s2=>Math.max(0,s2),"processor"),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:__name(n2=>Math.max(0,n2),"processor"),cli:"-e, --max-expand <n>",cliProcessor:__name(n2=>"Infinity"===n2?1/0:parseInt(n2),"cliProcessor")},globalGroup:{type:"boolean",cli:!1}},__name(getDefaultValue,"getDefaultValue"),Settings=class{static{__name(this,"Settings")}constructor(options2){for(var prop in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,options2=options2||{},SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(prop)){var schema2=SETTINGS_SCHEMA[prop];this[prop]=void 0!==options2[prop]?schema2.processor?schema2.processor(options2[prop]):options2[prop]:getDefaultValue(schema2)}}reportNonstrict(errorCode,errorMsg,token2){var strict=this.strict;if("function"==typeof strict&&(strict=strict(errorCode,errorMsg,token2)),strict&&"ignore"!==strict){if(!0===strict||"error"===strict)throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+errorMsg+" ["+errorCode+"]",token2);"warn"===strict?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+errorMsg+" ["+errorCode+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+strict+"': "+errorMsg+" ["+errorCode+"]")}}useStrictBehavior(errorCode,errorMsg,token2){var strict=this.strict;if("function"==typeof strict)try{strict=strict(errorCode,errorMsg,token2)}catch(error3){strict="error"}return!(!strict||"ignore"===strict)&&(!0===strict||"error"===strict||("warn"===strict?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+errorMsg+" ["+errorCode+"]"),!1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+strict+"': "+errorMsg+" ["+errorCode+"]"),!1)))}isTrusted(context){if(context.url&&!context.protocol){var protocol=utils.protocolFromUrl(context.url);if(null==protocol)return!1;context.protocol=protocol}var trust="function"==typeof this.trust?this.trust(context):this.trust;return Boolean(trust)}},Style=class{static{__name(this,"Style")}constructor(id30,size4,cramped){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=id30,this.size=size4,this.cramped=cramped}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}},styles=[new Style(0,0,!1),new Style(1,0,!0),new Style(2,1,!1),new Style(3,1,!0),new Style(4,2,!1),new Style(5,2,!0),new Style(6,3,!1),new Style(7,3,!0)],sup=[4,5,4,5,6,7,6,7],sub=[5,5,5,5,7,7,7,7],fracNum=[2,3,4,5,6,7,6,7],fracDen=[3,3,5,5,7,7,7,7],cramp=[1,1,3,3,5,5,7,7],text$1=[0,1,2,3,2,3,2,3],Style$1={DISPLAY:styles[0],TEXT:styles[2],SCRIPT:styles[4],SCRIPTSCRIPT:styles[6]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],__name(scriptFromCodepoint,"scriptFromCodepoint"),allBlocks=[],scriptData.forEach(s2=>s2.blocks.forEach(b3=>allBlocks.push(...b3))),__name(supportedCodepoint,"supportedCodepoint"),sqrtMain=__name(function(extraVinculum,hLinePad2){return"M95,"+(622+extraVinculum+hLinePad2)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+extraVinculum/2.075+" -"+extraVinculum+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+extraVinculum)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+extraVinculum)+" "+hLinePad2+"h400000v"+(40+extraVinculum)+"h-400000z"},"sqrtMain"),sqrtSize1=__name(function(extraVinculum,hLinePad2){return"M263,"+(601+extraVinculum+hLinePad2)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+extraVinculum/2.084+" -"+extraVinculum+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+extraVinculum)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+extraVinculum)+" "+hLinePad2+"h400000v"+(40+extraVinculum)+"h-400000z"},"sqrtSize1"),sqrtSize2=__name(function(extraVinculum,hLinePad2){return"M983 "+(10+extraVinculum+hLinePad2)+"\nl"+extraVinculum/3.13+" -"+extraVinculum+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+extraVinculum)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+extraVinculum)+" "+hLinePad2+"h400000v"+(40+extraVinculum)+"h-400000z"},"sqrtSize2"),sqrtSize3=__name(function(extraVinculum,hLinePad2){return"M424,"+(2398+extraVinculum+hLinePad2)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+extraVinculum/4.223+" -"+extraVinculum+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+extraVinculum)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+extraVinculum)+" "+hLinePad2+"\nh400000v"+(40+extraVinculum)+"h-400000z"},"sqrtSize3"),sqrtSize4=__name(function(extraVinculum,hLinePad2){return"M473,"+(2713+extraVinculum+hLinePad2)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+extraVinculum/5.298+" -"+extraVinculum+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+extraVinculum)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+extraVinculum)+" "+hLinePad2+"h400000v"+(40+extraVinculum)+"H1017.7z"},"sqrtSize4"),phasePath=__name(function(y6){return"M400000 "+y6+" H0 L"+y6/2+" 0 l65 45 L145 "+(y6-80)+" H400000z"},"phasePath"),sqrtTall=__name(function(extraVinculum,hLinePad2,viewBoxHeight){return"M702 "+(extraVinculum+hLinePad2)+"H400000"+(40+extraVinculum)+"\nH742v"+(viewBoxHeight-54-hLinePad2-extraVinculum)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+hLinePad2+"H400000v"+(40+extraVinculum)+"H742z"},"sqrtTall"),sqrtPath=__name(function(size4,extraVinculum,viewBoxHeight){extraVinculum*=1e3;var path4="";switch(size4){case"sqrtMain":path4=sqrtMain(extraVinculum,80);break;case"sqrtSize1":path4=sqrtSize1(extraVinculum,80);break;case"sqrtSize2":path4=sqrtSize2(extraVinculum,80);break;case"sqrtSize3":path4=sqrtSize3(extraVinculum,80);break;case"sqrtSize4":path4=sqrtSize4(extraVinculum,80);break;case"sqrtTall":path4=sqrtTall(extraVinculum,80,viewBoxHeight)}return path4},"sqrtPath"),innerPath=__name(function(name,height2){switch(name){case"⎜":return"M291 0 H417 V"+height2+" H291z M291 0 H417 V"+height2+" H291z";case"∣":return"M145 0 H188 V"+height2+" H145z M145 0 H188 V"+height2+" H145z";case"∥":return"M145 0 H188 V"+height2+" H145z M145 0 H188 V"+height2+" H145zM367 0 H410 V"+height2+" H367z M367 0 H410 V"+height2+" H367z";case"⎟":return"M457 0 H583 V"+height2+" H457z M457 0 H583 V"+height2+" H457z";case"⎢":return"M319 0 H403 V"+height2+" H319z M319 0 H403 V"+height2+" H319z";case"⎥":return"M263 0 H347 V"+height2+" H263z M263 0 H347 V"+height2+" H263z";case"⎪":return"M384 0 H504 V"+height2+" H384z M384 0 H504 V"+height2+" H384z";case"⏐":return"M312 0 H355 V"+height2+" H312z M312 0 H355 V"+height2+" H312z";case"‖":return"M257 0 H300 V"+height2+" H257z M257 0 H300 V"+height2+" H257zM478 0 H521 V"+height2+" H478z M478 0 H521 V"+height2+" H478z";default:return""}},"innerPath"),path={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},tallDelim=__name(function(label,midHeight){switch(label){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+midHeight+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+midHeight+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+midHeight+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+midHeight+" v1759 h84z";case"vert":return"M145 15 v585 v"+midHeight+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-midHeight+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+midHeight+" v585 h43z";case"doublevert":return"M145 15 v585 v"+midHeight+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-midHeight+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+midHeight+" v585 h43z\nM367 15 v585 v"+midHeight+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-midHeight+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+midHeight+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+midHeight+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+midHeight+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+midHeight+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+midHeight+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+midHeight+" v602 h84z\nM403 1759 V0 H319 V1759 v"+midHeight+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+midHeight+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+midHeight+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(midHeight+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(midHeight+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(midHeight+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(midHeight+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}},"tallDelim"),DocumentFragment=class{static{__name(this,"DocumentFragment")}constructor(children2){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=children2,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(className){return utils.contains(this.classes,className)}toNode(){for(var frag=document.createDocumentFragment(),i2=0;i2<this.children.length;i2++)frag.appendChild(this.children[i2].toNode());return frag}toMarkup(){for(var markup="",i2=0;i2<this.children.length;i2++)markup+=this.children[i2].toMarkup();return markup}toText(){var toText=__name(child=>child.toText(),"toText");return this.children.map(toText).join("")}},fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={"Å":"A","Ð":"D","Þ":"o","å":"a","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"},__name(setFontMetrics,"setFontMetrics"),__name(getCharacterMetrics,"getCharacterMetrics"),fontMetricsBySizeIndex={},__name(getGlobalMetrics,"getGlobalMetrics"),sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=__name(function(size4,style3){return style3.size<2?size4:sizeStyleMap[size4-1][style3.size-1]},"sizeAtStyle"),(Options=class _Options{static{__name(this,"Options")}constructor(data5){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=data5.style,this.color=data5.color,this.size=data5.size||_Options.BASESIZE,this.textSize=data5.textSize||this.size,this.phantom=!!data5.phantom,this.font=data5.font||"",this.fontFamily=data5.fontFamily||"",this.fontWeight=data5.fontWeight||"",this.fontShape=data5.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=data5.maxSize,this.minRuleThickness=data5.minRuleThickness,this._fontMetrics=void 0}extend(extension5){var data5={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var key in extension5)extension5.hasOwnProperty(key)&&(data5[key]=extension5[key]);return new _Options(data5)}havingStyle(style3){return this.style===style3?this:this.extend({style:style3,size:sizeAtStyle(this.textSize,style3)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(size4){return this.size===size4&&this.textSize===size4?this:this.extend({style:this.style.text(),size:size4,textSize:size4,sizeMultiplier:sizeMultipliers[size4-1]})}havingBaseStyle(style3){style3=style3||this.style.text();var wantSize=sizeAtStyle(_Options.BASESIZE,style3);return this.size===wantSize&&this.textSize===_Options.BASESIZE&&this.style===style3?this:this.extend({style:style3,size:wantSize})}havingBaseSizing(){var size4;switch(this.style.id){case 4:case 5:size4=3;break;case 6:case 7:size4=1;break;default:size4=6}return this.extend({style:this.style.text(),size:size4})}withColor(color2){return this.extend({color:color2})}withPhantom(){return this.extend({phantom:!0})}withFont(font){return this.extend({font:font})}withTextFontFamily(fontFamily){return this.extend({fontFamily:fontFamily,font:""})}withTextFontWeight(fontWeight){return this.extend({fontWeight:fontWeight,font:""})}withTextFontShape(fontShape){return this.extend({fontShape:fontShape,font:""})}sizingClasses(oldOptions){return oldOptions.size!==this.size?["sizing","reset-size"+oldOptions.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==_Options.BASESIZE?["sizing","reset-size"+this.size,"size"+_Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}).BASESIZE=6,ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=__name(function(unit2){return"string"!=typeof unit2&&(unit2=unit2.unit),unit2 in ptPerUnit||unit2 in relativeUnit||"ex"===unit2},"validUnit"),calculateSize2=__name(function(sizeValue,options2){var scale2;if(sizeValue.unit in ptPerUnit)scale2=ptPerUnit[sizeValue.unit]/options2.fontMetrics().ptPerEm/options2.sizeMultiplier;else if("mu"===sizeValue.unit)scale2=options2.fontMetrics().cssEmPerMu;else{var unitOptions;if(unitOptions=options2.style.isTight()?options2.havingStyle(options2.style.text()):options2,"ex"===sizeValue.unit)scale2=unitOptions.fontMetrics().xHeight;else{if("em"!==sizeValue.unit)throw new ParseError("Invalid unit: '"+sizeValue.unit+"'");scale2=unitOptions.fontMetrics().quad}unitOptions!==options2&&(scale2*=unitOptions.sizeMultiplier/options2.sizeMultiplier)}return Math.min(sizeValue.number*scale2,options2.maxSize)},"calculateSize"),makeEm=__name(function(n2){return+n2.toFixed(4)+"em"},"makeEm"),createClass=__name(function(classes3){return classes3.filter(cls=>cls).join(" ")},"createClass"),initNode=__name(function(classes3,options2,style3){if(this.classes=classes3||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=style3||{},options2){options2.style.isTight()&&this.classes.push("mtight");var color2=options2.getColor();color2&&(this.style.color=color2)}},"initNode"),toNode=__name(function(tagName){var node2=document.createElement(tagName);for(var style3 in node2.className=createClass(this.classes),this.style)this.style.hasOwnProperty(style3)&&(node2.style[style3]=this.style[style3]);for(var attr in this.attributes)this.attributes.hasOwnProperty(attr)&&node2.setAttribute(attr,this.attributes[attr]);for(var i2=0;i2<this.children.length;i2++)node2.appendChild(this.children[i2].toNode());return node2},"toNode"),invalidAttributeNameRegex=/[\s"'>/=\x00-\x1f]/,toMarkup=__name(function(tagName){var markup="<"+tagName;this.classes.length&&(markup+=' class="'+utils.escape(createClass(this.classes))+'"');var styles4="";for(var style3 in this.style)this.style.hasOwnProperty(style3)&&(styles4+=utils.hyphenate(style3)+":"+this.style[style3]+";");for(var attr in styles4&&(markup+=' style="'+utils.escape(styles4)+'"'),this.attributes)if(this.attributes.hasOwnProperty(attr)){if(invalidAttributeNameRegex.test(attr))throw new ParseError("Invalid attribute name '"+attr+"'");markup+=" "+attr+'="'+utils.escape(this.attributes[attr])+'"'}markup+=">";for(var i2=0;i2<this.children.length;i2++)markup+=this.children[i2].toMarkup();return markup+="</"+tagName+">"},"toMarkup"),Span=class{static{__name(this,"Span")}constructor(classes3,children2,options2,style3){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,classes3,options2,style3),this.children=children2||[]}setAttribute(attribute,value2){this.attributes[attribute]=value2}hasClass(className){return utils.contains(this.classes,className)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}},Anchor=class{static{__name(this,"Anchor")}constructor(href,classes3,children2,options2){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,classes3,options2),this.children=children2||[],this.setAttribute("href",href)}setAttribute(attribute,value2){this.attributes[attribute]=value2}hasClass(className){return utils.contains(this.classes,className)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}},Img=class{static{__name(this,"Img")}constructor(src,alt,style3){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=alt,this.src=src,this.classes=["mord"],this.style=style3}hasClass(className){return utils.contains(this.classes,className)}toNode(){var node2=document.createElement("img");for(var style3 in node2.src=this.src,node2.alt=this.alt,node2.className="mord",this.style)this.style.hasOwnProperty(style3)&&(node2.style[style3]=this.style[style3]);return node2}toMarkup(){var markup='<img src="'+utils.escape(this.src)+'" alt="'+utils.escape(this.alt)+'"',styles4="";for(var style3 in this.style)this.style.hasOwnProperty(style3)&&(styles4+=utils.hyphenate(style3)+":"+this.style[style3]+";");return styles4&&(markup+=' style="'+utils.escape(styles4)+'"'),markup+="'/>"}},iCombinations={"î":"ı̂","ï":"ı̈","í":"ı́","ì":"ı̀"},SymbolNode=class{static{__name(this,"SymbolNode")}constructor(text4,height2,depth,italic,skew,width3,classes3,style3){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=text4,this.height=height2||0,this.depth=depth||0,this.italic=italic||0,this.skew=skew||0,this.width=width3||0,this.classes=classes3||[],this.style=style3||{},this.maxFontSize=0;var script=scriptFromCodepoint(this.text.charCodeAt(0));script&&this.classes.push(script+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(className){return utils.contains(this.classes,className)}toNode(){var node2=document.createTextNode(this.text),span=null;for(var style3 in this.italic>0&&((span=document.createElement("span")).style.marginRight=makeEm(this.italic)),this.classes.length>0&&((span=span||document.createElement("span")).className=createClass(this.classes)),this.style)this.style.hasOwnProperty(style3)&&((span=span||document.createElement("span")).style[style3]=this.style[style3]);return span?(span.appendChild(node2),span):node2}toMarkup(){var needsSpan=!1,markup="<span";this.classes.length&&(needsSpan=!0,markup+=' class="',markup+=utils.escape(createClass(this.classes)),markup+='"');var styles4="";for(var style3 in this.italic>0&&(styles4+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(style3)&&(styles4+=utils.hyphenate(style3)+":"+this.style[style3]+";");styles4&&(needsSpan=!0,markup+=' style="'+utils.escape(styles4)+'"');var escaped=utils.escape(this.text);return needsSpan?(markup+=">",markup+=escaped,markup+="</span>"):escaped}},SvgNode=class{static{__name(this,"SvgNode")}constructor(children2,attributes){this.children=void 0,this.attributes=void 0,this.children=children2||[],this.attributes=attributes||{}}toNode(){var node2=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var attr in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,attr)&&node2.setAttribute(attr,this.attributes[attr]);for(var i2=0;i2<this.children.length;i2++)node2.appendChild(this.children[i2].toNode());return node2}toMarkup(){var markup='<svg xmlns="http://www.w3.org/2000/svg"';for(var attr in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,attr)&&(markup+=" "+attr+'="'+utils.escape(this.attributes[attr])+'"');markup+=">";for(var i2=0;i2<this.children.length;i2++)markup+=this.children[i2].toMarkup();return markup+="</svg>"}},PathNode=class{static{__name(this,"PathNode")}constructor(pathName,alternate){this.pathName=void 0,this.alternate=void 0,this.pathName=pathName,this.alternate=alternate}toNode(){var node2=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?node2.setAttribute("d",this.alternate):node2.setAttribute("d",path[this.pathName]),node2}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path[this.pathName])+'"/>'}},LineNode=class{static{__name(this,"LineNode")}constructor(attributes){this.attributes=void 0,this.attributes=attributes||{}}toNode(){var node2=document.createElementNS("http://www.w3.org/2000/svg","line");for(var attr in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,attr)&&node2.setAttribute(attr,this.attributes[attr]);return node2}toMarkup(){var markup="<line";for(var attr in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,attr)&&(markup+=" "+attr+'="'+utils.escape(this.attributes[attr])+'"');return markup+="/>"}},__name(assertSymbolDomNode,"assertSymbolDomNode"),__name(assertSpan,"assertSpan"),ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}},__name(defineSymbol,"defineSymbol"),text2="text",ams="ams",accent="accent-token",bin="bin",close="close",mathord="mathord",op="op-token",open="open",textord="textord",defineSymbol(math="math",main="main",rel="rel","≡","\\equiv",!0),defineSymbol(math,main,rel,"≺","\\prec",!0),defineSymbol(math,main,rel,"≻","\\succ",!0),defineSymbol(math,main,rel,"∼","\\sim",!0),defineSymbol(math,main,rel,"⊥","\\perp"),defineSymbol(math,main,rel,"⪯","\\preceq",!0),defineSymbol(math,main,rel,"⪰","\\succeq",!0),defineSymbol(math,main,rel,"≃","\\simeq",!0),defineSymbol(math,main,rel,"∣","\\mid",!0),defineSymbol(math,main,rel,"≪","\\ll",!0),defineSymbol(math,main,rel,"≫","\\gg",!0),defineSymbol(math,main,rel,"≍","\\asymp",!0),defineSymbol(math,main,rel,"∥","\\parallel"),defineSymbol(math,main,rel,"⋈","\\bowtie",!0),defineSymbol(math,main,rel,"⌣","\\smile",!0),defineSymbol(math,main,rel,"⊑","\\sqsubseteq",!0),defineSymbol(math,main,rel,"⊒","\\sqsupseteq",!0),defineSymbol(math,main,rel,"≐","\\doteq",!0),defineSymbol(math,main,rel,"⌢","\\frown",!0),defineSymbol(math,main,rel,"∋","\\ni",!0),defineSymbol(math,main,rel,"∝","\\propto",!0),defineSymbol(math,main,rel,"⊢","\\vdash",!0),defineSymbol(math,main,rel,"⊣","\\dashv",!0),defineSymbol(math,main,rel,"∋","\\owns"),defineSymbol(math,main,"punct",".","\\ldotp"),defineSymbol(math,main,"punct","⋅","\\cdotp"),defineSymbol(math,main,textord,"#","\\#"),defineSymbol(text2,main,textord,"#","\\#"),defineSymbol(math,main,textord,"&","\\&"),defineSymbol(text2,main,textord,"&","\\&"),defineSymbol(math,main,textord,"ℵ","\\aleph",!0),defineSymbol(math,main,textord,"∀","\\forall",!0),defineSymbol(math,main,textord,"ℏ","\\hbar",!0),defineSymbol(math,main,textord,"∃","\\exists",!0),defineSymbol(math,main,textord,"∇","\\nabla",!0),defineSymbol(math,main,textord,"♭","\\flat",!0),defineSymbol(math,main,textord,"ℓ","\\ell",!0),defineSymbol(math,main,textord,"♮","\\natural",!0),defineSymbol(math,main,textord,"♣","\\clubsuit",!0),defineSymbol(math,main,textord,"℘","\\wp",!0),defineSymbol(math,main,textord,"♯","\\sharp",!0),defineSymbol(math,main,textord,"♢","\\diamondsuit",!0),defineSymbol(math,main,textord,"ℜ","\\Re",!0),defineSymbol(math,main,textord,"♡","\\heartsuit",!0),defineSymbol(math,main,textord,"ℑ","\\Im",!0),defineSymbol(math,main,textord,"♠","\\spadesuit",!0),defineSymbol(math,main,textord,"§","\\S",!0),defineSymbol(text2,main,textord,"§","\\S"),defineSymbol(math,main,textord,"¶","\\P",!0),defineSymbol(text2,main,textord,"¶","\\P"),defineSymbol(math,main,textord,"†","\\dag"),defineSymbol(text2,main,textord,"†","\\dag"),defineSymbol(text2,main,textord,"†","\\textdagger"),defineSymbol(math,main,textord,"‡","\\ddag"),defineSymbol(text2,main,textord,"‡","\\ddag"),defineSymbol(text2,main,textord,"‡","\\textdaggerdbl"),defineSymbol(math,main,close,"⎱","\\rmoustache",!0),defineSymbol(math,main,open,"⎰","\\lmoustache",!0),defineSymbol(math,main,close,"⟯","\\rgroup",!0),defineSymbol(math,main,open,"⟮","\\lgroup",!0),defineSymbol(math,main,bin,"∓","\\mp",!0),defineSymbol(math,main,bin,"⊖","\\ominus",!0),defineSymbol(math,main,bin,"⊎","\\uplus",!0),defineSymbol(math,main,bin,"⊓","\\sqcap",!0),defineSymbol(math,main,bin,"∗","\\ast"),defineSymbol(math,main,bin,"⊔","\\sqcup",!0),defineSymbol(math,main,bin,"◯","\\bigcirc",!0),defineSymbol(math,main,bin,"∙","\\bullet",!0),defineSymbol(math,main,bin,"‡","\\ddagger"),defineSymbol(math,main,bin,"≀","\\wr",!0),defineSymbol(math,main,bin,"⨿","\\amalg"),defineSymbol(math,main,bin,"&","\\And"),defineSymbol(math,main,rel,"⟵","\\longleftarrow",!0),defineSymbol(math,main,rel,"⇐","\\Leftarrow",!0),defineSymbol(math,main,rel,"⟸","\\Longleftarrow",!0),defineSymbol(math,main,rel,"⟶","\\longrightarrow",!0),defineSymbol(math,main,rel,"⇒","\\Rightarrow",!0),defineSymbol(math,main,rel,"⟹","\\Longrightarrow",!0),defineSymbol(math,main,rel,"↔","\\leftrightarrow",!0),defineSymbol(math,main,rel,"⟷","\\longleftrightarrow",!0),defineSymbol(math,main,rel,"⇔","\\Leftrightarrow",!0),defineSymbol(math,main,rel,"⟺","\\Longleftrightarrow",!0),defineSymbol(math,main,rel,"↦","\\mapsto",!0),defineSymbol(math,main,rel,"⟼","\\longmapsto",!0),defineSymbol(math,main,rel,"↗","\\nearrow",!0),defineSymbol(math,main,rel,"↩","\\hookleftarrow",!0),defineSymbol(math,main,rel,"↪","\\hookrightarrow",!0),defineSymbol(math,main,rel,"↘","\\searrow",!0),defineSymbol(math,main,rel,"↼","\\leftharpoonup",!0),defineSymbol(math,main,rel,"⇀","\\rightharpoonup",!0),defineSymbol(math,main,rel,"↙","\\swarrow",!0),defineSymbol(math,main,rel,"↽","\\leftharpoondown",!0),defineSymbol(math,main,rel,"⇁","\\rightharpoondown",!0),defineSymbol(math,main,rel,"↖","\\nwarrow",!0),defineSymbol(math,main,rel,"⇌","\\rightleftharpoons",!0),defineSymbol(math,ams,rel,"≮","\\nless",!0),defineSymbol(math,ams,rel,"","\\@nleqslant"),defineSymbol(math,ams,rel,"","\\@nleqq"),defineSymbol(math,ams,rel,"⪇","\\lneq",!0),defineSymbol(math,ams,rel,"≨","\\lneqq",!0),defineSymbol(math,ams,rel,"","\\@lvertneqq"),defineSymbol(math,ams,rel,"⋦","\\lnsim",!0),defineSymbol(math,ams,rel,"⪉","\\lnapprox",!0),defineSymbol(math,ams,rel,"⊀","\\nprec",!0),defineSymbol(math,ams,rel,"⋠","\\npreceq",!0),defineSymbol(math,ams,rel,"⋨","\\precnsim",!0),defineSymbol(math,ams,rel,"⪹","\\precnapprox",!0),defineSymbol(math,ams,rel,"≁","\\nsim",!0),defineSymbol(math,ams,rel,"","\\@nshortmid"),defineSymbol(math,ams,rel,"∤","\\nmid",!0),defineSymbol(math,ams,rel,"⊬","\\nvdash",!0),defineSymbol(math,ams,rel,"⊭","\\nvDash",!0),defineSymbol(math,ams,rel,"⋪","\\ntriangleleft"),defineSymbol(math,ams,rel,"⋬","\\ntrianglelefteq",!0),defineSymbol(math,ams,rel,"⊊","\\subsetneq",!0),defineSymbol(math,ams,rel,"","\\@varsubsetneq"),defineSymbol(math,ams,rel,"⫋","\\subsetneqq",!0),defineSymbol(math,ams,rel,"","\\@varsubsetneqq"),defineSymbol(math,ams,rel,"≯","\\ngtr",!0),defineSymbol(math,ams,rel,"","\\@ngeqslant"),defineSymbol(math,ams,rel,"","\\@ngeqq"),defineSymbol(math,ams,rel,"⪈","\\gneq",!0),defineSymbol(math,ams,rel,"≩","\\gneqq",!0),defineSymbol(math,ams,rel,"","\\@gvertneqq"),defineSymbol(math,ams,rel,"⋧","\\gnsim",!0),defineSymbol(math,ams,rel,"⪊","\\gnapprox",!0),defineSymbol(math,ams,rel,"⊁","\\nsucc",!0),defineSymbol(math,ams,rel,"⋡","\\nsucceq",!0),defineSymbol(math,ams,rel,"⋩","\\succnsim",!0),defineSymbol(math,ams,rel,"⪺","\\succnapprox",!0),defineSymbol(math,ams,rel,"≆","\\ncong",!0),defineSymbol(math,ams,rel,"","\\@nshortparallel"),defineSymbol(math,ams,rel,"∦","\\nparallel",!0),defineSymbol(math,ams,rel,"⊯","\\nVDash",!0),defineSymbol(math,ams,rel,"⋫","\\ntriangleright"),defineSymbol(math,ams,rel,"⋭","\\ntrianglerighteq",!0),defineSymbol(math,ams,rel,"","\\@nsupseteqq"),defineSymbol(math,ams,rel,"⊋","\\supsetneq",!0),defineSymbol(math,ams,rel,"","\\@varsupsetneq"),defineSymbol(math,ams,rel,"⫌","\\supsetneqq",!0),defineSymbol(math,ams,rel,"","\\@varsupsetneqq"),defineSymbol(math,ams,rel,"⊮","\\nVdash",!0),defineSymbol(math,ams,rel,"⪵","\\precneqq",!0),defineSymbol(math,ams,rel,"⪶","\\succneqq",!0),defineSymbol(math,ams,rel,"","\\@nsubseteqq"),defineSymbol(math,ams,bin,"⊴","\\unlhd"),defineSymbol(math,ams,bin,"⊵","\\unrhd"),defineSymbol(math,ams,rel,"↚","\\nleftarrow",!0),defineSymbol(math,ams,rel,"↛","\\nrightarrow",!0),defineSymbol(math,ams,rel,"⇍","\\nLeftarrow",!0),defineSymbol(math,ams,rel,"⇏","\\nRightarrow",!0),defineSymbol(math,ams,rel,"↮","\\nleftrightarrow",!0),defineSymbol(math,ams,rel,"⇎","\\nLeftrightarrow",!0),defineSymbol(math,ams,rel,"△","\\vartriangle"),defineSymbol(math,ams,textord,"ℏ","\\hslash"),defineSymbol(math,ams,textord,"▽","\\triangledown"),defineSymbol(math,ams,textord,"◊","\\lozenge"),defineSymbol(math,ams,textord,"Ⓢ","\\circledS"),defineSymbol(math,ams,textord,"®","\\circledR"),defineSymbol(text2,ams,textord,"®","\\circledR"),defineSymbol(math,ams,textord,"∡","\\measuredangle",!0),defineSymbol(math,ams,textord,"∄","\\nexists"),defineSymbol(math,ams,textord,"℧","\\mho"),defineSymbol(math,ams,textord,"Ⅎ","\\Finv",!0),defineSymbol(math,ams,textord,"⅁","\\Game",!0),defineSymbol(math,ams,textord,"‵","\\backprime"),defineSymbol(math,ams,textord,"▲","\\blacktriangle"),defineSymbol(math,ams,textord,"▼","\\blacktriangledown"),defineSymbol(math,ams,textord,"■","\\blacksquare"),defineSymbol(math,ams,textord,"⧫","\\blacklozenge"),defineSymbol(math,ams,textord,"★","\\bigstar"),defineSymbol(math,ams,textord,"∢","\\sphericalangle",!0),defineSymbol(math,ams,textord,"∁","\\complement",!0),defineSymbol(math,ams,textord,"ð","\\eth",!0),defineSymbol(text2,main,textord,"ð","ð"),defineSymbol(math,ams,textord,"╱","\\diagup"),defineSymbol(math,ams,textord,"╲","\\diagdown"),defineSymbol(math,ams,textord,"□","\\square"),defineSymbol(math,ams,textord,"□","\\Box"),defineSymbol(math,ams,textord,"◊","\\Diamond"),defineSymbol(math,ams,textord,"¥","\\yen",!0),defineSymbol(text2,ams,textord,"¥","\\yen",!0),defineSymbol(math,ams,textord,"✓","\\checkmark",!0),defineSymbol(text2,ams,textord,"✓","\\checkmark"),defineSymbol(math,ams,textord,"ℶ","\\beth",!0),defineSymbol(math,ams,textord,"ℸ","\\daleth",!0),defineSymbol(math,ams,textord,"ℷ","\\gimel",!0),defineSymbol(math,ams,textord,"ϝ","\\digamma",!0),defineSymbol(math,ams,textord,"ϰ","\\varkappa"),defineSymbol(math,ams,open,"┌","\\@ulcorner",!0),defineSymbol(math,ams,close,"┐","\\@urcorner",!0),defineSymbol(math,ams,open,"└","\\@llcorner",!0),defineSymbol(math,ams,close,"┘","\\@lrcorner",!0),defineSymbol(math,ams,rel,"≦","\\leqq",!0),defineSymbol(math,ams,rel,"⩽","\\leqslant",!0),defineSymbol(math,ams,rel,"⪕","\\eqslantless",!0),defineSymbol(math,ams,rel,"≲","\\lesssim",!0),defineSymbol(math,ams,rel,"⪅","\\lessapprox",!0),defineSymbol(math,ams,rel,"≊","\\approxeq",!0),defineSymbol(math,ams,bin,"⋖","\\lessdot"),defineSymbol(math,ams,rel,"⋘","\\lll",!0),defineSymbol(math,ams,rel,"≶","\\lessgtr",!0),defineSymbol(math,ams,rel,"⋚","\\lesseqgtr",!0),defineSymbol(math,ams,rel,"⪋","\\lesseqqgtr",!0),defineSymbol(math,ams,rel,"≑","\\doteqdot"),defineSymbol(math,ams,rel,"≓","\\risingdotseq",!0),defineSymbol(math,ams,rel,"≒","\\fallingdotseq",!0),defineSymbol(math,ams,rel,"∽","\\backsim",!0),defineSymbol(math,ams,rel,"⋍","\\backsimeq",!0),defineSymbol(math,ams,rel,"⫅","\\subseteqq",!0),defineSymbol(math,ams,rel,"⋐","\\Subset",!0),defineSymbol(math,ams,rel,"⊏","\\sqsubset",!0),defineSymbol(math,ams,rel,"≼","\\preccurlyeq",!0),defineSymbol(math,ams,rel,"⋞","\\curlyeqprec",!0),defineSymbol(math,ams,rel,"≾","\\precsim",!0),defineSymbol(math,ams,rel,"⪷","\\precapprox",!0),defineSymbol(math,ams,rel,"⊲","\\vartriangleleft"),defineSymbol(math,ams,rel,"⊴","\\trianglelefteq"),defineSymbol(math,ams,rel,"⊨","\\vDash",!0),defineSymbol(math,ams,rel,"⊪","\\Vvdash",!0),defineSymbol(math,ams,rel,"⌣","\\smallsmile"),defineSymbol(math,ams,rel,"⌢","\\smallfrown"),defineSymbol(math,ams,rel,"≏","\\bumpeq",!0),defineSymbol(math,ams,rel,"≎","\\Bumpeq",!0),defineSymbol(math,ams,rel,"≧","\\geqq",!0),defineSymbol(math,ams,rel,"⩾","\\geqslant",!0),defineSymbol(math,ams,rel,"⪖","\\eqslantgtr",!0),defineSymbol(math,ams,rel,"≳","\\gtrsim",!0),defineSymbol(math,ams,rel,"⪆","\\gtrapprox",!0),defineSymbol(math,ams,bin,"⋗","\\gtrdot"),defineSymbol(math,ams,rel,"⋙","\\ggg",!0),defineSymbol(math,ams,rel,"≷","\\gtrless",!0),defineSymbol(math,ams,rel,"⋛","\\gtreqless",!0),defineSymbol(math,ams,rel,"⪌","\\gtreqqless",!0),defineSymbol(math,ams,rel,"≖","\\eqcirc",!0),defineSymbol(math,ams,rel,"≗","\\circeq",!0),defineSymbol(math,ams,rel,"≜","\\triangleq",!0),defineSymbol(math,ams,rel,"∼","\\thicksim"),defineSymbol(math,ams,rel,"≈","\\thickapprox"),defineSymbol(math,ams,rel,"⫆","\\supseteqq",!0),defineSymbol(math,ams,rel,"⋑","\\Supset",!0),defineSymbol(math,ams,rel,"⊐","\\sqsupset",!0),defineSymbol(math,ams,rel,"≽","\\succcurlyeq",!0),defineSymbol(math,ams,rel,"⋟","\\curlyeqsucc",!0),defineSymbol(math,ams,rel,"≿","\\succsim",!0),defineSymbol(math,ams,rel,"⪸","\\succapprox",!0),defineSymbol(math,ams,rel,"⊳","\\vartriangleright"),defineSymbol(math,ams,rel,"⊵","\\trianglerighteq"),defineSymbol(math,ams,rel,"⊩","\\Vdash",!0),defineSymbol(math,ams,rel,"∣","\\shortmid"),defineSymbol(math,ams,rel,"∥","\\shortparallel"),defineSymbol(math,ams,rel,"≬","\\between",!0),defineSymbol(math,ams,rel,"⋔","\\pitchfork",!0),defineSymbol(math,ams,rel,"∝","\\varpropto"),defineSymbol(math,ams,rel,"◀","\\blacktriangleleft"),defineSymbol(math,ams,rel,"∴","\\therefore",!0),defineSymbol(math,ams,rel,"∍","\\backepsilon"),defineSymbol(math,ams,rel,"▶","\\blacktriangleright"),defineSymbol(math,ams,rel,"∵","\\because",!0),defineSymbol(math,ams,rel,"⋘","\\llless"),defineSymbol(math,ams,rel,"⋙","\\gggtr"),defineSymbol(math,ams,bin,"⊲","\\lhd"),defineSymbol(math,ams,bin,"⊳","\\rhd"),defineSymbol(math,ams,rel,"≂","\\eqsim",!0),defineSymbol(math,main,rel,"⋈","\\Join"),defineSymbol(math,ams,rel,"≑","\\Doteq",!0),defineSymbol(math,ams,bin,"∔","\\dotplus",!0),defineSymbol(math,ams,bin,"∖","\\smallsetminus"),defineSymbol(math,ams,bin,"⋒","\\Cap",!0),defineSymbol(math,ams,bin,"⋓","\\Cup",!0),defineSymbol(math,ams,bin,"⩞","\\doublebarwedge",!0),defineSymbol(math,ams,bin,"⊟","\\boxminus",!0),defineSymbol(math,ams,bin,"⊞","\\boxplus",!0),defineSymbol(math,ams,bin,"⋇","\\divideontimes",!0),defineSymbol(math,ams,bin,"⋉","\\ltimes",!0),defineSymbol(math,ams,bin,"⋊","\\rtimes",!0),defineSymbol(math,ams,bin,"⋋","\\leftthreetimes",!0),defineSymbol(math,ams,bin,"⋌","\\rightthreetimes",!0),defineSymbol(math,ams,bin,"⋏","\\curlywedge",!0),defineSymbol(math,ams,bin,"⋎","\\curlyvee",!0),defineSymbol(math,ams,bin,"⊝","\\circleddash",!0),defineSymbol(math,ams,bin,"⊛","\\circledast",!0),defineSymbol(math,ams,bin,"⋅","\\centerdot"),defineSymbol(math,ams,bin,"⊺","\\intercal",!0),defineSymbol(math,ams,bin,"⋒","\\doublecap"),defineSymbol(math,ams,bin,"⋓","\\doublecup"),defineSymbol(math,ams,bin,"⊠","\\boxtimes",!0),defineSymbol(math,ams,rel,"⇢","\\dashrightarrow",!0),defineSymbol(math,ams,rel,"⇠","\\dashleftarrow",!0),defineSymbol(math,ams,rel,"⇇","\\leftleftarrows",!0),defineSymbol(math,ams,rel,"⇆","\\leftrightarrows",!0),defineSymbol(math,ams,rel,"⇚","\\Lleftarrow",!0),defineSymbol(math,ams,rel,"↞","\\twoheadleftarrow",!0),defineSymbol(math,ams,rel,"↢","\\leftarrowtail",!0),defineSymbol(math,ams,rel,"↫","\\looparrowleft",!0),defineSymbol(math,ams,rel,"⇋","\\leftrightharpoons",!0),defineSymbol(math,ams,rel,"↶","\\curvearrowleft",!0),defineSymbol(math,ams,rel,"↺","\\circlearrowleft",!0),defineSymbol(math,ams,rel,"↰","\\Lsh",!0),defineSymbol(math,ams,rel,"⇈","\\upuparrows",!0),defineSymbol(math,ams,rel,"↿","\\upharpoonleft",!0),defineSymbol(math,ams,rel,"⇃","\\downharpoonleft",!0),defineSymbol(math,main,rel,"⊶","\\origof",!0),defineSymbol(math,main,rel,"⊷","\\imageof",!0),defineSymbol(math,ams,rel,"⊸","\\multimap",!0),defineSymbol(math,ams,rel,"↭","\\leftrightsquigarrow",!0),defineSymbol(math,ams,rel,"⇉","\\rightrightarrows",!0),defineSymbol(math,ams,rel,"⇄","\\rightleftarrows",!0),defineSymbol(math,ams,rel,"↠","\\twoheadrightarrow",!0),defineSymbol(math,ams,rel,"↣","\\rightarrowtail",!0),defineSymbol(math,ams,rel,"↬","\\looparrowright",!0),defineSymbol(math,ams,rel,"↷","\\curvearrowright",!0),defineSymbol(math,ams,rel,"↻","\\circlearrowright",!0),defineSymbol(math,ams,rel,"↱","\\Rsh",!0),defineSymbol(math,ams,rel,"⇊","\\downdownarrows",!0),defineSymbol(math,ams,rel,"↾","\\upharpoonright",!0),defineSymbol(math,ams,rel,"⇂","\\downharpoonright",!0),defineSymbol(math,ams,rel,"⇝","\\rightsquigarrow",!0),defineSymbol(math,ams,rel,"⇝","\\leadsto"),defineSymbol(math,ams,rel,"⇛","\\Rrightarrow",!0),defineSymbol(math,ams,rel,"↾","\\restriction"),defineSymbol(math,main,textord,"‘","`"),defineSymbol(math,main,textord,"$","\\$"),defineSymbol(text2,main,textord,"$","\\$"),defineSymbol(text2,main,textord,"$","\\textdollar"),defineSymbol(math,main,textord,"%","\\%"),defineSymbol(text2,main,textord,"%","\\%"),defineSymbol(math,main,textord,"_","\\_"),defineSymbol(text2,main,textord,"_","\\_"),defineSymbol(text2,main,textord,"_","\\textunderscore"),defineSymbol(math,main,textord,"∠","\\angle",!0),defineSymbol(math,main,textord,"∞","\\infty",!0),defineSymbol(math,main,textord,"′","\\prime"),defineSymbol(math,main,textord,"△","\\triangle"),defineSymbol(math,main,textord,"Γ","\\Gamma",!0),defineSymbol(math,main,textord,"Δ","\\Delta",!0),defineSymbol(math,main,textord,"Θ","\\Theta",!0),defineSymbol(math,main,textord,"Λ","\\Lambda",!0),defineSymbol(math,main,textord,"Ξ","\\Xi",!0),defineSymbol(math,main,textord,"Π","\\Pi",!0),defineSymbol(math,main,textord,"Σ","\\Sigma",!0),defineSymbol(math,main,textord,"Υ","\\Upsilon",!0),defineSymbol(math,main,textord,"Φ","\\Phi",!0),defineSymbol(math,main,textord,"Ψ","\\Psi",!0),defineSymbol(math,main,textord,"Ω","\\Omega",!0),defineSymbol(math,main,textord,"A","Α"),defineSymbol(math,main,textord,"B","Β"),defineSymbol(math,main,textord,"E","Ε"),defineSymbol(math,main,textord,"Z","Ζ"),defineSymbol(math,main,textord,"H","Η"),defineSymbol(math,main,textord,"I","Ι"),defineSymbol(math,main,textord,"K","Κ"),defineSymbol(math,main,textord,"M","Μ"),defineSymbol(math,main,textord,"N","Ν"),defineSymbol(math,main,textord,"O","Ο"),defineSymbol(math,main,textord,"P","Ρ"),defineSymbol(math,main,textord,"T","Τ"),defineSymbol(math,main,textord,"X","Χ"),defineSymbol(math,main,textord,"¬","\\neg",!0),defineSymbol(math,main,textord,"¬","\\lnot"),defineSymbol(math,main,textord,"⊤","\\top"),defineSymbol(math,main,textord,"⊥","\\bot"),defineSymbol(math,main,textord,"∅","\\emptyset"),defineSymbol(math,ams,textord,"∅","\\varnothing"),defineSymbol(math,main,mathord,"α","\\alpha",!0),defineSymbol(math,main,mathord,"β","\\beta",!0),defineSymbol(math,main,mathord,"γ","\\gamma",!0),defineSymbol(math,main,mathord,"δ","\\delta",!0),defineSymbol(math,main,mathord,"ϵ","\\epsilon",!0),defineSymbol(math,main,mathord,"ζ","\\zeta",!0),defineSymbol(math,main,mathord,"η","\\eta",!0),defineSymbol(math,main,mathord,"θ","\\theta",!0),defineSymbol(math,main,mathord,"ι","\\iota",!0),defineSymbol(math,main,mathord,"κ","\\kappa",!0),defineSymbol(math,main,mathord,"λ","\\lambda",!0),defineSymbol(math,main,mathord,"μ","\\mu",!0),defineSymbol(math,main,mathord,"ν","\\nu",!0),defineSymbol(math,main,mathord,"ξ","\\xi",!0),defineSymbol(math,main,mathord,"ο","\\omicron",!0),defineSymbol(math,main,mathord,"π","\\pi",!0),defineSymbol(math,main,mathord,"ρ","\\rho",!0),defineSymbol(math,main,mathord,"σ","\\sigma",!0),defineSymbol(math,main,mathord,"τ","\\tau",!0),defineSymbol(math,main,mathord,"υ","\\upsilon",!0),defineSymbol(math,main,mathord,"ϕ","\\phi",!0),defineSymbol(math,main,mathord,"χ","\\chi",!0),defineSymbol(math,main,mathord,"ψ","\\psi",!0),defineSymbol(math,main,mathord,"ω","\\omega",!0),defineSymbol(math,main,mathord,"ε","\\varepsilon",!0),defineSymbol(math,main,mathord,"ϑ","\\vartheta",!0),defineSymbol(math,main,mathord,"ϖ","\\varpi",!0),defineSymbol(math,main,mathord,"ϱ","\\varrho",!0),defineSymbol(math,main,mathord,"ς","\\varsigma",!0),defineSymbol(math,main,mathord,"φ","\\varphi",!0),defineSymbol(math,main,bin,"∗","*",!0),defineSymbol(math,main,bin,"+","+"),defineSymbol(math,main,bin,"−","-",!0),defineSymbol(math,main,bin,"⋅","\\cdot",!0),defineSymbol(math,main,bin,"∘","\\circ",!0),defineSymbol(math,main,bin,"÷","\\div",!0),defineSymbol(math,main,bin,"±","\\pm",!0),defineSymbol(math,main,bin,"×","\\times",!0),defineSymbol(math,main,bin,"∩","\\cap",!0),defineSymbol(math,main,bin,"∪","\\cup",!0),defineSymbol(math,main,bin,"∖","\\setminus",!0),defineSymbol(math,main,bin,"∧","\\land"),defineSymbol(math,main,bin,"∨","\\lor"),defineSymbol(math,main,bin,"∧","\\wedge",!0),defineSymbol(math,main,bin,"∨","\\vee",!0),defineSymbol(math,main,textord,"√","\\surd"),defineSymbol(math,main,open,"⟨","\\langle",!0),defineSymbol(math,main,open,"∣","\\lvert"),defineSymbol(math,main,open,"∥","\\lVert"),defineSymbol(math,main,close,"?","?"),defineSymbol(math,main,close,"!","!"),defineSymbol(math,main,close,"⟩","\\rangle",!0),defineSymbol(math,main,close,"∣","\\rvert"),defineSymbol(math,main,close,"∥","\\rVert"),defineSymbol(math,main,rel,"=","="),defineSymbol(math,main,rel,":",":"),defineSymbol(math,main,rel,"≈","\\approx",!0),defineSymbol(math,main,rel,"≅","\\cong",!0),defineSymbol(math,main,rel,"≥","\\ge"),defineSymbol(math,main,rel,"≥","\\geq",!0),defineSymbol(math,main,rel,"←","\\gets"),defineSymbol(math,main,rel,">","\\gt",!0),defineSymbol(math,main,rel,"∈","\\in",!0),defineSymbol(math,main,rel,"","\\@not"),defineSymbol(math,main,rel,"⊂","\\subset",!0),defineSymbol(math,main,rel,"⊃","\\supset",!0),defineSymbol(math,main,rel,"⊆","\\subseteq",!0),defineSymbol(math,main,rel,"⊇","\\supseteq",!0),defineSymbol(math,ams,rel,"⊈","\\nsubseteq",!0),defineSymbol(math,ams,rel,"⊉","\\nsupseteq",!0),defineSymbol(math,main,rel,"⊨","\\models"),defineSymbol(math,main,rel,"←","\\leftarrow",!0),defineSymbol(math,main,rel,"≤","\\le"),defineSymbol(math,main,rel,"≤","\\leq",!0),defineSymbol(math,main,rel,"<","\\lt",!0),defineSymbol(math,main,rel,"→","\\rightarrow",!0),defineSymbol(math,main,rel,"→","\\to"),defineSymbol(math,ams,rel,"≱","\\ngeq",!0),defineSymbol(math,ams,rel,"≰","\\nleq",!0),defineSymbol(math,main,"spacing"," ","\\ "),defineSymbol(math,main,"spacing"," ","\\space"),defineSymbol(math,main,"spacing"," ","\\nobreakspace"),defineSymbol(text2,main,"spacing"," ","\\ "),defineSymbol(text2,main,"spacing"," "," "),defineSymbol(text2,main,"spacing"," ","\\space"),defineSymbol(text2,main,"spacing"," ","\\nobreakspace"),defineSymbol(math,main,"spacing",null,"\\nobreak"),defineSymbol(math,main,"spacing",null,"\\allowbreak"),defineSymbol(math,main,"punct",",",","),defineSymbol(math,main,"punct",";",";"),defineSymbol(math,ams,bin,"⊼","\\barwedge",!0),defineSymbol(math,ams,bin,"⊻","\\veebar",!0),defineSymbol(math,main,bin,"⊙","\\odot",!0),defineSymbol(math,main,bin,"⊕","\\oplus",!0),defineSymbol(math,main,bin,"⊗","\\otimes",!0),defineSymbol(math,main,textord,"∂","\\partial",!0),defineSymbol(math,main,bin,"⊘","\\oslash",!0),defineSymbol(math,ams,bin,"⊚","\\circledcirc",!0),defineSymbol(math,ams,bin,"⊡","\\boxdot",!0),defineSymbol(math,main,bin,"△","\\bigtriangleup"),defineSymbol(math,main,bin,"▽","\\bigtriangledown"),defineSymbol(math,main,bin,"†","\\dagger"),defineSymbol(math,main,bin,"⋄","\\diamond"),defineSymbol(math,main,bin,"⋆","\\star"),defineSymbol(math,main,bin,"◃","\\triangleleft"),defineSymbol(math,main,bin,"▹","\\triangleright"),defineSymbol(math,main,open,"{","\\{"),defineSymbol(text2,main,textord,"{","\\{"),defineSymbol(text2,main,textord,"{","\\textbraceleft"),defineSymbol(math,main,close,"}","\\}"),defineSymbol(text2,main,textord,"}","\\}"),defineSymbol(text2,main,textord,"}","\\textbraceright"),defineSymbol(math,main,open,"{","\\lbrace"),defineSymbol(math,main,close,"}","\\rbrace"),defineSymbol(math,main,open,"[","\\lbrack",!0),defineSymbol(text2,main,textord,"[","\\lbrack",!0),defineSymbol(math,main,close,"]","\\rbrack",!0),defineSymbol(text2,main,textord,"]","\\rbrack",!0),defineSymbol(math,main,open,"(","\\lparen",!0),defineSymbol(math,main,close,")","\\rparen",!0),defineSymbol(text2,main,textord,"<","\\textless",!0),defineSymbol(text2,main,textord,">","\\textgreater",!0),defineSymbol(math,main,open,"⌊","\\lfloor",!0),defineSymbol(math,main,close,"⌋","\\rfloor",!0),defineSymbol(math,main,open,"⌈","\\lceil",!0),defineSymbol(math,main,close,"⌉","\\rceil",!0),defineSymbol(math,main,textord,"\\","\\backslash"),defineSymbol(math,main,textord,"∣","|"),defineSymbol(math,main,textord,"∣","\\vert"),defineSymbol(text2,main,textord,"|","\\textbar",!0),defineSymbol(math,main,textord,"∥","\\|"),defineSymbol(math,main,textord,"∥","\\Vert"),defineSymbol(text2,main,textord,"∥","\\textbardbl"),defineSymbol(text2,main,textord,"~","\\textasciitilde"),defineSymbol(text2,main,textord,"\\","\\textbackslash"),defineSymbol(text2,main,textord,"^","\\textasciicircum"),defineSymbol(math,main,rel,"↑","\\uparrow",!0),defineSymbol(math,main,rel,"⇑","\\Uparrow",!0),defineSymbol(math,main,rel,"↓","\\downarrow",!0),defineSymbol(math,main,rel,"⇓","\\Downarrow",!0),defineSymbol(math,main,rel,"↕","\\updownarrow",!0),defineSymbol(math,main,rel,"⇕","\\Updownarrow",!0),defineSymbol(math,main,op,"∐","\\coprod"),defineSymbol(math,main,op,"⋁","\\bigvee"),defineSymbol(math,main,op,"⋀","\\bigwedge"),defineSymbol(math,main,op,"⨄","\\biguplus"),defineSymbol(math,main,op,"⋂","\\bigcap"),defineSymbol(math,main,op,"⋃","\\bigcup"),defineSymbol(math,main,op,"∫","\\int"),defineSymbol(math,main,op,"∫","\\intop"),defineSymbol(math,main,op,"∬","\\iint"),defineSymbol(math,main,op,"∭","\\iiint"),defineSymbol(math,main,op,"∏","\\prod"),defineSymbol(math,main,op,"∑","\\sum"),defineSymbol(math,main,op,"⨂","\\bigotimes"),defineSymbol(math,main,op,"⨁","\\bigoplus"),defineSymbol(math,main,op,"⨀","\\bigodot"),defineSymbol(math,main,op,"∮","\\oint"),defineSymbol(math,main,op,"∯","\\oiint"),defineSymbol(math,main,op,"∰","\\oiiint"),defineSymbol(math,main,op,"⨆","\\bigsqcup"),defineSymbol(math,main,op,"∫","\\smallint"),defineSymbol(text2,main,"inner","…","\\textellipsis"),defineSymbol(math,main,"inner","…","\\mathellipsis"),defineSymbol(text2,main,"inner","…","\\ldots",!0),defineSymbol(math,main,"inner","…","\\ldots",!0),defineSymbol(math,main,"inner","⋯","\\@cdots",!0),defineSymbol(math,main,"inner","⋱","\\ddots",!0),defineSymbol(math,main,textord,"⋮","\\varvdots"),defineSymbol(text2,main,textord,"⋮","\\varvdots"),defineSymbol(math,main,accent,"ˊ","\\acute"),defineSymbol(math,main,accent,"ˋ","\\grave"),defineSymbol(math,main,accent,"¨","\\ddot"),defineSymbol(math,main,accent,"~","\\tilde"),defineSymbol(math,main,accent,"ˉ","\\bar"),defineSymbol(math,main,accent,"˘","\\breve"),defineSymbol(math,main,accent,"ˇ","\\check"),defineSymbol(math,main,accent,"^","\\hat"),defineSymbol(math,main,accent,"⃗","\\vec"),defineSymbol(math,main,accent,"˙","\\dot"),defineSymbol(math,main,accent,"˚","\\mathring"),defineSymbol(math,main,mathord,"","\\@imath"),defineSymbol(math,main,mathord,"","\\@jmath"),defineSymbol(math,main,textord,"ı","ı"),defineSymbol(math,main,textord,"ȷ","ȷ"),defineSymbol(text2,main,textord,"ı","\\i",!0),defineSymbol(text2,main,textord,"ȷ","\\j",!0),defineSymbol(text2,main,textord,"ß","\\ss",!0),defineSymbol(text2,main,textord,"æ","\\ae",!0),defineSymbol(text2,main,textord,"œ","\\oe",!0),defineSymbol(text2,main,textord,"ø","\\o",!0),defineSymbol(text2,main,textord,"Æ","\\AE",!0),defineSymbol(text2,main,textord,"Œ","\\OE",!0),defineSymbol(text2,main,textord,"Ø","\\O",!0),defineSymbol(text2,main,accent,"ˊ","\\'"),defineSymbol(text2,main,accent,"ˋ","\\`"),defineSymbol(text2,main,accent,"ˆ","\\^"),defineSymbol(text2,main,accent,"˜","\\~"),defineSymbol(text2,main,accent,"ˉ","\\="),defineSymbol(text2,main,accent,"˘","\\u"),defineSymbol(text2,main,accent,"˙","\\."),defineSymbol(text2,main,accent,"¸","\\c"),defineSymbol(text2,main,accent,"˚","\\r"),defineSymbol(text2,main,accent,"ˇ","\\v"),defineSymbol(text2,main,accent,"¨",'\\"'),defineSymbol(text2,main,accent,"˝","\\H"),defineSymbol(text2,main,accent,"◯","\\textcircled"),ligatures={"--":!0,"---":!0,"``":!0,"''":!0},defineSymbol(text2,main,textord,"–","--",!0),defineSymbol(text2,main,textord,"–","\\textendash"),defineSymbol(text2,main,textord,"—","---",!0),defineSymbol(text2,main,textord,"—","\\textemdash"),defineSymbol(text2,main,textord,"‘","`",!0),defineSymbol(text2,main,textord,"‘","\\textquoteleft"),defineSymbol(text2,main,textord,"’","'",!0),defineSymbol(text2,main,textord,"’","\\textquoteright"),defineSymbol(text2,main,textord,"“","``",!0),defineSymbol(text2,main,textord,"“","\\textquotedblleft"),defineSymbol(text2,main,textord,"”","''",!0),defineSymbol(text2,main,textord,"”","\\textquotedblright"),defineSymbol(math,main,textord,"°","\\degree",!0),defineSymbol(text2,main,textord,"°","\\degree"),defineSymbol(text2,main,textord,"°","\\textdegree",!0),defineSymbol(math,main,textord,"£","\\pounds"),defineSymbol(math,main,textord,"£","\\mathsterling",!0),defineSymbol(text2,main,textord,"£","\\pounds"),defineSymbol(text2,main,textord,"£","\\textsterling",!0),defineSymbol(math,ams,textord,"✠","\\maltese"),defineSymbol(text2,ams,textord,"✠","\\maltese"),i2=0;i2<14;i2++)ch='0123456789/@."'.charAt(i2),defineSymbol(math,main,textord,ch,ch);for(_i=0;_i<25;_i++)_ch='0123456789!@*()-=+";:?/.,'.charAt(_i),defineSymbol(text2,main,textord,_ch,_ch);for(letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",_i2=0;_i2<52;_i2++)_ch2=letters.charAt(_i2),defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text2,main,textord,_ch2,_ch2);for(defineSymbol(math,ams,textord,"C","ℂ"),defineSymbol(text2,ams,textord,"C","ℂ"),defineSymbol(math,ams,textord,"H","ℍ"),defineSymbol(text2,ams,textord,"H","ℍ"),defineSymbol(math,ams,textord,"N","ℕ"),defineSymbol(text2,ams,textord,"N","ℕ"),defineSymbol(math,ams,textord,"P","ℙ"),defineSymbol(text2,ams,textord,"P","ℙ"),defineSymbol(math,ams,textord,"Q","ℚ"),defineSymbol(text2,ams,textord,"Q","ℚ"),defineSymbol(math,ams,textord,"R","ℝ"),defineSymbol(text2,ams,textord,"R","ℝ"),defineSymbol(math,ams,textord,"Z","ℤ"),defineSymbol(text2,ams,textord,"Z","ℤ"),defineSymbol(math,main,mathord,"h","ℎ"),defineSymbol(text2,main,mathord,"h","ℎ"),wideChar="",_i3=0;_i3<52;_i3++)_ch3=letters.charAt(_i3),wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text2,main,textord,_ch3,wideChar));for(wideChar=String.fromCharCode(55349,56668),defineSymbol(math,main,mathord,"k",wideChar),defineSymbol(text2,main,textord,"k",wideChar),_i4=0;_i4<10;_i4++)_ch4=_i4.toString(),wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text2,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text2,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text2,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text2,main,textord,_ch4,wideChar);for(_i5=0;_i5<3;_i5++)_ch5="ÐÞþ".charAt(_i5),defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text2,main,textord,_ch5,_ch5);wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=__name(function(wideChar2,mode){var codePoint=1024*(wideChar2.charCodeAt(0)-55296)+(wideChar2.charCodeAt(1)-56320)+65536,j3="math"===mode?0:1;if(119808<=codePoint&&codePoint<120484){var i2=Math.floor((codePoint-119808)/26);return[wideLatinLetterData[i2][2],wideLatinLetterData[i2][j3]]}if(120782<=codePoint&&codePoint<=120831){var _i=Math.floor((codePoint-120782)/10);return[wideNumeralData[_i][2],wideNumeralData[_i][j3]]}if(120485===codePoint||120486===codePoint)return[wideLatinLetterData[0][2],wideLatinLetterData[0][j3]];if(120486<codePoint&&codePoint<120782)return["",""];throw new ParseError("Unsupported character: "+wideChar2)},"wideCharacterFont"),lookupSymbol=__name(function(value2,fontName,mode){return symbols[mode][value2]&&symbols[mode][value2].replace&&(value2=symbols[mode][value2].replace),{value:value2,metrics:getCharacterMetrics(value2,fontName,mode)}},"lookupSymbol"),makeSymbol=__name(function(value2,fontName,mode,options2,classes3){var symbolNode,lookup2=lookupSymbol(value2,fontName,mode),metrics=lookup2.metrics;if(value2=lookup2.value,metrics){var italic=metrics.italic;("text"===mode||options2&&"mathit"===options2.font)&&(italic=0),symbolNode=new SymbolNode(value2,metrics.height,metrics.depth,italic,metrics.skew,metrics.width,classes3)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+value2+"' in style '"+fontName+"' and mode '"+mode+"'"),symbolNode=new SymbolNode(value2,0,0,0,0,0,classes3);if(options2){symbolNode.maxFontSize=options2.sizeMultiplier,options2.style.isTight()&&symbolNode.classes.push("mtight");var color2=options2.getColor();color2&&(symbolNode.style.color=color2)}return symbolNode},"makeSymbol"),mathsym=__name(function(value2,mode,options2,classes3){return void 0===classes3&&(classes3=[]),"boldsymbol"===options2.font&&lookupSymbol(value2,"Main-Bold",mode).metrics?makeSymbol(value2,"Main-Bold",mode,options2,classes3.concat(["mathbf"])):"\\"===value2||"main"===symbols[mode][value2].font?makeSymbol(value2,"Main-Regular",mode,options2,classes3):makeSymbol(value2,"AMS-Regular",mode,options2,classes3.concat(["amsrm"]))},"mathsym"),boldsymbol=__name(function(value2,mode,options2,classes3,type3){return"textord"!==type3&&lookupSymbol(value2,"Math-BoldItalic",mode).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},"boldsymbol"),makeOrd=__name(function(group2,options2,type3){var mode=group2.mode,text4=group2.text,classes3=["mord"],isFont="math"===mode||"text"===mode&&options2.font,fontOrFamily=isFont?options2.font:options2.fontFamily,wideFontName="",wideFontClass="";if(55349===text4.charCodeAt(0)&&([wideFontName,wideFontClass]=wideCharacterFont(text4,mode)),wideFontName.length>0)return makeSymbol(text4,wideFontName,mode,options2,classes3.concat(wideFontClass));if(fontOrFamily){var fontName,fontClasses;if("boldsymbol"===fontOrFamily){var fontData=boldsymbol(text4,mode,options2,classes3,type3);fontName=fontData.fontName,fontClasses=[fontData.fontClass]}else isFont?(fontName=fontMap[fontOrFamily].fontName,fontClasses=[fontOrFamily]):(fontName=retrieveTextFontName(fontOrFamily,options2.fontWeight,options2.fontShape),fontClasses=[fontOrFamily,options2.fontWeight,options2.fontShape]);if(lookupSymbol(text4,fontName,mode).metrics)return makeSymbol(text4,fontName,mode,options2,classes3.concat(fontClasses));if(ligatures.hasOwnProperty(text4)&&"Typewriter"===fontName.slice(0,10)){for(var parts=[],i2=0;i2<text4.length;i2++)parts.push(makeSymbol(text4[i2],fontName,mode,options2,classes3.concat(fontClasses)));return makeFragment(parts)}}if("mathord"===type3)return makeSymbol(text4,"Math-Italic",mode,options2,classes3.concat(["mathnormal"]));if("textord"===type3){var font=symbols[mode][text4]&&symbols[mode][text4].font;if("ams"===font){var _fontName=retrieveTextFontName("amsrm",options2.fontWeight,options2.fontShape);return makeSymbol(text4,_fontName,mode,options2,classes3.concat("amsrm",options2.fontWeight,options2.fontShape))}if("main"!==font&&font){var _fontName3=retrieveTextFontName(font,options2.fontWeight,options2.fontShape);return makeSymbol(text4,_fontName3,mode,options2,classes3.concat(_fontName3,options2.fontWeight,options2.fontShape))}var _fontName2=retrieveTextFontName("textrm",options2.fontWeight,options2.fontShape);return makeSymbol(text4,_fontName2,mode,options2,classes3.concat(options2.fontWeight,options2.fontShape))}throw new Error("unexpected type: "+type3+" in makeOrd")},"makeOrd"),canCombine=__name((prev2,next3)=>{if(createClass(prev2.classes)!==createClass(next3.classes)||prev2.skew!==next3.skew||prev2.maxFontSize!==next3.maxFontSize)return!1;if(1===prev2.classes.length){var cls=prev2.classes[0];if("mbin"===cls||"mord"===cls)return!1}for(var style3 in prev2.style)if(prev2.style.hasOwnProperty(style3)&&prev2.style[style3]!==next3.style[style3])return!1;for(var _style in next3.style)if(next3.style.hasOwnProperty(_style)&&prev2.style[_style]!==next3.style[_style])return!1;return!0},"canCombine"),tryCombineChars=__name(chars=>{for(var i2=0;i2<chars.length-1;i2++){var prev2=chars[i2],next3=chars[i2+1];prev2 instanceof SymbolNode&&next3 instanceof SymbolNode&&canCombine(prev2,next3)&&(prev2.text+=next3.text,prev2.height=Math.max(prev2.height,next3.height),prev2.depth=Math.max(prev2.depth,next3.depth),prev2.italic=next3.italic,chars.splice(i2+1,1),i2--)}return chars},"tryCombineChars"),sizeElementFromChildren=__name(function(elem){for(var height2=0,depth=0,maxFontSize=0,i2=0;i2<elem.children.length;i2++){var child=elem.children[i2];child.height>height2&&(height2=child.height),child.depth>depth&&(depth=child.depth),child.maxFontSize>maxFontSize&&(maxFontSize=child.maxFontSize)}elem.height=height2,elem.depth=depth,elem.maxFontSize=maxFontSize},"sizeElementFromChildren"),makeSpan$2=__name(function(classes3,children2,options2,style3){var span=new Span(classes3,children2,options2,style3);return sizeElementFromChildren(span),span},"makeSpan"),makeSvgSpan=__name((classes3,children2,options2,style3)=>new Span(classes3,children2,options2,style3),"makeSvgSpan"),makeLineSpan=__name(function(className,options2,thickness){var line2=makeSpan$2([className],[],options2);return line2.height=Math.max(thickness||options2.fontMetrics().defaultRuleThickness,options2.minRuleThickness),line2.style.borderBottomWidth=makeEm(line2.height),line2.maxFontSize=1,line2},"makeLineSpan"),makeAnchor=__name(function(href,classes3,children2,options2){var anchor2=new Anchor(href,classes3,children2,options2);return sizeElementFromChildren(anchor2),anchor2},"makeAnchor"),makeFragment=__name(function(children2){var fragment=new DocumentFragment(children2);return sizeElementFromChildren(fragment),fragment},"makeFragment"),wrapFragment=__name(function(group2,options2){return group2 instanceof DocumentFragment?makeSpan$2([],[group2],options2):group2},"wrapFragment"),getVListChildrenAndDepth=__name(function(params){if("individualShift"===params.positionType){for(var oldChildren=params.children,children2=[oldChildren[0]],_depth=-oldChildren[0].shift-oldChildren[0].elem.depth,currPos=_depth,i2=1;i2<oldChildren.length;i2++){var diff2=-oldChildren[i2].shift-currPos-oldChildren[i2].elem.depth,size4=diff2-(oldChildren[i2-1].elem.height+oldChildren[i2-1].elem.depth);currPos+=diff2,children2.push({type:"kern",size:size4}),children2.push(oldChildren[i2])}return{children:children2,depth:_depth}}var depth;if("top"===params.positionType){for(var bottom2=params.positionData,_i=0;_i<params.children.length;_i++){var child=params.children[_i];bottom2-="kern"===child.type?child.size:child.elem.height+child.elem.depth}depth=bottom2}else if("bottom"===params.positionType)depth=-params.positionData;else{var firstChild=params.children[0];if("elem"!==firstChild.type)throw new Error('First child must have type "elem".');if("shift"===params.positionType)depth=-firstChild.elem.depth-params.positionData;else{if("firstBaseline"!==params.positionType)throw new Error("Invalid positionType "+params.positionType+".");depth=-firstChild.elem.depth}}return{children:params.children,depth:depth}},"getVListChildrenAndDepth"),makeVList=__name(function(params,options2){for(var{children:children2,depth:depth}=getVListChildrenAndDepth(params),pstrutSize=0,i2=0;i2<children2.length;i2++){var child=children2[i2];if("elem"===child.type){var elem=child.elem;pstrutSize=Math.max(pstrutSize,elem.maxFontSize,elem.height)}}pstrutSize+=2;var pstrut=makeSpan$2(["pstrut"],[]);pstrut.style.height=makeEm(pstrutSize);for(var realChildren=[],minPos=depth,maxPos2=depth,currPos=depth,_i2=0;_i2<children2.length;_i2++){var _child=children2[_i2];if("kern"===_child.type)currPos+=_child.size;else{var _elem=_child.elem,classes3=_child.wrapperClasses||[],style3=_child.wrapperStyle||{},childWrap=makeSpan$2(classes3,[pstrut,_elem],void 0,style3);childWrap.style.top=makeEm(-pstrutSize-currPos-_elem.depth),_child.marginLeft&&(childWrap.style.marginLeft=_child.marginLeft),_child.marginRight&&(childWrap.style.marginRight=_child.marginRight),realChildren.push(childWrap),currPos+=_elem.height+_elem.depth}minPos=Math.min(minPos,currPos),maxPos2=Math.max(maxPos2,currPos)}var rows,vlist=makeSpan$2(["vlist"],realChildren);if(vlist.style.height=makeEm(maxPos2),minPos<0){var emptySpan=makeSpan$2([],[]),depthStrut=makeSpan$2(["vlist"],[emptySpan]);depthStrut.style.height=makeEm(-minPos);var topStrut=makeSpan$2(["vlist-s"],[new SymbolNode("​")]);rows=[makeSpan$2(["vlist-r"],[vlist,topStrut]),makeSpan$2(["vlist-r"],[depthStrut])]}else rows=[makeSpan$2(["vlist-r"],[vlist])];var vtable=makeSpan$2(["vlist-t"],rows);return 2===rows.length&&vtable.classes.push("vlist-t2"),vtable.height=maxPos2,vtable.depth=-minPos,vtable},"makeVList"),makeGlue=__name((measurement,options2)=>{var rule=makeSpan$2(["mspace"],[],options2),size4=calculateSize2(measurement,options2);return rule.style.marginRight=makeEm(size4),rule},"makeGlue"),retrieveTextFontName=__name(function(fontFamily,fontWeight,fontShape){var baseFontName="";switch(fontFamily){case"amsrm":baseFontName="AMS";break;case"textrm":baseFontName="Main";break;case"textsf":baseFontName="SansSerif";break;case"texttt":baseFontName="Typewriter";break;default:baseFontName=fontFamily}return baseFontName+"-"+("textbf"===fontWeight&&"textit"===fontShape?"BoldItalic":"textbf"===fontWeight?"Bold":"textit"===fontWeight?"Italic":"Regular")},"retrieveTextFontName"),fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=__name(function(value2,options2){var[pathName,width3,height2]=svgData[value2],path4=new PathNode(pathName),svgNode2=new SvgNode([path4],{width:makeEm(width3),height:makeEm(height2),style:"width:"+makeEm(width3),viewBox:"0 0 "+1e3*width3+" "+1e3*height2,preserveAspectRatio:"xMinYMin"}),span=makeSvgSpan(["overlay"],[svgNode2],options2);return span.height=height2,span.style.height=makeEm(height2),span.style.width=makeEm(width3),span},"staticSvg"),buildCommon={fontMap:fontMap,makeSymbol:makeSymbol,mathsym:mathsym,makeSpan:makeSpan$2,makeSvgSpan:makeSvgSpan,makeLineSpan:makeLineSpan,makeAnchor:makeAnchor,makeFragment:makeFragment,wrapFragment:wrapFragment,makeVList:makeVList,makeOrd:makeOrd,makeGlue:makeGlue,staticSvg:staticSvg,svgData:svgData,tryCombineChars:tryCombineChars},spacings={mord:{mop:thinspace={number:3,unit:"mu"},mbin:mediumspace={number:4,unit:"mu"},mrel:thickspace={number:5,unit:"mu"},minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={},__name(defineFunction,"defineFunction"),__name(defineFunctionBuilders,"defineFunctionBuilders"),normalizeArgument=__name(function(arg){return"ordgroup"===arg.type&&1===arg.body.length?arg.body[0]:arg},"normalizeArgument"),ordargument=__name(function(arg){return"ordgroup"===arg.type?arg.body:[arg]},"ordargument"),makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=__name(function(expression,options2,isRealGroup,surrounding){void 0===surrounding&&(surrounding=[null,null]);for(var groups=[],i2=0;i2<expression.length;i2++){var output2=buildGroup$1(expression[i2],options2);if(output2 instanceof DocumentFragment){var children2=output2.children;groups.push(...children2)}else groups.push(output2)}if(buildCommon.tryCombineChars(groups),!isRealGroup)return groups;var glueOptions=options2;if(1===expression.length){var node2=expression[0];"sizing"===node2.type?glueOptions=options2.havingSize(node2.size):"styling"===node2.type&&(glueOptions=options2.havingStyle(styleMap$1[node2.style]))}var dummyPrev=makeSpan$1([surrounding[0]||"leftmost"],[],options2),dummyNext=makeSpan$1([surrounding[1]||"rightmost"],[],options2),isRoot="root"===isRealGroup;return traverseNonSpaceNodes(groups,(node3,prev2)=>{var prevType=prev2.classes[0],type3=node3.classes[0];"mbin"===prevType&&utils.contains(binRightCanceller,type3)?prev2.classes[0]="mord":"mbin"===type3&&utils.contains(binLeftCanceller,prevType)&&(node3.classes[0]="mord")},{node:dummyPrev},dummyNext,isRoot),traverseNonSpaceNodes(groups,(node3,prev2)=>{var prevType=getTypeOfDomTree(prev2),type3=getTypeOfDomTree(node3),space=prevType&&type3?node3.hasClass("mtight")?tightSpacings[prevType][type3]:spacings[prevType][type3]:null;if(space)return buildCommon.makeGlue(space,glueOptions)},{node:dummyPrev},dummyNext,isRoot),groups},"buildExpression"),traverseNonSpaceNodes=__name(function traverseNonSpaceNodes2(nodes5,callback,prev2,next3,isRoot){next3&&nodes5.push(next3);for(var i2=0;i2<nodes5.length;i2++){var node2=nodes5[i2],partialGroup=checkPartialGroup(node2);if(partialGroup)traverseNonSpaceNodes2(partialGroup.children,callback,prev2,null,isRoot);else{var nonspace=!node2.hasClass("mspace");if(nonspace){var result=callback(node2,prev2.node);result&&(prev2.insertAfter?prev2.insertAfter(result):(nodes5.unshift(result),i2++))}nonspace?prev2.node=node2:isRoot&&node2.hasClass("newline")&&(prev2.node=makeSpan$1(["leftmost"])),prev2.insertAfter=(index=>n2=>{nodes5.splice(index+1,0,n2),i2++})(i2)}}next3&&nodes5.pop()},"traverseNonSpaceNodes"),checkPartialGroup=__name(function(node2){return node2 instanceof DocumentFragment||node2 instanceof Anchor||node2 instanceof Span&&node2.hasClass("enclosing")?node2:null},"checkPartialGroup"),getOutermostNode=__name(function getOutermostNode2(node2,side){var partialGroup=checkPartialGroup(node2);if(partialGroup){var children2=partialGroup.children;if(children2.length){if("right"===side)return getOutermostNode2(children2[children2.length-1],"right");if("left"===side)return getOutermostNode2(children2[0],"left")}}return node2},"getOutermostNode"),getTypeOfDomTree=__name(function(node2,side){return node2?(side&&(node2=getOutermostNode(node2,side)),DomEnum[node2.classes[0]]||null):null},"getTypeOfDomTree"),makeNullDelimiter=__name(function(options2,classes3){var moreClasses=["nulldelimiter"].concat(options2.baseSizingClasses());return makeSpan$1(classes3.concat(moreClasses))},"makeNullDelimiter"),buildGroup$1=__name(function(group2,options2,baseOptions){if(!group2)return makeSpan$1();if(_htmlGroupBuilders[group2.type]){var groupNode=_htmlGroupBuilders[group2.type](group2,options2);if(baseOptions&&options2.size!==baseOptions.size){groupNode=makeSpan$1(options2.sizingClasses(baseOptions),[groupNode],options2);var multiplier=options2.sizeMultiplier/baseOptions.sizeMultiplier;groupNode.height*=multiplier,groupNode.depth*=multiplier}return groupNode}throw new ParseError("Got group of unknown type: '"+group2.type+"'")},"buildGroup"),__name(buildHTMLUnbreakable,"buildHTMLUnbreakable"),__name(buildHTML,"buildHTML"),__name(newDocumentFragment,"newDocumentFragment"),MathNode=class{static{__name(this,"MathNode")}constructor(type3,children2,classes3){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=type3,this.attributes={},this.children=children2||[],this.classes=classes3||[]}setAttribute(name,value2){this.attributes[name]=value2}getAttribute(name){return this.attributes[name]}toNode(){var node2=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var attr in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,attr)&&node2.setAttribute(attr,this.attributes[attr]);this.classes.length>0&&(node2.className=createClass(this.classes));for(var i2=0;i2<this.children.length;i2++)if(this.children[i2]instanceof TextNode&&this.children[i2+1]instanceof TextNode){for(var text4=this.children[i2].toText()+this.children[++i2].toText();this.children[i2+1]instanceof TextNode;)text4+=this.children[++i2].toText();node2.appendChild(new TextNode(text4).toNode())}else node2.appendChild(this.children[i2].toNode());return node2}toMarkup(){var markup="<"+this.type;for(var attr in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,attr)&&(markup+=" "+attr+'="',markup+=utils.escape(this.attributes[attr]),markup+='"');this.classes.length>0&&(markup+=' class ="'+utils.escape(createClass(this.classes))+'"'),markup+=">";for(var i2=0;i2<this.children.length;i2++)markup+=this.children[i2].toMarkup();return markup+="</"+this.type+">"}toText(){return this.children.map(child=>child.toText()).join("")}},TextNode=class{static{__name(this,"TextNode")}constructor(text4){this.text=void 0,this.text=text4}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}},SpaceNode=class{static{__name(this,"SpaceNode")}constructor(width3){this.width=void 0,this.character=void 0,this.width=width3,this.character=width3>=.05555&&width3<=.05556?" ":width3>=.1666&&width3<=.1667?" ":width3>=.2222&&width3<=.2223?" ":width3>=.2777&&width3<=.2778?"  ":width3>=-.05556&&width3<=-.05555?" ⁣":width3>=-.1667&&width3<=-.1666?" ⁣":width3>=-.2223&&width3<=-.2222?" ⁣":width3>=-.2778&&width3<=-.2777?" ⁣":null}toNode(){if(this.character)return document.createTextNode(this.character);var node2=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return node2.setAttribute("width",makeEm(this.width)),node2}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}},mathMLTree={MathNode:MathNode,TextNode:TextNode,SpaceNode:SpaceNode,newDocumentFragment:newDocumentFragment},makeText=__name(function(text4,mode,options2){return!symbols[mode][text4]||!symbols[mode][text4].replace||55349===text4.charCodeAt(0)||ligatures.hasOwnProperty(text4)&&options2&&(options2.fontFamily&&"tt"===options2.fontFamily.slice(4,6)||options2.font&&"tt"===options2.font.slice(4,6))||(text4=symbols[mode][text4].replace),new mathMLTree.TextNode(text4)},"makeText"),makeRow=__name(function(body){return 1===body.length?body[0]:new mathMLTree.MathNode("mrow",body)},"makeRow"),getVariant=__name(function(group2,options2){if("texttt"===options2.fontFamily)return"monospace";if("textsf"===options2.fontFamily)return"textit"===options2.fontShape&&"textbf"===options2.fontWeight?"sans-serif-bold-italic":"textit"===options2.fontShape?"sans-serif-italic":"textbf"===options2.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===options2.fontShape&&"textbf"===options2.fontWeight)return"bold-italic";if("textit"===options2.fontShape)return"italic";if("textbf"===options2.fontWeight)return"bold";var font=options2.font;if(!font||"mathnormal"===font)return null;var mode=group2.mode;if("mathit"===font)return"italic";if("boldsymbol"===font)return"textord"===group2.type?"bold":"bold-italic";if("mathbf"===font)return"bold";if("mathbb"===font)return"double-struck";if("mathsfit"===font)return"sans-serif-italic";if("mathfrak"===font)return"fraktur";if("mathscr"===font||"mathcal"===font)return"script";if("mathsf"===font)return"sans-serif";if("mathtt"===font)return"monospace";var text4=group2.text;return utils.contains(["\\imath","\\jmath"],text4)?null:(symbols[mode][text4]&&symbols[mode][text4].replace&&(text4=symbols[mode][text4].replace),getCharacterMetrics(text4,buildCommon.fontMap[font].fontName,mode)?buildCommon.fontMap[font].variant:null)},"getVariant"),__name(isNumberPunctuation,"isNumberPunctuation"),buildExpression2=__name(function(expression,options2,isOrdgroup){if(1===expression.length){var group2=buildGroup2(expression[0],options2);return isOrdgroup&&group2 instanceof MathNode&&"mo"===group2.type&&(group2.setAttribute("lspace","0em"),group2.setAttribute("rspace","0em")),[group2]}for(var lastGroup,groups=[],i2=0;i2<expression.length;i2++){var _group=buildGroup2(expression[i2],options2);if(_group instanceof MathNode&&lastGroup instanceof MathNode){if("mtext"===_group.type&&"mtext"===lastGroup.type&&_group.getAttribute("mathvariant")===lastGroup.getAttribute("mathvariant")){lastGroup.children.push(..._group.children);continue}if("mn"===_group.type&&"mn"===lastGroup.type){lastGroup.children.push(..._group.children);continue}if(isNumberPunctuation(_group)&&"mn"===lastGroup.type){lastGroup.children.push(..._group.children);continue}if("mn"===_group.type&&isNumberPunctuation(lastGroup))_group.children=[...lastGroup.children,..._group.children],groups.pop();else if(("msup"===_group.type||"msub"===_group.type)&&_group.children.length>=1&&("mn"===lastGroup.type||isNumberPunctuation(lastGroup))){var base=_group.children[0];base instanceof MathNode&&"mn"===base.type&&(base.children=[...lastGroup.children,...base.children],groups.pop())}else if("mi"===lastGroup.type&&1===lastGroup.children.length){var lastChild=lastGroup.children[0];if(lastChild instanceof TextNode&&"̸"===lastChild.text&&("mo"===_group.type||"mi"===_group.type||"mn"===_group.type)){var child=_group.children[0];child instanceof TextNode&&child.text.length>0&&(child.text=child.text.slice(0,1)+"̸"+child.text.slice(1),groups.pop())}}}groups.push(_group),lastGroup=_group}return groups},"buildExpression"),buildExpressionRow=__name(function(expression,options2,isOrdgroup){return makeRow(buildExpression2(expression,options2,isOrdgroup))},"buildExpressionRow"),buildGroup2=__name(function(group2,options2){if(!group2)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[group2.type])return _mathmlGroupBuilders[group2.type](group2,options2);throw new ParseError("Got group of unknown type: '"+group2.type+"'")},"buildGroup"),__name(buildMathML,"buildMathML"),optionsFromSettings=__name(function(settings){return new Options({style:settings.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:settings.maxSize,minRuleThickness:settings.minRuleThickness})},"optionsFromSettings"),displayWrap=__name(function(node2,settings){if(settings.displayMode){var classes3=["katex-display"];settings.leqno&&classes3.push("leqno"),settings.fleqn&&classes3.push("fleqn"),node2=buildCommon.makeSpan(classes3,[node2])}return node2},"displayWrap"),buildTree=__name(function(tree,expression,settings){var katexNode,options2=optionsFromSettings(settings);if("mathml"===settings.output)return buildMathML(tree,expression,options2,settings.displayMode,!0);if("html"===settings.output){var htmlNode=buildHTML(tree,options2);katexNode=buildCommon.makeSpan(["katex"],[htmlNode])}else{var mathMLNode=buildMathML(tree,expression,options2,settings.displayMode,!1),_htmlNode=buildHTML(tree,options2);katexNode=buildCommon.makeSpan(["katex"],[mathMLNode,_htmlNode])}return displayWrap(katexNode,settings)},"buildTree"),buildHTMLTree=__name(function(tree,expression,settings){var htmlNode=buildHTML(tree,optionsFromSettings(settings)),katexNode=buildCommon.makeSpan(["katex"],[htmlNode]);return displayWrap(katexNode,settings)},"buildHTMLTree"),stretchyCodePoint={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},mathMLnode=__name(function(label){var node2=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[label.replace(/^\\/,"")])]);return node2.setAttribute("stretchy","true"),node2},"mathMLnode"),katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=__name(function(arg){return"ordgroup"===arg.type?arg.body.length:1},"groupLength"),svgSpan=__name(function(group2,options2){function buildSvgSpan_(){var viewBoxWidth=4e5,label=group2.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],label)){var viewBoxHeight,pathName,_height,numChars=groupLength(group2.base);if(numChars>5)"widehat"===label||"widecheck"===label?(viewBoxHeight=420,viewBoxWidth=2364,_height=.42,pathName=label+"4"):(viewBoxHeight=312,viewBoxWidth=2340,_height=.34,pathName="tilde4");else{var imgIndex=[1,1,2,2,3,3][numChars];"widehat"===label||"widecheck"===label?(viewBoxWidth=[0,1062,2364,2364,2364][imgIndex],viewBoxHeight=[0,239,300,360,420][imgIndex],_height=[0,.24,.3,.3,.36,.42][imgIndex],pathName=label+imgIndex):(viewBoxWidth=[0,600,1033,2339,2340][imgIndex],viewBoxHeight=[0,260,286,306,312][imgIndex],_height=[0,.26,.286,.3,.306,.34][imgIndex],pathName="tilde"+imgIndex)}var path4=new PathNode(pathName),svgNode2=new SvgNode([path4],{width:"100%",height:makeEm(_height),viewBox:"0 0 "+viewBoxWidth+" "+viewBoxHeight,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[svgNode2],options2),minWidth:0,height:_height}}var widthClasses,aligns,spans=[],data5=katexImagesData[label],[paths,_minWidth,_viewBoxHeight]=data5,_height2=_viewBoxHeight/1e3,numSvgChildren=paths.length;if(1===numSvgChildren)widthClasses=["hide-tail"],aligns=[data5[3]];else if(2===numSvgChildren)widthClasses=["halfarrow-left","halfarrow-right"],aligns=["xMinYMin","xMaxYMin"];else{if(3!==numSvgChildren)throw new Error("Correct katexImagesData or update code here to support\n                    "+numSvgChildren+" children.");widthClasses=["brace-left","brace-center","brace-right"],aligns=["xMinYMin","xMidYMin","xMaxYMin"]}for(var i2=0;i2<numSvgChildren;i2++){var _path=new PathNode(paths[i2]),_svgNode=new SvgNode([_path],{width:"400em",height:makeEm(_height2),viewBox:"0 0 "+viewBoxWidth+" "+_viewBoxHeight,preserveAspectRatio:aligns[i2]+" slice"}),_span=buildCommon.makeSvgSpan([widthClasses[i2]],[_svgNode],options2);if(1===numSvgChildren)return{span:_span,minWidth:_minWidth,height:_height2};_span.style.height=makeEm(_height2),spans.push(_span)}return{span:buildCommon.makeSpan(["stretchy"],spans,options2),minWidth:_minWidth,height:_height2}}__name(buildSvgSpan_,"buildSvgSpan_");var{span:span,minWidth:minWidth,height:height2}=buildSvgSpan_();return span.height=height2,span.style.height=makeEm(height2),minWidth>0&&(span.style.minWidth=makeEm(minWidth)),span},"svgSpan"),stretchy={encloseSpan:__name(function(inner2,label,topPad,bottomPad,options2){var img,totalHeight=inner2.height+inner2.depth+topPad+bottomPad;if(/fbox|color|angl/.test(label)){if(img=buildCommon.makeSpan(["stretchy",label],[],options2),"fbox"===label){var color2=options2.color&&options2.getColor();color2&&(img.style.borderColor=color2)}}else{var lines=[];/^[bx]cancel$/.test(label)&&lines.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(label)&&lines.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var svgNode2=new SvgNode(lines,{width:"100%",height:makeEm(totalHeight)});img=buildCommon.makeSvgSpan([],[svgNode2],options2)}return img.height=totalHeight,img.style.height=makeEm(totalHeight),img},"encloseSpan"),mathMLnode:mathMLnode,svgSpan:svgSpan},__name(assertNodeType,"assertNodeType"),__name(assertSymbolNodeType,"assertSymbolNodeType"),__name(checkSymbolNodeType,"checkSymbolNodeType"),htmlBuilder$a=__name((grp,options2)=>{var base,group2,supSubGroup;grp&&"supsub"===grp.type?(base=(group2=assertNodeType(grp.base,"accent")).base,grp.base=base,supSubGroup=assertSpan(buildGroup$1(grp,options2)),grp.base=group2):base=(group2=assertNodeType(grp,"accent")).base;var body=buildGroup$1(base,options2.havingCrampedStyle()),skew=0;if(group2.isShifty&&utils.isCharacterBox(base)){var baseChar=utils.getBaseElem(base);skew=assertSymbolDomNode(buildGroup$1(baseChar,options2.havingCrampedStyle())).skew}var accentBody,accentBelow="\\c"===group2.label,clearance=accentBelow?body.height+body.depth:Math.min(body.height,options2.fontMetrics().xHeight);if(group2.isStretchy)accentBody=stretchy.svgSpan(group2,options2),accentBody=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:body},{type:"elem",elem:accentBody,wrapperClasses:["svg-align"],wrapperStyle:skew>0?{width:"calc(100% - "+makeEm(2*skew)+")",marginLeft:makeEm(2*skew)}:void 0}]},options2);else{var accent2,width3;"\\vec"===group2.label?(accent2=buildCommon.staticSvg("vec",options2),width3=buildCommon.svgData.vec[1]):((accent2=assertSymbolDomNode(accent2=buildCommon.makeOrd({mode:group2.mode,text:group2.label},options2,"textord"))).italic=0,width3=accent2.width,accentBelow&&(clearance+=accent2.depth)),accentBody=buildCommon.makeSpan(["accent-body"],[accent2]);var accentFull="\\textcircled"===group2.label;accentFull&&(accentBody.classes.push("accent-full"),clearance=body.height);var left3=skew;accentFull||(left3-=width3/2),accentBody.style.left=makeEm(left3),"\\textcircled"===group2.label&&(accentBody.style.top=".2em"),accentBody=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:body},{type:"kern",size:-clearance},{type:"elem",elem:accentBody}]},options2)}var accentWrap=buildCommon.makeSpan(["mord","accent"],[accentBody],options2);return supSubGroup?(supSubGroup.children[0]=accentWrap,supSubGroup.height=Math.max(accentWrap.height,supSubGroup.height),supSubGroup.classes[0]="mord",supSubGroup):accentWrap},"htmlBuilder$a"),mathmlBuilder$9=__name((group2,options2)=>{var accentNode=group2.isStretchy?stretchy.mathMLnode(group2.label):new mathMLTree.MathNode("mo",[makeText(group2.label,group2.mode)]),node2=new mathMLTree.MathNode("mover",[buildGroup2(group2.base,options2),accentNode]);return node2.setAttribute("accent","true"),node2},"mathmlBuilder$9"),NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(accent2=>"\\"+accent2).join("|")),defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:__name((context,args)=>{var base=normalizeArgument(args[0]),isStretchy=!NON_STRETCHY_ACCENT_REGEX.test(context.funcName),isShifty=!isStretchy||"\\widehat"===context.funcName||"\\widetilde"===context.funcName||"\\widecheck"===context.funcName;return{type:"accent",mode:context.parser.mode,label:context.funcName,isStretchy:isStretchy,isShifty:isShifty,base:base}},"handler"),htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9}),defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:__name((context,args)=>{var base=args[0],mode=context.parser.mode;return"math"===mode&&(context.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+context.funcName+" works only in text mode"),mode="text"),{type:"accent",mode:mode,label:context.funcName,isStretchy:!1,isShifty:!0,base:base}},"handler"),htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9}),defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:__name((_ref,args)=>{var{parser:parser24,funcName:funcName}=_ref,base=args[0];return{type:"accentUnder",mode:parser24.mode,label:funcName,base:base}},"handler"),htmlBuilder:__name((group2,options2)=>{var innerGroup=buildGroup$1(group2.base,options2),accentBody=stretchy.svgSpan(group2,options2),kern="\\utilde"===group2.label?.12:0,vlist=buildCommon.makeVList({positionType:"top",positionData:innerGroup.height,children:[{type:"elem",elem:accentBody,wrapperClasses:["svg-align"]},{type:"kern",size:kern},{type:"elem",elem:innerGroup}]},options2);return buildCommon.makeSpan(["mord","accentunder"],[vlist],options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var accentNode=stretchy.mathMLnode(group2.label),node2=new mathMLTree.MathNode("munder",[buildGroup2(group2.base,options2),accentNode]);return node2.setAttribute("accentunder","true"),node2},"mathmlBuilder")}),paddedNode=__name(group2=>{var node2=new mathMLTree.MathNode("mpadded",group2?[group2]:[]);return node2.setAttribute("width","+0.6em"),node2.setAttribute("lspace","0.3em"),node2},"paddedNode"),defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(_ref,args,optArgs){var{parser:parser24,funcName:funcName}=_ref;return{type:"xArrow",mode:parser24.mode,label:funcName,body:args[0],below:optArgs[0]}},htmlBuilder(group2,options2){var lowerGroup,style3=options2.style,newOptions=options2.havingStyle(style3.sup()),upperGroup=buildCommon.wrapFragment(buildGroup$1(group2.body,newOptions,options2),options2),arrowPrefix="\\x"===group2.label.slice(0,2)?"x":"cd";upperGroup.classes.push(arrowPrefix+"-arrow-pad"),group2.below&&(newOptions=options2.havingStyle(style3.sub()),(lowerGroup=buildCommon.wrapFragment(buildGroup$1(group2.below,newOptions,options2),options2)).classes.push(arrowPrefix+"-arrow-pad"));var vlist,arrowBody=stretchy.svgSpan(group2,options2),arrowShift=-options2.fontMetrics().axisHeight+.5*arrowBody.height,upperShift=-options2.fontMetrics().axisHeight-.5*arrowBody.height-.111;if((upperGroup.depth>.25||"\\xleftequilibrium"===group2.label)&&(upperShift-=upperGroup.depth),lowerGroup){var lowerShift=-options2.fontMetrics().axisHeight+lowerGroup.height+.5*arrowBody.height+.111;vlist=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:upperGroup,shift:upperShift},{type:"elem",elem:arrowBody,shift:arrowShift},{type:"elem",elem:lowerGroup,shift:lowerShift}]},options2)}else vlist=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:upperGroup,shift:upperShift},{type:"elem",elem:arrowBody,shift:arrowShift}]},options2);return vlist.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[vlist],options2)},mathmlBuilder(group2,options2){var node2,arrowNode=stretchy.mathMLnode(group2.label);if(arrowNode.setAttribute("minsize","x"===group2.label.charAt(0)?"1.75em":"3.0em"),group2.body){var upperNode=paddedNode(buildGroup2(group2.body,options2));if(group2.below){var lowerNode=paddedNode(buildGroup2(group2.below,options2));node2=new mathMLTree.MathNode("munderover",[arrowNode,lowerNode,upperNode])}else node2=new mathMLTree.MathNode("mover",[arrowNode,upperNode])}else if(group2.below){var _lowerNode=paddedNode(buildGroup2(group2.below,options2));node2=new mathMLTree.MathNode("munder",[arrowNode,_lowerNode])}else node2=paddedNode(),node2=new mathMLTree.MathNode("mover",[arrowNode,node2]);return node2}}),makeSpan2=buildCommon.makeSpan,__name(htmlBuilder$9,"htmlBuilder$9"),__name(mathmlBuilder$8,"mathmlBuilder$8"),defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(_ref,args){var{parser:parser24,funcName:funcName}=_ref,body=args[0];return{type:"mclass",mode:parser24.mode,mclass:"m"+funcName.slice(5),body:ordargument(body),isCharacterBox:utils.isCharacterBox(body)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8}),binrelClass=__name(arg=>{var atom2="ordgroup"===arg.type&&arg.body.length?arg.body[0]:arg;return"atom"!==atom2.type||"bin"!==atom2.family&&"rel"!==atom2.family?"mord":"m"+atom2.family},"binrelClass"),defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(_ref2,args){var{parser:parser24}=_ref2;return{type:"mclass",mode:parser24.mode,mclass:binrelClass(args[0]),body:ordargument(args[1]),isCharacterBox:utils.isCharacterBox(args[1])}}}),defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(_ref3,args){var mclass,{parser:parser24,funcName:funcName}=_ref3,baseArg=args[1],shiftedArg=args[0];mclass="\\stackrel"!==funcName?binrelClass(baseArg):"mrel";var baseOp={type:"op",mode:baseArg.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==funcName,body:ordargument(baseArg)},supsub={type:"supsub",mode:shiftedArg.mode,base:baseOp,sup:"\\underset"===funcName?null:shiftedArg,sub:"\\underset"===funcName?shiftedArg:null};return{type:"mclass",mode:parser24.mode,mclass:mclass,body:[supsub],isCharacterBox:utils.isCharacterBox(supsub)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8}),defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(_ref,args){var{parser:parser24}=_ref;return{type:"pmb",mode:parser24.mode,mclass:binrelClass(args[0]),body:ordargument(args[0])}},htmlBuilder(group2,options2){var elements2=buildExpression$1(group2.body,options2,!0),node2=buildCommon.makeSpan([group2.mclass],elements2,options2);return node2.style.textShadow="0.02em 0.01em 0.04px",node2},mathmlBuilder(group2,style3){var inner2=buildExpression2(group2.body,style3),node2=new mathMLTree.MathNode("mstyle",inner2);return node2.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),node2}}),cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=__name(()=>({type:"styling",body:[],mode:"math",style:"display"}),"newCell"),isStartOfArrow=__name(node2=>"textord"===node2.type&&"@"===node2.text,"isStartOfArrow"),isLabelEnd=__name((node2,endChar)=>("mathord"===node2.type||"atom"===node2.type)&&node2.text===endChar,"isLabelEnd"),__name(cdArrow,"cdArrow"),__name(parseCD,"parseCD"),defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(_ref,args){var{parser:parser24,funcName:funcName}=_ref;return{type:"cdlabel",mode:parser24.mode,side:funcName.slice(4),label:args[0]}},htmlBuilder(group2,options2){var newOptions=options2.havingStyle(options2.style.sup()),label=buildCommon.wrapFragment(buildGroup$1(group2.label,newOptions,options2),options2);return label.classes.push("cd-label-"+group2.side),label.style.bottom=makeEm(.8-label.depth),label.height=0,label.depth=0,label},mathmlBuilder(group2,options2){var label=new mathMLTree.MathNode("mrow",[buildGroup2(group2.label,options2)]);return(label=new mathMLTree.MathNode("mpadded",[label])).setAttribute("width","0"),"left"===group2.side&&label.setAttribute("lspace","-1width"),label.setAttribute("voffset","0.7em"),(label=new mathMLTree.MathNode("mstyle",[label])).setAttribute("displaystyle","false"),label.setAttribute("scriptlevel","1"),label}}),defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(_ref2,args){var{parser:parser24}=_ref2;return{type:"cdlabelparent",mode:parser24.mode,fragment:args[0]}},htmlBuilder(group2,options2){var parent4=buildCommon.wrapFragment(buildGroup$1(group2.fragment,options2),options2);return parent4.classes.push("cd-vert-arrow"),parent4},mathmlBuilder:(group2,options2)=>new mathMLTree.MathNode("mrow",[buildGroup2(group2.fragment,options2)])}),defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(_ref,args){for(var{parser:parser24}=_ref,group2=assertNodeType(args[0],"ordgroup").body,number7="",i2=0;i2<group2.length;i2++){number7+=assertNodeType(group2[i2],"textord").text}var text4,code=parseInt(number7);if(isNaN(code))throw new ParseError("\\@char has non-numeric argument "+number7);if(code<0||code>=1114111)throw new ParseError("\\@char with invalid code point "+number7);return code<=65535?text4=String.fromCharCode(code):(code-=65536,text4=String.fromCharCode(55296+(code>>10),56320+(1023&code))),{type:"textord",mode:parser24.mode,text:text4}}}),htmlBuilder$8=__name((group2,options2)=>{var elements2=buildExpression$1(group2.body,options2.withColor(group2.color),!1);return buildCommon.makeFragment(elements2)},"htmlBuilder$8"),mathmlBuilder$7=__name((group2,options2)=>{var inner2=buildExpression2(group2.body,options2.withColor(group2.color)),node2=new mathMLTree.MathNode("mstyle",inner2);return node2.setAttribute("mathcolor",group2.color),node2},"mathmlBuilder$7"),defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(_ref,args){var{parser:parser24}=_ref,color2=assertNodeType(args[0],"color-token").color,body=args[1];return{type:"color",mode:parser24.mode,color:color2,body:ordargument(body)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7}),defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(_ref2,args){var{parser:parser24,breakOnTokenText:breakOnTokenText}=_ref2,color2=assertNodeType(args[0],"color-token").color;parser24.gullet.macros.set("\\current@color",color2);var body=parser24.parseExpression(!0,breakOnTokenText);return{type:"color",mode:parser24.mode,color:color2,body:body}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7}),defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(_ref,args,optArgs){var{parser:parser24}=_ref,size4="["===parser24.gullet.future().text?parser24.parseSizeGroup(!0):null,newLine=!parser24.settings.displayMode||!parser24.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:parser24.mode,newLine:newLine,size:size4&&assertNodeType(size4,"size").value}},htmlBuilder(group2,options2){var span=buildCommon.makeSpan(["mspace"],[],options2);return group2.newLine&&(span.classes.push("newline"),group2.size&&(span.style.marginTop=makeEm(calculateSize2(group2.size,options2)))),span},mathmlBuilder(group2,options2){var node2=new mathMLTree.MathNode("mspace");return group2.newLine&&(node2.setAttribute("linebreak","newline"),group2.size&&node2.setAttribute("height",makeEm(calculateSize2(group2.size,options2)))),node2}}),globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=__name(tok=>{var name=tok.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(name))throw new ParseError("Expected a control sequence",tok);return name},"checkControlSequence"),getRHS=__name(parser24=>{var tok=parser24.gullet.popToken();return"="===tok.text&&" "===(tok=parser24.gullet.popToken()).text&&(tok=parser24.gullet.popToken()),tok},"getRHS"),letCommand=__name((parser24,name,tok,global2)=>{var macro=parser24.gullet.macros.get(tok.text);null==macro&&(tok.noexpand=!0,macro={tokens:[tok],numArgs:0,unexpandable:!parser24.gullet.isExpandable(tok.text)}),parser24.gullet.macros.set(name,macro,global2)},"letCommand"),defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(_ref){var{parser:parser24,funcName:funcName}=_ref;parser24.consumeSpaces();var token2=parser24.fetch();if(globalMap[token2.text])return"\\global"!==funcName&&"\\\\globallong"!==funcName||(token2.text=globalMap[token2.text]),assertNodeType(parser24.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",token2)}}),defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(_ref2){var{parser:parser24,funcName:funcName}=_ref2,tok=parser24.gullet.popToken(),name=tok.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(name))throw new ParseError("Expected a control sequence",tok);for(var insert,numArgs=0,delimiters2=[[]];"{"!==parser24.gullet.future().text;)if("#"===(tok=parser24.gullet.popToken()).text){if("{"===parser24.gullet.future().text){insert=parser24.gullet.future(),delimiters2[numArgs].push("{");break}if(tok=parser24.gullet.popToken(),!/^[1-9]$/.test(tok.text))throw new ParseError('Invalid argument number "'+tok.text+'"');if(parseInt(tok.text)!==numArgs+1)throw new ParseError('Argument number "'+tok.text+'" out of order');numArgs++,delimiters2.push([])}else{if("EOF"===tok.text)throw new ParseError("Expected a macro definition");delimiters2[numArgs].push(tok.text)}var{tokens:tokens2}=parser24.gullet.consumeArg();return insert&&tokens2.unshift(insert),"\\edef"!==funcName&&"\\xdef"!==funcName||(tokens2=parser24.gullet.expandTokens(tokens2)).reverse(),parser24.gullet.macros.set(name,{tokens:tokens2,numArgs:numArgs,delimiters:delimiters2},funcName===globalMap[funcName]),{type:"internal",mode:parser24.mode}}}),defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(_ref3){var{parser:parser24,funcName:funcName}=_ref3,name=checkControlSequence(parser24.gullet.popToken());parser24.gullet.consumeSpaces();var tok=getRHS(parser24);return letCommand(parser24,name,tok,"\\\\globallet"===funcName),{type:"internal",mode:parser24.mode}}}),defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(_ref4){var{parser:parser24,funcName:funcName}=_ref4,name=checkControlSequence(parser24.gullet.popToken()),middle=parser24.gullet.popToken(),tok=parser24.gullet.popToken();return letCommand(parser24,name,tok,"\\\\globalfuture"===funcName),parser24.gullet.pushToken(tok),parser24.gullet.pushToken(middle),{type:"internal",mode:parser24.mode}}}),getMetrics=__name(function(symbol,font,mode){var metrics=getCharacterMetrics(symbols.math[symbol]&&symbols.math[symbol].replace||symbol,font,mode);if(!metrics)throw new Error("Unsupported symbol "+symbol+" and font size "+font+".");return metrics},"getMetrics"),styleWrap=__name(function(delim,toStyle,options2,classes3){var newOptions=options2.havingBaseStyle(toStyle),span=buildCommon.makeSpan(classes3.concat(newOptions.sizingClasses(options2)),[delim],options2),delimSizeMultiplier=newOptions.sizeMultiplier/options2.sizeMultiplier;return span.height*=delimSizeMultiplier,span.depth*=delimSizeMultiplier,span.maxFontSize=newOptions.sizeMultiplier,span},"styleWrap"),centerSpan=__name(function(span,options2,style3){var newOptions=options2.havingBaseStyle(style3),shift2=(1-options2.sizeMultiplier/newOptions.sizeMultiplier)*options2.fontMetrics().axisHeight;span.classes.push("delimcenter"),span.style.top=makeEm(shift2),span.height-=shift2,span.depth+=shift2},"centerSpan"),makeSmallDelim=__name(function(delim,style3,center4,options2,mode,classes3){var text4=buildCommon.makeSymbol(delim,"Main-Regular",mode,options2),span=styleWrap(text4,style3,options2,classes3);return center4&&centerSpan(span,options2,style3),span},"makeSmallDelim"),mathrmSize=__name(function(value2,size4,mode,options2){return buildCommon.makeSymbol(value2,"Size"+size4+"-Regular",mode,options2)},"mathrmSize"),makeLargeDelim=__name(function(delim,size4,center4,options2,mode,classes3){var inner2=mathrmSize(delim,size4,mode,options2),span=styleWrap(buildCommon.makeSpan(["delimsizing","size"+size4],[inner2],options2),Style$1.TEXT,options2,classes3);return center4&&centerSpan(span,options2,Style$1.TEXT),span},"makeLargeDelim"),makeGlyphSpan=__name(function(symbol,font,mode){var sizeClass;return sizeClass="Size1-Regular"===font?"delim-size1":"delim-size4",{type:"elem",elem:buildCommon.makeSpan(["delimsizinginner",sizeClass],[buildCommon.makeSpan([],[buildCommon.makeSymbol(symbol,font,mode)])])}},"makeGlyphSpan"),makeInner=__name(function(ch,height2,options2){var width3=fontMetricsData["Size4-Regular"][ch.charCodeAt(0)]?fontMetricsData["Size4-Regular"][ch.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][ch.charCodeAt(0)][4],path4=new PathNode("inner",innerPath(ch,Math.round(1e3*height2))),svgNode2=new SvgNode([path4],{width:makeEm(width3),height:makeEm(height2),style:"width:"+makeEm(width3),viewBox:"0 0 "+1e3*width3+" "+Math.round(1e3*height2),preserveAspectRatio:"xMinYMin"}),span=buildCommon.makeSvgSpan([],[svgNode2],options2);return span.height=height2,span.style.height=makeEm(height2),span.style.width=makeEm(width3),{type:"elem",elem:span}},"makeInner"),lap={type:"kern",size:-.008},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=__name(function(delim,heightTotal,center4,options2,mode,classes3){var top2,middle,repeat2,bottom2,svgLabel="",viewBoxWidth=0;top2=repeat2=bottom2=delim,middle=null;var font="Size1-Regular";"\\uparrow"===delim?repeat2=bottom2="⏐":"\\Uparrow"===delim?repeat2=bottom2="‖":"\\downarrow"===delim?top2=repeat2="⏐":"\\Downarrow"===delim?top2=repeat2="‖":"\\updownarrow"===delim?(top2="\\uparrow",repeat2="⏐",bottom2="\\downarrow"):"\\Updownarrow"===delim?(top2="\\Uparrow",repeat2="‖",bottom2="\\Downarrow"):utils.contains(verts,delim)?(repeat2="∣",svgLabel="vert",viewBoxWidth=333):utils.contains(doubleVerts,delim)?(repeat2="∥",svgLabel="doublevert",viewBoxWidth=556):"["===delim||"\\lbrack"===delim?(top2="⎡",repeat2="⎢",bottom2="⎣",font="Size4-Regular",svgLabel="lbrack",viewBoxWidth=667):"]"===delim||"\\rbrack"===delim?(top2="⎤",repeat2="⎥",bottom2="⎦",font="Size4-Regular",svgLabel="rbrack",viewBoxWidth=667):"\\lfloor"===delim||"⌊"===delim?(repeat2=top2="⎢",bottom2="⎣",font="Size4-Regular",svgLabel="lfloor",viewBoxWidth=667):"\\lceil"===delim||"⌈"===delim?(top2="⎡",repeat2=bottom2="⎢",font="Size4-Regular",svgLabel="lceil",viewBoxWidth=667):"\\rfloor"===delim||"⌋"===delim?(repeat2=top2="⎥",bottom2="⎦",font="Size4-Regular",svgLabel="rfloor",viewBoxWidth=667):"\\rceil"===delim||"⌉"===delim?(top2="⎤",repeat2=bottom2="⎥",font="Size4-Regular",svgLabel="rceil",viewBoxWidth=667):"("===delim||"\\lparen"===delim?(top2="⎛",repeat2="⎜",bottom2="⎝",font="Size4-Regular",svgLabel="lparen",viewBoxWidth=875):")"===delim||"\\rparen"===delim?(top2="⎞",repeat2="⎟",bottom2="⎠",font="Size4-Regular",svgLabel="rparen",viewBoxWidth=875):"\\{"===delim||"\\lbrace"===delim?(top2="⎧",middle="⎨",bottom2="⎩",repeat2="⎪",font="Size4-Regular"):"\\}"===delim||"\\rbrace"===delim?(top2="⎫",middle="⎬",bottom2="⎭",repeat2="⎪",font="Size4-Regular"):"\\lgroup"===delim||"⟮"===delim?(top2="⎧",bottom2="⎩",repeat2="⎪",font="Size4-Regular"):"\\rgroup"===delim||"⟯"===delim?(top2="⎫",bottom2="⎭",repeat2="⎪",font="Size4-Regular"):"\\lmoustache"===delim||"⎰"===delim?(top2="⎧",bottom2="⎭",repeat2="⎪",font="Size4-Regular"):"\\rmoustache"!==delim&&"⎱"!==delim||(top2="⎫",bottom2="⎩",repeat2="⎪",font="Size4-Regular");var topMetrics=getMetrics(top2,font,mode),topHeightTotal=topMetrics.height+topMetrics.depth,repeatMetrics=getMetrics(repeat2,font,mode),repeatHeightTotal=repeatMetrics.height+repeatMetrics.depth,bottomMetrics=getMetrics(bottom2,font,mode),bottomHeightTotal=bottomMetrics.height+bottomMetrics.depth,middleHeightTotal=0,middleFactor=1;if(null!==middle){var middleMetrics=getMetrics(middle,font,mode);middleHeightTotal=middleMetrics.height+middleMetrics.depth,middleFactor=2}var minHeight=topHeightTotal+bottomHeightTotal+middleHeightTotal,realHeightTotal=minHeight+Math.max(0,Math.ceil((heightTotal-minHeight)/(middleFactor*repeatHeightTotal)))*middleFactor*repeatHeightTotal,axisHeight=options2.fontMetrics().axisHeight;center4&&(axisHeight*=options2.sizeMultiplier);var depth=realHeightTotal/2-axisHeight,stack=[];if(svgLabel.length>0){var midHeight=realHeightTotal-topHeightTotal-bottomHeightTotal,viewBoxHeight=Math.round(1e3*realHeightTotal),pathStr=tallDelim(svgLabel,Math.round(1e3*midHeight)),path4=new PathNode(svgLabel,pathStr),width3=(viewBoxWidth/1e3).toFixed(3)+"em",height2=(viewBoxHeight/1e3).toFixed(3)+"em",svg2=new SvgNode([path4],{width:width3,height:height2,viewBox:"0 0 "+viewBoxWidth+" "+viewBoxHeight}),wrapper=buildCommon.makeSvgSpan([],[svg2],options2);wrapper.height=viewBoxHeight/1e3,wrapper.style.width=width3,wrapper.style.height=height2,stack.push({type:"elem",elem:wrapper})}else{if(stack.push(makeGlyphSpan(bottom2,font,mode)),stack.push(lap),null===middle){var innerHeight=realHeightTotal-topHeightTotal-bottomHeightTotal+.016;stack.push(makeInner(repeat2,innerHeight,options2))}else{var _innerHeight=(realHeightTotal-topHeightTotal-bottomHeightTotal-middleHeightTotal)/2+.016;stack.push(makeInner(repeat2,_innerHeight,options2)),stack.push(lap),stack.push(makeGlyphSpan(middle,font,mode)),stack.push(lap),stack.push(makeInner(repeat2,_innerHeight,options2))}stack.push(lap),stack.push(makeGlyphSpan(top2,font,mode))}var newOptions=options2.havingBaseStyle(Style$1.TEXT),inner2=buildCommon.makeVList({positionType:"bottom",positionData:depth,children:stack},newOptions);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[inner2],newOptions),Style$1.TEXT,options2,classes3)},"makeStackedDelim"),sqrtSvg=__name(function(sqrtName,height2,viewBoxHeight,extraVinculum,options2){var path4=sqrtPath(sqrtName,extraVinculum,viewBoxHeight),pathNode=new PathNode(sqrtName,path4),svg2=new SvgNode([pathNode],{width:"400em",height:makeEm(height2),viewBox:"0 0 400000 "+viewBoxHeight,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[svg2],options2)},"sqrtSvg"),makeSqrtImage=__name(function(height2,options2){var span,advanceWidth,newOptions=options2.havingBaseSizing(),delim=traverseSequence("\\surd",height2*newOptions.sizeMultiplier,stackLargeDelimiterSequence,newOptions),sizeMultiplier=newOptions.sizeMultiplier,extraVinculum=Math.max(0,options2.minRuleThickness-options2.fontMetrics().sqrtRuleThickness),spanHeight=0,texHeight=0,viewBoxHeight=0;return"small"===delim.type?(height2<1?sizeMultiplier=1:height2<1.4&&(sizeMultiplier=.7),texHeight=(1+extraVinculum)/sizeMultiplier,(span=sqrtSvg("sqrtMain",spanHeight=(1+extraVinculum+.08)/sizeMultiplier,viewBoxHeight=1e3+1e3*extraVinculum+80,extraVinculum,options2)).style.minWidth="0.853em",advanceWidth=.833/sizeMultiplier):"large"===delim.type?(viewBoxHeight=1080*sizeToMaxHeight[delim.size],texHeight=(sizeToMaxHeight[delim.size]+extraVinculum)/sizeMultiplier,spanHeight=(sizeToMaxHeight[delim.size]+extraVinculum+.08)/sizeMultiplier,(span=sqrtSvg("sqrtSize"+delim.size,spanHeight,viewBoxHeight,extraVinculum,options2)).style.minWidth="1.02em",advanceWidth=1/sizeMultiplier):(spanHeight=height2+extraVinculum+.08,texHeight=height2+extraVinculum,viewBoxHeight=Math.floor(1e3*height2+extraVinculum)+80,(span=sqrtSvg("sqrtTall",spanHeight,viewBoxHeight,extraVinculum,options2)).style.minWidth="0.742em",advanceWidth=1.056),span.height=texHeight,span.style.height=makeEm(spanHeight),{span:span,advanceWidth:advanceWidth,ruleWidth:(options2.fontMetrics().sqrtRuleThickness+extraVinculum)*sizeMultiplier}},"makeSqrtImage"),stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=__name(function(delim,size4,options2,mode,classes3){if("<"===delim||"\\lt"===delim||"⟨"===delim?delim="\\langle":">"!==delim&&"\\gt"!==delim&&"⟩"!==delim||(delim="\\rangle"),utils.contains(stackLargeDelimiters,delim)||utils.contains(stackNeverDelimiters,delim))return makeLargeDelim(delim,size4,!1,options2,mode,classes3);if(utils.contains(stackAlwaysDelimiters,delim))return makeStackedDelim(delim,sizeToMaxHeight[size4],!1,options2,mode,classes3);throw new ParseError("Illegal delimiter: '"+delim+"'")},"makeSizedDelim"),stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=__name(function(type3){if("small"===type3.type)return"Main-Regular";if("large"===type3.type)return"Size"+type3.size+"-Regular";if("stack"===type3.type)return"Size4-Regular";throw new Error("Add support for delim type '"+type3.type+"' here.")},"delimTypeToFont"),traverseSequence=__name(function(delim,height2,sequence,options2){for(var i2=Math.min(2,3-options2.style.size);i2<sequence.length&&"stack"!==sequence[i2].type;i2++){var metrics=getMetrics(delim,delimTypeToFont(sequence[i2]),"math"),heightDepth=metrics.height+metrics.depth;if("small"===sequence[i2].type&&(heightDepth*=options2.havingBaseStyle(sequence[i2].style).sizeMultiplier),heightDepth>height2)return sequence[i2]}return sequence[sequence.length-1]},"traverseSequence"),makeCustomSizedDelim=__name(function(delim,height2,center4,options2,mode,classes3){var sequence;"<"===delim||"\\lt"===delim||"⟨"===delim?delim="\\langle":">"!==delim&&"\\gt"!==delim&&"⟩"!==delim||(delim="\\rangle"),sequence=utils.contains(stackNeverDelimiters,delim)?stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,delim)?stackLargeDelimiterSequence:stackAlwaysDelimiterSequence;var delimType=traverseSequence(delim,height2,sequence,options2);return"small"===delimType.type?makeSmallDelim(delim,delimType.style,center4,options2,mode,classes3):"large"===delimType.type?makeLargeDelim(delim,delimType.size,center4,options2,mode,classes3):makeStackedDelim(delim,height2,center4,options2,mode,classes3)},"makeCustomSizedDelim"),makeLeftRightDelim=__name(function(delim,height2,depth,options2,mode,classes3){var axisHeight=options2.fontMetrics().axisHeight*options2.sizeMultiplier,delimiterExtend=5/options2.fontMetrics().ptPerEm,maxDistFromAxis=Math.max(height2-axisHeight,depth+axisHeight),totalHeight=Math.max(maxDistFromAxis/500*901,2*maxDistFromAxis-delimiterExtend);return makeCustomSizedDelim(delim,totalHeight,!0,options2,mode,classes3)},"makeLeftRightDelim"),delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight:sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],__name(checkDelimiter,"checkDelimiter"),defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:__name((context,args)=>{var delim=checkDelimiter(args[0],context);return{type:"delimsizing",mode:context.parser.mode,size:delimiterSizes[context.funcName].size,mclass:delimiterSizes[context.funcName].mclass,delim:delim.text}},"handler"),htmlBuilder:__name((group2,options2)=>"."===group2.delim?buildCommon.makeSpan([group2.mclass]):delimiter.sizedDelim(group2.delim,group2.size,options2,group2.mode,[group2.mclass]),"htmlBuilder"),mathmlBuilder:__name(group2=>{var children2=[];"."!==group2.delim&&children2.push(makeText(group2.delim,group2.mode));var node2=new mathMLTree.MathNode("mo",children2);"mopen"===group2.mclass||"mclose"===group2.mclass?node2.setAttribute("fence","true"):node2.setAttribute("fence","false"),node2.setAttribute("stretchy","true");var size4=makeEm(delimiter.sizeToMaxHeight[group2.size]);return node2.setAttribute("minsize",size4),node2.setAttribute("maxsize",size4),node2},"mathmlBuilder")}),__name(assertParsed,"assertParsed"),defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:__name((context,args)=>{var color2=context.parser.gullet.macros.get("\\current@color");if(color2&&"string"!=typeof color2)throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:context.parser.mode,delim:checkDelimiter(args[0],context).text,color:color2}},"handler")}),defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:__name((context,args)=>{var delim=checkDelimiter(args[0],context),parser24=context.parser;++parser24.leftrightDepth;var body=parser24.parseExpression(!1);--parser24.leftrightDepth,parser24.expect("\\right",!1);var right3=assertNodeType(parser24.parseFunction(),"leftright-right");return{type:"leftright",mode:parser24.mode,body:body,left:delim.text,right:right3.delim,rightColor:right3.color}},"handler"),htmlBuilder:__name((group2,options2)=>{assertParsed(group2);for(var leftDelim,rightDelim,inner2=buildExpression$1(group2.body,options2,!0,["mopen","mclose"]),innerHeight=0,innerDepth=0,hadMiddle=!1,i2=0;i2<inner2.length;i2++)inner2[i2].isMiddle?hadMiddle=!0:(innerHeight=Math.max(inner2[i2].height,innerHeight),innerDepth=Math.max(inner2[i2].depth,innerDepth));if(innerHeight*=options2.sizeMultiplier,innerDepth*=options2.sizeMultiplier,leftDelim="."===group2.left?makeNullDelimiter(options2,["mopen"]):delimiter.leftRightDelim(group2.left,innerHeight,innerDepth,options2,group2.mode,["mopen"]),inner2.unshift(leftDelim),hadMiddle)for(var _i=1;_i<inner2.length;_i++){var isMiddle=inner2[_i].isMiddle;isMiddle&&(inner2[_i]=delimiter.leftRightDelim(isMiddle.delim,innerHeight,innerDepth,isMiddle.options,group2.mode,[]))}if("."===group2.right)rightDelim=makeNullDelimiter(options2,["mclose"]);else{var colorOptions=group2.rightColor?options2.withColor(group2.rightColor):options2;rightDelim=delimiter.leftRightDelim(group2.right,innerHeight,innerDepth,colorOptions,group2.mode,["mclose"])}return inner2.push(rightDelim),buildCommon.makeSpan(["minner"],inner2,options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{assertParsed(group2);var inner2=buildExpression2(group2.body,options2);if("."!==group2.left){var leftNode=new mathMLTree.MathNode("mo",[makeText(group2.left,group2.mode)]);leftNode.setAttribute("fence","true"),inner2.unshift(leftNode)}if("."!==group2.right){var rightNode=new mathMLTree.MathNode("mo",[makeText(group2.right,group2.mode)]);rightNode.setAttribute("fence","true"),group2.rightColor&&rightNode.setAttribute("mathcolor",group2.rightColor),inner2.push(rightNode)}return makeRow(inner2)},"mathmlBuilder")}),defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:__name((context,args)=>{var delim=checkDelimiter(args[0],context);if(!context.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",delim);return{type:"middle",mode:context.parser.mode,delim:delim.text}},"handler"),htmlBuilder:__name((group2,options2)=>{var middleDelim;if("."===group2.delim)middleDelim=makeNullDelimiter(options2,[]);else{middleDelim=delimiter.sizedDelim(group2.delim,1,options2,group2.mode,[]);var isMiddle={delim:group2.delim,options:options2};middleDelim.isMiddle=isMiddle}return middleDelim},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var textNode="\\vert"===group2.delim||"|"===group2.delim?makeText("|","text"):makeText(group2.delim,group2.mode),middleNode=new mathMLTree.MathNode("mo",[textNode]);return middleNode.setAttribute("fence","true"),middleNode.setAttribute("lspace","0.05em"),middleNode.setAttribute("rspace","0.05em"),middleNode},"mathmlBuilder")}),htmlBuilder$7=__name((group2,options2)=>{var img,vlist,inner2=buildCommon.wrapFragment(buildGroup$1(group2.body,options2),options2),label=group2.label.slice(1),scale2=options2.sizeMultiplier,imgShift=0,isSingleChar=utils.isCharacterBox(group2.body);if("sout"===label)(img=buildCommon.makeSpan(["stretchy","sout"])).height=options2.fontMetrics().defaultRuleThickness/scale2,imgShift=-.5*options2.fontMetrics().xHeight;else if("phase"===label){var lineWeight=calculateSize2({number:.6,unit:"pt"},options2),clearance=calculateSize2({number:.35,unit:"ex"},options2);scale2/=options2.havingBaseSizing().sizeMultiplier;var angleHeight=inner2.height+inner2.depth+lineWeight+clearance;inner2.style.paddingLeft=makeEm(angleHeight/2+lineWeight);var viewBoxHeight=Math.floor(1e3*angleHeight*scale2),path4=phasePath(viewBoxHeight),svgNode2=new SvgNode([new PathNode("phase",path4)],{width:"400em",height:makeEm(viewBoxHeight/1e3),viewBox:"0 0 400000 "+viewBoxHeight,preserveAspectRatio:"xMinYMin slice"});(img=buildCommon.makeSvgSpan(["hide-tail"],[svgNode2],options2)).style.height=makeEm(angleHeight),imgShift=inner2.depth+lineWeight+clearance}else{/cancel/.test(label)?isSingleChar||inner2.classes.push("cancel-pad"):"angl"===label?inner2.classes.push("anglpad"):inner2.classes.push("boxpad");var topPad=0,bottomPad=0,ruleThickness=0;/box/.test(label)?(ruleThickness=Math.max(options2.fontMetrics().fboxrule,options2.minRuleThickness),bottomPad=topPad=options2.fontMetrics().fboxsep+("colorbox"===label?0:ruleThickness)):"angl"===label?(topPad=4*(ruleThickness=Math.max(options2.fontMetrics().defaultRuleThickness,options2.minRuleThickness)),bottomPad=Math.max(0,.25-inner2.depth)):bottomPad=topPad=isSingleChar?.2:0,img=stretchy.encloseSpan(inner2,label,topPad,bottomPad,options2),/fbox|boxed|fcolorbox/.test(label)?(img.style.borderStyle="solid",img.style.borderWidth=makeEm(ruleThickness)):"angl"===label&&.049!==ruleThickness&&(img.style.borderTopWidth=makeEm(ruleThickness),img.style.borderRightWidth=makeEm(ruleThickness)),imgShift=inner2.depth+bottomPad,group2.backgroundColor&&(img.style.backgroundColor=group2.backgroundColor,group2.borderColor&&(img.style.borderColor=group2.borderColor))}if(group2.backgroundColor)vlist=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:img,shift:imgShift},{type:"elem",elem:inner2,shift:0}]},options2);else{var classes3=/cancel|phase/.test(label)?["svg-align"]:[];vlist=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:inner2,shift:0},{type:"elem",elem:img,shift:imgShift,wrapperClasses:classes3}]},options2)}return/cancel/.test(label)&&(vlist.height=inner2.height,vlist.depth=inner2.depth),/cancel/.test(label)&&!isSingleChar?buildCommon.makeSpan(["mord","cancel-lap"],[vlist],options2):buildCommon.makeSpan(["mord"],[vlist],options2)},"htmlBuilder$7"),mathmlBuilder$6=__name((group2,options2)=>{var fboxsep=0,node2=new mathMLTree.MathNode(group2.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup2(group2.body,options2)]);switch(group2.label){case"\\cancel":node2.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":node2.setAttribute("notation","downdiagonalstrike");break;case"\\phase":node2.setAttribute("notation","phasorangle");break;case"\\sout":node2.setAttribute("notation","horizontalstrike");break;case"\\fbox":node2.setAttribute("notation","box");break;case"\\angl":node2.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(fboxsep=options2.fontMetrics().fboxsep*options2.fontMetrics().ptPerEm,node2.setAttribute("width","+"+2*fboxsep+"pt"),node2.setAttribute("height","+"+2*fboxsep+"pt"),node2.setAttribute("lspace",fboxsep+"pt"),node2.setAttribute("voffset",fboxsep+"pt"),"\\fcolorbox"===group2.label){var thk=Math.max(options2.fontMetrics().fboxrule,options2.minRuleThickness);node2.setAttribute("style","border: "+thk+"em solid "+String(group2.borderColor))}break;case"\\xcancel":node2.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return group2.backgroundColor&&node2.setAttribute("mathbackground",group2.backgroundColor),node2},"mathmlBuilder$6"),defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(_ref,args,optArgs){var{parser:parser24,funcName:funcName}=_ref,color2=assertNodeType(args[0],"color-token").color,body=args[1];return{type:"enclose",mode:parser24.mode,label:funcName,backgroundColor:color2,body:body}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(_ref2,args,optArgs){var{parser:parser24,funcName:funcName}=_ref2,borderColor=assertNodeType(args[0],"color-token").color,backgroundColor=assertNodeType(args[1],"color-token").color,body=args[2];return{type:"enclose",mode:parser24.mode,label:funcName,backgroundColor:backgroundColor,borderColor:borderColor,body:body}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(_ref3,args){var{parser:parser24}=_ref3;return{type:"enclose",mode:parser24.mode,label:"\\fbox",body:args[0]}}}),defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(_ref4,args){var{parser:parser24,funcName:funcName}=_ref4,body=args[0];return{type:"enclose",mode:parser24.mode,label:funcName,body:body}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6}),defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(_ref5,args){var{parser:parser24}=_ref5;return{type:"enclose",mode:parser24.mode,label:"\\angl",body:args[0]}}}),_environments={},__name(defineEnvironment,"defineEnvironment"),_macros={},__name(defineMacro,"defineMacro"),__name(getHLines,"getHLines"),validateAmsEnvironmentContext=__name(context=>{if(!context.parser.settings.displayMode)throw new ParseError("{"+context.envName+"} can be used only in display mode.")},"validateAmsEnvironmentContext"),__name(getAutoTag,"getAutoTag"),__name(parseArray,"parseArray"),__name(dCellStyle,"dCellStyle"),htmlBuilder$6=__name(function(group2,options2){var r2,c3,nr=group2.body.length,hLinesBeforeRow=group2.hLinesBeforeRow,nc=0,body=new Array(nr),hlines=[],ruleThickness=Math.max(options2.fontMetrics().arrayRuleWidth,options2.minRuleThickness),pt=1/options2.fontMetrics().ptPerEm,arraycolsep=5*pt;group2.colSeparationType&&"small"===group2.colSeparationType&&(arraycolsep=options2.havingStyle(Style$1.SCRIPT).sizeMultiplier/options2.sizeMultiplier*.2778);var baselineskip="CD"===group2.colSeparationType?calculateSize2({number:3,unit:"ex"},options2):12*pt,jot=3*pt,arrayskip=group2.arraystretch*baselineskip,arstrutHeight=.7*arrayskip,arstrutDepth=.3*arrayskip,totalHeight=0;function setHLinePos(hlinesInGap){for(var i2=0;i2<hlinesInGap.length;++i2)i2>0&&(totalHeight+=.25),hlines.push({pos:totalHeight,isDashed:hlinesInGap[i2]})}for(__name(setHLinePos,"setHLinePos"),setHLinePos(hLinesBeforeRow[0]),r2=0;r2<group2.body.length;++r2){var inrow=group2.body[r2],height2=arstrutHeight,depth=arstrutDepth;nc<inrow.length&&(nc=inrow.length);var outrow=new Array(inrow.length);for(c3=0;c3<inrow.length;++c3){var elt=buildGroup$1(inrow[c3],options2);depth<elt.depth&&(depth=elt.depth),height2<elt.height&&(height2=elt.height),outrow[c3]=elt}var rowGap=group2.rowGaps[r2],gap=0;rowGap&&(gap=calculateSize2(rowGap,options2))>0&&(depth<(gap+=arstrutDepth)&&(depth=gap),gap=0),group2.addJot&&(depth+=jot),outrow.height=height2,outrow.depth=depth,totalHeight+=height2,outrow.pos=totalHeight,totalHeight+=depth+gap,body[r2]=outrow,setHLinePos(hLinesBeforeRow[r2+1])}var colSep,colDescrNum,offset=totalHeight/2+options2.fontMetrics().axisHeight,colDescriptions=group2.cols||[],cols=[],tagSpans=[];if(group2.tags&&group2.tags.some(tag2=>tag2))for(r2=0;r2<nr;++r2){var rw=body[r2],shift2=rw.pos-offset,tag=group2.tags[r2],tagSpan=void 0;(tagSpan=!0===tag?buildCommon.makeSpan(["eqn-num"],[],options2):!1===tag?buildCommon.makeSpan([],[],options2):buildCommon.makeSpan([],buildExpression$1(tag,options2,!0),options2)).depth=rw.depth,tagSpan.height=rw.height,tagSpans.push({type:"elem",elem:tagSpan,shift:shift2})}for(c3=0,colDescrNum=0;c3<nc||colDescrNum<colDescriptions.length;++c3,++colDescrNum){for(var colDescr=colDescriptions[colDescrNum]||{},firstSeparator=!0;"separator"===colDescr.type;){if(firstSeparator||((colSep=buildCommon.makeSpan(["arraycolsep"],[])).style.width=makeEm(options2.fontMetrics().doubleRuleSep),cols.push(colSep)),"|"!==colDescr.separator&&":"!==colDescr.separator)throw new ParseError("Invalid separator type: "+colDescr.separator);var lineType="|"===colDescr.separator?"solid":"dashed",separator=buildCommon.makeSpan(["vertical-separator"],[],options2);separator.style.height=makeEm(totalHeight),separator.style.borderRightWidth=makeEm(ruleThickness),separator.style.borderRightStyle=lineType,separator.style.margin="0 "+makeEm(-ruleThickness/2);var _shift=totalHeight-offset;_shift&&(separator.style.verticalAlign=makeEm(-_shift)),cols.push(separator),colDescr=colDescriptions[++colDescrNum]||{},firstSeparator=!1}if(!(c3>=nc)){var sepwidth=void 0;(c3>0||group2.hskipBeforeAndAfter)&&0!==(sepwidth=utils.deflt(colDescr.pregap,arraycolsep))&&((colSep=buildCommon.makeSpan(["arraycolsep"],[])).style.width=makeEm(sepwidth),cols.push(colSep));var col=[];for(r2=0;r2<nr;++r2){var row=body[r2],elem=row[c3];if(elem){var _shift2=row.pos-offset;elem.depth=row.depth,elem.height=row.height,col.push({type:"elem",elem:elem,shift:_shift2})}}col=buildCommon.makeVList({positionType:"individualShift",children:col},options2),col=buildCommon.makeSpan(["col-align-"+(colDescr.align||"c")],[col]),cols.push(col),(c3<nc-1||group2.hskipBeforeAndAfter)&&0!==(sepwidth=utils.deflt(colDescr.postgap,arraycolsep))&&((colSep=buildCommon.makeSpan(["arraycolsep"],[])).style.width=makeEm(sepwidth),cols.push(colSep))}}if(body=buildCommon.makeSpan(["mtable"],cols),hlines.length>0){for(var line2=buildCommon.makeLineSpan("hline",options2,ruleThickness),dashes=buildCommon.makeLineSpan("hdashline",options2,ruleThickness),vListElems=[{type:"elem",elem:body,shift:0}];hlines.length>0;){var hline=hlines.pop(),lineShift=hline.pos-offset;hline.isDashed?vListElems.push({type:"elem",elem:dashes,shift:lineShift}):vListElems.push({type:"elem",elem:line2,shift:lineShift})}body=buildCommon.makeVList({positionType:"individualShift",children:vListElems},options2)}if(0===tagSpans.length)return buildCommon.makeSpan(["mord"],[body],options2);var eqnNumCol=buildCommon.makeVList({positionType:"individualShift",children:tagSpans},options2);return eqnNumCol=buildCommon.makeSpan(["tag"],[eqnNumCol],options2),buildCommon.makeFragment([body,eqnNumCol])},"htmlBuilder"),alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=__name(function(group2,options2){for(var tbl=[],glue=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),tag=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),i2=0;i2<group2.body.length;i2++){for(var rw=group2.body[i2],row=[],j3=0;j3<rw.length;j3++)row.push(new mathMLTree.MathNode("mtd",[buildGroup2(rw[j3],options2)]));group2.tags&&group2.tags[i2]&&(row.unshift(glue),row.push(glue),group2.leqno?row.unshift(tag):row.push(tag)),tbl.push(new mathMLTree.MathNode("mtr",row))}var table=new mathMLTree.MathNode("mtable",tbl),gap=.5===group2.arraystretch?.1:.16+group2.arraystretch-1+(group2.addJot?.09:0);table.setAttribute("rowspacing",makeEm(gap));var menclose="",align="";if(group2.cols&&group2.cols.length>0){var cols=group2.cols,columnLines="",prevTypeWasAlign=!1,iStart=0,iEnd=cols.length;"separator"===cols[0].type&&(menclose+="top ",iStart=1),"separator"===cols[cols.length-1].type&&(menclose+="bottom ",iEnd-=1);for(var _i=iStart;_i<iEnd;_i++)"align"===cols[_i].type?(align+=alignMap[cols[_i].align],prevTypeWasAlign&&(columnLines+="none "),prevTypeWasAlign=!0):"separator"===cols[_i].type&&prevTypeWasAlign&&(columnLines+="|"===cols[_i].separator?"solid ":"dashed ",prevTypeWasAlign=!1);table.setAttribute("columnalign",align.trim()),/[sd]/.test(columnLines)&&table.setAttribute("columnlines",columnLines.trim())}if("align"===group2.colSeparationType){for(var _cols=group2.cols||[],spacing2="",_i2=1;_i2<_cols.length;_i2++)spacing2+=_i2%2?"0em ":"1em ";table.setAttribute("columnspacing",spacing2.trim())}else"alignat"===group2.colSeparationType||"gather"===group2.colSeparationType?table.setAttribute("columnspacing","0em"):"small"===group2.colSeparationType?table.setAttribute("columnspacing","0.2778em"):"CD"===group2.colSeparationType?table.setAttribute("columnspacing","0.5em"):table.setAttribute("columnspacing","1em");var rowLines="",hlines=group2.hLinesBeforeRow;menclose+=hlines[0].length>0?"left ":"",menclose+=hlines[hlines.length-1].length>0?"right ":"";for(var _i3=1;_i3<hlines.length-1;_i3++)rowLines+=0===hlines[_i3].length?"none ":hlines[_i3][0]?"dashed ":"solid ";return/[sd]/.test(rowLines)&&table.setAttribute("rowlines",rowLines.trim()),""!==menclose&&(table=new mathMLTree.MathNode("menclose",[table])).setAttribute("notation",menclose.trim()),group2.arraystretch&&group2.arraystretch<1&&(table=new mathMLTree.MathNode("mstyle",[table])).setAttribute("scriptlevel","1"),table},"mathmlBuilder"),alignedHandler=__name(function(context,args){-1===context.envName.indexOf("ed")&&validateAmsEnvironmentContext(context);var numMaths,cols=[],separationType=context.envName.indexOf("at")>-1?"alignat":"align",isSplit="split"===context.envName,res=parseArray(context.parser,{cols:cols,addJot:!0,autoTag:isSplit?void 0:getAutoTag(context.envName),emptySingleRow:!0,colSeparationType:separationType,maxNumCols:isSplit?2:void 0,leqno:context.parser.settings.leqno},"display"),numCols=0,emptyGroup={type:"ordgroup",mode:context.mode,body:[]};if(args[0]&&"ordgroup"===args[0].type){for(var arg0="",i2=0;i2<args[0].body.length;i2++){arg0+=assertNodeType(args[0].body[i2],"textord").text}numMaths=Number(arg0),numCols=2*numMaths}var isAligned=!numCols;res.body.forEach(function(row){for(var _i4=1;_i4<row.length;_i4+=2){var styling=assertNodeType(row[_i4],"styling");assertNodeType(styling.body[0],"ordgroup").body.unshift(emptyGroup)}if(isAligned)numCols<row.length&&(numCols=row.length);else{var curMaths=row.length/2;if(numMaths<curMaths)throw new ParseError("Too many math in a row: expected "+numMaths+", but got "+curMaths,row[0])}});for(var _i5=0;_i5<numCols;++_i5){var align="r",pregap=0;_i5%2==1?align="l":_i5>0&&isAligned&&(pregap=1),cols[_i5]={type:"align",align:align,pregap:pregap,postgap:0}}return res.colSeparationType=isAligned?"align":"alignat",res},"alignedHandler"),defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(context,args){var cols=(checkSymbolNodeType(args[0])?[args[0]]:assertNodeType(args[0],"ordgroup").body).map(function(nde){var ca=assertSymbolNodeType(nde).text;if(-1!=="lcr".indexOf(ca))return{type:"align",align:ca};if("|"===ca)return{type:"separator",separator:"|"};if(":"===ca)return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+ca,nde)}),res={cols:cols,hskipBeforeAndAfter:!0,maxNumCols:cols.length};return parseArray(context.parser,res,dCellStyle(context.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(context){var delimiters2={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[context.envName.replace("*","")],colAlign="c",payload={hskipBeforeAndAfter:!1,cols:[{type:"align",align:colAlign}]};if("*"===context.envName.charAt(context.envName.length-1)){var parser24=context.parser;if(parser24.consumeSpaces(),"["===parser24.fetch().text){if(parser24.consume(),parser24.consumeSpaces(),colAlign=parser24.fetch().text,-1==="lcr".indexOf(colAlign))throw new ParseError("Expected l or c or r",parser24.nextToken);parser24.consume(),parser24.consumeSpaces(),parser24.expect("]"),parser24.consume(),payload.cols=[{type:"align",align:colAlign}]}}var res=parseArray(context.parser,payload,dCellStyle(context.envName)),numCols=Math.max(0,...res.body.map(row=>row.length));return res.cols=new Array(numCols).fill({type:"align",align:colAlign}),delimiters2?{type:"leftright",mode:context.mode,body:[res],left:delimiters2[0],right:delimiters2[1],rightColor:void 0}:res},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(context){var res=parseArray(context.parser,{arraystretch:.5},"script");return res.colSeparationType="small",res},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(context,args){var cols=(checkSymbolNodeType(args[0])?[args[0]]:assertNodeType(args[0],"ordgroup").body).map(function(nde){var ca=assertSymbolNodeType(nde).text;if(-1!=="lc".indexOf(ca))return{type:"align",align:ca};throw new ParseError("Unknown column alignment: "+ca,nde)});if(cols.length>1)throw new ParseError("{subarray} can contain only one column");var res={cols:cols,hskipBeforeAndAfter:!1,arraystretch:.5};if((res=parseArray(context.parser,res,"script")).body.length>0&&res.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return res},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(context){var res=parseArray(context.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},dCellStyle(context.envName));return{type:"leftright",mode:context.mode,body:[res],left:context.envName.indexOf("r")>-1?".":"\\{",right:context.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(context){utils.contains(["gather","gather*"],context.envName)&&validateAmsEnvironmentContext(context);var res={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(context.envName),emptySingleRow:!0,leqno:context.parser.settings.leqno};return parseArray(context.parser,res,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(context){validateAmsEnvironmentContext(context);var res={autoTag:getAutoTag(context.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:context.parser.settings.leqno};return parseArray(context.parser,res,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler:context=>(validateAmsEnvironmentContext(context),parseCD(context.parser)),htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5}),defineMacro("\\nonumber","\\gdef\\@eqnsw{0}"),defineMacro("\\notag","\\nonumber"),defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(context,args){throw new ParseError(context.funcName+" valid only within array environment")}}),environments=_environments,defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(_ref,args){var{parser:parser24,funcName:funcName}=_ref,nameGroup=args[0];if("ordgroup"!==nameGroup.type)throw new ParseError("Invalid environment name",nameGroup);for(var envName="",i2=0;i2<nameGroup.body.length;++i2)envName+=assertNodeType(nameGroup.body[i2],"textord").text;if("\\begin"===funcName){if(!environments.hasOwnProperty(envName))throw new ParseError("No such environment: "+envName,nameGroup);var env=environments[envName],{args:_args,optArgs:optArgs}=parser24.parseArguments("\\begin{"+envName+"}",env),context={mode:parser24.mode,envName:envName,parser:parser24},result=env.handler(context,_args,optArgs);parser24.expect("\\end",!1);var endNameToken=parser24.nextToken,end2=assertNodeType(parser24.parseFunction(),"environment");if(end2.name!==envName)throw new ParseError("Mismatch: \\begin{"+envName+"} matched by \\end{"+end2.name+"}",endNameToken);return result}return{type:"environment",mode:parser24.mode,name:envName,nameGroup:nameGroup}}}),htmlBuilder$5=__name((group2,options2)=>{var font=group2.font,newOptions=options2.withFont(font);return buildGroup$1(group2.body,newOptions)},"htmlBuilder$5"),mathmlBuilder$4=__name((group2,options2)=>{var font=group2.font,newOptions=options2.withFont(font);return buildGroup2(group2.body,newOptions)},"mathmlBuilder$4"),fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"},defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:__name((_ref,args)=>{var{parser:parser24,funcName:funcName}=_ref,body=normalizeArgument(args[0]),func=funcName;return func in fontAliases&&(func=fontAliases[func]),{type:"font",mode:parser24.mode,font:func.slice(1),body:body}},"handler"),htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4}),defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:__name((_ref2,args)=>{var{parser:parser24}=_ref2,body=args[0],isCharacterBox3=utils.isCharacterBox(body);return{type:"mclass",mode:parser24.mode,mclass:binrelClass(body),body:[{type:"font",mode:parser24.mode,font:"boldsymbol",body:body}],isCharacterBox:isCharacterBox3}},"handler")}),defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:__name((_ref3,args)=>{var{parser:parser24,funcName:funcName,breakOnTokenText:breakOnTokenText}=_ref3,{mode:mode}=parser24,body=parser24.parseExpression(!0,breakOnTokenText);return{type:"font",mode:mode,font:"math"+funcName.slice(1),body:{type:"ordgroup",mode:parser24.mode,body:body}}},"handler"),htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4}),adjustStyle=__name((size4,originalStyle)=>{var style3=originalStyle;return"display"===size4?style3=style3.id>=Style$1.SCRIPT.id?style3.text():Style$1.DISPLAY:"text"===size4&&style3.size===Style$1.DISPLAY.size?style3=Style$1.TEXT:"script"===size4?style3=Style$1.SCRIPT:"scriptscript"===size4&&(style3=Style$1.SCRIPTSCRIPT),style3},"adjustStyle"),htmlBuilder$4=__name((group2,options2)=>{var newOptions,style3=adjustStyle(group2.size,options2.style),nstyle=style3.fracNum(),dstyle=style3.fracDen();newOptions=options2.havingStyle(nstyle);var numerm=buildGroup$1(group2.numer,newOptions,options2);if(group2.continued){var hStrut=8.5/options2.fontMetrics().ptPerEm,dStrut=3.5/options2.fontMetrics().ptPerEm;numerm.height=numerm.height<hStrut?hStrut:numerm.height,numerm.depth=numerm.depth<dStrut?dStrut:numerm.depth}newOptions=options2.havingStyle(dstyle);var rule,ruleWidth,ruleSpacing,numShift,clearance,denomShift,frac,delimSize,leftDelim,rightDelim,denomm=buildGroup$1(group2.denom,newOptions,options2);if(group2.hasBarLine?(group2.barSize?(ruleWidth=calculateSize2(group2.barSize,options2),rule=buildCommon.makeLineSpan("frac-line",options2,ruleWidth)):rule=buildCommon.makeLineSpan("frac-line",options2),ruleWidth=rule.height,ruleSpacing=rule.height):(rule=null,ruleWidth=0,ruleSpacing=options2.fontMetrics().defaultRuleThickness),style3.size===Style$1.DISPLAY.size||"display"===group2.size?(numShift=options2.fontMetrics().num1,clearance=ruleWidth>0?3*ruleSpacing:7*ruleSpacing,denomShift=options2.fontMetrics().denom1):(ruleWidth>0?(numShift=options2.fontMetrics().num2,clearance=ruleSpacing):(numShift=options2.fontMetrics().num3,clearance=3*ruleSpacing),denomShift=options2.fontMetrics().denom2),rule){var axisHeight=options2.fontMetrics().axisHeight;numShift-numerm.depth-(axisHeight+.5*ruleWidth)<clearance&&(numShift+=clearance-(numShift-numerm.depth-(axisHeight+.5*ruleWidth))),axisHeight-.5*ruleWidth-(denomm.height-denomShift)<clearance&&(denomShift+=clearance-(axisHeight-.5*ruleWidth-(denomm.height-denomShift)));var midShift=-(axisHeight-.5*ruleWidth);frac=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:denomm,shift:denomShift},{type:"elem",elem:rule,shift:midShift},{type:"elem",elem:numerm,shift:-numShift}]},options2)}else{var candidateClearance=numShift-numerm.depth-(denomm.height-denomShift);candidateClearance<clearance&&(numShift+=.5*(clearance-candidateClearance),denomShift+=.5*(clearance-candidateClearance)),frac=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:denomm,shift:denomShift},{type:"elem",elem:numerm,shift:-numShift}]},options2)}return newOptions=options2.havingStyle(style3),frac.height*=newOptions.sizeMultiplier/options2.sizeMultiplier,frac.depth*=newOptions.sizeMultiplier/options2.sizeMultiplier,delimSize=style3.size===Style$1.DISPLAY.size?options2.fontMetrics().delim1:style3.size===Style$1.SCRIPTSCRIPT.size?options2.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:options2.fontMetrics().delim2,leftDelim=null==group2.leftDelim?makeNullDelimiter(options2,["mopen"]):delimiter.customSizedDelim(group2.leftDelim,delimSize,!0,options2.havingStyle(style3),group2.mode,["mopen"]),rightDelim=group2.continued?buildCommon.makeSpan([]):null==group2.rightDelim?makeNullDelimiter(options2,["mclose"]):delimiter.customSizedDelim(group2.rightDelim,delimSize,!0,options2.havingStyle(style3),group2.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(newOptions.sizingClasses(options2)),[leftDelim,buildCommon.makeSpan(["mfrac"],[frac]),rightDelim],options2)},"htmlBuilder$4"),mathmlBuilder$3=__name((group2,options2)=>{var node2=new mathMLTree.MathNode("mfrac",[buildGroup2(group2.numer,options2),buildGroup2(group2.denom,options2)]);if(group2.hasBarLine){if(group2.barSize){var ruleWidth=calculateSize2(group2.barSize,options2);node2.setAttribute("linethickness",makeEm(ruleWidth))}}else node2.setAttribute("linethickness","0px");var style3=adjustStyle(group2.size,options2.style);if(style3.size!==options2.style.size){node2=new mathMLTree.MathNode("mstyle",[node2]);var isDisplay=style3.size===Style$1.DISPLAY.size?"true":"false";node2.setAttribute("displaystyle",isDisplay),node2.setAttribute("scriptlevel","0")}if(null!=group2.leftDelim||null!=group2.rightDelim){var withDelims=[];if(null!=group2.leftDelim){var leftOp=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(group2.leftDelim.replace("\\",""))]);leftOp.setAttribute("fence","true"),withDelims.push(leftOp)}if(withDelims.push(node2),null!=group2.rightDelim){var rightOp=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(group2.rightDelim.replace("\\",""))]);rightOp.setAttribute("fence","true"),withDelims.push(rightOp)}return makeRow(withDelims)}return node2},"mathmlBuilder$3"),defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:__name((_ref,args)=>{var hasBarLine,{parser:parser24,funcName:funcName}=_ref,numer=args[0],denom=args[1],leftDelim=null,rightDelim=null,size4="auto";switch(funcName){case"\\dfrac":case"\\frac":case"\\tfrac":hasBarLine=!0;break;case"\\\\atopfrac":hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":hasBarLine=!1,leftDelim="(",rightDelim=")";break;case"\\\\bracefrac":hasBarLine=!1,leftDelim="\\{",rightDelim="\\}";break;case"\\\\brackfrac":hasBarLine=!1,leftDelim="[",rightDelim="]";break;default:throw new Error("Unrecognized genfrac command")}switch(funcName){case"\\dfrac":case"\\dbinom":size4="display";break;case"\\tfrac":case"\\tbinom":size4="text"}return{type:"genfrac",mode:parser24.mode,continued:!1,numer:numer,denom:denom,hasBarLine:hasBarLine,leftDelim:leftDelim,rightDelim:rightDelim,size:size4,barSize:null}},"handler"),htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:__name((_ref2,args)=>{var{parser:parser24,funcName:funcName}=_ref2,numer=args[0],denom=args[1];return{type:"genfrac",mode:parser24.mode,continued:!0,numer:numer,denom:denom,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}},"handler")}),defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(_ref3){var replaceWith,{parser:parser24,funcName:funcName,token:token2}=_ref3;switch(funcName){case"\\over":replaceWith="\\frac";break;case"\\choose":replaceWith="\\binom";break;case"\\atop":replaceWith="\\\\atopfrac";break;case"\\brace":replaceWith="\\\\bracefrac";break;case"\\brack":replaceWith="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:parser24.mode,replaceWith:replaceWith,token:token2}}}),stylArray=["display","text","script","scriptscript"],delimFromValue=__name(function(delimString){var delim=null;return delimString.length>0&&(delim="."===(delim=delimString)?null:delim),delim},"delimFromValue"),defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(_ref4,args){var hasBarLine,{parser:parser24}=_ref4,numer=args[4],denom=args[5],leftNode=normalizeArgument(args[0]),leftDelim="atom"===leftNode.type&&"open"===leftNode.family?delimFromValue(leftNode.text):null,rightNode=normalizeArgument(args[1]),rightDelim="atom"===rightNode.type&&"close"===rightNode.family?delimFromValue(rightNode.text):null,barNode=assertNodeType(args[2],"size"),barSize=null;hasBarLine=!!barNode.isBlank||(barSize=barNode.value).number>0;var size4="auto",styl=args[3];if("ordgroup"===styl.type){if(styl.body.length>0){var textOrd=assertNodeType(styl.body[0],"textord");size4=stylArray[Number(textOrd.text)]}}else styl=assertNodeType(styl,"textord"),size4=stylArray[Number(styl.text)];return{type:"genfrac",mode:parser24.mode,numer:numer,denom:denom,continued:!1,hasBarLine:hasBarLine,barSize:barSize,leftDelim:leftDelim,rightDelim:rightDelim,size:size4}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(_ref5,args){var{parser:parser24,funcName:funcName,token:token2}=_ref5;return{type:"infix",mode:parser24.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(args[0],"size").value,token:token2}}}),defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:__name((_ref6,args)=>{var{parser:parser24,funcName:funcName}=_ref6,numer=args[0],barSize=assert(assertNodeType(args[1],"infix").size),denom=args[2],hasBarLine=barSize.number>0;return{type:"genfrac",mode:parser24.mode,numer:numer,denom:denom,continued:!1,hasBarLine:hasBarLine,barSize:barSize,leftDelim:null,rightDelim:null,size:"auto"}},"handler"),htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3}),htmlBuilder$3=__name((grp,options2)=>{var supSubGroup,group2,style3=options2.style;"supsub"===grp.type?(supSubGroup=grp.sup?buildGroup$1(grp.sup,options2.havingStyle(style3.sup()),options2):buildGroup$1(grp.sub,options2.havingStyle(style3.sub()),options2),group2=assertNodeType(grp.base,"horizBrace")):group2=assertNodeType(grp,"horizBrace");var vlist,body=buildGroup$1(group2.base,options2.havingBaseStyle(Style$1.DISPLAY)),braceBody=stretchy.svgSpan(group2,options2);if(group2.isOver?(vlist=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:body},{type:"kern",size:.1},{type:"elem",elem:braceBody}]},options2)).children[0].children[0].children[1].classes.push("svg-align"):(vlist=buildCommon.makeVList({positionType:"bottom",positionData:body.depth+.1+braceBody.height,children:[{type:"elem",elem:braceBody},{type:"kern",size:.1},{type:"elem",elem:body}]},options2)).children[0].children[0].children[0].classes.push("svg-align"),supSubGroup){var vSpan=buildCommon.makeSpan(["mord",group2.isOver?"mover":"munder"],[vlist],options2);vlist=group2.isOver?buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:vSpan},{type:"kern",size:.2},{type:"elem",elem:supSubGroup}]},options2):buildCommon.makeVList({positionType:"bottom",positionData:vSpan.depth+.2+supSubGroup.height+supSubGroup.depth,children:[{type:"elem",elem:supSubGroup},{type:"kern",size:.2},{type:"elem",elem:vSpan}]},options2)}return buildCommon.makeSpan(["mord",group2.isOver?"mover":"munder"],[vlist],options2)},"htmlBuilder$3"),mathmlBuilder$2=__name((group2,options2)=>{var accentNode=stretchy.mathMLnode(group2.label);return new mathMLTree.MathNode(group2.isOver?"mover":"munder",[buildGroup2(group2.base,options2),accentNode])},"mathmlBuilder$2"),defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(_ref,args){var{parser:parser24,funcName:funcName}=_ref;return{type:"horizBrace",mode:parser24.mode,label:funcName,isOver:/^\\over/.test(funcName),base:args[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2}),defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:__name((_ref,args)=>{var{parser:parser24}=_ref,body=args[1],href=assertNodeType(args[0],"url").url;return parser24.settings.isTrusted({command:"\\href",url:href})?{type:"href",mode:parser24.mode,href:href,body:ordargument(body)}:parser24.formatUnsupportedCmd("\\href")},"handler"),htmlBuilder:__name((group2,options2)=>{var elements2=buildExpression$1(group2.body,options2,!1);return buildCommon.makeAnchor(group2.href,[],elements2,options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var math2=buildExpressionRow(group2.body,options2);return math2 instanceof MathNode||(math2=new MathNode("mrow",[math2])),math2.setAttribute("href",group2.href),math2},"mathmlBuilder")}),defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:__name((_ref2,args)=>{var{parser:parser24}=_ref2,href=assertNodeType(args[0],"url").url;if(!parser24.settings.isTrusted({command:"\\url",url:href}))return parser24.formatUnsupportedCmd("\\url");for(var chars=[],i2=0;i2<href.length;i2++){var c3=href[i2];"~"===c3&&(c3="\\textasciitilde"),chars.push({type:"textord",mode:"text",text:c3})}var body={type:"text",mode:parser24.mode,font:"\\texttt",body:chars};return{type:"href",mode:parser24.mode,href:href,body:ordargument(body)}},"handler")}),defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(_ref,args){var{parser:parser24}=_ref;return{type:"hbox",mode:parser24.mode,body:ordargument(args[0])}},htmlBuilder(group2,options2){var elements2=buildExpression$1(group2.body,options2,!1);return buildCommon.makeFragment(elements2)},mathmlBuilder:(group2,options2)=>new mathMLTree.MathNode("mrow",buildExpression2(group2.body,options2))}),defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:__name((_ref,args)=>{var trustContext,{parser:parser24,funcName:funcName,token:token2}=_ref,value2=assertNodeType(args[0],"raw").string,body=args[1];parser24.settings.strict&&parser24.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var attributes={};switch(funcName){case"\\htmlClass":attributes.class=value2,trustContext={command:"\\htmlClass",class:value2};break;case"\\htmlId":attributes.id=value2,trustContext={command:"\\htmlId",id:value2};break;case"\\htmlStyle":attributes.style=value2,trustContext={command:"\\htmlStyle",style:value2};break;case"\\htmlData":for(var data5=value2.split(","),i2=0;i2<data5.length;i2++){var keyVal=data5[i2].split("=");if(2!==keyVal.length)throw new ParseError("Error parsing key-value for \\htmlData");attributes["data-"+keyVal[0].trim()]=keyVal[1].trim()}trustContext={command:"\\htmlData",attributes:attributes};break;default:throw new Error("Unrecognized html command")}return parser24.settings.isTrusted(trustContext)?{type:"html",mode:parser24.mode,attributes:attributes,body:ordargument(body)}:parser24.formatUnsupportedCmd(funcName)},"handler"),htmlBuilder:__name((group2,options2)=>{var elements2=buildExpression$1(group2.body,options2,!1),classes3=["enclosing"];group2.attributes.class&&classes3.push(...group2.attributes.class.trim().split(/\s+/));var span=buildCommon.makeSpan(classes3,elements2,options2);for(var attr in group2.attributes)"class"!==attr&&group2.attributes.hasOwnProperty(attr)&&span.setAttribute(attr,group2.attributes[attr]);return span},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>buildExpressionRow(group2.body,options2),"mathmlBuilder")}),defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:__name((_ref,args)=>{var{parser:parser24}=_ref;return{type:"htmlmathml",mode:parser24.mode,html:ordargument(args[0]),mathml:ordargument(args[1])}},"handler"),htmlBuilder:__name((group2,options2)=>{var elements2=buildExpression$1(group2.html,options2,!1);return buildCommon.makeFragment(elements2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>buildExpressionRow(group2.mathml,options2),"mathmlBuilder")}),sizeData=__name(function(str2){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(str2))return{number:+str2,unit:"bp"};var match2=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(str2);if(!match2)throw new ParseError("Invalid size: '"+str2+"' in \\includegraphics");var data5={number:+(match2[1]+match2[2]),unit:match2[3]};if(!validUnit(data5))throw new ParseError("Invalid unit: '"+data5.unit+"' in \\includegraphics.");return data5},"sizeData"),defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:__name((_ref,args,optArgs)=>{var{parser:parser24}=_ref,width3={number:0,unit:"em"},height2={number:.9,unit:"em"},totalheight={number:0,unit:"em"},alt="";if(optArgs[0])for(var attributes=assertNodeType(optArgs[0],"raw").string.split(","),i2=0;i2<attributes.length;i2++){var keyVal=attributes[i2].split("=");if(2===keyVal.length){var str2=keyVal[1].trim();switch(keyVal[0].trim()){case"alt":alt=str2;break;case"width":width3=sizeData(str2);break;case"height":height2=sizeData(str2);break;case"totalheight":totalheight=sizeData(str2);break;default:throw new ParseError("Invalid key: '"+keyVal[0]+"' in \\includegraphics.")}}}var src=assertNodeType(args[0],"url").url;return""===alt&&(alt=(alt=(alt=src).replace(/^.*[\\/]/,"")).substring(0,alt.lastIndexOf("."))),parser24.settings.isTrusted({command:"\\includegraphics",url:src})?{type:"includegraphics",mode:parser24.mode,alt:alt,width:width3,height:height2,totalheight:totalheight,src:src}:parser24.formatUnsupportedCmd("\\includegraphics")},"handler"),htmlBuilder:__name((group2,options2)=>{var height2=calculateSize2(group2.height,options2),depth=0;group2.totalheight.number>0&&(depth=calculateSize2(group2.totalheight,options2)-height2);var width3=0;group2.width.number>0&&(width3=calculateSize2(group2.width,options2));var style3={height:makeEm(height2+depth)};width3>0&&(style3.width=makeEm(width3)),depth>0&&(style3.verticalAlign=makeEm(-depth));var node2=new Img(group2.src,group2.alt,style3);return node2.height=height2,node2.depth=depth,node2},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var node2=new mathMLTree.MathNode("mglyph",[]);node2.setAttribute("alt",group2.alt);var height2=calculateSize2(group2.height,options2),depth=0;if(group2.totalheight.number>0&&(depth=calculateSize2(group2.totalheight,options2)-height2,node2.setAttribute("valign",makeEm(-depth))),node2.setAttribute("height",makeEm(height2+depth)),group2.width.number>0){var width3=calculateSize2(group2.width,options2);node2.setAttribute("width",makeEm(width3))}return node2.setAttribute("src",group2.src),node2},"mathmlBuilder")}),defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(_ref,args){var{parser:parser24,funcName:funcName}=_ref,size4=assertNodeType(args[0],"size");if(parser24.settings.strict){var mathFunction="m"===funcName[1],muUnit="mu"===size4.value.unit;mathFunction?(muUnit||parser24.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+funcName+" supports only mu units, not "+size4.value.unit+" units"),"math"!==parser24.mode&&parser24.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+funcName+" works only in math mode")):muUnit&&parser24.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+funcName+" doesn't support mu units")}return{type:"kern",mode:parser24.mode,dimension:size4.value}},htmlBuilder:(group2,options2)=>buildCommon.makeGlue(group2.dimension,options2),mathmlBuilder(group2,options2){var dimension=calculateSize2(group2.dimension,options2);return new mathMLTree.SpaceNode(dimension)}}),defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:__name((_ref,args)=>{var{parser:parser24,funcName:funcName}=_ref,body=args[0];return{type:"lap",mode:parser24.mode,alignment:funcName.slice(5),body:body}},"handler"),htmlBuilder:__name((group2,options2)=>{var inner2;"clap"===group2.alignment?(inner2=buildCommon.makeSpan([],[buildGroup$1(group2.body,options2)]),inner2=buildCommon.makeSpan(["inner"],[inner2],options2)):inner2=buildCommon.makeSpan(["inner"],[buildGroup$1(group2.body,options2)]);var fix=buildCommon.makeSpan(["fix"],[]),node2=buildCommon.makeSpan([group2.alignment],[inner2,fix],options2),strut=buildCommon.makeSpan(["strut"]);return strut.style.height=makeEm(node2.height+node2.depth),node2.depth&&(strut.style.verticalAlign=makeEm(-node2.depth)),node2.children.unshift(strut),node2=buildCommon.makeSpan(["thinbox"],[node2],options2),buildCommon.makeSpan(["mord","vbox"],[node2],options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var node2=new mathMLTree.MathNode("mpadded",[buildGroup2(group2.body,options2)]);if("rlap"!==group2.alignment){var offset="llap"===group2.alignment?"-1":"-0.5";node2.setAttribute("lspace",offset+"width")}return node2.setAttribute("width","0px"),node2},"mathmlBuilder")}),defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(_ref,args){var{funcName:funcName,parser:parser24}=_ref,outerMode=parser24.mode;parser24.switchMode("math");var close2="\\("===funcName?"\\)":"$",body=parser24.parseExpression(!1,close2);return parser24.expect(close2),parser24.switchMode(outerMode),{type:"styling",mode:parser24.mode,style:"text",body:body}}}),defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(context,args){throw new ParseError("Mismatched "+context.funcName)}}),chooseMathStyle=__name((group2,options2)=>{switch(options2.style.size){case Style$1.DISPLAY.size:return group2.display;case Style$1.TEXT.size:return group2.text;case Style$1.SCRIPT.size:return group2.script;case Style$1.SCRIPTSCRIPT.size:return group2.scriptscript;default:return group2.text}},"chooseMathStyle"),defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:__name((_ref,args)=>{var{parser:parser24}=_ref;return{type:"mathchoice",mode:parser24.mode,display:ordargument(args[0]),text:ordargument(args[1]),script:ordargument(args[2]),scriptscript:ordargument(args[3])}},"handler"),htmlBuilder:__name((group2,options2)=>{var body=chooseMathStyle(group2,options2),elements2=buildExpression$1(body,options2,!1);return buildCommon.makeFragment(elements2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var body=chooseMathStyle(group2,options2);return buildExpressionRow(body,options2)},"mathmlBuilder")}),assembleSupSub=__name((base,supGroup,subGroup,options2,style3,slant,baseShift)=>{base=buildCommon.makeSpan([],[base]);var sub2,sup2,finalGroup,subIsSingleCharacter=subGroup&&utils.isCharacterBox(subGroup);if(supGroup){var elem=buildGroup$1(supGroup,options2.havingStyle(style3.sup()),options2);sup2={elem:elem,kern:Math.max(options2.fontMetrics().bigOpSpacing1,options2.fontMetrics().bigOpSpacing3-elem.depth)}}if(subGroup){var _elem=buildGroup$1(subGroup,options2.havingStyle(style3.sub()),options2);sub2={elem:_elem,kern:Math.max(options2.fontMetrics().bigOpSpacing2,options2.fontMetrics().bigOpSpacing4-_elem.height)}}if(sup2&&sub2){var bottom2=options2.fontMetrics().bigOpSpacing5+sub2.elem.height+sub2.elem.depth+sub2.kern+base.depth+baseShift;finalGroup=buildCommon.makeVList({positionType:"bottom",positionData:bottom2,children:[{type:"kern",size:options2.fontMetrics().bigOpSpacing5},{type:"elem",elem:sub2.elem,marginLeft:makeEm(-slant)},{type:"kern",size:sub2.kern},{type:"elem",elem:base},{type:"kern",size:sup2.kern},{type:"elem",elem:sup2.elem,marginLeft:makeEm(slant)},{type:"kern",size:options2.fontMetrics().bigOpSpacing5}]},options2)}else if(sub2){var top2=base.height-baseShift;finalGroup=buildCommon.makeVList({positionType:"top",positionData:top2,children:[{type:"kern",size:options2.fontMetrics().bigOpSpacing5},{type:"elem",elem:sub2.elem,marginLeft:makeEm(-slant)},{type:"kern",size:sub2.kern},{type:"elem",elem:base}]},options2)}else{if(!sup2)return base;var _bottom=base.depth+baseShift;finalGroup=buildCommon.makeVList({positionType:"bottom",positionData:_bottom,children:[{type:"elem",elem:base},{type:"kern",size:sup2.kern},{type:"elem",elem:sup2.elem,marginLeft:makeEm(slant)},{type:"kern",size:options2.fontMetrics().bigOpSpacing5}]},options2)}var parts=[finalGroup];if(sub2&&0!==slant&&!subIsSingleCharacter){var spacer=buildCommon.makeSpan(["mspace"],[],options2);spacer.style.marginRight=makeEm(slant),parts.unshift(spacer)}return buildCommon.makeSpan(["mop","op-limits"],parts,options2)},"assembleSupSub"),noSuccessor=["\\smallint"],htmlBuilder$2=__name((grp,options2)=>{var supGroup,subGroup,group2,hasLimits=!1;"supsub"===grp.type?(supGroup=grp.sup,subGroup=grp.sub,group2=assertNodeType(grp.base,"op"),hasLimits=!0):group2=assertNodeType(grp,"op");var base,style3=options2.style,large=!1;if(style3.size===Style$1.DISPLAY.size&&group2.symbol&&!utils.contains(noSuccessor,group2.name)&&(large=!0),group2.symbol){var fontName=large?"Size2-Regular":"Size1-Regular",stash="";if("\\oiint"!==group2.name&&"\\oiiint"!==group2.name||(stash=group2.name.slice(1),group2.name="oiint"===stash?"\\iint":"\\iiint"),base=buildCommon.makeSymbol(group2.name,fontName,"math",options2,["mop","op-symbol",large?"large-op":"small-op"]),stash.length>0){var italic=base.italic,oval=buildCommon.staticSvg(stash+"Size"+(large?"2":"1"),options2);base=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:base,shift:0},{type:"elem",elem:oval,shift:large?.08:0}]},options2),group2.name="\\"+stash,base.classes.unshift("mop"),base.italic=italic}}else if(group2.body){var inner2=buildExpression$1(group2.body,options2,!0);1===inner2.length&&inner2[0]instanceof SymbolNode?(base=inner2[0]).classes[0]="mop":base=buildCommon.makeSpan(["mop"],inner2,options2)}else{for(var output2=[],i2=1;i2<group2.name.length;i2++)output2.push(buildCommon.mathsym(group2.name[i2],group2.mode,options2));base=buildCommon.makeSpan(["mop"],output2,options2)}var baseShift=0,slant=0;return(base instanceof SymbolNode||"\\oiint"===group2.name||"\\oiiint"===group2.name)&&!group2.suppressBaseShift&&(baseShift=(base.height-base.depth)/2-options2.fontMetrics().axisHeight,slant=base.italic),hasLimits?assembleSupSub(base,supGroup,subGroup,options2,style3,slant,baseShift):(baseShift&&(base.style.position="relative",base.style.top=makeEm(baseShift)),base)},"htmlBuilder$2"),mathmlBuilder$1=__name((group2,options2)=>{var node2;if(group2.symbol)node2=new MathNode("mo",[makeText(group2.name,group2.mode)]),utils.contains(noSuccessor,group2.name)&&node2.setAttribute("largeop","false");else if(group2.body)node2=new MathNode("mo",buildExpression2(group2.body,options2));else{node2=new MathNode("mi",[new TextNode(group2.name.slice(1))]);var operator=new MathNode("mo",[makeText("⁡","text")]);node2=group2.parentIsSupSub?new MathNode("mrow",[node2,operator]):newDocumentFragment([node2,operator])}return node2},"mathmlBuilder$1"),singleCharBigOps={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"},defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:__name((_ref,args)=>{var{parser:parser24,funcName:funcName}=_ref,fName=funcName;return 1===fName.length&&(fName=singleCharBigOps[fName]),{type:"op",mode:parser24.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:fName}},"handler"),htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:__name((_ref2,args)=>{var{parser:parser24}=_ref2,body=args[0];return{type:"op",mode:parser24.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(body)}},"handler"),htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),singleCharIntegrals={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"},defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(_ref3){var{parser:parser24,funcName:funcName}=_ref3;return{type:"op",mode:parser24.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:funcName}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(_ref4){var{parser:parser24,funcName:funcName}=_ref4;return{type:"op",mode:parser24.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:funcName}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(_ref5){var{parser:parser24,funcName:funcName}=_ref5,fName=funcName;return 1===fName.length&&(fName=singleCharIntegrals[fName]),{type:"op",mode:parser24.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:fName}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1}),htmlBuilder$1=__name((grp,options2)=>{var supGroup,subGroup,group2,base,hasLimits=!1;if("supsub"===grp.type?(supGroup=grp.sup,subGroup=grp.sub,group2=assertNodeType(grp.base,"operatorname"),hasLimits=!0):group2=assertNodeType(grp,"operatorname"),group2.body.length>0){for(var body=group2.body.map(child2=>{var childText=child2.text;return"string"==typeof childText?{type:"textord",mode:child2.mode,text:childText}:child2}),expression=buildExpression$1(body,options2.withFont("mathrm"),!0),i2=0;i2<expression.length;i2++){var child=expression[i2];child instanceof SymbolNode&&(child.text=child.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}base=buildCommon.makeSpan(["mop"],expression,options2)}else base=buildCommon.makeSpan(["mop"],[],options2);return hasLimits?assembleSupSub(base,supGroup,subGroup,options2,options2.style,0,0):base},"htmlBuilder$1"),mathmlBuilder2=__name((group2,options2)=>{for(var expression=buildExpression2(group2.body,options2.withFont("mathrm")),isAllString=!0,i2=0;i2<expression.length;i2++){var node2=expression[i2];if(node2 instanceof mathMLTree.SpaceNode);else if(node2 instanceof mathMLTree.MathNode)switch(node2.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var child=node2.children[0];1===node2.children.length&&child instanceof mathMLTree.TextNode?child.text=child.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):isAllString=!1;break;default:isAllString=!1}else isAllString=!1}if(isAllString){var word=expression.map(node3=>node3.toText()).join("");expression=[new mathMLTree.TextNode(word)]}var identifier2=new mathMLTree.MathNode("mi",expression);identifier2.setAttribute("mathvariant","normal");var operator=new mathMLTree.MathNode("mo",[makeText("⁡","text")]);return group2.parentIsSupSub?new mathMLTree.MathNode("mrow",[identifier2,operator]):mathMLTree.newDocumentFragment([identifier2,operator])},"mathmlBuilder"),defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:__name((_ref,args)=>{var{parser:parser24,funcName:funcName}=_ref,body=args[0];return{type:"operatorname",mode:parser24.mode,body:ordargument(body),alwaysHandleSupSub:"\\operatornamewithlimits"===funcName,limits:!1,parentIsSupSub:!1}},"handler"),htmlBuilder:htmlBuilder$1,mathmlBuilder:mathmlBuilder2}),defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),defineFunctionBuilders({type:"ordgroup",htmlBuilder:(group2,options2)=>group2.semisimple?buildCommon.makeFragment(buildExpression$1(group2.body,options2,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(group2.body,options2,!0),options2),mathmlBuilder:(group2,options2)=>buildExpressionRow(group2.body,options2,!0)}),defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(_ref,args){var{parser:parser24}=_ref,body=args[0];return{type:"overline",mode:parser24.mode,body:body}},htmlBuilder(group2,options2){var innerGroup=buildGroup$1(group2.body,options2.havingCrampedStyle()),line2=buildCommon.makeLineSpan("overline-line",options2),defaultRuleThickness=options2.fontMetrics().defaultRuleThickness,vlist=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:innerGroup},{type:"kern",size:3*defaultRuleThickness},{type:"elem",elem:line2},{type:"kern",size:defaultRuleThickness}]},options2);return buildCommon.makeSpan(["mord","overline"],[vlist],options2)},mathmlBuilder(group2,options2){var operator=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("‾")]);operator.setAttribute("stretchy","true");var node2=new mathMLTree.MathNode("mover",[buildGroup2(group2.body,options2),operator]);return node2.setAttribute("accent","true"),node2}}),defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:__name((_ref,args)=>{var{parser:parser24}=_ref,body=args[0];return{type:"phantom",mode:parser24.mode,body:ordargument(body)}},"handler"),htmlBuilder:__name((group2,options2)=>{var elements2=buildExpression$1(group2.body,options2.withPhantom(),!1);return buildCommon.makeFragment(elements2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var inner2=buildExpression2(group2.body,options2);return new mathMLTree.MathNode("mphantom",inner2)},"mathmlBuilder")}),defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:__name((_ref2,args)=>{var{parser:parser24}=_ref2,body=args[0];return{type:"hphantom",mode:parser24.mode,body:body}},"handler"),htmlBuilder:__name((group2,options2)=>{var node2=buildCommon.makeSpan([],[buildGroup$1(group2.body,options2.withPhantom())]);if(node2.height=0,node2.depth=0,node2.children)for(var i2=0;i2<node2.children.length;i2++)node2.children[i2].height=0,node2.children[i2].depth=0;return node2=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:node2}]},options2),buildCommon.makeSpan(["mord"],[node2],options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var inner2=buildExpression2(ordargument(group2.body),options2),phantom=new mathMLTree.MathNode("mphantom",inner2),node2=new mathMLTree.MathNode("mpadded",[phantom]);return node2.setAttribute("height","0px"),node2.setAttribute("depth","0px"),node2},"mathmlBuilder")}),defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:__name((_ref3,args)=>{var{parser:parser24}=_ref3,body=args[0];return{type:"vphantom",mode:parser24.mode,body:body}},"handler"),htmlBuilder:__name((group2,options2)=>{var inner2=buildCommon.makeSpan(["inner"],[buildGroup$1(group2.body,options2.withPhantom())]),fix=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[inner2,fix],options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var inner2=buildExpression2(ordargument(group2.body),options2),phantom=new mathMLTree.MathNode("mphantom",inner2),node2=new mathMLTree.MathNode("mpadded",[phantom]);return node2.setAttribute("width","0px"),node2},"mathmlBuilder")}),defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(_ref,args){var{parser:parser24}=_ref,amount=assertNodeType(args[0],"size").value,body=args[1];return{type:"raisebox",mode:parser24.mode,dy:amount,body:body}},htmlBuilder(group2,options2){var body=buildGroup$1(group2.body,options2),dy=calculateSize2(group2.dy,options2);return buildCommon.makeVList({positionType:"shift",positionData:-dy,children:[{type:"elem",elem:body}]},options2)},mathmlBuilder(group2,options2){var node2=new mathMLTree.MathNode("mpadded",[buildGroup2(group2.body,options2)]),dy=group2.dy.number+group2.dy.unit;return node2.setAttribute("voffset",dy),node2}}),defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(_ref){var{parser:parser24}=_ref;return{type:"internal",mode:parser24.mode}}}),defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(_ref,args,optArgs){var{parser:parser24}=_ref,shift2=optArgs[0],width3=assertNodeType(args[0],"size"),height2=assertNodeType(args[1],"size");return{type:"rule",mode:parser24.mode,shift:shift2&&assertNodeType(shift2,"size").value,width:width3.value,height:height2.value}},htmlBuilder(group2,options2){var rule=buildCommon.makeSpan(["mord","rule"],[],options2),width3=calculateSize2(group2.width,options2),height2=calculateSize2(group2.height,options2),shift2=group2.shift?calculateSize2(group2.shift,options2):0;return rule.style.borderRightWidth=makeEm(width3),rule.style.borderTopWidth=makeEm(height2),rule.style.bottom=makeEm(shift2),rule.width=width3,rule.height=height2+shift2,rule.depth=-shift2,rule.maxFontSize=1.125*height2*options2.sizeMultiplier,rule},mathmlBuilder(group2,options2){var width3=calculateSize2(group2.width,options2),height2=calculateSize2(group2.height,options2),shift2=group2.shift?calculateSize2(group2.shift,options2):0,color2=options2.color&&options2.getColor()||"black",rule=new mathMLTree.MathNode("mspace");rule.setAttribute("mathbackground",color2),rule.setAttribute("width",makeEm(width3)),rule.setAttribute("height",makeEm(height2));var wrapper=new mathMLTree.MathNode("mpadded",[rule]);return shift2>=0?wrapper.setAttribute("height",makeEm(shift2)):(wrapper.setAttribute("height",makeEm(shift2)),wrapper.setAttribute("depth",makeEm(-shift2))),wrapper.setAttribute("voffset",makeEm(shift2)),wrapper}}),__name(sizingGroup,"sizingGroup"),sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder2=__name((group2,options2)=>{var newOptions=options2.havingSize(group2.size);return sizingGroup(group2.body,newOptions,options2)},"htmlBuilder"),defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:__name((_ref,args)=>{var{breakOnTokenText:breakOnTokenText,funcName:funcName,parser:parser24}=_ref,body=parser24.parseExpression(!1,breakOnTokenText);return{type:"sizing",mode:parser24.mode,size:sizeFuncs.indexOf(funcName)+1,body:body}},"handler"),htmlBuilder:htmlBuilder2,mathmlBuilder:__name((group2,options2)=>{var newOptions=options2.havingSize(group2.size),inner2=buildExpression2(group2.body,newOptions),node2=new mathMLTree.MathNode("mstyle",inner2);return node2.setAttribute("mathsize",makeEm(newOptions.sizeMultiplier)),node2},"mathmlBuilder")}),defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:__name((_ref,args,optArgs)=>{var{parser:parser24}=_ref,smashHeight=!1,smashDepth=!1,tbArg=optArgs[0]&&assertNodeType(optArgs[0],"ordgroup");if(tbArg)for(var letter="",i2=0;i2<tbArg.body.length;++i2){if("t"===(letter=tbArg.body[i2].text))smashHeight=!0;else{if("b"!==letter){smashHeight=!1,smashDepth=!1;break}smashDepth=!0}}else smashHeight=!0,smashDepth=!0;var body=args[0];return{type:"smash",mode:parser24.mode,body:body,smashHeight:smashHeight,smashDepth:smashDepth}},"handler"),htmlBuilder:__name((group2,options2)=>{var node2=buildCommon.makeSpan([],[buildGroup$1(group2.body,options2)]);if(!group2.smashHeight&&!group2.smashDepth)return node2;if(group2.smashHeight&&(node2.height=0,node2.children))for(var i2=0;i2<node2.children.length;i2++)node2.children[i2].height=0;if(group2.smashDepth&&(node2.depth=0,node2.children))for(var _i=0;_i<node2.children.length;_i++)node2.children[_i].depth=0;var smashedNode=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:node2}]},options2);return buildCommon.makeSpan(["mord"],[smashedNode],options2)},"htmlBuilder"),mathmlBuilder:__name((group2,options2)=>{var node2=new mathMLTree.MathNode("mpadded",[buildGroup2(group2.body,options2)]);return group2.smashHeight&&node2.setAttribute("height","0px"),group2.smashDepth&&node2.setAttribute("depth","0px"),node2},"mathmlBuilder")}),defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(_ref,args,optArgs){var{parser:parser24}=_ref,index=optArgs[0],body=args[0];return{type:"sqrt",mode:parser24.mode,body:body,index:index}},htmlBuilder(group2,options2){var inner2=buildGroup$1(group2.body,options2.havingCrampedStyle());0===inner2.height&&(inner2.height=options2.fontMetrics().xHeight),inner2=buildCommon.wrapFragment(inner2,options2);var theta=options2.fontMetrics().defaultRuleThickness,phi2=theta;options2.style.id<Style$1.TEXT.id&&(phi2=options2.fontMetrics().xHeight);var lineClearance=theta+phi2/4,minDelimiterHeight=inner2.height+inner2.depth+lineClearance+theta,{span:img,ruleWidth:ruleWidth,advanceWidth:advanceWidth}=delimiter.sqrtImage(minDelimiterHeight,options2),delimDepth=img.height-ruleWidth;delimDepth>inner2.height+inner2.depth+lineClearance&&(lineClearance=(lineClearance+delimDepth-inner2.height-inner2.depth)/2);var imgShift=img.height-inner2.height-lineClearance-ruleWidth;inner2.style.paddingLeft=makeEm(advanceWidth);var body=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:inner2,wrapperClasses:["svg-align"]},{type:"kern",size:-(inner2.height+imgShift)},{type:"elem",elem:img},{type:"kern",size:ruleWidth}]},options2);if(group2.index){var newOptions=options2.havingStyle(Style$1.SCRIPTSCRIPT),rootm=buildGroup$1(group2.index,newOptions,options2),toShift=.6*(body.height-body.depth),rootVList=buildCommon.makeVList({positionType:"shift",positionData:-toShift,children:[{type:"elem",elem:rootm}]},options2),rootVListWrap=buildCommon.makeSpan(["root"],[rootVList]);return buildCommon.makeSpan(["mord","sqrt"],[rootVListWrap,body],options2)}return buildCommon.makeSpan(["mord","sqrt"],[body],options2)},mathmlBuilder(group2,options2){var{body:body,index:index}=group2;return index?new mathMLTree.MathNode("mroot",[buildGroup2(body,options2),buildGroup2(index,options2)]):new mathMLTree.MathNode("msqrt",[buildGroup2(body,options2)])}}),styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(_ref,args){var{breakOnTokenText:breakOnTokenText,funcName:funcName,parser:parser24}=_ref,body=parser24.parseExpression(!0,breakOnTokenText),style3=funcName.slice(1,funcName.length-5);return{type:"styling",mode:parser24.mode,style:style3,body:body}},htmlBuilder(group2,options2){var newStyle=styleMap[group2.style],newOptions=options2.havingStyle(newStyle).withFont("");return sizingGroup(group2.body,newOptions,options2)},mathmlBuilder(group2,options2){var newStyle=styleMap[group2.style],newOptions=options2.havingStyle(newStyle),inner2=buildExpression2(group2.body,newOptions),node2=new mathMLTree.MathNode("mstyle",inner2),attr={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[group2.style];return node2.setAttribute("scriptlevel",attr[0]),node2.setAttribute("displaystyle",attr[1]),node2}}),htmlBuilderDelegate=__name(function(group2,options2){var base=group2.base;return base?"op"===base.type?base.limits&&(options2.style.size===Style$1.DISPLAY.size||base.alwaysHandleSupSub)?htmlBuilder$2:null:"operatorname"===base.type?base.alwaysHandleSupSub&&(options2.style.size===Style$1.DISPLAY.size||base.limits)?htmlBuilder$1:null:"accent"===base.type?utils.isCharacterBox(base.base)?htmlBuilder$a:null:"horizBrace"===base.type&&!group2.sub===base.isOver?htmlBuilder$3:null:null},"htmlBuilderDelegate"),defineFunctionBuilders({type:"supsub",htmlBuilder(group2,options2){var builderDelegate=htmlBuilderDelegate(group2,options2);if(builderDelegate)return builderDelegate(group2,options2);var supm,subm,minSupShift,{base:valueBase,sup:valueSup,sub:valueSub}=group2,base=buildGroup$1(valueBase,options2),metrics=options2.fontMetrics(),supShift=0,subShift=0,isCharacterBox3=valueBase&&utils.isCharacterBox(valueBase);if(valueSup){var newOptions=options2.havingStyle(options2.style.sup());supm=buildGroup$1(valueSup,newOptions,options2),isCharacterBox3||(supShift=base.height-newOptions.fontMetrics().supDrop*newOptions.sizeMultiplier/options2.sizeMultiplier)}if(valueSub){var _newOptions=options2.havingStyle(options2.style.sub());subm=buildGroup$1(valueSub,_newOptions,options2),isCharacterBox3||(subShift=base.depth+_newOptions.fontMetrics().subDrop*_newOptions.sizeMultiplier/options2.sizeMultiplier)}minSupShift=options2.style===Style$1.DISPLAY?metrics.sup1:options2.style.cramped?metrics.sup3:metrics.sup2;var supsub,multiplier=options2.sizeMultiplier,marginRight=makeEm(.5/metrics.ptPerEm/multiplier),marginLeft=null;if(subm){var isOiint=group2.base&&"op"===group2.base.type&&group2.base.name&&("\\oiint"===group2.base.name||"\\oiiint"===group2.base.name);(base instanceof SymbolNode||isOiint)&&(marginLeft=makeEm(-base.italic))}if(supm&&subm){supShift=Math.max(supShift,minSupShift,supm.depth+.25*metrics.xHeight),subShift=Math.max(subShift,metrics.sub2);var maxWidth2=4*metrics.defaultRuleThickness;if(supShift-supm.depth-(subm.height-subShift)<maxWidth2){subShift=maxWidth2-(supShift-supm.depth)+subm.height;var psi=.8*metrics.xHeight-(supShift-supm.depth);psi>0&&(supShift+=psi,subShift-=psi)}var vlistElem=[{type:"elem",elem:subm,shift:subShift,marginRight:marginRight,marginLeft:marginLeft},{type:"elem",elem:supm,shift:-supShift,marginRight:marginRight}];supsub=buildCommon.makeVList({positionType:"individualShift",children:vlistElem},options2)}else if(subm){subShift=Math.max(subShift,metrics.sub1,subm.height-.8*metrics.xHeight);var _vlistElem=[{type:"elem",elem:subm,marginLeft:marginLeft,marginRight:marginRight}];supsub=buildCommon.makeVList({positionType:"shift",positionData:subShift,children:_vlistElem},options2)}else{if(!supm)throw new Error("supsub must have either sup or sub.");supShift=Math.max(supShift,minSupShift,supm.depth+.25*metrics.xHeight),supsub=buildCommon.makeVList({positionType:"shift",positionData:-supShift,children:[{type:"elem",elem:supm,marginRight:marginRight}]},options2)}var mclass=getTypeOfDomTree(base,"right")||"mord";return buildCommon.makeSpan([mclass],[base,buildCommon.makeSpan(["msupsub"],[supsub])],options2)},mathmlBuilder(group2,options2){var isOver,isBrace=!1;group2.base&&"horizBrace"===group2.base.type&&!!group2.sup===group2.base.isOver&&(isBrace=!0,isOver=group2.base.isOver),!group2.base||"op"!==group2.base.type&&"operatorname"!==group2.base.type||(group2.base.parentIsSupSub=!0);var nodeType3,children2=[buildGroup2(group2.base,options2)];if(group2.sub&&children2.push(buildGroup2(group2.sub,options2)),group2.sup&&children2.push(buildGroup2(group2.sup,options2)),isBrace)nodeType3=isOver?"mover":"munder";else if(group2.sub)if(group2.sup){var _base2=group2.base;nodeType3=_base2&&"op"===_base2.type&&_base2.limits&&options2.style===Style$1.DISPLAY||_base2&&"operatorname"===_base2.type&&_base2.alwaysHandleSupSub&&(options2.style===Style$1.DISPLAY||_base2.limits)?"munderover":"msubsup"}else{var _base=group2.base;nodeType3=_base&&"op"===_base.type&&_base.limits&&(options2.style===Style$1.DISPLAY||_base.alwaysHandleSupSub)||_base&&"operatorname"===_base.type&&_base.alwaysHandleSupSub&&(_base.limits||options2.style===Style$1.DISPLAY)?"munder":"msub"}else{var base=group2.base;nodeType3=base&&"op"===base.type&&base.limits&&(options2.style===Style$1.DISPLAY||base.alwaysHandleSupSub)||base&&"operatorname"===base.type&&base.alwaysHandleSupSub&&(base.limits||options2.style===Style$1.DISPLAY)?"mover":"msup"}return new mathMLTree.MathNode(nodeType3,children2)}}),defineFunctionBuilders({type:"atom",htmlBuilder:(group2,options2)=>buildCommon.mathsym(group2.text,group2.mode,options2,["m"+group2.family]),mathmlBuilder(group2,options2){var node2=new mathMLTree.MathNode("mo",[makeText(group2.text,group2.mode)]);if("bin"===group2.family){var variant=getVariant(group2,options2);"bold-italic"===variant&&node2.setAttribute("mathvariant",variant)}else"punct"===group2.family?node2.setAttribute("separator","true"):"open"!==group2.family&&"close"!==group2.family||node2.setAttribute("stretchy","false");return node2}}),defaultVariant={mi:"italic",mn:"normal",mtext:"normal"},defineFunctionBuilders({type:"mathord",htmlBuilder:(group2,options2)=>buildCommon.makeOrd(group2,options2,"mathord"),mathmlBuilder(group2,options2){var node2=new mathMLTree.MathNode("mi",[makeText(group2.text,group2.mode,options2)]),variant=getVariant(group2,options2)||"italic";return variant!==defaultVariant[node2.type]&&node2.setAttribute("mathvariant",variant),node2}}),defineFunctionBuilders({type:"textord",htmlBuilder:(group2,options2)=>buildCommon.makeOrd(group2,options2,"textord"),mathmlBuilder(group2,options2){var node2,text4=makeText(group2.text,group2.mode,options2),variant=getVariant(group2,options2)||"normal";return node2="text"===group2.mode?new mathMLTree.MathNode("mtext",[text4]):/[0-9]/.test(group2.text)?new mathMLTree.MathNode("mn",[text4]):"\\prime"===group2.text?new mathMLTree.MathNode("mo",[text4]):new mathMLTree.MathNode("mi",[text4]),variant!==defaultVariant[node2.type]&&node2.setAttribute("mathvariant",variant),node2}}),cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}},defineFunctionBuilders({type:"spacing",htmlBuilder(group2,options2){if(regularSpace.hasOwnProperty(group2.text)){var className=regularSpace[group2.text].className||"";if("text"===group2.mode){var ord=buildCommon.makeOrd(group2,options2,"textord");return ord.classes.push(className),ord}return buildCommon.makeSpan(["mspace",className],[buildCommon.mathsym(group2.text,group2.mode,options2)],options2)}if(cssSpace.hasOwnProperty(group2.text))return buildCommon.makeSpan(["mspace",cssSpace[group2.text]],[],options2);throw new ParseError('Unknown type of space "'+group2.text+'"')},mathmlBuilder(group2,options2){if(!regularSpace.hasOwnProperty(group2.text)){if(cssSpace.hasOwnProperty(group2.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+group2.text+'"')}return new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode(" ")])}}),pad=__name(()=>{var padNode=new mathMLTree.MathNode("mtd",[]);return padNode.setAttribute("width","50%"),padNode},"pad"),defineFunctionBuilders({type:"tag",mathmlBuilder(group2,options2){var table=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(group2.body,options2)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(group2.tag,options2)])])]);return table.setAttribute("width","100%"),table}}),textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=__name((group2,options2)=>{var font=group2.font;return font?textFontFamilies[font]?options2.withTextFontFamily(textFontFamilies[font]):textFontWeights[font]?options2.withTextFontWeight(textFontWeights[font]):"\\emph"===font?"textit"===options2.fontShape?options2.withTextFontShape("textup"):options2.withTextFontShape("textit"):options2.withTextFontShape(textFontShapes[font]):options2},"optionsWithFont"),defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(_ref,args){var{parser:parser24,funcName:funcName}=_ref,body=args[0];return{type:"text",mode:parser24.mode,body:ordargument(body),font:funcName}},htmlBuilder(group2,options2){var newOptions=optionsWithFont(group2,options2),inner2=buildExpression$1(group2.body,newOptions,!0);return buildCommon.makeSpan(["mord","text"],inner2,newOptions)},mathmlBuilder(group2,options2){var newOptions=optionsWithFont(group2,options2);return buildExpressionRow(group2.body,newOptions)}}),defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(_ref,args){var{parser:parser24}=_ref;return{type:"underline",mode:parser24.mode,body:args[0]}},htmlBuilder(group2,options2){var innerGroup=buildGroup$1(group2.body,options2),line2=buildCommon.makeLineSpan("underline-line",options2),defaultRuleThickness=options2.fontMetrics().defaultRuleThickness,vlist=buildCommon.makeVList({positionType:"top",positionData:innerGroup.height,children:[{type:"kern",size:defaultRuleThickness},{type:"elem",elem:line2},{type:"kern",size:3*defaultRuleThickness},{type:"elem",elem:innerGroup}]},options2);return buildCommon.makeSpan(["mord","underline"],[vlist],options2)},mathmlBuilder(group2,options2){var operator=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("‾")]);operator.setAttribute("stretchy","true");var node2=new mathMLTree.MathNode("munder",[buildGroup2(group2.body,options2),operator]);return node2.setAttribute("accentunder","true"),node2}}),defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(_ref,args){var{parser:parser24}=_ref;return{type:"vcenter",mode:parser24.mode,body:args[0]}},htmlBuilder(group2,options2){var body=buildGroup$1(group2.body,options2),axisHeight=options2.fontMetrics().axisHeight,dy=.5*(body.height-axisHeight-(body.depth+axisHeight));return buildCommon.makeVList({positionType:"shift",positionData:dy,children:[{type:"elem",elem:body}]},options2)},mathmlBuilder:(group2,options2)=>new mathMLTree.MathNode("mpadded",[buildGroup2(group2.body,options2)],["vcenter"])}),defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(context,args,optArgs){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(group2,options2){for(var text4=makeVerb(group2),body=[],newOptions=options2.havingStyle(options2.style.text()),i2=0;i2<text4.length;i2++){var c3=text4[i2];"~"===c3&&(c3="\\textasciitilde"),body.push(buildCommon.makeSymbol(c3,"Typewriter-Regular",group2.mode,newOptions,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(newOptions.sizingClasses(options2)),buildCommon.tryCombineChars(body),newOptions)},mathmlBuilder(group2,options2){var text4=new mathMLTree.TextNode(makeVerb(group2)),node2=new mathMLTree.MathNode("mtext",[text4]);return node2.setAttribute("mathvariant","monospace"),node2}}),makeVerb=__name(group2=>group2.body.replace(/ /g,group2.star?"␣":" "),"makeVerb"),functions=_functions,combiningDiacriticalMarksEndRegex=new RegExp("[̀-ͯ]+$"),Lexer=class{static{__name(this,"Lexer")}constructor(input,settings){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=input,this.settings=settings,this.tokenRegex=new RegExp("([ \r\n\t]+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-‧‪-퟿豈-￿][̀-ͯ]*|[\ud800-\udbff][\udc00-\udfff][̀-ͯ]*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14,"~":13}}setCatcode(char2,code){this.catcodes[char2]=code}lex(){var input=this.input,pos=this.tokenRegex.lastIndex;if(pos===input.length)return new Token("EOF",new SourceLocation(this,pos,pos));var match2=this.tokenRegex.exec(input);if(null===match2||match2.index!==pos)throw new ParseError("Unexpected character: '"+input[pos]+"'",new Token(input[pos],new SourceLocation(this,pos,pos+1)));var text4=match2[6]||match2[3]||(match2[2]?"\\ ":" ");if(14===this.catcodes[text4]){var nlIndex=input.indexOf("\n",this.tokenRegex.lastIndex);return-1===nlIndex?(this.tokenRegex.lastIndex=input.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=nlIndex+1,this.lex()}return new Token(text4,new SourceLocation(this,pos,this.tokenRegex.lastIndex))}},Namespace=class{static{__name(this,"Namespace")}constructor(builtins,globalMacros){void 0===builtins&&(builtins={}),void 0===globalMacros&&(globalMacros={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=globalMacros,this.builtins=builtins,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var undefs=this.undefStack.pop();for(var undef2 in undefs)undefs.hasOwnProperty(undef2)&&(null==undefs[undef2]?delete this.current[undef2]:this.current[undef2]=undefs[undef2])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(name){return this.current.hasOwnProperty(name)||this.builtins.hasOwnProperty(name)}get(name){return this.current.hasOwnProperty(name)?this.current[name]:this.builtins[name]}set(name,value2,global2){if(void 0===global2&&(global2=!1),global2){for(var i2=0;i2<this.undefStack.length;i2++)delete this.undefStack[i2][name];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][name]=value2)}else{var top2=this.undefStack[this.undefStack.length-1];top2&&!top2.hasOwnProperty(name)&&(top2[name]=this.current[name])}null==value2?delete this.current[name]:this.current[name]=value2}},macros=_macros,defineMacro("\\noexpand",function(context){var t4=context.popToken();return context.isExpandable(t4.text)&&(t4.noexpand=!0,t4.treatAsRelax=!0),{tokens:[t4],numArgs:0}}),defineMacro("\\expandafter",function(context){var t4=context.popToken();return context.expandOnce(!0),{tokens:[t4],numArgs:0}}),defineMacro("\\@firstoftwo",function(context){return{tokens:context.consumeArgs(2)[0],numArgs:0}}),defineMacro("\\@secondoftwo",function(context){return{tokens:context.consumeArgs(2)[1],numArgs:0}}),defineMacro("\\@ifnextchar",function(context){var args=context.consumeArgs(3);context.consumeSpaces();var nextToken=context.future();return 1===args[0].length&&args[0][0].text===nextToken.text?{tokens:args[1],numArgs:0}:{tokens:args[2],numArgs:0}}),defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),defineMacro("\\TextOrMath",function(context){var args=context.consumeArgs(2);return"text"===context.mode?{tokens:args[0],numArgs:0}:{tokens:args[1],numArgs:0}}),digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},defineMacro("\\char",function(context){var base,token2=context.popToken(),number7="";if("'"===token2.text)base=8,token2=context.popToken();else if('"'===token2.text)base=16,token2=context.popToken();else if("`"===token2.text)if("\\"===(token2=context.popToken()).text[0])number7=token2.text.charCodeAt(1);else{if("EOF"===token2.text)throw new ParseError("\\char` missing argument");number7=token2.text.charCodeAt(0)}else base=10;if(base){if(null==(number7=digitToNumber[token2.text])||number7>=base)throw new ParseError("Invalid base-"+base+" digit "+token2.text);for(var digit;null!=(digit=digitToNumber[context.future().text])&&digit<base;)number7*=base,number7+=digit,context.popToken()}return"\\@char{"+number7+"}"}),newcommand=__name((context,existsOK,nonexistsOK,skipIfExists)=>{var arg=context.consumeArg().tokens;if(1!==arg.length)throw new ParseError("\\newcommand's first argument must be a macro name");var name=arg[0].text,exists=context.isDefined(name);if(exists&&!existsOK)throw new ParseError("\\newcommand{"+name+"} attempting to redefine "+name+"; use \\renewcommand");if(!exists&&!nonexistsOK)throw new ParseError("\\renewcommand{"+name+"} when command "+name+" does not yet exist; use \\newcommand");var numArgs=0;if(1===(arg=context.consumeArg().tokens).length&&"["===arg[0].text){for(var argText="",token2=context.expandNextToken();"]"!==token2.text&&"EOF"!==token2.text;)argText+=token2.text,token2=context.expandNextToken();if(!argText.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+argText);numArgs=parseInt(argText),arg=context.consumeArg().tokens}return exists&&skipIfExists||context.macros.set(name,{tokens:arg,numArgs:numArgs}),""},"newcommand"),defineMacro("\\newcommand",context=>newcommand(context,!1,!0,!1)),defineMacro("\\renewcommand",context=>newcommand(context,!0,!1,!1)),defineMacro("\\providecommand",context=>newcommand(context,!0,!0,!0)),defineMacro("\\message",context=>{var arg=context.consumeArgs(1)[0];return console.log(arg.reverse().map(token2=>token2.text).join("")),""}),defineMacro("\\errmessage",context=>{var arg=context.consumeArgs(1)[0];return console.error(arg.reverse().map(token2=>token2.text).join("")),""}),defineMacro("\\show",context=>{var tok=context.popToken(),name=tok.text;return console.log(tok,context.macros.get(name),functions[name],symbols.math[name],symbols.text[name]),""}),defineMacro("\\bgroup","{"),defineMacro("\\egroup","}"),defineMacro("~","\\nobreakspace"),defineMacro("\\lq","`"),defineMacro("\\rq","'"),defineMacro("\\aa","\\r a"),defineMacro("\\AA","\\r A"),defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),defineMacro("ℬ","\\mathscr{B}"),defineMacro("ℰ","\\mathscr{E}"),defineMacro("ℱ","\\mathscr{F}"),defineMacro("ℋ","\\mathscr{H}"),defineMacro("ℐ","\\mathscr{I}"),defineMacro("ℒ","\\mathscr{L}"),defineMacro("ℳ","\\mathscr{M}"),defineMacro("ℛ","\\mathscr{R}"),defineMacro("ℭ","\\mathfrak{C}"),defineMacro("ℌ","\\mathfrak{H}"),defineMacro("ℨ","\\mathfrak{Z}"),defineMacro("\\Bbbk","\\Bbb{k}"),defineMacro("·","\\cdotp"),defineMacro("\\llap","\\mathllap{\\textrm{#1}}"),defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}"),defineMacro("\\clap","\\mathclap{\\textrm{#1}}"),defineMacro("\\mathstrut","\\vphantom{(}"),defineMacro("\\underbar","\\underline{\\text{#1}}"),defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),defineMacro("\\ne","\\neq"),defineMacro("≠","\\neq"),defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),defineMacro("∉","\\notin"),defineMacro("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),defineMacro("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),defineMacro("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),defineMacro("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),defineMacro("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),defineMacro("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),defineMacro("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),defineMacro("⟂","\\perp"),defineMacro("‼","\\mathclose{!\\mkern-0.8mu!}"),defineMacro("∌","\\notni"),defineMacro("⌜","\\ulcorner"),defineMacro("⌝","\\urcorner"),defineMacro("⌞","\\llcorner"),defineMacro("⌟","\\lrcorner"),defineMacro("©","\\copyright"),defineMacro("®","\\textregistered"),defineMacro("️","\\textregistered"),defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),defineMacro("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),defineMacro("⋮","\\vdots"),defineMacro("\\varGamma","\\mathit{\\Gamma}"),defineMacro("\\varDelta","\\mathit{\\Delta}"),defineMacro("\\varTheta","\\mathit{\\Theta}"),defineMacro("\\varLambda","\\mathit{\\Lambda}"),defineMacro("\\varXi","\\mathit{\\Xi}"),defineMacro("\\varPi","\\mathit{\\Pi}"),defineMacro("\\varSigma","\\mathit{\\Sigma}"),defineMacro("\\varUpsilon","\\mathit{\\Upsilon}"),defineMacro("\\varPhi","\\mathit{\\Phi}"),defineMacro("\\varPsi","\\mathit{\\Psi}"),defineMacro("\\varOmega","\\mathit{\\Omega}"),defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}"),defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),defineMacro("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),defineMacro("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}"),dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"},defineMacro("\\dots",function(context){var thedots="\\dotso",next3=context.expandAfterFuture().text;return next3 in dotsByToken?thedots=dotsByToken[next3]:("\\not"===next3.slice(0,4)||next3 in symbols.math&&utils.contains(["bin","rel"],symbols.math[next3].group))&&(thedots="\\dotsb"),thedots}),spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0},defineMacro("\\dotso",function(context){return context.future().text in spaceAfterDots?"\\ldots\\,":"\\ldots"}),defineMacro("\\dotsc",function(context){var next3=context.future().text;return next3 in spaceAfterDots&&","!==next3?"\\ldots\\,":"\\ldots"}),defineMacro("\\cdots",function(context){return context.future().text in spaceAfterDots?"\\@cdots\\,":"\\@cdots"}),defineMacro("\\dotsb","\\cdots"),defineMacro("\\dotsm","\\cdots"),defineMacro("\\dotsi","\\!\\cdots"),defineMacro("\\dotsx","\\ldots\\,"),defineMacro("\\DOTSI","\\relax"),defineMacro("\\DOTSB","\\relax"),defineMacro("\\DOTSX","\\relax"),defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),defineMacro("\\,","\\tmspace+{3mu}{.1667em}"),defineMacro("\\thinspace","\\,"),defineMacro("\\>","\\mskip{4mu}"),defineMacro("\\:","\\tmspace+{4mu}{.2222em}"),defineMacro("\\medspace","\\:"),defineMacro("\\;","\\tmspace+{5mu}{.2777em}"),defineMacro("\\thickspace","\\;"),defineMacro("\\!","\\tmspace-{3mu}{.1667em}"),defineMacro("\\negthinspace","\\!"),defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}"),defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}"),defineMacro("\\enspace","\\kern.5em "),defineMacro("\\enskip","\\hskip.5em\\relax"),defineMacro("\\quad","\\hskip1em\\relax"),defineMacro("\\qquad","\\hskip2em\\relax"),defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren"),defineMacro("\\tag@paren","\\tag@literal{({#1})}"),defineMacro("\\tag@literal",context=>{if(context.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),defineMacro("\\newline","\\\\\\relax"),defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}"),defineMacro("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+(latexRaiseA=makeEm(fontMetricsData["Main-Regular"]["T".charCodeAt(0)][1]-.7*fontMetricsData["Main-Regular"]["A".charCodeAt(0)][1]))+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),defineMacro("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace"),defineMacro("\\@hspace","\\hskip #1\\relax"),defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),defineMacro("\\ordinarycolon",":"),defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),defineMacro("∷","\\dblcolon"),defineMacro("∹","\\eqcolon"),defineMacro("≔","\\coloneqq"),defineMacro("≕","\\eqqcolon"),defineMacro("⩴","\\Coloneqq"),defineMacro("\\ratio","\\vcentcolon"),defineMacro("\\coloncolon","\\dblcolon"),defineMacro("\\colonequals","\\coloneqq"),defineMacro("\\coloncolonequals","\\Coloneqq"),defineMacro("\\equalscolon","\\eqqcolon"),defineMacro("\\equalscoloncolon","\\Eqqcolon"),defineMacro("\\colonminus","\\coloneq"),defineMacro("\\coloncolonminus","\\Coloneq"),defineMacro("\\minuscolon","\\eqcolon"),defineMacro("\\minuscoloncolon","\\Eqcolon"),defineMacro("\\coloncolonapprox","\\Colonapprox"),defineMacro("\\coloncolonsim","\\Colonsim"),defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),defineMacro("\\imath","\\html@mathml{\\@imath}{ı}"),defineMacro("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),defineMacro("⟦","\\llbracket"),defineMacro("⟧","\\rrbracket"),defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),defineMacro("⦃","\\lBrace"),defineMacro("⦄","\\rBrace"),defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),defineMacro("⦵","\\minuso"),defineMacro("\\darr","\\downarrow"),defineMacro("\\dArr","\\Downarrow"),defineMacro("\\Darr","\\Downarrow"),defineMacro("\\lang","\\langle"),defineMacro("\\rang","\\rangle"),defineMacro("\\uarr","\\uparrow"),defineMacro("\\uArr","\\Uparrow"),defineMacro("\\Uarr","\\Uparrow"),defineMacro("\\N","\\mathbb{N}"),defineMacro("\\R","\\mathbb{R}"),defineMacro("\\Z","\\mathbb{Z}"),defineMacro("\\alef","\\aleph"),defineMacro("\\alefsym","\\aleph"),defineMacro("\\Alpha","\\mathrm{A}"),defineMacro("\\Beta","\\mathrm{B}"),defineMacro("\\bull","\\bullet"),defineMacro("\\Chi","\\mathrm{X}"),defineMacro("\\clubs","\\clubsuit"),defineMacro("\\cnums","\\mathbb{C}"),defineMacro("\\Complex","\\mathbb{C}"),defineMacro("\\Dagger","\\ddagger"),defineMacro("\\diamonds","\\diamondsuit"),defineMacro("\\empty","\\emptyset"),defineMacro("\\Epsilon","\\mathrm{E}"),defineMacro("\\Eta","\\mathrm{H}"),defineMacro("\\exist","\\exists"),defineMacro("\\harr","\\leftrightarrow"),defineMacro("\\hArr","\\Leftrightarrow"),defineMacro("\\Harr","\\Leftrightarrow"),defineMacro("\\hearts","\\heartsuit"),defineMacro("\\image","\\Im"),defineMacro("\\infin","\\infty"),defineMacro("\\Iota","\\mathrm{I}"),defineMacro("\\isin","\\in"),defineMacro("\\Kappa","\\mathrm{K}"),defineMacro("\\larr","\\leftarrow"),defineMacro("\\lArr","\\Leftarrow"),defineMacro("\\Larr","\\Leftarrow"),defineMacro("\\lrarr","\\leftrightarrow"),defineMacro("\\lrArr","\\Leftrightarrow"),defineMacro("\\Lrarr","\\Leftrightarrow"),defineMacro("\\Mu","\\mathrm{M}"),defineMacro("\\natnums","\\mathbb{N}"),defineMacro("\\Nu","\\mathrm{N}"),defineMacro("\\Omicron","\\mathrm{O}"),defineMacro("\\plusmn","\\pm"),defineMacro("\\rarr","\\rightarrow"),defineMacro("\\rArr","\\Rightarrow"),defineMacro("\\Rarr","\\Rightarrow"),defineMacro("\\real","\\Re"),defineMacro("\\reals","\\mathbb{R}"),defineMacro("\\Reals","\\mathbb{R}"),defineMacro("\\Rho","\\mathrm{P}"),defineMacro("\\sdot","\\cdot"),defineMacro("\\sect","\\S"),defineMacro("\\spades","\\spadesuit"),defineMacro("\\sub","\\subset"),defineMacro("\\sube","\\subseteq"),defineMacro("\\supe","\\supseteq"),defineMacro("\\Tau","\\mathrm{T}"),defineMacro("\\thetasym","\\vartheta"),defineMacro("\\weierp","\\wp"),defineMacro("\\Zeta","\\mathrm{Z}"),defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),defineMacro("\\bra","\\mathinner{\\langle{#1}|}"),defineMacro("\\ket","\\mathinner{|{#1}\\rangle}"),defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}"),defineMacro("\\Bra","\\left\\langle#1\\right|"),defineMacro("\\Ket","\\left|#1\\right\\rangle"),defineMacro("\\bra@ket",(braketHelper=__name(one4=>context=>{var left3=context.consumeArg().tokens,middle=context.consumeArg().tokens,middleDouble=context.consumeArg().tokens,right3=context.consumeArg().tokens,oldMiddle=context.macros.get("|"),oldMiddleDouble=context.macros.get("\\|");context.macros.beginGroup();var midMacro=__name(double=>context2=>{one4&&(context2.macros.set("|",oldMiddle),middleDouble.length&&context2.macros.set("\\|",oldMiddleDouble));var doubled=double;!double&&middleDouble.length&&("|"===context2.future().text&&(context2.popToken(),doubled=!0));return{tokens:doubled?middleDouble:middle,numArgs:0}},"midMacro");context.macros.set("|",midMacro(!1)),middleDouble.length&&context.macros.set("\\|",midMacro(!0));var arg=context.consumeArg().tokens,expanded=context.expandTokens([...right3,...arg,...left3]);return context.macros.endGroup(),{tokens:expanded.reverse(),numArgs:0}},"braketHelper"))(!1)),defineMacro("\\bra@set",braketHelper(!0)),defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),defineMacro("\\angln","{\\angl n}"),defineMacro("\\blue","\\textcolor{##6495ed}{#1}"),defineMacro("\\orange","\\textcolor{##ffa500}{#1}"),defineMacro("\\pink","\\textcolor{##ff00af}{#1}"),defineMacro("\\red","\\textcolor{##df0030}{#1}"),defineMacro("\\green","\\textcolor{##28ae7b}{#1}"),defineMacro("\\gray","\\textcolor{gray}{#1}"),defineMacro("\\purple","\\textcolor{##9d38bd}{#1}"),defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}"),defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}"),defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}"),defineMacro("\\blueD","\\textcolor{##11accd}{#1}"),defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}"),defineMacro("\\tealA","\\textcolor{##94fff5}{#1}"),defineMacro("\\tealB","\\textcolor{##26edd5}{#1}"),defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}"),defineMacro("\\tealD","\\textcolor{##01a995}{#1}"),defineMacro("\\tealE","\\textcolor{##208170}{#1}"),defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}"),defineMacro("\\greenB","\\textcolor{##8af281}{#1}"),defineMacro("\\greenC","\\textcolor{##74cf70}{#1}"),defineMacro("\\greenD","\\textcolor{##1fab54}{#1}"),defineMacro("\\greenE","\\textcolor{##0d923f}{#1}"),defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}"),defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}"),defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}"),defineMacro("\\goldD","\\textcolor{##e07d10}{#1}"),defineMacro("\\goldE","\\textcolor{##a75a05}{#1}"),defineMacro("\\redA","\\textcolor{##fca9a9}{#1}"),defineMacro("\\redB","\\textcolor{##ff8482}{#1}"),defineMacro("\\redC","\\textcolor{##f9685d}{#1}"),defineMacro("\\redD","\\textcolor{##e84d39}{#1}"),defineMacro("\\redE","\\textcolor{##bc2612}{#1}"),defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}"),defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}"),defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}"),defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}"),defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}"),defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}"),defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}"),defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}"),defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}"),defineMacro("\\purpleE","\\textcolor{##543b78}{#1}"),defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}"),defineMacro("\\mintB","\\textcolor{##edf2df}{#1}"),defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}"),defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}"),defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}"),defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}"),defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}"),defineMacro("\\grayE","\\textcolor{##babec2}{#1}"),defineMacro("\\grayF","\\textcolor{##888d93}{#1}"),defineMacro("\\grayG","\\textcolor{##626569}{#1}"),defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}"),defineMacro("\\grayI","\\textcolor{##21242c}{#1}"),defineMacro("\\kaBlue","\\textcolor{##314453}{#1}"),defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}"),implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},MacroExpander=class{static{__name(this,"MacroExpander")}constructor(input,settings,mode){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=settings,this.expansionCount=0,this.feed(input),this.macros=new Namespace(macros,settings.macros),this.mode=mode,this.stack=[]}feed(input){this.lexer=new Lexer(input,this.settings)}switchMode(newMode){this.mode=newMode}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(token2){this.stack.push(token2)}pushTokens(tokens2){this.stack.push(...tokens2)}scanArgument(isOptional){var start3,end2,tokens2;if(isOptional){if(this.consumeSpaces(),"["!==this.future().text)return null;start3=this.popToken(),({tokens:tokens2,end:end2}=this.consumeArg(["]"]))}else({tokens:tokens2,start:start3,end:end2}=this.consumeArg());return this.pushToken(new Token("EOF",end2.loc)),this.pushTokens(tokens2),start3.range(end2,"")}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(delims){var tokens2=[],isDelimited=delims&&delims.length>0;isDelimited||this.consumeSpaces();var tok,start3=this.future(),depth=0,match2=0;do{if(tok=this.popToken(),tokens2.push(tok),"{"===tok.text)++depth;else if("}"===tok.text){if(-1===--depth)throw new ParseError("Extra }",tok)}else if("EOF"===tok.text)throw new ParseError("Unexpected end of input in a macro argument, expected '"+(delims&&isDelimited?delims[match2]:"}")+"'",tok);if(delims&&isDelimited)if((0===depth||1===depth&&"{"===delims[match2])&&tok.text===delims[match2]){if(++match2===delims.length){tokens2.splice(-match2,match2);break}}else match2=0}while(0!==depth||isDelimited);return"{"===start3.text&&"}"===tokens2[tokens2.length-1].text&&(tokens2.pop(),tokens2.shift()),tokens2.reverse(),{tokens:tokens2,start:start3,end:tok}}consumeArgs(numArgs,delimiters2){if(delimiters2){if(delimiters2.length!==numArgs+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var delims=delimiters2[0],i2=0;i2<delims.length;i2++){var tok=this.popToken();if(delims[i2]!==tok.text)throw new ParseError("Use of the macro doesn't match its definition",tok)}}for(var args=[],_i=0;_i<numArgs;_i++)args.push(this.consumeArg(delimiters2&&delimiters2[_i+1]).tokens);return args}countExpansion(amount){if(this.expansionCount+=amount,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(expandableOnly){var topToken=this.popToken(),name=topToken.text,expansion=topToken.noexpand?null:this._getExpansion(name);if(null==expansion||expandableOnly&&expansion.unexpandable){if(expandableOnly&&null==expansion&&"\\"===name[0]&&!this.isDefined(name))throw new ParseError("Undefined control sequence: "+name);return this.pushToken(topToken),!1}this.countExpansion(1);var tokens2=expansion.tokens,args=this.consumeArgs(expansion.numArgs,expansion.delimiters);if(expansion.numArgs)for(var i2=(tokens2=tokens2.slice()).length-1;i2>=0;--i2){var tok=tokens2[i2];if("#"===tok.text){if(0===i2)throw new ParseError("Incomplete placeholder at end of macro body",tok);if("#"===(tok=tokens2[--i2]).text)tokens2.splice(i2+1,1);else{if(!/^[1-9]$/.test(tok.text))throw new ParseError("Not a valid argument number",tok);tokens2.splice(i2,2,...args[+tok.text-1])}}}return this.pushTokens(tokens2),tokens2.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var token2=this.stack.pop();return token2.treatAsRelax&&(token2.text="\\relax"),token2}throw new Error}expandMacro(name){return this.macros.has(name)?this.expandTokens([new Token(name)]):void 0}expandTokens(tokens2){var output2=[],oldStackLength=this.stack.length;for(this.pushTokens(tokens2);this.stack.length>oldStackLength;)if(!1===this.expandOnce(!0)){var token2=this.stack.pop();token2.treatAsRelax&&(token2.noexpand=!1,token2.treatAsRelax=!1),output2.push(token2)}return this.countExpansion(output2.length),output2}expandMacroAsText(name){var tokens2=this.expandMacro(name);return tokens2?tokens2.map(token2=>token2.text).join(""):tokens2}_getExpansion(name){var definition=this.macros.get(name);if(null==definition)return definition;if(1===name.length){var catcode=this.lexer.catcodes[name];if(null!=catcode&&13!==catcode)return}var expansion="function"==typeof definition?definition(this):definition;if("string"==typeof expansion){var numArgs=0;if(-1!==expansion.indexOf("#"))for(var stripped=expansion.replace(/##/g,"");-1!==stripped.indexOf("#"+(numArgs+1));)++numArgs;for(var bodyLexer=new Lexer(expansion,this.settings),tokens2=[],tok=bodyLexer.lex();"EOF"!==tok.text;)tokens2.push(tok),tok=bodyLexer.lex();return tokens2.reverse(),{tokens:tokens2,numArgs:numArgs}}return expansion}isDefined(name){return this.macros.has(name)||functions.hasOwnProperty(name)||symbols.math.hasOwnProperty(name)||symbols.text.hasOwnProperty(name)||implicitCommands.hasOwnProperty(name)}isExpandable(name){var macro=this.macros.get(name);return null!=macro?"string"==typeof macro||"function"==typeof macro||!macro.unexpandable:functions.hasOwnProperty(name)&&!functions[name].primitive}},unicodeSubRegEx=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,uSubsAndSups=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g","ʰ":"h","ⁱ":"i","ʲ":"j","ᵏ":"k","ˡ":"l","ᵐ":"m","ⁿ":"n","ᵒ":"o","ᵖ":"p","ʳ":"r","ˢ":"s","ᵗ":"t","ᵘ":"u","ᵛ":"v","ʷ":"w","ˣ":"x","ʸ":"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),unicodeAccents={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},unicodeSymbols={"á":"á","à":"à","ä":"ä","ǟ":"ǟ","ã":"ã","ā":"ā","ă":"ă","ắ":"ắ","ằ":"ằ","ẵ":"ẵ","ǎ":"ǎ","â":"â","ấ":"ấ","ầ":"ầ","ẫ":"ẫ","ȧ":"ȧ","ǡ":"ǡ","å":"å","ǻ":"ǻ","ḃ":"ḃ","ć":"ć","ḉ":"ḉ","č":"č","ĉ":"ĉ","ċ":"ċ","ç":"ç","ď":"ď","ḋ":"ḋ","ḑ":"ḑ","é":"é","è":"è","ë":"ë","ẽ":"ẽ","ē":"ē","ḗ":"ḗ","ḕ":"ḕ","ĕ":"ĕ","ḝ":"ḝ","ě":"ě","ê":"ê","ế":"ế","ề":"ề","ễ":"ễ","ė":"ė","ȩ":"ȩ","ḟ":"ḟ","ǵ":"ǵ","ḡ":"ḡ","ğ":"ğ","ǧ":"ǧ","ĝ":"ĝ","ġ":"ġ","ģ":"ģ","ḧ":"ḧ","ȟ":"ȟ","ĥ":"ĥ","ḣ":"ḣ","ḩ":"ḩ","í":"í","ì":"ì","ï":"ï","ḯ":"ḯ","ĩ":"ĩ","ī":"ī","ĭ":"ĭ","ǐ":"ǐ","î":"î","ǰ":"ǰ","ĵ":"ĵ","ḱ":"ḱ","ǩ":"ǩ","ķ":"ķ","ĺ":"ĺ","ľ":"ľ","ļ":"ļ","ḿ":"ḿ","ṁ":"ṁ","ń":"ń","ǹ":"ǹ","ñ":"ñ","ň":"ň","ṅ":"ṅ","ņ":"ņ","ó":"ó","ò":"ò","ö":"ö","ȫ":"ȫ","õ":"õ","ṍ":"ṍ","ṏ":"ṏ","ȭ":"ȭ","ō":"ō","ṓ":"ṓ","ṑ":"ṑ","ŏ":"ŏ","ǒ":"ǒ","ô":"ô","ố":"ố","ồ":"ồ","ỗ":"ỗ","ȯ":"ȯ","ȱ":"ȱ","ő":"ő","ṕ":"ṕ","ṗ":"ṗ","ŕ":"ŕ","ř":"ř","ṙ":"ṙ","ŗ":"ŗ","ś":"ś","ṥ":"ṥ","š":"š","ṧ":"ṧ","ŝ":"ŝ","ṡ":"ṡ","ş":"ş","ẗ":"ẗ","ť":"ť","ṫ":"ṫ","ţ":"ţ","ú":"ú","ù":"ù","ü":"ü","ǘ":"ǘ","ǜ":"ǜ","ǖ":"ǖ","ǚ":"ǚ","ũ":"ũ","ṹ":"ṹ","ū":"ū","ṻ":"ṻ","ŭ":"ŭ","ǔ":"ǔ","û":"û","ů":"ů","ű":"ű","ṽ":"ṽ","ẃ":"ẃ","ẁ":"ẁ","ẅ":"ẅ","ŵ":"ŵ","ẇ":"ẇ","ẘ":"ẘ","ẍ":"ẍ","ẋ":"ẋ","ý":"ý","ỳ":"ỳ","ÿ":"ÿ","ỹ":"ỹ","ȳ":"ȳ","ŷ":"ŷ","ẏ":"ẏ","ẙ":"ẙ","ź":"ź","ž":"ž","ẑ":"ẑ","ż":"ż","Á":"Á","À":"À","Ä":"Ä","Ǟ":"Ǟ","Ã":"Ã","Ā":"Ā","Ă":"Ă","Ắ":"Ắ","Ằ":"Ằ","Ẵ":"Ẵ","Ǎ":"Ǎ","Â":"Â","Ấ":"Ấ","Ầ":"Ầ","Ẫ":"Ẫ","Ȧ":"Ȧ","Ǡ":"Ǡ","Å":"Å","Ǻ":"Ǻ","Ḃ":"Ḃ","Ć":"Ć","Ḉ":"Ḉ","Č":"Č","Ĉ":"Ĉ","Ċ":"Ċ","Ç":"Ç","Ď":"Ď","Ḋ":"Ḋ","Ḑ":"Ḑ","É":"É","È":"È","Ë":"Ë","Ẽ":"Ẽ","Ē":"Ē","Ḗ":"Ḗ","Ḕ":"Ḕ","Ĕ":"Ĕ","Ḝ":"Ḝ","Ě":"Ě","Ê":"Ê","Ế":"Ế","Ề":"Ề","Ễ":"Ễ","Ė":"Ė","Ȩ":"Ȩ","Ḟ":"Ḟ","Ǵ":"Ǵ","Ḡ":"Ḡ","Ğ":"Ğ","Ǧ":"Ǧ","Ĝ":"Ĝ","Ġ":"Ġ","Ģ":"Ģ","Ḧ":"Ḧ","Ȟ":"Ȟ","Ĥ":"Ĥ","Ḣ":"Ḣ","Ḩ":"Ḩ","Í":"Í","Ì":"Ì","Ï":"Ï","Ḯ":"Ḯ","Ĩ":"Ĩ","Ī":"Ī","Ĭ":"Ĭ","Ǐ":"Ǐ","Î":"Î","İ":"İ","Ĵ":"Ĵ","Ḱ":"Ḱ","Ǩ":"Ǩ","Ķ":"Ķ","Ĺ":"Ĺ","Ľ":"Ľ","Ļ":"Ļ","Ḿ":"Ḿ","Ṁ":"Ṁ","Ń":"Ń","Ǹ":"Ǹ","Ñ":"Ñ","Ň":"Ň","Ṅ":"Ṅ","Ņ":"Ņ","Ó":"Ó","Ò":"Ò","Ö":"Ö","Ȫ":"Ȫ","Õ":"Õ","Ṍ":"Ṍ","Ṏ":"Ṏ","Ȭ":"Ȭ","Ō":"Ō","Ṓ":"Ṓ","Ṑ":"Ṑ","Ŏ":"Ŏ","Ǒ":"Ǒ","Ô":"Ô","Ố":"Ố","Ồ":"Ồ","Ỗ":"Ỗ","Ȯ":"Ȯ","Ȱ":"Ȱ","Ő":"Ő","Ṕ":"Ṕ","Ṗ":"Ṗ","Ŕ":"Ŕ","Ř":"Ř","Ṙ":"Ṙ","Ŗ":"Ŗ","Ś":"Ś","Ṥ":"Ṥ","Š":"Š","Ṧ":"Ṧ","Ŝ":"Ŝ","Ṡ":"Ṡ","Ş":"Ş","Ť":"Ť","Ṫ":"Ṫ","Ţ":"Ţ","Ú":"Ú","Ù":"Ù","Ü":"Ü","Ǘ":"Ǘ","Ǜ":"Ǜ","Ǖ":"Ǖ","Ǚ":"Ǚ","Ũ":"Ũ","Ṹ":"Ṹ","Ū":"Ū","Ṻ":"Ṻ","Ŭ":"Ŭ","Ǔ":"Ǔ","Û":"Û","Ů":"Ů","Ű":"Ű","Ṽ":"Ṽ","Ẃ":"Ẃ","Ẁ":"Ẁ","Ẅ":"Ẅ","Ŵ":"Ŵ","Ẇ":"Ẇ","Ẍ":"Ẍ","Ẋ":"Ẋ","Ý":"Ý","Ỳ":"Ỳ","Ÿ":"Ÿ","Ỹ":"Ỹ","Ȳ":"Ȳ","Ŷ":"Ŷ","Ẏ":"Ẏ","Ź":"Ź","Ž":"Ž","Ẑ":"Ẑ","Ż":"Ż","ά":"ά","ὰ":"ὰ","ᾱ":"ᾱ","ᾰ":"ᾰ","έ":"έ","ὲ":"ὲ","ή":"ή","ὴ":"ὴ","ί":"ί","ὶ":"ὶ","ϊ":"ϊ","ΐ":"ΐ","ῒ":"ῒ","ῑ":"ῑ","ῐ":"ῐ","ό":"ό","ὸ":"ὸ","ύ":"ύ","ὺ":"ὺ","ϋ":"ϋ","ΰ":"ΰ","ῢ":"ῢ","ῡ":"ῡ","ῠ":"ῠ","ώ":"ώ","ὼ":"ὼ","Ύ":"Ύ","Ὺ":"Ὺ","Ϋ":"Ϋ","Ῡ":"Ῡ","Ῠ":"Ῠ","Ώ":"Ώ","Ὼ":"Ὼ"},Parser=class _Parser{static{__name(this,"Parser")}constructor(input,settings){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(input,settings,this.mode),this.settings=settings,this.leftrightDepth=0}expect(text4,consume){if(void 0===consume&&(consume=!0),this.fetch().text!==text4)throw new ParseError("Expected '"+text4+"', got '"+this.fetch().text+"'",this.fetch());consume&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(newMode){this.mode=newMode,this.gullet.switchMode(newMode)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var parse7=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),parse7}finally{this.gullet.endGroups()}}subparse(tokens2){var oldToken=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(tokens2);var parse7=this.parseExpression(!1);return this.expect("}"),this.nextToken=oldToken,parse7}parseExpression(breakOnInfix,breakOnTokenText){for(var body=[];;){"math"===this.mode&&this.consumeSpaces();var lex=this.fetch();if(-1!==_Parser.endOfExpression.indexOf(lex.text))break;if(breakOnTokenText&&lex.text===breakOnTokenText)break;if(breakOnInfix&&functions[lex.text]&&functions[lex.text].infix)break;var atom2=this.parseAtom(breakOnTokenText);if(!atom2)break;"internal"!==atom2.type&&body.push(atom2)}return"text"===this.mode&&this.formLigatures(body),this.handleInfixNodes(body)}handleInfixNodes(body){for(var funcName,overIndex=-1,i2=0;i2<body.length;i2++)if("infix"===body[i2].type){if(-1!==overIndex)throw new ParseError("only one infix operator per group",body[i2].token);overIndex=i2,funcName=body[i2].replaceWith}if(-1!==overIndex&&funcName){var numerNode,denomNode,numerBody=body.slice(0,overIndex),denomBody=body.slice(overIndex+1);return numerNode=1===numerBody.length&&"ordgroup"===numerBody[0].type?numerBody[0]:{type:"ordgroup",mode:this.mode,body:numerBody},denomNode=1===denomBody.length&&"ordgroup"===denomBody[0].type?denomBody[0]:{type:"ordgroup",mode:this.mode,body:denomBody},["\\\\abovefrac"===funcName?this.callFunction(funcName,[numerNode,body[overIndex],denomNode],[]):this.callFunction(funcName,[numerNode,denomNode],[])]}return body}handleSupSubscript(name){var group2,symbolToken=this.fetch(),symbol=symbolToken.text;this.consume(),this.consumeSpaces();do{var _group;group2=this.parseGroup(name)}while("internal"===(null==(_group=group2)?void 0:_group.type));if(!group2)throw new ParseError("Expected group after '"+symbol+"'",symbolToken);return group2}formatUnsupportedCmd(text4){for(var textordArray=[],i2=0;i2<text4.length;i2++)textordArray.push({type:"textord",mode:"text",text:text4[i2]});var textNode={type:"text",mode:this.mode,body:textordArray};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[textNode]}}parseAtom(breakOnTokenText){var superscript,subscript,base=this.parseGroup("atom",breakOnTokenText);if("internal"===(null==base?void 0:base.type))return base;if("text"===this.mode)return base;for(;;){this.consumeSpaces();var lex=this.fetch();if("\\limits"===lex.text||"\\nolimits"===lex.text){if(base&&"op"===base.type){var limits="\\limits"===lex.text;base.limits=limits,base.alwaysHandleSupSub=!0}else{if(!base||"operatorname"!==base.type)throw new ParseError("Limit controls must follow a math operator",lex);base.alwaysHandleSupSub&&(base.limits="\\limits"===lex.text)}this.consume()}else if("^"===lex.text){if(superscript)throw new ParseError("Double superscript",lex);superscript=this.handleSupSubscript("superscript")}else if("_"===lex.text){if(subscript)throw new ParseError("Double subscript",lex);subscript=this.handleSupSubscript("subscript")}else if("'"===lex.text){if(superscript)throw new ParseError("Double superscript",lex);var prime={type:"textord",mode:this.mode,text:"\\prime"},primes=[prime];for(this.consume();"'"===this.fetch().text;)primes.push(prime),this.consume();"^"===this.fetch().text&&primes.push(this.handleSupSubscript("superscript")),superscript={type:"ordgroup",mode:this.mode,body:primes}}else{if(!uSubsAndSups[lex.text])break;var isSub=unicodeSubRegEx.test(lex.text),subsupTokens=[];for(subsupTokens.push(new Token(uSubsAndSups[lex.text])),this.consume();;){var token2=this.fetch().text;if(!uSubsAndSups[token2])break;if(unicodeSubRegEx.test(token2)!==isSub)break;subsupTokens.unshift(new Token(uSubsAndSups[token2])),this.consume()}var body=this.subparse(subsupTokens);isSub?subscript={type:"ordgroup",mode:"math",body:body}:superscript={type:"ordgroup",mode:"math",body:body}}}return superscript||subscript?{type:"supsub",mode:this.mode,base:base,sup:superscript,sub:subscript}:base}parseFunction(breakOnTokenText,name){var token2=this.fetch(),func=token2.text,funcData=functions[func];if(!funcData)return null;if(this.consume(),name&&"atom"!==name&&!funcData.allowedInArgument)throw new ParseError("Got function '"+func+"' with no arguments"+(name?" as "+name:""),token2);if("text"===this.mode&&!funcData.allowedInText)throw new ParseError("Can't use function '"+func+"' in text mode",token2);if("math"===this.mode&&!1===funcData.allowedInMath)throw new ParseError("Can't use function '"+func+"' in math mode",token2);var{args:args,optArgs:optArgs}=this.parseArguments(func,funcData);return this.callFunction(func,args,optArgs,token2,breakOnTokenText)}callFunction(name,args,optArgs,token2,breakOnTokenText){var context={funcName:name,parser:this,token:token2,breakOnTokenText:breakOnTokenText},func=functions[name];if(func&&func.handler)return func.handler(context,args,optArgs);throw new ParseError("No function handler for "+name)}parseArguments(func,funcData){var totalArgs=funcData.numArgs+funcData.numOptionalArgs;if(0===totalArgs)return{args:[],optArgs:[]};for(var args=[],optArgs=[],i2=0;i2<totalArgs;i2++){var argType=funcData.argTypes&&funcData.argTypes[i2],isOptional=i2<funcData.numOptionalArgs;(funcData.primitive&&null==argType||"sqrt"===funcData.type&&1===i2&&null==optArgs[0])&&(argType="primitive");var arg=this.parseGroupOfType("argument to '"+func+"'",argType,isOptional);if(isOptional)optArgs.push(arg);else{if(null==arg)throw new ParseError("Null argument, please report this as a bug");args.push(arg)}}return{args:args,optArgs:optArgs}}parseGroupOfType(name,type3,optional2){switch(type3){case"color":return this.parseColorGroup(optional2);case"size":return this.parseSizeGroup(optional2);case"url":return this.parseUrlGroup(optional2);case"math":case"text":return this.parseArgumentGroup(optional2,type3);case"hbox":var group2=this.parseArgumentGroup(optional2,"text");return null!=group2?{type:"styling",mode:group2.mode,body:[group2],style:"text"}:null;case"raw":var token2=this.parseStringGroup("raw",optional2);return null!=token2?{type:"raw",mode:"text",string:token2.text}:null;case"primitive":if(optional2)throw new ParseError("A primitive argument cannot be optional");var _group2=this.parseGroup(name);if(null==_group2)throw new ParseError("Expected group as "+name,this.fetch());return _group2;case"original":case null:case void 0:return this.parseArgumentGroup(optional2);default:throw new ParseError("Unknown group type as "+name,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(modeName,optional2){var argToken=this.gullet.scanArgument(optional2);if(null==argToken)return null;for(var nextToken,str2="";"EOF"!==(nextToken=this.fetch()).text;)str2+=nextToken.text,this.consume();return this.consume(),argToken.text=str2,argToken}parseRegexGroup(regex2,modeName){for(var nextToken,firstToken=this.fetch(),lastToken=firstToken,str2="";"EOF"!==(nextToken=this.fetch()).text&&regex2.test(str2+nextToken.text);)str2+=(lastToken=nextToken).text,this.consume();if(""===str2)throw new ParseError("Invalid "+modeName+": '"+firstToken.text+"'",firstToken);return firstToken.range(lastToken,str2)}parseColorGroup(optional2){var res=this.parseStringGroup("color",optional2);if(null==res)return null;var match2=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(res.text);if(!match2)throw new ParseError("Invalid color: '"+res.text+"'",res);var color2=match2[0];return/^[0-9a-f]{6}$/i.test(color2)&&(color2="#"+color2),{type:"color-token",mode:this.mode,color:color2}}parseSizeGroup(optional2){var res,isBlank=!1;if(this.gullet.consumeSpaces(),!(res=optional2||"{"===this.gullet.future().text?this.parseStringGroup("size",optional2):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;optional2||0!==res.text.length||(res.text="0pt",isBlank=!0);var match2=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(res.text);if(!match2)throw new ParseError("Invalid size: '"+res.text+"'",res);var data5={number:+(match2[1]+match2[2]),unit:match2[3]};if(!validUnit(data5))throw new ParseError("Invalid unit: '"+data5.unit+"'",res);return{type:"size",mode:this.mode,value:data5,isBlank:isBlank}}parseUrlGroup(optional2){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var res=this.parseStringGroup("url",optional2);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==res)return null;var url=res.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:url}}parseArgumentGroup(optional2,mode){var argToken=this.gullet.scanArgument(optional2);if(null==argToken)return null;var outerMode=this.mode;mode&&this.switchMode(mode),this.gullet.beginGroup();var expression=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var result={type:"ordgroup",mode:this.mode,loc:argToken.loc,body:expression};return mode&&this.switchMode(outerMode),result}parseGroup(name,breakOnTokenText){var result,firstToken=this.fetch(),text4=firstToken.text;if("{"===text4||"\\begingroup"===text4){this.consume();var groupEnd="{"===text4?"}":"\\endgroup";this.gullet.beginGroup();var expression=this.parseExpression(!1,groupEnd),lastToken=this.fetch();this.expect(groupEnd),this.gullet.endGroup(),result={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(firstToken,lastToken),body:expression,semisimple:"\\begingroup"===text4||void 0}}else if(null==(result=this.parseFunction(breakOnTokenText,name)||this.parseSymbol())&&"\\"===text4[0]&&!implicitCommands.hasOwnProperty(text4)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+text4,firstToken);result=this.formatUnsupportedCmd(text4),this.consume()}return result}formLigatures(group2){for(var n2=group2.length-1,i2=0;i2<n2;++i2){var a2=group2[i2],v3=a2.text;"-"===v3&&"-"===group2[i2+1].text&&(i2+1<n2&&"-"===group2[i2+2].text?(group2.splice(i2,3,{type:"textord",mode:"text",loc:SourceLocation.range(a2,group2[i2+2]),text:"---"}),n2-=2):(group2.splice(i2,2,{type:"textord",mode:"text",loc:SourceLocation.range(a2,group2[i2+1]),text:"--"}),n2-=1)),"'"!==v3&&"`"!==v3||group2[i2+1].text!==v3||(group2.splice(i2,2,{type:"textord",mode:"text",loc:SourceLocation.range(a2,group2[i2+1]),text:v3+v3}),n2-=1)}}parseSymbol(){var nucleus=this.fetch(),text4=nucleus.text;if(/^\\verb[^a-zA-Z]/.test(text4)){this.consume();var arg=text4.slice(5),star2="*"===arg.charAt(0);if(star2&&(arg=arg.slice(1)),arg.length<2||arg.charAt(0)!==arg.slice(-1))throw new ParseError("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:arg=arg.slice(1,-1),star:star2}}unicodeSymbols.hasOwnProperty(text4[0])&&!symbols[this.mode][text4[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+text4[0]+'" used in math mode',nucleus),text4=unicodeSymbols[text4[0]]+text4.slice(1));var symbol,match2=combiningDiacriticalMarksEndRegex.exec(text4);if(match2&&("i"===(text4=text4.substring(0,match2.index))?text4="ı":"j"===text4&&(text4="ȷ")),symbols[this.mode][text4]){this.settings.strict&&"math"===this.mode&&"ÐÞþ".indexOf(text4)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+text4[0]+'" used in math mode',nucleus);var s2,group2=symbols[this.mode][text4].group,loc=SourceLocation.range(nucleus);if(ATOMS.hasOwnProperty(group2)){var family=group2;s2={type:"atom",mode:this.mode,family:family,loc:loc,text:text4}}else s2={type:group2,mode:this.mode,loc:loc,text:text4};symbol=s2}else{if(!(text4.charCodeAt(0)>=128))return null;this.settings.strict&&(supportedCodepoint(text4.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+text4[0]+'" used in math mode',nucleus):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+text4[0]+'" ('+text4.charCodeAt(0)+")",nucleus)),symbol={type:"textord",mode:"text",loc:SourceLocation.range(nucleus),text:text4}}if(this.consume(),match2)for(var i2=0;i2<match2[0].length;i2++){var accent2=match2[0][i2];if(!unicodeAccents[accent2])throw new ParseError("Unknown accent ' "+accent2+"'",nucleus);var command=unicodeAccents[accent2][this.mode]||unicodeAccents[accent2].text;if(!command)throw new ParseError("Accent "+accent2+" unsupported in "+this.mode+" mode",nucleus);symbol={type:"accent",mode:this.mode,loc:SourceLocation.range(nucleus),label:command,isStretchy:!1,isShifty:!0,base:symbol}}return symbol}},Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"],parseTree=__name(function(toParse,settings){if(!("string"==typeof toParse||toParse instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var parser24=new Parser(toParse,settings);delete parser24.gullet.macros.current["\\df@tag"];var tree=parser24.parse();if(delete parser24.gullet.macros.current["\\current@color"],delete parser24.gullet.macros.current["\\color"],parser24.gullet.macros.get("\\df@tag")){if(!settings.displayMode)throw new ParseError("\\tag works only in display equations");tree=[{type:"tag",mode:"text",body:tree,tag:parser24.subparse([new Token("\\df@tag")])}]}return tree},"parseTree"),render=__name(function(expression,baseNode,options2){baseNode.textContent="";var node2=renderToDomTree(expression,options2).toNode();baseNode.appendChild(node2)},"render"),"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=__name(function(){throw new ParseError("KaTeX doesn't work in quirks mode.")},"render")),renderToString=__name(function(expression,options2){return renderToDomTree(expression,options2).toMarkup()},"renderToString"),generateParseTree=__name(function(expression,options2){var settings=new Settings(options2);return parseTree(expression,settings)},"generateParseTree"),renderError=__name(function(error3,expression,options2){if(options2.throwOnError||!(error3 instanceof ParseError))throw error3;var node2=buildCommon.makeSpan(["katex-error"],[new SymbolNode(expression)]);return node2.setAttribute("title",error3.toString()),node2.setAttribute("style","color:"+options2.errorColor),node2},"renderError"),katex={version:version="0.16.22",render:render,renderToString:renderToString,ParseError:ParseError,SETTINGS_SCHEMA:SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree=__name(function(expression,options2){var settings=new Settings(options2);try{var tree=parseTree(expression,settings);return buildTree(tree,expression,settings)}catch(error3){return renderError(error3,expression,settings)}},"renderToDomTree"),__renderToHTMLTree:renderToHTMLTree=__name(function(expression,options2){var settings=new Settings(options2);try{var tree=parseTree(expression,settings);return buildHTMLTree(tree,expression,settings)}catch(error3){return renderError(error3,expression,settings)}},"renderToHTMLTree"),__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree:__domTree={Span:Span,Anchor:Anchor,SymbolNode:SymbolNode,SvgNode:SvgNode,PathNode:PathNode,LineNode:LineNode}}}});function setupDompurifyHooks(){purify.addHook("beforeSanitizeAttributes",node2=>{"A"===node2.tagName&&node2.hasAttribute("target")&&node2.setAttribute("data-temp-href-target",node2.getAttribute("target")??"")}),purify.addHook("afterSanitizeAttributes",node2=>{"A"===node2.tagName&&node2.hasAttribute("data-temp-href-target")&&(node2.setAttribute("target",node2.getAttribute("data-temp-href-target")??""),node2.removeAttribute("data-temp-href-target"),"_blank"===node2.getAttribute("target")&&node2.setAttribute("rel","noopener"))})}var unknownIcon,iconsStore,loaderStore,registerIconPacks,getRegisteredIconData,isIconAvailable,getIconSVG,init_common=__esm({"src/diagrams/common/common.ts"(){init_purify_es(),lineBreakRegex=/<br\s*\/?>/gi,getRows=__name(s2=>{if(!s2)return[""];return breakToPlaceholder(s2).replace(/\\n/g,"#br#").split("#br#")},"getRows"),setupDompurifyHooksIfNotSetup=(()=>{let setup=!1;return()=>{setup||(setupDompurifyHooks(),setup=!0)}})(),__name(setupDompurifyHooks,"setupDompurifyHooks"),removeScript=__name(txt=>{setupDompurifyHooksIfNotSetup();return purify.sanitize(txt)},"removeScript"),sanitizeMore=__name((text4,config5)=>{if(!1!==config5.flowchart?.htmlLabels){const level=config5.securityLevel;"antiscript"===level||"strict"===level?text4=removeScript(text4):"loose"!==level&&(text4=(text4=(text4=breakToPlaceholder(text4)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),text4=placeholderToBreak(text4))}return text4},"sanitizeMore"),sanitizeText=__name((text4,config5)=>text4?text4=config5.dompurifyConfig?purify.sanitize(sanitizeMore(text4,config5),config5.dompurifyConfig).toString():purify.sanitize(sanitizeMore(text4,config5),{FORBID_TAGS:["style"]}).toString():text4,"sanitizeText"),sanitizeTextOrArray=__name((a2,config5)=>"string"==typeof a2?sanitizeText(a2,config5):a2.flat().map(x5=>sanitizeText(x5,config5)),"sanitizeTextOrArray"),hasBreaks=__name(text4=>lineBreakRegex.test(text4),"hasBreaks"),splitBreaks=__name(text4=>text4.split(lineBreakRegex),"splitBreaks"),placeholderToBreak=__name(s2=>s2.replace(/#br#/g,"<br/>"),"placeholderToBreak"),breakToPlaceholder=__name(s2=>s2.replace(lineBreakRegex,"#br#"),"breakToPlaceholder"),getUrl=__name(useAbsolute=>{let url="";return useAbsolute&&(url=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,url=CSS.escape(url)),url},"getUrl"),evaluate=__name(val=>!1!==val&&!["false","null","0"].includes(String(val).trim().toLowerCase()),"evaluate"),getMax=__name(function(...values2){const newValues=values2.filter(value2=>!isNaN(value2));return Math.max(...newValues)},"getMax"),getMin=__name(function(...values2){const newValues=values2.filter(value2=>!isNaN(value2));return Math.min(...newValues)},"getMin"),parseGenericTypes=__name(function(input){const inputSets=input.split(/(,)/),output2=[];for(let i2=0;i2<inputSets.length;i2++){let thisSet=inputSets[i2];if(","===thisSet&&i2>0&&i2+1<inputSets.length){const previousSet=inputSets[i2-1],nextSet=inputSets[i2+1];shouldCombineSets(previousSet,nextSet)&&(thisSet=previousSet+","+nextSet,i2++,output2.pop())}output2.push(processSet(thisSet))}return output2.join("")},"parseGenericTypes"),countOccurrence=__name((string3,substring)=>Math.max(0,string3.split(substring).length-1),"countOccurrence"),shouldCombineSets=__name((previousSet,nextSet)=>{const prevCount=countOccurrence(previousSet,"~"),nextCount=countOccurrence(nextSet,"~");return 1===prevCount&&1===nextCount},"shouldCombineSets"),processSet=__name(input=>{const tildeCount=countOccurrence(input,"~");let hasStartingTilde=!1;if(tildeCount<=1)return input;tildeCount%2!=0&&input.startsWith("~")&&(input=input.substring(1),hasStartingTilde=!0);const chars=[...input];let first3=chars.indexOf("~"),last3=chars.lastIndexOf("~");for(;-1!==first3&&-1!==last3&&first3!==last3;)chars[first3]="<",chars[last3]=">",first3=chars.indexOf("~"),last3=chars.lastIndexOf("~");return hasStartingTilde&&chars.unshift("~"),chars.join("")},"processSet"),isMathMLSupported=__name(()=>void 0!==window.MathMLElement,"isMathMLSupported"),katexRegex=/\$\$(.*)\$\$/g,hasKatex=__name(text4=>(text4.match(katexRegex)?.length??0)>0,"hasKatex"),calculateMathMLDimensions=__name(async(text4,config5)=>{const divElem=document.createElement("div");divElem.innerHTML=await renderKatexSanitized(text4,config5),divElem.id="katex-temp",divElem.style.visibility="hidden",divElem.style.position="absolute",divElem.style.top="0";const body=document.querySelector("body");body?.insertAdjacentElement("beforeend",divElem);const dim={width:divElem.clientWidth,height:divElem.clientHeight};return divElem.remove(),dim},"calculateMathMLDimensions"),renderKatexUnsanitized=__name(async(text4,config5)=>{if(!hasKatex(text4))return text4;if(!(isMathMLSupported()||config5.legacyMathML||config5.forceLegacyMathML))return text4.replace(katexRegex,"MathML is unsupported in this environment.");{const{default:katex2}=await Promise.resolve().then(()=>(init_katex(),katex_exports)),outputMode=config5.forceLegacyMathML||!isMathMLSupported()&&config5.legacyMathML?"htmlAndMathml":"mathml";return text4.split(lineBreakRegex).map(line2=>hasKatex(line2)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${line2}</div>`:`<div>${line2}</div>`).join("").replace(katexRegex,(_3,c3)=>katex2.renderToString(c3,{throwOnError:!0,displayMode:!0,output:outputMode}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),renderKatexSanitized=__name(async(text4,config5)=>sanitizeText(await renderKatexUnsanitized(text4,config5),config5),"renderKatexSanitized"),common_default={getRows:getRows,sanitizeText:sanitizeText,sanitizeTextOrArray:sanitizeTextOrArray,hasBreaks:hasBreaks,splitBreaks:splitBreaks,lineBreakRegex:lineBreakRegex,removeScript:removeScript,getUrl:getUrl,evaluate:evaluate,getMax:getMax,getMin:getMin}}}),init_icons=__esm({"src/rendering-util/icons.ts"(){init_lib(),init_config(),init_common(),init_logger(),unknownIcon={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},iconsStore=new Map,loaderStore=new Map,registerIconPacks=__name(iconLoaders=>{for(const iconLoader of iconLoaders){if(!iconLoader.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(log.debug("Registering icon pack:",iconLoader.name),"loader"in iconLoader)loaderStore.set(iconLoader.name,iconLoader.loader);else{if(!("icons"in iconLoader))throw log.error("Invalid icon loader:",iconLoader),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');iconsStore.set(iconLoader.name,iconLoader.icons)}}},"registerIconPacks"),getRegisteredIconData=__name(async(iconName,fallbackPrefix)=>{const data5=stringToIcon(iconName,!0,void 0!==fallbackPrefix);if(!data5)throw new Error(`Invalid icon name: ${iconName}`);const prefix=data5.prefix||fallbackPrefix;if(!prefix)throw new Error(`Icon name must contain a prefix: ${iconName}`);let icons=iconsStore.get(prefix);if(!icons){const loader29=loaderStore.get(prefix);if(!loader29)throw new Error(`Icon set not found: ${data5.prefix}`);try{icons={...await loader29(),prefix:prefix},iconsStore.set(prefix,icons)}catch(e3){throw log.error(e3),new Error(`Failed to load icon set: ${data5.prefix}`)}}const iconData=getIconData(icons,data5.name);if(!iconData)throw new Error(`Icon not found: ${iconName}`);return iconData},"getRegisteredIconData"),isIconAvailable=__name(async iconName=>{try{return await getRegisteredIconData(iconName),!0}catch{return!1}},"isIconAvailable"),getIconSVG=__name(async(iconName,customisations,extraAttributes)=>{let iconData;try{iconData=await getRegisteredIconData(iconName,customisations?.fallbackPrefix)}catch(e3){log.error(e3),iconData=unknownIcon}const renderData=iconToSVG(iconData,customisations),svg2=iconToHTML(replaceIDs(renderData.body),{...renderData.attributes,...extraAttributes});return sanitizeText(svg2,getConfig())},"getIconSVG")}});function dedent(templ){for(var values2=[],_i=1;_i<arguments.length;_i++)values2[_i-1]=arguments[_i];var strings=Array.from("string"==typeof templ?[templ]:templ);strings[strings.length-1]=strings[strings.length-1].replace(/\r?\n([\t ]*)$/,"");var indentLengths=strings.reduce(function(arr,str2){var matches33=str2.match(/\n([\t ]+|(?!\s).)/g);return matches33?arr.concat(matches33.map(function(match2){var _a,_b;return null!==(_b=null===(_a=match2.match(/[\t ]/g))||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0})):arr},[]);if(indentLengths.length){var pattern_1=new RegExp("\n[\t ]{"+Math.min.apply(Math,indentLengths)+"}","g");strings=strings.map(function(str2){return str2.replace(pattern_1,"\n")})}strings[0]=strings[0].replace(/^\r?\n/,"");var string3=strings[0];return values2.forEach(function(value2,i2){var endentations=string3.match(/(?:^|\n)( *)$/),endentation=endentations?endentations[1]:"",indentedValue=value2;"string"==typeof value2&&value2.includes("\n")&&(indentedValue=String(value2).split("\n").map(function(str2,i3){return 0===i3?str2:""+endentation+str2}).join("\n")),string3+=indentedValue+strings[i2+1]}),string3}var frontMatterRegex,directiveRegex,anyCommentRegex,UnknownDiagramError,detectors,detectType,registerLazyLoadedDiagrams,addDetector,getDiagramLoader,parser,c4Diagram_default,d3Attrs,calculateSvgSizeAttrs,configureSvgSize,setupGraphViewbox,themes,getStyles,addStylesForDiagram,styles_default,accTitle,diagramTitle,accDescription,sanitizeText2,clear,setAccTitle,getAccTitle,setAccDescription,getAccDescription,setDiagramTitle,getDiagramTitle,init_esm=__esm({"../../node_modules/.pnpm/ts-dedent@2.2.0/node_modules/ts-dedent/esm/index.js"(){__name(dedent,"dedent")}}),init_regexes=__esm({"src/diagram-api/regexes.ts"(){frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,directiveRegex=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyCommentRegex=/\s*%%.*\n/gm}}),init_errors=__esm({"src/errors.ts"(){UnknownDiagramError=class extends Error{static{__name(this,"UnknownDiagramError")}constructor(message){super(message),this.name="UnknownDiagramError"}}}}),init_detectType=__esm({"src/diagram-api/detectType.ts"(){init_logger(),init_regexes(),init_errors(),detectors={},detectType=__name(function(text4,config5){text4=text4.replace(frontMatterRegex,"").replace(directiveRegex,"").replace(anyCommentRegex,"\n");for(const[key,{detector:detector28}]of Object.entries(detectors)){if(detector28(text4,config5))return key}throw new UnknownDiagramError(`No diagram type detected matching given configuration for text: ${text4}`)},"detectType"),registerLazyLoadedDiagrams=__name((...diagrams2)=>{for(const{id:id30,detector:detector28,loader:loader29}of diagrams2)addDetector(id30,detector28,loader29)},"registerLazyLoadedDiagrams"),addDetector=__name((key,detector28,loader29)=>{detectors[key]&&log.warn(`Detector with key ${key} already exists. Overwriting.`),detectors[key]={detector:detector28,loader:loader29},log.debug(`Detector with key ${key} added${loader29?" with loader":""}`)},"addDetector"),getDiagramLoader=__name(key=>detectors[key].loader,"getDiagramLoader")}}),init_c4Diagram=__esm({"src/diagrams/c4/parser/c4Diagram.jison"(){parser=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,24],$V1=[1,25],$V2=[1,26],$V3=[1,27],$V4=[1,28],$V5=[1,63],$V6=[1,64],$V7=[1,65],$V8=[1,66],$V9=[1,67],$Va=[1,68],$Vb=[1,69],$Vc=[1,29],$Vd=[1,30],$Ve=[1,31],$Vf=[1,32],$Vg=[1,33],$Vh=[1,34],$Vi=[1,35],$Vj=[1,36],$Vk=[1,37],$Vl=[1,38],$Vm=[1,39],$Vn=[1,40],$Vo=[1,41],$Vp=[1,42],$Vq=[1,43],$Vr=[1,44],$Vs=[1,45],$Vt=[1,46],$Vu=[1,47],$Vv=[1,48],$Vw=[1,50],$Vx=[1,51],$Vy=[1,52],$Vz=[1,53],$VA=[1,54],$VB=[1,55],$VC=[1,56],$VD=[1,57],$VE=[1,58],$VF=[1,59],$VG=[1,60],$VH=[14,42],$VI=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],$VJ=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],$VK=[1,82],$VL=[1,83],$VM=[1,84],$VN=[1,85],$VO=[12,14,42],$VP=[12,14,33,42],$VQ=[12,14,33,42,76,77,79,80],$VR=[12,33],$VS=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 3:yy.setDirection("TB");break;case 4:yy.setDirection("BT");break;case 5:yy.setDirection("RL");break;case 6:yy.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:yy.setC4Type($$[$0-3]);break;case 19:yy.setTitle($$[$0].substring(6)),this.$=$$[$0].substring(6);break;case 20:yy.setAccDescription($$[$0].substring(15)),this.$=$$[$0].substring(15);break;case 21:this.$=$$[$0].trim(),yy.setTitle(this.$);break;case 22:case 23:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 28:$$[$0].splice(2,0,"ENTERPRISE"),yy.addPersonOrSystemBoundary(...$$[$0]),this.$=$$[$0];break;case 29:$$[$0].splice(2,0,"SYSTEM"),yy.addPersonOrSystemBoundary(...$$[$0]),this.$=$$[$0];break;case 30:yy.addPersonOrSystemBoundary(...$$[$0]),this.$=$$[$0];break;case 31:$$[$0].splice(2,0,"CONTAINER"),yy.addContainerBoundary(...$$[$0]),this.$=$$[$0];break;case 32:yy.addDeploymentNode("node",...$$[$0]),this.$=$$[$0];break;case 33:yy.addDeploymentNode("nodeL",...$$[$0]),this.$=$$[$0];break;case 34:yy.addDeploymentNode("nodeR",...$$[$0]),this.$=$$[$0];break;case 35:yy.popBoundaryParseStack();break;case 39:yy.addPersonOrSystem("person",...$$[$0]),this.$=$$[$0];break;case 40:yy.addPersonOrSystem("external_person",...$$[$0]),this.$=$$[$0];break;case 41:yy.addPersonOrSystem("system",...$$[$0]),this.$=$$[$0];break;case 42:yy.addPersonOrSystem("system_db",...$$[$0]),this.$=$$[$0];break;case 43:yy.addPersonOrSystem("system_queue",...$$[$0]),this.$=$$[$0];break;case 44:yy.addPersonOrSystem("external_system",...$$[$0]),this.$=$$[$0];break;case 45:yy.addPersonOrSystem("external_system_db",...$$[$0]),this.$=$$[$0];break;case 46:yy.addPersonOrSystem("external_system_queue",...$$[$0]),this.$=$$[$0];break;case 47:yy.addContainer("container",...$$[$0]),this.$=$$[$0];break;case 48:yy.addContainer("container_db",...$$[$0]),this.$=$$[$0];break;case 49:yy.addContainer("container_queue",...$$[$0]),this.$=$$[$0];break;case 50:yy.addContainer("external_container",...$$[$0]),this.$=$$[$0];break;case 51:yy.addContainer("external_container_db",...$$[$0]),this.$=$$[$0];break;case 52:yy.addContainer("external_container_queue",...$$[$0]),this.$=$$[$0];break;case 53:yy.addComponent("component",...$$[$0]),this.$=$$[$0];break;case 54:yy.addComponent("component_db",...$$[$0]),this.$=$$[$0];break;case 55:yy.addComponent("component_queue",...$$[$0]),this.$=$$[$0];break;case 56:yy.addComponent("external_component",...$$[$0]),this.$=$$[$0];break;case 57:yy.addComponent("external_component_db",...$$[$0]),this.$=$$[$0];break;case 58:yy.addComponent("external_component_queue",...$$[$0]),this.$=$$[$0];break;case 60:yy.addRel("rel",...$$[$0]),this.$=$$[$0];break;case 61:yy.addRel("birel",...$$[$0]),this.$=$$[$0];break;case 62:yy.addRel("rel_u",...$$[$0]),this.$=$$[$0];break;case 63:yy.addRel("rel_d",...$$[$0]),this.$=$$[$0];break;case 64:yy.addRel("rel_l",...$$[$0]),this.$=$$[$0];break;case 65:yy.addRel("rel_r",...$$[$0]),this.$=$$[$0];break;case 66:yy.addRel("rel_b",...$$[$0]),this.$=$$[$0];break;case 67:$$[$0].splice(0,1),yy.addRel("rel",...$$[$0]),this.$=$$[$0];break;case 68:yy.updateElStyle("update_el_style",...$$[$0]),this.$=$$[$0];break;case 69:yy.updateRelStyle("update_rel_style",...$$[$0]),this.$=$$[$0];break;case 70:yy.updateLayoutConfig("update_layout_config",...$$[$0]),this.$=$$[$0];break;case 71:this.$=[$$[$0]];break;case 72:$$[$0].unshift($$[$0-1]),this.$=$$[$0];break;case 73:case 75:this.$=$$[$0].trim();break;case 74:let kv={};kv[$$[$0-1].trim()]=$$[$0].trim(),this.$=kv;break;case 76:this.$=""}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4,29:49,30:61,32:62,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,43:23,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG},{13:70,19:20,20:21,21:22,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4,29:49,30:61,32:62,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,43:23,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG},{13:71,19:20,20:21,21:22,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4,29:49,30:61,32:62,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,43:23,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG},{13:72,19:20,20:21,21:22,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4,29:49,30:61,32:62,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,43:23,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG},{13:73,19:20,20:21,21:22,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4,29:49,30:61,32:62,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,43:23,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG},{14:[1,74]},o2($VH,[2,13],{43:23,29:49,30:61,32:62,20:75,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG}),o2($VH,[2,14]),o2($VI,[2,16],{12:[1,76]}),o2($VH,[2,36],{12:[1,77]}),o2($VJ,[2,19]),o2($VJ,[2,20]),{25:[1,78]},{27:[1,79]},o2($VJ,[2,23]),{35:80,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:86,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:87,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:88,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:89,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:90,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:91,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:92,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:93,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:94,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:95,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:96,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:97,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:98,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:99,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:100,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:101,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:102,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:103,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:104,75:81,76:$VK,77:$VL,79:$VM,80:$VN},o2($VO,[2,59]),{35:105,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:106,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:107,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:108,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:109,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:110,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:111,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:112,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:113,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:114,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:115,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{20:116,29:49,30:61,32:62,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,43:23,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG},{12:[1,118],33:[1,117]},{35:119,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:120,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:121,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:122,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:123,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:124,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{35:125,75:81,76:$VK,77:$VL,79:$VM,80:$VN},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},o2($VH,[2,15]),o2($VI,[2,17],{21:22,19:130,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4}),o2($VH,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:$V0,23:$V1,24:$V2,26:$V3,28:$V4,34:$V5,36:$V6,37:$V7,38:$V8,39:$V9,40:$Va,41:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,64:$Vw,65:$Vx,66:$Vy,67:$Vz,68:$VA,69:$VB,70:$VC,71:$VD,72:$VE,73:$VF,74:$VG}),o2($VJ,[2,21]),o2($VJ,[2,22]),o2($VO,[2,39]),o2($VP,[2,71],{75:81,35:132,76:$VK,77:$VL,79:$VM,80:$VN}),o2($VQ,[2,73]),{78:[1,133]},o2($VQ,[2,75]),o2($VQ,[2,76]),o2($VO,[2,40]),o2($VO,[2,41]),o2($VO,[2,42]),o2($VO,[2,43]),o2($VO,[2,44]),o2($VO,[2,45]),o2($VO,[2,46]),o2($VO,[2,47]),o2($VO,[2,48]),o2($VO,[2,49]),o2($VO,[2,50]),o2($VO,[2,51]),o2($VO,[2,52]),o2($VO,[2,53]),o2($VO,[2,54]),o2($VO,[2,55]),o2($VO,[2,56]),o2($VO,[2,57]),o2($VO,[2,58]),o2($VO,[2,60]),o2($VO,[2,61]),o2($VO,[2,62]),o2($VO,[2,63]),o2($VO,[2,64]),o2($VO,[2,65]),o2($VO,[2,66]),o2($VO,[2,67]),o2($VO,[2,68]),o2($VO,[2,69]),o2($VO,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},o2($VR,[2,28]),o2($VR,[2,29]),o2($VR,[2,30]),o2($VR,[2,31]),o2($VR,[2,32]),o2($VR,[2,33]),o2($VR,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},o2($VI,[2,18]),o2($VH,[2,38]),o2($VP,[2,72]),o2($VQ,[2,74]),o2($VO,[2,24]),o2($VO,[2,35]),o2($VS,[2,25]),o2($VS,[2,26],{12:[1,138]}),o2($VS,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 73:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 16:case 70:break;case 14:c;break;case 15:return 12;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:case 53:return this.begin("rel_u"),66;case 54:case 55:return this.begin("rel_d"),67;case 56:case 57:return this.begin("rel_l"),68;case 58:case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:case 79:this.popState(),this.popState();break;case 69:case 71:return 80;case 72:this.begin("string");break;case 74:case 80:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser.parser=parser,c4Diagram_default=parser}}),init_setupGraphViewbox=__esm({"src/setupGraphViewbox.js"(){init_logger(),d3Attrs=__name(function(d3Elem,attrs){for(let attr of attrs)d3Elem.attr(attr[0],attr[1])},"d3Attrs"),calculateSvgSizeAttrs=__name(function(height2,width3,useMaxWidth){let attrs=new Map;return useMaxWidth?(attrs.set("width","100%"),attrs.set("style",`max-width: ${width3}px;`)):(attrs.set("height",height2),attrs.set("width",width3)),attrs},"calculateSvgSizeAttrs"),configureSvgSize=__name(function(svgElem,height2,width3,useMaxWidth){const attrs=calculateSvgSizeAttrs(height2,width3,useMaxWidth);d3Attrs(svgElem,attrs)},"configureSvgSize"),setupGraphViewbox=__name(function(graph,svgElem,padding2,useMaxWidth){const svgBounds=svgElem.node().getBBox(),sWidth=svgBounds.width,sHeight=svgBounds.height;log.info(`SVG bounds: ${sWidth}x${sHeight}`,svgBounds);let width3=0,height2=0;log.info(`Graph bounds: ${width3}x${height2}`,graph),width3=sWidth+2*padding2,height2=sHeight+2*padding2,log.info(`Calculated bounds: ${width3}x${height2}`),configureSvgSize(svgElem,height2,width3,useMaxWidth);const vBox=`${svgBounds.x-padding2} ${svgBounds.y-padding2} ${svgBounds.width+2*padding2} ${svgBounds.height+2*padding2}`;svgElem.attr("viewBox",vBox)},"setupGraphViewbox")}}),init_styles=__esm({"src/styles.ts"(){init_logger(),themes={},getStyles=__name((type3,userStyles,options2)=>{let diagramStyles="";return type3 in themes&&themes[type3]?diagramStyles=themes[type3](options2):log.warn(`No theme found for ${type3}`),` & {\n    font-family: ${options2.fontFamily};\n    font-size: ${options2.fontSize};\n    fill: ${options2.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${options2.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${options2.errorTextColor};\n    stroke: ${options2.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${options2.lineColor};\n    stroke: ${options2.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${options2.lineColor};\n  }\n\n  & svg {\n    font-family: ${options2.fontFamily};\n    font-size: ${options2.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${diagramStyles}\n\n  ${userStyles}\n`},"getStyles"),addStylesForDiagram=__name((type3,diagramTheme)=>{void 0!==diagramTheme&&(themes[type3]=diagramTheme)},"addStylesForDiagram"),styles_default=getStyles}}),commonDb_exports={};__export(commonDb_exports,{clear:()=>clear,getAccDescription:()=>getAccDescription,getAccTitle:()=>getAccTitle,getDiagramTitle:()=>getDiagramTitle,setAccDescription:()=>setAccDescription,setAccTitle:()=>setAccTitle,setDiagramTitle:()=>setDiagramTitle});var log2,setLogLevel2,getConfig2,setConfig2,defaultConfig2,sanitizeText3,setupGraphViewbox2,getCommonDb,diagrams,registerDiagram,getDiagram,DiagramNotFoundError,c4ShapeArray,boundaryParseStack,currentBoundaryParse,parentBoundaryParse,boundaries,rels,title,wrapEnabled,c4ShapeInRow,c4BoundaryInRow,c4Type,getC4Type,setC4Type,addRel,addPersonOrSystem,addContainer,addComponent,addPersonOrSystemBoundary,addContainerBoundary,addDeploymentNode,popBoundaryParseStack,updateElStyle,updateRelStyle,updateLayoutConfig,getC4ShapeInRow,getC4BoundaryInRow,getCurrentBoundaryParse,getParentBoundaryParse,getC4ShapeArray,getC4Shape,getC4ShapeKeys,getBoundaries,getBoundarys,getRels,getTitle,setWrap,autoWrap,clear2,LINETYPE,ARROWTYPE,PLACEMENT,setTitle,c4Db_default,init_commonDb=__esm({"src/diagrams/common/commonDb.ts"(){init_common(),init_config(),accTitle="",diagramTitle="",accDescription="",sanitizeText2=__name(txt=>sanitizeText(txt,getConfig()),"sanitizeText"),clear=__name(()=>{accTitle="",accDescription="",diagramTitle=""},"clear"),setAccTitle=__name(txt=>{accTitle=sanitizeText2(txt).replace(/^\s+/g,"")},"setAccTitle"),getAccTitle=__name(()=>accTitle,"getAccTitle"),setAccDescription=__name(txt=>{accDescription=sanitizeText2(txt).replace(/\n\s+/g,"\n")},"setAccDescription"),getAccDescription=__name(()=>accDescription,"getAccDescription"),setDiagramTitle=__name(txt=>{diagramTitle=sanitizeText2(txt)},"setDiagramTitle"),getDiagramTitle=__name(()=>diagramTitle,"getDiagramTitle")}}),init_diagramAPI=__esm({"src/diagram-api/diagramAPI.ts"(){init_detectType(),init_logger(),init_config(),init_common(),init_setupGraphViewbox(),init_styles(),init_commonDb(),log2=log,setLogLevel2=setLogLevel,getConfig2=getConfig,setConfig2=setConfig,defaultConfig2=defaultConfig,sanitizeText3=__name(text4=>sanitizeText(text4,getConfig2()),"sanitizeText"),setupGraphViewbox2=setupGraphViewbox,getCommonDb=__name(()=>commonDb_exports,"getCommonDb"),diagrams={},registerDiagram=__name((id30,diagram27,detector28)=>{diagrams[id30]&&log2.warn(`Diagram with id ${id30} already registered. Overwriting.`),diagrams[id30]=diagram27,detector28&&addDetector(id30,detector28),addStylesForDiagram(id30,diagram27.styles),diagram27.injectUtils?.(log2,setLogLevel2,getConfig2,sanitizeText3,setupGraphViewbox2,getCommonDb(),()=>{})},"registerDiagram"),getDiagram=__name(name=>{if(name in diagrams)return diagrams[name];throw new DiagramNotFoundError(name)},"getDiagram"),DiagramNotFoundError=class extends Error{static{__name(this,"DiagramNotFoundError")}constructor(name){super(`Diagram ${name} not found.`)}}}}),init_c4Db=__esm({"src/diagrams/c4/c4Db.js"(){init_diagramAPI(),init_common(),init_commonDb(),c4ShapeArray=[],boundaryParseStack=[""],currentBoundaryParse="global",parentBoundaryParse="",boundaries=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],rels=[],title="",wrapEnabled=!1,c4ShapeInRow=4,c4BoundaryInRow=2,getC4Type=__name(function(){return c4Type},"getC4Type"),setC4Type=__name(function(c4TypeParam){let sanitizedText=sanitizeText(c4TypeParam,getConfig2());c4Type=sanitizedText},"setC4Type"),addRel=__name(function(type3,from2,to,label,techn,descr,sprite,tags2,link2){if(null==type3||null==from2||null==to||null==label)return;let rel2={};const old=rels.find(rel3=>rel3.from===from2&&rel3.to===to);if(old?rel2=old:rels.push(rel2),rel2.type=type3,rel2.from=from2,rel2.to=to,rel2.label={text:label},null==techn)rel2.techn={text:""};else if("object"==typeof techn){let[key,value2]=Object.entries(techn)[0];rel2[key]={text:value2}}else rel2.techn={text:techn};if(null==descr)rel2.descr={text:""};else if("object"==typeof descr){let[key,value2]=Object.entries(descr)[0];rel2[key]={text:value2}}else rel2.descr={text:descr};if("object"==typeof sprite){let[key,value2]=Object.entries(sprite)[0];rel2[key]=value2}else rel2.sprite=sprite;if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];rel2[key]=value2}else rel2.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];rel2[key]=value2}else rel2.link=link2;rel2.wrap=autoWrap()},"addRel"),addPersonOrSystem=__name(function(typeC4Shape,alias,label,descr,sprite,tags2,link2){if(null===alias||null===label)return;let personOrSystem={};const old=c4ShapeArray.find(personOrSystem2=>personOrSystem2.alias===alias);if(old&&alias===old.alias?personOrSystem=old:(personOrSystem.alias=alias,c4ShapeArray.push(personOrSystem)),personOrSystem.label=null==label?{text:""}:{text:label},null==descr)personOrSystem.descr={text:""};else if("object"==typeof descr){let[key,value2]=Object.entries(descr)[0];personOrSystem[key]={text:value2}}else personOrSystem.descr={text:descr};if("object"==typeof sprite){let[key,value2]=Object.entries(sprite)[0];personOrSystem[key]=value2}else personOrSystem.sprite=sprite;if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];personOrSystem[key]=value2}else personOrSystem.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];personOrSystem[key]=value2}else personOrSystem.link=link2;personOrSystem.typeC4Shape={text:typeC4Shape},personOrSystem.parentBoundary=currentBoundaryParse,personOrSystem.wrap=autoWrap()},"addPersonOrSystem"),addContainer=__name(function(typeC4Shape,alias,label,techn,descr,sprite,tags2,link2){if(null===alias||null===label)return;let container2={};const old=c4ShapeArray.find(container3=>container3.alias===alias);if(old&&alias===old.alias?container2=old:(container2.alias=alias,c4ShapeArray.push(container2)),container2.label=null==label?{text:""}:{text:label},null==techn)container2.techn={text:""};else if("object"==typeof techn){let[key,value2]=Object.entries(techn)[0];container2[key]={text:value2}}else container2.techn={text:techn};if(null==descr)container2.descr={text:""};else if("object"==typeof descr){let[key,value2]=Object.entries(descr)[0];container2[key]={text:value2}}else container2.descr={text:descr};if("object"==typeof sprite){let[key,value2]=Object.entries(sprite)[0];container2[key]=value2}else container2.sprite=sprite;if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];container2[key]=value2}else container2.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];container2[key]=value2}else container2.link=link2;container2.wrap=autoWrap(),container2.typeC4Shape={text:typeC4Shape},container2.parentBoundary=currentBoundaryParse},"addContainer"),addComponent=__name(function(typeC4Shape,alias,label,techn,descr,sprite,tags2,link2){if(null===alias||null===label)return;let component2={};const old=c4ShapeArray.find(component3=>component3.alias===alias);if(old&&alias===old.alias?component2=old:(component2.alias=alias,c4ShapeArray.push(component2)),component2.label=null==label?{text:""}:{text:label},null==techn)component2.techn={text:""};else if("object"==typeof techn){let[key,value2]=Object.entries(techn)[0];component2[key]={text:value2}}else component2.techn={text:techn};if(null==descr)component2.descr={text:""};else if("object"==typeof descr){let[key,value2]=Object.entries(descr)[0];component2[key]={text:value2}}else component2.descr={text:descr};if("object"==typeof sprite){let[key,value2]=Object.entries(sprite)[0];component2[key]=value2}else component2.sprite=sprite;if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];component2[key]=value2}else component2.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];component2[key]=value2}else component2.link=link2;component2.wrap=autoWrap(),component2.typeC4Shape={text:typeC4Shape},component2.parentBoundary=currentBoundaryParse},"addComponent"),addPersonOrSystemBoundary=__name(function(alias,label,type3,tags2,link2){if(null===alias||null===label)return;let boundary={};const old=boundaries.find(boundary2=>boundary2.alias===alias);if(old&&alias===old.alias?boundary=old:(boundary.alias=alias,boundaries.push(boundary)),boundary.label=null==label?{text:""}:{text:label},null==type3)boundary.type={text:"system"};else if("object"==typeof type3){let[key,value2]=Object.entries(type3)[0];boundary[key]={text:value2}}else boundary.type={text:type3};if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];boundary[key]=value2}else boundary.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];boundary[key]=value2}else boundary.link=link2;boundary.parentBoundary=currentBoundaryParse,boundary.wrap=autoWrap(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=alias,boundaryParseStack.push(parentBoundaryParse)},"addPersonOrSystemBoundary"),addContainerBoundary=__name(function(alias,label,type3,tags2,link2){if(null===alias||null===label)return;let boundary={};const old=boundaries.find(boundary2=>boundary2.alias===alias);if(old&&alias===old.alias?boundary=old:(boundary.alias=alias,boundaries.push(boundary)),boundary.label=null==label?{text:""}:{text:label},null==type3)boundary.type={text:"container"};else if("object"==typeof type3){let[key,value2]=Object.entries(type3)[0];boundary[key]={text:value2}}else boundary.type={text:type3};if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];boundary[key]=value2}else boundary.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];boundary[key]=value2}else boundary.link=link2;boundary.parentBoundary=currentBoundaryParse,boundary.wrap=autoWrap(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=alias,boundaryParseStack.push(parentBoundaryParse)},"addContainerBoundary"),addDeploymentNode=__name(function(nodeType3,alias,label,type3,descr,sprite,tags2,link2){if(null===alias||null===label)return;let boundary={};const old=boundaries.find(boundary2=>boundary2.alias===alias);if(old&&alias===old.alias?boundary=old:(boundary.alias=alias,boundaries.push(boundary)),boundary.label=null==label?{text:""}:{text:label},null==type3)boundary.type={text:"node"};else if("object"==typeof type3){let[key,value2]=Object.entries(type3)[0];boundary[key]={text:value2}}else boundary.type={text:type3};if(null==descr)boundary.descr={text:""};else if("object"==typeof descr){let[key,value2]=Object.entries(descr)[0];boundary[key]={text:value2}}else boundary.descr={text:descr};if("object"==typeof tags2){let[key,value2]=Object.entries(tags2)[0];boundary[key]=value2}else boundary.tags=tags2;if("object"==typeof link2){let[key,value2]=Object.entries(link2)[0];boundary[key]=value2}else boundary.link=link2;boundary.nodeType=nodeType3,boundary.parentBoundary=currentBoundaryParse,boundary.wrap=autoWrap(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=alias,boundaryParseStack.push(parentBoundaryParse)},"addDeploymentNode"),popBoundaryParseStack=__name(function(){currentBoundaryParse=parentBoundaryParse,boundaryParseStack.pop(),parentBoundaryParse=boundaryParseStack.pop(),boundaryParseStack.push(parentBoundaryParse)},"popBoundaryParseStack"),updateElStyle=__name(function(typeC4Shape,elementName,bgColor,fontColor,borderColor,shadowing,shape,sprite,techn,legendText,legendSprite){let old=c4ShapeArray.find(element3=>element3.alias===elementName);if(void 0!==old||(old=boundaries.find(element3=>element3.alias===elementName),void 0!==old)){if(null!=bgColor)if("object"==typeof bgColor){let[key,value2]=Object.entries(bgColor)[0];old[key]=value2}else old.bgColor=bgColor;if(null!=fontColor)if("object"==typeof fontColor){let[key,value2]=Object.entries(fontColor)[0];old[key]=value2}else old.fontColor=fontColor;if(null!=borderColor)if("object"==typeof borderColor){let[key,value2]=Object.entries(borderColor)[0];old[key]=value2}else old.borderColor=borderColor;if(null!=shadowing)if("object"==typeof shadowing){let[key,value2]=Object.entries(shadowing)[0];old[key]=value2}else old.shadowing=shadowing;if(null!=shape)if("object"==typeof shape){let[key,value2]=Object.entries(shape)[0];old[key]=value2}else old.shape=shape;if(null!=sprite)if("object"==typeof sprite){let[key,value2]=Object.entries(sprite)[0];old[key]=value2}else old.sprite=sprite;if(null!=techn)if("object"==typeof techn){let[key,value2]=Object.entries(techn)[0];old[key]=value2}else old.techn=techn;if(null!=legendText)if("object"==typeof legendText){let[key,value2]=Object.entries(legendText)[0];old[key]=value2}else old.legendText=legendText;if(null!=legendSprite)if("object"==typeof legendSprite){let[key,value2]=Object.entries(legendSprite)[0];old[key]=value2}else old.legendSprite=legendSprite}},"updateElStyle"),updateRelStyle=__name(function(typeC4Shape,from2,to,textColor,lineColor,offsetX,offsetY){const old=rels.find(rel2=>rel2.from===from2&&rel2.to===to);if(void 0!==old){if(null!=textColor)if("object"==typeof textColor){let[key,value2]=Object.entries(textColor)[0];old[key]=value2}else old.textColor=textColor;if(null!=lineColor)if("object"==typeof lineColor){let[key,value2]=Object.entries(lineColor)[0];old[key]=value2}else old.lineColor=lineColor;if(null!=offsetX)if("object"==typeof offsetX){let[key,value2]=Object.entries(offsetX)[0];old[key]=parseInt(value2)}else old.offsetX=parseInt(offsetX);if(null!=offsetY)if("object"==typeof offsetY){let[key,value2]=Object.entries(offsetY)[0];old[key]=parseInt(value2)}else old.offsetY=parseInt(offsetY)}},"updateRelStyle"),updateLayoutConfig=__name(function(typeC4Shape,c4ShapeInRowParam,c4BoundaryInRowParam){let c4ShapeInRowValue=c4ShapeInRow,c4BoundaryInRowValue=c4BoundaryInRow;if("object"==typeof c4ShapeInRowParam){const value2=Object.values(c4ShapeInRowParam)[0];c4ShapeInRowValue=parseInt(value2)}else c4ShapeInRowValue=parseInt(c4ShapeInRowParam);if("object"==typeof c4BoundaryInRowParam){const value2=Object.values(c4BoundaryInRowParam)[0];c4BoundaryInRowValue=parseInt(value2)}else c4BoundaryInRowValue=parseInt(c4BoundaryInRowParam);c4ShapeInRowValue>=1&&(c4ShapeInRow=c4ShapeInRowValue),c4BoundaryInRowValue>=1&&(c4BoundaryInRow=c4BoundaryInRowValue)},"updateLayoutConfig"),getC4ShapeInRow=__name(function(){return c4ShapeInRow},"getC4ShapeInRow"),getC4BoundaryInRow=__name(function(){return c4BoundaryInRow},"getC4BoundaryInRow"),getCurrentBoundaryParse=__name(function(){return currentBoundaryParse},"getCurrentBoundaryParse"),getParentBoundaryParse=__name(function(){return parentBoundaryParse},"getParentBoundaryParse"),getC4ShapeArray=__name(function(parentBoundary){return null==parentBoundary?c4ShapeArray:c4ShapeArray.filter(personOrSystem=>personOrSystem.parentBoundary===parentBoundary)},"getC4ShapeArray"),getC4Shape=__name(function(alias){return c4ShapeArray.find(personOrSystem=>personOrSystem.alias===alias)},"getC4Shape"),getC4ShapeKeys=__name(function(parentBoundary){return Object.keys(getC4ShapeArray(parentBoundary))},"getC4ShapeKeys"),getBoundarys=getBoundaries=__name(function(parentBoundary){return null==parentBoundary?boundaries:boundaries.filter(boundary=>boundary.parentBoundary===parentBoundary)},"getBoundaries"),getRels=__name(function(){return rels},"getRels"),getTitle=__name(function(){return title},"getTitle"),setWrap=__name(function(wrapSetting){wrapEnabled=wrapSetting},"setWrap"),autoWrap=__name(function(){return wrapEnabled},"autoWrap"),clear2=__name(function(){c4ShapeArray=[],boundaries=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],parentBoundaryParse="",currentBoundaryParse="global",boundaryParseStack=[""],rels=[],boundaryParseStack=[""],title="",wrapEnabled=!1,c4ShapeInRow=4,c4BoundaryInRow=2},"clear"),LINETYPE={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE={FILLED:0,OPEN:1},PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2},setTitle=__name(function(txt){let sanitizedText=sanitizeText(txt,getConfig2());title=sanitizedText},"setTitle"),c4Db_default={addPersonOrSystem:addPersonOrSystem,addPersonOrSystemBoundary:addPersonOrSystemBoundary,addContainer:addContainer,addContainerBoundary:addContainerBoundary,addComponent:addComponent,addDeploymentNode:addDeploymentNode,popBoundaryParseStack:popBoundaryParseStack,addRel:addRel,updateElStyle:updateElStyle,updateRelStyle:updateRelStyle,updateLayoutConfig:updateLayoutConfig,autoWrap:autoWrap,setWrap:setWrap,getC4ShapeArray:getC4ShapeArray,getC4Shape:getC4Shape,getC4ShapeKeys:getC4ShapeKeys,getBoundaries:getBoundaries,getBoundarys:getBoundarys,getCurrentBoundaryParse:getCurrentBoundaryParse,getParentBoundaryParse:getParentBoundaryParse,getRels:getRels,getTitle:getTitle,getC4Type:getC4Type,getC4ShapeInRow:getC4ShapeInRow,getC4BoundaryInRow:getC4BoundaryInRow,setAccTitle:setAccTitle,getAccTitle:getAccTitle,getAccDescription:getAccDescription,setAccDescription:setAccDescription,getConfig:__name(()=>getConfig2().c4,"getConfig"),clear:clear2,LINETYPE:LINETYPE,ARROWTYPE:ARROWTYPE,PLACEMENT:PLACEMENT,setTitle:setTitle,setC4Type:setC4Type}}});function ascending(a2,b3){return null==a2||null==b3?NaN:a2<b3?-1:a2>b3?1:a2>=b3?0:NaN}var init_ascending=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/ascending.js"(){__name(ascending,"ascending")}});function descending(a2,b3){return null==a2||null==b3?NaN:b3<a2?-1:b3>a2?1:b3>=a2?0:NaN}var init_descending=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/descending.js"(){__name(descending,"descending")}});function bisector(f2){let compare1,compare2,delta;function left3(a2,x5,lo=0,hi=a2.length){if(lo<hi){if(0!==compare1(x5,x5))return hi;do{const mid=lo+hi>>>1;compare2(a2[mid],x5)<0?lo=mid+1:hi=mid}while(lo<hi)}return lo}function right3(a2,x5,lo=0,hi=a2.length){if(lo<hi){if(0!==compare1(x5,x5))return hi;do{const mid=lo+hi>>>1;compare2(a2[mid],x5)<=0?lo=mid+1:hi=mid}while(lo<hi)}return lo}function center4(a2,x5,lo=0,hi=a2.length){const i2=left3(a2,x5,lo,hi-1);return i2>lo&&delta(a2[i2-1],x5)>-delta(a2[i2],x5)?i2-1:i2}return 2!==f2.length?(compare1=ascending,compare2=__name((d3,x5)=>ascending(f2(d3),x5),"compare2"),delta=__name((d3,x5)=>f2(d3)-x5,"delta")):(compare1=f2===ascending||f2===descending?f2:zero,compare2=f2,delta=f2),__name(left3,"left"),__name(right3,"right"),__name(center4,"center"),{left:left3,center:center4,right:right3}}function zero(){return 0}var init_bisector=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/bisector.js"(){init_ascending(),init_descending(),__name(bisector,"bisector"),__name(zero,"zero")}});function number(x5){return null===x5?NaN:+x5}var ascendingBisect,bisectRight,bisect_default,InternMap,init_number=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/number.js"(){__name(number,"number")}}),init_bisect=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/bisect.js"(){init_ascending(),init_bisector(),init_number(),ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,ascendingBisect.left,bisector(number).center,bisect_default=bisectRight}});function intern_get({_intern:_intern,_key:_key},value2){const key=_key(value2);return _intern.has(key)?_intern.get(key):value2}function intern_set({_intern:_intern,_key:_key},value2){const key=_key(value2);return _intern.has(key)?_intern.get(key):(_intern.set(key,value2),value2)}function intern_delete({_intern:_intern,_key:_key},value2){const key=_key(value2);return _intern.has(key)&&(value2=_intern.get(key),_intern.delete(key)),value2}function keyof(value2){return null!==value2&&"object"==typeof value2?value2.valueOf():value2}var e10,e5,e2,init_src=__esm({"../../node_modules/.pnpm/internmap@2.0.3/node_modules/internmap/src/index.js"(){InternMap=class extends Map{static{__name(this,"InternMap")}constructor(entries2,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries2)for(const[key2,value2]of entries2)this.set(key2,value2)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value2){return super.set(intern_set(this,key),value2)}delete(key){return super.delete(intern_delete(this,key))}},__name(intern_get,"intern_get"),__name(intern_set,"intern_set"),__name(intern_delete,"intern_delete"),__name(keyof,"keyof")}});function tickSpec(start3,stop5,count2){const step3=(stop5-start3)/Math.max(0,count2),power=Math.floor(Math.log10(step3)),error3=step3/Math.pow(10,power),factor=error3>=e10?10:error3>=e5?5:error3>=e2?2:1;let i1,i2,inc;return power<0?(inc=Math.pow(10,-power)/factor,i1=Math.round(start3*inc),i2=Math.round(stop5*inc),i1/inc<start3&&++i1,i2/inc>stop5&&--i2,inc=-inc):(inc=Math.pow(10,power)*factor,i1=Math.round(start3/inc),i2=Math.round(stop5/inc),i1*inc<start3&&++i1,i2*inc>stop5&&--i2),i2<i1&&.5<=count2&&count2<2?tickSpec(start3,stop5,2*count2):[i1,i2,inc]}function ticks(start3,stop5,count2){if(!((count2=+count2)>0))return[];if((start3=+start3)===(stop5=+stop5))return[start3];const reverse2=stop5<start3,[i1,i2,inc]=reverse2?tickSpec(stop5,start3,count2):tickSpec(start3,stop5,count2);if(!(i2>=i1))return[];const n2=i2-i1+1,ticks2=new Array(n2);if(reverse2)if(inc<0)for(let i3=0;i3<n2;++i3)ticks2[i3]=(i2-i3)/-inc;else for(let i3=0;i3<n2;++i3)ticks2[i3]=(i2-i3)*inc;else if(inc<0)for(let i3=0;i3<n2;++i3)ticks2[i3]=(i1+i3)/-inc;else for(let i3=0;i3<n2;++i3)ticks2[i3]=(i1+i3)*inc;return ticks2}function tickIncrement(start3,stop5,count2){return tickSpec(start3=+start3,stop5=+stop5,count2=+count2)[2]}function tickStep(start3,stop5,count2){count2=+count2;const reverse2=(stop5=+stop5)<(start3=+start3),inc=reverse2?tickIncrement(stop5,start3,count2):tickIncrement(start3,stop5,count2);return(reverse2?-1:1)*(inc<0?1/-inc:inc)}var init_ticks=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/ticks.js"(){e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),__name(tickSpec,"tickSpec"),__name(ticks,"ticks"),__name(tickIncrement,"tickIncrement"),__name(tickStep,"tickStep")}});function max(values2,valueof){let max10;if(void 0===valueof)for(const value2 of values2)null!=value2&&(max10<value2||void 0===max10&&value2>=value2)&&(max10=value2);else{let index=-1;for(let value2 of values2)null!=(value2=valueof(value2,++index,values2))&&(max10<value2||void 0===max10&&value2>=value2)&&(max10=value2)}return max10}var init_max=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/max.js"(){__name(max,"max")}});function min(values2,valueof){let min9;if(void 0===valueof)for(const value2 of values2)null!=value2&&(min9>value2||void 0===min9&&value2>=value2)&&(min9=value2);else{let index=-1;for(let value2 of values2)null!=(value2=valueof(value2,++index,values2))&&(min9>value2||void 0===min9&&value2>=value2)&&(min9=value2)}return min9}var init_min=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/min.js"(){__name(min,"min")}});function range(start3,stop5,step3){start3=+start3,stop5=+stop5,step3=(n2=arguments.length)<2?(stop5=start3,start3=0,1):n2<3?1:+step3;for(var i2=-1,n2=0|Math.max(0,Math.ceil((stop5-start3)/step3)),range3=new Array(n2);++i2<n2;)range3[i2]=start3+i2*step3;return range3}var init_range=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/range.js"(){__name(range,"range")}}),init_src2=__esm({"../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/index.js"(){init_bisect(),init_bisector(),init_max(),init_min(),init_range(),init_ticks(),init_src()}});function identity_default(x5){return x5}var top,right,bottom,left,epsilon,init_identity=__esm({"../../node_modules/.pnpm/d3-axis@3.0.0/node_modules/d3-axis/src/identity.js"(){__name(identity_default,"default")}});function translateX(x5){return"translate("+x5+",0)"}function translateY(y6){return"translate(0,"+y6+")"}function number2(scale2){return d3=>+scale2(d3)}function center(scale2,offset){return offset=Math.max(0,scale2.bandwidth()-2*offset)/2,scale2.round()&&(offset=Math.round(offset)),d3=>+scale2(d3)+offset}function entering(){return!this.__axis}function axis(orient,scale2){var tickArguments=[],tickValues=null,tickFormat2=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,offset="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,k2=orient===top||orient===left?-1:1,x5=orient===left||orient===right?"x":"y",transform8=orient===top||orient===bottom?translateX:translateY;function axis2(context){var values2=null==tickValues?scale2.ticks?scale2.ticks.apply(scale2,tickArguments):scale2.domain():tickValues,format3=null==tickFormat2?scale2.tickFormat?scale2.tickFormat.apply(scale2,tickArguments):identity_default:tickFormat2,spacing2=Math.max(tickSizeInner,0)+tickPadding,range3=scale2.range(),range0=+range3[0]+offset,range1=+range3[range3.length-1]+offset,position5=(scale2.bandwidth?center:number2)(scale2.copy(),offset),selection2=context.selection?context.selection():context,path4=selection2.selectAll(".domain").data([null]),tick=selection2.selectAll(".tick").data(values2,scale2).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line2=tick.select("line"),text4=tick.select("text");path4=path4.merge(path4.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),tick=tick.merge(tickEnter),line2=line2.merge(tickEnter.append("line").attr("stroke","currentColor").attr(x5+"2",k2*tickSizeInner)),text4=text4.merge(tickEnter.append("text").attr("fill","currentColor").attr(x5,k2*spacing2).attr("dy",orient===top?"0em":orient===bottom?"0.71em":"0.32em")),context!==selection2&&(path4=path4.transition(context),tick=tick.transition(context),line2=line2.transition(context),text4=text4.transition(context),tickExit=tickExit.transition(context).attr("opacity",epsilon).attr("transform",function(d3){return isFinite(d3=position5(d3))?transform8(d3+offset):this.getAttribute("transform")}),tickEnter.attr("opacity",epsilon).attr("transform",function(d3){var p3=this.parentNode.__axis;return transform8((p3&&isFinite(p3=p3(d3))?p3:position5(d3))+offset)})),tickExit.remove(),path4.attr("d",orient===left||orient===right?tickSizeOuter?"M"+k2*tickSizeOuter+","+range0+"H"+offset+"V"+range1+"H"+k2*tickSizeOuter:"M"+offset+","+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k2*tickSizeOuter+"V"+offset+"H"+range1+"V"+k2*tickSizeOuter:"M"+range0+","+offset+"H"+range1),tick.attr("opacity",1).attr("transform",function(d3){return transform8(position5(d3)+offset)}),line2.attr(x5+"2",k2*tickSizeInner),text4.attr(x5,k2*spacing2).text(format3),selection2.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",orient===right?"start":orient===left?"end":"middle"),selection2.each(function(){this.__axis=position5})}return __name(axis2,"axis"),axis2.scale=function(_3){return arguments.length?(scale2=_3,axis2):scale2},axis2.ticks=function(){return tickArguments=Array.from(arguments),axis2},axis2.tickArguments=function(_3){return arguments.length?(tickArguments=null==_3?[]:Array.from(_3),axis2):tickArguments.slice()},axis2.tickValues=function(_3){return arguments.length?(tickValues=null==_3?null:Array.from(_3),axis2):tickValues&&tickValues.slice()},axis2.tickFormat=function(_3){return arguments.length?(tickFormat2=_3,axis2):tickFormat2},axis2.tickSize=function(_3){return arguments.length?(tickSizeInner=tickSizeOuter=+_3,axis2):tickSizeInner},axis2.tickSizeInner=function(_3){return arguments.length?(tickSizeInner=+_3,axis2):tickSizeInner},axis2.tickSizeOuter=function(_3){return arguments.length?(tickSizeOuter=+_3,axis2):tickSizeOuter},axis2.tickPadding=function(_3){return arguments.length?(tickPadding=+_3,axis2):tickPadding},axis2.offset=function(_3){return arguments.length?(offset=+_3,axis2):offset},axis2}function axisTop(scale2){return axis(top,scale2)}function axisBottom(scale2){return axis(bottom,scale2)}var noop,dispatch_default,init_axis=__esm({"../../node_modules/.pnpm/d3-axis@3.0.0/node_modules/d3-axis/src/axis.js"(){init_identity(),top=1,right=2,bottom=3,left=4,epsilon=1e-6,__name(translateX,"translateX"),__name(translateY,"translateY"),__name(number2,"number"),__name(center,"center"),__name(entering,"entering"),__name(axis,"axis"),__name(axisTop,"axisTop"),__name(axisBottom,"axisBottom")}}),init_src3=__esm({"../../node_modules/.pnpm/d3-axis@3.0.0/node_modules/d3-axis/src/index.js"(){init_axis()}});function dispatch(){for(var t4,i2=0,n2=arguments.length,_3={};i2<n2;++i2){if(!(t4=arguments[i2]+"")||t4 in _3||/[\s.]/.test(t4))throw new Error("illegal type: "+t4);_3[t4]=[]}return new Dispatch(_3)}function Dispatch(_3){this._=_3}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t4){var name="",i2=t4.indexOf(".");if(i2>=0&&(name=t4.slice(i2+1),t4=t4.slice(0,i2)),t4&&!types.hasOwnProperty(t4))throw new Error("unknown type: "+t4);return{type:t4,name:name}})}function get(type3,name){for(var c3,i2=0,n2=type3.length;i2<n2;++i2)if((c3=type3[i2]).name===name)return c3.value}function set(type3,name,callback){for(var i2=0,n2=type3.length;i2<n2;++i2)if(type3[i2].name===name){type3[i2]=noop,type3=type3.slice(0,i2).concat(type3.slice(i2+1));break}return null!=callback&&type3.push({name:name,value:callback}),type3}var xhtml,namespaces_default,init_dispatch=__esm({"../../node_modules/.pnpm/d3-dispatch@3.0.1/node_modules/d3-dispatch/src/dispatch.js"(){noop={value:__name(()=>{},"value")},__name(dispatch,"dispatch"),__name(Dispatch,"Dispatch"),__name(parseTypenames,"parseTypenames"),Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:__name(function(typename,callback){var t4,_3=this._,T3=parseTypenames(typename+"",_3),i2=-1,n2=T3.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i2<n2;)if(t4=(typename=T3[i2]).type)_3[t4]=set(_3[t4],typename.name,callback);else if(null==callback)for(t4 in _3)_3[t4]=set(_3[t4],typename.name,null);return this}for(;++i2<n2;)if((t4=(typename=T3[i2]).type)&&(t4=get(_3[t4],typename.name)))return t4},"on"),copy:__name(function(){var copy5={},_3=this._;for(var t4 in _3)copy5[t4]=_3[t4].slice();return new Dispatch(copy5)},"copy"),call:__name(function(type3,that){if((n2=arguments.length-2)>0)for(var n2,t4,args=new Array(n2),i2=0;i2<n2;++i2)args[i2]=arguments[i2+2];if(!this._.hasOwnProperty(type3))throw new Error("unknown type: "+type3);for(i2=0,n2=(t4=this._[type3]).length;i2<n2;++i2)t4[i2].value.apply(that,args)},"call"),apply:__name(function(type3,that,args){if(!this._.hasOwnProperty(type3))throw new Error("unknown type: "+type3);for(var t4=this._[type3],i2=0,n2=t4.length;i2<n2;++i2)t4[i2].value.apply(that,args)},"apply")},__name(get,"get"),__name(set,"set"),dispatch_default=dispatch}}),init_src4=__esm({"../../node_modules/.pnpm/d3-dispatch@3.0.1/node_modules/d3-dispatch/src/index.js"(){init_dispatch()}}),init_namespaces=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespaces.js"(){namespaces_default={svg:"http://www.w3.org/2000/svg",xhtml:xhtml="http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}}});function namespace_default(name){var prefix=name+="",i2=prefix.indexOf(":");return i2>=0&&"xmlns"!==(prefix=name.slice(0,i2))&&(name=name.slice(i2+1)),namespaces_default.hasOwnProperty(prefix)?{space:namespaces_default[prefix],local:name}:name}var init_namespace=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespace.js"(){init_namespaces(),__name(namespace_default,"default")}});function creatorInherit(name){return function(){var document2=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document2.documentElement.namespaceURI===xhtml?document2.createElement(name):document2.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator_default(name){var fullname=namespace_default(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}var init_creator=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/creator.js"(){init_namespace(),init_namespaces(),__name(creatorInherit,"creatorInherit"),__name(creatorFixed,"creatorFixed"),__name(creator_default,"default")}});function none(){}function selector_default(selector){return null==selector?none:function(){return this.querySelector(selector)}}var init_selector=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selector.js"(){__name(none,"none"),__name(selector_default,"default")}});function select_default(select){"function"!=typeof select&&(select=selector_default(select));for(var groups=this._groups,m3=groups.length,subgroups=new Array(m3),j3=0;j3<m3;++j3)for(var node2,subnode,group2=groups[j3],n2=group2.length,subgroup=subgroups[j3]=new Array(n2),i2=0;i2<n2;++i2)(node2=group2[i2])&&(subnode=select.call(node2,node2.__data__,i2,group2))&&("__data__"in node2&&(subnode.__data__=node2.__data__),subgroup[i2]=subnode);return new Selection(subgroups,this._parents)}var init_select=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/select.js"(){init_selection(),init_selector(),__name(select_default,"default")}});function array(x5){return null==x5?[]:Array.isArray(x5)?x5:Array.from(x5)}var init_array=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/array.js"(){__name(array,"array")}});function empty(){return[]}function selectorAll_default(selector){return null==selector?empty:function(){return this.querySelectorAll(selector)}}var init_selectorAll=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selectorAll.js"(){__name(empty,"empty"),__name(selectorAll_default,"default")}});function arrayAll(select){return function(){return array(select.apply(this,arguments))}}function selectAll_default(select){select="function"==typeof select?arrayAll(select):selectorAll_default(select);for(var groups=this._groups,m3=groups.length,subgroups=[],parents3=[],j3=0;j3<m3;++j3)for(var node2,group2=groups[j3],n2=group2.length,i2=0;i2<n2;++i2)(node2=group2[i2])&&(subgroups.push(select.call(node2,node2.__data__,i2,group2)),parents3.push(node2));return new Selection(subgroups,parents3)}var init_selectAll=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectAll.js"(){init_selection(),init_array(),init_selectorAll(),__name(arrayAll,"arrayAll"),__name(selectAll_default,"default")}});function matcher_default(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node2){return node2.matches(selector)}}var find,init_matcher=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/matcher.js"(){__name(matcher_default,"default"),__name(childMatcher,"childMatcher")}});function childFind(match2){return function(){return find.call(this.children,match2)}}function childFirst(){return this.firstElementChild}function selectChild_default(match2){return this.select(null==match2?childFirst:childFind("function"==typeof match2?match2:childMatcher(match2)))}var filter,init_selectChild=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChild.js"(){init_matcher(),find=Array.prototype.find,__name(childFind,"childFind"),__name(childFirst,"childFirst"),__name(selectChild_default,"default")}});function children(){return Array.from(this.children)}function childrenFilter(match2){return function(){return filter.call(this.children,match2)}}function selectChildren_default(match2){return this.selectAll(null==match2?children:childrenFilter("function"==typeof match2?match2:childMatcher(match2)))}var init_selectChildren=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChildren.js"(){init_matcher(),filter=Array.prototype.filter,__name(children,"children"),__name(childrenFilter,"childrenFilter"),__name(selectChildren_default,"default")}});function filter_default(match2){"function"!=typeof match2&&(match2=matcher_default(match2));for(var groups=this._groups,m3=groups.length,subgroups=new Array(m3),j3=0;j3<m3;++j3)for(var node2,group2=groups[j3],n2=group2.length,subgroup=subgroups[j3]=[],i2=0;i2<n2;++i2)(node2=group2[i2])&&match2.call(node2,node2.__data__,i2,group2)&&subgroup.push(node2);return new Selection(subgroups,this._parents)}var init_filter=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/filter.js"(){init_selection(),init_matcher(),__name(filter_default,"default")}});function sparse_default(update2){return new Array(update2.length)}var init_sparse=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sparse.js"(){__name(sparse_default,"default")}});function enter_default(){return new Selection(this._enter||this._groups.map(sparse_default),this._parents)}function EnterNode(parent4,datum2){this.ownerDocument=parent4.ownerDocument,this.namespaceURI=parent4.namespaceURI,this._next=null,this._parent=parent4,this.__data__=datum2}var init_enter=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/enter.js"(){init_sparse(),init_selection(),__name(enter_default,"default"),__name(EnterNode,"EnterNode"),EnterNode.prototype={constructor:EnterNode,appendChild:__name(function(child){return this._parent.insertBefore(child,this._next)},"appendChild"),insertBefore:__name(function(child,next3){return this._parent.insertBefore(child,next3)},"insertBefore"),querySelector:__name(function(selector){return this._parent.querySelector(selector)},"querySelector"),querySelectorAll:__name(function(selector){return this._parent.querySelectorAll(selector)},"querySelectorAll")}}});function constant_default(x5){return function(){return x5}}var init_constant=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/constant.js"(){__name(constant_default,"default")}});function bindIndex(parent4,group2,enter,update2,exit,data5){for(var node2,i2=0,groupLength3=group2.length,dataLength=data5.length;i2<dataLength;++i2)(node2=group2[i2])?(node2.__data__=data5[i2],update2[i2]=node2):enter[i2]=new EnterNode(parent4,data5[i2]);for(;i2<groupLength3;++i2)(node2=group2[i2])&&(exit[i2]=node2)}function bindKey(parent4,group2,enter,update2,exit,data5,key){var i2,node2,keyValue,nodeByKeyValue=new Map,groupLength3=group2.length,dataLength=data5.length,keyValues=new Array(groupLength3);for(i2=0;i2<groupLength3;++i2)(node2=group2[i2])&&(keyValues[i2]=keyValue=key.call(node2,node2.__data__,i2,group2)+"",nodeByKeyValue.has(keyValue)?exit[i2]=node2:nodeByKeyValue.set(keyValue,node2));for(i2=0;i2<dataLength;++i2)keyValue=key.call(parent4,data5[i2],i2,data5)+"",(node2=nodeByKeyValue.get(keyValue))?(update2[i2]=node2,node2.__data__=data5[i2],nodeByKeyValue.delete(keyValue)):enter[i2]=new EnterNode(parent4,data5[i2]);for(i2=0;i2<groupLength3;++i2)(node2=group2[i2])&&nodeByKeyValue.get(keyValues[i2])===node2&&(exit[i2]=node2)}function datum(node2){return node2.__data__}function data_default(value2,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents3=this._parents,groups=this._groups;"function"!=typeof value2&&(value2=constant_default(value2));for(var m3=groups.length,update2=new Array(m3),enter=new Array(m3),exit=new Array(m3),j3=0;j3<m3;++j3){var parent4=parents3[j3],group2=groups[j3],groupLength3=group2.length,data5=arraylike(value2.call(parent4,parent4&&parent4.__data__,j3,parents3)),dataLength=data5.length,enterGroup=enter[j3]=new Array(dataLength),updateGroup=update2[j3]=new Array(dataLength);bind(parent4,group2,enterGroup,updateGroup,exit[j3]=new Array(groupLength3),data5,key);for(var previous,next3,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next3=updateGroup[i1])&&++i1<dataLength;);previous._next=next3||null}}return(update2=new Selection(update2,parents3))._enter=enter,update2._exit=exit,update2}function arraylike(data5){return"object"==typeof data5&&"length"in data5?data5:Array.from(data5)}var init_data=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/data.js"(){init_selection(),init_enter(),init_constant(),__name(bindIndex,"bindIndex"),__name(bindKey,"bindKey"),__name(datum,"datum"),__name(data_default,"default"),__name(arraylike,"arraylike")}});function exit_default(){return new Selection(this._exit||this._groups.map(sparse_default),this._parents)}var init_exit=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/exit.js"(){init_sparse(),init_selection(),__name(exit_default,"default")}});function join_default(onenter,onupdate,onexit){var enter=this.enter(),update2=this,exit=this.exit();return"function"==typeof onenter?(enter=onenter(enter))&&(enter=enter.selection()):enter=enter.append(onenter+""),null!=onupdate&&(update2=onupdate(update2))&&(update2=update2.selection()),null==onexit?exit.remove():onexit(exit),enter&&update2?enter.merge(update2).order():update2}var init_join=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/join.js"(){__name(join_default,"default")}});function merge_default(context){for(var selection2=context.selection?context.selection():context,groups0=this._groups,groups1=selection2._groups,m0=groups0.length,m1=groups1.length,m3=Math.min(m0,m1),merges=new Array(m0),j3=0;j3<m3;++j3)for(var node2,group0=groups0[j3],group1=groups1[j3],n2=group0.length,merge5=merges[j3]=new Array(n2),i2=0;i2<n2;++i2)(node2=group0[i2]||group1[i2])&&(merge5[i2]=node2);for(;j3<m0;++j3)merges[j3]=groups0[j3];return new Selection(merges,this._parents)}var init_merge2=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/merge.js"(){init_selection(),__name(merge_default,"default")}});function order_default(){for(var groups=this._groups,j3=-1,m3=groups.length;++j3<m3;)for(var node2,group2=groups[j3],i2=group2.length-1,next3=group2[i2];--i2>=0;)(node2=group2[i2])&&(next3&&4^node2.compareDocumentPosition(next3)&&next3.parentNode.insertBefore(node2,next3),next3=node2);return this}var init_order=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/order.js"(){__name(order_default,"default")}});function sort_default(compare){function compareNode(a2,b3){return a2&&b3?compare(a2.__data__,b3.__data__):!a2-!b3}compare||(compare=ascending2),__name(compareNode,"compareNode");for(var groups=this._groups,m3=groups.length,sortgroups=new Array(m3),j3=0;j3<m3;++j3){for(var node2,group2=groups[j3],n2=group2.length,sortgroup=sortgroups[j3]=new Array(n2),i2=0;i2<n2;++i2)(node2=group2[i2])&&(sortgroup[i2]=node2);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()}function ascending2(a2,b3){return a2<b3?-1:a2>b3?1:a2>=b3?0:NaN}var init_sort=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sort.js"(){init_selection(),__name(sort_default,"default"),__name(ascending2,"ascending")}});function call_default(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this}var init_call=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/call.js"(){__name(call_default,"default")}});function nodes_default(){return Array.from(this)}var init_nodes=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/nodes.js"(){__name(nodes_default,"default")}});function node_default(){for(var groups=this._groups,j3=0,m3=groups.length;j3<m3;++j3)for(var group2=groups[j3],i2=0,n2=group2.length;i2<n2;++i2){var node2=group2[i2];if(node2)return node2}return null}var init_node=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/node.js"(){__name(node_default,"default")}});function size_default(){let size4=0;for(const node2 of this)++size4;return size4}var init_size2=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/size.js"(){__name(size_default,"default")}});function empty_default(){return!this.node()}var init_empty=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/empty.js"(){__name(empty_default,"default")}});function each_default(callback){for(var groups=this._groups,j3=0,m3=groups.length;j3<m3;++j3)for(var node2,group2=groups[j3],i2=0,n2=group2.length;i2<n2;++i2)(node2=group2[i2])&&callback.call(node2,node2.__data__,i2,group2);return this}var init_each=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/each.js"(){__name(each_default,"default")}});function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value2){return function(){this.setAttribute(name,value2)}}function attrConstantNS(fullname,value2){return function(){this.setAttributeNS(fullname.space,fullname.local,value2)}}function attrFunction(name,value2){return function(){var v3=value2.apply(this,arguments);null==v3?this.removeAttribute(name):this.setAttribute(name,v3)}}function attrFunctionNS(fullname,value2){return function(){var v3=value2.apply(this,arguments);null==v3?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v3)}}function attr_default(name,value2){var fullname=namespace_default(name);if(arguments.length<2){var node2=this.node();return fullname.local?node2.getAttributeNS(fullname.space,fullname.local):node2.getAttribute(fullname)}return this.each((null==value2?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value2?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value2))}var init_attr=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/attr.js"(){init_namespace(),__name(attrRemove,"attrRemove"),__name(attrRemoveNS,"attrRemoveNS"),__name(attrConstant,"attrConstant"),__name(attrConstantNS,"attrConstantNS"),__name(attrFunction,"attrFunction"),__name(attrFunctionNS,"attrFunctionNS"),__name(attr_default,"default")}});function window_default(node2){return node2.ownerDocument&&node2.ownerDocument.defaultView||node2.document&&node2||node2.defaultView}var init_window=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/window.js"(){__name(window_default,"default")}});function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value2,priority3){return function(){this.style.setProperty(name,value2,priority3)}}function styleFunction(name,value2,priority3){return function(){var v3=value2.apply(this,arguments);null==v3?this.style.removeProperty(name):this.style.setProperty(name,v3,priority3)}}function style_default(name,value2,priority3){return arguments.length>1?this.each((null==value2?styleRemove:"function"==typeof value2?styleFunction:styleConstant)(name,value2,null==priority3?"":priority3)):styleValue(this.node(),name)}function styleValue(node2,name){return node2.style.getPropertyValue(name)||window_default(node2).getComputedStyle(node2,null).getPropertyValue(name)}var init_style=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/style.js"(){init_window(),__name(styleRemove,"styleRemove"),__name(styleConstant,"styleConstant"),__name(styleFunction,"styleFunction"),__name(style_default,"default"),__name(styleValue,"styleValue")}});function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value2){return function(){this[name]=value2}}function propertyFunction(name,value2){return function(){var v3=value2.apply(this,arguments);null==v3?delete this[name]:this[name]=v3}}function property_default(name,value2){return arguments.length>1?this.each((null==value2?propertyRemove:"function"==typeof value2?propertyFunction:propertyConstant)(name,value2)):this.node()[name]}var init_property=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/property.js"(){__name(propertyRemove,"propertyRemove"),__name(propertyConstant,"propertyConstant"),__name(propertyFunction,"propertyFunction"),__name(property_default,"default")}});function classArray(string3){return string3.trim().split(/^|\s+/)}function classList(node2){return node2.classList||new ClassList(node2)}function ClassList(node2){this._node=node2,this._names=classArray(node2.getAttribute("class")||"")}function classedAdd(node2,names){for(var list=classList(node2),i2=-1,n2=names.length;++i2<n2;)list.add(names[i2])}function classedRemove(node2,names){for(var list=classList(node2),i2=-1,n2=names.length;++i2<n2;)list.remove(names[i2])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value2){return function(){(value2.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function classed_default(name,value2){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i2=-1,n2=names.length;++i2<n2;)if(!list.contains(names[i2]))return!1;return!0}return this.each(("function"==typeof value2?classedFunction:value2?classedTrue:classedFalse)(names,value2))}var init_classed=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/classed.js"(){__name(classArray,"classArray"),__name(classList,"classList"),__name(ClassList,"ClassList"),ClassList.prototype={add:__name(function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},"add"),remove:__name(function(name){var i2=this._names.indexOf(name);i2>=0&&(this._names.splice(i2,1),this._node.setAttribute("class",this._names.join(" ")))},"remove"),contains:__name(function(name){return this._names.indexOf(name)>=0},"contains")},__name(classedAdd,"classedAdd"),__name(classedRemove,"classedRemove"),__name(classedTrue,"classedTrue"),__name(classedFalse,"classedFalse"),__name(classedFunction,"classedFunction"),__name(classed_default,"default")}});function textRemove(){this.textContent=""}function textConstant(value2){return function(){this.textContent=value2}}function textFunction(value2){return function(){var v3=value2.apply(this,arguments);this.textContent=null==v3?"":v3}}function text_default(value2){return arguments.length?this.each(null==value2?textRemove:("function"==typeof value2?textFunction:textConstant)(value2)):this.node().textContent}var init_text=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/text.js"(){__name(textRemove,"textRemove"),__name(textConstant,"textConstant"),__name(textFunction,"textFunction"),__name(text_default,"default")}});function htmlRemove(){this.innerHTML=""}function htmlConstant(value2){return function(){this.innerHTML=value2}}function htmlFunction(value2){return function(){var v3=value2.apply(this,arguments);this.innerHTML=null==v3?"":v3}}function html_default(value2){return arguments.length?this.each(null==value2?htmlRemove:("function"==typeof value2?htmlFunction:htmlConstant)(value2)):this.node().innerHTML}var init_html2=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/html.js"(){__name(htmlRemove,"htmlRemove"),__name(htmlConstant,"htmlConstant"),__name(htmlFunction,"htmlFunction"),__name(html_default,"default")}});function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function raise_default(){return this.each(raise)}var init_raise=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/raise.js"(){__name(raise,"raise"),__name(raise_default,"default")}});function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lower_default(){return this.each(lower)}var init_lower=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/lower.js"(){__name(lower,"lower"),__name(lower_default,"default")}});function append_default(name){var create4="function"==typeof name?name:creator_default(name);return this.select(function(){return this.appendChild(create4.apply(this,arguments))})}var init_append=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/append.js"(){init_creator(),__name(append_default,"default")}});function constantNull(){return null}function insert_default(name,before){var create4="function"==typeof name?name:creator_default(name),select=null==before?constantNull:"function"==typeof before?before:selector_default(before);return this.select(function(){return this.insertBefore(create4.apply(this,arguments),select.apply(this,arguments)||null)})}var init_insert=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/insert.js"(){init_creator(),init_selector(),__name(constantNull,"constantNull"),__name(insert_default,"default")}});function remove(){var parent4=this.parentNode;parent4&&parent4.removeChild(this)}function remove_default(){return this.each(remove)}var init_remove=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/remove.js"(){__name(remove,"remove"),__name(remove_default,"default")}});function selection_cloneShallow(){var clone6=this.cloneNode(!1),parent4=this.parentNode;return parent4?parent4.insertBefore(clone6,this.nextSibling):clone6}function selection_cloneDeep(){var clone6=this.cloneNode(!0),parent4=this.parentNode;return parent4?parent4.insertBefore(clone6,this.nextSibling):clone6}function clone_default(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)}var init_clone=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/clone.js"(){__name(selection_cloneShallow,"selection_cloneShallow"),__name(selection_cloneDeep,"selection_cloneDeep"),__name(clone_default,"default")}});function datum_default(value2){return arguments.length?this.property("__data__",value2):this.node().__data__}var init_datum=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/datum.js"(){__name(datum_default,"default")}});function contextListener(listener){return function(event3){listener.call(this,event3,this.__data__)}}function parseTypenames2(typenames){return typenames.trim().split(/^|\s+/).map(function(t4){var name="",i2=t4.indexOf(".");return i2>=0&&(name=t4.slice(i2+1),t4=t4.slice(0,i2)),{type:t4,name:name}})}function onRemove(typename){return function(){var on3=this.__on;if(on3){for(var o2,j3=0,i2=-1,m3=on3.length;j3<m3;++j3)o2=on3[j3],typename.type&&o2.type!==typename.type||o2.name!==typename.name?on3[++i2]=o2:this.removeEventListener(o2.type,o2.listener,o2.options);++i2?on3.length=i2:delete this.__on}}}function onAdd(typename,value2,options2){return function(){var o2,on3=this.__on,listener=contextListener(value2);if(on3)for(var j3=0,m3=on3.length;j3<m3;++j3)if((o2=on3[j3]).type===typename.type&&o2.name===typename.name)return this.removeEventListener(o2.type,o2.listener,o2.options),this.addEventListener(o2.type,o2.listener=listener,o2.options=options2),void(o2.value=value2);this.addEventListener(typename.type,listener,options2),o2={type:typename.type,name:typename.name,value:value2,listener:listener,options:options2},on3?on3.push(o2):this.__on=[o2]}}function on_default(typename,value2,options2){var i2,t4,typenames=parseTypenames2(typename+""),n2=typenames.length;if(!(arguments.length<2)){for(on3=value2?onAdd:onRemove,i2=0;i2<n2;++i2)this.each(on3(typenames[i2],value2,options2));return this}var on3=this.node().__on;if(on3)for(var o2,j3=0,m3=on3.length;j3<m3;++j3)for(i2=0,o2=on3[j3];i2<n2;++i2)if((t4=typenames[i2]).type===o2.type&&t4.name===o2.name)return o2.value}var init_on=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/on.js"(){__name(contextListener,"contextListener"),__name(parseTypenames2,"parseTypenames"),__name(onRemove,"onRemove"),__name(onAdd,"onAdd"),__name(on_default,"default")}});function dispatchEvent(node2,type3,params){var window3=window_default(node2),event3=window3.CustomEvent;"function"==typeof event3?event3=new event3(type3,params):(event3=window3.document.createEvent("Event"),params?(event3.initEvent(type3,params.bubbles,params.cancelable),event3.detail=params.detail):event3.initEvent(type3,!1,!1)),node2.dispatchEvent(event3)}function dispatchConstant(type3,params){return function(){return dispatchEvent(this,type3,params)}}function dispatchFunction(type3,params){return function(){return dispatchEvent(this,type3,params.apply(this,arguments))}}function dispatch_default2(type3,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type3,params))}var init_dispatch2=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/dispatch.js"(){init_window(),__name(dispatchEvent,"dispatchEvent"),__name(dispatchConstant,"dispatchConstant"),__name(dispatchFunction,"dispatchFunction"),__name(dispatch_default2,"default")}});function*iterator_default(){for(var groups=this._groups,j3=0,m3=groups.length;j3<m3;++j3)for(var node2,group2=groups[j3],i2=0,n2=group2.length;i2<n2;++i2)(node2=group2[i2])&&(yield node2)}var root,selection_default,init_iterator=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/iterator.js"(){__name(iterator_default,"default")}});function Selection(groups,parents3){this._groups=groups,this._parents=parents3}function selection(){return new Selection([[document.documentElement]],root)}function selection_selection(){return this}var init_selection=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/index.js"(){init_select(),init_selectAll(),init_selectChild(),init_selectChildren(),init_filter(),init_data(),init_enter(),init_exit(),init_join(),init_merge2(),init_order(),init_sort(),init_call(),init_nodes(),init_node(),init_size2(),init_empty(),init_each(),init_attr(),init_style(),init_property(),init_classed(),init_text(),init_html2(),init_raise(),init_lower(),init_append(),init_insert(),init_remove(),init_clone(),init_datum(),init_on(),init_dispatch2(),init_iterator(),root=[null],__name(Selection,"Selection"),__name(selection,"selection"),__name(selection_selection,"selection_selection"),Selection.prototype=selection.prototype={constructor:Selection,select:select_default,selectAll:selectAll_default,selectChild:selectChild_default,selectChildren:selectChildren_default,filter:filter_default,data:data_default,enter:enter_default,exit:exit_default,join:join_default,merge:merge_default,selection:selection_selection,order:order_default,sort:sort_default,call:call_default,nodes:nodes_default,node:node_default,size:size_default,empty:empty_default,each:each_default,attr:attr_default,style:style_default,property:property_default,classed:classed_default,text:text_default,html:html_default,raise:raise_default,lower:lower_default,append:append_default,insert:insert_default,remove:remove_default,clone:clone_default,datum:datum_default,on:on_default,dispatch:dispatch_default2,[Symbol.iterator]:iterator_default},selection_default=selection}});function select_default2(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root)}var init_select2=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/select.js"(){init_selection(),__name(select_default2,"default")}}),init_src5=__esm({"../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/index.js"(){init_matcher(),init_namespace(),init_select2(),init_selection(),init_selector(),init_selectorAll(),init_style()}}),init_src6=__esm({"../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/index.js"(){}});function define_default(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent4,definition){var prototype=Object.create(parent4.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}var brighter,reI,reN,reP,reHex,reRgbInteger,reRgbPercent,reRgbaInteger,reRgbaPercent,reHslPercent,reHslaPercent,named,init_define=__esm({"../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/define.js"(){__name(define_default,"default"),__name(extend,"extend")}});function Color2(){}function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format3){var m3,l4;return format3=(format3+"").trim().toLowerCase(),(m3=reHex.exec(format3))?(l4=m3[1].length,m3=parseInt(m3[1],16),6===l4?rgbn(m3):3===l4?new Rgb(m3>>8&15|m3>>4&240,m3>>4&15|240&m3,(15&m3)<<4|15&m3,1):8===l4?rgba2(m3>>24&255,m3>>16&255,m3>>8&255,(255&m3)/255):4===l4?rgba2(m3>>12&15|m3>>8&240,m3>>8&15|m3>>4&240,m3>>4&15|240&m3,((15&m3)<<4|15&m3)/255):null):(m3=reRgbInteger.exec(format3))?new Rgb(m3[1],m3[2],m3[3],1):(m3=reRgbPercent.exec(format3))?new Rgb(255*m3[1]/100,255*m3[2]/100,255*m3[3]/100,1):(m3=reRgbaInteger.exec(format3))?rgba2(m3[1],m3[2],m3[3],m3[4]):(m3=reRgbaPercent.exec(format3))?rgba2(255*m3[1]/100,255*m3[2]/100,255*m3[3]/100,m3[4]):(m3=reHslPercent.exec(format3))?hsla(m3[1],m3[2]/100,m3[3]/100,1):(m3=reHslaPercent.exec(format3))?hsla(m3[1],m3[2]/100,m3[3]/100,m3[4]):named.hasOwnProperty(format3)?rgbn(named[format3]):"transparent"===format3?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n2){return new Rgb(n2>>16&255,n2>>8&255,255&n2,1)}function rgba2(r2,g2,b3,a2){return a2<=0&&(r2=g2=b3=NaN),new Rgb(r2,g2,b3,a2)}function rgbConvert(o2){return o2 instanceof Color2||(o2=color(o2)),o2?new Rgb((o2=o2.rgb()).r,o2.g,o2.b,o2.opacity):new Rgb}function rgb(r2,g2,b3,opacity){return 1===arguments.length?rgbConvert(r2):new Rgb(r2,g2,b3,null==opacity?1:opacity)}function Rgb(r2,g2,b3,opacity){this.r=+r2,this.g=+g2,this.b=+b3,this.opacity=+opacity}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`}function rgb_formatRgb(){const a2=clampa(this.opacity);return`${1===a2?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===a2?")":`, ${a2})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value2){return Math.max(0,Math.min(255,Math.round(value2)||0))}function hex(value2){return((value2=clampi(value2))<16?"0":"")+value2.toString(16)}function hsla(h3,s2,l4,a2){return a2<=0?h3=s2=l4=NaN:l4<=0||l4>=1?h3=s2=NaN:s2<=0&&(h3=NaN),new Hsl(h3,s2,l4,a2)}function hslConvert(o2){if(o2 instanceof Hsl)return new Hsl(o2.h,o2.s,o2.l,o2.opacity);if(o2 instanceof Color2||(o2=color(o2)),!o2)return new Hsl;if(o2 instanceof Hsl)return o2;var r2=(o2=o2.rgb()).r/255,g2=o2.g/255,b3=o2.b/255,min9=Math.min(r2,g2,b3),max10=Math.max(r2,g2,b3),h3=NaN,s2=max10-min9,l4=(max10+min9)/2;return s2?(h3=r2===max10?(g2-b3)/s2+6*(g2<b3):g2===max10?(b3-r2)/s2+2:(r2-g2)/s2+4,s2/=l4<.5?max10+min9:2-max10-min9,h3*=60):s2=l4>0&&l4<1?0:h3,new Hsl(h3,s2,l4,o2.opacity)}function hsl(h3,s2,l4,opacity){return 1===arguments.length?hslConvert(h3):new Hsl(h3,s2,l4,null==opacity?1:opacity)}function Hsl(h3,s2,l4,opacity){this.h=+h3,this.s=+s2,this.l=+l4,this.opacity=+opacity}function clamph(value2){return(value2=(value2||0)%360)<0?value2+360:value2}function clampt(value2){return Math.max(0,Math.min(1,value2||0))}function hsl2rgb(h3,m1,m22){return 255*(h3<60?m1+(m22-m1)*h3/60:h3<180?m22:h3<240?m1+(m22-m1)*(240-h3)/60:m1)}var radians,degrees,Xn,Yn,Zn,t0,t1,t2,t3,init_color2=__esm({"../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/color.js"(){init_define(),__name(Color2,"Color"),brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},define_default(Color2,color,{copy(channels2){return Object.assign(new this.constructor,this,channels2)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),__name(color_formatHex,"color_formatHex"),__name(color_formatHex8,"color_formatHex8"),__name(color_formatHsl,"color_formatHsl"),__name(color_formatRgb,"color_formatRgb"),__name(color,"color"),__name(rgbn,"rgbn"),__name(rgba2,"rgba"),__name(rgbConvert,"rgbConvert"),__name(rgb,"rgb"),__name(Rgb,"Rgb"),define_default(Rgb,rgb,extend(Color2,{brighter(k2){return k2=null==k2?brighter:Math.pow(brighter,k2),new Rgb(this.r*k2,this.g*k2,this.b*k2,this.opacity)},darker(k2){return k2=null==k2?.7:Math.pow(.7,k2),new Rgb(this.r*k2,this.g*k2,this.b*k2,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),__name(rgb_formatHex,"rgb_formatHex"),__name(rgb_formatHex8,"rgb_formatHex8"),__name(rgb_formatRgb,"rgb_formatRgb"),__name(clampa,"clampa"),__name(clampi,"clampi"),__name(hex,"hex"),__name(hsla,"hsla"),__name(hslConvert,"hslConvert"),__name(hsl,"hsl"),__name(Hsl,"Hsl"),define_default(Hsl,hsl,extend(Color2,{brighter(k2){return k2=null==k2?brighter:Math.pow(brighter,k2),new Hsl(this.h,this.s,this.l*k2,this.opacity)},darker(k2){return k2=null==k2?.7:Math.pow(.7,k2),new Hsl(this.h,this.s,this.l*k2,this.opacity)},rgb(){var h3=this.h%360+360*(this.h<0),s2=isNaN(h3)||isNaN(this.s)?0:this.s,l4=this.l,m22=l4+(l4<.5?l4:1-l4)*s2,m1=2*l4-m22;return new Rgb(hsl2rgb(h3>=240?h3-240:h3+120,m1,m22),hsl2rgb(h3,m1,m22),hsl2rgb(h3<120?h3+240:h3-120,m1,m22),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a2=clampa(this.opacity);return`${1===a2?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===a2?")":`, ${a2})`}`}})),__name(clamph,"clamph"),__name(clampt,"clampt"),__name(hsl2rgb,"hsl2rgb")}}),init_math=__esm({"../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/math.js"(){radians=Math.PI/180,degrees=180/Math.PI}});function labConvert(o2){if(o2 instanceof Lab)return new Lab(o2.l,o2.a,o2.b,o2.opacity);if(o2 instanceof Hcl)return hcl2lab(o2);o2 instanceof Rgb||(o2=rgbConvert(o2));var x5,z3,r2=rgb2lrgb(o2.r),g2=rgb2lrgb(o2.g),b3=rgb2lrgb(o2.b),y6=xyz2lab((.2225045*r2+.7168786*g2+.0606169*b3)/Yn);return r2===g2&&g2===b3?x5=z3=y6:(x5=xyz2lab((.4360747*r2+.3850649*g2+.1430804*b3)/Xn),z3=xyz2lab((.0139322*r2+.0971045*g2+.7141733*b3)/Zn)),new Lab(116*y6-16,500*(x5-y6),200*(y6-z3),o2.opacity)}function lab(l4,a2,b3,opacity){return 1===arguments.length?labConvert(l4):new Lab(l4,a2,b3,null==opacity?1:opacity)}function Lab(l4,a2,b3,opacity){this.l=+l4,this.a=+a2,this.b=+b3,this.opacity=+opacity}function xyz2lab(t4){return t4>t3?Math.pow(t4,1/3):t4/t2+t0}function lab2xyz(t4){return t4>t1?t4*t4*t4:t2*(t4-t0)}function lrgb2rgb(x5){return 255*(x5<=.0031308?12.92*x5:1.055*Math.pow(x5,1/2.4)-.055)}function rgb2lrgb(x5){return(x5/=255)<=.04045?x5/12.92:Math.pow((x5+.055)/1.055,2.4)}function hclConvert(o2){if(o2 instanceof Hcl)return new Hcl(o2.h,o2.c,o2.l,o2.opacity);if(o2 instanceof Lab||(o2=labConvert(o2)),0===o2.a&&0===o2.b)return new Hcl(NaN,0<o2.l&&o2.l<100?0:NaN,o2.l,o2.opacity);var h3=Math.atan2(o2.b,o2.a)*degrees;return new Hcl(h3<0?h3+360:h3,Math.sqrt(o2.a*o2.a+o2.b*o2.b),o2.l,o2.opacity)}function hcl(h3,c3,l4,opacity){return 1===arguments.length?hclConvert(h3):new Hcl(h3,c3,l4,null==opacity?1:opacity)}function Hcl(h3,c3,l4,opacity){this.h=+h3,this.c=+c3,this.l=+l4,this.opacity=+opacity}function hcl2lab(o2){if(isNaN(o2.h))return new Lab(o2.l,0,0,o2.opacity);var h3=o2.h*radians;return new Lab(o2.l,Math.cos(h3)*o2.c,Math.sin(h3)*o2.c,o2.opacity)}var init_lab=__esm({"../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/lab.js"(){init_define(),init_color2(),init_math(),Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t2=3*(t1=6/29)*t1,t3=t1*t1*t1,__name(labConvert,"labConvert"),__name(lab,"lab"),__name(Lab,"Lab"),define_default(Lab,lab,extend(Color2,{brighter(k2){return new Lab(this.l+18*(null==k2?1:k2),this.a,this.b,this.opacity)},darker(k2){return new Lab(this.l-18*(null==k2?1:k2),this.a,this.b,this.opacity)},rgb(){var y6=(this.l+16)/116,x5=isNaN(this.a)?y6:y6+this.a/500,z3=isNaN(this.b)?y6:y6-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x5=Xn*lab2xyz(x5))-1.6168667*(y6=Yn*lab2xyz(y6))-.4906146*(z3=Zn*lab2xyz(z3))),lrgb2rgb(-.9787684*x5+1.9161415*y6+.033454*z3),lrgb2rgb(.0719453*x5-.2289914*y6+1.4052427*z3),this.opacity)}})),__name(xyz2lab,"xyz2lab"),__name(lab2xyz,"lab2xyz"),__name(lrgb2rgb,"lrgb2rgb"),__name(rgb2lrgb,"rgb2lrgb"),__name(hclConvert,"hclConvert"),__name(hcl,"hcl"),__name(Hcl,"Hcl"),__name(hcl2lab,"hcl2lab"),define_default(Hcl,hcl,extend(Color2,{brighter(k2){return new Hcl(this.h,this.c,this.l+18*(null==k2?1:k2),this.opacity)},darker(k2){return new Hcl(this.h,this.c,this.l-18*(null==k2?1:k2),this.opacity)},rgb(){return hcl2lab(this).rgb()}}))}}),init_src7=__esm({"../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/index.js"(){init_color2(),init_lab()}});function basis(t13,v0,v12,v23,v3){var t22=t13*t13,t32=t22*t13;return((1-3*t13+3*t22-t32)*v0+(4-6*t22+3*t32)*v12+(1+3*t13+3*t22-3*t32)*v23+t32*v3)/6}function basis_default(values2){var n2=values2.length-1;return function(t4){var i2=t4<=0?t4=0:t4>=1?(t4=1,n2-1):Math.floor(t4*n2),v12=values2[i2],v23=values2[i2+1],v0=i2>0?values2[i2-1]:2*v12-v23,v3=i2<n2-1?values2[i2+2]:2*v23-v12;return basis((t4-i2/n2)*n2,v0,v12,v23,v3)}}var init_basis=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/basis.js"(){__name(basis,"basis"),__name(basis_default,"default")}});function basisClosed_default(values2){var n2=values2.length;return function(t4){var i2=Math.floor(((t4%=1)<0?++t4:t4)*n2),v0=values2[(i2+n2-1)%n2],v12=values2[i2%n2],v23=values2[(i2+1)%n2],v3=values2[(i2+2)%n2];return basis((t4-i2/n2)*n2,v0,v12,v23,v3)}}var constant_default2,init_basisClosed=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/basisClosed.js"(){init_basis(),__name(basisClosed_default,"default")}}),init_constant2=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/constant.js"(){constant_default2=__name(x5=>()=>x5,"default")}});function linear(a2,d3){return function(t4){return a2+t4*d3}}function exponential(a2,b3,y6){return a2=Math.pow(a2,y6),b3=Math.pow(b3,y6)-a2,y6=1/y6,function(t4){return Math.pow(a2+t4*b3,y6)}}function hue(a2,b3){var d3=b3-a2;return d3?linear(a2,d3>180||d3<-180?d3-360*Math.round(d3/360):d3):constant_default2(isNaN(a2)?b3:a2)}function gamma(y6){return 1===(y6=+y6)?nogamma:function(a2,b3){return b3-a2?exponential(a2,b3,y6):constant_default2(isNaN(a2)?b3:a2)}}function nogamma(a2,b3){var d3=b3-a2;return d3?linear(a2,d3):constant_default2(isNaN(a2)?b3:a2)}var rgb_default2,init_color3=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/color.js"(){init_constant2(),__name(linear,"linear"),__name(exponential,"exponential"),__name(hue,"hue"),__name(gamma,"gamma"),__name(nogamma,"nogamma")}});function rgbSpline(spline){return function(colors2){var i2,color2,n2=colors2.length,r2=new Array(n2),g2=new Array(n2),b3=new Array(n2);for(i2=0;i2<n2;++i2)color2=rgb(colors2[i2]),r2[i2]=color2.r||0,g2[i2]=color2.g||0,b3[i2]=color2.b||0;return r2=spline(r2),g2=spline(g2),b3=spline(b3),color2.opacity=1,function(t4){return color2.r=r2(t4),color2.g=g2(t4),color2.b=b3(t4),color2+""}}}var init_rgb2=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/rgb.js"(){init_src7(),init_basis(),init_basisClosed(),init_color3(),rgb_default2=__name(function rgbGamma(y6){var color2=gamma(y6);function rgb2(start3,end2){var r2=color2((start3=rgb(start3)).r,(end2=rgb(end2)).r),g2=color2(start3.g,end2.g),b3=color2(start3.b,end2.b),opacity=nogamma(start3.opacity,end2.opacity);return function(t4){return start3.r=r2(t4),start3.g=g2(t4),start3.b=b3(t4),start3.opacity=opacity(t4),start3+""}}return __name(rgb2,"rgb"),rgb2.gamma=rgbGamma,rgb2},"rgbGamma")(1),__name(rgbSpline,"rgbSpline"),rgbSpline(basis_default),rgbSpline(basisClosed_default)}});function numberArray_default(a2,b3){b3||(b3=[]);var i2,n2=a2?Math.min(b3.length,a2.length):0,c3=b3.slice();return function(t4){for(i2=0;i2<n2;++i2)c3[i2]=a2[i2]*(1-t4)+b3[i2]*t4;return c3}}function isNumberArray(x5){return ArrayBuffer.isView(x5)&&!(x5 instanceof DataView)}var init_numberArray=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/numberArray.js"(){__name(numberArray_default,"default"),__name(isNumberArray,"isNumberArray")}});function genericArray(a2,b3){var i2,nb=b3?b3.length:0,na=a2?Math.min(nb,a2.length):0,x5=new Array(na),c3=new Array(nb);for(i2=0;i2<na;++i2)x5[i2]=value_default(a2[i2],b3[i2]);for(;i2<nb;++i2)c3[i2]=b3[i2];return function(t4){for(i2=0;i2<na;++i2)c3[i2]=x5[i2](t4);return c3}}var init_array2=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/array.js"(){init_value(),__name(genericArray,"genericArray")}});function date_default(a2,b3){var d3=new Date;return a2=+a2,b3=+b3,function(t4){return d3.setTime(a2*(1-t4)+b3*t4),d3}}var init_date=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/date.js"(){__name(date_default,"default")}});function number_default(a2,b3){return a2=+a2,b3=+b3,function(t4){return a2*(1-t4)+b3*t4}}var init_number2=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/number.js"(){__name(number_default,"default")}});function object_default(a2,b3){var k2,i2={},c3={};for(k2 in null!==a2&&"object"==typeof a2||(a2={}),null!==b3&&"object"==typeof b3||(b3={}),b3)k2 in a2?i2[k2]=value_default(a2[k2],b3[k2]):c3[k2]=b3[k2];return function(t4){for(k2 in i2)c3[k2]=i2[k2](t4);return c3}}var reA,reB,init_object=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/object.js"(){init_value(),__name(object_default,"default")}});function zero2(b3){return function(){return b3}}function one(b3){return function(t4){return b3(t4)+""}}function string_default(a2,b3){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i2=-1,s2=[],q3=[];for(a2+="",b3+="";(am=reA.exec(a2))&&(bm=reB.exec(b3));)(bs=bm.index)>bi&&(bs=b3.slice(bi,bs),s2[i2]?s2[i2]+=bs:s2[++i2]=bs),(am=am[0])===(bm=bm[0])?s2[i2]?s2[i2]+=bm:s2[++i2]=bm:(s2[++i2]=null,q3.push({i:i2,x:number_default(am,bm)})),bi=reB.lastIndex;return bi<b3.length&&(bs=b3.slice(bi),s2[i2]?s2[i2]+=bs:s2[++i2]=bs),s2.length<2?q3[0]?one(q3[0].x):zero2(b3):(b3=q3.length,function(t4){for(var o2,i3=0;i3<b3;++i3)s2[(o2=q3[i3]).i]=o2.x(t4);return s2.join("")})}var init_string=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/string.js"(){init_number2(),reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g"),__name(zero2,"zero"),__name(one,"one"),__name(string_default,"default")}});function value_default(a2,b3){var c3,t4=typeof b3;return null==b3||"boolean"===t4?constant_default2(b3):("number"===t4?number_default:"string"===t4?(c3=color(b3))?(b3=c3,rgb_default2):string_default:b3 instanceof color?rgb_default2:b3 instanceof Date?date_default:isNumberArray(b3)?numberArray_default:Array.isArray(b3)?genericArray:"function"!=typeof b3.valueOf&&"function"!=typeof b3.toString||isNaN(b3)?object_default:number_default)(a2,b3)}var init_value=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/value.js"(){init_src7(),init_rgb2(),init_array2(),init_date(),init_number2(),init_object(),init_string(),init_constant2(),init_numberArray(),__name(value_default,"default")}});function round_default(a2,b3){return a2=+a2,b3=+b3,function(t4){return Math.round(a2*(1-t4)+b3*t4)}}var degrees2,identity,init_round=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/round.js"(){__name(round_default,"default")}});function decompose_default(a2,b3,c3,d3,e3,f2){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a2*a2+b3*b3))&&(a2/=scaleX,b3/=scaleX),(skewX=a2*c3+b3*d3)&&(c3-=a2*skewX,d3-=b3*skewX),(scaleY=Math.sqrt(c3*c3+d3*d3))&&(c3/=scaleY,d3/=scaleY,skewX/=scaleY),a2*d3<b3*c3&&(a2=-a2,b3=-b3,skewX=-skewX,scaleX=-scaleX),{translateX:e3,translateY:f2,rotate:Math.atan2(b3,a2)*degrees2,skewX:Math.atan(skewX)*degrees2,scaleX:scaleX,scaleY:scaleY}}var svgNode,init_decompose=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/decompose.js"(){degrees2=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},__name(decompose_default,"default")}});function parseCss(value2){const m3=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value2+"");return m3.isIdentity?identity:decompose_default(m3.a,m3.b,m3.c,m3.d,m3.e,m3.f)}function parseSvg(value2){return null==value2?identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value2),(value2=svgNode.transform.baseVal.consolidate())?decompose_default((value2=value2.matrix).a,value2.b,value2.c,value2.d,value2.e,value2.f):identity)}var interpolateTransformCss,interpolateTransformSvg,init_parse=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/parse.js"(){init_decompose(),__name(parseCss,"parseCss"),__name(parseSvg,"parseSvg")}});function interpolateTransform(parse7,pxComma,pxParen,degParen){function pop(s2){return s2.length?s2.pop()+" ":""}function translate2(xa,ya,xb,yb,s2,q3){if(xa!==xb||ya!==yb){var i2=s2.push("translate(",null,pxComma,null,pxParen);q3.push({i:i2-4,x:number_default(xa,xb)},{i:i2-2,x:number_default(ya,yb)})}else(xb||yb)&&s2.push("translate("+xb+pxComma+yb+pxParen)}function rotate2(a2,b3,s2,q3){a2!==b3?(a2-b3>180?b3+=360:b3-a2>180&&(a2+=360),q3.push({i:s2.push(pop(s2)+"rotate(",null,degParen)-2,x:number_default(a2,b3)})):b3&&s2.push(pop(s2)+"rotate("+b3+degParen)}function skewX(a2,b3,s2,q3){a2!==b3?q3.push({i:s2.push(pop(s2)+"skewX(",null,degParen)-2,x:number_default(a2,b3)}):b3&&s2.push(pop(s2)+"skewX("+b3+degParen)}function scale2(xa,ya,xb,yb,s2,q3){if(xa!==xb||ya!==yb){var i2=s2.push(pop(s2)+"scale(",null,",",null,")");q3.push({i:i2-4,x:number_default(xa,xb)},{i:i2-2,x:number_default(ya,yb)})}else 1===xb&&1===yb||s2.push(pop(s2)+"scale("+xb+","+yb+")")}return __name(pop,"pop"),__name(translate2,"translate"),__name(rotate2,"rotate"),__name(skewX,"skewX"),__name(scale2,"scale"),function(a2,b3){var s2=[],q3=[];return a2=parse7(a2),b3=parse7(b3),translate2(a2.translateX,a2.translateY,b3.translateX,b3.translateY,s2,q3),rotate2(a2.rotate,b3.rotate,s2,q3),skewX(a2.skewX,b3.skewX,s2,q3),scale2(a2.scaleX,a2.scaleY,b3.scaleX,b3.scaleY,s2,q3),a2=b3=null,function(t4){for(var o2,i2=-1,n2=q3.length;++i2<n2;)s2[(o2=q3[i2]).i]=o2.x(t4);return s2.join("")}}}var hcl_default,init_transform=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/index.js"(){init_number2(),init_parse(),__name(interpolateTransform,"interpolateTransform"),interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")")}});function hcl2(hue2){return function(start3,end2){var h3=hue2((start3=hcl(start3)).h,(end2=hcl(end2)).h),c3=nogamma(start3.c,end2.c),l4=nogamma(start3.l,end2.l),opacity=nogamma(start3.opacity,end2.opacity);return function(t4){return start3.h=h3(t4),start3.c=c3(t4),start3.l=l4(t4),start3.opacity=opacity(t4),start3+""}}}var frame,timeout,interval,pokeDelay,taskHead,taskTail,clockLast,clockNow,clockSkew,clock,setFrame,init_hcl=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/hcl.js"(){init_src7(),init_color3(),__name(hcl2,"hcl"),hcl_default=hcl2(hue),hcl2(nogamma)}}),init_src8=__esm({"../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/index.js"(){init_value(),init_number2(),init_round(),init_string(),init_transform(),init_rgb2(),init_hcl()}});function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay2,time4){var t4=new Timer;return t4.restart(callback,delay2,time4),t4}function timerFlush(){now(),++frame;for(var e3,t4=taskHead;t4;)(e3=clockNow-t4._time)>=0&&t4._call.call(void 0,e3),t4=t4._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var now3=clock.now(),delay2=now3-clockLast;delay2>pokeDelay&&(clockSkew-=delay2,clockLast=now3)}function nap(){for(var t03,t22,t13=taskHead,time4=1/0;t13;)t13._call?(time4>t13._time&&(time4=t13._time),t03=t13,t13=t13._next):(t22=t13._next,t13._next=null,t13=t03?t03._next=t22:taskHead=t22);taskTail=t03,sleep(time4)}function sleep(time4){frame||(timeout&&(timeout=clearTimeout(timeout)),time4-clockNow>24?(time4<1/0&&(timeout=setTimeout(wake,time4-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}var init_timer=__esm({"../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timer.js"(){frame=0,timeout=0,interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f2){setTimeout(f2,17)},__name(now,"now"),__name(clearNow,"clearNow"),__name(Timer,"Timer"),Timer.prototype=timer.prototype={constructor:Timer,restart:__name(function(callback,delay2,time4){if("function"!=typeof callback)throw new TypeError("callback is not a function");time4=(null==time4?now():+time4)+(null==delay2?0:+delay2),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time4,sleep()},"restart"),stop:__name(function(){this._call&&(this._call=null,this._time=1/0,sleep())},"stop")},__name(timer,"timer"),__name(timerFlush,"timerFlush"),__name(wake,"wake"),__name(poke,"poke"),__name(nap,"nap"),__name(sleep,"sleep")}});function timeout_default(callback,delay2,time4){var t4=new Timer;return delay2=null==delay2?0:+delay2,t4.restart(elapsed=>{t4.stop(),callback(elapsed+delay2)},delay2,time4),t4}var emptyOn,emptyTween,CREATED,SCHEDULED,STARTING,STARTED,RUNNING,ENDING,ENDED,init_timeout=__esm({"../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timeout.js"(){init_timer(),__name(timeout_default,"default")}}),init_src9=__esm({"../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/index.js"(){init_timer(),init_timeout()}});function schedule_default(node2,name,id30,index,group2,timing){var schedules=node2.__transition;if(schedules){if(id30 in schedules)return}else node2.__transition={};create2(node2,id30,{name:name,index:index,group:group2,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED})}function init(node2,id30){var schedule=get2(node2,id30);if(schedule.state>CREATED)throw new Error("too late; already scheduled");return schedule}function set2(node2,id30){var schedule=get2(node2,id30);if(schedule.state>STARTED)throw new Error("too late; already running");return schedule}function get2(node2,id30){var schedule=node2.__transition;if(!schedule||!(schedule=schedule[id30]))throw new Error("transition not found");return schedule}function create2(node2,id30,self2){var tween,schedules=node2.__transition;function schedule(elapsed){self2.state=SCHEDULED,self2.timer.restart(start3,self2.delay,self2.time),self2.delay<=elapsed&&start3(elapsed-self2.delay)}function start3(elapsed){var i2,j3,n2,o2;if(self2.state!==SCHEDULED)return stop5();for(i2 in schedules)if((o2=schedules[i2]).name===self2.name){if(o2.state===STARTED)return timeout_default(start3);o2.state===RUNNING?(o2.state=ENDED,o2.timer.stop(),o2.on.call("interrupt",node2,node2.__data__,o2.index,o2.group),delete schedules[i2]):+i2<id30&&(o2.state=ENDED,o2.timer.stop(),o2.on.call("cancel",node2,node2.__data__,o2.index,o2.group),delete schedules[i2])}if(timeout_default(function(){self2.state===STARTED&&(self2.state=RUNNING,self2.timer.restart(tick,self2.delay,self2.time),tick(elapsed))}),self2.state=STARTING,self2.on.call("start",node2,node2.__data__,self2.index,self2.group),self2.state===STARTING){for(self2.state=STARTED,tween=new Array(n2=self2.tween.length),i2=0,j3=-1;i2<n2;++i2)(o2=self2.tween[i2].value.call(node2,node2.__data__,self2.index,self2.group))&&(tween[++j3]=o2);tween.length=j3+1}}function tick(elapsed){for(var t4=elapsed<self2.duration?self2.ease.call(null,elapsed/self2.duration):(self2.timer.restart(stop5),self2.state=ENDING,1),i2=-1,n2=tween.length;++i2<n2;)tween[i2].call(node2,t4);self2.state===ENDING&&(self2.on.call("end",node2,node2.__data__,self2.index,self2.group),stop5())}function stop5(){for(var i2 in self2.state=ENDED,self2.timer.stop(),delete schedules[id30],schedules)return;delete node2.__transition}schedules[id30]=self2,self2.timer=timer(schedule,0,self2.time),__name(schedule,"schedule"),__name(start3,"start"),__name(tick,"tick"),__name(stop5,"stop")}var init_schedule=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/schedule.js"(){init_src4(),init_src9(),emptyOn=dispatch_default("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6,__name(schedule_default,"default"),__name(init,"init"),__name(set2,"set"),__name(get2,"get"),__name(create2,"create")}});function interrupt_default(node2,name){var schedule,active,i2,schedules=node2.__transition,empty3=!0;if(schedules){for(i2 in name=null==name?null:name+"",schedules)(schedule=schedules[i2]).name===name?(active=schedule.state>STARTING&&schedule.state<ENDING,schedule.state=ENDED,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node2,node2.__data__,schedule.index,schedule.group),delete schedules[i2]):empty3=!1;empty3&&delete node2.__transition}}var init_interrupt=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/interrupt.js"(){init_schedule(),__name(interrupt_default,"default")}});function interrupt_default2(name){return this.each(function(){interrupt_default(this,name)})}var init_interrupt2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/interrupt.js"(){init_interrupt(),__name(interrupt_default2,"default")}});function tweenRemove(id30,name){var tween0,tween1;return function(){var schedule=set2(this,id30),tween=schedule.tween;if(tween!==tween0)for(var i2=0,n2=(tween1=tween0=tween).length;i2<n2;++i2)if(tween1[i2].name===name){(tween1=tween1.slice()).splice(i2,1);break}schedule.tween=tween1}}function tweenFunction(id30,name,value2){var tween0,tween1;if("function"!=typeof value2)throw new Error;return function(){var schedule=set2(this,id30),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t4={name:name,value:value2},i2=0,n2=tween1.length;i2<n2;++i2)if(tween1[i2].name===name){tween1[i2]=t4;break}i2===n2&&tween1.push(t4)}schedule.tween=tween1}}function tween_default(name,value2){var id30=this._id;if(name+="",arguments.length<2){for(var t4,tween=get2(this.node(),id30).tween,i2=0,n2=tween.length;i2<n2;++i2)if((t4=tween[i2]).name===name)return t4.value;return null}return this.each((null==value2?tweenRemove:tweenFunction)(id30,name,value2))}function tweenValue(transition2,name,value2){var id30=transition2._id;return transition2.each(function(){var schedule=set2(this,id30);(schedule.value||(schedule.value={}))[name]=value2.apply(this,arguments)}),function(node2){return get2(node2,id30).value[name]}}var init_tween=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/tween.js"(){init_schedule(),__name(tweenRemove,"tweenRemove"),__name(tweenFunction,"tweenFunction"),__name(tween_default,"default"),__name(tweenValue,"tweenValue")}});function interpolate_default(a2,b3){var c3;return("number"==typeof b3?number_default:b3 instanceof color?rgb_default2:(c3=color(b3))?(b3=c3,rgb_default2):string_default)(a2,b3)}var init_interpolate=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/interpolate.js"(){init_src7(),init_src8(),__name(interpolate_default,"default")}});function attrRemove2(name){return function(){this.removeAttribute(name)}}function attrRemoveNS2(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant2(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS2(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction2(name,interpolate,value2){var string00,string10,interpolate0;return function(){var string0,string1,value1=value2(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attrFunctionNS2(fullname,interpolate,value2){var string00,string10,interpolate0;return function(){var string0,string1,value1=value2(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attr_default2(name,value2){var fullname=namespace_default(name),i2="transform"===fullname?interpolateTransformSvg:interpolate_default;return this.attrTween(name,"function"==typeof value2?(fullname.local?attrFunctionNS2:attrFunction2)(fullname,i2,tweenValue(this,"attr."+name,value2)):null==value2?(fullname.local?attrRemoveNS2:attrRemove2)(fullname):(fullname.local?attrConstantNS2:attrConstant2)(fullname,i2,value2))}var init_attr2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attr.js"(){init_src8(),init_src5(),init_tween(),init_interpolate(),__name(attrRemove2,"attrRemove"),__name(attrRemoveNS2,"attrRemoveNS"),__name(attrConstant2,"attrConstant"),__name(attrConstantNS2,"attrConstantNS"),__name(attrFunction2,"attrFunction"),__name(attrFunctionNS2,"attrFunctionNS"),__name(attr_default2,"default")}});function attrInterpolate(name,i2){return function(t4){this.setAttribute(name,i2.call(this,t4))}}function attrInterpolateNS(fullname,i2){return function(t4){this.setAttributeNS(fullname.space,fullname.local,i2.call(this,t4))}}function attrTweenNS(fullname,value2){var t03,i0;function tween(){var i2=value2.apply(this,arguments);return i2!==i0&&(t03=(i0=i2)&&attrInterpolateNS(fullname,i2)),t03}return __name(tween,"tween"),tween._value=value2,tween}function attrTween(name,value2){var t03,i0;function tween(){var i2=value2.apply(this,arguments);return i2!==i0&&(t03=(i0=i2)&&attrInterpolate(name,i2)),t03}return __name(tween,"tween"),tween._value=value2,tween}function attrTween_default(name,value2){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value2)return this.tween(key,null);if("function"!=typeof value2)throw new Error;var fullname=namespace_default(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value2))}var init_attrTween=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attrTween.js"(){init_src5(),__name(attrInterpolate,"attrInterpolate"),__name(attrInterpolateNS,"attrInterpolateNS"),__name(attrTweenNS,"attrTweenNS"),__name(attrTween,"attrTween"),__name(attrTween_default,"default")}});function delayFunction(id30,value2){return function(){init(this,id30).delay=+value2.apply(this,arguments)}}function delayConstant(id30,value2){return value2=+value2,function(){init(this,id30).delay=value2}}function delay_default(value2){var id30=this._id;return arguments.length?this.each(("function"==typeof value2?delayFunction:delayConstant)(id30,value2)):get2(this.node(),id30).delay}var init_delay=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/delay.js"(){init_schedule(),__name(delayFunction,"delayFunction"),__name(delayConstant,"delayConstant"),__name(delay_default,"default")}});function durationFunction(id30,value2){return function(){set2(this,id30).duration=+value2.apply(this,arguments)}}function durationConstant(id30,value2){return value2=+value2,function(){set2(this,id30).duration=value2}}function duration_default(value2){var id30=this._id;return arguments.length?this.each(("function"==typeof value2?durationFunction:durationConstant)(id30,value2)):get2(this.node(),id30).duration}var init_duration=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/duration.js"(){init_schedule(),__name(durationFunction,"durationFunction"),__name(durationConstant,"durationConstant"),__name(duration_default,"default")}});function easeConstant(id30,value2){if("function"!=typeof value2)throw new Error;return function(){set2(this,id30).ease=value2}}function ease_default(value2){var id30=this._id;return arguments.length?this.each(easeConstant(id30,value2)):get2(this.node(),id30).ease}var init_ease=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/ease.js"(){init_schedule(),__name(easeConstant,"easeConstant"),__name(ease_default,"default")}});function easeVarying(id30,value2){return function(){var v3=value2.apply(this,arguments);if("function"!=typeof v3)throw new Error;set2(this,id30).ease=v3}}function easeVarying_default(value2){if("function"!=typeof value2)throw new Error;return this.each(easeVarying(this._id,value2))}var init_easeVarying=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/easeVarying.js"(){init_schedule(),__name(easeVarying,"easeVarying"),__name(easeVarying_default,"default")}});function filter_default2(match2){"function"!=typeof match2&&(match2=matcher_default(match2));for(var groups=this._groups,m3=groups.length,subgroups=new Array(m3),j3=0;j3<m3;++j3)for(var node2,group2=groups[j3],n2=group2.length,subgroup=subgroups[j3]=[],i2=0;i2<n2;++i2)(node2=group2[i2])&&match2.call(node2,node2.__data__,i2,group2)&&subgroup.push(node2);return new Transition(subgroups,this._parents,this._name,this._id)}var init_filter2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/filter.js"(){init_src5(),init_transition2(),__name(filter_default2,"default")}});function merge_default2(transition2){if(transition2._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition2._groups,m0=groups0.length,m1=groups1.length,m3=Math.min(m0,m1),merges=new Array(m0),j3=0;j3<m3;++j3)for(var node2,group0=groups0[j3],group1=groups1[j3],n2=group0.length,merge5=merges[j3]=new Array(n2),i2=0;i2<n2;++i2)(node2=group0[i2]||group1[i2])&&(merge5[i2]=node2);for(;j3<m0;++j3)merges[j3]=groups0[j3];return new Transition(merges,this._parents,this._name,this._id)}var init_merge3=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/merge.js"(){init_transition2(),__name(merge_default2,"default")}});function start(name){return(name+"").trim().split(/^|\s+/).every(function(t4){var i2=t4.indexOf(".");return i2>=0&&(t4=t4.slice(0,i2)),!t4||"start"===t4})}function onFunction(id30,name,listener){var on0,on1,sit=start(name)?init:set2;return function(){var schedule=sit(this,id30),on3=schedule.on;on3!==on0&&(on1=(on0=on3).copy()).on(name,listener),schedule.on=on1}}function on_default2(name,listener){var id30=this._id;return arguments.length<2?get2(this.node(),id30).on.on(name):this.each(onFunction(id30,name,listener))}var init_on2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/on.js"(){init_schedule(),__name(start,"start"),__name(onFunction,"onFunction"),__name(on_default2,"default")}});function removeFunction(id30){return function(){var parent4=this.parentNode;for(var i2 in this.__transition)if(+i2!==id30)return;parent4&&parent4.removeChild(this)}}function remove_default2(){return this.on("end.remove",removeFunction(this._id))}var init_remove2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/remove.js"(){__name(removeFunction,"removeFunction"),__name(remove_default2,"default")}});function select_default3(select){var name=this._name,id30=this._id;"function"!=typeof select&&(select=selector_default(select));for(var groups=this._groups,m3=groups.length,subgroups=new Array(m3),j3=0;j3<m3;++j3)for(var node2,subnode,group2=groups[j3],n2=group2.length,subgroup=subgroups[j3]=new Array(n2),i2=0;i2<n2;++i2)(node2=group2[i2])&&(subnode=select.call(node2,node2.__data__,i2,group2))&&("__data__"in node2&&(subnode.__data__=node2.__data__),subgroup[i2]=subnode,schedule_default(subgroup[i2],name,id30,i2,subgroup,get2(node2,id30)));return new Transition(subgroups,this._parents,name,id30)}var init_select3=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/select.js"(){init_src5(),init_transition2(),init_schedule(),__name(select_default3,"default")}});function selectAll_default2(select){var name=this._name,id30=this._id;"function"!=typeof select&&(select=selectorAll_default(select));for(var groups=this._groups,m3=groups.length,subgroups=[],parents3=[],j3=0;j3<m3;++j3)for(var node2,group2=groups[j3],n2=group2.length,i2=0;i2<n2;++i2)if(node2=group2[i2]){for(var child,children2=select.call(node2,node2.__data__,i2,group2),inherit2=get2(node2,id30),k2=0,l4=children2.length;k2<l4;++k2)(child=children2[k2])&&schedule_default(child,name,id30,k2,children2,inherit2);subgroups.push(children2),parents3.push(node2)}return new Transition(subgroups,parents3,name,id30)}var Selection2,init_selectAll2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selectAll.js"(){init_src5(),init_transition2(),init_schedule(),__name(selectAll_default2,"default")}});function selection_default2(){return new Selection2(this._groups,this._parents)}var init_selection2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selection.js"(){init_src5(),Selection2=selection_default.prototype.constructor,__name(selection_default2,"default")}});function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}function styleRemove2(name){return function(){this.style.removeProperty(name)}}function styleConstant2(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function styleFunction2(name,interpolate,value2){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value2(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}function styleMaybeRemove(id30,name){var on0,on1,listener0,remove3,key="style."+name,event3="end."+key;return function(){var schedule=set2(this,id30),on3=schedule.on,listener=null==schedule.value[key]?remove3||(remove3=styleRemove2(name)):void 0;on3===on0&&listener0===listener||(on1=(on0=on3).copy()).on(event3,listener0=listener),schedule.on=on1}}function style_default2(name,value2,priority3){var i2="transform"==(name+="")?interpolateTransformCss:interpolate_default;return null==value2?this.styleTween(name,styleNull(name,i2)).on("end.style."+name,styleRemove2(name)):"function"==typeof value2?this.styleTween(name,styleFunction2(name,i2,tweenValue(this,"style."+name,value2))).each(styleMaybeRemove(this._id,name)):this.styleTween(name,styleConstant2(name,i2,value2),priority3).on("end.style."+name,null)}var init_style2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/style.js"(){init_src8(),init_src5(),init_schedule(),init_tween(),init_interpolate(),__name(styleNull,"styleNull"),__name(styleRemove2,"styleRemove"),__name(styleConstant2,"styleConstant"),__name(styleFunction2,"styleFunction"),__name(styleMaybeRemove,"styleMaybeRemove"),__name(style_default2,"default")}});function styleInterpolate(name,i2,priority3){return function(t4){this.style.setProperty(name,i2.call(this,t4),priority3)}}function styleTween(name,value2,priority3){var t4,i0;function tween(){var i2=value2.apply(this,arguments);return i2!==i0&&(t4=(i0=i2)&&styleInterpolate(name,i2,priority3)),t4}return __name(tween,"tween"),tween._value=value2,tween}function styleTween_default(name,value2,priority3){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value2)return this.tween(key,null);if("function"!=typeof value2)throw new Error;return this.tween(key,styleTween(name,value2,null==priority3?"":priority3))}var init_styleTween=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/styleTween.js"(){__name(styleInterpolate,"styleInterpolate"),__name(styleTween,"styleTween"),__name(styleTween_default,"default")}});function textConstant2(value2){return function(){this.textContent=value2}}function textFunction2(value2){return function(){var value1=value2(this);this.textContent=null==value1?"":value1}}function text_default2(value2){return this.tween("text","function"==typeof value2?textFunction2(tweenValue(this,"text",value2)):textConstant2(null==value2?"":value2+""))}var init_text2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/text.js"(){init_tween(),__name(textConstant2,"textConstant"),__name(textFunction2,"textFunction"),__name(text_default2,"default")}});function textInterpolate(i2){return function(t4){this.textContent=i2.call(this,t4)}}function textTween(value2){var t03,i0;function tween(){var i2=value2.apply(this,arguments);return i2!==i0&&(t03=(i0=i2)&&textInterpolate(i2)),t03}return __name(tween,"tween"),tween._value=value2,tween}function textTween_default(value2){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value2)return this.tween(key,null);if("function"!=typeof value2)throw new Error;return this.tween(key,textTween(value2))}var init_textTween=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/textTween.js"(){__name(textInterpolate,"textInterpolate"),__name(textTween,"textTween"),__name(textTween_default,"default")}});function transition_default(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m3=groups.length,j3=0;j3<m3;++j3)for(var node2,group2=groups[j3],n2=group2.length,i2=0;i2<n2;++i2)if(node2=group2[i2]){var inherit2=get2(node2,id0);schedule_default(node2,name,id1,i2,group2,{time:inherit2.time+inherit2.delay+inherit2.duration,delay:0,duration:inherit2.duration,ease:inherit2.ease})}return new Transition(groups,this._parents,name,id1)}var init_transition=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/transition.js"(){init_transition2(),init_schedule(),__name(transition_default,"default")}});function end_default(){var on0,on1,that=this,id30=that._id,size4=that.size();return new Promise(function(resolve2,reject3){var cancel={value:reject3},end2={value:__name(function(){0===--size4&&resolve2()},"value")};that.each(function(){var schedule=set2(this,id30),on3=schedule.on;on3!==on0&&((on1=(on0=on3).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end2)),schedule.on=on1}),0===size4&&resolve2()})}var id,selection_prototype,init_end=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/end.js"(){init_schedule(),__name(end_default,"default")}});function Transition(groups,parents3,name,id30){this._groups=groups,this._parents=parents3,this._name=name,this._id=id30}function transition(name){return selection_default().transition(name)}function newId(){return++id}var init_transition2=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/index.js"(){init_src5(),init_attr2(),init_attrTween(),init_delay(),init_duration(),init_ease(),init_easeVarying(),init_filter2(),init_merge3(),init_on2(),init_remove2(),init_select3(),init_selectAll2(),init_selection2(),init_style2(),init_styleTween(),init_text2(),init_textTween(),init_transition(),init_tween(),init_end(),id=0,__name(Transition,"Transition"),__name(transition,"transition"),__name(newId,"newId"),selection_prototype=selection_default.prototype,Transition.prototype=transition.prototype={constructor:Transition,select:select_default3,selectAll:selectAll_default2,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:filter_default2,merge:merge_default2,selection:selection_default2,transition:transition_default,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:on_default2,attr:attr_default2,attrTween:attrTween_default,style:style_default2,styleTween:styleTween_default,text:text_default2,textTween:textTween_default,remove:remove_default2,tween:tween_default,delay:delay_default,duration:duration_default,ease:ease_default,easeVarying:easeVarying_default,end:end_default,[Symbol.iterator]:selection_prototype[Symbol.iterator]}}});function cubicInOut(t4){return((t4*=2)<=1?t4*t4*t4:(t4-=2)*t4*t4+2)/2}var defaultTiming,init_cubic=__esm({"../../node_modules/.pnpm/d3-ease@3.0.1/node_modules/d3-ease/src/cubic.js"(){__name(cubicInOut,"cubicInOut")}}),init_src10=__esm({"../../node_modules/.pnpm/d3-ease@3.0.1/node_modules/d3-ease/src/index.js"(){init_cubic()}});function inherit(node2,id30){for(var timing;!(timing=node2.__transition)||!(timing=timing[id30]);)if(!(node2=node2.parentNode))throw new Error(`transition ${id30} not found`);return timing}function transition_default2(name){var id30,timing;name instanceof Transition?(id30=name._id,name=name._name):(id30=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m3=groups.length,j3=0;j3<m3;++j3)for(var node2,group2=groups[j3],n2=group2.length,i2=0;i2<n2;++i2)(node2=group2[i2])&&schedule_default(node2,name,id30,i2,group2,timing||inherit(node2,id30));return new Transition(groups,this._parents,name,id30)}var abs,max2,min2,init_transition3=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/transition.js"(){init_transition2(),init_schedule(),init_src10(),init_src9(),defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut},__name(inherit,"inherit"),__name(transition_default2,"default")}}),init_selection3=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/index.js"(){init_src5(),init_interrupt2(),init_transition3(),selection_default.prototype.interrupt=interrupt_default2,selection_default.prototype.transition=transition_default2}}),init_src11=__esm({"../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/index.js"(){init_selection3()}}),init_constant3=__esm({"../../node_modules/.pnpm/d3-brush@3.0.0/node_modules/d3-brush/src/constant.js"(){}}),init_event=__esm({"../../node_modules/.pnpm/d3-brush@3.0.0/node_modules/d3-brush/src/event.js"(){}}),init_noevent=__esm({"../../node_modules/.pnpm/d3-brush@3.0.0/node_modules/d3-brush/src/noevent.js"(){}});function number1(e3){return[+e3[0],+e3[1]]}function number22(e3){return[number1(e3[0]),number1(e3[1])]}function type(t4){return{type:t4}}var pi,tau,tauEpsilon,Path,init_brush=__esm({"../../node_modules/.pnpm/d3-brush@3.0.0/node_modules/d3-brush/src/brush.js"(){init_src11(),init_constant3(),init_event(),init_noevent(),({abs:abs,max:max2,min:min2}=Math),__name(number1,"number1"),__name(number22,"number2"),{name:"x",handles:["w","e"].map(type),input:__name(function(x5,e3){return null==x5?null:[[+x5[0],e3[0][1]],[+x5[1],e3[1][1]]]},"input"),output:__name(function(xy){return xy&&[xy[0][0],xy[1][0]]},"output")},{name:"y",handles:["n","s"].map(type),input:__name(function(y6,e3){return null==y6?null:[[e3[0][0],+y6[0]],[e3[1][0],+y6[1]]]},"input"),output:__name(function(xy){return xy&&[xy[0][1],xy[1][1]]},"output")},{name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:__name(function(xy){return null==xy?null:number22(xy)},"input"),output:__name(function(xy){return xy},"output")},__name(type,"type")}}),init_src12=__esm({"../../node_modules/.pnpm/d3-brush@3.0.0/node_modules/d3-brush/src/index.js"(){init_brush()}});function append(strings){this._+=strings[0];for(let i2=1,n2=strings.length;i2<n2;++i2)this._+=arguments[i2]+strings[i2]}function appendRound(digits){let d3=Math.floor(digits);if(!(d3>=0))throw new Error(`invalid digits: ${digits}`);if(d3>15)return append;const k2=10**d3;return function(strings){this._+=strings[0];for(let i2=1,n2=strings.length;i2<n2;++i2)this._+=Math.round(arguments[i2]*k2)/k2+strings[i2]}}function path2(){return new Path}var init_path=__esm({"../../node_modules/.pnpm/d3-path@3.1.0/node_modules/d3-path/src/path.js"(){pi=Math.PI,tauEpsilon=(tau=2*pi)-1e-6,__name(append,"append"),__name(appendRound,"appendRound"),Path=class{static{__name(this,"Path")}constructor(digits){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==digits?append:appendRound(digits)}moveTo(x5,y6){this._append`M${this._x0=this._x1=+x5},${this._y0=this._y1=+y6}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(x5,y6){this._append`L${this._x1=+x5},${this._y1=+y6}`}quadraticCurveTo(x1,y1,x5,y6){this._append`Q${+x1},${+y1},${this._x1=+x5},${this._y1=+y6}`}bezierCurveTo(x1,y1,x22,y22,x5,y6){this._append`C${+x1},${+y1},${+x22},${+y22},${this._x1=+x5},${this._y1=+y6}`}arcTo(x1,y1,x22,y22,r2){if(x1=+x1,y1=+y1,x22=+x22,y22=+y22,(r2=+r2)<0)throw new Error(`negative radius: ${r2}`);let x0=this._x1,y0=this._y1,x21=x22-x1,y21=y22-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(null===this._x1)this._append`M${this._x1=x1},${this._y1=y1}`;else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r2){let x20=x22-x0,y20=y22-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l4=r2*Math.tan((pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l4/l01,t21=l4/l21;Math.abs(t01-1)>1e-6&&this._append`L${x1+t01*x01},${y1+t01*y01}`,this._append`A${r2},${r2},0,0,${+(y01*x20>x01*y20)},${this._x1=x1+t21*x21},${this._y1=y1+t21*y21}`}else this._append`L${this._x1=x1},${this._y1=y1}`;else;}arc(x5,y6,r2,a0,a1,ccw){if(x5=+x5,y6=+y6,ccw=!!ccw,(r2=+r2)<0)throw new Error(`negative radius: ${r2}`);let dx=r2*Math.cos(a0),dy=r2*Math.sin(a0),x0=x5+dx,y0=y6+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;null===this._x1?this._append`M${x0},${y0}`:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&this._append`L${x0},${y0}`,r2&&(da<0&&(da=da%tau+tau),da>tauEpsilon?this._append`A${r2},${r2},0,1,${cw},${x5-dx},${y6-dy}A${r2},${r2},0,1,${cw},${this._x1=x0},${this._y1=y0}`:da>1e-6&&this._append`A${r2},${r2},0,${+(da>=pi)},${cw},${this._x1=x5+r2*Math.cos(a1)},${this._y1=y6+r2*Math.sin(a1)}`)}rect(x5,y6,w4,h3){this._append`M${this._x0=this._x1=+x5},${this._y0=this._y1=+y6}h${w4=+w4}v${+h3}h${-w4}Z`}toString(){return this._}},__name(path2,"path"),path2.prototype=Path.prototype}}),init_src13=__esm({"../../node_modules/.pnpm/d3-path@3.1.0/node_modules/d3-path/src/index.js"(){init_path()}}),init_src14=__esm({"../../node_modules/.pnpm/d3-chord@3.0.1/node_modules/d3-chord/src/index.js"(){}}),init_src15=__esm({"../../node_modules/.pnpm/d3-contour@4.0.2/node_modules/d3-contour/src/index.js"(){}}),init_src16=__esm({"../../node_modules/.pnpm/d3-delaunay@6.0.4/node_modules/d3-delaunay/src/index.js"(){}}),init_src17=__esm({"../../node_modules/.pnpm/d3-dsv@3.0.1/node_modules/d3-dsv/src/index.js"(){}}),init_src18=__esm({"../../node_modules/.pnpm/d3-fetch@3.0.1/node_modules/d3-fetch/src/index.js"(){}}),init_src19=__esm({"../../node_modules/.pnpm/d3-quadtree@3.0.1/node_modules/d3-quadtree/src/index.js"(){}}),init_src20=__esm({"../../node_modules/.pnpm/d3-force@3.0.0/node_modules/d3-force/src/index.js"(){}});function formatDecimal_default(x5){return Math.abs(x5=Math.round(x5))>=1e21?x5.toLocaleString("en").replace(/,/g,""):x5.toString(10)}function formatDecimalParts(x5,p3){if((i2=(x5=p3?x5.toExponential(p3-1):x5.toExponential()).indexOf("e"))<0)return null;var i2,coefficient=x5.slice(0,i2);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x5.slice(i2+1)]}var init_formatDecimal=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatDecimal.js"(){__name(formatDecimal_default,"default"),__name(formatDecimalParts,"formatDecimalParts")}});function exponent_default(x5){return(x5=formatDecimalParts(Math.abs(x5)))?x5[1]:NaN}var init_exponent=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/exponent.js"(){init_formatDecimal(),__name(exponent_default,"default")}});function formatGroup_default(grouping,thousands){return function(value2,width3){for(var i2=value2.length,t4=[],j3=0,g2=grouping[0],length2=0;i2>0&&g2>0&&(length2+g2+1>width3&&(g2=Math.max(1,width3-length2)),t4.push(value2.substring(i2-=g2,i2+g2)),!((length2+=g2+1)>width3));)g2=grouping[j3=(j3+1)%grouping.length];return t4.reverse().join(thousands)}}var init_formatGroup=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatGroup.js"(){__name(formatGroup_default,"default")}});function formatNumerals_default(numerals){return function(value2){return value2.replace(/[0-9]/g,function(i2){return numerals[+i2]})}}var re,init_formatNumerals=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatNumerals.js"(){__name(formatNumerals_default,"default")}});function formatSpecifier(specifier){if(!(match2=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match2;return new FormatSpecifier({fill:match2[1],align:match2[2],sign:match2[3],symbol:match2[4],zero:match2[5],width:match2[6],comma:match2[7],precision:match2[8]&&match2[8].slice(1),trim:match2[9],type:match2[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}var init_formatSpecifier=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatSpecifier.js"(){re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,__name(formatSpecifier,"formatSpecifier"),formatSpecifier.prototype=FormatSpecifier.prototype,__name(FormatSpecifier,"FormatSpecifier"),FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}});function formatTrim_default(s2){out:for(var i1,n2=s2.length,i2=1,i0=-1;i2<n2;++i2)switch(s2[i2]){case".":i0=i1=i2;break;case"0":0===i0&&(i0=i2),i1=i2;break;default:if(!+s2[i2])break out;i0>0&&(i0=0)}return i0>0?s2.slice(0,i0)+s2.slice(i1+1):s2}var prefixExponent,init_formatTrim=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatTrim.js"(){__name(formatTrim_default,"default")}});function formatPrefixAuto_default(x5,p3){var d3=formatDecimalParts(x5,p3);if(!d3)return x5+"";var coefficient=d3[0],exponent=d3[1],i2=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n2=coefficient.length;return i2===n2?coefficient:i2>n2?coefficient+new Array(i2-n2+1).join("0"):i2>0?coefficient.slice(0,i2)+"."+coefficient.slice(i2):"0."+new Array(1-i2).join("0")+formatDecimalParts(x5,Math.max(0,p3+i2-1))[0]}var init_formatPrefixAuto=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatPrefixAuto.js"(){init_formatDecimal(),__name(formatPrefixAuto_default,"default")}});function formatRounded_default(x5,p3){var d3=formatDecimalParts(x5,p3);if(!d3)return x5+"";var coefficient=d3[0],exponent=d3[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}var formatTypes_default,init_formatRounded=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatRounded.js"(){init_formatDecimal(),__name(formatRounded_default,"default")}}),init_formatTypes=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatTypes.js"(){init_formatDecimal(),init_formatPrefixAuto(),init_formatRounded(),formatTypes_default={"%":__name((x5,p3)=>(100*x5).toFixed(p3),"%"),b:__name(x5=>Math.round(x5).toString(2),"b"),c:__name(x5=>x5+"","c"),d:formatDecimal_default,e:__name((x5,p3)=>x5.toExponential(p3),"e"),f:__name((x5,p3)=>x5.toFixed(p3),"f"),g:__name((x5,p3)=>x5.toPrecision(p3),"g"),o:__name(x5=>Math.round(x5).toString(8),"o"),p:__name((x5,p3)=>formatRounded_default(100*x5,p3),"p"),r:formatRounded_default,s:formatPrefixAuto_default,X:__name(x5=>Math.round(x5).toString(16).toUpperCase(),"X"),x:__name(x5=>Math.round(x5).toString(16),"x")}}});function identity_default2(x5){return x5}var map,prefixes,init_identity2=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/identity.js"(){__name(identity_default2,"default")}});function locale_default(locale3){var group2=void 0===locale3.grouping||void 0===locale3.thousands?identity_default2:formatGroup_default(map.call(locale3.grouping,Number),locale3.thousands+""),currencyPrefix=void 0===locale3.currency?"":locale3.currency[0]+"",currencySuffix=void 0===locale3.currency?"":locale3.currency[1]+"",decimal=void 0===locale3.decimal?".":locale3.decimal+"",numerals=void 0===locale3.numerals?identity_default2:formatNumerals_default(map.call(locale3.numerals,String)),percent=void 0===locale3.percent?"%":locale3.percent+"",minus=void 0===locale3.minus?"−":locale3.minus+"",nan=void 0===locale3.nan?"NaN":locale3.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign2=specifier.sign,symbol=specifier.symbol,zero3=specifier.zero,width3=specifier.width,comma=specifier.comma,precision=specifier.precision,trim2=specifier.trim,type3=specifier.type;"n"===type3?(comma=!0,type3="g"):formatTypes_default[type3]||(void 0===precision&&(precision=12),trim2=!0,type3="g"),(zero3||"0"===fill&&"="===align)&&(zero3=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type3)?"0"+type3.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type3)?percent:"",formatType=formatTypes_default[type3],maybeSuffix=/[defgprs%]/.test(type3);function format3(value2){var i2,n2,c3,valuePrefix=prefix,valueSuffix=suffix;if("c"===type3)valueSuffix=formatType(value2)+valueSuffix,value2="";else{var valueNegative=(value2=+value2)<0||1/value2<0;if(value2=isNaN(value2)?nan:formatType(Math.abs(value2),precision),trim2&&(value2=formatTrim_default(value2)),valueNegative&&0===+value2&&"+"!==sign2&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign2?sign2:minus:"-"===sign2||"("===sign2?"":sign2)+valuePrefix,valueSuffix=("s"===type3?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign2?")":""),maybeSuffix)for(i2=-1,n2=value2.length;++i2<n2;)if(48>(c3=value2.charCodeAt(i2))||c3>57){valueSuffix=(46===c3?decimal+value2.slice(i2+1):value2.slice(i2))+valueSuffix,value2=value2.slice(0,i2);break}}comma&&!zero3&&(value2=group2(value2,1/0));var length2=valuePrefix.length+value2.length+valueSuffix.length,padding2=length2<width3?new Array(width3-length2+1).join(fill):"";switch(comma&&zero3&&(value2=group2(padding2+value2,padding2.length?width3-valueSuffix.length:1/0),padding2=""),align){case"<":value2=valuePrefix+value2+valueSuffix+padding2;break;case"=":value2=valuePrefix+padding2+value2+valueSuffix;break;case"^":value2=padding2.slice(0,length2=padding2.length>>1)+valuePrefix+value2+valueSuffix+padding2.slice(length2);break;default:value2=padding2+valuePrefix+value2+valueSuffix}return numerals(value2)}return precision=void 0===precision?6:/[gprs]/.test(type3)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),__name(format3,"format"),format3.toString=function(){return specifier+""},format3}function formatPrefix2(specifier,value2){var f2=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e3=3*Math.max(-8,Math.min(8,Math.floor(exponent_default(value2)/3))),k2=Math.pow(10,-e3),prefix=prefixes[8+e3/3];return function(value3){return f2(k2*value3)+prefix}}return __name(newFormat,"newFormat"),__name(formatPrefix2,"formatPrefix"),{format:newFormat,formatPrefix:formatPrefix2}}var locale,format2,formatPrefix,init_locale=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/locale.js"(){init_exponent(),init_formatGroup(),init_formatNumerals(),init_formatSpecifier(),init_formatTrim(),init_formatTypes(),init_formatPrefixAuto(),init_identity2(),map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],__name(locale_default,"default")}});function defaultLocale(definition){return locale=locale_default(definition),format2=locale.format,formatPrefix=locale.formatPrefix,locale}var init_defaultLocale=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/defaultLocale.js"(){init_locale(),defaultLocale({thousands:",",grouping:[3],currency:["$",""]}),__name(defaultLocale,"defaultLocale")}});function precisionFixed_default(step3){return Math.max(0,-exponent_default(Math.abs(step3)))}var init_precisionFixed=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionFixed.js"(){init_exponent(),__name(precisionFixed_default,"default")}});function precisionPrefix_default(step3,value2){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent_default(value2)/3)))-exponent_default(Math.abs(step3)))}var init_precisionPrefix=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionPrefix.js"(){init_exponent(),__name(precisionPrefix_default,"default")}});function precisionRound_default(step3,max10){return step3=Math.abs(step3),max10=Math.abs(max10)-step3,Math.max(0,exponent_default(max10)-exponent_default(step3))+1}var init_precisionRound=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionRound.js"(){init_exponent(),__name(precisionRound_default,"default")}}),init_src21=__esm({"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/index.js"(){init_defaultLocale(),init_formatSpecifier(),init_precisionFixed(),init_precisionPrefix(),init_precisionRound()}}),init_src22=__esm({"../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/index.js"(){}});function count(node2){var sum2=0,children2=node2.children,i2=children2&&children2.length;if(i2)for(;--i2>=0;)sum2+=children2[i2].value;else sum2=1;node2.value=sum2}function count_default(){return this.eachAfter(count)}var init_count=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/count.js"(){__name(count,"count"),__name(count_default,"default")}});function each_default2(callback,that){let index=-1;for(const node2 of this)callback.call(that,node2,++index,this);return this}var init_each2=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/each.js"(){__name(each_default2,"default")}});function eachBefore_default(callback,that){for(var children2,i2,node2=this,nodes5=[node2],index=-1;node2=nodes5.pop();)if(callback.call(that,node2,++index,this),children2=node2.children)for(i2=children2.length-1;i2>=0;--i2)nodes5.push(children2[i2]);return this}var init_eachBefore=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/eachBefore.js"(){__name(eachBefore_default,"default")}});function eachAfter_default(callback,that){for(var children2,i2,n2,node2=this,nodes5=[node2],next3=[],index=-1;node2=nodes5.pop();)if(next3.push(node2),children2=node2.children)for(i2=0,n2=children2.length;i2<n2;++i2)nodes5.push(children2[i2]);for(;node2=next3.pop();)callback.call(that,node2,++index,this);return this}var init_eachAfter=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/eachAfter.js"(){__name(eachAfter_default,"default")}});function find_default(callback,that){let index=-1;for(const node2 of this)if(callback.call(that,node2,++index,this))return node2}var init_find=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/find.js"(){__name(find_default,"default")}});function sum_default(value2){return this.eachAfter(function(node2){for(var sum2=+value2(node2.data)||0,children2=node2.children,i2=children2&&children2.length;--i2>=0;)sum2+=children2[i2].value;node2.value=sum2})}var init_sum=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/sum.js"(){__name(sum_default,"default")}});function sort_default2(compare){return this.eachBefore(function(node2){node2.children&&node2.children.sort(compare)})}var init_sort2=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/sort.js"(){__name(sort_default2,"default")}});function path_default(end2){for(var start3=this,ancestor=leastCommonAncestor(start3,end2),nodes5=[start3];start3!==ancestor;)start3=start3.parent,nodes5.push(start3);for(var k2=nodes5.length;end2!==ancestor;)nodes5.splice(k2,0,end2),end2=end2.parent;return nodes5}function leastCommonAncestor(a2,b3){if(a2===b3)return a2;var aNodes=a2.ancestors(),bNodes=b3.ancestors(),c3=null;for(a2=aNodes.pop(),b3=bNodes.pop();a2===b3;)c3=a2,a2=aNodes.pop(),b3=bNodes.pop();return c3}var init_path2=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/path.js"(){__name(path_default,"default"),__name(leastCommonAncestor,"leastCommonAncestor")}});function ancestors_default(){for(var node2=this,nodes5=[node2];node2=node2.parent;)nodes5.push(node2);return nodes5}var init_ancestors=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/ancestors.js"(){__name(ancestors_default,"default")}});function descendants_default(){return Array.from(this)}var init_descendants=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/descendants.js"(){__name(descendants_default,"default")}});function leaves_default(){var leaves=[];return this.eachBefore(function(node2){node2.children||leaves.push(node2)}),leaves}var init_leaves=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/leaves.js"(){__name(leaves_default,"default")}});function links_default(){var root3=this,links3=[];return root3.each(function(node2){node2!==root3&&links3.push({source:node2.parent,target:node2})}),links3}var init_links=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/links.js"(){__name(links_default,"default")}});function*iterator_default2(){var current,children2,i2,n2,node2=this,next3=[node2];do{for(current=next3.reverse(),next3=[];node2=current.pop();)if(yield node2,children2=node2.children)for(i2=0,n2=children2.length;i2<n2;++i2)next3.push(children2[i2])}while(next3.length)}var init_iterator2=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/iterator.js"(){__name(iterator_default2,"default")}});function hierarchy(data5,children2){data5 instanceof Map?(data5=[void 0,data5],void 0===children2&&(children2=mapChildren)):void 0===children2&&(children2=objectChildren);for(var node2,child,childs,i2,n2,root3=new Node(data5),nodes5=[root3];node2=nodes5.pop();)if((childs=children2(node2.data))&&(n2=(childs=Array.from(childs)).length))for(node2.children=childs,i2=n2-1;i2>=0;--i2)nodes5.push(child=childs[i2]=new Node(childs[i2])),child.parent=node2,child.depth=node2.depth+1;return root3.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(d3){return d3.children}function mapChildren(d3){return Array.isArray(d3)?d3[1]:null}function copyData(node2){void 0!==node2.data.value&&(node2.value=node2.data.value),node2.data=node2.data.data}function computeHeight(node2){var height2=0;do{node2.height=height2}while((node2=node2.parent)&&node2.height<++height2)}function Node(data5){this.data=data5,this.depth=this.height=0,this.parent=null}var init_hierarchy=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/hierarchy/index.js"(){init_count(),init_each2(),init_eachBefore(),init_eachAfter(),init_find(),init_sum(),init_sort2(),init_path2(),init_ancestors(),init_descendants(),init_leaves(),init_links(),init_iterator2(),__name(hierarchy,"hierarchy"),__name(node_copy,"node_copy"),__name(objectChildren,"objectChildren"),__name(mapChildren,"mapChildren"),__name(copyData,"copyData"),__name(computeHeight,"computeHeight"),__name(Node,"Node"),Node.prototype=hierarchy.prototype={constructor:Node,count:count_default,each:each_default2,eachAfter:eachAfter_default,eachBefore:eachBefore_default,find:find_default,sum:sum_default,sort:sort_default2,path:path_default,ancestors:ancestors_default,descendants:descendants_default,leaves:leaves_default,links:links_default,copy:node_copy,[Symbol.iterator]:iterator_default2}}});function required(f2){if("function"!=typeof f2)throw new Error;return f2}var init_accessors=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/accessors.js"(){__name(required,"required")}});function constantZero(){return 0}function constant_default4(x5){return function(){return x5}}var init_constant4=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/constant.js"(){__name(constantZero,"constantZero"),__name(constant_default4,"default")}});function round_default2(node2){node2.x0=Math.round(node2.x0),node2.y0=Math.round(node2.y0),node2.x1=Math.round(node2.x1),node2.y1=Math.round(node2.y1)}var init_round2=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/round.js"(){__name(round_default2,"default")}});function dice_default(parent4,x0,y0,x1,y1){for(var node2,nodes5=parent4.children,i2=-1,n2=nodes5.length,k2=parent4.value&&(x1-x0)/parent4.value;++i2<n2;)(node2=nodes5[i2]).y0=y0,node2.y1=y1,node2.x0=x0,node2.x1=x0+=node2.value*k2}var init_dice=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/dice.js"(){__name(dice_default,"default")}});function slice_default(parent4,x0,y0,x1,y1){for(var node2,nodes5=parent4.children,i2=-1,n2=nodes5.length,k2=parent4.value&&(y1-y0)/parent4.value;++i2<n2;)(node2=nodes5[i2]).x0=x0,node2.x1=x1,node2.y0=y0,node2.y1=y0+=node2.value*k2}var phi,squarify_default,init_slice=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/slice.js"(){__name(slice_default,"default")}});function squarifyRatio(ratio,parent4,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes5=parent4.children,i0=0,i1=0,n2=nodes5.length,value2=parent4.value;i0<n2;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes5[i1++].value}while(!sumValue&&i1<n2);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value2*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n2;++i1){if(sumValue+=nodeValue=nodes5[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes5.slice(i0,i1)}),row.dice?dice_default(row,x0,y0,x1,value2?y0+=dy*sumValue/value2:y1):slice_default(row,x0,y0,value2?x0+=dx*sumValue/value2:x1,y1),value2-=sumValue,i0=i1}return rows}var init_squarify=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/squarify.js"(){init_dice(),init_slice(),phi=(1+Math.sqrt(5))/2,__name(squarifyRatio,"squarifyRatio"),squarify_default=__name(function custom(ratio){function squarify(parent4,x0,y0,x1,y1){squarifyRatio(ratio,parent4,x0,y0,x1,y1)}return __name(squarify,"squarify"),squarify.ratio=function(x5){return custom((x5=+x5)>1?x5:1)},squarify},"custom")(phi)}});function treemap_default(){var tile=squarify_default,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap2(root3){return root3.x0=root3.y0=0,root3.x1=dx,root3.y1=dy,root3.eachBefore(positionNode3),paddingStack=[0],round&&root3.eachBefore(round_default2),root3}function positionNode3(node2){var p3=paddingStack[node2.depth],x0=node2.x0+p3,y0=node2.y0+p3,x1=node2.x1-p3,y1=node2.y1-p3;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node2.x0=x0,node2.y0=y0,node2.x1=x1,node2.y1=y1,node2.children&&(p3=paddingStack[node2.depth+1]=paddingInner(node2)/2,x0+=paddingLeft(node2)-p3,y0+=paddingTop(node2)-p3,(x1-=paddingRight(node2)-p3)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node2)-p3)<y0&&(y0=y1=(y0+y1)/2),tile(node2,x0,y0,x1,y1))}return __name(treemap2,"treemap"),__name(positionNode3,"positionNode"),treemap2.round=function(x5){return arguments.length?(round=!!x5,treemap2):round},treemap2.size=function(x5){return arguments.length?(dx=+x5[0],dy=+x5[1],treemap2):[dx,dy]},treemap2.tile=function(x5){return arguments.length?(tile=required(x5),treemap2):tile},treemap2.padding=function(x5){return arguments.length?treemap2.paddingInner(x5).paddingOuter(x5):treemap2.paddingInner()},treemap2.paddingInner=function(x5){return arguments.length?(paddingInner="function"==typeof x5?x5:constant_default4(+x5),treemap2):paddingInner},treemap2.paddingOuter=function(x5){return arguments.length?treemap2.paddingTop(x5).paddingRight(x5).paddingBottom(x5).paddingLeft(x5):treemap2.paddingTop()},treemap2.paddingTop=function(x5){return arguments.length?(paddingTop="function"==typeof x5?x5:constant_default4(+x5),treemap2):paddingTop},treemap2.paddingRight=function(x5){return arguments.length?(paddingRight="function"==typeof x5?x5:constant_default4(+x5),treemap2):paddingRight},treemap2.paddingBottom=function(x5){return arguments.length?(paddingBottom="function"==typeof x5?x5:constant_default4(+x5),treemap2):paddingBottom},treemap2.paddingLeft=function(x5){return arguments.length?(paddingLeft="function"==typeof x5?x5:constant_default4(+x5),treemap2):paddingLeft},treemap2}var init_treemap=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/treemap/index.js"(){init_round2(),init_squarify(),init_accessors(),init_constant4(),__name(treemap_default,"default")}}),init_src23=__esm({"../../node_modules/.pnpm/d3-hierarchy@3.1.2/node_modules/d3-hierarchy/src/index.js"(){init_hierarchy(),init_treemap()}}),init_src24=__esm({"../../node_modules/.pnpm/d3-polygon@3.0.1/node_modules/d3-polygon/src/index.js"(){}}),init_src25=__esm({"../../node_modules/.pnpm/d3-random@3.0.1/node_modules/d3-random/src/index.js"(){}});function initRange(domain,range3){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range3).domain(domain)}return this}var implicit,init_init=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/init.js"(){__name(initRange,"initRange")}});function ordinal(){var index=new InternMap,domain=[],range3=[],unknown=implicit;function scale2(d3){let i2=index.get(d3);if(void 0===i2){if(unknown!==implicit)return unknown;index.set(d3,i2=domain.push(d3)-1)}return range3[i2%range3.length]}return __name(scale2,"scale"),scale2.domain=function(_3){if(!arguments.length)return domain.slice();domain=[],index=new InternMap;for(const value2 of _3)index.has(value2)||index.set(value2,domain.push(value2)-1);return scale2},scale2.range=function(_3){return arguments.length?(range3=Array.from(_3),scale2):range3.slice()},scale2.unknown=function(_3){return arguments.length?(unknown=_3,scale2):unknown},scale2.copy=function(){return ordinal(domain,range3).unknown(unknown)},initRange.apply(scale2,arguments),scale2}var init_ordinal=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/ordinal.js"(){init_src2(),init_init(),implicit=Symbol("implicit"),__name(ordinal,"ordinal")}});function band(){var step3,bandwidth,scale2=ordinal().unknown(void 0),domain=scale2.domain,ordinalRange=scale2.range,r0=0,r1=1,round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n2=domain().length,reverse2=r1<r0,start3=reverse2?r1:r0,stop5=reverse2?r0:r1;step3=(stop5-start3)/Math.max(1,n2-paddingInner+2*paddingOuter),round&&(step3=Math.floor(step3)),start3+=(stop5-start3-step3*(n2-paddingInner))*align,bandwidth=step3*(1-paddingInner),round&&(start3=Math.round(start3),bandwidth=Math.round(bandwidth));var values2=range(n2).map(function(i2){return start3+step3*i2});return ordinalRange(reverse2?values2.reverse():values2)}return delete scale2.unknown,__name(rescale,"rescale"),scale2.domain=function(_3){return arguments.length?(domain(_3),rescale()):domain()},scale2.range=function(_3){return arguments.length?([r0,r1]=_3,r0=+r0,r1=+r1,rescale()):[r0,r1]},scale2.rangeRound=function(_3){return[r0,r1]=_3,r0=+r0,r1=+r1,round=!0,rescale()},scale2.bandwidth=function(){return bandwidth},scale2.step=function(){return step3},scale2.round=function(_3){return arguments.length?(round=!!_3,rescale()):round},scale2.padding=function(_3){return arguments.length?(paddingInner=Math.min(1,paddingOuter=+_3),rescale()):paddingInner},scale2.paddingInner=function(_3){return arguments.length?(paddingInner=Math.min(1,_3),rescale()):paddingInner},scale2.paddingOuter=function(_3){return arguments.length?(paddingOuter=+_3,rescale()):paddingOuter},scale2.align=function(_3){return arguments.length?(align=Math.max(0,Math.min(1,_3)),rescale()):align},scale2.copy=function(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},initRange.apply(rescale(),arguments)}var init_band=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/band.js"(){init_src2(),init_init(),init_ordinal(),__name(band,"band")}});function constants(x5){return function(){return x5}}var init_constant5=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/constant.js"(){__name(constants,"constants")}});function number3(x5){return+x5}var unit,init_number3=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/number.js"(){__name(number3,"number")}});function identity2(x5){return x5}function normalize(a2,b3){return(b3-=a2=+a2)?function(x5){return(x5-a2)/b3}:constants(isNaN(b3)?NaN:.5)}function clamper(a2,b3){var t4;return a2>b3&&(t4=a2,a2=b3,b3=t4),function(x5){return Math.max(a2,Math.min(b3,x5))}}function bimap(domain,range3,interpolate){var d0=domain[0],d1=domain[1],r0=range3[0],r1=range3[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x5){return r0(d0(x5))}}function polymap(domain,range3,interpolate){var j3=Math.min(domain.length,range3.length)-1,d3=new Array(j3),r2=new Array(j3),i2=-1;for(domain[j3]<domain[0]&&(domain=domain.slice().reverse(),range3=range3.slice().reverse());++i2<j3;)d3[i2]=normalize(domain[i2],domain[i2+1]),r2[i2]=interpolate(range3[i2],range3[i2+1]);return function(x5){var i3=bisect_default(domain,x5,1,j3)-1;return r2[i3](d3[i3](x5))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform8,untransform,unknown,piecewise,output2,input,domain=unit,range3=unit,interpolate=value_default,clamp=identity2;function rescale(){var n2=Math.min(domain.length,range3.length);return clamp!==identity2&&(clamp=clamper(domain[0],domain[n2-1])),piecewise=n2>2?polymap:bimap,output2=input=null,scale2}function scale2(x5){return null==x5||isNaN(x5=+x5)?unknown:(output2||(output2=piecewise(domain.map(transform8),range3,interpolate)))(transform8(clamp(x5)))}return __name(rescale,"rescale"),__name(scale2,"scale"),scale2.invert=function(y6){return clamp(untransform((input||(input=piecewise(range3,domain.map(transform8),number_default)))(y6)))},scale2.domain=function(_3){return arguments.length?(domain=Array.from(_3,number3),rescale()):domain.slice()},scale2.range=function(_3){return arguments.length?(range3=Array.from(_3),rescale()):range3.slice()},scale2.rangeRound=function(_3){return range3=Array.from(_3),interpolate=round_default,rescale()},scale2.clamp=function(_3){return arguments.length?(clamp=!!_3||identity2,rescale()):clamp!==identity2},scale2.interpolate=function(_3){return arguments.length?(interpolate=_3,rescale()):interpolate},scale2.unknown=function(_3){return arguments.length?(unknown=_3,scale2):unknown},function(t4,u2){return transform8=t4,untransform=u2,rescale()}}function continuous(){return transformer()(identity2,identity2)}var init_continuous=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/continuous.js"(){init_src2(),init_src8(),init_constant5(),init_number3(),unit=[0,1],__name(identity2,"identity"),__name(normalize,"normalize"),__name(clamper,"clamper"),__name(bimap,"bimap"),__name(polymap,"polymap"),__name(copy,"copy"),__name(transformer,"transformer"),__name(continuous,"continuous")}});function tickFormat(start3,stop5,count2,specifier){var precision,step3=tickStep(start3,stop5,count2);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value2=Math.max(Math.abs(start3),Math.abs(stop5));return null!=specifier.precision||isNaN(precision=precisionPrefix_default(step3,value2))||(specifier.precision=precision),formatPrefix(specifier,value2);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=precisionRound_default(step3,Math.max(Math.abs(start3),Math.abs(stop5))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=precisionFixed_default(step3))||(specifier.precision=precision-2*("%"===specifier.type))}return format2(specifier)}var init_tickFormat=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/tickFormat.js"(){init_src2(),init_src21(),__name(tickFormat,"tickFormat")}});function linearish(scale2){var domain=scale2.domain;return scale2.ticks=function(count2){var d3=domain();return ticks(d3[0],d3[d3.length-1],null==count2?10:count2)},scale2.tickFormat=function(count2,specifier){var d3=domain();return tickFormat(d3[0],d3[d3.length-1],null==count2?10:count2,specifier)},scale2.nice=function(count2){null==count2&&(count2=10);var prestep,step3,d3=domain(),i0=0,i1=d3.length-1,start3=d3[i0],stop5=d3[i1],maxIter=10;for(stop5<start3&&(step3=start3,start3=stop5,stop5=step3,step3=i0,i0=i1,i1=step3);maxIter-- >0;){if((step3=tickIncrement(start3,stop5,count2))===prestep)return d3[i0]=start3,d3[i1]=stop5,domain(d3);if(step3>0)start3=Math.floor(start3/step3)*step3,stop5=Math.ceil(stop5/step3)*step3;else{if(!(step3<0))break;start3=Math.ceil(start3*step3)/step3,stop5=Math.floor(stop5*step3)/step3}prestep=step3}return scale2},scale2}function linear2(){var scale2=continuous();return scale2.copy=function(){return copy(scale2,linear2())},initRange.apply(scale2,arguments),linearish(scale2)}var init_linear=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/linear.js"(){init_src2(),init_continuous(),init_init(),init_tickFormat(),__name(linearish,"linearish"),__name(linear2,"linear")}});function nice(domain,interval2){var t4,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t4=i0,i0=i1,i1=t4,t4=x0,x0=x1,x1=t4),domain[i0]=interval2.floor(x0),domain[i1]=interval2.ceil(x1),domain}var t02,t12,init_nice=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/nice.js"(){__name(nice,"nice")}});function timeInterval(floori,offseti,count2,field){function interval2(date2){return floori(date2=0===arguments.length?new Date:new Date(+date2)),date2}return __name(interval2,"interval"),interval2.floor=date2=>(floori(date2=new Date(+date2)),date2),interval2.ceil=date2=>(floori(date2=new Date(date2-1)),offseti(date2,1),floori(date2),date2),interval2.round=date2=>{const d0=interval2(date2),d1=interval2.ceil(date2);return date2-d0<d1-date2?d0:d1},interval2.offset=(date2,step3)=>(offseti(date2=new Date(+date2),null==step3?1:Math.floor(step3)),date2),interval2.range=(start3,stop5,step3)=>{const range3=[];if(start3=interval2.ceil(start3),step3=null==step3?1:Math.floor(step3),!(start3<stop5&&step3>0))return range3;let previous;do{range3.push(previous=new Date(+start3)),offseti(start3,step3),floori(start3)}while(previous<start3&&start3<stop5);return range3},interval2.filter=test=>timeInterval(date2=>{if(date2>=date2)for(;floori(date2),!test(date2);)date2.setTime(date2-1)},(date2,step3)=>{if(date2>=date2)if(step3<0)for(;++step3<=0;)for(;offseti(date2,-1),!test(date2););else for(;--step3>=0;)for(;offseti(date2,1),!test(date2););}),count2&&(interval2.count=(start3,end2)=>(t02.setTime(+start3),t12.setTime(+end2),floori(t02),floori(t12),Math.floor(count2(t02,t12))),interval2.every=step3=>(step3=Math.floor(step3),isFinite(step3)&&step3>0?step3>1?interval2.filter(field?d3=>field(d3)%step3===0:d3=>interval2.count(0,d3)%step3===0):interval2:null)),interval2}var millisecond,durationSecond,durationMinute,durationHour,durationDay,durationWeek,durationMonth,durationYear,second,timeMinute,utcMinute,timeHour,utcHour,timeDay,utcDay,unixDay,timeSunday,timeMonday,timeTuesday,timeWednesday,timeThursday,timeFriday,timeSaturday,utcSunday,utcMonday,utcTuesday,utcWednesday,utcThursday,utcFriday,utcSaturday,init_interval=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/interval.js"(){t02=new Date,t12=new Date,__name(timeInterval,"timeInterval")}}),init_millisecond=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/millisecond.js"(){init_interval(),(millisecond=timeInterval(()=>{},(date2,step3)=>{date2.setTime(+date2+step3)},(start3,end2)=>end2-start3)).every=k2=>(k2=Math.floor(k2),isFinite(k2)&&k2>0?k2>1?timeInterval(date2=>{date2.setTime(Math.floor(date2/k2)*k2)},(date2,step3)=>{date2.setTime(+date2+step3*k2)},(start3,end2)=>(end2-start3)/k2):millisecond:null),millisecond.range}}),init_duration2=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/duration.js"(){durationWeek=7*(durationDay=24*(durationHour=60*(durationMinute=60*(durationSecond=1e3)))),durationMonth=30*durationDay,durationYear=365*durationDay}}),init_second=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/second.js"(){init_interval(),init_duration2(),second=timeInterval(date2=>{date2.setTime(date2-date2.getMilliseconds())},(date2,step3)=>{date2.setTime(+date2+step3*durationSecond)},(start3,end2)=>(end2-start3)/durationSecond,date2=>date2.getUTCSeconds()),second.range}}),init_minute=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/minute.js"(){init_interval(),init_duration2(),timeMinute=timeInterval(date2=>{date2.setTime(date2-date2.getMilliseconds()-date2.getSeconds()*durationSecond)},(date2,step3)=>{date2.setTime(+date2+step3*durationMinute)},(start3,end2)=>(end2-start3)/durationMinute,date2=>date2.getMinutes()),timeMinute.range,utcMinute=timeInterval(date2=>{date2.setUTCSeconds(0,0)},(date2,step3)=>{date2.setTime(+date2+step3*durationMinute)},(start3,end2)=>(end2-start3)/durationMinute,date2=>date2.getUTCMinutes()),utcMinute.range}}),init_hour=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/hour.js"(){init_interval(),init_duration2(),timeHour=timeInterval(date2=>{date2.setTime(date2-date2.getMilliseconds()-date2.getSeconds()*durationSecond-date2.getMinutes()*durationMinute)},(date2,step3)=>{date2.setTime(+date2+step3*durationHour)},(start3,end2)=>(end2-start3)/durationHour,date2=>date2.getHours()),timeHour.range,utcHour=timeInterval(date2=>{date2.setUTCMinutes(0,0,0)},(date2,step3)=>{date2.setTime(+date2+step3*durationHour)},(start3,end2)=>(end2-start3)/durationHour,date2=>date2.getUTCHours()),utcHour.range}}),init_day=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/day.js"(){init_interval(),init_duration2(),timeDay=timeInterval(date2=>date2.setHours(0,0,0,0),(date2,step3)=>date2.setDate(date2.getDate()+step3),(start3,end2)=>(end2-start3-(end2.getTimezoneOffset()-start3.getTimezoneOffset())*durationMinute)/durationDay,date2=>date2.getDate()-1),timeDay.range,utcDay=timeInterval(date2=>{date2.setUTCHours(0,0,0,0)},(date2,step3)=>{date2.setUTCDate(date2.getUTCDate()+step3)},(start3,end2)=>(end2-start3)/durationDay,date2=>date2.getUTCDate()-1),utcDay.range,unixDay=timeInterval(date2=>{date2.setUTCHours(0,0,0,0)},(date2,step3)=>{date2.setUTCDate(date2.getUTCDate()+step3)},(start3,end2)=>(end2-start3)/durationDay,date2=>Math.floor(date2/durationDay)),unixDay.range}});function timeWeekday(i2){return timeInterval(date2=>{date2.setDate(date2.getDate()-(date2.getDay()+7-i2)%7),date2.setHours(0,0,0,0)},(date2,step3)=>{date2.setDate(date2.getDate()+7*step3)},(start3,end2)=>(end2-start3-(end2.getTimezoneOffset()-start3.getTimezoneOffset())*durationMinute)/durationWeek)}function utcWeekday(i2){return timeInterval(date2=>{date2.setUTCDate(date2.getUTCDate()-(date2.getUTCDay()+7-i2)%7),date2.setUTCHours(0,0,0,0)},(date2,step3)=>{date2.setUTCDate(date2.getUTCDate()+7*step3)},(start3,end2)=>(end2-start3)/durationWeek)}var timeMonth,utcMonth,timeYear,utcYear,utcTicks,utcTickInterval,timeTicks,timeTickInterval,init_week=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/week.js"(){init_interval(),init_duration2(),__name(timeWeekday,"timeWeekday"),timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6),timeSunday.range,timeMonday.range,timeTuesday.range,timeWednesday.range,timeThursday.range,timeFriday.range,timeSaturday.range,__name(utcWeekday,"utcWeekday"),utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range}}),init_month=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/month.js"(){init_interval(),timeMonth=timeInterval(date2=>{date2.setDate(1),date2.setHours(0,0,0,0)},(date2,step3)=>{date2.setMonth(date2.getMonth()+step3)},(start3,end2)=>end2.getMonth()-start3.getMonth()+12*(end2.getFullYear()-start3.getFullYear()),date2=>date2.getMonth()),timeMonth.range,utcMonth=timeInterval(date2=>{date2.setUTCDate(1),date2.setUTCHours(0,0,0,0)},(date2,step3)=>{date2.setUTCMonth(date2.getUTCMonth()+step3)},(start3,end2)=>end2.getUTCMonth()-start3.getUTCMonth()+12*(end2.getUTCFullYear()-start3.getUTCFullYear()),date2=>date2.getUTCMonth()),utcMonth.range}}),init_year=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/year.js"(){init_interval(),(timeYear=timeInterval(date2=>{date2.setMonth(0,1),date2.setHours(0,0,0,0)},(date2,step3)=>{date2.setFullYear(date2.getFullYear()+step3)},(start3,end2)=>end2.getFullYear()-start3.getFullYear(),date2=>date2.getFullYear())).every=k2=>isFinite(k2=Math.floor(k2))&&k2>0?timeInterval(date2=>{date2.setFullYear(Math.floor(date2.getFullYear()/k2)*k2),date2.setMonth(0,1),date2.setHours(0,0,0,0)},(date2,step3)=>{date2.setFullYear(date2.getFullYear()+step3*k2)}):null,timeYear.range,(utcYear=timeInterval(date2=>{date2.setUTCMonth(0,1),date2.setUTCHours(0,0,0,0)},(date2,step3)=>{date2.setUTCFullYear(date2.getUTCFullYear()+step3)},(start3,end2)=>end2.getUTCFullYear()-start3.getUTCFullYear(),date2=>date2.getUTCFullYear())).every=k2=>isFinite(k2=Math.floor(k2))&&k2>0?timeInterval(date2=>{date2.setUTCFullYear(Math.floor(date2.getUTCFullYear()/k2)*k2),date2.setUTCMonth(0,1),date2.setUTCHours(0,0,0,0)},(date2,step3)=>{date2.setUTCFullYear(date2.getUTCFullYear()+step3*k2)}):null,utcYear.range}});function ticker(year,month,week,day,hour,minute){const tickIntervals=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[minute,1,durationMinute],[minute,5,5*durationMinute],[minute,15,15*durationMinute],[minute,30,30*durationMinute],[hour,1,durationHour],[hour,3,3*durationHour],[hour,6,6*durationHour],[hour,12,12*durationHour],[day,1,durationDay],[day,2,2*durationDay],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function ticks2(start3,stop5,count2){const reverse2=stop5<start3;reverse2&&([start3,stop5]=[stop5,start3]);const interval2=count2&&"function"==typeof count2.range?count2:tickInterval2(start3,stop5,count2),ticks3=interval2?interval2.range(start3,+stop5+1):[];return reverse2?ticks3.reverse():ticks3}function tickInterval2(start3,stop5,count2){const target=Math.abs(stop5-start3)/count2,i2=bisector(([,,step4])=>step4).right(tickIntervals,target);if(i2===tickIntervals.length)return year.every(tickStep(start3/durationYear,stop5/durationYear,count2));if(0===i2)return millisecond.every(Math.max(tickStep(start3,stop5,count2),1));const[t4,step3]=tickIntervals[target/tickIntervals[i2-1][2]<tickIntervals[i2][2]/target?i2-1:i2];return t4.every(step3)}return __name(ticks2,"ticks"),__name(tickInterval2,"tickInterval"),[ticks2,tickInterval2]}var pads,numberRe,percentRe,requoteRe,init_ticks2=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/ticks.js"(){init_src2(),init_duration2(),init_millisecond(),init_second(),init_minute(),init_hour(),init_day(),init_week(),init_month(),init_year(),__name(ticker,"ticker"),[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute)}}),init_src26=__esm({"../../node_modules/.pnpm/d3-time@3.1.0/node_modules/d3-time/src/index.js"(){init_millisecond(),init_second(),init_minute(),init_hour(),init_day(),init_week(),init_month(),init_year(),init_ticks2()}});function localDate(d3){if(0<=d3.y&&d3.y<100){var date2=new Date(-1,d3.m,d3.d,d3.H,d3.M,d3.S,d3.L);return date2.setFullYear(d3.y),date2}return new Date(d3.y,d3.m,d3.d,d3.H,d3.M,d3.S,d3.L)}function utcDate(d3){if(0<=d3.y&&d3.y<100){var date2=new Date(Date.UTC(-1,d3.m,d3.d,d3.H,d3.M,d3.S,d3.L));return date2.setUTCFullYear(d3.y),date2}return new Date(Date.UTC(d3.y,d3.m,d3.d,d3.H,d3.M,d3.S,d3.L))}function newDate(y6,m3,d3){return{y:y6,m:m3,d:d3,H:0,M:0,S:0,L:0}}function formatLocale(locale3){var locale_dateTime=locale3.dateTime,locale_date=locale3.date,locale_time=locale3.time,locale_periods=locale3.periods,locale_weekdays=locale3.days,locale_shortWeekdays=locale3.shortDays,locale_months=locale3.months,locale_shortMonths=locale3.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,q:formatQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,q:formatUTCQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats2){return function(date2){var c3,pad3,format3,string3=[],i2=-1,j3=0,n2=specifier.length;for(date2 instanceof Date||(date2=new Date(+date2));++i2<n2;)37===specifier.charCodeAt(i2)&&(string3.push(specifier.slice(j3,i2)),null!=(pad3=pads[c3=specifier.charAt(++i2)])?c3=specifier.charAt(++i2):pad3="e"===c3?" ":"0",(format3=formats2[c3])&&(c3=format3(date2,pad3)),string3.push(c3),j3=i2+1);return string3.push(specifier.slice(j3,i2)),string3.join("")}}function newParse(specifier,Z2){return function(string3){var week,day,d3=newDate(1900,void 0,1);if(parseSpecifier(d3,specifier,string3+="",0)!=string3.length)return null;if("Q"in d3)return new Date(d3.Q);if("s"in d3)return new Date(1e3*d3.s+("L"in d3?d3.L:0));if(Z2&&!("Z"in d3)&&(d3.Z=0),"p"in d3&&(d3.H=d3.H%12+12*d3.p),void 0===d3.m&&(d3.m="q"in d3?d3.q:0),"V"in d3){if(d3.V<1||d3.V>53)return null;"w"in d3||(d3.w=1),"Z"in d3?(day=(week=utcDate(newDate(d3.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=utcDay.offset(week,7*(d3.V-1)),d3.y=week.getUTCFullYear(),d3.m=week.getUTCMonth(),d3.d=week.getUTCDate()+(d3.w+6)%7):(day=(week=localDate(newDate(d3.y,0,1))).getDay(),week=day>4||0===day?timeMonday.ceil(week):timeMonday(week),week=timeDay.offset(week,7*(d3.V-1)),d3.y=week.getFullYear(),d3.m=week.getMonth(),d3.d=week.getDate()+(d3.w+6)%7)}else("W"in d3||"U"in d3)&&("w"in d3||(d3.w="u"in d3?d3.u%7:"W"in d3?1:0),day="Z"in d3?utcDate(newDate(d3.y,0,1)).getUTCDay():localDate(newDate(d3.y,0,1)).getDay(),d3.m=0,d3.d="W"in d3?(d3.w+6)%7+7*d3.W-(day+5)%7:d3.w+7*d3.U-(day+6)%7);return"Z"in d3?(d3.H+=d3.Z/100|0,d3.M+=d3.Z%100,utcDate(d3)):localDate(d3)}}function parseSpecifier(d3,specifier,string3,j3){for(var c3,parse7,i2=0,n2=specifier.length,m3=string3.length;i2<n2;){if(j3>=m3)return-1;if(37===(c3=specifier.charCodeAt(i2++))){if(c3=specifier.charAt(i2++),!(parse7=parses[c3 in pads?specifier.charAt(i2++):c3])||(j3=parse7(d3,string3,j3))<0)return-1}else if(c3!=string3.charCodeAt(j3++))return-1}return j3}function parsePeriod(d3,string3,i2){var n2=periodRe.exec(string3.slice(i2));return n2?(d3.p=periodLookup.get(n2[0].toLowerCase()),i2+n2[0].length):-1}function parseShortWeekday(d3,string3,i2){var n2=shortWeekdayRe.exec(string3.slice(i2));return n2?(d3.w=shortWeekdayLookup.get(n2[0].toLowerCase()),i2+n2[0].length):-1}function parseWeekday(d3,string3,i2){var n2=weekdayRe.exec(string3.slice(i2));return n2?(d3.w=weekdayLookup.get(n2[0].toLowerCase()),i2+n2[0].length):-1}function parseShortMonth(d3,string3,i2){var n2=shortMonthRe.exec(string3.slice(i2));return n2?(d3.m=shortMonthLookup.get(n2[0].toLowerCase()),i2+n2[0].length):-1}function parseMonth(d3,string3,i2){var n2=monthRe.exec(string3.slice(i2));return n2?(d3.m=monthLookup.get(n2[0].toLowerCase()),i2+n2[0].length):-1}function parseLocaleDateTime(d3,string3,i2){return parseSpecifier(d3,locale_dateTime,string3,i2)}function parseLocaleDate(d3,string3,i2){return parseSpecifier(d3,locale_date,string3,i2)}function parseLocaleTime(d3,string3,i2){return parseSpecifier(d3,locale_time,string3,i2)}function formatShortWeekday(d3){return locale_shortWeekdays[d3.getDay()]}function formatWeekday(d3){return locale_weekdays[d3.getDay()]}function formatShortMonth(d3){return locale_shortMonths[d3.getMonth()]}function formatMonth(d3){return locale_months[d3.getMonth()]}function formatPeriod(d3){return locale_periods[+(d3.getHours()>=12)]}function formatQuarter(d3){return 1+~~(d3.getMonth()/3)}function formatUTCShortWeekday(d3){return locale_shortWeekdays[d3.getUTCDay()]}function formatUTCWeekday(d3){return locale_weekdays[d3.getUTCDay()]}function formatUTCShortMonth(d3){return locale_shortMonths[d3.getUTCMonth()]}function formatUTCMonth(d3){return locale_months[d3.getUTCMonth()]}function formatUTCPeriod(d3){return locale_periods[+(d3.getUTCHours()>=12)]}function formatUTCQuarter(d3){return 1+~~(d3.getUTCMonth()/3)}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),__name(newFormat,"newFormat"),__name(newParse,"newParse"),__name(parseSpecifier,"parseSpecifier"),__name(parsePeriod,"parsePeriod"),__name(parseShortWeekday,"parseShortWeekday"),__name(parseWeekday,"parseWeekday"),__name(parseShortMonth,"parseShortMonth"),__name(parseMonth,"parseMonth"),__name(parseLocaleDateTime,"parseLocaleDateTime"),__name(parseLocaleDate,"parseLocaleDate"),__name(parseLocaleTime,"parseLocaleTime"),__name(formatShortWeekday,"formatShortWeekday"),__name(formatWeekday,"formatWeekday"),__name(formatShortMonth,"formatShortMonth"),__name(formatMonth,"formatMonth"),__name(formatPeriod,"formatPeriod"),__name(formatQuarter,"formatQuarter"),__name(formatUTCShortWeekday,"formatUTCShortWeekday"),__name(formatUTCWeekday,"formatUTCWeekday"),__name(formatUTCShortMonth,"formatUTCShortMonth"),__name(formatUTCMonth,"formatUTCMonth"),__name(formatUTCPeriod,"formatUTCPeriod"),__name(formatUTCQuarter,"formatUTCQuarter"),{format:__name(function(specifier){var f2=newFormat(specifier+="",formats);return f2.toString=function(){return specifier},f2},"format"),parse:__name(function(specifier){var p3=newParse(specifier+="",!1);return p3.toString=function(){return specifier},p3},"parse"),utcFormat:__name(function(specifier){var f2=newFormat(specifier+="",utcFormats);return f2.toString=function(){return specifier},f2},"utcFormat"),utcParse:__name(function(specifier){var p3=newParse(specifier+="",!0);return p3.toString=function(){return specifier},p3},"utcParse")}}function pad2(value2,fill,width3){var sign2=value2<0?"-":"",string3=(sign2?-value2:value2)+"",length2=string3.length;return sign2+(length2<width3?new Array(width3-length2+1).join(fill)+string3:string3)}function requote(s2){return s2.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){return new Map(names.map((name,i2)=>[name.toLowerCase(),i2]))}function parseWeekdayNumberSunday(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+1));return n2?(d3.w=+n2[0],i2+n2[0].length):-1}function parseWeekdayNumberMonday(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+1));return n2?(d3.u=+n2[0],i2+n2[0].length):-1}function parseWeekNumberSunday(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.U=+n2[0],i2+n2[0].length):-1}function parseWeekNumberISO(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.V=+n2[0],i2+n2[0].length):-1}function parseWeekNumberMonday(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.W=+n2[0],i2+n2[0].length):-1}function parseFullYear(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+4));return n2?(d3.y=+n2[0],i2+n2[0].length):-1}function parseYear(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.y=+n2[0]+(+n2[0]>68?1900:2e3),i2+n2[0].length):-1}function parseZone(d3,string3,i2){var n2=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string3.slice(i2,i2+6));return n2?(d3.Z=n2[1]?0:-(n2[2]+(n2[3]||"00")),i2+n2[0].length):-1}function parseQuarter(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+1));return n2?(d3.q=3*n2[0]-3,i2+n2[0].length):-1}function parseMonthNumber(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.m=n2[0]-1,i2+n2[0].length):-1}function parseDayOfMonth(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.d=+n2[0],i2+n2[0].length):-1}function parseDayOfYear(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+3));return n2?(d3.m=0,d3.d=+n2[0],i2+n2[0].length):-1}function parseHour24(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.H=+n2[0],i2+n2[0].length):-1}function parseMinutes(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.M=+n2[0],i2+n2[0].length):-1}function parseSeconds(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+2));return n2?(d3.S=+n2[0],i2+n2[0].length):-1}function parseMilliseconds(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+3));return n2?(d3.L=+n2[0],i2+n2[0].length):-1}function parseMicroseconds(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2,i2+6));return n2?(d3.L=Math.floor(n2[0]/1e3),i2+n2[0].length):-1}function parseLiteralPercent(d3,string3,i2){var n2=percentRe.exec(string3.slice(i2,i2+1));return n2?i2+n2[0].length:-1}function parseUnixTimestamp(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2));return n2?(d3.Q=+n2[0],i2+n2[0].length):-1}function parseUnixTimestampSeconds(d3,string3,i2){var n2=numberRe.exec(string3.slice(i2));return n2?(d3.s=+n2[0],i2+n2[0].length):-1}function formatDayOfMonth(d3,p3){return pad2(d3.getDate(),p3,2)}function formatHour24(d3,p3){return pad2(d3.getHours(),p3,2)}function formatHour12(d3,p3){return pad2(d3.getHours()%12||12,p3,2)}function formatDayOfYear(d3,p3){return pad2(1+timeDay.count(timeYear(d3),d3),p3,3)}function formatMilliseconds(d3,p3){return pad2(d3.getMilliseconds(),p3,3)}function formatMicroseconds(d3,p3){return formatMilliseconds(d3,p3)+"000"}function formatMonthNumber(d3,p3){return pad2(d3.getMonth()+1,p3,2)}function formatMinutes(d3,p3){return pad2(d3.getMinutes(),p3,2)}function formatSeconds(d3,p3){return pad2(d3.getSeconds(),p3,2)}function formatWeekdayNumberMonday(d3){var day=d3.getDay();return 0===day?7:day}function formatWeekNumberSunday(d3,p3){return pad2(timeSunday.count(timeYear(d3)-1,d3),p3,2)}function dISO(d3){var day=d3.getDay();return day>=4||0===day?timeThursday(d3):timeThursday.ceil(d3)}function formatWeekNumberISO(d3,p3){return d3=dISO(d3),pad2(timeThursday.count(timeYear(d3),d3)+(4===timeYear(d3).getDay()),p3,2)}function formatWeekdayNumberSunday(d3){return d3.getDay()}function formatWeekNumberMonday(d3,p3){return pad2(timeMonday.count(timeYear(d3)-1,d3),p3,2)}function formatYear(d3,p3){return pad2(d3.getFullYear()%100,p3,2)}function formatYearISO(d3,p3){return pad2((d3=dISO(d3)).getFullYear()%100,p3,2)}function formatFullYear(d3,p3){return pad2(d3.getFullYear()%1e4,p3,4)}function formatFullYearISO(d3,p3){var day=d3.getDay();return pad2((d3=day>=4||0===day?timeThursday(d3):timeThursday.ceil(d3)).getFullYear()%1e4,p3,4)}function formatZone(d3){var z3=d3.getTimezoneOffset();return(z3>0?"-":(z3*=-1,"+"))+pad2(z3/60|0,"0",2)+pad2(z3%60,"0",2)}function formatUTCDayOfMonth(d3,p3){return pad2(d3.getUTCDate(),p3,2)}function formatUTCHour24(d3,p3){return pad2(d3.getUTCHours(),p3,2)}function formatUTCHour12(d3,p3){return pad2(d3.getUTCHours()%12||12,p3,2)}function formatUTCDayOfYear(d3,p3){return pad2(1+utcDay.count(utcYear(d3),d3),p3,3)}function formatUTCMilliseconds(d3,p3){return pad2(d3.getUTCMilliseconds(),p3,3)}function formatUTCMicroseconds(d3,p3){return formatUTCMilliseconds(d3,p3)+"000"}function formatUTCMonthNumber(d3,p3){return pad2(d3.getUTCMonth()+1,p3,2)}function formatUTCMinutes(d3,p3){return pad2(d3.getUTCMinutes(),p3,2)}function formatUTCSeconds(d3,p3){return pad2(d3.getUTCSeconds(),p3,2)}function formatUTCWeekdayNumberMonday(d3){var dow=d3.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d3,p3){return pad2(utcSunday.count(utcYear(d3)-1,d3),p3,2)}function UTCdISO(d3){var day=d3.getUTCDay();return day>=4||0===day?utcThursday(d3):utcThursday.ceil(d3)}function formatUTCWeekNumberISO(d3,p3){return d3=UTCdISO(d3),pad2(utcThursday.count(utcYear(d3),d3)+(4===utcYear(d3).getUTCDay()),p3,2)}function formatUTCWeekdayNumberSunday(d3){return d3.getUTCDay()}function formatUTCWeekNumberMonday(d3,p3){return pad2(utcMonday.count(utcYear(d3)-1,d3),p3,2)}function formatUTCYear(d3,p3){return pad2(d3.getUTCFullYear()%100,p3,2)}function formatUTCYearISO(d3,p3){return pad2((d3=UTCdISO(d3)).getUTCFullYear()%100,p3,2)}function formatUTCFullYear(d3,p3){return pad2(d3.getUTCFullYear()%1e4,p3,4)}function formatUTCFullYearISO(d3,p3){var day=d3.getUTCDay();return pad2((d3=day>=4||0===day?utcThursday(d3):utcThursday.ceil(d3)).getUTCFullYear()%1e4,p3,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d3){return+d3}function formatUnixTimestampSeconds(d3){return Math.floor(+d3/1e3)}var locale2,timeFormat,init_locale2=__esm({"../../node_modules/.pnpm/d3-time-format@4.1.0/node_modules/d3-time-format/src/locale.js"(){init_src26(),__name(localDate,"localDate"),__name(utcDate,"utcDate"),__name(newDate,"newDate"),__name(formatLocale,"formatLocale"),pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g,__name(pad2,"pad"),__name(requote,"requote"),__name(formatRe,"formatRe"),__name(formatLookup,"formatLookup"),__name(parseWeekdayNumberSunday,"parseWeekdayNumberSunday"),__name(parseWeekdayNumberMonday,"parseWeekdayNumberMonday"),__name(parseWeekNumberSunday,"parseWeekNumberSunday"),__name(parseWeekNumberISO,"parseWeekNumberISO"),__name(parseWeekNumberMonday,"parseWeekNumberMonday"),__name(parseFullYear,"parseFullYear"),__name(parseYear,"parseYear"),__name(parseZone,"parseZone"),__name(parseQuarter,"parseQuarter"),__name(parseMonthNumber,"parseMonthNumber"),__name(parseDayOfMonth,"parseDayOfMonth"),__name(parseDayOfYear,"parseDayOfYear"),__name(parseHour24,"parseHour24"),__name(parseMinutes,"parseMinutes"),__name(parseSeconds,"parseSeconds"),__name(parseMilliseconds,"parseMilliseconds"),__name(parseMicroseconds,"parseMicroseconds"),__name(parseLiteralPercent,"parseLiteralPercent"),__name(parseUnixTimestamp,"parseUnixTimestamp"),__name(parseUnixTimestampSeconds,"parseUnixTimestampSeconds"),__name(formatDayOfMonth,"formatDayOfMonth"),__name(formatHour24,"formatHour24"),__name(formatHour12,"formatHour12"),__name(formatDayOfYear,"formatDayOfYear"),__name(formatMilliseconds,"formatMilliseconds"),__name(formatMicroseconds,"formatMicroseconds"),__name(formatMonthNumber,"formatMonthNumber"),__name(formatMinutes,"formatMinutes"),__name(formatSeconds,"formatSeconds"),__name(formatWeekdayNumberMonday,"formatWeekdayNumberMonday"),__name(formatWeekNumberSunday,"formatWeekNumberSunday"),__name(dISO,"dISO"),__name(formatWeekNumberISO,"formatWeekNumberISO"),__name(formatWeekdayNumberSunday,"formatWeekdayNumberSunday"),__name(formatWeekNumberMonday,"formatWeekNumberMonday"),__name(formatYear,"formatYear"),__name(formatYearISO,"formatYearISO"),__name(formatFullYear,"formatFullYear"),__name(formatFullYearISO,"formatFullYearISO"),__name(formatZone,"formatZone"),__name(formatUTCDayOfMonth,"formatUTCDayOfMonth"),__name(formatUTCHour24,"formatUTCHour24"),__name(formatUTCHour12,"formatUTCHour12"),__name(formatUTCDayOfYear,"formatUTCDayOfYear"),__name(formatUTCMilliseconds,"formatUTCMilliseconds"),__name(formatUTCMicroseconds,"formatUTCMicroseconds"),__name(formatUTCMonthNumber,"formatUTCMonthNumber"),__name(formatUTCMinutes,"formatUTCMinutes"),__name(formatUTCSeconds,"formatUTCSeconds"),__name(formatUTCWeekdayNumberMonday,"formatUTCWeekdayNumberMonday"),__name(formatUTCWeekNumberSunday,"formatUTCWeekNumberSunday"),__name(UTCdISO,"UTCdISO"),__name(formatUTCWeekNumberISO,"formatUTCWeekNumberISO"),__name(formatUTCWeekdayNumberSunday,"formatUTCWeekdayNumberSunday"),__name(formatUTCWeekNumberMonday,"formatUTCWeekNumberMonday"),__name(formatUTCYear,"formatUTCYear"),__name(formatUTCYearISO,"formatUTCYearISO"),__name(formatUTCFullYear,"formatUTCFullYear"),__name(formatUTCFullYearISO,"formatUTCFullYearISO"),__name(formatUTCZone,"formatUTCZone"),__name(formatLiteralPercent,"formatLiteralPercent"),__name(formatUnixTimestamp,"formatUnixTimestamp"),__name(formatUnixTimestampSeconds,"formatUnixTimestampSeconds")}});function defaultLocale2(definition){return locale2=formatLocale(definition),timeFormat=locale2.format,locale2.parse,locale2.utcFormat,locale2.utcParse,locale2}var init_defaultLocale2=__esm({"../../node_modules/.pnpm/d3-time-format@4.1.0/node_modules/d3-time-format/src/defaultLocale.js"(){init_locale2(),defaultLocale2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),__name(defaultLocale2,"defaultLocale")}}),init_src27=__esm({"../../node_modules/.pnpm/d3-time-format@4.1.0/node_modules/d3-time-format/src/index.js"(){init_defaultLocale2()}});function date(t4){return new Date(t4)}function number4(t4){return t4 instanceof Date?+t4:+new Date(+t4)}function calendar(ticks2,tickInterval2,year,month,week,day,hour,minute,second2,format3){var scale2=continuous(),invert2=scale2.invert,domain=scale2.domain,formatMillisecond=format3(".%L"),formatSecond=format3(":%S"),formatMinute=format3("%I:%M"),formatHour=format3("%I %p"),formatDay=format3("%a %d"),formatWeek=format3("%b %d"),formatMonth=format3("%B"),formatYear2=format3("%Y");function tickFormat2(date2){return(second2(date2)<date2?formatMillisecond:minute(date2)<date2?formatSecond:hour(date2)<date2?formatMinute:day(date2)<date2?formatHour:month(date2)<date2?week(date2)<date2?formatDay:formatWeek:year(date2)<date2?formatMonth:formatYear2)(date2)}return __name(tickFormat2,"tickFormat"),scale2.invert=function(y6){return new Date(invert2(y6))},scale2.domain=function(_3){return arguments.length?domain(Array.from(_3,number4)):domain().map(date)},scale2.ticks=function(interval2){var d3=domain();return ticks2(d3[0],d3[d3.length-1],null==interval2?10:interval2)},scale2.tickFormat=function(count2,specifier){return null==specifier?tickFormat2:format3(specifier)},scale2.nice=function(interval2){var d3=domain();return interval2&&"function"==typeof interval2.range||(interval2=tickInterval2(d3[0],d3[d3.length-1],null==interval2?10:interval2)),interval2?domain(nice(d3,interval2)):scale2},scale2.copy=function(){return copy(scale2,calendar(ticks2,tickInterval2,year,month,week,day,hour,minute,second2,format3))},scale2}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var init_time=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/time.js"(){init_src26(),init_src27(),init_continuous(),init_init(),init_nice(),__name(date,"date"),__name(number4,"number"),__name(calendar,"calendar"),__name(time,"time")}}),init_src28=__esm({"../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/index.js"(){init_band(),init_linear(),init_ordinal(),init_time()}});function colors_default(specifier){for(var n2=specifier.length/6|0,colors2=new Array(n2),i2=0;i2<n2;)colors2[i2]="#"+specifier.slice(6*i2,6*++i2);return colors2}var Tableau10_default,init_colors=__esm({"../../node_modules/.pnpm/d3-scale-chromatic@3.1.0/node_modules/d3-scale-chromatic/src/colors.js"(){__name(colors_default,"default")}}),init_Tableau10=__esm({"../../node_modules/.pnpm/d3-scale-chromatic@3.1.0/node_modules/d3-scale-chromatic/src/categorical/Tableau10.js"(){init_colors(),Tableau10_default=colors_default("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")}}),init_src29=__esm({"../../node_modules/.pnpm/d3-scale-chromatic@3.1.0/node_modules/d3-scale-chromatic/src/index.js"(){init_Tableau10()}});function constant_default5(x5){return __name(function(){return x5},"constant")}var abs2,atan2,cos,max3,min3,sin,sqrt,epsilon3,pi2,halfPi,tau2,init_constant6=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/constant.js"(){__name(constant_default5,"default")}});function acos(x5){return x5>1?0:x5<-1?pi2:Math.acos(x5)}function asin(x5){return x5>=1?halfPi:x5<=-1?-halfPi:Math.asin(x5)}var init_math2=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/math.js"(){abs2=Math.abs,atan2=Math.atan2,cos=Math.cos,max3=Math.max,min3=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon3=1e-12,pi2=Math.PI,halfPi=pi2/2,tau2=2*pi2,__name(acos,"acos"),__name(asin,"asin")}});function withPath(shape){let digits=3;return shape.digits=function(_3){if(!arguments.length)return digits;if(null==_3)digits=null;else{const d3=Math.floor(_3);if(!(d3>=0))throw new RangeError(`invalid digits: ${_3}`);digits=d3}return shape},()=>new Path(digits)}var init_path3=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/path.js"(){init_src13(),__name(withPath,"withPath")}});function arcInnerRadius(d3){return d3.innerRadius}function arcOuterRadius(d3){return d3.outerRadius}function arcStartAngle(d3){return d3.startAngle}function arcEndAngle(d3){return d3.endAngle}function arcPadAngle(d3){return d3&&d3.padAngle}function intersect(x0,y0,x1,y1,x22,y22,x32,y32){var x10=x1-x0,y10=y1-y0,x322=x32-x22,y322=y32-y22,t4=y322*x10-x322*y10;if(!(t4*t4<epsilon3))return[x0+(t4=(x322*(y0-y22)-y322*(x0-x22))/t4)*x10,y0+t4*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d22=dx*dx+dy*dy,r2=r1-rc,D4=x11*y10-x10*y11,d3=(dy<0?-1:1)*sqrt(max3(0,r2*r2*d22-D4*D4)),cx0=(D4*dy-dx*d3)/d22,cy0=(-D4*dx-dy*d3)/d22,cx1=(D4*dy+dx*d3)/d22,cy1=(-D4*dx+dy*d3)/d22,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r2-1),y11:cy0*(r1/r2-1)}}function arc_default(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant_default5(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null,path4=withPath(arc);function arc(){var buffer,r2,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi,a1=endAngle.apply(this,arguments)-halfPi,da=abs2(a1-a0),cw=a1>a0;if(context||(context=buffer=path4()),r1<r0&&(r2=r1,r1=r0,r0=r2),r1>epsilon3)if(da>tau2-epsilon3)context.moveTo(r1*cos(a0),r1*sin(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>epsilon3&&(context.moveTo(r0*cos(a1),r0*sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t03,t13,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>epsilon3&&(padRadius?+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc=min3(abs2(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>epsilon3){var p0=asin(rp/r0*sin(ap)),p1=asin(rp/r1*sin(ap));(da0-=2*p0)>epsilon3?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>epsilon3?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*cos(a01),y01=r1*sin(a01),x10=r0*cos(a10),y10=r0*sin(a10);if(rc>epsilon3){var oc,x11=r1*cos(a11),y11=r1*sin(a11),x00=r0*cos(a00),y00=r0*sin(a00);if(da<pi2)if(oc=intersect(x01,y01,x00,y00,x11,y11,x10,y10)){var ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin(acos((ax*bx+ay*by)/(sqrt(ax*ax+ay*ay)*sqrt(bx*bx+by*by)))/2),lc=sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=min3(rc,(r0-lc)/(kc-1)),rc1=min3(rc,(r1-lc)/(kc+1))}else rc0=rc1=0}da1>epsilon3?rc1>epsilon3?(t03=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),t13=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t03.cx+t03.x01,t03.cy+t03.y01),rc1<rc?context.arc(t03.cx,t03.cy,rc1,atan2(t03.y01,t03.x01),atan2(t13.y01,t13.x01),!cw):(context.arc(t03.cx,t03.cy,rc1,atan2(t03.y01,t03.x01),atan2(t03.y11,t03.x11),!cw),context.arc(0,0,r1,atan2(t03.cy+t03.y11,t03.cx+t03.x11),atan2(t13.cy+t13.y11,t13.cx+t13.x11),!cw),context.arc(t13.cx,t13.cy,rc1,atan2(t13.y11,t13.x11),atan2(t13.y01,t13.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>epsilon3&&da0>epsilon3?rc0>epsilon3?(t03=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),t13=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t03.cx+t03.x01,t03.cy+t03.y01),rc0<rc?context.arc(t03.cx,t03.cy,rc0,atan2(t03.y01,t03.x01),atan2(t13.y01,t13.x01),!cw):(context.arc(t03.cx,t03.cy,rc0,atan2(t03.y01,t03.x01),atan2(t03.y11,t03.x11),!cw),context.arc(0,0,r0,atan2(t03.cy+t03.y11,t03.cx+t03.x11),atan2(t13.cy+t13.y11,t13.cx+t13.x11),cw),context.arc(t13.cx,t13.cy,rc0,atan2(t13.y11,t13.x11),atan2(t13.y01,t13.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return __name(arc,"arc"),arc.centroid=function(){var r2=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a2=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi2/2;return[cos(a2)*r2,sin(a2)*r2]},arc.innerRadius=function(_3){return arguments.length?(innerRadius="function"==typeof _3?_3:constant_default5(+_3),arc):innerRadius},arc.outerRadius=function(_3){return arguments.length?(outerRadius="function"==typeof _3?_3:constant_default5(+_3),arc):outerRadius},arc.cornerRadius=function(_3){return arguments.length?(cornerRadius="function"==typeof _3?_3:constant_default5(+_3),arc):cornerRadius},arc.padRadius=function(_3){return arguments.length?(padRadius=null==_3?null:"function"==typeof _3?_3:constant_default5(+_3),arc):padRadius},arc.startAngle=function(_3){return arguments.length?(startAngle="function"==typeof _3?_3:constant_default5(+_3),arc):startAngle},arc.endAngle=function(_3){return arguments.length?(endAngle="function"==typeof _3?_3:constant_default5(+_3),arc):endAngle},arc.padAngle=function(_3){return arguments.length?(padAngle="function"==typeof _3?_3:constant_default5(+_3),arc):padAngle},arc.context=function(_3){return arguments.length?(context=null==_3?null:_3,arc):context},arc}var init_arc=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/arc.js"(){init_constant6(),init_math2(),init_path3(),__name(arcInnerRadius,"arcInnerRadius"),__name(arcOuterRadius,"arcOuterRadius"),__name(arcStartAngle,"arcStartAngle"),__name(arcEndAngle,"arcEndAngle"),__name(arcPadAngle,"arcPadAngle"),__name(intersect,"intersect"),__name(cornerTangents,"cornerTangents"),__name(arc_default,"default")}});function array_default(x5){return"object"==typeof x5&&"length"in x5?x5:Array.from(x5)}var init_array3=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/array.js"(){Array.prototype.slice,__name(array_default,"default")}});function Linear(context){this._context=context}function linear_default(context){return new Linear(context)}var init_linear2=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/linear.js"(){__name(Linear,"Linear"),Linear.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._point=0},"lineStart"),lineEnd:__name(function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2;default:this._context.lineTo(x5,y6)}},"point")},__name(linear_default,"default")}});function x(p3){return p3[0]}function y(p3){return p3[1]}var init_point=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/point.js"(){__name(x,"x"),__name(y,"y")}});function line_default(x5,y6){var defined=constant_default5(!0),context=null,curve=linear_default,output2=null,path4=withPath(line2);function line2(data5){var i2,d3,buffer,n2=(data5=array_default(data5)).length,defined0=!1;for(null==context&&(output2=curve(buffer=path4())),i2=0;i2<=n2;++i2)!(i2<n2&&defined(d3=data5[i2],i2,data5))===defined0&&((defined0=!defined0)?output2.lineStart():output2.lineEnd()),defined0&&output2.point(+x5(d3,i2,data5),+y6(d3,i2,data5));if(buffer)return output2=null,buffer+""||null}return x5="function"==typeof x5?x5:void 0===x5?x:constant_default5(x5),y6="function"==typeof y6?y6:void 0===y6?y:constant_default5(y6),__name(line2,"line"),line2.x=function(_3){return arguments.length?(x5="function"==typeof _3?_3:constant_default5(+_3),line2):x5},line2.y=function(_3){return arguments.length?(y6="function"==typeof _3?_3:constant_default5(+_3),line2):y6},line2.defined=function(_3){return arguments.length?(defined="function"==typeof _3?_3:constant_default5(!!_3),line2):defined},line2.curve=function(_3){return arguments.length?(curve=_3,null!=context&&(output2=curve(context)),line2):curve},line2.context=function(_3){return arguments.length?(null==_3?context=output2=null:output2=curve(context=_3),line2):context},line2}var init_line=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/line.js"(){init_array3(),init_constant6(),init_linear2(),init_path3(),init_point(),__name(line_default,"default")}});function descending_default(a2,b3){return b3<a2?-1:b3>a2?1:b3>=a2?0:NaN}var init_descending2=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/descending.js"(){__name(descending_default,"default")}});function identity_default3(d3){return d3}var init_identity3=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/identity.js"(){__name(identity_default3,"default")}});function pie_default(){var value2=identity_default3,sortValues=descending_default,sort3=null,startAngle=constant_default5(0),endAngle=constant_default5(tau2),padAngle=constant_default5(0);function pie2(data5){var i2,j3,k2,a1,v3,n2=(data5=array_default(data5)).length,sum2=0,index=new Array(n2),arcs=new Array(n2),a0=+startAngle.apply(this,arguments),da=Math.min(tau2,Math.max(-tau2,endAngle.apply(this,arguments)-a0)),p3=Math.min(Math.abs(da)/n2,padAngle.apply(this,arguments)),pa=p3*(da<0?-1:1);for(i2=0;i2<n2;++i2)(v3=arcs[index[i2]=i2]=+value2(data5[i2],i2,data5))>0&&(sum2+=v3);for(null!=sortValues?index.sort(function(i3,j4){return sortValues(arcs[i3],arcs[j4])}):null!=sort3&&index.sort(function(i3,j4){return sort3(data5[i3],data5[j4])}),i2=0,k2=sum2?(da-n2*pa)/sum2:0;i2<n2;++i2,a0=a1)j3=index[i2],a1=a0+((v3=arcs[j3])>0?v3*k2:0)+pa,arcs[j3]={data:data5[j3],index:i2,value:v3,startAngle:a0,endAngle:a1,padAngle:p3};return arcs}return __name(pie2,"pie"),pie2.value=function(_3){return arguments.length?(value2="function"==typeof _3?_3:constant_default5(+_3),pie2):value2},pie2.sortValues=function(_3){return arguments.length?(sortValues=_3,sort3=null,pie2):sortValues},pie2.sort=function(_3){return arguments.length?(sort3=_3,sortValues=null,pie2):sort3},pie2.startAngle=function(_3){return arguments.length?(startAngle="function"==typeof _3?_3:constant_default5(+_3),pie2):startAngle},pie2.endAngle=function(_3){return arguments.length?(endAngle="function"==typeof _3?_3:constant_default5(+_3),pie2):endAngle},pie2.padAngle=function(_3){return arguments.length?(padAngle="function"==typeof _3?_3:constant_default5(+_3),pie2):padAngle},pie2}var Bump,init_pie=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/pie.js"(){init_array3(),init_constant6(),init_descending2(),init_identity3(),init_math2(),__name(pie_default,"default")}});function bumpX(context){return new Bump(context,!0)}function bumpY(context){return new Bump(context,!1)}var init_bump=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/bump.js"(){Bump=class{static{__name(this,"Bump")}constructor(context,x5){this._context=context,this._x=x5}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+x5)/2,this._y0,this._x0,y6,x5,y6):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+y6)/2,x5,this._y0,x5,y6)}this._x0=x5,this._y0=y6}},__name(bumpX,"bumpX"),__name(bumpY,"bumpY")}});function noop_default(){}var init_noop=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/noop.js"(){__name(noop_default,"default")}});function point2(that,x5,y6){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x5)/6,(that._y0+4*that._y1+y6)/6)}function Basis(context){this._context=context}function basis_default2(context){return new Basis(context)}var init_basis2=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/basis.js"(){__name(point2,"point"),__name(Basis,"Basis"),Basis.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 3:point2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point2(this,x5,y6)}this._x0=this._x1,this._x1=x5,this._y0=this._y1,this._y1=y6},"point")},__name(basis_default2,"default")}});function BasisClosed(context){this._context=context}function basisClosed_default2(context){return new BasisClosed(context)}var init_basisClosed2=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/basisClosed.js"(){init_noop(),init_basis2(),__name(BasisClosed,"BasisClosed"),BasisClosed.prototype={areaStart:noop_default,areaEnd:noop_default,lineStart:__name(function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._x2=x5,this._y2=y6;break;case 1:this._point=2,this._x3=x5,this._y3=y6;break;case 2:this._point=3,this._x4=x5,this._y4=y6,this._context.moveTo((this._x0+4*this._x1+x5)/6,(this._y0+4*this._y1+y6)/6);break;default:point2(this,x5,y6)}this._x0=this._x1,this._x1=x5,this._y0=this._y1,this._y1=y6},"point")},__name(basisClosed_default2,"default")}});function BasisOpen(context){this._context=context}function basisOpen_default(context){return new BasisOpen(context)}var bundle_default,init_basisOpen=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/basisOpen.js"(){init_basis2(),__name(BasisOpen,"BasisOpen"),BasisOpen.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x5)/6,y0=(this._y0+4*this._y1+y6)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point2(this,x5,y6)}this._x0=this._x1,this._x1=x5,this._y0=this._y1,this._y1=y6},"point")},__name(basisOpen_default,"default")}});function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}var cardinal_default,init_bundle=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/bundle.js"(){init_basis2(),__name(Bundle,"Bundle"),Bundle.prototype={lineStart:__name(function(){this._x=[],this._y=[],this._basis.lineStart()},"lineStart"),lineEnd:__name(function(){var x5=this._x,y6=this._y,j3=x5.length-1;if(j3>0)for(var t4,x0=x5[0],y0=y6[0],dx=x5[j3]-x0,dy=y6[j3]-y0,i2=-1;++i2<=j3;)t4=i2/j3,this._basis.point(this._beta*x5[i2]+(1-this._beta)*(x0+t4*dx),this._beta*y6[i2]+(1-this._beta)*(y0+t4*dy));this._x=this._y=null,this._basis.lineEnd()},"lineEnd"),point:__name(function(x5,y6){this._x.push(+x5),this._y.push(+y6)},"point")},bundle_default=__name(function custom2(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return __name(bundle,"bundle"),bundle.beta=function(beta2){return custom2(+beta2)},bundle},"custom")(.85)}});function point3(that,x5,y6){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x5),that._y2+that._k*(that._y1-y6),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}var cardinalClosed_default,init_cardinal=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/cardinal.js"(){__name(point3,"point"),__name(Cardinal,"Cardinal"),Cardinal.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point3(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2,this._x1=x5,this._y1=y6;break;case 2:this._point=3;default:point3(this,x5,y6)}this._x0=this._x1,this._x1=this._x2,this._x2=x5,this._y0=this._y1,this._y1=this._y2,this._y2=y6},"point")},cardinal_default=__name(function custom3(tension){function cardinal(context){return new Cardinal(context,tension)}return __name(cardinal,"cardinal"),cardinal.tension=function(tension2){return custom3(+tension2)},cardinal},"custom")(0)}});function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}var cardinalOpen_default,init_cardinalClosed=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/cardinalClosed.js"(){init_noop(),init_cardinal(),__name(CardinalClosed,"CardinalClosed"),CardinalClosed.prototype={areaStart:noop_default,areaEnd:noop_default,lineStart:__name(function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._x3=x5,this._y3=y6;break;case 1:this._point=2,this._context.moveTo(this._x4=x5,this._y4=y6);break;case 2:this._point=3,this._x5=x5,this._y5=y6;break;default:point3(this,x5,y6)}this._x0=this._x1,this._x1=this._x2,this._x2=x5,this._y0=this._y1,this._y1=this._y2,this._y2=y6},"point")},cardinalClosed_default=__name(function custom4(tension){function cardinal(context){return new CardinalClosed(context,tension)}return __name(cardinal,"cardinal"),cardinal.tension=function(tension2){return custom4(+tension2)},cardinal},"custom")(0)}});function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}var catmullRom_default,init_cardinalOpen=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/cardinalOpen.js"(){init_cardinal(),__name(CardinalOpen,"CardinalOpen"),CardinalOpen.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point3(this,x5,y6)}this._x0=this._x1,this._x1=this._x2,this._x2=x5,this._y0=this._y1,this._y1=this._y2,this._y2=y6},"point")},cardinalOpen_default=__name(function custom5(tension){function cardinal(context){return new CardinalOpen(context,tension)}return __name(cardinal,"cardinal"),cardinal.tension=function(tension2){return custom5(+tension2)},cardinal},"custom")(0)}});function point4(that,x5,y6){var x1=that._x1,y1=that._y1,x22=that._x2,y22=that._y2;if(that._l01_a>epsilon3){var a2=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n2=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a2-that._x0*that._l12_2a+that._x2*that._l01_2a)/n2,y1=(y1*a2-that._y0*that._l12_2a+that._y2*that._l01_2a)/n2}if(that._l23_a>epsilon3){var b3=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m3=3*that._l23_a*(that._l23_a+that._l12_a);x22=(x22*b3+that._x1*that._l23_2a-x5*that._l12_2a)/m3,y22=(y22*b3+that._y1*that._l23_2a-y6*that._l12_2a)/m3}that._context.bezierCurveTo(x1,y1,x22,y22,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}var catmullRomClosed_default,init_catmullRom=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/catmullRom.js"(){init_math2(),init_cardinal(),__name(point4,"point"),__name(CatmullRom,"CatmullRom"),CatmullRom.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){if(x5=+x5,y6=+y6,this._point){var x23=this._x2-x5,y23=this._y2-y6;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2;break;case 2:this._point=3;default:point4(this,x5,y6)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x5,this._y0=this._y1,this._y1=this._y2,this._y2=y6},"point")},catmullRom_default=__name(function custom6(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return __name(catmullRom,"catmullRom"),catmullRom.alpha=function(alpha2){return custom6(+alpha2)},catmullRom},"custom")(.5)}});function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}var catmullRomOpen_default,init_catmullRomClosed=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/catmullRomClosed.js"(){init_cardinalClosed(),init_noop(),init_catmullRom(),__name(CatmullRomClosed,"CatmullRomClosed"),CatmullRomClosed.prototype={areaStart:noop_default,areaEnd:noop_default,lineStart:__name(function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},"lineEnd"),point:__name(function(x5,y6){if(x5=+x5,y6=+y6,this._point){var x23=this._x2-x5,y23=this._y2-y6;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x5,this._y3=y6;break;case 1:this._point=2,this._context.moveTo(this._x4=x5,this._y4=y6);break;case 2:this._point=3,this._x5=x5,this._y5=y6;break;default:point4(this,x5,y6)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x5,this._y0=this._y1,this._y1=this._y2,this._y2=y6},"point")},catmullRomClosed_default=__name(function custom7(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return __name(catmullRom,"catmullRom"),catmullRom.alpha=function(alpha2){return custom7(+alpha2)},catmullRom},"custom")(.5)}});function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}var init_catmullRomOpen=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/catmullRomOpen.js"(){init_cardinalOpen(),init_catmullRom(),__name(CatmullRomOpen,"CatmullRomOpen"),CatmullRomOpen.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},"lineStart"),lineEnd:__name(function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){if(x5=+x5,y6=+y6,this._point){var x23=this._x2-x5,y23=this._y2-y6;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point4(this,x5,y6)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x5,this._y0=this._y1,this._y1=this._y2,this._y2=y6},"point")},catmullRomOpen_default=__name(function custom8(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return __name(catmullRom,"catmullRom"),catmullRom.alpha=function(alpha2){return custom8(+alpha2)},catmullRom},"custom")(.5)}});function LinearClosed(context){this._context=context}function linearClosed_default(context){return new LinearClosed(context)}var init_linearClosed=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/linearClosed.js"(){init_noop(),__name(LinearClosed,"LinearClosed"),LinearClosed.prototype={areaStart:noop_default,areaEnd:noop_default,lineStart:__name(function(){this._point=0},"lineStart"),lineEnd:__name(function(){this._point&&this._context.closePath()},"lineEnd"),point:__name(function(x5,y6){x5=+x5,y6=+y6,this._point?this._context.lineTo(x5,y6):(this._point=1,this._context.moveTo(x5,y6))},"point")},__name(linearClosed_default,"default")}});function sign(x5){return x5<0?-1:1}function slope3(that,x22,y22){var h0=that._x1-that._x0,h1=x22-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y22-that._y1)/(h1||h0<0&&-0),p3=(s0*h1+s1*h0)/(h0+h1);return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p3))||0}function slope2(that,t4){var h3=that._x1-that._x0;return h3?(3*(that._y1-that._y0)/h3-t4)/2:t4}function point5(that,t03,t13){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t03,x1-dx,y1-dx*t13,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function monotoneX(context){return new MonotoneX(context)}function monotoneY(context){return new MonotoneY(context)}var init_monotone=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/monotone.js"(){__name(sign,"sign"),__name(slope3,"slope3"),__name(slope2,"slope2"),__name(point5,"point"),__name(MonotoneX,"MonotoneX"),MonotoneX.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point5(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},"lineEnd"),point:__name(function(x5,y6){var t13=NaN;if(y6=+y6,(x5=+x5)!==this._x1||y6!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2;break;case 2:this._point=3,point5(this,slope2(this,t13=slope3(this,x5,y6)),t13);break;default:point5(this,this._t0,t13=slope3(this,x5,y6))}this._x0=this._x1,this._x1=x5,this._y0=this._y1,this._y1=y6,this._t0=t13}},"point")},__name(MonotoneY,"MonotoneY"),(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x5,y6){MonotoneX.prototype.point.call(this,y6,x5)},__name(ReflectContext,"ReflectContext"),ReflectContext.prototype={moveTo:__name(function(x5,y6){this._context.moveTo(y6,x5)},"moveTo"),closePath:__name(function(){this._context.closePath()},"closePath"),lineTo:__name(function(x5,y6){this._context.lineTo(y6,x5)},"lineTo"),bezierCurveTo:__name(function(x1,y1,x22,y22,x5,y6){this._context.bezierCurveTo(y1,x1,y22,x22,y6,x5)},"bezierCurveTo")},__name(monotoneX,"monotoneX"),__name(monotoneY,"monotoneY")}});function Natural(context){this._context=context}function controlPoints(x5){var i2,m3,n2=x5.length-1,a2=new Array(n2),b3=new Array(n2),r2=new Array(n2);for(a2[0]=0,b3[0]=2,r2[0]=x5[0]+2*x5[1],i2=1;i2<n2-1;++i2)a2[i2]=1,b3[i2]=4,r2[i2]=4*x5[i2]+2*x5[i2+1];for(a2[n2-1]=2,b3[n2-1]=7,r2[n2-1]=8*x5[n2-1]+x5[n2],i2=1;i2<n2;++i2)m3=a2[i2]/b3[i2-1],b3[i2]-=m3,r2[i2]-=m3*r2[i2-1];for(a2[n2-1]=r2[n2-1]/b3[n2-1],i2=n2-2;i2>=0;--i2)a2[i2]=(r2[i2]-a2[i2+1])/b3[i2];for(b3[n2-1]=(x5[n2]+a2[n2-1])/2,i2=0;i2<n2-1;++i2)b3[i2]=2*x5[i2+1]-a2[i2+1];return[a2,b3]}function natural_default(context){return new Natural(context)}var init_natural=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/natural.js"(){__name(Natural,"Natural"),Natural.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x=[],this._y=[]},"lineStart"),lineEnd:__name(function(){var x5=this._x,y6=this._y,n2=x5.length;if(n2)if(this._line?this._context.lineTo(x5[0],y6[0]):this._context.moveTo(x5[0],y6[0]),2===n2)this._context.lineTo(x5[1],y6[1]);else for(var px=controlPoints(x5),py=controlPoints(y6),i0=0,i1=1;i1<n2;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x5[i1],y6[i1]);(this._line||0!==this._line&&1===n2)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},"lineEnd"),point:__name(function(x5,y6){this._x.push(+x5),this._y.push(+y6)},"point")},__name(controlPoints,"controlPoints"),__name(natural_default,"default")}});function Step(context,t4){this._context=context,this._t=t4}function step_default(context){return new Step(context,.5)}function stepBefore(context){return new Step(context,0)}function stepAfter(context){return new Step(context,1)}var identity3,init_step=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/curve/step.js"(){__name(Step,"Step"),Step.prototype={areaStart:__name(function(){this._line=0},"areaStart"),areaEnd:__name(function(){this._line=NaN},"areaEnd"),lineStart:__name(function(){this._x=this._y=NaN,this._point=0},"lineStart"),lineEnd:__name(function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},"lineEnd"),point:__name(function(x5,y6){switch(x5=+x5,y6=+y6,this._point){case 0:this._point=1,this._line?this._context.lineTo(x5,y6):this._context.moveTo(x5,y6);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y6),this._context.lineTo(x5,y6);else{var x1=this._x*(1-this._t)+x5*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y6)}}this._x=x5,this._y=y6},"point")},__name(step_default,"default"),__name(stepBefore,"stepBefore"),__name(stepAfter,"stepAfter")}}),init_src30=__esm({"../../node_modules/.pnpm/d3-shape@3.2.0/node_modules/d3-shape/src/index.js"(){init_arc(),init_line(),init_pie(),init_basisClosed2(),init_basisOpen(),init_basis2(),init_bump(),init_bundle(),init_cardinalClosed(),init_cardinalOpen(),init_cardinal(),init_catmullRomClosed(),init_catmullRomOpen(),init_catmullRom(),init_linearClosed(),init_linear2(),init_monotone(),init_natural(),init_step()}}),init_constant7=__esm({"../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/constant.js"(){}}),init_event2=__esm({"../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/event.js"(){}});function Transform(k2,x5,y6){this.k=k2,this.x=x5,this.y=y6}function transform(node2){for(;!node2.__zoom;)if(!(node2=node2.parentNode))return identity3;return node2.__zoom}var import_sanitize_url,drawRect,drawBackgroundRect,drawText,drawImage,drawEmbeddedImage,getNoteRect,getTextObj,import_sanitize_url2,drawRect2,drawImage2,drawRels,drawBoundary,drawC4Shape,insertDatabaseIcon,insertComputerIcon,insertClockIcon,insertArrowHead,insertArrowEnd,insertArrowFilledHead,insertDynamicNumber,insertArrowCrossHead,getC4ShapeFont,_drawTextCandidateFunc,svgDraw_default,freeGlobal,freeGlobal_default,freeSelf,root2,root_default,Symbol2,Symbol_default,objectProto,hasOwnProperty,nativeObjectToString,symToStringTag,getRawTag_default,init_transform2=__esm({"../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/transform.js"(){__name(Transform,"Transform"),Transform.prototype={constructor:Transform,scale:__name(function(k2){return 1===k2?this:new Transform(this.k*k2,this.x,this.y)},"scale"),translate:__name(function(x5,y6){return 0===x5&0===y6?this:new Transform(this.k,this.x+this.k*x5,this.y+this.k*y6)},"translate"),apply:__name(function(point8){return[point8[0]*this.k+this.x,point8[1]*this.k+this.y]},"apply"),applyX:__name(function(x5){return x5*this.k+this.x},"applyX"),applyY:__name(function(y6){return y6*this.k+this.y},"applyY"),invert:__name(function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},"invert"),invertX:__name(function(x5){return(x5-this.x)/this.k},"invertX"),invertY:__name(function(y6){return(y6-this.y)/this.k},"invertY"),rescaleX:__name(function(x5){return x5.copy().domain(x5.range().map(this.invertX,this).map(x5.invert,x5))},"rescaleX"),rescaleY:__name(function(y6){return y6.copy().domain(y6.range().map(this.invertY,this).map(y6.invert,y6))},"rescaleY"),toString:__name(function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"},"toString")},identity3=new Transform(1,0,0),transform.prototype=Transform.prototype,__name(transform,"transform")}}),init_noevent2=__esm({"../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/noevent.js"(){}}),init_zoom=__esm({"../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/zoom.js"(){init_src11(),init_constant7(),init_event2(),init_transform2(),init_noevent2()}}),init_src31=__esm({"../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/index.js"(){init_zoom(),init_transform2()}}),init_src32=__esm({"../../node_modules/.pnpm/d3@7.9.0/node_modules/d3/src/index.js"(){init_src2(),init_src3(),init_src12(),init_src14(),init_src7(),init_src15(),init_src16(),init_src4(),init_src6(),init_src17(),init_src10(),init_src18(),init_src20(),init_src21(),init_src22(),init_src23(),init_src8(),init_src13(),init_src24(),init_src19(),init_src25(),init_src28(),init_src29(),init_src5(),init_src30(),init_src26(),init_src27(),init_src9(),init_src11(),init_src31()}}),require_constants=__commonJS({"../../node_modules/.pnpm/@braintree+sanitize-url@7.1.1/node_modules/@braintree/sanitize-url/dist/constants.js"(exports2){Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.BLANK_URL=exports2.relativeFirstCharacters=exports2.whitespaceEscapeCharsRegex=exports2.urlSchemeRegex=exports2.ctrlCharactersRegex=exports2.htmlCtrlEntityRegex=exports2.htmlEntitiesRegex=exports2.invalidProtocolRegex=void 0,exports2.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,exports2.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,exports2.htmlCtrlEntityRegex=/&(newline|tab);/gi,exports2.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,exports2.urlSchemeRegex=/^.+(:|&colon;)/gim,exports2.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,exports2.relativeFirstCharacters=[".","/"],exports2.BLANK_URL="about:blank"}}),require_dist=__commonJS({"../../node_modules/.pnpm/@braintree+sanitize-url@7.1.1/node_modules/@braintree/sanitize-url/dist/index.js"(exports2){Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.sanitizeUrl=void 0;var constants_1=require_constants();function isRelativeUrlWithoutProtocol(url){return constants_1.relativeFirstCharacters.indexOf(url[0])>-1}function decodeHtmlCharacters(str2){return str2.replace(constants_1.ctrlCharactersRegex,"").replace(constants_1.htmlEntitiesRegex,function(match2,dec){return String.fromCharCode(dec)})}function isValidUrl(url){return URL.canParse(url)}function decodeURI(uri){try{return decodeURIComponent(uri)}catch(e3){return uri}}function sanitizeUrl6(url){if(!url)return constants_1.BLANK_URL;var charsToDecode,decodedUrl=decodeURI(url.trim());do{charsToDecode=(decodedUrl=decodeURI(decodedUrl=decodeHtmlCharacters(decodedUrl).replace(constants_1.htmlCtrlEntityRegex,"").replace(constants_1.ctrlCharactersRegex,"").replace(constants_1.whitespaceEscapeCharsRegex,"").trim())).match(constants_1.ctrlCharactersRegex)||decodedUrl.match(constants_1.htmlEntitiesRegex)||decodedUrl.match(constants_1.htmlCtrlEntityRegex)||decodedUrl.match(constants_1.whitespaceEscapeCharsRegex)}while(charsToDecode&&charsToDecode.length>0);var sanitizedUrl=decodedUrl;if(!sanitizedUrl)return constants_1.BLANK_URL;if(isRelativeUrlWithoutProtocol(sanitizedUrl))return sanitizedUrl;var trimmedUrl=sanitizedUrl.trimStart(),urlSchemeParseResults=trimmedUrl.match(constants_1.urlSchemeRegex);if(!urlSchemeParseResults)return sanitizedUrl;var urlScheme=urlSchemeParseResults[0].toLowerCase().trim();if(constants_1.invalidProtocolRegex.test(urlScheme))return constants_1.BLANK_URL;var backSanitized=trimmedUrl.replace(/\\/g,"/");if("mailto:"===urlScheme||urlScheme.includes("://"))return backSanitized;if("http:"===urlScheme||"https:"===urlScheme){if(!isValidUrl(backSanitized))return constants_1.BLANK_URL;var url_1=new URL(backSanitized);return url_1.protocol=url_1.protocol.toLowerCase(),url_1.hostname=url_1.hostname.toLowerCase(),url_1.toString()}return backSanitized}__name(isRelativeUrlWithoutProtocol,"isRelativeUrlWithoutProtocol"),__name(decodeHtmlCharacters,"decodeHtmlCharacters"),__name(isValidUrl,"isValidUrl"),__name(decodeURI,"decodeURI"),__name(sanitizeUrl6,"sanitizeUrl"),exports2.sanitizeUrl=sanitizeUrl6}}),init_svgDrawCommon=__esm({"src/diagrams/common/svgDrawCommon.ts"(){import_sanitize_url=__toESM(require_dist(),1),init_common(),drawRect=__name((element3,rectData)=>{const rectElement=element3.append("rect");if(rectElement.attr("x",rectData.x),rectElement.attr("y",rectData.y),rectElement.attr("fill",rectData.fill),rectElement.attr("stroke",rectData.stroke),rectElement.attr("width",rectData.width),rectElement.attr("height",rectData.height),rectData.name&&rectElement.attr("name",rectData.name),rectData.rx&&rectElement.attr("rx",rectData.rx),rectData.ry&&rectElement.attr("ry",rectData.ry),void 0!==rectData.attrs)for(const attrKey in rectData.attrs)rectElement.attr(attrKey,rectData.attrs[attrKey]);return rectData.class&&rectElement.attr("class",rectData.class),rectElement},"drawRect"),drawBackgroundRect=__name((element3,bounds4)=>{const rectData={x:bounds4.startx,y:bounds4.starty,width:bounds4.stopx-bounds4.startx,height:bounds4.stopy-bounds4.starty,fill:bounds4.fill,stroke:bounds4.stroke,class:"rect"};drawRect(element3,rectData).lower()},"drawBackgroundRect"),drawText=__name((element3,textData)=>{const nText=textData.text.replace(lineBreakRegex," "),textElem=element3.append("text");textElem.attr("x",textData.x),textElem.attr("y",textData.y),textElem.attr("class","legend"),textElem.style("text-anchor",textData.anchor),textData.class&&textElem.attr("class",textData.class);const tspan=textElem.append("tspan");return tspan.attr("x",textData.x+2*textData.textMargin),tspan.text(nText),textElem},"drawText"),drawImage=__name((elem,x5,y6,link2)=>{const imageElement=elem.append("image");imageElement.attr("x",x5),imageElement.attr("y",y6);const sanitizedLink=(0,import_sanitize_url.sanitizeUrl)(link2);imageElement.attr("xlink:href",sanitizedLink)},"drawImage"),drawEmbeddedImage=__name((element3,x5,y6,link2)=>{const imageElement=element3.append("use");imageElement.attr("x",x5),imageElement.attr("y",y6);const sanitizedLink=(0,import_sanitize_url.sanitizeUrl)(link2);imageElement.attr("xlink:href",`#${sanitizedLink}`)},"drawEmbeddedImage"),getNoteRect=__name(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),getTextObj=__name(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj")}}),init_svgDraw=__esm({"src/diagrams/c4/svgDraw.js"(){init_common(),init_svgDrawCommon(),import_sanitize_url2=__toESM(require_dist(),1),drawRect2=__name(function(elem,rectData){return drawRect(elem,rectData)},"drawRect"),drawImage2=__name(function(elem,width3,height2,x5,y6,link2){const imageElem=elem.append("image");imageElem.attr("width",width3),imageElem.attr("height",height2),imageElem.attr("x",x5),imageElem.attr("y",y6);let sanitizedLink=link2.startsWith("data:image/png;base64")?link2:(0,import_sanitize_url2.sanitizeUrl)(link2);imageElem.attr("xlink:href",sanitizedLink)},"drawImage"),drawRels=__name((elem,rels2,conf5)=>{const relsElem=elem.append("g");let i2=0;for(let rel2 of rels2){let textColor=rel2.textColor?rel2.textColor:"#444444",strokeColor=rel2.lineColor?rel2.lineColor:"#444444",offsetX=rel2.offsetX?parseInt(rel2.offsetX):0,offsetY=rel2.offsetY?parseInt(rel2.offsetY):0,url="";if(0===i2){let line2=relsElem.append("line");line2.attr("x1",rel2.startPoint.x),line2.attr("y1",rel2.startPoint.y),line2.attr("x2",rel2.endPoint.x),line2.attr("y2",rel2.endPoint.y),line2.attr("stroke-width","1"),line2.attr("stroke",strokeColor),line2.style("fill","none"),"rel_b"!==rel2.type&&line2.attr("marker-end","url("+url+"#arrowhead)"),"birel"!==rel2.type&&"rel_b"!==rel2.type||line2.attr("marker-start","url("+url+"#arrowend)"),i2=-1}else{let line2=relsElem.append("path");line2.attr("fill","none").attr("stroke-width","1").attr("stroke",strokeColor).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",rel2.startPoint.x).replaceAll("starty",rel2.startPoint.y).replaceAll("controlx",rel2.startPoint.x+(rel2.endPoint.x-rel2.startPoint.x)/2-(rel2.endPoint.x-rel2.startPoint.x)/4).replaceAll("controly",rel2.startPoint.y+(rel2.endPoint.y-rel2.startPoint.y)/2).replaceAll("stopx",rel2.endPoint.x).replaceAll("stopy",rel2.endPoint.y)),"rel_b"!==rel2.type&&line2.attr("marker-end","url("+url+"#arrowhead)"),"birel"!==rel2.type&&"rel_b"!==rel2.type||line2.attr("marker-start","url("+url+"#arrowend)")}let messageConf=conf5.messageFont();_drawTextCandidateFunc(conf5)(rel2.label.text,relsElem,Math.min(rel2.startPoint.x,rel2.endPoint.x)+Math.abs(rel2.endPoint.x-rel2.startPoint.x)/2+offsetX,Math.min(rel2.startPoint.y,rel2.endPoint.y)+Math.abs(rel2.endPoint.y-rel2.startPoint.y)/2+offsetY,rel2.label.width,rel2.label.height,{fill:textColor},messageConf),rel2.techn&&""!==rel2.techn.text&&(messageConf=conf5.messageFont(),_drawTextCandidateFunc(conf5)("["+rel2.techn.text+"]",relsElem,Math.min(rel2.startPoint.x,rel2.endPoint.x)+Math.abs(rel2.endPoint.x-rel2.startPoint.x)/2+offsetX,Math.min(rel2.startPoint.y,rel2.endPoint.y)+Math.abs(rel2.endPoint.y-rel2.startPoint.y)/2+conf5.messageFontSize+5+offsetY,Math.max(rel2.label.width,rel2.techn.width),rel2.techn.height,{fill:textColor,"font-style":"italic"},messageConf))}},"drawRels"),drawBoundary=__name(function(elem,boundary,conf5){const boundaryElem=elem.append("g");let fillColor=boundary.bgColor?boundary.bgColor:"none",strokeColor=boundary.borderColor?boundary.borderColor:"#444444",fontColor=boundary.fontColor?boundary.fontColor:"black",attrsValue={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};boundary.nodeType&&(attrsValue={"stroke-width":1});let rectData={x:boundary.x,y:boundary.y,fill:fillColor,stroke:strokeColor,width:boundary.width,height:boundary.height,rx:2.5,ry:2.5,attrs:attrsValue};drawRect2(boundaryElem,rectData);let boundaryConf=conf5.boundaryFont();boundaryConf.fontWeight="bold",boundaryConf.fontSize=boundaryConf.fontSize+2,boundaryConf.fontColor=fontColor,_drawTextCandidateFunc(conf5)(boundary.label.text,boundaryElem,boundary.x,boundary.y+boundary.label.Y,boundary.width,boundary.height,{fill:"#444444"},boundaryConf),boundary.type&&""!==boundary.type.text&&(boundaryConf=conf5.boundaryFont(),boundaryConf.fontColor=fontColor,_drawTextCandidateFunc(conf5)(boundary.type.text,boundaryElem,boundary.x,boundary.y+boundary.type.Y,boundary.width,boundary.height,{fill:"#444444"},boundaryConf)),boundary.descr&&""!==boundary.descr.text&&(boundaryConf=conf5.boundaryFont(),boundaryConf.fontSize=boundaryConf.fontSize-2,boundaryConf.fontColor=fontColor,_drawTextCandidateFunc(conf5)(boundary.descr.text,boundaryElem,boundary.x,boundary.y+boundary.descr.Y,boundary.width,boundary.height,{fill:"#444444"},boundaryConf))},"drawBoundary"),drawC4Shape=__name(function(elem,c4Shape,conf5){let fillColor=c4Shape.bgColor?c4Shape.bgColor:conf5[c4Shape.typeC4Shape.text+"_bg_color"],strokeColor=c4Shape.borderColor?c4Shape.borderColor:conf5[c4Shape.typeC4Shape.text+"_border_color"],fontColor=c4Shape.fontColor?c4Shape.fontColor:"#FFFFFF",personImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(c4Shape.typeC4Shape.text){case"person":personImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":personImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const c4ShapeElem=elem.append("g");c4ShapeElem.attr("class","person-man");const rect3=getNoteRect();switch(c4Shape.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":rect3.x=c4Shape.x,rect3.y=c4Shape.y,rect3.fill=fillColor,rect3.width=c4Shape.width,rect3.height=c4Shape.height,rect3.stroke=strokeColor,rect3.rx=2.5,rect3.ry=2.5,rect3.attrs={"stroke-width":.5},drawRect2(c4ShapeElem,rect3);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":c4ShapeElem.append("path").attr("fill",fillColor).attr("stroke-width","0.5").attr("stroke",strokeColor).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",c4Shape.x).replaceAll("starty",c4Shape.y).replaceAll("half",c4Shape.width/2).replaceAll("height",c4Shape.height)),c4ShapeElem.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",strokeColor).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",c4Shape.x).replaceAll("starty",c4Shape.y).replaceAll("half",c4Shape.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":c4ShapeElem.append("path").attr("fill",fillColor).attr("stroke-width","0.5").attr("stroke",strokeColor).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",c4Shape.x).replaceAll("starty",c4Shape.y).replaceAll("width",c4Shape.width).replaceAll("half",c4Shape.height/2)),c4ShapeElem.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",strokeColor).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",c4Shape.x+c4Shape.width).replaceAll("starty",c4Shape.y).replaceAll("half",c4Shape.height/2))}let c4ShapeFontConf=getC4ShapeFont(conf5,c4Shape.typeC4Shape.text);switch(c4ShapeElem.append("text").attr("fill",fontColor).attr("font-family",c4ShapeFontConf.fontFamily).attr("font-size",c4ShapeFontConf.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",c4Shape.typeC4Shape.width).attr("x",c4Shape.x+c4Shape.width/2-c4Shape.typeC4Shape.width/2).attr("y",c4Shape.y+c4Shape.typeC4Shape.Y).text("<<"+c4Shape.typeC4Shape.text+">>"),c4Shape.typeC4Shape.text){case"person":case"external_person":drawImage2(c4ShapeElem,48,48,c4Shape.x+c4Shape.width/2-24,c4Shape.y+c4Shape.image.Y,personImg)}let textFontConf=conf5[c4Shape.typeC4Shape.text+"Font"]();return textFontConf.fontWeight="bold",textFontConf.fontSize=textFontConf.fontSize+2,textFontConf.fontColor=fontColor,_drawTextCandidateFunc(conf5)(c4Shape.label.text,c4ShapeElem,c4Shape.x,c4Shape.y+c4Shape.label.Y,c4Shape.width,c4Shape.height,{fill:fontColor},textFontConf),textFontConf=conf5[c4Shape.typeC4Shape.text+"Font"](),textFontConf.fontColor=fontColor,c4Shape.techn&&""!==c4Shape.techn?.text?_drawTextCandidateFunc(conf5)(c4Shape.techn.text,c4ShapeElem,c4Shape.x,c4Shape.y+c4Shape.techn.Y,c4Shape.width,c4Shape.height,{fill:fontColor,"font-style":"italic"},textFontConf):c4Shape.type&&""!==c4Shape.type.text&&_drawTextCandidateFunc(conf5)(c4Shape.type.text,c4ShapeElem,c4Shape.x,c4Shape.y+c4Shape.type.Y,c4Shape.width,c4Shape.height,{fill:fontColor,"font-style":"italic"},textFontConf),c4Shape.descr&&""!==c4Shape.descr.text&&(textFontConf=conf5.personFont(),textFontConf.fontColor=fontColor,_drawTextCandidateFunc(conf5)(c4Shape.descr.text,c4ShapeElem,c4Shape.x,c4Shape.y+c4Shape.descr.Y,c4Shape.width,c4Shape.height,{fill:fontColor},textFontConf)),c4Shape.height},"drawC4Shape"),insertDatabaseIcon=__name(function(elem){elem.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),insertComputerIcon=__name(function(elem){elem.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),insertClockIcon=__name(function(elem){elem.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),insertArrowHead=__name(function(elem){elem.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),insertArrowEnd=__name(function(elem){elem.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),insertArrowFilledHead=__name(function(elem){elem.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),insertDynamicNumber=__name(function(elem){elem.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),insertArrowCrossHead=__name(function(elem){const marker=elem.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);marker.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),marker.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),getC4ShapeFont=__name((cnf,typeC4Shape)=>({fontFamily:cnf[typeC4Shape+"FontFamily"],fontSize:cnf[typeC4Shape+"FontSize"],fontWeight:cnf[typeC4Shape+"FontWeight"]}),"getC4ShapeFont"),_drawTextCandidateFunc=function(){function byText(content,g2,x5,y6,width3,height2,textAttrs){_setTextAttrs(g2.append("text").attr("x",x5+width3/2).attr("y",y6+height2/2+5).style("text-anchor","middle").text(content),textAttrs)}function byTspan(content,g2,x5,y6,width3,height2,textAttrs,conf5){const{fontSize:fontSize,fontFamily:fontFamily,fontWeight:fontWeight}=conf5,lines=content.split(common_default.lineBreakRegex);for(let i2=0;i2<lines.length;i2++){const dy=i2*fontSize-fontSize*(lines.length-1)/2,text4=g2.append("text").attr("x",x5+width3/2).attr("y",y6).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",fontSize).style("font-weight",fontWeight).style("font-family",fontFamily);text4.append("tspan").attr("dy",dy).text(lines[i2]).attr("alignment-baseline","mathematical"),_setTextAttrs(text4,textAttrs)}}function byFo(content,g2,x5,y6,width3,height2,textAttrs,conf5){const s2=g2.append("switch"),text4=s2.append("foreignObject").attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");text4.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(content),byTspan(content,s2,x5,y6,width3,0,textAttrs,conf5),_setTextAttrs(text4,textAttrs)}function _setTextAttrs(toText,fromTextAttrsDict){for(const key in fromTextAttrsDict)fromTextAttrsDict.hasOwnProperty(key)&&toText.attr(key,fromTextAttrsDict[key])}return __name(byText,"byText"),__name(byTspan,"byTspan"),__name(byFo,"byFo"),__name(_setTextAttrs,"_setTextAttrs"),function(conf5){return"fo"===conf5.textPlacement?byFo:"old"===conf5.textPlacement?byText:byTspan}}(),svgDraw_default={drawRect:drawRect2,drawBoundary:drawBoundary,drawC4Shape:drawC4Shape,drawRels:drawRels,drawImage:drawImage2,insertArrowHead:insertArrowHead,insertArrowEnd:insertArrowEnd,insertArrowFilledHead:insertArrowFilledHead,insertDynamicNumber:insertDynamicNumber,insertArrowCrossHead:insertArrowCrossHead,insertDatabaseIcon:insertDatabaseIcon,insertComputerIcon:insertComputerIcon,insertClockIcon:insertClockIcon}}}),init_freeGlobal=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_freeGlobal.js"(){freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeGlobal_default=freeGlobal}}),init_root=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_root.js"(){init_freeGlobal(),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root2=freeGlobal_default||freeSelf||Function("return this")(),root_default=root2}}),init_Symbol=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Symbol.js"(){init_root(),Symbol2=root_default.Symbol,Symbol_default=Symbol2}});function getRawTag(value2){var isOwn=hasOwnProperty.call(value2,symToStringTag),tag=value2[symToStringTag];try{value2[symToStringTag]=void 0;var unmasked=!0}catch(e3){}var result=nativeObjectToString.call(value2);return unmasked&&(isOwn?value2[symToStringTag]=tag:delete value2[symToStringTag]),result}var objectProto2,nativeObjectToString2,objectToString_default,init_getRawTag=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getRawTag.js"(){init_Symbol(),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol_default?Symbol_default.toStringTag:void 0,__name(getRawTag,"getRawTag"),getRawTag_default=getRawTag}});function objectToString(value2){return nativeObjectToString2.call(value2)}var nullTag,undefinedTag,symToStringTag2,baseGetTag_default,init_objectToString=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_objectToString.js"(){objectProto2=Object.prototype,nativeObjectToString2=objectProto2.toString,__name(objectToString,"objectToString"),objectToString_default=objectToString}});function baseGetTag(value2){return null==value2?void 0===value2?undefinedTag:nullTag:symToStringTag2&&symToStringTag2 in Object(value2)?getRawTag_default(value2):objectToString_default(value2)}var isObject_default,init_baseGetTag=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseGetTag.js"(){init_Symbol(),init_getRawTag(),init_objectToString(),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag2=Symbol_default?Symbol_default.toStringTag:void 0,__name(baseGetTag,"baseGetTag"),baseGetTag_default=baseGetTag}});function isObject(value2){var type3=typeof value2;return null!=value2&&("object"==type3||"function"==type3)}var asyncTag,funcTag,genTag,proxyTag,isFunction_default,init_isObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isObject.js"(){__name(isObject,"isObject"),isObject_default=isObject}});function isFunction(value2){if(!isObject_default(value2))return!1;var tag=baseGetTag_default(value2);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData,coreJsData_default,maskSrcKey,isMasked_default,init_isFunction=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isFunction.js"(){init_baseGetTag(),init_isObject(),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]",__name(isFunction,"isFunction"),isFunction_default=isFunction}}),init_coreJsData=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_coreJsData.js"(){init_root(),coreJsData=root_default["__core-js_shared__"],coreJsData_default=coreJsData}});function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto,funcToString,toSource_default,init_isMasked=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isMasked.js"(){var uid;init_coreJsData(),uid=/[^.]+$/.exec(coreJsData_default&&coreJsData_default.keys&&coreJsData_default.keys.IE_PROTO||""),maskSrcKey=uid?"Symbol(src)_1."+uid:"",__name(isMasked,"isMasked"),isMasked_default=isMasked}});function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e3){}try{return func+""}catch(e3){}}return""}var reRegExpChar,reIsHostCtor,funcProto2,objectProto3,funcToString2,hasOwnProperty2,reIsNative,baseIsNative_default,init_toSource=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_toSource.js"(){funcProto=Function.prototype,funcToString=funcProto.toString,__name(toSource,"toSource"),toSource_default=toSource}});function baseIsNative(value2){return!(!isObject_default(value2)||isMasked_default(value2))&&(isFunction_default(value2)?reIsNative:reIsHostCtor).test(toSource_default(value2))}var getValue_default,init_baseIsNative=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsNative.js"(){init_isFunction(),init_isMasked(),init_isObject(),init_toSource(),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto2=Function.prototype,objectProto3=Object.prototype,funcToString2=funcProto2.toString,hasOwnProperty2=objectProto3.hasOwnProperty,reIsNative=RegExp("^"+funcToString2.call(hasOwnProperty2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),__name(baseIsNative,"baseIsNative"),baseIsNative_default=baseIsNative}});function getValue(object3,key){return null==object3?void 0:object3[key]}var getNative_default,init_getValue=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getValue.js"(){__name(getValue,"getValue"),getValue_default=getValue}});function getNative(object3,key){var value2=getValue_default(object3,key);return baseIsNative_default(value2)?value2:void 0}var nativeCreate,nativeCreate_default,hashClear_default,init_getNative=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getNative.js"(){init_baseIsNative(),init_getValue(),__name(getNative,"getNative"),getNative_default=getNative}}),init_nativeCreate=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_nativeCreate.js"(){init_getNative(),nativeCreate=getNative_default(Object,"create"),nativeCreate_default=nativeCreate}});function hashClear(){this.__data__=nativeCreate_default?nativeCreate_default(null):{},this.size=0}var hashDelete_default,init_hashClear=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hashClear.js"(){init_nativeCreate(),__name(hashClear,"hashClear"),hashClear_default=hashClear}});function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}var HASH_UNDEFINED,objectProto4,hasOwnProperty3,hashGet_default,init_hashDelete=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hashDelete.js"(){__name(hashDelete,"hashDelete"),hashDelete_default=hashDelete}});function hashGet(key){var data5=this.__data__;if(nativeCreate_default){var result=data5[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty3.call(data5,key)?data5[key]:void 0}var objectProto5,hasOwnProperty4,hashHas_default,init_hashGet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hashGet.js"(){init_nativeCreate(),HASH_UNDEFINED="__lodash_hash_undefined__",objectProto4=Object.prototype,hasOwnProperty3=objectProto4.hasOwnProperty,__name(hashGet,"hashGet"),hashGet_default=hashGet}});function hashHas(key){var data5=this.__data__;return nativeCreate_default?void 0!==data5[key]:hasOwnProperty4.call(data5,key)}var HASH_UNDEFINED2,hashSet_default,init_hashHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hashHas.js"(){init_nativeCreate(),objectProto5=Object.prototype,hasOwnProperty4=objectProto5.hasOwnProperty,__name(hashHas,"hashHas"),hashHas_default=hashHas}});function hashSet(key,value2){var data5=this.__data__;return this.size+=this.has(key)?0:1,data5[key]=nativeCreate_default&&void 0===value2?HASH_UNDEFINED2:value2,this}var Hash_default,init_hashSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hashSet.js"(){init_nativeCreate(),HASH_UNDEFINED2="__lodash_hash_undefined__",__name(hashSet,"hashSet"),hashSet_default=hashSet}});function Hash(entries2){var index=-1,length2=null==entries2?0:entries2.length;for(this.clear();++index<length2;){var entry=entries2[index];this.set(entry[0],entry[1])}}var listCacheClear_default,init_Hash=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Hash.js"(){init_hashClear(),init_hashDelete(),init_hashGet(),init_hashHas(),init_hashSet(),__name(Hash,"Hash"),Hash.prototype.clear=hashClear_default,Hash.prototype.delete=hashDelete_default,Hash.prototype.get=hashGet_default,Hash.prototype.has=hashHas_default,Hash.prototype.set=hashSet_default,Hash_default=Hash}});function listCacheClear(){this.__data__=[],this.size=0}var eq_default,init_listCacheClear=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_listCacheClear.js"(){__name(listCacheClear,"listCacheClear"),listCacheClear_default=listCacheClear}});function eq(value2,other){return value2===other||value2!=value2&&other!=other}var assocIndexOf_default,init_eq=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/eq.js"(){__name(eq,"eq"),eq_default=eq}});function assocIndexOf(array4,key){for(var length2=array4.length;length2--;)if(eq_default(array4[length2][0],key))return length2;return-1}var arrayProto,splice,listCacheDelete_default,init_assocIndexOf=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_assocIndexOf.js"(){init_eq(),__name(assocIndexOf,"assocIndexOf"),assocIndexOf_default=assocIndexOf}});function listCacheDelete(key){var data5=this.__data__,index=assocIndexOf_default(data5,key);return!(index<0)&&(index==data5.length-1?data5.pop():splice.call(data5,index,1),--this.size,!0)}var listCacheGet_default,init_listCacheDelete=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_listCacheDelete.js"(){init_assocIndexOf(),arrayProto=Array.prototype,splice=arrayProto.splice,__name(listCacheDelete,"listCacheDelete"),listCacheDelete_default=listCacheDelete}});function listCacheGet(key){var data5=this.__data__,index=assocIndexOf_default(data5,key);return index<0?void 0:data5[index][1]}var listCacheHas_default,init_listCacheGet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_listCacheGet.js"(){init_assocIndexOf(),__name(listCacheGet,"listCacheGet"),listCacheGet_default=listCacheGet}});function listCacheHas(key){return assocIndexOf_default(this.__data__,key)>-1}var listCacheSet_default,init_listCacheHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_listCacheHas.js"(){init_assocIndexOf(),__name(listCacheHas,"listCacheHas"),listCacheHas_default=listCacheHas}});function listCacheSet(key,value2){var data5=this.__data__,index=assocIndexOf_default(data5,key);return index<0?(++this.size,data5.push([key,value2])):data5[index][1]=value2,this}var ListCache_default,init_listCacheSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_listCacheSet.js"(){init_assocIndexOf(),__name(listCacheSet,"listCacheSet"),listCacheSet_default=listCacheSet}});function ListCache(entries2){var index=-1,length2=null==entries2?0:entries2.length;for(this.clear();++index<length2;){var entry=entries2[index];this.set(entry[0],entry[1])}}var Map2,Map_default,mapCacheClear_default,init_ListCache=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_ListCache.js"(){init_listCacheClear(),init_listCacheDelete(),init_listCacheGet(),init_listCacheHas(),init_listCacheSet(),__name(ListCache,"ListCache"),ListCache.prototype.clear=listCacheClear_default,ListCache.prototype.delete=listCacheDelete_default,ListCache.prototype.get=listCacheGet_default,ListCache.prototype.has=listCacheHas_default,ListCache.prototype.set=listCacheSet_default,ListCache_default=ListCache}}),init_Map=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Map.js"(){init_getNative(),init_root(),Map2=getNative_default(root_default,"Map"),Map_default=Map2}});function mapCacheClear(){this.size=0,this.__data__={hash:new Hash_default,map:new(Map_default||ListCache_default),string:new Hash_default}}var isKeyable_default,init_mapCacheClear=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_mapCacheClear.js"(){init_Hash(),init_ListCache(),init_Map(),__name(mapCacheClear,"mapCacheClear"),mapCacheClear_default=mapCacheClear}});function isKeyable(value2){var type3=typeof value2;return"string"==type3||"number"==type3||"symbol"==type3||"boolean"==type3?"__proto__"!==value2:null===value2}var getMapData_default,init_isKeyable=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isKeyable.js"(){__name(isKeyable,"isKeyable"),isKeyable_default=isKeyable}});function getMapData(map5,key){var data5=map5.__data__;return isKeyable_default(key)?data5["string"==typeof key?"string":"hash"]:data5.map}var mapCacheDelete_default,init_getMapData=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getMapData.js"(){init_isKeyable(),__name(getMapData,"getMapData"),getMapData_default=getMapData}});function mapCacheDelete(key){var result=getMapData_default(this,key).delete(key);return this.size-=result?1:0,result}var mapCacheGet_default,init_mapCacheDelete=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_mapCacheDelete.js"(){init_getMapData(),__name(mapCacheDelete,"mapCacheDelete"),mapCacheDelete_default=mapCacheDelete}});function mapCacheGet(key){return getMapData_default(this,key).get(key)}var mapCacheHas_default,init_mapCacheGet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_mapCacheGet.js"(){init_getMapData(),__name(mapCacheGet,"mapCacheGet"),mapCacheGet_default=mapCacheGet}});function mapCacheHas(key){return getMapData_default(this,key).has(key)}var mapCacheSet_default,init_mapCacheHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_mapCacheHas.js"(){init_getMapData(),__name(mapCacheHas,"mapCacheHas"),mapCacheHas_default=mapCacheHas}});function mapCacheSet(key,value2){var data5=getMapData_default(this,key),size4=data5.size;return data5.set(key,value2),this.size+=data5.size==size4?0:1,this}var MapCache_default,init_mapCacheSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_mapCacheSet.js"(){init_getMapData(),__name(mapCacheSet,"mapCacheSet"),mapCacheSet_default=mapCacheSet}});function MapCache(entries2){var index=-1,length2=null==entries2?0:entries2.length;for(this.clear();++index<length2;){var entry=entries2[index];this.set(entry[0],entry[1])}}var FUNC_ERROR_TEXT,memoize_default,init_MapCache=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_MapCache.js"(){init_mapCacheClear(),init_mapCacheDelete(),init_mapCacheGet(),init_mapCacheHas(),init_mapCacheSet(),__name(MapCache,"MapCache"),MapCache.prototype.clear=mapCacheClear_default,MapCache.prototype.delete=mapCacheDelete_default,MapCache.prototype.get=mapCacheGet_default,MapCache.prototype.has=mapCacheHas_default,MapCache.prototype.set=mapCacheSet_default,MapCache_default=MapCache}});function memoize(func,resolver3){if("function"!=typeof func||null!=resolver3&&"function"!=typeof resolver3)throw new TypeError(FUNC_ERROR_TEXT);var memoized=__name(function(){var args=arguments,key=resolver3?resolver3.apply(this,args):args[0],cache3=memoized.cache;if(cache3.has(key))return cache3.get(key);var result=func.apply(this,args);return memoized.cache=cache3.set(key,result)||cache3,result},"memoized");return memoized.cache=new(memoize.Cache||MapCache_default),memoized}var stackClear_default,init_memoize=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/memoize.js"(){init_MapCache(),FUNC_ERROR_TEXT="Expected a function",__name(memoize,"memoize"),memoize.Cache=MapCache_default,memoize_default=memoize}});function stackClear(){this.__data__=new ListCache_default,this.size=0}var stackDelete_default,init_stackClear=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stackClear.js"(){init_ListCache(),__name(stackClear,"stackClear"),stackClear_default=stackClear}});function stackDelete(key){var data5=this.__data__,result=data5.delete(key);return this.size=data5.size,result}var stackGet_default,init_stackDelete=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stackDelete.js"(){__name(stackDelete,"stackDelete"),stackDelete_default=stackDelete}});function stackGet(key){return this.__data__.get(key)}var stackHas_default,init_stackGet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stackGet.js"(){__name(stackGet,"stackGet"),stackGet_default=stackGet}});function stackHas(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE,stackSet_default,init_stackHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stackHas.js"(){__name(stackHas,"stackHas"),stackHas_default=stackHas}});function stackSet(key,value2){var data5=this.__data__;if(data5 instanceof ListCache_default){var pairs2=data5.__data__;if(!Map_default||pairs2.length<LARGE_ARRAY_SIZE-1)return pairs2.push([key,value2]),this.size=++data5.size,this;data5=this.__data__=new MapCache_default(pairs2)}return data5.set(key,value2),this.size=data5.size,this}var Stack_default,init_stackSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stackSet.js"(){init_ListCache(),init_Map(),init_MapCache(),LARGE_ARRAY_SIZE=200,__name(stackSet,"stackSet"),stackSet_default=stackSet}});function Stack(entries2){var data5=this.__data__=new ListCache_default(entries2);this.size=data5.size}var defineProperty,defineProperty_default,baseAssignValue_default,init_Stack=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Stack.js"(){init_ListCache(),init_stackClear(),init_stackDelete(),init_stackGet(),init_stackHas(),init_stackSet(),__name(Stack,"Stack"),Stack.prototype.clear=stackClear_default,Stack.prototype.delete=stackDelete_default,Stack.prototype.get=stackGet_default,Stack.prototype.has=stackHas_default,Stack.prototype.set=stackSet_default,Stack_default=Stack}}),init_defineProperty=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_defineProperty.js"(){init_getNative(),defineProperty=function(){try{var func=getNative_default(Object,"defineProperty");return func({},"",{}),func}catch(e3){}}(),defineProperty_default=defineProperty}});function baseAssignValue(object3,key,value2){"__proto__"==key&&defineProperty_default?defineProperty_default(object3,key,{configurable:!0,enumerable:!0,value:value2,writable:!0}):object3[key]=value2}var assignMergeValue_default,init_baseAssignValue=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseAssignValue.js"(){init_defineProperty(),__name(baseAssignValue,"baseAssignValue"),baseAssignValue_default=baseAssignValue}});function assignMergeValue(object3,key,value2){(void 0!==value2&&!eq_default(object3[key],value2)||void 0===value2&&!(key in object3))&&baseAssignValue_default(object3,key,value2)}var createBaseFor_default,init_assignMergeValue=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_assignMergeValue.js"(){init_baseAssignValue(),init_eq(),__name(assignMergeValue,"assignMergeValue"),assignMergeValue_default=assignMergeValue}});function createBaseFor(fromRight){return function(object3,iteratee,keysFunc){for(var index=-1,iterable=Object(object3),props=keysFunc(object3),length2=props.length;length2--;){var key=props[fromRight?length2:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object3}}var baseFor,baseFor_default,freeExports,freeModule,moduleExports,Buffer2,allocUnsafe,cloneBuffer_default,init_createBaseFor=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createBaseFor.js"(){__name(createBaseFor,"createBaseFor"),createBaseFor_default=createBaseFor}}),init_baseFor=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseFor.js"(){init_createBaseFor(),baseFor=createBaseFor_default(),baseFor_default=baseFor}});function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length2=buffer.length,result=allocUnsafe?allocUnsafe(length2):new buffer.constructor(length2);return buffer.copy(result),result}var Uint8Array2,Uint8Array_default,cloneArrayBuffer_default,init_cloneBuffer=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cloneBuffer.js"(){init_root(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer2=moduleExports?root_default.Buffer:void 0,allocUnsafe=Buffer2?Buffer2.allocUnsafe:void 0,__name(cloneBuffer,"cloneBuffer"),cloneBuffer_default=cloneBuffer}}),init_Uint8Array=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Uint8Array.js"(){init_root(),Uint8Array2=root_default.Uint8Array,Uint8Array_default=Uint8Array2}});function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array_default(result).set(new Uint8Array_default(arrayBuffer)),result}var cloneTypedArray_default,init_cloneArrayBuffer=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cloneArrayBuffer.js"(){init_Uint8Array(),__name(cloneArrayBuffer,"cloneArrayBuffer"),cloneArrayBuffer_default=cloneArrayBuffer}});function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer_default(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}var copyArray_default,init_cloneTypedArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cloneTypedArray.js"(){init_cloneArrayBuffer(),__name(cloneTypedArray,"cloneTypedArray"),cloneTypedArray_default=cloneTypedArray}});function copyArray(source,array4){var index=-1,length2=source.length;for(array4||(array4=Array(length2));++index<length2;)array4[index]=source[index];return array4}var objectCreate,baseCreate_default,overArg_default,init_copyArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_copyArray.js"(){__name(copyArray,"copyArray"),copyArray_default=copyArray}}),init_baseCreate=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseCreate.js"(){init_isObject(),objectCreate=Object.create,baseCreate_default=function(){function object3(){}return __name(object3,"object"),function(proto){if(!isObject_default(proto))return{};if(objectCreate)return objectCreate(proto);object3.prototype=proto;var result=new object3;return object3.prototype=void 0,result}}()}});function overArg(func,transform8){return function(arg){return func(transform8(arg))}}var getPrototype,getPrototype_default,objectProto6,isPrototype_default,init_overArg=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_overArg.js"(){__name(overArg,"overArg"),overArg_default=overArg}}),init_getPrototype=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getPrototype.js"(){init_overArg(),getPrototype=overArg_default(Object.getPrototypeOf,Object),getPrototype_default=getPrototype}});function isPrototype(value2){var Ctor=value2&&value2.constructor;return value2===("function"==typeof Ctor&&Ctor.prototype||objectProto6)}var initCloneObject_default,init_isPrototype=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isPrototype.js"(){objectProto6=Object.prototype,__name(isPrototype,"isPrototype"),isPrototype_default=isPrototype}});function initCloneObject(object3){return"function"!=typeof object3.constructor||isPrototype_default(object3)?{}:baseCreate_default(getPrototype_default(object3))}var isObjectLike_default,init_initCloneObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_initCloneObject.js"(){init_baseCreate(),init_getPrototype(),init_isPrototype(),__name(initCloneObject,"initCloneObject"),initCloneObject_default=initCloneObject}});function isObjectLike(value2){return null!=value2&&"object"==typeof value2}var argsTag,baseIsArguments_default,init_isObjectLike=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isObjectLike.js"(){__name(isObjectLike,"isObjectLike"),isObjectLike_default=isObjectLike}});function baseIsArguments(value2){return isObjectLike_default(value2)&&baseGetTag_default(value2)==argsTag}var objectProto7,hasOwnProperty5,propertyIsEnumerable,isArguments,isArguments_default,isArray,isArray_default,MAX_SAFE_INTEGER,isLength_default,init_baseIsArguments=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsArguments.js"(){init_baseGetTag(),init_isObjectLike(),argsTag="[object Arguments]",__name(baseIsArguments,"baseIsArguments"),baseIsArguments_default=baseIsArguments}}),init_isArguments=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isArguments.js"(){init_baseIsArguments(),init_isObjectLike(),objectProto7=Object.prototype,hasOwnProperty5=objectProto7.hasOwnProperty,propertyIsEnumerable=objectProto7.propertyIsEnumerable,isArguments=baseIsArguments_default(function(){return arguments}())?baseIsArguments_default:function(value2){return isObjectLike_default(value2)&&hasOwnProperty5.call(value2,"callee")&&!propertyIsEnumerable.call(value2,"callee")},isArguments_default=isArguments}}),init_isArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isArray.js"(){isArray=Array.isArray,isArray_default=isArray}});function isLength(value2){return"number"==typeof value2&&value2>-1&&value2%1==0&&value2<=MAX_SAFE_INTEGER}var isArrayLike_default,init_isLength=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isLength.js"(){MAX_SAFE_INTEGER=9007199254740991,__name(isLength,"isLength"),isLength_default=isLength}});function isArrayLike(value2){return null!=value2&&isLength_default(value2.length)&&!isFunction_default(value2)}var isArrayLikeObject_default,init_isArrayLike=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isArrayLike.js"(){init_isFunction(),init_isLength(),__name(isArrayLike,"isArrayLike"),isArrayLike_default=isArrayLike}});function isArrayLikeObject(value2){return isObjectLike_default(value2)&&isArrayLike_default(value2)}var stubFalse_default,init_isArrayLikeObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isArrayLikeObject.js"(){init_isArrayLike(),init_isObjectLike(),__name(isArrayLikeObject,"isArrayLikeObject"),isArrayLikeObject_default=isArrayLikeObject}});function stubFalse(){return!1}var freeExports2,freeModule2,moduleExports2,Buffer3,nativeIsBuffer,isBuffer_default,objectTag,funcProto3,objectProto8,funcToString3,hasOwnProperty6,objectCtorString,isPlainObject_default,init_stubFalse=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/stubFalse.js"(){__name(stubFalse,"stubFalse"),stubFalse_default=stubFalse}}),init_isBuffer=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isBuffer.js"(){init_root(),init_stubFalse(),freeExports2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule2=freeExports2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports2=freeModule2&&freeModule2.exports===freeExports2,Buffer3=moduleExports2?root_default.Buffer:void 0,nativeIsBuffer=Buffer3?Buffer3.isBuffer:void 0,isBuffer_default=nativeIsBuffer||stubFalse_default}});function isPlainObject(value2){if(!isObjectLike_default(value2)||baseGetTag_default(value2)!=objectTag)return!1;var proto=getPrototype_default(value2);if(null===proto)return!0;var Ctor=hasOwnProperty6.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString3.call(Ctor)==objectCtorString}var typedArrayTags,baseIsTypedArray_default,init_isPlainObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isPlainObject.js"(){init_baseGetTag(),init_getPrototype(),init_isObjectLike(),objectTag="[object Object]",funcProto3=Function.prototype,objectProto8=Object.prototype,funcToString3=funcProto3.toString,hasOwnProperty6=objectProto8.hasOwnProperty,objectCtorString=funcToString3.call(Object),__name(isPlainObject,"isPlainObject"),isPlainObject_default=isPlainObject}});function baseIsTypedArray(value2){return isObjectLike_default(value2)&&isLength_default(value2.length)&&!!typedArrayTags[baseGetTag_default(value2)]}var baseUnary_default,init_baseIsTypedArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsTypedArray.js"(){init_baseGetTag(),init_isLength(),init_isObjectLike(),(typedArrayTags={})["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,__name(baseIsTypedArray,"baseIsTypedArray"),baseIsTypedArray_default=baseIsTypedArray}});function baseUnary(func){return function(value2){return func(value2)}}var freeExports3,freeModule3,moduleExports3,freeProcess,nodeUtil,nodeUtil_default,nodeIsTypedArray,isTypedArray,isTypedArray_default,safeGet_default,init_baseUnary=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseUnary.js"(){__name(baseUnary,"baseUnary"),baseUnary_default=baseUnary}}),init_nodeUtil=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_nodeUtil.js"(){init_freeGlobal(),freeExports3="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule3=freeExports3&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports3=freeModule3&&freeModule3.exports===freeExports3,freeProcess=moduleExports3&&freeGlobal_default.process,nodeUtil=function(){try{var types=freeModule3&&freeModule3.require&&freeModule3.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e3){}}(),nodeUtil_default=nodeUtil}}),init_isTypedArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isTypedArray.js"(){init_baseIsTypedArray(),init_baseUnary(),init_nodeUtil(),nodeIsTypedArray=nodeUtil_default&&nodeUtil_default.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary_default(nodeIsTypedArray):baseIsTypedArray_default,isTypedArray_default=isTypedArray}});function safeGet(object3,key){if(("constructor"!==key||"function"!=typeof object3[key])&&"__proto__"!=key)return object3[key]}var objectProto9,hasOwnProperty7,assignValue_default,init_safeGet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_safeGet.js"(){__name(safeGet,"safeGet"),safeGet_default=safeGet}});function assignValue(object3,key,value2){var objValue=object3[key];hasOwnProperty7.call(object3,key)&&eq_default(objValue,value2)&&(void 0!==value2||key in object3)||baseAssignValue_default(object3,key,value2)}var copyObject_default,init_assignValue=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_assignValue.js"(){init_baseAssignValue(),init_eq(),objectProto9=Object.prototype,hasOwnProperty7=objectProto9.hasOwnProperty,__name(assignValue,"assignValue"),assignValue_default=assignValue}});function copyObject(source,props,object3,customizer){var isNew=!object3;object3||(object3={});for(var index=-1,length2=props.length;++index<length2;){var key=props[index],newValue=customizer?customizer(object3[key],source[key],key,object3,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue_default(object3,key,newValue):assignValue_default(object3,key,newValue)}return object3}var baseTimes_default,init_copyObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_copyObject.js"(){init_assignValue(),init_baseAssignValue(),__name(copyObject,"copyObject"),copyObject_default=copyObject}});function baseTimes(n2,iteratee){for(var index=-1,result=Array(n2);++index<n2;)result[index]=iteratee(index);return result}var MAX_SAFE_INTEGER2,reIsUint,isIndex_default,init_baseTimes=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseTimes.js"(){__name(baseTimes,"baseTimes"),baseTimes_default=baseTimes}});function isIndex(value2,length2){var type3=typeof value2;return!!(length2=null==length2?MAX_SAFE_INTEGER2:length2)&&("number"==type3||"symbol"!=type3&&reIsUint.test(value2))&&value2>-1&&value2%1==0&&value2<length2}var objectProto10,hasOwnProperty8,arrayLikeKeys_default,init_isIndex=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isIndex.js"(){MAX_SAFE_INTEGER2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/,__name(isIndex,"isIndex"),isIndex_default=isIndex}});function arrayLikeKeys(value2,inherited){var isArr=isArray_default(value2),isArg=!isArr&&isArguments_default(value2),isBuff=!isArr&&!isArg&&isBuffer_default(value2),isType2=!isArr&&!isArg&&!isBuff&&isTypedArray_default(value2),skipIndexes=isArr||isArg||isBuff||isType2,result=skipIndexes?baseTimes_default(value2.length,String):[],length2=result.length;for(var key in value2)!inherited&&!hasOwnProperty8.call(value2,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType2&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex_default(key,length2))||result.push(key);return result}var nativeKeysIn_default,init_arrayLikeKeys=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayLikeKeys.js"(){init_baseTimes(),init_isArguments(),init_isArray(),init_isBuffer(),init_isIndex(),init_isTypedArray(),objectProto10=Object.prototype,hasOwnProperty8=objectProto10.hasOwnProperty,__name(arrayLikeKeys,"arrayLikeKeys"),arrayLikeKeys_default=arrayLikeKeys}});function nativeKeysIn(object3){var result=[];if(null!=object3)for(var key in Object(object3))result.push(key);return result}var objectProto11,hasOwnProperty9,baseKeysIn_default,init_nativeKeysIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_nativeKeysIn.js"(){__name(nativeKeysIn,"nativeKeysIn"),nativeKeysIn_default=nativeKeysIn}});function baseKeysIn(object3){if(!isObject_default(object3))return nativeKeysIn_default(object3);var isProto=isPrototype_default(object3),result=[];for(var key in object3)("constructor"!=key||!isProto&&hasOwnProperty9.call(object3,key))&&result.push(key);return result}var keysIn_default,init_baseKeysIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseKeysIn.js"(){init_isObject(),init_isPrototype(),init_nativeKeysIn(),objectProto11=Object.prototype,hasOwnProperty9=objectProto11.hasOwnProperty,__name(baseKeysIn,"baseKeysIn"),baseKeysIn_default=baseKeysIn}});function keysIn(object3){return isArrayLike_default(object3)?arrayLikeKeys_default(object3,!0):baseKeysIn_default(object3)}var toPlainObject_default,init_keysIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/keysIn.js"(){init_arrayLikeKeys(),init_baseKeysIn(),init_isArrayLike(),__name(keysIn,"keysIn"),keysIn_default=keysIn}});function toPlainObject(value2){return copyObject_default(value2,keysIn_default(value2))}var baseMergeDeep_default,init_toPlainObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toPlainObject.js"(){init_copyObject(),init_keysIn(),__name(toPlainObject,"toPlainObject"),toPlainObject_default=toPlainObject}});function baseMergeDeep(object3,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet_default(object3,key),srcValue=safeGet_default(source,key),stacked=stack.get(srcValue);if(stacked)assignMergeValue_default(object3,key,stacked);else{var newValue=customizer?customizer(objValue,srcValue,key+"",object3,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray_default(srcValue),isBuff=!isArr&&isBuffer_default(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray_default(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray_default(objValue)?newValue=objValue:isArrayLikeObject_default(objValue)?newValue=copyArray_default(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer_default(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray_default(srcValue,!0)):newValue=[]:isPlainObject_default(srcValue)||isArguments_default(srcValue)?(newValue=objValue,isArguments_default(objValue)?newValue=toPlainObject_default(objValue):isObject_default(objValue)&&!isFunction_default(objValue)||(newValue=initCloneObject_default(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue_default(object3,key,newValue)}}var baseMerge_default,init_baseMergeDeep=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseMergeDeep.js"(){init_assignMergeValue(),init_cloneBuffer(),init_cloneTypedArray(),init_copyArray(),init_initCloneObject(),init_isArguments(),init_isArray(),init_isArrayLikeObject(),init_isBuffer(),init_isFunction(),init_isObject(),init_isPlainObject(),init_isTypedArray(),init_safeGet(),init_toPlainObject(),__name(baseMergeDeep,"baseMergeDeep"),baseMergeDeep_default=baseMergeDeep}});function baseMerge(object3,source,srcIndex,customizer,stack){object3!==source&&baseFor_default(source,function(srcValue,key){if(stack||(stack=new Stack_default),isObject_default(srcValue))baseMergeDeep_default(object3,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet_default(object3,key),srcValue,key+"",object3,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue_default(object3,key,newValue)}},keysIn_default)}var identity_default4,init_baseMerge=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseMerge.js"(){init_Stack(),init_assignMergeValue(),init_baseFor(),init_baseMergeDeep(),init_isObject(),init_keysIn(),init_safeGet(),__name(baseMerge,"baseMerge"),baseMerge_default=baseMerge}});function identity4(value2){return value2}var apply_default,init_identity4=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/identity.js"(){__name(identity4,"identity"),identity_default4=identity4}});function apply2(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}var nativeMax,overRest_default,init_apply=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_apply.js"(){__name(apply2,"apply"),apply_default=apply2}});function overRest(func,start3,transform8){return start3=nativeMax(void 0===start3?func.length-1:start3,0),function(){for(var args=arguments,index=-1,length2=nativeMax(args.length-start3,0),array4=Array(length2);++index<length2;)array4[index]=args[start3+index];index=-1;for(var otherArgs=Array(start3+1);++index<start3;)otherArgs[index]=args[index];return otherArgs[start3]=transform8(array4),apply_default(func,this,otherArgs)}}var constant_default7,init_overRest=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_overRest.js"(){init_apply(),nativeMax=Math.max,__name(overRest,"overRest"),overRest_default=overRest}});function constant(value2){return function(){return value2}}var baseSetToString_default,HOT_COUNT,HOT_SPAN,nativeNow,shortOut_default,init_constant8=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/constant.js"(){__name(constant,"constant"),constant_default7=constant}}),init_baseSetToString=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseSetToString.js"(){init_constant8(),init_defineProperty(),init_identity4(),baseSetToString_default=defineProperty_default?function(func,string3){return defineProperty_default(func,"toString",{configurable:!0,enumerable:!1,value:constant_default7(string3),writable:!0})}:identity_default4}});function shortOut(func){var count2=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count2>=HOT_COUNT)return arguments[0]}else count2=0;return func.apply(void 0,arguments)}}var setToString,setToString_default,baseRest_default,init_shortOut=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_shortOut.js"(){HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now,__name(shortOut,"shortOut"),shortOut_default=shortOut}}),init_setToString=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_setToString.js"(){init_baseSetToString(),init_shortOut(),setToString=shortOut_default(baseSetToString_default),setToString_default=setToString}});function baseRest(func,start3){return setToString_default(overRest_default(func,start3,identity_default4),func+"")}var isIterateeCall_default,init_baseRest=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseRest.js"(){init_identity4(),init_overRest(),init_setToString(),__name(baseRest,"baseRest"),baseRest_default=baseRest}});function isIterateeCall(value2,index,object3){if(!isObject_default(object3))return!1;var type3=typeof index;return!!("number"==type3?isArrayLike_default(object3)&&isIndex_default(index,object3.length):"string"==type3&&index in object3)&&eq_default(object3[index],value2)}var createAssigner_default,init_isIterateeCall=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isIterateeCall.js"(){init_eq(),init_isArrayLike(),init_isIndex(),init_isObject(),__name(isIterateeCall,"isIterateeCall"),isIterateeCall_default=isIterateeCall}});function createAssigner(assigner){return baseRest_default(function(object3,sources){var index=-1,length2=sources.length,customizer=length2>1?sources[length2-1]:void 0,guard=length2>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length2--,customizer):void 0,guard&&isIterateeCall_default(sources[0],sources[1],guard)&&(customizer=length2<3?void 0:customizer,length2=1),object3=Object(object3);++index<length2;){var source=sources[index];source&&assigner(object3,source,index,customizer)}return object3})}var merge,merge_default3,import_sanitize_url3,ZERO_WIDTH_SPACE,d3CurveTypes,directiveWithoutOpen,detectInit,detectDirective,removeDirectives,isSubstringInArray,runFunc,roundNumber,calculatePoint,calcCardinalityPosition,cnt,generateId,random,getTextObj2,drawSimpleText,wrapLabel,breakString,calculateTextDimensions,InitIDGenerator,decoder,entityDecode,insertTitle,parseFontSize,utils_default2,encodeEntities,decodeEntities,getEdgeId,init_createAssigner=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createAssigner.js"(){init_baseRest(),init_isIterateeCall(),__name(createAssigner,"createAssigner"),createAssigner_default=createAssigner}}),init_merge4=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/merge.js"(){init_baseMerge(),init_createAssigner(),merge=createAssigner_default(function(object3,source,srcIndex){baseMerge_default(object3,source,srcIndex)}),merge_default3=merge}});function interpolateToCurve(interpolate,defaultCurve){if(!interpolate)return defaultCurve;const curveName=`curve${interpolate.charAt(0).toUpperCase()+interpolate.slice(1)}`;return d3CurveTypes[curveName]??defaultCurve}function formatUrl(linkStr,config5){const url=linkStr.trim();if(url)return"loose"!==config5.securityLevel?(0,import_sanitize_url3.sanitizeUrl)(url):url}function distance(p1,p22){return p1&&p22?Math.sqrt(Math.pow(p22.x-p1.x,2)+Math.pow(p22.y-p1.y,2)):0}function traverseEdge(points){let prevPoint,totalDistance=0;points.forEach(point8=>{totalDistance+=distance(point8,prevPoint),prevPoint=point8});return calculatePoint(points,totalDistance/2)}function calcLabelPosition(points){return 1===points.length?points[0]:traverseEdge(points)}function calcTerminalLabelPosition(terminalMarkerSize,position5,_points){const points=structuredClone(_points);log.info("our points",points),"start_left"!==position5&&"start_right"!==position5&&points.reverse();const center4=calculatePoint(points,25+terminalMarkerSize),d3=10+.5*terminalMarkerSize,angle2=Math.atan2(points[0].y-center4.y,points[0].x-center4.x),cardinalityPosition={x:0,y:0};return"start_left"===position5?(cardinalityPosition.x=Math.sin(angle2+Math.PI)*d3+(points[0].x+center4.x)/2,cardinalityPosition.y=-Math.cos(angle2+Math.PI)*d3+(points[0].y+center4.y)/2):"end_right"===position5?(cardinalityPosition.x=Math.sin(angle2-Math.PI)*d3+(points[0].x+center4.x)/2-5,cardinalityPosition.y=-Math.cos(angle2-Math.PI)*d3+(points[0].y+center4.y)/2-5):"end_left"===position5?(cardinalityPosition.x=Math.sin(angle2)*d3+(points[0].x+center4.x)/2-5,cardinalityPosition.y=-Math.cos(angle2)*d3+(points[0].y+center4.y)/2-5):(cardinalityPosition.x=Math.sin(angle2)*d3+(points[0].x+center4.x)/2,cardinalityPosition.y=-Math.cos(angle2)*d3+(points[0].y+center4.y)/2),cardinalityPosition}function getStylesFromArray(arr){let style3="",labelStyle="";for(const element3 of arr)void 0!==element3&&(element3.startsWith("color:")||element3.startsWith("text-align:")?labelStyle=labelStyle+element3+";":style3=style3+element3+";");return{style:style3,labelStyle:labelStyle}}function makeRandomHex(length2){let result="";for(let i2=0;i2<length2;i2++)result+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return result}function calculateTextHeight(text4,config5){return calculateTextDimensions(text4,config5).height}function calculateTextWidth(text4,config5){return calculateTextDimensions(text4,config5).width}function isDetailedError(error3){return"str"in error3}function cleanAndMerge(defaultData,data5){return merge_default3({},defaultData,data5)}function handleUndefinedAttr(attrValue){return attrValue??null}function isLabelCoordinateInPath(point8,dAttr){const roundedX=Math.round(point8.x),roundedY=Math.round(point8.y),sanitizedD=dAttr.replace(/(\d+\.\d+)/g,match2=>Math.round(parseFloat(match2)).toString());return sanitizedD.includes(roundedX.toString())||sanitizedD.includes(roundedY.toString())}var globalBoundaryMaxX,globalBoundaryMaxY,c4ShapeInRow2,c4BoundaryInRow2,conf,Bounds,setConf,c4ShapeFont,boundaryFont,messageFont,drawBoundary2,drawC4ShapeArray,Point2,getIntersectPoint,getIntersectPoints,drawRels2,c4Renderer_default,init_utils2=__esm({"src/utils.ts"(){import_sanitize_url3=__toESM(require_dist(),1),init_src32(),init_common(),init_sanitizeDirective(),init_logger(),init_detectType(),init_assignWithDepth(),init_memoize(),init_merge4(),init_regexes(),ZERO_WIDTH_SPACE="​",d3CurveTypes={curveBasis:basis_default2,curveBasisClosed:basisClosed_default2,curveBasisOpen:basisOpen_default,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle:bundle_default,curveCardinalClosed:cardinalClosed_default,curveCardinalOpen:cardinalOpen_default,curveCardinal:cardinal_default,curveCatmullRomClosed:catmullRomClosed_default,curveCatmullRomOpen:catmullRomOpen_default,curveCatmullRom:catmullRom_default,curveLinear:linear_default,curveLinearClosed:linearClosed_default,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural:natural_default,curveStep:step_default,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=__name(function(text4,config5){const inits=detectDirective(text4,/(?:init\b)|(?:initialize\b)/);let results={};if(Array.isArray(inits)){const args=inits.map(init3=>init3.args);sanitizeDirective(args),results=assignWithDepth_default(results,[...args])}else results=inits.args;if(!results)return;let type3=detectType(text4,config5);return void 0!==results.config&&("flowchart-v2"===type3&&(type3="flowchart"),results[type3]=results.config,delete results.config),results},"detectInit"),detectDirective=__name(function(text4,type3=null){try{const commentWithoutDirectives=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*\n`,"ig");let match2;text4=text4.trim().replace(commentWithoutDirectives,"").replace(/'/gm,'"'),log.debug(`Detecting diagram directive${null!==type3?" type:"+type3:""} based on the text:${text4}`);const result=[];for(;null!==(match2=directiveRegex.exec(text4));)if(match2.index===directiveRegex.lastIndex&&directiveRegex.lastIndex++,match2&&!type3||type3&&match2[1]?.match(type3)||type3&&match2[2]?.match(type3)){const type4=match2[1]?match2[1]:match2[2],args=match2[3]?match2[3].trim():match2[4]?JSON.parse(match2[4].trim()):null;result.push({type:type4,args:args})}return 0===result.length?{type:text4,args:null}:1===result.length?result[0]:result}catch(error3){return log.error(`ERROR: ${error3.message} - Unable to parse directive type: '${type3}' based on the text: '${text4}'`),{type:void 0,args:null}}},"detectDirective"),removeDirectives=__name(function(text4){return text4.replace(directiveRegex,"")},"removeDirectives"),isSubstringInArray=__name(function(str2,arr){for(const[i2,element3]of arr.entries())if(element3.match(str2))return i2;return-1},"isSubstringInArray"),__name(interpolateToCurve,"interpolateToCurve"),__name(formatUrl,"formatUrl"),runFunc=__name((functionName,...params)=>{const arrPaths=functionName.split("."),len=arrPaths.length-1,fnName=arrPaths[len];let obj=window;for(let i2=0;i2<len;i2++)if(obj=obj[arrPaths[i2]],!obj)return void log.error(`Function name: ${functionName} not found in window`);obj[fnName](...params)},"runFunc"),__name(distance,"distance"),__name(traverseEdge,"traverseEdge"),__name(calcLabelPosition,"calcLabelPosition"),roundNumber=__name((num,precision=2)=>{const factor=Math.pow(10,precision);return Math.round(num*factor)/factor},"roundNumber"),calculatePoint=__name((points,distanceToTraverse)=>{let prevPoint,remainingDistance=distanceToTraverse;for(const point8 of points){if(prevPoint){const vectorDistance=distance(point8,prevPoint);if(0===vectorDistance)return prevPoint;if(vectorDistance<remainingDistance)remainingDistance-=vectorDistance;else{const distanceRatio=remainingDistance/vectorDistance;if(distanceRatio<=0)return prevPoint;if(distanceRatio>=1)return{x:point8.x,y:point8.y};if(distanceRatio>0&&distanceRatio<1)return{x:roundNumber((1-distanceRatio)*prevPoint.x+distanceRatio*point8.x,5),y:roundNumber((1-distanceRatio)*prevPoint.y+distanceRatio*point8.y,5)}}}prevPoint=point8}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),calcCardinalityPosition=__name((isRelationTypePresent,points,initialPosition)=>{log.info(`our points ${JSON.stringify(points)}`),points[0]!==initialPosition&&(points=points.reverse());const center4=calculatePoint(points,25),d3=isRelationTypePresent?10:5,angle2=Math.atan2(points[0].y-center4.y,points[0].x-center4.x),cardinalityPosition={x:0,y:0};return cardinalityPosition.x=Math.sin(angle2)*d3+(points[0].x+center4.x)/2,cardinalityPosition.y=-Math.cos(angle2)*d3+(points[0].y+center4.y)/2,cardinalityPosition},"calcCardinalityPosition"),__name(calcTerminalLabelPosition,"calcTerminalLabelPosition"),__name(getStylesFromArray,"getStylesFromArray"),cnt=0,generateId=__name(()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt),"generateId"),__name(makeRandomHex,"makeRandomHex"),random=__name(options2=>makeRandomHex(options2.length),"random"),getTextObj2=__name(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),drawSimpleText=__name(function(elem,textData){const nText=textData.text.replace(common_default.lineBreakRegex," "),[,_fontSizePx]=parseFontSize(textData.fontSize),textElem=elem.append("text");textElem.attr("x",textData.x),textElem.attr("y",textData.y),textElem.style("text-anchor",textData.anchor),textElem.style("font-family",textData.fontFamily),textElem.style("font-size",_fontSizePx),textElem.style("font-weight",textData.fontWeight),textElem.attr("fill",textData.fill),void 0!==textData.class&&textElem.attr("class",textData.class);const span=textElem.append("tspan");return span.attr("x",textData.x+2*textData.textMargin),span.attr("fill",textData.fill),span.text(nText),textElem},"drawSimpleText"),wrapLabel=memoize_default((label,maxWidth2,config5)=>{if(!label)return label;if(config5=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},config5),common_default.lineBreakRegex.test(label))return label;const words=label.split(" ").filter(Boolean),completedLines=[];let nextLine="";return words.forEach((word,index)=>{const wordLength=calculateTextWidth(`${word} `,config5),nextLineLength=calculateTextWidth(nextLine,config5);if(wordLength>maxWidth2){const{hyphenatedStrings:hyphenatedStrings,remainingWord:remainingWord}=breakString(word,maxWidth2,"-",config5);completedLines.push(nextLine,...hyphenatedStrings),nextLine=remainingWord}else nextLineLength+wordLength>=maxWidth2?(completedLines.push(nextLine),nextLine=word):nextLine=[nextLine,word].filter(Boolean).join(" ");index+1===words.length&&completedLines.push(nextLine)}),completedLines.filter(line2=>""!==line2).join(config5.joinWith)},(label,maxWidth2,config5)=>`${label}${maxWidth2}${config5.fontSize}${config5.fontWeight}${config5.fontFamily}${config5.joinWith}`),breakString=memoize_default((word,maxWidth2,hyphenCharacter="-",config5)=>{config5=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},config5);const characters2=[...word],lines=[];let currentLine="";return characters2.forEach((character2,index)=>{const nextLine=`${currentLine}${character2}`;if(calculateTextWidth(nextLine,config5)>=maxWidth2){const currentCharacter=index+1,isLastLine=characters2.length===currentCharacter,hyphenatedNextLine=`${nextLine}${hyphenCharacter}`;lines.push(isLastLine?nextLine:hyphenatedNextLine),currentLine=""}else currentLine=nextLine}),{hyphenatedStrings:lines,remainingWord:currentLine}},(word,maxWidth2,hyphenCharacter="-",config5)=>`${word}${maxWidth2}${hyphenCharacter}${config5.fontSize}${config5.fontWeight}${config5.fontFamily}`),__name(calculateTextHeight,"calculateTextHeight"),__name(calculateTextWidth,"calculateTextWidth"),calculateTextDimensions=memoize_default((text4,config5)=>{const{fontSize:fontSize=12,fontFamily:fontFamily="Arial",fontWeight:fontWeight=400}=config5;if(!text4)return{width:0,height:0};const[,_fontSizePx]=parseFontSize(fontSize),fontFamilies=["sans-serif",fontFamily],lines=text4.split(common_default.lineBreakRegex),dims=[],body=select_default2("body");if(!body.remove)return{width:0,height:0,lineHeight:0};const g2=body.append("svg");for(const fontFamily2 of fontFamilies){let cHeight=0;const dim={width:0,height:0,lineHeight:0};for(const line2 of lines){const textObj=getTextObj2();textObj.text=line2||ZERO_WIDTH_SPACE;const textElem=drawSimpleText(g2,textObj).style("font-size",_fontSizePx).style("font-weight",fontWeight).style("font-family",fontFamily2),bBox=(textElem._groups||textElem)[0][0].getBBox();if(0===bBox.width&&0===bBox.height)throw new Error("svg element not in render tree");dim.width=Math.round(Math.max(dim.width,bBox.width)),cHeight=Math.round(bBox.height),dim.height+=cHeight,dim.lineHeight=Math.round(Math.max(dim.lineHeight,cHeight))}dims.push(dim)}g2.remove();return dims[isNaN(dims[1].height)||isNaN(dims[1].width)||isNaN(dims[1].lineHeight)||dims[0].height>dims[1].height&&dims[0].width>dims[1].width&&dims[0].lineHeight>dims[1].lineHeight?0:1]},(text4,config5)=>`${text4}${config5.fontSize}${config5.fontWeight}${config5.fontFamily}`),InitIDGenerator=class{constructor(deterministic=!1,seed){this.count=0,this.count=seed?seed.length:0,this.next=deterministic?()=>this.count++:()=>Date.now()}static{__name(this,"InitIDGenerator")}},entityDecode=__name(function(html2){return decoder=decoder||document.createElement("div"),html2=escape(html2).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=html2,unescape(decoder.textContent)},"entityDecode"),__name(isDetailedError,"isDetailedError"),insertTitle=__name((parent4,cssClass,titleTopMargin,title2)=>{if(!title2)return;const bounds4=parent4.node()?.getBBox();bounds4&&parent4.append("text").text(title2).attr("text-anchor","middle").attr("x",bounds4.x+bounds4.width/2).attr("y",-titleTopMargin).attr("class",cssClass)},"insertTitle"),parseFontSize=__name(fontSize=>{if("number"==typeof fontSize)return[fontSize,fontSize+"px"];const fontSizeNumber=parseInt(fontSize??"",10);return Number.isNaN(fontSizeNumber)?[void 0,void 0]:fontSize===String(fontSizeNumber)?[fontSizeNumber,fontSize+"px"]:[fontSizeNumber,fontSize]},"parseFontSize"),__name(cleanAndMerge,"cleanAndMerge"),utils_default2={assignWithDepth:assignWithDepth_default,wrapLabel:wrapLabel,calculateTextHeight:calculateTextHeight,calculateTextWidth:calculateTextWidth,calculateTextDimensions:calculateTextDimensions,cleanAndMerge:cleanAndMerge,detectInit:detectInit,detectDirective:detectDirective,isSubstringInArray:isSubstringInArray,interpolateToCurve:interpolateToCurve,calcLabelPosition:calcLabelPosition,calcCardinalityPosition:calcCardinalityPosition,calcTerminalLabelPosition:calcTerminalLabelPosition,formatUrl:formatUrl,getStylesFromArray:getStylesFromArray,generateId:generateId,random:random,runFunc:runFunc,entityDecode:entityDecode,insertTitle:insertTitle,isLabelCoordinateInPath:isLabelCoordinateInPath,parseFontSize:parseFontSize,InitIDGenerator:InitIDGenerator},encodeEntities=__name(function(text4){let txt=text4;return txt=txt.replace(/style.*:\S*#.*;/g,function(s2){return s2.substring(0,s2.length-1)}),txt=txt.replace(/classDef.*:\S*#.*;/g,function(s2){return s2.substring(0,s2.length-1)}),txt=txt.replace(/#\w+;/g,function(s2){const innerTxt=s2.substring(1,s2.length-1);return/^\+?\d+$/.test(innerTxt)?"ﬂ°°"+innerTxt+"¶ß":"ﬂ°"+innerTxt+"¶ß"}),txt},"encodeEntities"),decodeEntities=__name(function(text4){return text4.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),getEdgeId=__name((from2,to,{counter:counter2=0,prefix:prefix,suffix:suffix},id30)=>id30||`${prefix?`${prefix}_`:""}${from2}_${to}_${counter2}${suffix?`_${suffix}`:""}`,"getEdgeId"),__name(handleUndefinedAttr,"handleUndefinedAttr"),__name(isLabelCoordinateInPath,"isLabelCoordinateInPath")}});function calcC4ShapeTextWH(textType,c4Shape,c4ShapeTextWrap,textConf,textLimitWidth){if(!c4Shape[textType].width)if(c4ShapeTextWrap)c4Shape[textType].text=wrapLabel(c4Shape[textType].text,textLimitWidth,textConf),c4Shape[textType].textLines=c4Shape[textType].text.split(common_default.lineBreakRegex).length,c4Shape[textType].width=textLimitWidth,c4Shape[textType].height=calculateTextHeight(c4Shape[textType].text,textConf);else{let lines=c4Shape[textType].text.split(common_default.lineBreakRegex);c4Shape[textType].textLines=lines.length;let lineHeight=0;c4Shape[textType].height=0,c4Shape[textType].width=0;for(const line2 of lines)c4Shape[textType].width=Math.max(calculateTextWidth(line2,textConf),c4Shape[textType].width),lineHeight=calculateTextHeight(line2,textConf),c4Shape[textType].height=c4Shape[textType].height+lineHeight}}function drawInsideBoundary(diagram27,parentBoundaryAlias,parentBounds,currentBoundaries,diagObj){let currentBounds=new Bounds(diagObj);currentBounds.data.widthLimit=parentBounds.data.widthLimit/Math.min(c4BoundaryInRow2,currentBoundaries.length);for(let[i2,currentBoundary]of currentBoundaries.entries()){let Y3=0;currentBoundary.image={width:0,height:0,Y:0},currentBoundary.sprite&&(currentBoundary.image.width=48,currentBoundary.image.height=48,currentBoundary.image.Y=Y3,Y3=currentBoundary.image.Y+currentBoundary.image.height);let currentBoundaryTextWrap=currentBoundary.wrap&&conf.wrap,currentBoundaryLabelConf=boundaryFont(conf);if(currentBoundaryLabelConf.fontSize=currentBoundaryLabelConf.fontSize+2,currentBoundaryLabelConf.fontWeight="bold",calcC4ShapeTextWH("label",currentBoundary,currentBoundaryTextWrap,currentBoundaryLabelConf,currentBounds.data.widthLimit),currentBoundary.label.Y=Y3+8,Y3=currentBoundary.label.Y+currentBoundary.label.height,currentBoundary.type&&""!==currentBoundary.type.text){currentBoundary.type.text="["+currentBoundary.type.text+"]",calcC4ShapeTextWH("type",currentBoundary,currentBoundaryTextWrap,boundaryFont(conf),currentBounds.data.widthLimit),currentBoundary.type.Y=Y3+5,Y3=currentBoundary.type.Y+currentBoundary.type.height}if(currentBoundary.descr&&""!==currentBoundary.descr.text){let currentBoundaryDescrConf=boundaryFont(conf);currentBoundaryDescrConf.fontSize=currentBoundaryDescrConf.fontSize-2,calcC4ShapeTextWH("descr",currentBoundary,currentBoundaryTextWrap,currentBoundaryDescrConf,currentBounds.data.widthLimit),currentBoundary.descr.Y=Y3+20,Y3=currentBoundary.descr.Y+currentBoundary.descr.height}if(0==i2||i2%c4BoundaryInRow2===0){let _x=parentBounds.data.startx+conf.diagramMarginX,_y=parentBounds.data.stopy+conf.diagramMarginY+Y3;currentBounds.setData(_x,_x,_y,_y)}else{let _x=currentBounds.data.stopx!==currentBounds.data.startx?currentBounds.data.stopx+conf.diagramMarginX:currentBounds.data.startx,_y=currentBounds.data.starty;currentBounds.setData(_x,_x,_y,_y)}currentBounds.name=currentBoundary.alias;let currentPersonOrSystemArray=diagObj.db.getC4ShapeArray(currentBoundary.alias),currentPersonOrSystemKeys=diagObj.db.getC4ShapeKeys(currentBoundary.alias);currentPersonOrSystemKeys.length>0&&drawC4ShapeArray(currentBounds,diagram27,currentPersonOrSystemArray,currentPersonOrSystemKeys),parentBoundaryAlias=currentBoundary.alias;let nextCurrentBoundaries=diagObj.db.getBoundaries(parentBoundaryAlias);nextCurrentBoundaries.length>0&&drawInsideBoundary(diagram27,parentBoundaryAlias,currentBounds,nextCurrentBoundaries,diagObj),"global"!==currentBoundary.alias&&drawBoundary2(diagram27,currentBoundary,currentBounds),parentBounds.data.stopy=Math.max(currentBounds.data.stopy+conf.c4ShapeMargin,parentBounds.data.stopy),parentBounds.data.stopx=Math.max(currentBounds.data.stopx+conf.c4ShapeMargin,parentBounds.data.stopx),globalBoundaryMaxX=Math.max(globalBoundaryMaxX,parentBounds.data.stopx),globalBoundaryMaxY=Math.max(globalBoundaryMaxY,parentBounds.data.stopy)}}var styles_default2,diagram,init_c4Renderer=__esm({"src/diagrams/c4/c4Renderer.js"(){init_src32(),init_svgDraw(),init_logger(),init_c4Diagram(),init_common(),init_c4Db(),init_diagramAPI(),init_assignWithDepth(),init_utils2(),init_setupGraphViewbox(),globalBoundaryMaxX=0,globalBoundaryMaxY=0,c4ShapeInRow2=4,c4BoundaryInRow2=2,parser.yy=c4Db_default,conf={},Bounds=class{static{__name(this,"Bounds")}constructor(diagObj){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,setConf(diagObj.db.getConfig())}setData(startx,stopx,starty,stopy){this.nextData.startx=this.data.startx=startx,this.nextData.stopx=this.data.stopx=stopx,this.nextData.starty=this.data.starty=starty,this.nextData.stopy=this.data.stopy=stopy}updateVal(obj,key,val,fun){void 0===obj[key]?obj[key]=val:obj[key]=fun(val,obj[key])}insert(c4Shape){this.nextData.cnt=this.nextData.cnt+1;let _startx=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+c4Shape.margin:this.nextData.stopx+2*c4Shape.margin,_stopx=_startx+c4Shape.width,_starty=this.nextData.starty+2*c4Shape.margin,_stopy=_starty+c4Shape.height;(_startx>=this.data.widthLimit||_stopx>=this.data.widthLimit||this.nextData.cnt>c4ShapeInRow2)&&(_startx=this.nextData.startx+c4Shape.margin+conf.nextLinePaddingX,_starty=this.nextData.stopy+2*c4Shape.margin,this.nextData.stopx=_stopx=_startx+c4Shape.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=_stopy=_starty+c4Shape.height,this.nextData.cnt=1),c4Shape.x=_startx,c4Shape.y=_starty,this.updateVal(this.data,"startx",_startx,Math.min),this.updateVal(this.data,"starty",_starty,Math.min),this.updateVal(this.data,"stopx",_stopx,Math.max),this.updateVal(this.data,"stopy",_stopy,Math.max),this.updateVal(this.nextData,"startx",_startx,Math.min),this.updateVal(this.nextData,"starty",_starty,Math.min),this.updateVal(this.nextData,"stopx",_stopx,Math.max),this.updateVal(this.nextData,"stopy",_stopy,Math.max)}init(diagObj){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},setConf(diagObj.db.getConfig())}bumpLastMargin(margin){this.data.stopx+=margin,this.data.stopy+=margin}},setConf=__name(function(cnf){assignWithDepth_default(conf,cnf),cnf.fontFamily&&(conf.personFontFamily=conf.systemFontFamily=conf.messageFontFamily=cnf.fontFamily),cnf.fontSize&&(conf.personFontSize=conf.systemFontSize=conf.messageFontSize=cnf.fontSize),cnf.fontWeight&&(conf.personFontWeight=conf.systemFontWeight=conf.messageFontWeight=cnf.fontWeight)},"setConf"),c4ShapeFont=__name((cnf,typeC4Shape)=>({fontFamily:cnf[typeC4Shape+"FontFamily"],fontSize:cnf[typeC4Shape+"FontSize"],fontWeight:cnf[typeC4Shape+"FontWeight"]}),"c4ShapeFont"),boundaryFont=__name(cnf=>({fontFamily:cnf.boundaryFontFamily,fontSize:cnf.boundaryFontSize,fontWeight:cnf.boundaryFontWeight}),"boundaryFont"),messageFont=__name(cnf=>({fontFamily:cnf.messageFontFamily,fontSize:cnf.messageFontSize,fontWeight:cnf.messageFontWeight}),"messageFont"),__name(calcC4ShapeTextWH,"calcC4ShapeTextWH"),drawBoundary2=__name(function(diagram27,boundary,bounds4){boundary.x=bounds4.data.startx,boundary.y=bounds4.data.starty,boundary.width=bounds4.data.stopx-bounds4.data.startx,boundary.height=bounds4.data.stopy-bounds4.data.starty,boundary.label.y=conf.c4ShapeMargin-35;let boundaryTextWrap=boundary.wrap&&conf.wrap,boundaryLabelConf=boundaryFont(conf);boundaryLabelConf.fontSize=boundaryLabelConf.fontSize+2,boundaryLabelConf.fontWeight="bold",calcC4ShapeTextWH("label",boundary,boundaryTextWrap,boundaryLabelConf,calculateTextWidth(boundary.label.text,boundaryLabelConf)),svgDraw_default.drawBoundary(diagram27,boundary,conf)},"drawBoundary"),drawC4ShapeArray=__name(function(currentBounds,diagram27,c4ShapeArray2,c4ShapeKeys){let Y3=0;for(const c4ShapeKey of c4ShapeKeys){Y3=0;const c4Shape=c4ShapeArray2[c4ShapeKey];let c4ShapeTypeConf=c4ShapeFont(conf,c4Shape.typeC4Shape.text);switch(c4ShapeTypeConf.fontSize=c4ShapeTypeConf.fontSize-2,c4Shape.typeC4Shape.width=calculateTextWidth("«"+c4Shape.typeC4Shape.text+"»",c4ShapeTypeConf),c4Shape.typeC4Shape.height=c4ShapeTypeConf.fontSize+2,c4Shape.typeC4Shape.Y=conf.c4ShapePadding,Y3=c4Shape.typeC4Shape.Y+c4Shape.typeC4Shape.height-4,c4Shape.image={width:0,height:0,Y:0},c4Shape.typeC4Shape.text){case"person":case"external_person":c4Shape.image.width=48,c4Shape.image.height=48,c4Shape.image.Y=Y3,Y3=c4Shape.image.Y+c4Shape.image.height}c4Shape.sprite&&(c4Shape.image.width=48,c4Shape.image.height=48,c4Shape.image.Y=Y3,Y3=c4Shape.image.Y+c4Shape.image.height);let c4ShapeTextWrap=c4Shape.wrap&&conf.wrap,textLimitWidth=conf.width-2*conf.c4ShapePadding,c4ShapeLabelConf=c4ShapeFont(conf,c4Shape.typeC4Shape.text);if(c4ShapeLabelConf.fontSize=c4ShapeLabelConf.fontSize+2,c4ShapeLabelConf.fontWeight="bold",calcC4ShapeTextWH("label",c4Shape,c4ShapeTextWrap,c4ShapeLabelConf,textLimitWidth),c4Shape.label.Y=Y3+8,Y3=c4Shape.label.Y+c4Shape.label.height,c4Shape.type&&""!==c4Shape.type.text){c4Shape.type.text="["+c4Shape.type.text+"]",calcC4ShapeTextWH("type",c4Shape,c4ShapeTextWrap,c4ShapeFont(conf,c4Shape.typeC4Shape.text),textLimitWidth),c4Shape.type.Y=Y3+5,Y3=c4Shape.type.Y+c4Shape.type.height}else if(c4Shape.techn&&""!==c4Shape.techn.text){c4Shape.techn.text="["+c4Shape.techn.text+"]",calcC4ShapeTextWH("techn",c4Shape,c4ShapeTextWrap,c4ShapeFont(conf,c4Shape.techn.text),textLimitWidth),c4Shape.techn.Y=Y3+5,Y3=c4Shape.techn.Y+c4Shape.techn.height}let rectHeight=Y3,rectWidth=c4Shape.label.width;if(c4Shape.descr&&""!==c4Shape.descr.text){calcC4ShapeTextWH("descr",c4Shape,c4ShapeTextWrap,c4ShapeFont(conf,c4Shape.typeC4Shape.text),textLimitWidth),c4Shape.descr.Y=Y3+20,Y3=c4Shape.descr.Y+c4Shape.descr.height,rectWidth=Math.max(c4Shape.label.width,c4Shape.descr.width),rectHeight=Y3-5*c4Shape.descr.textLines}rectWidth+=conf.c4ShapePadding,c4Shape.width=Math.max(c4Shape.width||conf.width,rectWidth,conf.width),c4Shape.height=Math.max(c4Shape.height||conf.height,rectHeight,conf.height),c4Shape.margin=c4Shape.margin||conf.c4ShapeMargin,currentBounds.insert(c4Shape),svgDraw_default.drawC4Shape(diagram27,c4Shape,conf)}currentBounds.bumpLastMargin(conf.c4ShapeMargin)},"drawC4ShapeArray"),Point2=class{static{__name(this,"Point")}constructor(x5,y6){this.x=x5,this.y=y6}},getIntersectPoint=__name(function(fromNode,endPoint){let x1=fromNode.x,y1=fromNode.y,x22=endPoint.x,y22=endPoint.y,fromCenterX=x1+fromNode.width/2,fromCenterY=y1+fromNode.height/2,dx=Math.abs(x1-x22),dy=Math.abs(y1-y22),tanDYX=dy/dx,fromDYX=fromNode.height/fromNode.width,returnPoint=null;return y1==y22&&x1<x22?returnPoint=new Point2(x1+fromNode.width,fromCenterY):y1==y22&&x1>x22?returnPoint=new Point2(x1,fromCenterY):x1==x22&&y1<y22?returnPoint=new Point2(fromCenterX,y1+fromNode.height):x1==x22&&y1>y22&&(returnPoint=new Point2(fromCenterX,y1)),x1>x22&&y1<y22?returnPoint=fromDYX>=tanDYX?new Point2(x1,fromCenterY+tanDYX*fromNode.width/2):new Point2(fromCenterX-dx/dy*fromNode.height/2,y1+fromNode.height):x1<x22&&y1<y22?returnPoint=fromDYX>=tanDYX?new Point2(x1+fromNode.width,fromCenterY+tanDYX*fromNode.width/2):new Point2(fromCenterX+dx/dy*fromNode.height/2,y1+fromNode.height):x1<x22&&y1>y22?returnPoint=fromDYX>=tanDYX?new Point2(x1+fromNode.width,fromCenterY-tanDYX*fromNode.width/2):new Point2(fromCenterX+fromNode.height/2*dx/dy,y1):x1>x22&&y1>y22&&(returnPoint=fromDYX>=tanDYX?new Point2(x1,fromCenterY-fromNode.width/2*tanDYX):new Point2(fromCenterX-fromNode.height/2*dx/dy,y1)),returnPoint},"getIntersectPoint"),getIntersectPoints=__name(function(fromNode,endNode){let endIntersectPoint={x:0,y:0};endIntersectPoint.x=endNode.x+endNode.width/2,endIntersectPoint.y=endNode.y+endNode.height/2;let startPoint=getIntersectPoint(fromNode,endIntersectPoint);return endIntersectPoint.x=fromNode.x+fromNode.width/2,endIntersectPoint.y=fromNode.y+fromNode.height/2,{startPoint:startPoint,endPoint:getIntersectPoint(endNode,endIntersectPoint)}},"getIntersectPoints"),drawRels2=__name(function(diagram27,rels2,getC4ShapeObj,diagObj){let i2=0;for(let rel2 of rels2){i2+=1;let relTextWrap=rel2.wrap&&conf.wrap,relConf=messageFont(conf);"C4Dynamic"===diagObj.db.getC4Type()&&(rel2.label.text=i2+": "+rel2.label.text);let textLimitWidth=calculateTextWidth(rel2.label.text,relConf);calcC4ShapeTextWH("label",rel2,relTextWrap,relConf,textLimitWidth),rel2.techn&&""!==rel2.techn.text&&(textLimitWidth=calculateTextWidth(rel2.techn.text,relConf),calcC4ShapeTextWH("techn",rel2,relTextWrap,relConf,textLimitWidth)),rel2.descr&&""!==rel2.descr.text&&(textLimitWidth=calculateTextWidth(rel2.descr.text,relConf),calcC4ShapeTextWH("descr",rel2,relTextWrap,relConf,textLimitWidth));let fromNode=getC4ShapeObj(rel2.from),endNode=getC4ShapeObj(rel2.to),points=getIntersectPoints(fromNode,endNode);rel2.startPoint=points.startPoint,rel2.endPoint=points.endPoint}svgDraw_default.drawRels(diagram27,rels2,conf)},"drawRels"),__name(drawInsideBoundary,"drawInsideBoundary"),c4Renderer_default={drawPersonOrSystemArray:drawC4ShapeArray,drawBoundary:drawBoundary2,setConf:setConf,draw:__name(function(_text,id30,_version,diagObj){conf=getConfig2().c4;const securityLevel=getConfig2().securityLevel;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body");let db7=diagObj.db;diagObj.db.setWrap(conf.wrap),c4ShapeInRow2=db7.getC4ShapeInRow(),c4BoundaryInRow2=db7.getC4BoundaryInRow(),log.debug(`C:${JSON.stringify(conf,null,2)}`);const diagram27="sandbox"===securityLevel?root3.select(`[id="${id30}"]`):select_default2(`[id="${id30}"]`);svgDraw_default.insertComputerIcon(diagram27),svgDraw_default.insertDatabaseIcon(diagram27),svgDraw_default.insertClockIcon(diagram27);let screenBounds=new Bounds(diagObj);screenBounds.setData(conf.diagramMarginX,conf.diagramMarginX,conf.diagramMarginY,conf.diagramMarginY),screenBounds.data.widthLimit=screen.availWidth,globalBoundaryMaxX=conf.diagramMarginX,globalBoundaryMaxY=conf.diagramMarginY;const title2=diagObj.db.getTitle();drawInsideBoundary(diagram27,"",screenBounds,diagObj.db.getBoundaries(""),diagObj),svgDraw_default.insertArrowHead(diagram27),svgDraw_default.insertArrowEnd(diagram27),svgDraw_default.insertArrowCrossHead(diagram27),svgDraw_default.insertArrowFilledHead(diagram27),drawRels2(diagram27,diagObj.db.getRels(),diagObj.db.getC4Shape,diagObj),screenBounds.data.stopx=globalBoundaryMaxX,screenBounds.data.stopy=globalBoundaryMaxY;const box=screenBounds.data;let height2=box.stopy-box.starty+2*conf.diagramMarginY;const width3=box.stopx-box.startx+2*conf.diagramMarginX;title2&&diagram27.append("text").text(title2).attr("x",(box.stopx-box.startx)/2-4*conf.diagramMarginX).attr("y",box.starty+conf.diagramMarginY),configureSvgSize(diagram27,height2,width3,conf.useMaxWidth);const extraVertForTitle=title2?60:0;diagram27.attr("viewBox",box.startx-conf.diagramMarginX+" -"+(conf.diagramMarginY+extraVertForTitle)+" "+width3+" "+(height2+extraVertForTitle)),log.debug("models:",box)},"draw")}}}),init_styles2=__esm({"src/diagrams/c4/styles.js"(){styles_default2=__name(options2=>`.person {\n    stroke: ${options2.personBorder};\n    fill: ${options2.personBkg};\n  }\n`,"getStyles")}}),c4Diagram_exports={};__export(c4Diagram_exports,{diagram:()=>diagram});var common,exception,snippet,TYPE_CONSTRUCTOR_OPTIONS,YAML_NODE_KINDS,type2,schema,str,seq,map2,failsafe,_null,bool,int,YAML_FLOAT_PATTERN,SCIENTIFIC_WITHOUT_DOT,float,json,core,YAML_DATE_REGEXP,YAML_TIMESTAMP_REGEXP,timestamp,merge2,BASE64_MAP,binary,_hasOwnProperty$3,_toString$2,omap,_toString$1,pairs,_hasOwnProperty$2,set3,_default,_hasOwnProperty$1,CONTEXT_FLOW_IN,CONTEXT_FLOW_OUT,CONTEXT_BLOCK_IN,CONTEXT_BLOCK_OUT,CHOMPING_CLIP,CHOMPING_STRIP,CHOMPING_KEEP,PATTERN_NON_PRINTABLE,PATTERN_NON_ASCII_LINE_BREAKS,PATTERN_FLOW_INDICATORS,PATTERN_TAG_HANDLE,PATTERN_TAG_URI,simpleEscapeCheck,simpleEscapeMap,directiveHandlers,loader2,_toString,_hasOwnProperty,CHAR_BOM,CHAR_TAB,CHAR_LINE_FEED,CHAR_CARRIAGE_RETURN,CHAR_SPACE,CHAR_EXCLAMATION,CHAR_DOUBLE_QUOTE,CHAR_SHARP,CHAR_PERCENT,CHAR_AMPERSAND,CHAR_SINGLE_QUOTE,CHAR_ASTERISK,CHAR_COMMA,CHAR_MINUS,CHAR_COLON,CHAR_EQUALS,CHAR_GREATER_THAN,CHAR_QUESTION,CHAR_COMMERCIAL_AT,CHAR_LEFT_SQUARE_BRACKET,CHAR_RIGHT_SQUARE_BRACKET,CHAR_GRAVE_ACCENT,CHAR_LEFT_CURLY_BRACKET,CHAR_VERTICAL_LINE,CHAR_RIGHT_CURLY_BRACKET,ESCAPE_SEQUENCES,DEPRECATED_BOOLEANS_SYNTAX,DEPRECATED_BASE60_SYNTAX,QUOTING_TYPE_SINGLE,QUOTING_TYPE_DOUBLE,STYLE_PLAIN,STYLE_SINGLE,STYLE_LITERAL,STYLE_FOLDED,STYLE_DOUBLE,dumper,JSON_SCHEMA,load,init_c4Diagram2=__esm({"src/diagrams/c4/c4Diagram.ts"(){init_c4Diagram(),init_c4Db(),init_c4Renderer(),init_styles2(),diagram={parser:c4Diagram_default,db:c4Db_default,renderer:c4Renderer_default,styles:styles_default2,init:__name(({c4:c4,wrap:wrap3})=>{c4Renderer_default.setConf(c4),c4Db_default.setWrap(wrap3)},"init")}}});function isNothing(subject){return null==subject}function isObject2(subject){return"object"==typeof subject&&null!==subject}function toArray(sequence){return Array.isArray(sequence)?sequence:isNothing(sequence)?[]:[sequence]}function extend2(target,source){var index,length2,key,sourceKeys;if(source)for(index=0,length2=(sourceKeys=Object.keys(source)).length;index<length2;index+=1)target[key=sourceKeys[index]]=source[key];return target}function repeat(string3,count2){var cycle,result="";for(cycle=0;cycle<count2;cycle+=1)result+=string3;return result}function isNegativeZero(number7){return 0===number7&&Number.NEGATIVE_INFINITY===1/number7}function formatError(exception2,compact2){var where="",message=exception2.reason||"(unknown reason)";return exception2.mark?(exception2.mark.name&&(where+='in "'+exception2.mark.name+'" '),where+="("+(exception2.mark.line+1)+":"+(exception2.mark.column+1)+")",!compact2&&exception2.mark.snippet&&(where+="\n\n"+exception2.mark.snippet),message+" "+where):message}function YAMLException$1(reason,mark){Error.call(this),this.name="YAMLException",this.reason=reason,this.mark=mark,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}function getLine(buffer,lineStart,lineEnd,position5,maxLineLength){var head2="",tail="",maxHalfLength=Math.floor(maxLineLength/2)-1;return position5-lineStart>maxHalfLength&&(lineStart=position5-maxHalfLength+(head2=" ... ").length),lineEnd-position5>maxHalfLength&&(lineEnd=position5+maxHalfLength-(tail=" ...").length),{str:head2+buffer.slice(lineStart,lineEnd).replace(/\t/g,"→")+tail,pos:position5-lineStart+head2.length}}function padStart(string3,max10){return common.repeat(" ",max10-string3.length)+string3}function makeSnippet(mark,options2){if(options2=Object.create(options2||null),!mark.buffer)return null;options2.maxLength||(options2.maxLength=79),"number"!=typeof options2.indent&&(options2.indent=1),"number"!=typeof options2.linesBefore&&(options2.linesBefore=3),"number"!=typeof options2.linesAfter&&(options2.linesAfter=2);for(var match2,re3=/\r?\n|\r|\0/g,lineStarts=[0],lineEnds=[],foundLineNo=-1;match2=re3.exec(mark.buffer);)lineEnds.push(match2.index),lineStarts.push(match2.index+match2[0].length),mark.position<=match2.index&&foundLineNo<0&&(foundLineNo=lineStarts.length-2);foundLineNo<0&&(foundLineNo=lineStarts.length-1);var i2,line2,result="",lineNoLength=Math.min(mark.line+options2.linesAfter,lineEnds.length).toString().length,maxLineLength=options2.maxLength-(options2.indent+lineNoLength+3);for(i2=1;i2<=options2.linesBefore&&!(foundLineNo-i2<0);i2++)line2=getLine(mark.buffer,lineStarts[foundLineNo-i2],lineEnds[foundLineNo-i2],mark.position-(lineStarts[foundLineNo]-lineStarts[foundLineNo-i2]),maxLineLength),result=common.repeat(" ",options2.indent)+padStart((mark.line-i2+1).toString(),lineNoLength)+" | "+line2.str+"\n"+result;for(line2=getLine(mark.buffer,lineStarts[foundLineNo],lineEnds[foundLineNo],mark.position,maxLineLength),result+=common.repeat(" ",options2.indent)+padStart((mark.line+1).toString(),lineNoLength)+" | "+line2.str+"\n",result+=common.repeat("-",options2.indent+lineNoLength+3+line2.pos)+"^\n",i2=1;i2<=options2.linesAfter&&!(foundLineNo+i2>=lineEnds.length);i2++)line2=getLine(mark.buffer,lineStarts[foundLineNo+i2],lineEnds[foundLineNo+i2],mark.position-(lineStarts[foundLineNo]-lineStarts[foundLineNo+i2]),maxLineLength),result+=common.repeat(" ",options2.indent)+padStart((mark.line+i2+1).toString(),lineNoLength)+" | "+line2.str+"\n";return result.replace(/\n$/,"")}function compileStyleAliases(map5){var result={};return null!==map5&&Object.keys(map5).forEach(function(style3){map5[style3].forEach(function(alias){result[String(alias)]=style3})}),result}function Type$1(tag,options2){if(options2=options2||{},Object.keys(options2).forEach(function(name){if(-1===TYPE_CONSTRUCTOR_OPTIONS.indexOf(name))throw new exception('Unknown option "'+name+'" is met in definition of "'+tag+'" YAML type.')}),this.options=options2,this.tag=tag,this.kind=options2.kind||null,this.resolve=options2.resolve||function(){return!0},this.construct=options2.construct||function(data5){return data5},this.instanceOf=options2.instanceOf||null,this.predicate=options2.predicate||null,this.represent=options2.represent||null,this.representName=options2.representName||null,this.defaultStyle=options2.defaultStyle||null,this.multi=options2.multi||!1,this.styleAliases=compileStyleAliases(options2.styleAliases||null),-1===YAML_NODE_KINDS.indexOf(this.kind))throw new exception('Unknown kind "'+this.kind+'" is specified for "'+tag+'" YAML type.')}function compileList(schema2,name){var result=[];return schema2[name].forEach(function(currentType){var newIndex=result.length;result.forEach(function(previousType,previousIndex){previousType.tag===currentType.tag&&previousType.kind===currentType.kind&&previousType.multi===currentType.multi&&(newIndex=previousIndex)}),result[newIndex]=currentType}),result}function compileMap(){var index,length2,result={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function collectType(type3){type3.multi?(result.multi[type3.kind].push(type3),result.multi.fallback.push(type3)):result[type3.kind][type3.tag]=result.fallback[type3.tag]=type3}for(__name(collectType,"collectType"),index=0,length2=arguments.length;index<length2;index+=1)arguments[index].forEach(collectType);return result}function Schema$1(definition){return this.extend(definition)}function resolveYamlNull(data5){if(null===data5)return!0;var max10=data5.length;return 1===max10&&"~"===data5||4===max10&&("null"===data5||"Null"===data5||"NULL"===data5)}function constructYamlNull(){return null}function isNull(object3){return null===object3}function resolveYamlBoolean(data5){if(null===data5)return!1;var max10=data5.length;return 4===max10&&("true"===data5||"True"===data5||"TRUE"===data5)||5===max10&&("false"===data5||"False"===data5||"FALSE"===data5)}function constructYamlBoolean(data5){return"true"===data5||"True"===data5||"TRUE"===data5}function isBoolean(object3){return"[object Boolean]"===Object.prototype.toString.call(object3)}function isHexCode(c3){return 48<=c3&&c3<=57||65<=c3&&c3<=70||97<=c3&&c3<=102}function isOctCode(c3){return 48<=c3&&c3<=55}function isDecCode(c3){return 48<=c3&&c3<=57}function resolveYamlInteger(data5){if(null===data5)return!1;var ch,max10=data5.length,index=0,hasDigits=!1;if(!max10)return!1;if("-"!==(ch=data5[index])&&"+"!==ch||(ch=data5[++index]),"0"===ch){if(index+1===max10)return!0;if("b"===(ch=data5[++index])){for(index++;index<max10;index++)if("_"!==(ch=data5[index])){if("0"!==ch&&"1"!==ch)return!1;hasDigits=!0}return hasDigits&&"_"!==ch}if("x"===ch){for(index++;index<max10;index++)if("_"!==(ch=data5[index])){if(!isHexCode(data5.charCodeAt(index)))return!1;hasDigits=!0}return hasDigits&&"_"!==ch}if("o"===ch){for(index++;index<max10;index++)if("_"!==(ch=data5[index])){if(!isOctCode(data5.charCodeAt(index)))return!1;hasDigits=!0}return hasDigits&&"_"!==ch}}if("_"===ch)return!1;for(;index<max10;index++)if("_"!==(ch=data5[index])){if(!isDecCode(data5.charCodeAt(index)))return!1;hasDigits=!0}return!(!hasDigits||"_"===ch)}function constructYamlInteger(data5){var ch,value2=data5,sign2=1;if(-1!==value2.indexOf("_")&&(value2=value2.replace(/_/g,"")),"-"!==(ch=value2[0])&&"+"!==ch||("-"===ch&&(sign2=-1),ch=(value2=value2.slice(1))[0]),"0"===value2)return 0;if("0"===ch){if("b"===value2[1])return sign2*parseInt(value2.slice(2),2);if("x"===value2[1])return sign2*parseInt(value2.slice(2),16);if("o"===value2[1])return sign2*parseInt(value2.slice(2),8)}return sign2*parseInt(value2,10)}function isInteger(object3){return"[object Number]"===Object.prototype.toString.call(object3)&&object3%1==0&&!common.isNegativeZero(object3)}function resolveYamlFloat(data5){return null!==data5&&!(!YAML_FLOAT_PATTERN.test(data5)||"_"===data5[data5.length-1])}function constructYamlFloat(data5){var value2,sign2;return sign2="-"===(value2=data5.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(value2[0])>=0&&(value2=value2.slice(1)),".inf"===value2?1===sign2?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===value2?NaN:sign2*parseFloat(value2,10)}function representYamlFloat(object3,style3){var res;if(isNaN(object3))switch(style3){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===object3)switch(style3){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===object3)switch(style3){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(object3))return"-0.0";return res=object3.toString(10),SCIENTIFIC_WITHOUT_DOT.test(res)?res.replace("e",".e"):res}function isFloat(object3){return"[object Number]"===Object.prototype.toString.call(object3)&&(object3%1!=0||common.isNegativeZero(object3))}function resolveYamlTimestamp(data5){return null!==data5&&(null!==YAML_DATE_REGEXP.exec(data5)||null!==YAML_TIMESTAMP_REGEXP.exec(data5))}function constructYamlTimestamp(data5){var match2,year,month,day,hour,minute,second2,date2,fraction=0,delta=null;if(null===(match2=YAML_DATE_REGEXP.exec(data5))&&(match2=YAML_TIMESTAMP_REGEXP.exec(data5)),null===match2)throw new Error("Date resolve error");if(year=+match2[1],month=+match2[2]-1,day=+match2[3],!match2[4])return new Date(Date.UTC(year,month,day));if(hour=+match2[4],minute=+match2[5],second2=+match2[6],match2[7]){for(fraction=match2[7].slice(0,3);fraction.length<3;)fraction+="0";fraction=+fraction}return match2[9]&&(delta=6e4*(60*+match2[10]+ +(match2[11]||0)),"-"===match2[9]&&(delta=-delta)),date2=new Date(Date.UTC(year,month,day,hour,minute,second2,fraction)),delta&&date2.setTime(date2.getTime()-delta),date2}function representYamlTimestamp(object3){return object3.toISOString()}function resolveYamlMerge(data5){return"<<"===data5||null===data5}function resolveYamlBinary(data5){if(null===data5)return!1;var code,idx,bitlen=0,max10=data5.length,map5=BASE64_MAP;for(idx=0;idx<max10;idx++)if(!((code=map5.indexOf(data5.charAt(idx)))>64)){if(code<0)return!1;bitlen+=6}return bitlen%8==0}function constructYamlBinary(data5){var idx,tailbits,input=data5.replace(/[\r\n=]/g,""),max10=input.length,map5=BASE64_MAP,bits=0,result=[];for(idx=0;idx<max10;idx++)idx%4==0&&idx&&(result.push(bits>>16&255),result.push(bits>>8&255),result.push(255&bits)),bits=bits<<6|map5.indexOf(input.charAt(idx));return 0===(tailbits=max10%4*6)?(result.push(bits>>16&255),result.push(bits>>8&255),result.push(255&bits)):18===tailbits?(result.push(bits>>10&255),result.push(bits>>2&255)):12===tailbits&&result.push(bits>>4&255),new Uint8Array(result)}function representYamlBinary(object3){var idx,tail,result="",bits=0,max10=object3.length,map5=BASE64_MAP;for(idx=0;idx<max10;idx++)idx%3==0&&idx&&(result+=map5[bits>>18&63],result+=map5[bits>>12&63],result+=map5[bits>>6&63],result+=map5[63&bits]),bits=(bits<<8)+object3[idx];return 0===(tail=max10%3)?(result+=map5[bits>>18&63],result+=map5[bits>>12&63],result+=map5[bits>>6&63],result+=map5[63&bits]):2===tail?(result+=map5[bits>>10&63],result+=map5[bits>>4&63],result+=map5[bits<<2&63],result+=map5[64]):1===tail&&(result+=map5[bits>>2&63],result+=map5[bits<<4&63],result+=map5[64],result+=map5[64]),result}function isBinary(obj){return"[object Uint8Array]"===Object.prototype.toString.call(obj)}function resolveYamlOmap(data5){if(null===data5)return!0;var index,length2,pair,pairKey,pairHasKey,objectKeys=[],object3=data5;for(index=0,length2=object3.length;index<length2;index+=1){if(pair=object3[index],pairHasKey=!1,"[object Object]"!==_toString$2.call(pair))return!1;for(pairKey in pair)if(_hasOwnProperty$3.call(pair,pairKey)){if(pairHasKey)return!1;pairHasKey=!0}if(!pairHasKey)return!1;if(-1!==objectKeys.indexOf(pairKey))return!1;objectKeys.push(pairKey)}return!0}function constructYamlOmap(data5){return null!==data5?data5:[]}function resolveYamlPairs(data5){if(null===data5)return!0;var index,length2,pair,keys2,result,object3=data5;for(result=new Array(object3.length),index=0,length2=object3.length;index<length2;index+=1){if(pair=object3[index],"[object Object]"!==_toString$1.call(pair))return!1;if(1!==(keys2=Object.keys(pair)).length)return!1;result[index]=[keys2[0],pair[keys2[0]]]}return!0}function constructYamlPairs(data5){if(null===data5)return[];var index,length2,pair,keys2,result,object3=data5;for(result=new Array(object3.length),index=0,length2=object3.length;index<length2;index+=1)pair=object3[index],keys2=Object.keys(pair),result[index]=[keys2[0],pair[keys2[0]]];return result}function resolveYamlSet(data5){if(null===data5)return!0;var key,object3=data5;for(key in object3)if(_hasOwnProperty$2.call(object3,key)&&null!==object3[key])return!1;return!0}function constructYamlSet(data5){return null!==data5?data5:{}}function _class(obj){return Object.prototype.toString.call(obj)}function is_EOL(c3){return 10===c3||13===c3}function is_WHITE_SPACE(c3){return 9===c3||32===c3}function is_WS_OR_EOL(c3){return 9===c3||32===c3||10===c3||13===c3}function is_FLOW_INDICATOR(c3){return 44===c3||91===c3||93===c3||123===c3||125===c3}function fromHexCode(c3){var lc;return 48<=c3&&c3<=57?c3-48:97<=(lc=32|c3)&&lc<=102?lc-97+10:-1}function escapedHexLen(c3){return 120===c3?2:117===c3?4:85===c3?8:0}function fromDecimalCode(c3){return 48<=c3&&c3<=57?c3-48:-1}function simpleEscapeSequence(c3){return 48===c3?"\0":97===c3?"":98===c3?"\b":116===c3||9===c3?"\t":110===c3?"\n":118===c3?"\v":102===c3?"\f":114===c3?"\r":101===c3?"":32===c3?" ":34===c3?'"':47===c3?"/":92===c3?"\\":78===c3?"":95===c3?" ":76===c3?"\u2028":80===c3?"\u2029":""}function charFromCodepoint(c3){return c3<=65535?String.fromCharCode(c3):String.fromCharCode(55296+(c3-65536>>10),56320+(c3-65536&1023))}function State$1(input,options2){this.input=input,this.filename=options2.filename||null,this.schema=options2.schema||_default,this.onWarning=options2.onWarning||null,this.legacy=options2.legacy||!1,this.json=options2.json||!1,this.listener=options2.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=input.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(state3,message){var mark={name:state3.filename,buffer:state3.input.slice(0,-1),position:state3.position,line:state3.line,column:state3.position-state3.lineStart};return mark.snippet=snippet(mark),new exception(message,mark)}function throwError(state3,message){throw generateError(state3,message)}function throwWarning(state3,message){state3.onWarning&&state3.onWarning.call(null,generateError(state3,message))}function captureSegment(state3,start3,end2,checkJson){var _position,_length,_character,_result;if(start3<end2){if(_result=state3.input.slice(start3,end2),checkJson)for(_position=0,_length=_result.length;_position<_length;_position+=1)9===(_character=_result.charCodeAt(_position))||32<=_character&&_character<=1114111||throwError(state3,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(_result)&&throwError(state3,"the stream contains non-printable characters");state3.result+=_result}}function mergeMappings(state3,destination,source,overridableKeys){var sourceKeys,key,index,quantity;for(common.isObject(source)||throwError(state3,"cannot merge mappings; the provided source object is unacceptable"),index=0,quantity=(sourceKeys=Object.keys(source)).length;index<quantity;index+=1)key=sourceKeys[index],_hasOwnProperty$1.call(destination,key)||(destination[key]=source[key],overridableKeys[key]=!0)}function storeMappingPair(state3,_result,overridableKeys,keyTag,keyNode,valueNode,startLine,startLineStart,startPos){var index,quantity;if(Array.isArray(keyNode))for(index=0,quantity=(keyNode=Array.prototype.slice.call(keyNode)).length;index<quantity;index+=1)Array.isArray(keyNode[index])&&throwError(state3,"nested arrays are not supported inside keys"),"object"==typeof keyNode&&"[object Object]"===_class(keyNode[index])&&(keyNode[index]="[object Object]");if("object"==typeof keyNode&&"[object Object]"===_class(keyNode)&&(keyNode="[object Object]"),keyNode=String(keyNode),null===_result&&(_result={}),"tag:yaml.org,2002:merge"===keyTag)if(Array.isArray(valueNode))for(index=0,quantity=valueNode.length;index<quantity;index+=1)mergeMappings(state3,_result,valueNode[index],overridableKeys);else mergeMappings(state3,_result,valueNode,overridableKeys);else state3.json||_hasOwnProperty$1.call(overridableKeys,keyNode)||!_hasOwnProperty$1.call(_result,keyNode)||(state3.line=startLine||state3.line,state3.lineStart=startLineStart||state3.lineStart,state3.position=startPos||state3.position,throwError(state3,"duplicated mapping key")),"__proto__"===keyNode?Object.defineProperty(_result,keyNode,{configurable:!0,enumerable:!0,writable:!0,value:valueNode}):_result[keyNode]=valueNode,delete overridableKeys[keyNode];return _result}function readLineBreak(state3){var ch;10===(ch=state3.input.charCodeAt(state3.position))?state3.position++:13===ch?(state3.position++,10===state3.input.charCodeAt(state3.position)&&state3.position++):throwError(state3,"a line break is expected"),state3.line+=1,state3.lineStart=state3.position,state3.firstTabInLine=-1}function skipSeparationSpace(state3,allowComments,checkIndent){for(var lineBreaks=0,ch=state3.input.charCodeAt(state3.position);0!==ch;){for(;is_WHITE_SPACE(ch);)9===ch&&-1===state3.firstTabInLine&&(state3.firstTabInLine=state3.position),ch=state3.input.charCodeAt(++state3.position);if(allowComments&&35===ch)do{ch=state3.input.charCodeAt(++state3.position)}while(10!==ch&&13!==ch&&0!==ch);if(!is_EOL(ch))break;for(readLineBreak(state3),ch=state3.input.charCodeAt(state3.position),lineBreaks++,state3.lineIndent=0;32===ch;)state3.lineIndent++,ch=state3.input.charCodeAt(++state3.position)}return-1!==checkIndent&&0!==lineBreaks&&state3.lineIndent<checkIndent&&throwWarning(state3,"deficient indentation"),lineBreaks}function testDocumentSeparator(state3){var ch,_position=state3.position;return!(45!==(ch=state3.input.charCodeAt(_position))&&46!==ch||ch!==state3.input.charCodeAt(_position+1)||ch!==state3.input.charCodeAt(_position+2)||(_position+=3,0!==(ch=state3.input.charCodeAt(_position))&&!is_WS_OR_EOL(ch)))}function writeFoldedLines(state3,count2){1===count2?state3.result+=" ":count2>1&&(state3.result+=common.repeat("\n",count2-1))}function readPlainScalar(state3,nodeIndent,withinFlowCollection){var following,captureStart,captureEnd,hasPendingContent,_line,_lineStart,_lineIndent,ch,_kind=state3.kind,_result=state3.result;if(is_WS_OR_EOL(ch=state3.input.charCodeAt(state3.position))||is_FLOW_INDICATOR(ch)||35===ch||38===ch||42===ch||33===ch||124===ch||62===ch||39===ch||34===ch||37===ch||64===ch||96===ch)return!1;if((63===ch||45===ch)&&(is_WS_OR_EOL(following=state3.input.charCodeAt(state3.position+1))||withinFlowCollection&&is_FLOW_INDICATOR(following)))return!1;for(state3.kind="scalar",state3.result="",captureStart=captureEnd=state3.position,hasPendingContent=!1;0!==ch;){if(58===ch){if(is_WS_OR_EOL(following=state3.input.charCodeAt(state3.position+1))||withinFlowCollection&&is_FLOW_INDICATOR(following))break}else if(35===ch){if(is_WS_OR_EOL(state3.input.charCodeAt(state3.position-1)))break}else{if(state3.position===state3.lineStart&&testDocumentSeparator(state3)||withinFlowCollection&&is_FLOW_INDICATOR(ch))break;if(is_EOL(ch)){if(_line=state3.line,_lineStart=state3.lineStart,_lineIndent=state3.lineIndent,skipSeparationSpace(state3,!1,-1),state3.lineIndent>=nodeIndent){hasPendingContent=!0,ch=state3.input.charCodeAt(state3.position);continue}state3.position=captureEnd,state3.line=_line,state3.lineStart=_lineStart,state3.lineIndent=_lineIndent;break}}hasPendingContent&&(captureSegment(state3,captureStart,captureEnd,!1),writeFoldedLines(state3,state3.line-_line),captureStart=captureEnd=state3.position,hasPendingContent=!1),is_WHITE_SPACE(ch)||(captureEnd=state3.position+1),ch=state3.input.charCodeAt(++state3.position)}return captureSegment(state3,captureStart,captureEnd,!1),!!state3.result||(state3.kind=_kind,state3.result=_result,!1)}function readSingleQuotedScalar(state3,nodeIndent){var ch,captureStart,captureEnd;if(39!==(ch=state3.input.charCodeAt(state3.position)))return!1;for(state3.kind="scalar",state3.result="",state3.position++,captureStart=captureEnd=state3.position;0!==(ch=state3.input.charCodeAt(state3.position));)if(39===ch){if(captureSegment(state3,captureStart,state3.position,!0),39!==(ch=state3.input.charCodeAt(++state3.position)))return!0;captureStart=state3.position,state3.position++,captureEnd=state3.position}else is_EOL(ch)?(captureSegment(state3,captureStart,captureEnd,!0),writeFoldedLines(state3,skipSeparationSpace(state3,!1,nodeIndent)),captureStart=captureEnd=state3.position):state3.position===state3.lineStart&&testDocumentSeparator(state3)?throwError(state3,"unexpected end of the document within a single quoted scalar"):(state3.position++,captureEnd=state3.position);throwError(state3,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(state3,nodeIndent){var captureStart,captureEnd,hexLength,hexResult,tmp,ch;if(34!==(ch=state3.input.charCodeAt(state3.position)))return!1;for(state3.kind="scalar",state3.result="",state3.position++,captureStart=captureEnd=state3.position;0!==(ch=state3.input.charCodeAt(state3.position));){if(34===ch)return captureSegment(state3,captureStart,state3.position,!0),state3.position++,!0;if(92===ch){if(captureSegment(state3,captureStart,state3.position,!0),is_EOL(ch=state3.input.charCodeAt(++state3.position)))skipSeparationSpace(state3,!1,nodeIndent);else if(ch<256&&simpleEscapeCheck[ch])state3.result+=simpleEscapeMap[ch],state3.position++;else if((tmp=escapedHexLen(ch))>0){for(hexLength=tmp,hexResult=0;hexLength>0;hexLength--)(tmp=fromHexCode(ch=state3.input.charCodeAt(++state3.position)))>=0?hexResult=(hexResult<<4)+tmp:throwError(state3,"expected hexadecimal character");state3.result+=charFromCodepoint(hexResult),state3.position++}else throwError(state3,"unknown escape sequence");captureStart=captureEnd=state3.position}else is_EOL(ch)?(captureSegment(state3,captureStart,captureEnd,!0),writeFoldedLines(state3,skipSeparationSpace(state3,!1,nodeIndent)),captureStart=captureEnd=state3.position):state3.position===state3.lineStart&&testDocumentSeparator(state3)?throwError(state3,"unexpected end of the document within a double quoted scalar"):(state3.position++,captureEnd=state3.position)}throwError(state3,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(state3,nodeIndent){var _line,_lineStart,_pos,_result,terminator,isPair,isExplicitPair,isMapping,keyNode,keyTag,valueNode,ch,readNext=!0,_tag=state3.tag,_anchor=state3.anchor,overridableKeys=Object.create(null);if(91===(ch=state3.input.charCodeAt(state3.position)))terminator=93,isMapping=!1,_result=[];else{if(123!==ch)return!1;terminator=125,isMapping=!0,_result={}}for(null!==state3.anchor&&(state3.anchorMap[state3.anchor]=_result),ch=state3.input.charCodeAt(++state3.position);0!==ch;){if(skipSeparationSpace(state3,!0,nodeIndent),(ch=state3.input.charCodeAt(state3.position))===terminator)return state3.position++,state3.tag=_tag,state3.anchor=_anchor,state3.kind=isMapping?"mapping":"sequence",state3.result=_result,!0;readNext?44===ch&&throwError(state3,"expected the node content, but found ','"):throwError(state3,"missed comma between flow collection entries"),valueNode=null,isPair=isExplicitPair=!1,63===ch&&is_WS_OR_EOL(state3.input.charCodeAt(state3.position+1))&&(isPair=isExplicitPair=!0,state3.position++,skipSeparationSpace(state3,!0,nodeIndent)),_line=state3.line,_lineStart=state3.lineStart,_pos=state3.position,composeNode(state3,nodeIndent,CONTEXT_FLOW_IN,!1,!0),keyTag=state3.tag,keyNode=state3.result,skipSeparationSpace(state3,!0,nodeIndent),ch=state3.input.charCodeAt(state3.position),!isExplicitPair&&state3.line!==_line||58!==ch||(isPair=!0,ch=state3.input.charCodeAt(++state3.position),skipSeparationSpace(state3,!0,nodeIndent),composeNode(state3,nodeIndent,CONTEXT_FLOW_IN,!1,!0),valueNode=state3.result),isMapping?storeMappingPair(state3,_result,overridableKeys,keyTag,keyNode,valueNode,_line,_lineStart,_pos):isPair?_result.push(storeMappingPair(state3,null,overridableKeys,keyTag,keyNode,valueNode,_line,_lineStart,_pos)):_result.push(keyNode),skipSeparationSpace(state3,!0,nodeIndent),44===(ch=state3.input.charCodeAt(state3.position))?(readNext=!0,ch=state3.input.charCodeAt(++state3.position)):readNext=!1}throwError(state3,"unexpected end of the stream within a flow collection")}function readBlockScalar(state3,nodeIndent){var captureStart,folding,tmp,ch,chomping=CHOMPING_CLIP,didReadContent=!1,detectedIndent=!1,textIndent=nodeIndent,emptyLines=0,atMoreIndented=!1;if(124===(ch=state3.input.charCodeAt(state3.position)))folding=!1;else{if(62!==ch)return!1;folding=!0}for(state3.kind="scalar",state3.result="";0!==ch;)if(43===(ch=state3.input.charCodeAt(++state3.position))||45===ch)CHOMPING_CLIP===chomping?chomping=43===ch?CHOMPING_KEEP:CHOMPING_STRIP:throwError(state3,"repeat of a chomping mode identifier");else{if(!((tmp=fromDecimalCode(ch))>=0))break;0===tmp?throwError(state3,"bad explicit indentation width of a block scalar; it cannot be less than one"):detectedIndent?throwError(state3,"repeat of an indentation width identifier"):(textIndent=nodeIndent+tmp-1,detectedIndent=!0)}if(is_WHITE_SPACE(ch)){do{ch=state3.input.charCodeAt(++state3.position)}while(is_WHITE_SPACE(ch));if(35===ch)do{ch=state3.input.charCodeAt(++state3.position)}while(!is_EOL(ch)&&0!==ch)}for(;0!==ch;){for(readLineBreak(state3),state3.lineIndent=0,ch=state3.input.charCodeAt(state3.position);(!detectedIndent||state3.lineIndent<textIndent)&&32===ch;)state3.lineIndent++,ch=state3.input.charCodeAt(++state3.position);if(!detectedIndent&&state3.lineIndent>textIndent&&(textIndent=state3.lineIndent),is_EOL(ch))emptyLines++;else{if(state3.lineIndent<textIndent){chomping===CHOMPING_KEEP?state3.result+=common.repeat("\n",didReadContent?1+emptyLines:emptyLines):chomping===CHOMPING_CLIP&&didReadContent&&(state3.result+="\n");break}for(folding?is_WHITE_SPACE(ch)?(atMoreIndented=!0,state3.result+=common.repeat("\n",didReadContent?1+emptyLines:emptyLines)):atMoreIndented?(atMoreIndented=!1,state3.result+=common.repeat("\n",emptyLines+1)):0===emptyLines?didReadContent&&(state3.result+=" "):state3.result+=common.repeat("\n",emptyLines):state3.result+=common.repeat("\n",didReadContent?1+emptyLines:emptyLines),didReadContent=!0,detectedIndent=!0,emptyLines=0,captureStart=state3.position;!is_EOL(ch)&&0!==ch;)ch=state3.input.charCodeAt(++state3.position);captureSegment(state3,captureStart,state3.position,!1)}}return!0}function readBlockSequence(state3,nodeIndent){var _line,ch,_tag=state3.tag,_anchor=state3.anchor,_result=[],detected=!1;if(-1!==state3.firstTabInLine)return!1;for(null!==state3.anchor&&(state3.anchorMap[state3.anchor]=_result),ch=state3.input.charCodeAt(state3.position);0!==ch&&(-1!==state3.firstTabInLine&&(state3.position=state3.firstTabInLine,throwError(state3,"tab characters must not be used in indentation")),45===ch)&&is_WS_OR_EOL(state3.input.charCodeAt(state3.position+1));)if(detected=!0,state3.position++,skipSeparationSpace(state3,!0,-1)&&state3.lineIndent<=nodeIndent)_result.push(null),ch=state3.input.charCodeAt(state3.position);else if(_line=state3.line,composeNode(state3,nodeIndent,CONTEXT_BLOCK_IN,!1,!0),_result.push(state3.result),skipSeparationSpace(state3,!0,-1),ch=state3.input.charCodeAt(state3.position),(state3.line===_line||state3.lineIndent>nodeIndent)&&0!==ch)throwError(state3,"bad indentation of a sequence entry");else if(state3.lineIndent<nodeIndent)break;return!!detected&&(state3.tag=_tag,state3.anchor=_anchor,state3.kind="sequence",state3.result=_result,!0)}function readBlockMapping(state3,nodeIndent,flowIndent){var following,allowCompact,_line,_keyLine,_keyLineStart,_keyPos,ch,_tag=state3.tag,_anchor=state3.anchor,_result={},overridableKeys=Object.create(null),keyTag=null,keyNode=null,valueNode=null,atExplicitKey=!1,detected=!1;if(-1!==state3.firstTabInLine)return!1;for(null!==state3.anchor&&(state3.anchorMap[state3.anchor]=_result),ch=state3.input.charCodeAt(state3.position);0!==ch;){if(atExplicitKey||-1===state3.firstTabInLine||(state3.position=state3.firstTabInLine,throwError(state3,"tab characters must not be used in indentation")),following=state3.input.charCodeAt(state3.position+1),_line=state3.line,63!==ch&&58!==ch||!is_WS_OR_EOL(following)){if(_keyLine=state3.line,_keyLineStart=state3.lineStart,_keyPos=state3.position,!composeNode(state3,flowIndent,CONTEXT_FLOW_OUT,!1,!0))break;if(state3.line===_line){for(ch=state3.input.charCodeAt(state3.position);is_WHITE_SPACE(ch);)ch=state3.input.charCodeAt(++state3.position);if(58===ch)is_WS_OR_EOL(ch=state3.input.charCodeAt(++state3.position))||throwError(state3,"a whitespace character is expected after the key-value separator within a block mapping"),atExplicitKey&&(storeMappingPair(state3,_result,overridableKeys,keyTag,keyNode,null,_keyLine,_keyLineStart,_keyPos),keyTag=keyNode=valueNode=null),detected=!0,atExplicitKey=!1,allowCompact=!1,keyTag=state3.tag,keyNode=state3.result;else{if(!detected)return state3.tag=_tag,state3.anchor=_anchor,!0;throwError(state3,"can not read an implicit mapping pair; a colon is missed")}}else{if(!detected)return state3.tag=_tag,state3.anchor=_anchor,!0;throwError(state3,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===ch?(atExplicitKey&&(storeMappingPair(state3,_result,overridableKeys,keyTag,keyNode,null,_keyLine,_keyLineStart,_keyPos),keyTag=keyNode=valueNode=null),detected=!0,atExplicitKey=!0,allowCompact=!0):atExplicitKey?(atExplicitKey=!1,allowCompact=!0):throwError(state3,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),state3.position+=1,ch=following;if((state3.line===_line||state3.lineIndent>nodeIndent)&&(atExplicitKey&&(_keyLine=state3.line,_keyLineStart=state3.lineStart,_keyPos=state3.position),composeNode(state3,nodeIndent,CONTEXT_BLOCK_OUT,!0,allowCompact)&&(atExplicitKey?keyNode=state3.result:valueNode=state3.result),atExplicitKey||(storeMappingPair(state3,_result,overridableKeys,keyTag,keyNode,valueNode,_keyLine,_keyLineStart,_keyPos),keyTag=keyNode=valueNode=null),skipSeparationSpace(state3,!0,-1),ch=state3.input.charCodeAt(state3.position)),(state3.line===_line||state3.lineIndent>nodeIndent)&&0!==ch)throwError(state3,"bad indentation of a mapping entry");else if(state3.lineIndent<nodeIndent)break}return atExplicitKey&&storeMappingPair(state3,_result,overridableKeys,keyTag,keyNode,null,_keyLine,_keyLineStart,_keyPos),detected&&(state3.tag=_tag,state3.anchor=_anchor,state3.kind="mapping",state3.result=_result),detected}function readTagProperty(state3){var _position,tagHandle,tagName,ch,isVerbatim=!1,isNamed2=!1;if(33!==(ch=state3.input.charCodeAt(state3.position)))return!1;if(null!==state3.tag&&throwError(state3,"duplication of a tag property"),60===(ch=state3.input.charCodeAt(++state3.position))?(isVerbatim=!0,ch=state3.input.charCodeAt(++state3.position)):33===ch?(isNamed2=!0,tagHandle="!!",ch=state3.input.charCodeAt(++state3.position)):tagHandle="!",_position=state3.position,isVerbatim){do{ch=state3.input.charCodeAt(++state3.position)}while(0!==ch&&62!==ch);state3.position<state3.length?(tagName=state3.input.slice(_position,state3.position),ch=state3.input.charCodeAt(++state3.position)):throwError(state3,"unexpected end of the stream within a verbatim tag")}else{for(;0!==ch&&!is_WS_OR_EOL(ch);)33===ch&&(isNamed2?throwError(state3,"tag suffix cannot contain exclamation marks"):(tagHandle=state3.input.slice(_position-1,state3.position+1),PATTERN_TAG_HANDLE.test(tagHandle)||throwError(state3,"named tag handle cannot contain such characters"),isNamed2=!0,_position=state3.position+1)),ch=state3.input.charCodeAt(++state3.position);tagName=state3.input.slice(_position,state3.position),PATTERN_FLOW_INDICATORS.test(tagName)&&throwError(state3,"tag suffix cannot contain flow indicator characters")}tagName&&!PATTERN_TAG_URI.test(tagName)&&throwError(state3,"tag name cannot contain such characters: "+tagName);try{tagName=decodeURIComponent(tagName)}catch(err){throwError(state3,"tag name is malformed: "+tagName)}return isVerbatim?state3.tag=tagName:_hasOwnProperty$1.call(state3.tagMap,tagHandle)?state3.tag=state3.tagMap[tagHandle]+tagName:"!"===tagHandle?state3.tag="!"+tagName:"!!"===tagHandle?state3.tag="tag:yaml.org,2002:"+tagName:throwError(state3,'undeclared tag handle "'+tagHandle+'"'),!0}function readAnchorProperty(state3){var _position,ch;if(38!==(ch=state3.input.charCodeAt(state3.position)))return!1;for(null!==state3.anchor&&throwError(state3,"duplication of an anchor property"),ch=state3.input.charCodeAt(++state3.position),_position=state3.position;0!==ch&&!is_WS_OR_EOL(ch)&&!is_FLOW_INDICATOR(ch);)ch=state3.input.charCodeAt(++state3.position);return state3.position===_position&&throwError(state3,"name of an anchor node must contain at least one character"),state3.anchor=state3.input.slice(_position,state3.position),!0}function readAlias(state3){var _position,alias,ch;if(42!==(ch=state3.input.charCodeAt(state3.position)))return!1;for(ch=state3.input.charCodeAt(++state3.position),_position=state3.position;0!==ch&&!is_WS_OR_EOL(ch)&&!is_FLOW_INDICATOR(ch);)ch=state3.input.charCodeAt(++state3.position);return state3.position===_position&&throwError(state3,"name of an alias node must contain at least one character"),alias=state3.input.slice(_position,state3.position),_hasOwnProperty$1.call(state3.anchorMap,alias)||throwError(state3,'unidentified alias "'+alias+'"'),state3.result=state3.anchorMap[alias],skipSeparationSpace(state3,!0,-1),!0}function composeNode(state3,parentIndent,nodeContext,allowToSeek,allowCompact){var allowBlockStyles,allowBlockScalars,allowBlockCollections,typeIndex,typeQuantity,typeList,type3,flowIndent,blockIndent,indentStatus=1,atNewLine=!1,hasContent=!1;if(null!==state3.listener&&state3.listener("open",state3),state3.tag=null,state3.anchor=null,state3.kind=null,state3.result=null,allowBlockStyles=allowBlockScalars=allowBlockCollections=CONTEXT_BLOCK_OUT===nodeContext||CONTEXT_BLOCK_IN===nodeContext,allowToSeek&&skipSeparationSpace(state3,!0,-1)&&(atNewLine=!0,state3.lineIndent>parentIndent?indentStatus=1:state3.lineIndent===parentIndent?indentStatus=0:state3.lineIndent<parentIndent&&(indentStatus=-1)),1===indentStatus)for(;readTagProperty(state3)||readAnchorProperty(state3);)skipSeparationSpace(state3,!0,-1)?(atNewLine=!0,allowBlockCollections=allowBlockStyles,state3.lineIndent>parentIndent?indentStatus=1:state3.lineIndent===parentIndent?indentStatus=0:state3.lineIndent<parentIndent&&(indentStatus=-1)):allowBlockCollections=!1;if(allowBlockCollections&&(allowBlockCollections=atNewLine||allowCompact),1!==indentStatus&&CONTEXT_BLOCK_OUT!==nodeContext||(flowIndent=CONTEXT_FLOW_IN===nodeContext||CONTEXT_FLOW_OUT===nodeContext?parentIndent:parentIndent+1,blockIndent=state3.position-state3.lineStart,1===indentStatus?allowBlockCollections&&(readBlockSequence(state3,blockIndent)||readBlockMapping(state3,blockIndent,flowIndent))||readFlowCollection(state3,flowIndent)?hasContent=!0:(allowBlockScalars&&readBlockScalar(state3,flowIndent)||readSingleQuotedScalar(state3,flowIndent)||readDoubleQuotedScalar(state3,flowIndent)?hasContent=!0:readAlias(state3)?(hasContent=!0,null===state3.tag&&null===state3.anchor||throwError(state3,"alias node should not have any properties")):readPlainScalar(state3,flowIndent,CONTEXT_FLOW_IN===nodeContext)&&(hasContent=!0,null===state3.tag&&(state3.tag="?")),null!==state3.anchor&&(state3.anchorMap[state3.anchor]=state3.result)):0===indentStatus&&(hasContent=allowBlockCollections&&readBlockSequence(state3,blockIndent))),null===state3.tag)null!==state3.anchor&&(state3.anchorMap[state3.anchor]=state3.result);else if("?"===state3.tag){for(null!==state3.result&&"scalar"!==state3.kind&&throwError(state3,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+state3.kind+'"'),typeIndex=0,typeQuantity=state3.implicitTypes.length;typeIndex<typeQuantity;typeIndex+=1)if((type3=state3.implicitTypes[typeIndex]).resolve(state3.result)){state3.result=type3.construct(state3.result),state3.tag=type3.tag,null!==state3.anchor&&(state3.anchorMap[state3.anchor]=state3.result);break}}else if("!"!==state3.tag){if(_hasOwnProperty$1.call(state3.typeMap[state3.kind||"fallback"],state3.tag))type3=state3.typeMap[state3.kind||"fallback"][state3.tag];else for(type3=null,typeIndex=0,typeQuantity=(typeList=state3.typeMap.multi[state3.kind||"fallback"]).length;typeIndex<typeQuantity;typeIndex+=1)if(state3.tag.slice(0,typeList[typeIndex].tag.length)===typeList[typeIndex].tag){type3=typeList[typeIndex];break}type3||throwError(state3,"unknown tag !<"+state3.tag+">"),null!==state3.result&&type3.kind!==state3.kind&&throwError(state3,"unacceptable node kind for !<"+state3.tag+'> tag; it should be "'+type3.kind+'", not "'+state3.kind+'"'),type3.resolve(state3.result,state3.tag)?(state3.result=type3.construct(state3.result,state3.tag),null!==state3.anchor&&(state3.anchorMap[state3.anchor]=state3.result)):throwError(state3,"cannot resolve a node with !<"+state3.tag+"> explicit tag")}return null!==state3.listener&&state3.listener("close",state3),null!==state3.tag||null!==state3.anchor||hasContent}function readDocument(state3){var _position,directiveName,directiveArgs,ch,documentStart=state3.position,hasDirectives=!1;for(state3.version=null,state3.checkLineBreaks=state3.legacy,state3.tagMap=Object.create(null),state3.anchorMap=Object.create(null);0!==(ch=state3.input.charCodeAt(state3.position))&&(skipSeparationSpace(state3,!0,-1),ch=state3.input.charCodeAt(state3.position),!(state3.lineIndent>0||37!==ch));){for(hasDirectives=!0,ch=state3.input.charCodeAt(++state3.position),_position=state3.position;0!==ch&&!is_WS_OR_EOL(ch);)ch=state3.input.charCodeAt(++state3.position);for(directiveArgs=[],(directiveName=state3.input.slice(_position,state3.position)).length<1&&throwError(state3,"directive name must not be less than one character in length");0!==ch;){for(;is_WHITE_SPACE(ch);)ch=state3.input.charCodeAt(++state3.position);if(35===ch){do{ch=state3.input.charCodeAt(++state3.position)}while(0!==ch&&!is_EOL(ch));break}if(is_EOL(ch))break;for(_position=state3.position;0!==ch&&!is_WS_OR_EOL(ch);)ch=state3.input.charCodeAt(++state3.position);directiveArgs.push(state3.input.slice(_position,state3.position))}0!==ch&&readLineBreak(state3),_hasOwnProperty$1.call(directiveHandlers,directiveName)?directiveHandlers[directiveName](state3,directiveName,directiveArgs):throwWarning(state3,'unknown document directive "'+directiveName+'"')}skipSeparationSpace(state3,!0,-1),0===state3.lineIndent&&45===state3.input.charCodeAt(state3.position)&&45===state3.input.charCodeAt(state3.position+1)&&45===state3.input.charCodeAt(state3.position+2)?(state3.position+=3,skipSeparationSpace(state3,!0,-1)):hasDirectives&&throwError(state3,"directives end mark is expected"),composeNode(state3,state3.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(state3,!0,-1),state3.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(state3.input.slice(documentStart,state3.position))&&throwWarning(state3,"non-ASCII line breaks are interpreted as content"),state3.documents.push(state3.result),state3.position===state3.lineStart&&testDocumentSeparator(state3)?46===state3.input.charCodeAt(state3.position)&&(state3.position+=3,skipSeparationSpace(state3,!0,-1)):state3.position<state3.length-1&&throwError(state3,"end of the stream or a document separator is expected")}function loadDocuments(input,options2){options2=options2||{},0!==(input=String(input)).length&&(10!==input.charCodeAt(input.length-1)&&13!==input.charCodeAt(input.length-1)&&(input+="\n"),65279===input.charCodeAt(0)&&(input=input.slice(1)));var state3=new State$1(input,options2),nullpos=input.indexOf("\0");for(-1!==nullpos&&(state3.position=nullpos,throwError(state3,"null byte is not allowed in input")),state3.input+="\0";32===state3.input.charCodeAt(state3.position);)state3.lineIndent+=1,state3.position+=1;for(;state3.position<state3.length-1;)readDocument(state3);return state3.documents}function loadAll$1(input,iterator,options2){null!==iterator&&"object"==typeof iterator&&void 0===options2&&(options2=iterator,iterator=null);var documents=loadDocuments(input,options2);if("function"!=typeof iterator)return documents;for(var index=0,length2=documents.length;index<length2;index+=1)iterator(documents[index])}function load$1(input,options2){var documents=loadDocuments(input,options2);if(0!==documents.length){if(1===documents.length)return documents[0];throw new exception("expected a single document in the stream, but found more")}}function compileStyleMap(schema2,map5){var result,keys2,index,length2,tag,style3,type3;if(null===map5)return{};for(result={},index=0,length2=(keys2=Object.keys(map5)).length;index<length2;index+=1)tag=keys2[index],style3=String(map5[tag]),"!!"===tag.slice(0,2)&&(tag="tag:yaml.org,2002:"+tag.slice(2)),(type3=schema2.compiledTypeMap.fallback[tag])&&_hasOwnProperty.call(type3.styleAliases,style3)&&(style3=type3.styleAliases[style3]),result[tag]=style3;return result}function encodeHex(character2){var string3,handle,length2;if(string3=character2.toString(16).toUpperCase(),character2<=255)handle="x",length2=2;else if(character2<=65535)handle="u",length2=4;else{if(!(character2<=4294967295))throw new exception("code point within a string may not be greater than 0xFFFFFFFF");handle="U",length2=8}return"\\"+handle+common.repeat("0",length2-string3.length)+string3}function State(options2){this.schema=options2.schema||_default,this.indent=Math.max(1,options2.indent||2),this.noArrayIndent=options2.noArrayIndent||!1,this.skipInvalid=options2.skipInvalid||!1,this.flowLevel=common.isNothing(options2.flowLevel)?-1:options2.flowLevel,this.styleMap=compileStyleMap(this.schema,options2.styles||null),this.sortKeys=options2.sortKeys||!1,this.lineWidth=options2.lineWidth||80,this.noRefs=options2.noRefs||!1,this.noCompatMode=options2.noCompatMode||!1,this.condenseFlow=options2.condenseFlow||!1,this.quotingType='"'===options2.quotingType?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=options2.forceQuotes||!1,this.replacer="function"==typeof options2.replacer?options2.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(string3,spaces){for(var line2,ind=common.repeat(" ",spaces),position5=0,next3=-1,result="",length2=string3.length;position5<length2;)-1===(next3=string3.indexOf("\n",position5))?(line2=string3.slice(position5),position5=length2):(line2=string3.slice(position5,next3+1),position5=next3+1),line2.length&&"\n"!==line2&&(result+=ind),result+=line2;return result}function generateNextLine(state3,level){return"\n"+common.repeat(" ",state3.indent*level)}function testImplicitResolving(state3,str2){var index,length2;for(index=0,length2=state3.implicitTypes.length;index<length2;index+=1)if(state3.implicitTypes[index].resolve(str2))return!0;return!1}function isWhitespace(c3){return c3===CHAR_SPACE||c3===CHAR_TAB}function isPrintable(c3){return 32<=c3&&c3<=126||161<=c3&&c3<=55295&&8232!==c3&&8233!==c3||57344<=c3&&c3<=65533&&c3!==CHAR_BOM||65536<=c3&&c3<=1114111}function isNsCharOrWhitespace(c3){return isPrintable(c3)&&c3!==CHAR_BOM&&c3!==CHAR_CARRIAGE_RETURN&&c3!==CHAR_LINE_FEED}function isPlainSafe(c3,prev2,inblock){var cIsNsCharOrWhitespace=isNsCharOrWhitespace(c3),cIsNsChar=cIsNsCharOrWhitespace&&!isWhitespace(c3);return(inblock?cIsNsCharOrWhitespace:cIsNsCharOrWhitespace&&c3!==CHAR_COMMA&&c3!==CHAR_LEFT_SQUARE_BRACKET&&c3!==CHAR_RIGHT_SQUARE_BRACKET&&c3!==CHAR_LEFT_CURLY_BRACKET&&c3!==CHAR_RIGHT_CURLY_BRACKET)&&c3!==CHAR_SHARP&&!(prev2===CHAR_COLON&&!cIsNsChar)||isNsCharOrWhitespace(prev2)&&!isWhitespace(prev2)&&c3===CHAR_SHARP||prev2===CHAR_COLON&&cIsNsChar}function isPlainSafeFirst(c3){return isPrintable(c3)&&c3!==CHAR_BOM&&!isWhitespace(c3)&&c3!==CHAR_MINUS&&c3!==CHAR_QUESTION&&c3!==CHAR_COLON&&c3!==CHAR_COMMA&&c3!==CHAR_LEFT_SQUARE_BRACKET&&c3!==CHAR_RIGHT_SQUARE_BRACKET&&c3!==CHAR_LEFT_CURLY_BRACKET&&c3!==CHAR_RIGHT_CURLY_BRACKET&&c3!==CHAR_SHARP&&c3!==CHAR_AMPERSAND&&c3!==CHAR_ASTERISK&&c3!==CHAR_EXCLAMATION&&c3!==CHAR_VERTICAL_LINE&&c3!==CHAR_EQUALS&&c3!==CHAR_GREATER_THAN&&c3!==CHAR_SINGLE_QUOTE&&c3!==CHAR_DOUBLE_QUOTE&&c3!==CHAR_PERCENT&&c3!==CHAR_COMMERCIAL_AT&&c3!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(c3){return!isWhitespace(c3)&&c3!==CHAR_COLON}function codePointAt(string3,pos){var second2,first3=string3.charCodeAt(pos);return first3>=55296&&first3<=56319&&pos+1<string3.length&&(second2=string3.charCodeAt(pos+1))>=56320&&second2<=57343?1024*(first3-55296)+second2-56320+65536:first3}function needIndentIndicator(string3){return/^\n* /.test(string3)}function chooseScalarStyle(string3,singleLineOnly,indentPerLevel,lineWidth,testAmbiguousType,quotingType,forceQuotes,inblock){var i2,char2=0,prevChar=null,hasLineBreak=!1,hasFoldableLine=!1,shouldTrackWidth=-1!==lineWidth,previousLineBreak=-1,plain=isPlainSafeFirst(codePointAt(string3,0))&&isPlainSafeLast(codePointAt(string3,string3.length-1));if(singleLineOnly||forceQuotes)for(i2=0;i2<string3.length;char2>=65536?i2+=2:i2++){if(!isPrintable(char2=codePointAt(string3,i2)))return STYLE_DOUBLE;plain=plain&&isPlainSafe(char2,prevChar,inblock),prevChar=char2}else{for(i2=0;i2<string3.length;char2>=65536?i2+=2:i2++){if((char2=codePointAt(string3,i2))===CHAR_LINE_FEED)hasLineBreak=!0,shouldTrackWidth&&(hasFoldableLine=hasFoldableLine||i2-previousLineBreak-1>lineWidth&&" "!==string3[previousLineBreak+1],previousLineBreak=i2);else if(!isPrintable(char2))return STYLE_DOUBLE;plain=plain&&isPlainSafe(char2,prevChar,inblock),prevChar=char2}hasFoldableLine=hasFoldableLine||shouldTrackWidth&&i2-previousLineBreak-1>lineWidth&&" "!==string3[previousLineBreak+1]}return hasLineBreak||hasFoldableLine?indentPerLevel>9&&needIndentIndicator(string3)?STYLE_DOUBLE:forceQuotes?quotingType===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:hasFoldableLine?STYLE_FOLDED:STYLE_LITERAL:!plain||forceQuotes||testAmbiguousType(string3)?quotingType===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:STYLE_PLAIN}function writeScalar(state3,string3,level,iskey,inblock){state3.dump=function(){if(0===string3.length)return state3.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!state3.noCompatMode&&(-1!==DEPRECATED_BOOLEANS_SYNTAX.indexOf(string3)||DEPRECATED_BASE60_SYNTAX.test(string3)))return state3.quotingType===QUOTING_TYPE_DOUBLE?'"'+string3+'"':"'"+string3+"'";var indent=state3.indent*Math.max(1,level),lineWidth=-1===state3.lineWidth?-1:Math.max(Math.min(state3.lineWidth,40),state3.lineWidth-indent),singleLineOnly=iskey||state3.flowLevel>-1&&level>=state3.flowLevel;function testAmbiguity(string4){return testImplicitResolving(state3,string4)}switch(__name(testAmbiguity,"testAmbiguity"),chooseScalarStyle(string3,singleLineOnly,state3.indent,lineWidth,testAmbiguity,state3.quotingType,state3.forceQuotes&&!iskey,inblock)){case STYLE_PLAIN:return string3;case STYLE_SINGLE:return"'"+string3.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(string3,state3.indent)+dropEndingNewline(indentString(string3,indent));case STYLE_FOLDED:return">"+blockHeader(string3,state3.indent)+dropEndingNewline(indentString(foldString(string3,lineWidth),indent));case STYLE_DOUBLE:return'"'+escapeString(string3)+'"';default:throw new exception("impossible error: invalid scalar style")}}()}function blockHeader(string3,indentPerLevel){var indentIndicator=needIndentIndicator(string3)?String(indentPerLevel):"",clip="\n"===string3[string3.length-1];return indentIndicator+(clip&&("\n"===string3[string3.length-2]||"\n"===string3)?"+":clip?"":"-")+"\n"}function dropEndingNewline(string3){return"\n"===string3[string3.length-1]?string3.slice(0,-1):string3}function foldString(string3,width3){for(var nextLF,moreIndented,match2,lineRe=/(\n+)([^\n]*)/g,result=(nextLF=-1!==(nextLF=string3.indexOf("\n"))?nextLF:string3.length,lineRe.lastIndex=nextLF,foldLine(string3.slice(0,nextLF),width3)),prevMoreIndented="\n"===string3[0]||" "===string3[0];match2=lineRe.exec(string3);){var prefix=match2[1],line2=match2[2];moreIndented=" "===line2[0],result+=prefix+(prevMoreIndented||moreIndented||""===line2?"":"\n")+foldLine(line2,width3),prevMoreIndented=moreIndented}return result}function foldLine(line2,width3){if(""===line2||" "===line2[0])return line2;for(var match2,end2,breakRe=/ [^ ]/g,start3=0,curr=0,next3=0,result="";match2=breakRe.exec(line2);)(next3=match2.index)-start3>width3&&(end2=curr>start3?curr:next3,result+="\n"+line2.slice(start3,end2),start3=end2+1),curr=next3;return result+="\n",line2.length-start3>width3&&curr>start3?result+=line2.slice(start3,curr)+"\n"+line2.slice(curr+1):result+=line2.slice(start3),result.slice(1)}function escapeString(string3){for(var escapeSeq,result="",char2=0,i2=0;i2<string3.length;char2>=65536?i2+=2:i2++)char2=codePointAt(string3,i2),!(escapeSeq=ESCAPE_SEQUENCES[char2])&&isPrintable(char2)?(result+=string3[i2],char2>=65536&&(result+=string3[i2+1])):result+=escapeSeq||encodeHex(char2);return result}function writeFlowSequence(state3,level,object3){var index,length2,value2,_result="",_tag=state3.tag;for(index=0,length2=object3.length;index<length2;index+=1)value2=object3[index],state3.replacer&&(value2=state3.replacer.call(object3,String(index),value2)),(writeNode(state3,level,value2,!1,!1)||void 0===value2&&writeNode(state3,level,null,!1,!1))&&(""!==_result&&(_result+=","+(state3.condenseFlow?"":" ")),_result+=state3.dump);state3.tag=_tag,state3.dump="["+_result+"]"}function writeBlockSequence(state3,level,object3,compact2){var index,length2,value2,_result="",_tag=state3.tag;for(index=0,length2=object3.length;index<length2;index+=1)value2=object3[index],state3.replacer&&(value2=state3.replacer.call(object3,String(index),value2)),(writeNode(state3,level+1,value2,!0,!0,!1,!0)||void 0===value2&&writeNode(state3,level+1,null,!0,!0,!1,!0))&&(compact2&&""===_result||(_result+=generateNextLine(state3,level)),state3.dump&&CHAR_LINE_FEED===state3.dump.charCodeAt(0)?_result+="-":_result+="- ",_result+=state3.dump);state3.tag=_tag,state3.dump=_result||"[]"}function writeFlowMapping(state3,level,object3){var index,length2,objectKey,objectValue,pairBuffer,_result="",_tag=state3.tag,objectKeyList=Object.keys(object3);for(index=0,length2=objectKeyList.length;index<length2;index+=1)pairBuffer="",""!==_result&&(pairBuffer+=", "),state3.condenseFlow&&(pairBuffer+='"'),objectValue=object3[objectKey=objectKeyList[index]],state3.replacer&&(objectValue=state3.replacer.call(object3,objectKey,objectValue)),writeNode(state3,level,objectKey,!1,!1)&&(state3.dump.length>1024&&(pairBuffer+="? "),pairBuffer+=state3.dump+(state3.condenseFlow?'"':"")+":"+(state3.condenseFlow?"":" "),writeNode(state3,level,objectValue,!1,!1)&&(_result+=pairBuffer+=state3.dump));state3.tag=_tag,state3.dump="{"+_result+"}"}function writeBlockMapping(state3,level,object3,compact2){var index,length2,objectKey,objectValue,explicitPair,pairBuffer,_result="",_tag=state3.tag,objectKeyList=Object.keys(object3);if(!0===state3.sortKeys)objectKeyList.sort();else if("function"==typeof state3.sortKeys)objectKeyList.sort(state3.sortKeys);else if(state3.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(index=0,length2=objectKeyList.length;index<length2;index+=1)pairBuffer="",compact2&&""===_result||(pairBuffer+=generateNextLine(state3,level)),objectValue=object3[objectKey=objectKeyList[index]],state3.replacer&&(objectValue=state3.replacer.call(object3,objectKey,objectValue)),writeNode(state3,level+1,objectKey,!0,!0,!0)&&((explicitPair=null!==state3.tag&&"?"!==state3.tag||state3.dump&&state3.dump.length>1024)&&(state3.dump&&CHAR_LINE_FEED===state3.dump.charCodeAt(0)?pairBuffer+="?":pairBuffer+="? "),pairBuffer+=state3.dump,explicitPair&&(pairBuffer+=generateNextLine(state3,level)),writeNode(state3,level+1,objectValue,!0,explicitPair)&&(state3.dump&&CHAR_LINE_FEED===state3.dump.charCodeAt(0)?pairBuffer+=":":pairBuffer+=": ",_result+=pairBuffer+=state3.dump));state3.tag=_tag,state3.dump=_result||"{}"}function detectType2(state3,object3,explicit){var _result,typeList,index,length2,type3,style3;for(index=0,length2=(typeList=explicit?state3.explicitTypes:state3.implicitTypes).length;index<length2;index+=1)if(((type3=typeList[index]).instanceOf||type3.predicate)&&(!type3.instanceOf||"object"==typeof object3&&object3 instanceof type3.instanceOf)&&(!type3.predicate||type3.predicate(object3))){if(explicit?type3.multi&&type3.representName?state3.tag=type3.representName(object3):state3.tag=type3.tag:state3.tag="?",type3.represent){if(style3=state3.styleMap[type3.tag]||type3.defaultStyle,"[object Function]"===_toString.call(type3.represent))_result=type3.represent(object3,style3);else{if(!_hasOwnProperty.call(type3.represent,style3))throw new exception("!<"+type3.tag+'> tag resolver accepts not "'+style3+'" style');_result=type3.represent[style3](object3,style3)}state3.dump=_result}return!0}return!1}function writeNode(state3,level,object3,block2,compact2,iskey,isblockseq){state3.tag=null,state3.dump=object3,detectType2(state3,object3,!1)||detectType2(state3,object3,!0);var tagStr,type3=_toString.call(state3.dump),inblock=block2;block2&&(block2=state3.flowLevel<0||state3.flowLevel>level);var duplicateIndex,duplicate,objectOrArray="[object Object]"===type3||"[object Array]"===type3;if(objectOrArray&&(duplicate=-1!==(duplicateIndex=state3.duplicates.indexOf(object3))),(null!==state3.tag&&"?"!==state3.tag||duplicate||2!==state3.indent&&level>0)&&(compact2=!1),duplicate&&state3.usedDuplicates[duplicateIndex])state3.dump="*ref_"+duplicateIndex;else{if(objectOrArray&&duplicate&&!state3.usedDuplicates[duplicateIndex]&&(state3.usedDuplicates[duplicateIndex]=!0),"[object Object]"===type3)block2&&0!==Object.keys(state3.dump).length?(writeBlockMapping(state3,level,state3.dump,compact2),duplicate&&(state3.dump="&ref_"+duplicateIndex+state3.dump)):(writeFlowMapping(state3,level,state3.dump),duplicate&&(state3.dump="&ref_"+duplicateIndex+" "+state3.dump));else if("[object Array]"===type3)block2&&0!==state3.dump.length?(state3.noArrayIndent&&!isblockseq&&level>0?writeBlockSequence(state3,level-1,state3.dump,compact2):writeBlockSequence(state3,level,state3.dump,compact2),duplicate&&(state3.dump="&ref_"+duplicateIndex+state3.dump)):(writeFlowSequence(state3,level,state3.dump),duplicate&&(state3.dump="&ref_"+duplicateIndex+" "+state3.dump));else{if("[object String]"!==type3){if("[object Undefined]"===type3)return!1;if(state3.skipInvalid)return!1;throw new exception("unacceptable kind of an object to dump "+type3)}"?"!==state3.tag&&writeScalar(state3,state3.dump,level,iskey,inblock)}null!==state3.tag&&"?"!==state3.tag&&(tagStr=encodeURI("!"===state3.tag[0]?state3.tag.slice(1):state3.tag).replace(/!/g,"%21"),tagStr="!"===state3.tag[0]?"!"+tagStr:"tag:yaml.org,2002:"===tagStr.slice(0,18)?"!!"+tagStr.slice(18):"!<"+tagStr+">",state3.dump=tagStr+" "+state3.dump)}return!0}function getDuplicateReferences(object3,state3){var index,length2,objects=[],duplicatesIndexes=[];for(inspectNode(object3,objects,duplicatesIndexes),index=0,length2=duplicatesIndexes.length;index<length2;index+=1)state3.duplicates.push(objects[duplicatesIndexes[index]]);state3.usedDuplicates=new Array(length2)}function inspectNode(object3,objects,duplicatesIndexes){var objectKeyList,index,length2;if(null!==object3&&"object"==typeof object3)if(-1!==(index=objects.indexOf(object3)))-1===duplicatesIndexes.indexOf(index)&&duplicatesIndexes.push(index);else if(objects.push(object3),Array.isArray(object3))for(index=0,length2=object3.length;index<length2;index+=1)inspectNode(object3[index],objects,duplicatesIndexes);else for(index=0,length2=(objectKeyList=Object.keys(object3)).length;index<length2;index+=1)inspectNode(object3[objectKeyList[index]],objects,duplicatesIndexes)}function dump$1(input,options2){var state3=new State(options2=options2||{});state3.noRefs||getDuplicateReferences(input,state3);var value2=input;return state3.replacer&&(value2=state3.replacer.call({"":value2},"",value2)),writeNode(state3,0,value2,!0,!0)?state3.dump+"\n":""}function renamed(from2,to){return function(){throw new Error("Function yaml."+from2+" is removed in js-yaml 4. Use yaml."+to+" instead, which is now safe by default.")}}var O,E,m,xe,be,Re,C,Oe,j,se,ie,Te,F,we,Q,ye,Pe,v,U,Se,oe,$e,K2,re2,_e,Le,Me,ze,ae,Ae,D2,W,le,Ee,ue,Ce,Ie,Be,pe,qe,ve,ce,De,He,Ze,Ge,Ne,je,Fe,q,Qe,he,de,Ue,X2,Ke,N,We,I,M,Xe,ke,y2,b,P,$,R,S2,B,_,init_js_yaml=__esm({"../../node_modules/.pnpm/js-yaml@4.1.0/node_modules/js-yaml/dist/js-yaml.mjs"(){for(__name(isNothing,"isNothing"),__name(isObject2,"isObject"),__name(toArray,"toArray"),__name(extend2,"extend"),__name(repeat,"repeat"),__name(isNegativeZero,"isNegativeZero"),common={isNothing:isNothing,isObject:isObject2,toArray:toArray,repeat:repeat,isNegativeZero:isNegativeZero,extend:extend2},__name(formatError,"formatError"),__name(YAMLException$1,"YAMLException$1"),YAMLException$1.prototype=Object.create(Error.prototype),YAMLException$1.prototype.constructor=YAMLException$1,YAMLException$1.prototype.toString=__name(function(compact2){return this.name+": "+formatError(this,compact2)},"toString"),exception=YAMLException$1,__name(getLine,"getLine"),__name(padStart,"padStart"),__name(makeSnippet,"makeSnippet"),snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"],__name(compileStyleAliases,"compileStyleAliases"),__name(Type$1,"Type$1"),type2=Type$1,__name(compileList,"compileList"),__name(compileMap,"compileMap"),__name(Schema$1,"Schema$1"),Schema$1.prototype.extend=__name(function(definition){var implicit2=[],explicit=[];if(definition instanceof type2)explicit.push(definition);else if(Array.isArray(definition))explicit=explicit.concat(definition);else{if(!definition||!Array.isArray(definition.implicit)&&!Array.isArray(definition.explicit))throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");definition.implicit&&(implicit2=implicit2.concat(definition.implicit)),definition.explicit&&(explicit=explicit.concat(definition.explicit))}implicit2.forEach(function(type$1){if(!(type$1 instanceof type2))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(type$1.loadKind&&"scalar"!==type$1.loadKind)throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(type$1.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),explicit.forEach(function(type$1){if(!(type$1 instanceof type2))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var result=Object.create(Schema$1.prototype);return result.implicit=(this.implicit||[]).concat(implicit2),result.explicit=(this.explicit||[]).concat(explicit),result.compiledImplicit=compileList(result,"implicit"),result.compiledExplicit=compileList(result,"explicit"),result.compiledTypeMap=compileMap(result.compiledImplicit,result.compiledExplicit),result},"extend"),schema=Schema$1,str=new type2("tag:yaml.org,2002:str",{kind:"scalar",construct:__name(function(data5){return null!==data5?data5:""},"construct")}),seq=new type2("tag:yaml.org,2002:seq",{kind:"sequence",construct:__name(function(data5){return null!==data5?data5:[]},"construct")}),map2=new type2("tag:yaml.org,2002:map",{kind:"mapping",construct:__name(function(data5){return null!==data5?data5:{}},"construct")}),failsafe=new schema({explicit:[str,seq,map2]}),__name(resolveYamlNull,"resolveYamlNull"),__name(constructYamlNull,"constructYamlNull"),__name(isNull,"isNull"),_null=new type2("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:__name(function(){return"~"},"canonical"),lowercase:__name(function(){return"null"},"lowercase"),uppercase:__name(function(){return"NULL"},"uppercase"),camelcase:__name(function(){return"Null"},"camelcase"),empty:__name(function(){return""},"empty")},defaultStyle:"lowercase"}),__name(resolveYamlBoolean,"resolveYamlBoolean"),__name(constructYamlBoolean,"constructYamlBoolean"),__name(isBoolean,"isBoolean"),bool=new type2("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:__name(function(object3){return object3?"true":"false"},"lowercase"),uppercase:__name(function(object3){return object3?"TRUE":"FALSE"},"uppercase"),camelcase:__name(function(object3){return object3?"True":"False"},"camelcase")},defaultStyle:"lowercase"}),__name(isHexCode,"isHexCode"),__name(isOctCode,"isOctCode"),__name(isDecCode,"isDecCode"),__name(resolveYamlInteger,"resolveYamlInteger"),__name(constructYamlInteger,"constructYamlInteger"),__name(isInteger,"isInteger"),int=new type2("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:__name(function(obj){return obj>=0?"0b"+obj.toString(2):"-0b"+obj.toString(2).slice(1)},"binary"),octal:__name(function(obj){return obj>=0?"0o"+obj.toString(8):"-0o"+obj.toString(8).slice(1)},"octal"),decimal:__name(function(obj){return obj.toString(10)},"decimal"),hexadecimal:__name(function(obj){return obj>=0?"0x"+obj.toString(16).toUpperCase():"-0x"+obj.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),__name(resolveYamlFloat,"resolveYamlFloat"),__name(constructYamlFloat,"constructYamlFloat"),SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/,__name(representYamlFloat,"representYamlFloat"),__name(isFloat,"isFloat"),float=new type2("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),__name(resolveYamlTimestamp,"resolveYamlTimestamp"),__name(constructYamlTimestamp,"constructYamlTimestamp"),__name(representYamlTimestamp,"representYamlTimestamp"),timestamp=new type2("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp}),__name(resolveYamlMerge,"resolveYamlMerge"),merge2=new type2("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",__name(resolveYamlBinary,"resolveYamlBinary"),__name(constructYamlBinary,"constructYamlBinary"),__name(representYamlBinary,"representYamlBinary"),__name(isBinary,"isBinary"),binary=new type2("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString,__name(resolveYamlOmap,"resolveYamlOmap"),__name(constructYamlOmap,"constructYamlOmap"),omap=new type2("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString,__name(resolveYamlPairs,"resolveYamlPairs"),__name(constructYamlPairs,"constructYamlPairs"),pairs=new type2("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty,__name(resolveYamlSet,"resolveYamlSet"),__name(constructYamlSet,"constructYamlSet"),set3=new type2("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge2],explicit:[binary,omap,pairs,set3]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,__name(_class,"_class"),__name(is_EOL,"is_EOL"),__name(is_WHITE_SPACE,"is_WHITE_SPACE"),__name(is_WS_OR_EOL,"is_WS_OR_EOL"),__name(is_FLOW_INDICATOR,"is_FLOW_INDICATOR"),__name(fromHexCode,"fromHexCode"),__name(escapedHexLen,"escapedHexLen"),__name(fromDecimalCode,"fromDecimalCode"),__name(simpleEscapeSequence,"simpleEscapeSequence"),__name(charFromCodepoint,"charFromCodepoint"),simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i2=0;i2<256;i2++)simpleEscapeCheck[i2]=simpleEscapeSequence(i2)?1:0,simpleEscapeMap[i2]=simpleEscapeSequence(i2);__name(State$1,"State$1"),__name(generateError,"generateError"),__name(throwError,"throwError"),__name(throwWarning,"throwWarning"),directiveHandlers={YAML:__name(function(state3,name,args){var match2,major,minor;null!==state3.version&&throwError(state3,"duplication of %YAML directive"),1!==args.length&&throwError(state3,"YAML directive accepts exactly one argument"),null===(match2=/^([0-9]+)\.([0-9]+)$/.exec(args[0]))&&throwError(state3,"ill-formed argument of the YAML directive"),major=parseInt(match2[1],10),minor=parseInt(match2[2],10),1!==major&&throwError(state3,"unacceptable YAML version of the document"),state3.version=args[0],state3.checkLineBreaks=minor<2,1!==minor&&2!==minor&&throwWarning(state3,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:__name(function(state3,name,args){var handle,prefix;2!==args.length&&throwError(state3,"TAG directive accepts exactly two arguments"),handle=args[0],prefix=args[1],PATTERN_TAG_HANDLE.test(handle)||throwError(state3,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(state3.tagMap,handle)&&throwError(state3,'there is a previously declared suffix for "'+handle+'" tag handle'),PATTERN_TAG_URI.test(prefix)||throwError(state3,"ill-formed tag prefix (second argument) of the TAG directive");try{prefix=decodeURIComponent(prefix)}catch(err){throwError(state3,"tag prefix is malformed: "+prefix)}state3.tagMap[handle]=prefix},"handleTagDirective")},__name(captureSegment,"captureSegment"),__name(mergeMappings,"mergeMappings"),__name(storeMappingPair,"storeMappingPair"),__name(readLineBreak,"readLineBreak"),__name(skipSeparationSpace,"skipSeparationSpace"),__name(testDocumentSeparator,"testDocumentSeparator"),__name(writeFoldedLines,"writeFoldedLines"),__name(readPlainScalar,"readPlainScalar"),__name(readSingleQuotedScalar,"readSingleQuotedScalar"),__name(readDoubleQuotedScalar,"readDoubleQuotedScalar"),__name(readFlowCollection,"readFlowCollection"),__name(readBlockScalar,"readBlockScalar"),__name(readBlockSequence,"readBlockSequence"),__name(readBlockMapping,"readBlockMapping"),__name(readTagProperty,"readTagProperty"),__name(readAnchorProperty,"readAnchorProperty"),__name(readAlias,"readAlias"),__name(composeNode,"composeNode"),__name(readDocument,"readDocument"),__name(loadDocuments,"loadDocuments"),__name(loadAll$1,"loadAll$1"),__name(load$1,"load$1"),loader2={loadAll:loadAll$1,load:load$1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,(ESCAPE_SEQUENCES={})[0]="\\0",ESCAPE_SEQUENCES[7]="\\a",ESCAPE_SEQUENCES[8]="\\b",ESCAPE_SEQUENCES[9]="\\t",ESCAPE_SEQUENCES[10]="\\n",ESCAPE_SEQUENCES[11]="\\v",ESCAPE_SEQUENCES[12]="\\f",ESCAPE_SEQUENCES[13]="\\r",ESCAPE_SEQUENCES[27]="\\e",ESCAPE_SEQUENCES[34]='\\"',ESCAPE_SEQUENCES[92]="\\\\",ESCAPE_SEQUENCES[133]="\\N",ESCAPE_SEQUENCES[160]="\\_",ESCAPE_SEQUENCES[8232]="\\L",ESCAPE_SEQUENCES[8233]="\\P",DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/,__name(compileStyleMap,"compileStyleMap"),__name(encodeHex,"encodeHex"),QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2,__name(State,"State"),__name(indentString,"indentString"),__name(generateNextLine,"generateNextLine"),__name(testImplicitResolving,"testImplicitResolving"),__name(isWhitespace,"isWhitespace"),__name(isPrintable,"isPrintable"),__name(isNsCharOrWhitespace,"isNsCharOrWhitespace"),__name(isPlainSafe,"isPlainSafe"),__name(isPlainSafeFirst,"isPlainSafeFirst"),__name(isPlainSafeLast,"isPlainSafeLast"),__name(codePointAt,"codePointAt"),__name(needIndentIndicator,"needIndentIndicator"),STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5,__name(chooseScalarStyle,"chooseScalarStyle"),__name(writeScalar,"writeScalar"),__name(blockHeader,"blockHeader"),__name(dropEndingNewline,"dropEndingNewline"),__name(foldString,"foldString"),__name(foldLine,"foldLine"),__name(escapeString,"escapeString"),__name(writeFlowSequence,"writeFlowSequence"),__name(writeBlockSequence,"writeBlockSequence"),__name(writeFlowMapping,"writeFlowMapping"),__name(writeBlockMapping,"writeBlockMapping"),__name(detectType2,"detectType"),__name(writeNode,"writeNode"),__name(getDuplicateReferences,"getDuplicateReferences"),__name(inspectNode,"inspectNode"),__name(dump$1,"dump$1"),dumper={dump:dump$1},__name(renamed,"renamed"),JSON_SCHEMA=json,load=loader2.load,renamed("safeLoad","load"),renamed("safeLoadAll","loadAll"),renamed("safeDump","dump")}});function L(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function G(l4){O=l4}function h(l4,e3=""){let t4="string"==typeof l4?l4:l4.source,n2={replace:__name((r2,i2)=>{let s2="string"==typeof i2?i2:i2.source;return s2=s2.replace(m.caret,"$1"),t4=t4.replace(r2,s2),n2},"replace"),getRegex:__name(()=>new RegExp(t4,e3),"getRegex")};return n2}function w(l4,e3){if(e3){if(m.escapeTest.test(l4))return l4.replace(m.escapeReplace,ke)}else if(m.escapeTestNoEncode.test(l4))return l4.replace(m.escapeReplaceNoEncode,ke);return l4}function J(l4){try{l4=encodeURI(l4).replace(m.percentDecode,"%")}catch{return null}return l4}function V(l4,e3){let n2=l4.replace(m.findPipe,(i2,s2,o2)=>{let a2=!1,u2=s2;for(;--u2>=0&&"\\"===o2[u2];)a2=!a2;return a2?"|":" |"}).split(m.splitPipe),r2=0;if(n2[0].trim()||n2.shift(),n2.length>0&&!n2.at(-1)?.trim()&&n2.pop(),e3)if(n2.length>e3)n2.splice(e3);else for(;n2.length<e3;)n2.push("");for(;r2<n2.length;r2++)n2[r2]=n2[r2].trim().replace(m.slashPipe,"|");return n2}function z(l4,e3,t4){let n2=l4.length;if(0===n2)return"";let r2=0;for(;r2<n2;){let i2=l4.charAt(n2-r2-1);if(i2!==e3||t4){if(i2===e3||!t4)break;r2++}else r2++}return l4.slice(0,n2-r2)}function ge(l4,e3){if(-1===l4.indexOf(e3[1]))return-1;let t4=0;for(let n2=0;n2<l4.length;n2++)if("\\"===l4[n2])n2++;else if(l4[n2]===e3[0])t4++;else if(l4[n2]===e3[1]&&(t4--,t4<0))return n2;return t4>0?-2:-1}function fe(l4,e3,t4,n2,r2){let i2=e3.href,s2=e3.title||null,o2=l4[1].replace(r2.other.outputLinkReplace,"$1");n2.state.inLink=!0;let a2={type:"!"===l4[0].charAt(0)?"image":"link",raw:t4,href:i2,title:s2,text:o2,tokens:n2.inlineTokens(o2)};return n2.state.inLink=!1,a2}function Je(l4,e3,t4){let n2=l4.match(t4.other.indentCodeCompensation);if(null===n2)return e3;let r2=n2[1];return e3.split("\n").map(i2=>{let s2=i2.match(t4.other.beginningSpace);if(null===s2)return i2;let[o2]=s2;return o2.length>=r2.length?i2.slice(r2.length):i2}).join("\n")}function d(l4,e3){return _.parse(l4,e3)}var init_marked_esm=__esm({"../../node_modules/.pnpm/marked@16.3.0/node_modules/marked/lib/marked.esm.js"(){__name(L,"L"),O={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null},__name(G,"G"),E={exec:__name(()=>null,"exec")},__name(h,"h"),m={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:__name(l4=>new RegExp(`^( {0,3}${l4})((?:[\t ][^\\n]*)?(?:\\n|$))`),"listItemRegex"),nextBulletRegex:__name(l4=>new RegExp(`^ {0,${Math.min(3,l4-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),"nextBulletRegex"),hrRegex:__name(l4=>new RegExp(`^ {0,${Math.min(3,l4-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),"hrRegex"),fencesBeginRegex:__name(l4=>new RegExp(`^ {0,${Math.min(3,l4-1)}}(?:\`\`\`|~~~)`),"fencesBeginRegex"),headingBeginRegex:__name(l4=>new RegExp(`^ {0,${Math.min(3,l4-1)}}#`),"headingBeginRegex"),htmlBeginRegex:__name(l4=>new RegExp(`^ {0,${Math.min(3,l4-1)}}<(?:[a-z].*>|!--)`,"i"),"htmlBeginRegex")},xe=/^(?:[ \t]*(?:\n|$))+/,be=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Re=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,C=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Oe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,j=/(?:[*+-]|\d{1,9}[.)])/,ie=h(se=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,j).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Te=h(se).replace(/bull/g,j).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),F=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,we=/^[^\n]+/,Q=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ye=h(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Q).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Pe=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,j).getRegex(),v="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Se=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",U).replace("tag",v).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),oe=h(F).replace("hr",C).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v).getRegex(),$e=h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",oe).getRegex(),K2={blockquote:$e,code:be,def:ye,fences:Re,heading:Oe,hr:C,html:Se,lheading:ie,list:Pe,newline:xe,paragraph:oe,table:E,text:we},re2=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",C).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v).getRegex(),_e={...K2,lheading:Te,table:re2,paragraph:h(F).replace("hr",C).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",re2).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v).getRegex()},Le={...K2,html:h("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",U).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:E,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(F).replace("hr",C).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ie).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Me=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ze=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ae=/^( {2,}|\\)\n(?!\s*$)/,Ae=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,D2=/[\p{P}\p{S}]/u,W=/[\s\p{P}\p{S}]/u,le=/[^\s\p{P}\p{S}]/u,Ee=h(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,W).getRegex(),ue=/(?!~)[\p{P}\p{S}]/u,Ce=/(?!~)[\s\p{P}\p{S}]/u,Ie=/(?:[^\s\p{P}\p{S}]|~)/u,Be=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,qe=h(pe=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,D2).getRegex(),ve=h(pe,"u").replace(/punct/g,ue).getRegex(),De=h(ce="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,le).replace(/punctSpace/g,W).replace(/punct/g,D2).getRegex(),He=h(ce,"gu").replace(/notPunctSpace/g,Ie).replace(/punctSpace/g,Ce).replace(/punct/g,ue).getRegex(),Ze=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,le).replace(/punctSpace/g,W).replace(/punct/g,D2).getRegex(),Ge=h(/\\(punct)/,"gu").replace(/punct/g,D2).getRegex(),Ne=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),je=h(U).replace("(?:--\x3e|$)","--\x3e").getRegex(),Fe=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",je).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),q=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Qe=h(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",q).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),he=h(/^!?\[(label)\]\[(ref)\]/).replace("label",q).replace("ref",Q).getRegex(),de=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",Q).getRegex(),Ue=h("reflink|nolink(?!\\()","g").replace("reflink",he).replace("nolink",de).getRegex(),X2={_backpedal:E,anyPunctuation:Ge,autolink:Ne,blockSkip:Be,br:ae,code:ze,del:E,emStrongLDelim:qe,emStrongRDelimAst:De,emStrongRDelimUnd:Ze,escape:Me,link:Qe,nolink:de,punctuation:Ee,reflink:he,reflinkSearch:Ue,tag:Fe,text:Ae,url:E},Ke={...X2,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",q).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q).getRegex()},N={...X2,emStrongRDelimAst:He,emStrongLDelim:ve,url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},We={...N,br:h(ae).replace("{2,}","*").getRegex(),text:h(N.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},I={normal:K2,gfm:_e,pedantic:Le},M={normal:X2,gfm:N,breaks:We,pedantic:Ke},Xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ke=__name(l4=>Xe[l4],"ke"),__name(w,"w"),__name(J,"J"),__name(V,"V"),__name(z,"z"),__name(ge,"ge"),__name(fe,"fe"),__name(Je,"Je"),y2=class{static{__name(this,"y")}options;rules;lexer;constructor(e3){this.options=e3||O}space(e3){let t4=this.rules.block.newline.exec(e3);if(t4&&t4[0].length>0)return{type:"space",raw:t4[0]}}code(e3){let t4=this.rules.block.code.exec(e3);if(t4){let n2=t4[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t4[0],codeBlockStyle:"indented",text:this.options.pedantic?n2:z(n2,"\n")}}}fences(e3){let t4=this.rules.block.fences.exec(e3);if(t4){let n2=t4[0],r2=Je(n2,t4[3]||"",this.rules);return{type:"code",raw:n2,lang:t4[2]?t4[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t4[2],text:r2}}}heading(e3){let t4=this.rules.block.heading.exec(e3);if(t4){let n2=t4[2].trim();if(this.rules.other.endingHash.test(n2)){let r2=z(n2,"#");(this.options.pedantic||!r2||this.rules.other.endingSpaceChar.test(r2))&&(n2=r2.trim())}return{type:"heading",raw:t4[0],depth:t4[1].length,text:n2,tokens:this.lexer.inline(n2)}}}hr(e3){let t4=this.rules.block.hr.exec(e3);if(t4)return{type:"hr",raw:z(t4[0],"\n")}}blockquote(e3){let t4=this.rules.block.blockquote.exec(e3);if(t4){let n2=z(t4[0],"\n").split("\n"),r2="",i2="",s2=[];for(;n2.length>0;){let u2,o2=!1,a2=[];for(u2=0;u2<n2.length;u2++)if(this.rules.other.blockquoteStart.test(n2[u2]))a2.push(n2[u2]),o2=!0;else{if(o2)break;a2.push(n2[u2])}n2=n2.slice(u2);let p3=a2.join("\n"),c3=p3.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r2=r2?`${r2}\n${p3}`:p3,i2=i2?`${i2}\n${c3}`:c3;let f2=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c3,s2,!0),this.lexer.state.top=f2,0===n2.length)break;let k2=s2.at(-1);if("code"===k2?.type)break;if("blockquote"===k2?.type){let x5=k2,g2=x5.raw+"\n"+n2.join("\n"),T3=this.blockquote(g2);s2[s2.length-1]=T3,r2=r2.substring(0,r2.length-x5.raw.length)+T3.raw,i2=i2.substring(0,i2.length-x5.text.length)+T3.text;break}if("list"===k2?.type){let x5=k2,g2=x5.raw+"\n"+n2.join("\n"),T3=this.list(g2);s2[s2.length-1]=T3,r2=r2.substring(0,r2.length-k2.raw.length)+T3.raw,i2=i2.substring(0,i2.length-x5.raw.length)+T3.raw,n2=g2.substring(s2.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:r2,tokens:s2,text:i2}}}list(e3){let t4=this.rules.block.list.exec(e3);if(t4){let n2=t4[1].trim(),r2=n2.length>1,i2={type:"list",raw:"",ordered:r2,start:r2?+n2.slice(0,-1):"",loose:!1,items:[]};n2=r2?`\\d{1,9}\\${n2.slice(-1)}`:`\\${n2}`,this.options.pedantic&&(n2=r2?n2:"[*+-]");let s2=this.rules.other.listItemRegex(n2),o2=!1;for(;e3;){let u2=!1,p3="",c3="";if(!(t4=s2.exec(e3))||this.rules.block.hr.test(e3))break;p3=t4[0],e3=e3.substring(p3.length);let f2=t4[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,H2=>" ".repeat(3*H2.length)),k2=e3.split("\n",1)[0],x5=!f2.trim(),g2=0;if(this.options.pedantic?(g2=2,c3=f2.trimStart()):x5?g2=t4[1].length+1:(g2=t4[2].search(this.rules.other.nonSpaceChar),g2=g2>4?1:g2,c3=f2.slice(g2),g2+=t4[1].length),x5&&this.rules.other.blankLine.test(k2)&&(p3+=k2+"\n",e3=e3.substring(k2.length+1),u2=!0),!u2){let H2=this.rules.other.nextBulletRegex(g2),ee=this.rules.other.hrRegex(g2),te=this.rules.other.fencesBeginRegex(g2),ne=this.rules.other.headingBeginRegex(g2),me=this.rules.other.htmlBeginRegex(g2);for(;e3;){let A2,Z2=e3.split("\n",1)[0];if(k2=Z2,this.options.pedantic?(k2=k2.replace(this.rules.other.listReplaceNesting,"  "),A2=k2):A2=k2.replace(this.rules.other.tabCharGlobal,"    "),te.test(k2)||ne.test(k2)||me.test(k2)||H2.test(k2)||ee.test(k2))break;if(A2.search(this.rules.other.nonSpaceChar)>=g2||!k2.trim())c3+="\n"+A2.slice(g2);else{if(x5||f2.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||te.test(f2)||ne.test(f2)||ee.test(f2))break;c3+="\n"+k2}!x5&&!k2.trim()&&(x5=!0),p3+=Z2+"\n",e3=e3.substring(Z2.length+1),f2=A2.slice(g2)}}i2.loose||(o2?i2.loose=!0:this.rules.other.doubleBlankLine.test(p3)&&(o2=!0));let Y3,T3=null;this.options.gfm&&(T3=this.rules.other.listIsTask.exec(c3),T3&&(Y3="[ ] "!==T3[0],c3=c3.replace(this.rules.other.listReplaceTask,""))),i2.items.push({type:"list_item",raw:p3,task:!!T3,checked:Y3,loose:!1,text:c3,tokens:[]}),i2.raw+=p3}let a2=i2.items.at(-1);if(!a2)return;a2.raw=a2.raw.trimEnd(),a2.text=a2.text.trimEnd(),i2.raw=i2.raw.trimEnd();for(let u2=0;u2<i2.items.length;u2++)if(this.lexer.state.top=!1,i2.items[u2].tokens=this.lexer.blockTokens(i2.items[u2].text,[]),!i2.loose){let p3=i2.items[u2].tokens.filter(f2=>"space"===f2.type),c3=p3.length>0&&p3.some(f2=>this.rules.other.anyLine.test(f2.raw));i2.loose=c3}if(i2.loose)for(let u2=0;u2<i2.items.length;u2++)i2.items[u2].loose=!0;return i2}}html(e3){let t4=this.rules.block.html.exec(e3);if(t4)return{type:"html",block:!0,raw:t4[0],pre:"pre"===t4[1]||"script"===t4[1]||"style"===t4[1],text:t4[0]}}def(e3){let t4=this.rules.block.def.exec(e3);if(t4){let n2=t4[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r2=t4[2]?t4[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i2=t4[3]?t4[3].substring(1,t4[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t4[3];return{type:"def",tag:n2,raw:t4[0],href:r2,title:i2}}}table(e3){let t4=this.rules.block.table.exec(e3);if(!t4||!this.rules.other.tableDelimiter.test(t4[2]))return;let n2=V(t4[1]),r2=t4[2].replace(this.rules.other.tableAlignChars,"").split("|"),i2=t4[3]?.trim()?t4[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],s2={type:"table",raw:t4[0],header:[],align:[],rows:[]};if(n2.length===r2.length){for(let o2 of r2)this.rules.other.tableAlignRight.test(o2)?s2.align.push("right"):this.rules.other.tableAlignCenter.test(o2)?s2.align.push("center"):this.rules.other.tableAlignLeft.test(o2)?s2.align.push("left"):s2.align.push(null);for(let o2=0;o2<n2.length;o2++)s2.header.push({text:n2[o2],tokens:this.lexer.inline(n2[o2]),header:!0,align:s2.align[o2]});for(let o2 of i2)s2.rows.push(V(o2,s2.header.length).map((a2,u2)=>({text:a2,tokens:this.lexer.inline(a2),header:!1,align:s2.align[u2]})));return s2}}lheading(e3){let t4=this.rules.block.lheading.exec(e3);if(t4)return{type:"heading",raw:t4[0],depth:"="===t4[2].charAt(0)?1:2,text:t4[1],tokens:this.lexer.inline(t4[1])}}paragraph(e3){let t4=this.rules.block.paragraph.exec(e3);if(t4){let n2="\n"===t4[1].charAt(t4[1].length-1)?t4[1].slice(0,-1):t4[1];return{type:"paragraph",raw:t4[0],text:n2,tokens:this.lexer.inline(n2)}}}text(e3){let t4=this.rules.block.text.exec(e3);if(t4)return{type:"text",raw:t4[0],text:t4[0],tokens:this.lexer.inline(t4[0])}}escape(e3){let t4=this.rules.inline.escape.exec(e3);if(t4)return{type:"escape",raw:t4[0],text:t4[1]}}tag(e3){let t4=this.rules.inline.tag.exec(e3);if(t4)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t4[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t4[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t4[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t4[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t4[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t4[0]}}link(e3){let t4=this.rules.inline.link.exec(e3);if(t4){let n2=t4[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n2)){if(!this.rules.other.endAngleBracket.test(n2))return;let s2=z(n2.slice(0,-1),"\\");if((n2.length-s2.length)%2==0)return}else{let s2=ge(t4[2],"()");if(-2===s2)return;if(s2>-1){let a2=(0===t4[0].indexOf("!")?5:4)+t4[1].length+s2;t4[2]=t4[2].substring(0,s2),t4[0]=t4[0].substring(0,a2).trim(),t4[3]=""}}let r2=t4[2],i2="";if(this.options.pedantic){let s2=this.rules.other.pedanticHrefTitle.exec(r2);s2&&(r2=s2[1],i2=s2[3])}else i2=t4[3]?t4[3].slice(1,-1):"";return r2=r2.trim(),this.rules.other.startAngleBracket.test(r2)&&(r2=this.options.pedantic&&!this.rules.other.endAngleBracket.test(n2)?r2.slice(1):r2.slice(1,-1)),fe(t4,{href:r2&&r2.replace(this.rules.inline.anyPunctuation,"$1"),title:i2&&i2.replace(this.rules.inline.anyPunctuation,"$1")},t4[0],this.lexer,this.rules)}}reflink(e3,t4){let n2;if((n2=this.rules.inline.reflink.exec(e3))||(n2=this.rules.inline.nolink.exec(e3))){let i2=t4[(n2[2]||n2[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!i2){let s2=n2[0].charAt(0);return{type:"text",raw:s2,text:s2}}return fe(n2,i2,n2[0],this.lexer,this.rules)}}emStrong(e3,t4,n2=""){let r2=this.rules.inline.emStrongLDelim.exec(e3);if(!(!r2||r2[3]&&n2.match(this.rules.other.unicodeAlphaNumeric))&&(!r2[1]&&!r2[2]||!n2||this.rules.inline.punctuation.exec(n2))){let o2,a2,s2=[...r2[0]].length-1,u2=s2,p3=0,c3="*"===r2[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c3.lastIndex=0,t4=t4.slice(-1*e3.length+s2);null!=(r2=c3.exec(t4));){if(o2=r2[1]||r2[2]||r2[3]||r2[4]||r2[5]||r2[6],!o2)continue;if(a2=[...o2].length,r2[3]||r2[4]){u2+=a2;continue}if((r2[5]||r2[6])&&s2%3&&!((s2+a2)%3)){p3+=a2;continue}if(u2-=a2,u2>0)continue;a2=Math.min(a2,a2+u2+p3);let f2=[...r2[0]][0].length,k2=e3.slice(0,s2+r2.index+f2+a2);if(Math.min(s2,a2)%2){let g2=k2.slice(1,-1);return{type:"em",raw:k2,text:g2,tokens:this.lexer.inlineTokens(g2)}}let x5=k2.slice(2,-2);return{type:"strong",raw:k2,text:x5,tokens:this.lexer.inlineTokens(x5)}}}}codespan(e3){let t4=this.rules.inline.code.exec(e3);if(t4){let n2=t4[2].replace(this.rules.other.newLineCharGlobal," "),r2=this.rules.other.nonSpaceChar.test(n2),i2=this.rules.other.startingSpaceChar.test(n2)&&this.rules.other.endingSpaceChar.test(n2);return r2&&i2&&(n2=n2.substring(1,n2.length-1)),{type:"codespan",raw:t4[0],text:n2}}}br(e3){let t4=this.rules.inline.br.exec(e3);if(t4)return{type:"br",raw:t4[0]}}del(e3){let t4=this.rules.inline.del.exec(e3);if(t4)return{type:"del",raw:t4[0],text:t4[2],tokens:this.lexer.inlineTokens(t4[2])}}autolink(e3){let t4=this.rules.inline.autolink.exec(e3);if(t4){let n2,r2;return"@"===t4[2]?(n2=t4[1],r2="mailto:"+n2):(n2=t4[1],r2=n2),{type:"link",raw:t4[0],text:n2,href:r2,tokens:[{type:"text",raw:n2,text:n2}]}}}url(e3){let t4;if(t4=this.rules.inline.url.exec(e3)){let n2,r2;if("@"===t4[2])n2=t4[0],r2="mailto:"+n2;else{let i2;do{i2=t4[0],t4[0]=this.rules.inline._backpedal.exec(t4[0])?.[0]??""}while(i2!==t4[0]);n2=t4[0],r2="www."===t4[1]?"http://"+t4[0]:t4[0]}return{type:"link",raw:t4[0],text:n2,href:r2,tokens:[{type:"text",raw:n2,text:n2}]}}}inlineText(e3){let t4=this.rules.inline.text.exec(e3);if(t4){let n2=this.lexer.state.inRawBlock;return{type:"text",raw:t4[0],text:t4[0],escaped:n2}}}},b=class l{static{__name(this,"l")}tokens;options;state;tokenizer;inlineQueue;constructor(e3){this.tokens=[],this.tokens.links=Object.create(null),this.options=e3||O,this.options.tokenizer=this.options.tokenizer||new y2,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t4={other:m,block:I.normal,inline:M.normal};this.options.pedantic?(t4.block=I.pedantic,t4.inline=M.pedantic):this.options.gfm&&(t4.block=I.gfm,this.options.breaks?t4.inline=M.breaks:t4.inline=M.gfm),this.tokenizer.rules=t4}static get rules(){return{block:I,inline:M}}static lex(e3,t4){return new l(t4).lex(e3)}static lexInline(e3,t4){return new l(t4).inlineTokens(e3)}lex(e3){e3=e3.replace(m.carriageReturn,"\n"),this.blockTokens(e3,this.tokens);for(let t4=0;t4<this.inlineQueue.length;t4++){let n2=this.inlineQueue[t4];this.inlineTokens(n2.src,n2.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e3,t4=[],n2=!1){for(this.options.pedantic&&(e3=e3.replace(m.tabCharGlobal,"    ").replace(m.spaceLine,""));e3;){let r2;if(this.options.extensions?.block?.some(s2=>!!(r2=s2.call({lexer:this},e3,t4))&&(e3=e3.substring(r2.raw.length),t4.push(r2),!0)))continue;if(r2=this.tokenizer.space(e3)){e3=e3.substring(r2.raw.length);let s2=t4.at(-1);1===r2.raw.length&&void 0!==s2?s2.raw+="\n":t4.push(r2);continue}if(r2=this.tokenizer.code(e3)){e3=e3.substring(r2.raw.length);let s2=t4.at(-1);"paragraph"===s2?.type||"text"===s2?.type?(s2.raw+=(s2.raw.endsWith("\n")?"":"\n")+r2.raw,s2.text+="\n"+r2.text,this.inlineQueue.at(-1).src=s2.text):t4.push(r2);continue}if(r2=this.tokenizer.fences(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.heading(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.hr(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.blockquote(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.list(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.html(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.def(e3)){e3=e3.substring(r2.raw.length);let s2=t4.at(-1);"paragraph"===s2?.type||"text"===s2?.type?(s2.raw+=(s2.raw.endsWith("\n")?"":"\n")+r2.raw,s2.text+="\n"+r2.raw,this.inlineQueue.at(-1).src=s2.text):this.tokens.links[r2.tag]||(this.tokens.links[r2.tag]={href:r2.href,title:r2.title},t4.push(r2));continue}if(r2=this.tokenizer.table(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}if(r2=this.tokenizer.lheading(e3)){e3=e3.substring(r2.raw.length),t4.push(r2);continue}let i2=e3;if(this.options.extensions?.startBlock){let a2,s2=1/0,o2=e3.slice(1);this.options.extensions.startBlock.forEach(u2=>{a2=u2.call({lexer:this},o2),"number"==typeof a2&&a2>=0&&(s2=Math.min(s2,a2))}),s2<1/0&&s2>=0&&(i2=e3.substring(0,s2+1))}if(this.state.top&&(r2=this.tokenizer.paragraph(i2))){let s2=t4.at(-1);n2&&"paragraph"===s2?.type?(s2.raw+=(s2.raw.endsWith("\n")?"":"\n")+r2.raw,s2.text+="\n"+r2.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s2.text):t4.push(r2),n2=i2.length!==e3.length,e3=e3.substring(r2.raw.length);continue}if(r2=this.tokenizer.text(e3)){e3=e3.substring(r2.raw.length);let s2=t4.at(-1);"text"===s2?.type?(s2.raw+=(s2.raw.endsWith("\n")?"":"\n")+r2.raw,s2.text+="\n"+r2.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s2.text):t4.push(r2);continue}if(e3){let s2="Infinite loop on byte: "+e3.charCodeAt(0);if(this.options.silent){console.error(s2);break}throw new Error(s2)}}return this.state.top=!0,t4}inline(e3,t4=[]){return this.inlineQueue.push({src:e3,tokens:t4}),t4}inlineTokens(e3,t4=[]){let n2=e3,r2=null;if(this.tokens.links){let o2=Object.keys(this.tokens.links);if(o2.length>0)for(;null!=(r2=this.tokenizer.rules.inline.reflinkSearch.exec(n2));)o2.includes(r2[0].slice(r2[0].lastIndexOf("[")+1,-1))&&(n2=n2.slice(0,r2.index)+"["+"a".repeat(r2[0].length-2)+"]"+n2.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r2=this.tokenizer.rules.inline.anyPunctuation.exec(n2));)n2=n2.slice(0,r2.index)+"++"+n2.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r2=this.tokenizer.rules.inline.blockSkip.exec(n2));)n2=n2.slice(0,r2.index)+"["+"a".repeat(r2[0].length-2)+"]"+n2.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n2=this.options.hooks?.emStrongMask?.call({lexer:this},n2)??n2;let i2=!1,s2="";for(;e3;){let o2;if(i2||(s2=""),i2=!1,this.options.extensions?.inline?.some(u2=>!!(o2=u2.call({lexer:this},e3,t4))&&(e3=e3.substring(o2.raw.length),t4.push(o2),!0)))continue;if(o2=this.tokenizer.escape(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.tag(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.link(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.reflink(e3,this.tokens.links)){e3=e3.substring(o2.raw.length);let u2=t4.at(-1);"text"===o2.type&&"text"===u2?.type?(u2.raw+=o2.raw,u2.text+=o2.text):t4.push(o2);continue}if(o2=this.tokenizer.emStrong(e3,n2,s2)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.codespan(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.br(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.del(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(o2=this.tokenizer.autolink(e3)){e3=e3.substring(o2.raw.length),t4.push(o2);continue}if(!this.state.inLink&&(o2=this.tokenizer.url(e3))){e3=e3.substring(o2.raw.length),t4.push(o2);continue}let a2=e3;if(this.options.extensions?.startInline){let c3,u2=1/0,p3=e3.slice(1);this.options.extensions.startInline.forEach(f2=>{c3=f2.call({lexer:this},p3),"number"==typeof c3&&c3>=0&&(u2=Math.min(u2,c3))}),u2<1/0&&u2>=0&&(a2=e3.substring(0,u2+1))}if(o2=this.tokenizer.inlineText(a2)){e3=e3.substring(o2.raw.length),"_"!==o2.raw.slice(-1)&&(s2=o2.raw.slice(-1)),i2=!0;let u2=t4.at(-1);"text"===u2?.type?(u2.raw+=o2.raw,u2.text+=o2.text):t4.push(o2);continue}if(e3){let u2="Infinite loop on byte: "+e3.charCodeAt(0);if(this.options.silent){console.error(u2);break}throw new Error(u2)}}return t4}},P=class{static{__name(this,"P")}options;parser;constructor(e3){this.options=e3||O}space(e3){return""}code({text:e3,lang:t4,escaped:n2}){let r2=(t4||"").match(m.notSpaceStart)?.[0],i2=e3.replace(m.endingNewline,"")+"\n";return r2?'<pre><code class="language-'+w(r2)+'">'+(n2?i2:w(i2,!0))+"</code></pre>\n":"<pre><code>"+(n2?i2:w(i2,!0))+"</code></pre>\n"}blockquote({tokens:e3}){return`<blockquote>\n${this.parser.parse(e3)}</blockquote>\n`}html({text:e3}){return e3}def(e3){return""}heading({tokens:e3,depth:t4}){return`<h${t4}>${this.parser.parseInline(e3)}</h${t4}>\n`}hr(e3){return"<hr>\n"}list(e3){let t4=e3.ordered,n2=e3.start,r2="";for(let o2=0;o2<e3.items.length;o2++){let a2=e3.items[o2];r2+=this.listitem(a2)}let i2=t4?"ol":"ul";return"<"+i2+(t4&&1!==n2?' start="'+n2+'"':"")+">\n"+r2+"</"+i2+">\n"}listitem(e3){let t4="";if(e3.task){let n2=this.checkbox({checked:!!e3.checked});e3.loose?"paragraph"===e3.tokens[0]?.type?(e3.tokens[0].text=n2+" "+e3.tokens[0].text,e3.tokens[0].tokens&&e3.tokens[0].tokens.length>0&&"text"===e3.tokens[0].tokens[0].type&&(e3.tokens[0].tokens[0].text=n2+" "+w(e3.tokens[0].tokens[0].text),e3.tokens[0].tokens[0].escaped=!0)):e3.tokens.unshift({type:"text",raw:n2+" ",text:n2+" ",escaped:!0}):t4+=n2+" "}return t4+=this.parser.parse(e3.tokens,!!e3.loose),`<li>${t4}</li>\n`}checkbox({checked:e3}){return"<input "+(e3?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e3}){return`<p>${this.parser.parseInline(e3)}</p>\n`}table(e3){let t4="",n2="";for(let i2=0;i2<e3.header.length;i2++)n2+=this.tablecell(e3.header[i2]);t4+=this.tablerow({text:n2});let r2="";for(let i2=0;i2<e3.rows.length;i2++){let s2=e3.rows[i2];n2="";for(let o2=0;o2<s2.length;o2++)n2+=this.tablecell(s2[o2]);r2+=this.tablerow({text:n2})}return r2&&(r2=`<tbody>${r2}</tbody>`),"<table>\n<thead>\n"+t4+"</thead>\n"+r2+"</table>\n"}tablerow({text:e3}){return`<tr>\n${e3}</tr>\n`}tablecell(e3){let t4=this.parser.parseInline(e3.tokens),n2=e3.header?"th":"td";return(e3.align?`<${n2} align="${e3.align}">`:`<${n2}>`)+t4+`</${n2}>\n`}strong({tokens:e3}){return`<strong>${this.parser.parseInline(e3)}</strong>`}em({tokens:e3}){return`<em>${this.parser.parseInline(e3)}</em>`}codespan({text:e3}){return`<code>${w(e3,!0)}</code>`}br(e3){return"<br/>"}del({tokens:e3}){return`<del>${this.parser.parseInline(e3)}</del>`}link({href:e3,title:t4,tokens:n2}){let r2=this.parser.parseInline(n2),i2=J(e3);if(null===i2)return r2;let s2='<a href="'+(e3=i2)+'"';return t4&&(s2+=' title="'+w(t4)+'"'),s2+=">"+r2+"</a>",s2}image({href:e3,title:t4,text:n2,tokens:r2}){r2&&(n2=this.parser.parseInline(r2,this.parser.textRenderer));let i2=J(e3);if(null===i2)return w(n2);let s2=`<img src="${e3=i2}" alt="${n2}"`;return t4&&(s2+=` title="${w(t4)}"`),s2+=">",s2}text(e3){return"tokens"in e3&&e3.tokens?this.parser.parseInline(e3.tokens):"escaped"in e3&&e3.escaped?e3.text:w(e3.text)}},$=class{static{__name(this,"$")}strong({text:e3}){return e3}em({text:e3}){return e3}codespan({text:e3}){return e3}del({text:e3}){return e3}html({text:e3}){return e3}text({text:e3}){return e3}link({text:e3}){return""+e3}image({text:e3}){return""+e3}br(){return""}},R=class l2{static{__name(this,"l")}options;renderer;textRenderer;constructor(e3){this.options=e3||O,this.options.renderer=this.options.renderer||new P,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $}static parse(e3,t4){return new l2(t4).parse(e3)}static parseInline(e3,t4){return new l2(t4).parseInline(e3)}parse(e3,t4=!0){let n2="";for(let r2=0;r2<e3.length;r2++){let i2=e3[r2];if(this.options.extensions?.renderers?.[i2.type]){let o2=i2,a2=this.options.extensions.renderers[o2.type].call({parser:this},o2);if(!1!==a2||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o2.type)){n2+=a2||"";continue}}let s2=i2;switch(s2.type){case"space":n2+=this.renderer.space(s2);continue;case"hr":n2+=this.renderer.hr(s2);continue;case"heading":n2+=this.renderer.heading(s2);continue;case"code":n2+=this.renderer.code(s2);continue;case"table":n2+=this.renderer.table(s2);continue;case"blockquote":n2+=this.renderer.blockquote(s2);continue;case"list":n2+=this.renderer.list(s2);continue;case"html":n2+=this.renderer.html(s2);continue;case"def":n2+=this.renderer.def(s2);continue;case"paragraph":n2+=this.renderer.paragraph(s2);continue;case"text":{let o2=s2,a2=this.renderer.text(o2);for(;r2+1<e3.length&&"text"===e3[r2+1].type;)o2=e3[++r2],a2+="\n"+this.renderer.text(o2);n2+=t4?this.renderer.paragraph({type:"paragraph",raw:a2,text:a2,tokens:[{type:"text",raw:a2,text:a2,escaped:!0}]}):a2;continue}default:{let o2='Token with "'+s2.type+'" type was not found.';if(this.options.silent)return console.error(o2),"";throw new Error(o2)}}}return n2}parseInline(e3,t4=this.renderer){let n2="";for(let r2=0;r2<e3.length;r2++){let i2=e3[r2];if(this.options.extensions?.renderers?.[i2.type]){let o2=this.options.extensions.renderers[i2.type].call({parser:this},i2);if(!1!==o2||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i2.type)){n2+=o2||"";continue}}let s2=i2;switch(s2.type){case"escape":case"text":n2+=t4.text(s2);break;case"html":n2+=t4.html(s2);break;case"link":n2+=t4.link(s2);break;case"image":n2+=t4.image(s2);break;case"strong":n2+=t4.strong(s2);break;case"em":n2+=t4.em(s2);break;case"codespan":n2+=t4.codespan(s2);break;case"br":n2+=t4.br(s2);break;case"del":n2+=t4.del(s2);break;default:{let o2='Token with "'+s2.type+'" type was not found.';if(this.options.silent)return console.error(o2),"";throw new Error(o2)}}}return n2}},S2=class{static{__name(this,"S")}options;block;constructor(e3){this.options=e3||O}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e3){return e3}postprocess(e3){return e3}processAllTokens(e3){return e3}emStrongMask(e3){return e3}provideLexer(){return this.block?b.lex:b.lexInline}provideParser(){return this.block?R.parse:R.parseInline}},B=class{static{__name(this,"B")}defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=R;Renderer=P;TextRenderer=$;Lexer=b;Tokenizer=y2;Hooks=S2;constructor(...e3){this.use(...e3)}walkTokens(e3,t4){let n2=[];for(let r2 of e3)switch(n2=n2.concat(t4.call(this,r2)),r2.type){case"table":{let i2=r2;for(let s2 of i2.header)n2=n2.concat(this.walkTokens(s2.tokens,t4));for(let s2 of i2.rows)for(let o2 of s2)n2=n2.concat(this.walkTokens(o2.tokens,t4));break}case"list":{let i2=r2;n2=n2.concat(this.walkTokens(i2.items,t4));break}default:{let i2=r2;this.defaults.extensions?.childTokens?.[i2.type]?this.defaults.extensions.childTokens[i2.type].forEach(s2=>{let o2=i2[s2].flat(1/0);n2=n2.concat(this.walkTokens(o2,t4))}):i2.tokens&&(n2=n2.concat(this.walkTokens(i2.tokens,t4)))}}return n2}use(...e3){let t4=this.defaults.extensions||{renderers:{},childTokens:{}};return e3.forEach(n2=>{let r2={...n2};if(r2.async=this.defaults.async||r2.async||!1,n2.extensions&&(n2.extensions.forEach(i2=>{if(!i2.name)throw new Error("extension name required");if("renderer"in i2){let s2=t4.renderers[i2.name];t4.renderers[i2.name]=s2?function(...o2){let a2=i2.renderer.apply(this,o2);return!1===a2&&(a2=s2.apply(this,o2)),a2}:i2.renderer}if("tokenizer"in i2){if(!i2.level||"block"!==i2.level&&"inline"!==i2.level)throw new Error("extension level must be 'block' or 'inline'");let s2=t4[i2.level];s2?s2.unshift(i2.tokenizer):t4[i2.level]=[i2.tokenizer],i2.start&&("block"===i2.level?t4.startBlock?t4.startBlock.push(i2.start):t4.startBlock=[i2.start]:"inline"===i2.level&&(t4.startInline?t4.startInline.push(i2.start):t4.startInline=[i2.start]))}"childTokens"in i2&&i2.childTokens&&(t4.childTokens[i2.name]=i2.childTokens)}),r2.extensions=t4),n2.renderer){let i2=this.defaults.renderer||new P(this.defaults);for(let s2 in n2.renderer){if(!(s2 in i2))throw new Error(`renderer '${s2}' does not exist`);if(["options","parser"].includes(s2))continue;let o2=s2,a2=n2.renderer[o2],u2=i2[o2];i2[o2]=(...p3)=>{let c3=a2.apply(i2,p3);return!1===c3&&(c3=u2.apply(i2,p3)),c3||""}}r2.renderer=i2}if(n2.tokenizer){let i2=this.defaults.tokenizer||new y2(this.defaults);for(let s2 in n2.tokenizer){if(!(s2 in i2))throw new Error(`tokenizer '${s2}' does not exist`);if(["options","rules","lexer"].includes(s2))continue;let o2=s2,a2=n2.tokenizer[o2],u2=i2[o2];i2[o2]=(...p3)=>{let c3=a2.apply(i2,p3);return!1===c3&&(c3=u2.apply(i2,p3)),c3}}r2.tokenizer=i2}if(n2.hooks){let i2=this.defaults.hooks||new S2;for(let s2 in n2.hooks){if(!(s2 in i2))throw new Error(`hook '${s2}' does not exist`);if(["options","block"].includes(s2))continue;let o2=s2,a2=n2.hooks[o2],u2=i2[o2];S2.passThroughHooks.has(s2)?i2[o2]=p3=>{if(this.defaults.async&&S2.passThroughHooksRespectAsync.has(s2))return Promise.resolve(a2.call(i2,p3)).then(f2=>u2.call(i2,f2));let c3=a2.call(i2,p3);return u2.call(i2,c3)}:i2[o2]=(...p3)=>{let c3=a2.apply(i2,p3);return!1===c3&&(c3=u2.apply(i2,p3)),c3}}r2.hooks=i2}if(n2.walkTokens){let i2=this.defaults.walkTokens,s2=n2.walkTokens;r2.walkTokens=function(o2){let a2=[];return a2.push(s2.call(this,o2)),i2&&(a2=a2.concat(i2.call(this,o2))),a2}}this.defaults={...this.defaults,...r2}}),this}setOptions(e3){return this.defaults={...this.defaults,...e3},this}lexer(e3,t4){return b.lex(e3,t4??this.defaults)}parser(e3,t4){return R.parse(e3,t4??this.defaults)}parseMarkdown(e3){return(n2,r2)=>{let i2={...r2},s2={...this.defaults,...i2},o2=this.onError(!!s2.silent,!!s2.async);if(!0===this.defaults.async&&!1===i2.async)return o2(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n2>"u"||null===n2)return o2(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n2)return o2(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n2)+", string expected"));s2.hooks&&(s2.hooks.options=s2,s2.hooks.block=e3);let a2=s2.hooks?s2.hooks.provideLexer():e3?b.lex:b.lexInline,u2=s2.hooks?s2.hooks.provideParser():e3?R.parse:R.parseInline;if(s2.async)return Promise.resolve(s2.hooks?s2.hooks.preprocess(n2):n2).then(p3=>a2(p3,s2)).then(p3=>s2.hooks?s2.hooks.processAllTokens(p3):p3).then(p3=>s2.walkTokens?Promise.all(this.walkTokens(p3,s2.walkTokens)).then(()=>p3):p3).then(p3=>u2(p3,s2)).then(p3=>s2.hooks?s2.hooks.postprocess(p3):p3).catch(o2);try{s2.hooks&&(n2=s2.hooks.preprocess(n2));let p3=a2(n2,s2);s2.hooks&&(p3=s2.hooks.processAllTokens(p3)),s2.walkTokens&&this.walkTokens(p3,s2.walkTokens);let c3=u2(p3,s2);return s2.hooks&&(c3=s2.hooks.postprocess(c3)),c3}catch(p3){return o2(p3)}}}onError(e3,t4){return n2=>{if(n2.message+="\nPlease report this to https://github.com/markedjs/marked.",e3){let r2="<p>An error occurred:</p><pre>"+w(n2.message+"",!0)+"</pre>";return t4?Promise.resolve(r2):r2}if(t4)return Promise.reject(n2);throw n2}}},_=new B,__name(d,"d"),d.options=d.setOptions=function(l4){return _.setOptions(l4),d.defaults=_.defaults,G(d.defaults),d},d.getDefaults=L,d.defaults=O,d.use=function(...l4){return _.use(...l4),d.defaults=_.defaults,G(d.defaults),d},d.walkTokens=function(l4,e3){return _.walkTokens(l4,e3)},d.parseInline=_.parseInline,d.Parser=R,d.parser=R.parse,d.Renderer=P,d.TextRenderer=$,d.Lexer=b,d.lexer=b.lex,d.Tokenizer=y2,d.Hooks=S2,d.parse=d,d.options,d.setOptions,d.use,d.walkTokens,d.parseInline,R.parse,b.lex}});function preprocessMarkdown(markdown,{markdownAutoWrap:markdownAutoWrap}){const withoutExtraSpaces=dedent(markdown.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"));return!1===markdownAutoWrap?withoutExtraSpaces.replace(/ /g,"&nbsp;"):withoutExtraSpaces}function markdownToLines(markdown,config5={}){const preprocessedMarkdown=preprocessMarkdown(markdown,config5),nodes5=d.lexer(preprocessedMarkdown),lines=[[]];let currentLine=0;function processNode(node2,parentType="normal"){if("text"===node2.type){node2.text.split("\n").forEach((textLine,index)=>{0!==index&&(currentLine++,lines.push([])),textLine.split(" ").forEach(word=>{(word=word.replace(/&#39;/g,"'"))&&lines[currentLine].push({content:word,type:parentType})})})}else"strong"===node2.type||"em"===node2.type?node2.tokens.forEach(contentNode=>{processNode(contentNode,node2.type)}):"html"===node2.type&&lines[currentLine].push({content:node2.text,type:"normal"})}return __name(processNode,"processNode"),nodes5.forEach(treeNode=>{"paragraph"===treeNode.type?treeNode.tokens?.forEach(contentNode=>{processNode(contentNode)}):"html"===treeNode.type?lines[currentLine].push({content:treeNode.text,type:"normal"}):lines[currentLine].push({content:treeNode.raw,type:"normal"})}),lines}function markdownToHTML(markdown,{markdownAutoWrap:markdownAutoWrap}={}){const nodes5=d.lexer(markdown);function output2(node2){return"text"===node2.type?!1===markdownAutoWrap?node2.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):node2.text.replace(/\n */g,"<br/>"):"strong"===node2.type?`<strong>${node2.tokens?.map(output2).join("")}</strong>`:"em"===node2.type?`<em>${node2.tokens?.map(output2).join("")}</em>`:"paragraph"===node2.type?`<p>${node2.tokens?.map(output2).join("")}</p>`:"space"===node2.type?"":"html"===node2.type?`${node2.text}`:"escape"===node2.type?node2.text:(log.warn(`Unsupported markdown: ${node2.type}`),node2.raw)}return __name(output2,"output"),nodes5.map(output2).join("")}var init_handle_markdown_text=__esm({"src/rendering-util/handle-markdown-text.ts"(){init_marked_esm(),init_esm(),init_logger(),__name(preprocessMarkdown,"preprocessMarkdown"),__name(markdownToLines,"markdownToLines"),__name(markdownToHTML,"markdownToHTML")}});function splitTextToChars(text4){return Intl.Segmenter?[...(new Intl.Segmenter).segment(text4)].map(s2=>s2.segment):[...text4]}function splitWordToFitWidth(checkFit,word){return splitWordToFitWidthRecursion(checkFit,[],splitTextToChars(word.content),word.type)}function splitWordToFitWidthRecursion(checkFit,usedChars,remainingChars,type3){if(0===remainingChars.length)return[{content:usedChars.join(""),type:type3},{content:"",type:type3}];const[nextChar,...rest]=remainingChars,newWord=[...usedChars,nextChar];return checkFit([{content:newWord.join(""),type:type3}])?splitWordToFitWidthRecursion(checkFit,newWord,rest,type3):(0===usedChars.length&&nextChar&&(usedChars.push(nextChar),remainingChars.shift()),[{content:usedChars.join(""),type:type3},{content:remainingChars.join(""),type:type3}])}function splitLineToFitWidth(line2,checkFit){if(line2.some(({content:content})=>content.includes("\n")))throw new Error("splitLineToFitWidth does not support newlines in the line");return splitLineToFitWidthRecursion(line2,checkFit)}function splitLineToFitWidthRecursion(words,checkFit,lines=[],newLine=[]){if(0===words.length)return newLine.length>0&&lines.push(newLine),lines.length>0?lines:[];let joiner="";" "===words[0].content&&(joiner=" ",words.shift());const nextWord=words.shift()??{content:" ",type:"normal"},lineWithNextWord=[...newLine];if(""!==joiner&&lineWithNextWord.push({content:joiner,type:"normal"}),lineWithNextWord.push(nextWord),checkFit(lineWithNextWord))return splitLineToFitWidthRecursion(words,checkFit,lines,lineWithNextWord);if(newLine.length>0)lines.push(newLine),words.unshift(nextWord);else if(nextWord.content){const[line2,rest]=splitWordToFitWidth(checkFit,nextWord);lines.push([line2]),rest.content&&words.unshift(rest)}return splitLineToFitWidthRecursion(words,checkFit,lines)}var createText,init_splitText=__esm({"src/rendering-util/splitText.ts"(){__name(splitTextToChars,"splitTextToChars"),__name(splitWordToFitWidth,"splitWordToFitWidth"),__name(splitWordToFitWidthRecursion,"splitWordToFitWidthRecursion"),__name(splitLineToFitWidth,"splitLineToFitWidth"),__name(splitLineToFitWidthRecursion,"splitLineToFitWidthRecursion")}});function applyStyle(dom,styleFn){styleFn&&dom.attr("style",styleFn)}async function addHtmlSpan(element3,node2,width3,classes3,addBackground=!1,config5=getConfig()){const fo=element3.append("foreignObject");fo.attr("width",10*width3+"px"),fo.attr("height",10*width3+"px");const div=fo.append("xhtml:div"),sanitizedLabel=hasKatex(node2.label)?await renderKatexSanitized(node2.label.replace(common_default.lineBreakRegex,"\n"),config5):sanitizeText(node2.label,config5),labelClass=node2.isNode?"nodeLabel":"edgeLabel",span=div.append("span");span.html(sanitizedLabel),applyStyle(span,node2.labelStyle),span.attr("class",`${labelClass} ${classes3}`),applyStyle(div,node2.labelStyle),div.style("display","table-cell"),div.style("white-space","nowrap"),div.style("line-height","1.5"),div.style("max-width",width3+"px"),div.style("text-align","center"),div.attr("xmlns","http://www.w3.org/1999/xhtml"),addBackground&&div.attr("class","labelBkg");let bbox=div.node().getBoundingClientRect();return bbox.width===width3&&(div.style("display","table"),div.style("white-space","break-spaces"),div.style("width",width3+"px"),bbox=div.node().getBoundingClientRect()),fo.node()}function createTspan(textElement,lineIndex,lineHeight){return textElement.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",lineIndex*lineHeight-.1+"em").attr("dy",lineHeight+"em")}function computeWidthOfText(parentNode,lineHeight,line2){const testElement=parentNode.append("text"),testSpan=createTspan(testElement,1,lineHeight);updateTextContentAndStyles(testSpan,line2);const textLength=testSpan.node().getComputedTextLength();return testElement.remove(),textLength}function computeDimensionOfText(parentNode,lineHeight,text4){const testElement=parentNode.append("text"),testSpan=createTspan(testElement,1,lineHeight);updateTextContentAndStyles(testSpan,[{content:text4,type:"normal"}]);const textDimension=testSpan.node()?.getBoundingClientRect();return textDimension&&testElement.remove(),textDimension}function createFormattedText(width3,g2,structuredText,addBackground=!1){const labelGroup=g2.append("g"),bkg=labelGroup.insert("rect").attr("class","background").attr("style","stroke: none"),textElement=labelGroup.append("text").attr("y","-10.1");let lineIndex=0;for(const line2 of structuredText){const checkWidth=__name(line3=>computeWidthOfText(labelGroup,1.1,line3)<=width3,"checkWidth"),linesUnderWidth=checkWidth(line2)?[line2]:splitLineToFitWidth(line2,checkWidth);for(const preparedLine of linesUnderWidth){updateTextContentAndStyles(createTspan(textElement,lineIndex,1.1),preparedLine),lineIndex++}}if(addBackground){const bbox=textElement.node().getBBox(),padding2=2;return bkg.attr("x",bbox.x-padding2).attr("y",bbox.y-padding2).attr("width",bbox.width+2*padding2).attr("height",bbox.height+2*padding2),labelGroup.node()}return textElement.node()}function updateTextContentAndStyles(tspan,wrappedLine){tspan.text(""),wrappedLine.forEach((word,index)=>{const innerTspan=tspan.append("tspan").attr("font-style","em"===word.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===word.type?"bold":"normal");0===index?innerTspan.text(word.content):innerTspan.text(" "+word.content)})}async function replaceIconSubstring(text4,config5={}){const pendingReplacements=[];text4.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(fullMatch,prefix,iconName)=>(pendingReplacements.push((async()=>{const registeredIconName=`${prefix}:${iconName}`;return await isIconAvailable(registeredIconName)?await getIconSVG(registeredIconName,void 0,{class:"label-icon"}):`<i class='${sanitizeText(fullMatch,config5).replace(":"," ")}'></i>`})()),fullMatch));const replacements=await Promise.all(pendingReplacements);return text4.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>replacements.shift()??"")}var labelHelper,insertLabel,updateNodeBounds,getNodeClasses,init_createText=__esm({"src/rendering-util/createText.ts"(){init_src32(),init_common(),init_logger(),init_handle_markdown_text(),init_utils2(),init_icons(),init_splitText(),init_config(),__name(applyStyle,"applyStyle"),__name(addHtmlSpan,"addHtmlSpan"),__name(createTspan,"createTspan"),__name(computeWidthOfText,"computeWidthOfText"),__name(computeDimensionOfText,"computeDimensionOfText"),__name(createFormattedText,"createFormattedText"),__name(updateTextContentAndStyles,"updateTextContentAndStyles"),__name(replaceIconSubstring,"replaceIconSubstring"),createText=__name(async(el,text4="",{style:style3="",isTitle:isTitle=!1,classes:classes3="",useHtmlLabels:useHtmlLabels=!0,isNode:isNode2=!0,width:width3=200,addSvgBackground:addSvgBackground=!1}={},config5)=>{if(log.debug("XYZ createText",text4,style3,isTitle,classes3,useHtmlLabels,isNode2,"addSvgBackground: ",addSvgBackground),useHtmlLabels){const htmlText=markdownToHTML(text4,config5),decodedReplacedText=await replaceIconSubstring(decodeEntities(htmlText),config5),inputForKatex=text4.replace(/\\\\/g,"\\"),node2={isNode:isNode2,label:hasKatex(text4)?inputForKatex:decodedReplacedText,labelStyle:style3.replace("fill:","color:")};return await addHtmlSpan(el,node2,width3,classes3,addSvgBackground,config5)}{const svgLabel=createFormattedText(width3,el,markdownToLines(text4.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),config5),!!text4&&addSvgBackground);if(isNode2){/stroke:/.exec(style3)&&(style3=style3.replace("stroke:","lineColor:"));const nodeLabelTextStyle=style3.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");select_default2(svgLabel).attr("style",nodeLabelTextStyle)}else{const edgeLabelRectStyle=style3.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");select_default2(svgLabel).select("rect").attr("style",edgeLabelRectStyle.replace(/background:/g,"fill:"));const edgeLabelTextStyle=style3.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");select_default2(svgLabel).select("text").attr("style",edgeLabelTextStyle)}return svgLabel}},"createText")}});function createPathFromPoints(points){const pointStrings=points.map((p3,i2)=>`${0===i2?"M":"L"}${p3.x},${p3.y}`);return pointStrings.push("Z"),pointStrings.join(" ")}function generateFullSineWavePoints(x1,y1,x22,y22,amplitude,numCycles){const points=[],deltaX=x22-x1,deltaY=y22-y1,cycleLength=deltaX/numCycles,frequency=2*Math.PI/cycleLength,midY=y1+deltaY/2;for(let i2=0;i2<=50;i2++){const x5=x1+i2/50*deltaX,y6=midY+amplitude*Math.sin(frequency*(x5-x1));points.push({x:x5,y:y6})}return points}function generateCirclePoints(centerX,centerY,radius2,numPoints,startAngle,endAngle){const points=[],startAngleRad=startAngle*Math.PI/180,angleStep=(endAngle*Math.PI/180-startAngleRad)/(numPoints-1);for(let i2=0;i2<numPoints;i2++){const angle2=startAngleRad+i2*angleStep,x5=centerX+radius2*Math.cos(angle2),y6=centerY+radius2*Math.sin(angle2);points.push({x:-x5,y:-y6})}return points}var intersect_node_default,init_util=__esm({"src/rendering-util/rendering-elements/shapes/util.ts"(){init_createText(),init_diagramAPI(),init_src32(),init_defaultConfig(),init_common(),init_utils2(),labelHelper=__name(async(parent4,node2,_classes)=>{let cssClasses;const useHtmlLabels=node2.useHtmlLabels||evaluate(getConfig2()?.htmlLabels);cssClasses=_classes||"node default";const shapeSvg=parent4.insert("g").attr("class",cssClasses).attr("id",node2.domId||node2.id),labelEl=shapeSvg.insert("g").attr("class","label").attr("style",handleUndefinedAttr(node2.labelStyle));let label;label=void 0===node2.label?"":"string"==typeof node2.label?node2.label:node2.label[0];const text4=await createText(labelEl,sanitizeText(decodeEntities(label),getConfig2()),{useHtmlLabels:useHtmlLabels,width:node2.width||getConfig2().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:node2.labelStyle,addSvgBackground:!!node2.icon||!!node2.img});let bbox=text4.getBBox();const halfPadding=(node2?.padding??0)/2;if(useHtmlLabels){const div=text4.children[0],dv=select_default2(text4),images=div.getElementsByTagName("img");if(images){const noImgText=""===label.replace(/<img[^>]*>/g,"").trim();await Promise.all([...images].map(img=>new Promise(res=>{function setupImage(){if(img.style.display="flex",img.style.flexDirection="column",noImgText){const bodyFontSize=getConfig2().fontSize?getConfig2().fontSize:window.getComputedStyle(document.body).fontSize,enlargingFactor=5,[parsedBodyFontSize=defaultConfig_default.fontSize]=parseFontSize(bodyFontSize),width3=parsedBodyFontSize*enlargingFactor+"px";img.style.minWidth=width3,img.style.maxWidth=width3}else img.style.width="100%";res(img)}__name(setupImage,"setupImage"),setTimeout(()=>{img.complete&&setupImage()}),img.addEventListener("error",setupImage),img.addEventListener("load",setupImage)})))}bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}return useHtmlLabels?labelEl.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"):labelEl.attr("transform","translate(0, "+-bbox.height/2+")"),node2.centerLabel&&labelEl.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"),labelEl.insert("rect",":first-child"),{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:labelEl}},"labelHelper"),insertLabel=__name(async(parent4,label,options2)=>{const useHtmlLabels=options2.useHtmlLabels||evaluate(getConfig2()?.flowchart?.htmlLabels),labelEl=parent4.insert("g").attr("class","label").attr("style",options2.labelStyle||""),text4=await createText(labelEl,sanitizeText(decodeEntities(label),getConfig2()),{useHtmlLabels:useHtmlLabels,width:options2.width||getConfig2()?.flowchart?.wrappingWidth,style:options2.labelStyle,addSvgBackground:!!options2.icon||!!options2.img});let bbox=text4.getBBox();const halfPadding=options2.padding/2;if(evaluate(getConfig2()?.flowchart?.htmlLabels)){const div=text4.children[0],dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}return useHtmlLabels?labelEl.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"):labelEl.attr("transform","translate(0, "+-bbox.height/2+")"),options2.centerLabel&&labelEl.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"),labelEl.insert("rect",":first-child"),{shapeSvg:parent4,bbox:bbox,halfPadding:halfPadding,label:labelEl}},"insertLabel"),updateNodeBounds=__name((node2,element3)=>{const bbox=element3.node().getBBox();node2.width=bbox.width,node2.height=bbox.height},"updateNodeBounds"),getNodeClasses=__name((node2,extra)=>("handDrawn"===node2.look?"rough-node":"node")+" "+node2.cssClasses+" "+(extra||""),"getNodeClasses"),__name(createPathFromPoints,"createPathFromPoints"),__name(generateFullSineWavePoints,"generateFullSineWavePoints"),__name(generateCirclePoints,"generateCirclePoints")}});function intersectNode(node2,point8){return node2.intersect(point8)}var intersect_ellipse_default,init_intersect_node=__esm({"src/rendering-util/rendering-elements/intersect/intersect-node.js"(){__name(intersectNode,"intersectNode"),intersect_node_default=intersectNode}});function intersectEllipse(node2,rx,ry,point8){var cx=node2.x,cy=node2.y,px=cx-point8.x,py=cy-point8.y,det=Math.sqrt(rx*rx*py*py+ry*ry*px*px),dx=Math.abs(rx*ry*px/det);point8.x<cx&&(dx=-dx);var dy=Math.abs(rx*ry*py/det);return point8.y<cy&&(dy=-dy),{x:cx+dx,y:cy+dy}}var intersect_circle_default,init_intersect_ellipse=__esm({"src/rendering-util/rendering-elements/intersect/intersect-ellipse.js"(){__name(intersectEllipse,"intersectEllipse"),intersect_ellipse_default=intersectEllipse}});function intersectCircle(node2,rx,point8){return intersect_ellipse_default(node2,rx,rx,point8)}var intersect_line_default,init_intersect_circle=__esm({"src/rendering-util/rendering-elements/intersect/intersect-circle.js"(){init_intersect_ellipse(),__name(intersectCircle,"intersectCircle"),intersect_circle_default=intersectCircle}});function intersectLine(p1,p22,q1,q22){{const a1=p22.y-p1.y,b1=p1.x-p22.x,c1=p22.x*p1.y-p1.x*p22.y,r3=a1*q1.x+b1*q1.y+c1,r4=a1*q22.x+b1*q22.y+c1,epsilon6=1e-6;if(0!==r3&&0!==r4&&sameSign(r3,r4))return;const a2=q22.y-q1.y,b22=q1.x-q22.x,c22=q22.x*q1.y-q1.x*q22.y,r1=a2*p1.x+b22*p1.y+c22,r2=a2*p22.x+b22*p22.y+c22;if(Math.abs(r1)<epsilon6&&Math.abs(r2)<epsilon6&&sameSign(r1,r2))return;const denom=a1*b22-a2*b1;if(0===denom)return;const offset=Math.abs(denom/2);let num=b1*c22-b22*c1;const x5=num<0?(num-offset)/denom:(num+offset)/denom;num=a2*c1-a1*c22;return{x:x5,y:num<0?(num-offset)/denom:(num+offset)/denom}}}function sameSign(r1,r2){return r1*r2>0}var intersect_polygon_default,init_intersect_line=__esm({"src/rendering-util/rendering-elements/intersect/intersect-line.js"(){__name(intersectLine,"intersectLine"),__name(sameSign,"sameSign"),intersect_line_default=intersectLine}});function intersectPolygon(node2,polyPoints,point8){let x1=node2.x,y1=node2.y,intersections=[],minX=Number.POSITIVE_INFINITY,minY=Number.POSITIVE_INFINITY;"function"==typeof polyPoints.forEach?polyPoints.forEach(function(entry){minX=Math.min(minX,entry.x),minY=Math.min(minY,entry.y)}):(minX=Math.min(minX,polyPoints.x),minY=Math.min(minY,polyPoints.y));let left3=x1-node2.width/2-minX,top2=y1-node2.height/2-minY;for(let i2=0;i2<polyPoints.length;i2++){let p1=polyPoints[i2],p22=polyPoints[i2<polyPoints.length-1?i2+1:0],intersect3=intersect_line_default(node2,point8,{x:left3+p1.x,y:top2+p1.y},{x:left3+p22.x,y:top2+p22.y});intersect3&&intersections.push(intersect3)}return intersections.length?(intersections.length>1&&intersections.sort(function(p3,q3){let pdx=p3.x-point8.x,pdy=p3.y-point8.y,distp=Math.sqrt(pdx*pdx+pdy*pdy),qdx=q3.x-point8.x,qdy=q3.y-point8.y,distq=Math.sqrt(qdx*qdx+qdy*qdy);return distp<distq?-1:distp===distq?0:1}),intersections[0]):node2}var intersect_rect_default,intersect_default,solidStateFill,compileStyles,styles2Map,isLabelStyle,styles2String,userNodeOverrides,getStrokeDashArray,o,h2,r,i,c2,l3,u,p,f,d2,g,M2,P2,tt,et,st,nt,ot,at,init_intersect_polygon=__esm({"src/rendering-util/rendering-elements/intersect/intersect-polygon.js"(){init_intersect_line(),__name(intersectPolygon,"intersectPolygon"),intersect_polygon_default=intersectPolygon}}),init_intersect_rect=__esm({"src/rendering-util/rendering-elements/intersect/intersect-rect.js"(){intersect_rect_default=__name((node2,point8)=>{var sx,sy,x5=node2.x,y6=node2.y,dx=point8.x-x5,dy=point8.y-y6,w4=node2.width/2,h3=node2.height/2;return Math.abs(dy)*w4>Math.abs(dx)*h3?(dy<0&&(h3=-h3),sx=0===dy?0:h3*dx/dy,sy=h3):(dx<0&&(w4=-w4),sx=w4,sy=0===dx?0:w4*dy/dx),{x:x5+sx,y:y6+sy}},"intersectRect")}}),init_intersect=__esm({"src/rendering-util/rendering-elements/intersect/index.js"(){init_intersect_node(),init_intersect_circle(),init_intersect_ellipse(),init_intersect_polygon(),init_intersect_rect(),intersect_default={node:intersect_node_default,circle:intersect_circle_default,ellipse:intersect_ellipse_default,polygon:intersect_polygon_default,rect:intersect_rect_default}}}),init_handDrawnShapeStyles=__esm({"src/rendering-util/rendering-elements/shapes/handDrawnShapeStyles.ts"(){init_diagramAPI(),solidStateFill=__name(color2=>{const{handDrawnSeed:handDrawnSeed}=getConfig2();return{fill:color2,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:color2,seed:handDrawnSeed}},"solidStateFill"),compileStyles=__name(node2=>{const stylesMap=styles2Map([...node2.cssCompiledStyles||[],...node2.cssStyles||[],...node2.labelStyle||[]]);return{stylesMap:stylesMap,stylesArray:[...stylesMap]}},"compileStyles"),styles2Map=__name(styles4=>{const styleMap2=new Map;return styles4.forEach(style3=>{const[key,value2]=style3.split(":");styleMap2.set(key.trim(),value2?.trim())}),styleMap2},"styles2Map"),isLabelStyle=__name(key=>"color"===key||"font-size"===key||"font-family"===key||"font-weight"===key||"font-style"===key||"text-decoration"===key||"text-align"===key||"text-transform"===key||"line-height"===key||"letter-spacing"===key||"word-spacing"===key||"text-shadow"===key||"text-overflow"===key||"white-space"===key||"word-wrap"===key||"word-break"===key||"overflow-wrap"===key||"hyphens"===key,"isLabelStyle"),styles2String=__name(node2=>{const{stylesArray:stylesArray}=compileStyles(node2),labelStyles=[],nodeStyles=[],borderStyles=[],backgroundStyles=[];return stylesArray.forEach(style3=>{const key=style3[0];isLabelStyle(key)?labelStyles.push(style3.join(":")+" !important"):(nodeStyles.push(style3.join(":")+" !important"),key.includes("stroke")&&borderStyles.push(style3.join(":")+" !important"),"fill"===key&&backgroundStyles.push(style3.join(":")+" !important"))}),{labelStyles:labelStyles.join(";"),nodeStyles:nodeStyles.join(";"),stylesArray:stylesArray,borderStyles:borderStyles,backgroundStyles:backgroundStyles}},"styles2String"),userNodeOverrides=__name((node2,options2)=>{const{themeVariables:themeVariables,handDrawnSeed:handDrawnSeed}=getConfig2(),{nodeBorder:nodeBorder,mainBkg:mainBkg}=themeVariables,{stylesMap:stylesMap}=compileStyles(node2);return Object.assign({roughness:.7,fill:stylesMap.get("fill")||mainBkg,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:stylesMap.get("stroke")||nodeBorder,seed:handDrawnSeed,strokeWidth:stylesMap.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:getStrokeDashArray(stylesMap.get("stroke-dasharray"))},options2)},"userNodeOverrides"),getStrokeDashArray=__name(strokeDasharrayStyle=>{if(!strokeDasharrayStyle)return[0,0];const dashArray=strokeDasharrayStyle.trim().split(/\s+/).map(Number);if(1===dashArray.length){const val=isNaN(dashArray[0])?0:dashArray[0];return[val,val]}return[isNaN(dashArray[0])?0:dashArray[0],isNaN(dashArray[1])?0:dashArray[1]]},"getStrokeDashArray")}});function t(t4,e3,s2){if(t4&&t4.length){const[n2,o2]=e3,a2=Math.PI/180*s2,h3=Math.cos(a2),r2=Math.sin(a2);for(const e4 of t4){const[t5,s3]=e4;e4[0]=(t5-n2)*h3-(s3-o2)*r2+n2,e4[1]=(t5-n2)*r2+(s3-o2)*h3+o2}}}function e(t4,e3){return t4[0]===e3[0]&&t4[1]===e3[1]}function s(s2,n2,o2,a2=1){const h3=o2,r2=Math.max(n2,.1),i2=s2[0]&&s2[0][0]&&"number"==typeof s2[0][0]?[s2]:s2,c3=[0,0];if(h3)for(const e3 of i2)t(e3,c3,h3);const l4=function(t4,s3,n3){const o3=[];for(const s4 of t4){const t5=[...s4];e(t5[0],t5[t5.length-1])||t5.push([t5[0][0],t5[0][1]]),t5.length>2&&o3.push(t5)}const a3=[];s3=Math.max(s3,.1);const h4=[];for(const t5 of o3)for(let e3=0;e3<t5.length-1;e3++){const s4=t5[e3],n4=t5[e3+1];if(s4[1]!==n4[1]){const t6=Math.min(s4[1],n4[1]);h4.push({ymin:t6,ymax:Math.max(s4[1],n4[1]),x:t6===s4[1]?s4[0]:n4[0],islope:(n4[0]-s4[0])/(n4[1]-s4[1])})}}if(h4.sort((t5,e3)=>t5.ymin<e3.ymin?-1:t5.ymin>e3.ymin?1:t5.x<e3.x?-1:t5.x>e3.x?1:t5.ymax===e3.ymax?0:(t5.ymax-e3.ymax)/Math.abs(t5.ymax-e3.ymax)),!h4.length)return a3;let r3=[],i3=h4[0].ymin,c4=0;for(;r3.length||h4.length;){if(h4.length){let t5=-1;for(let e3=0;e3<h4.length&&!(h4[e3].ymin>i3);e3++)t5=e3;h4.splice(0,t5+1).forEach(t6=>{r3.push({s:i3,edge:t6})})}if(r3=r3.filter(t5=>!(t5.edge.ymax<=i3)),r3.sort((t5,e3)=>t5.edge.x===e3.edge.x?0:(t5.edge.x-e3.edge.x)/Math.abs(t5.edge.x-e3.edge.x)),(1!==n3||c4%s3==0)&&r3.length>1)for(let t5=0;t5<r3.length;t5+=2){const e3=t5+1;if(e3>=r3.length)break;const s4=r3[t5].edge,n4=r3[e3].edge;a3.push([[Math.round(s4.x),i3],[Math.round(n4.x),i3]])}i3+=n3,r3.forEach(t5=>{t5.edge.x=t5.edge.x+n3*t5.edge.islope}),c4++}return a3}(i2,r2,a2);if(h3){for(const e3 of i2)t(e3,c3,-h3);!function(e3,s3,n3){const o3=[];e3.forEach(t4=>o3.push(...t4)),t(o3,s3,n3)}(l4,c3,-h3)}return l4}function n(t4,e3){var n2;const o2=e3.hachureAngle+90;let a2=e3.hachureGap;a2<0&&(a2=4*e3.strokeWidth),a2=Math.round(Math.max(a2,.1));let h3=1;return e3.roughness>=1&&((null===(n2=e3.randomizer)||void 0===n2?void 0:n2.next())||Math.random())>.7&&(h3=a2),s(t4,a2,o2,h3||1)}function a(t4){const e3=t4[0],s2=t4[1];return Math.sqrt(Math.pow(e3[0]-s2[0],2)+Math.pow(e3[1]-s2[1],2))}function k(t4,e3){return t4.type===e3}function b2(t4){const e3=[],s2=function(t5){const e4=new Array;for(;""!==t5;)if(t5.match(/^([ \t\r\n,]+)/))t5=t5.substr(RegExp.$1.length);else if(t5.match(/^([aAcChHlLmMqQsStTvVzZ])/))e4[e4.length]={type:f,text:RegExp.$1},t5=t5.substr(RegExp.$1.length);else{if(!t5.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e4[e4.length]={type:d2,text:`${parseFloat(RegExp.$1)}`},t5=t5.substr(RegExp.$1.length)}return e4[e4.length]={type:g,text:""},e4}(t4);let n2="BOD",o2=0,a2=s2[o2];for(;!k(a2,g);){let h3=0;const r2=[];if("BOD"===n2){if("M"!==a2.text&&"m"!==a2.text)return b2("M0,0"+t4);o2++,h3=M2[a2.text],n2=a2.text}else k(a2,d2)?h3=M2[n2]:(o2++,h3=M2[a2.text],n2=a2.text);if(!(o2+h3<s2.length))throw new Error("Path data ended short");for(let t5=o2;t5<o2+h3;t5++){const e4=s2[t5];if(!k(e4,d2))throw new Error("Param not a number: "+n2+","+e4.text);r2[r2.length]=+e4.text}if("number"!=typeof M2[n2])throw new Error("Bad segment: "+n2);{const t5={key:n2,data:r2};e3.push(t5),o2+=h3,a2=s2[o2],"M"===n2&&(n2="L"),"m"===n2&&(n2="l")}}return e3}function y3(t4){let e3=0,s2=0,n2=0,o2=0;const a2=[];for(const{key:h3,data:r2}of t4)switch(h3){case"M":a2.push({key:"M",data:[...r2]}),[e3,s2]=r2,[n2,o2]=r2;break;case"m":e3+=r2[0],s2+=r2[1],a2.push({key:"M",data:[e3,s2]}),n2=e3,o2=s2;break;case"L":a2.push({key:"L",data:[...r2]}),[e3,s2]=r2;break;case"l":e3+=r2[0],s2+=r2[1],a2.push({key:"L",data:[e3,s2]});break;case"C":a2.push({key:"C",data:[...r2]}),e3=r2[4],s2=r2[5];break;case"c":{const t5=r2.map((t6,n3)=>n3%2?t6+s2:t6+e3);a2.push({key:"C",data:t5}),e3=t5[4],s2=t5[5];break}case"Q":a2.push({key:"Q",data:[...r2]}),e3=r2[2],s2=r2[3];break;case"q":{const t5=r2.map((t6,n3)=>n3%2?t6+s2:t6+e3);a2.push({key:"Q",data:t5}),e3=t5[2],s2=t5[3];break}case"A":a2.push({key:"A",data:[...r2]}),e3=r2[5],s2=r2[6];break;case"a":e3+=r2[5],s2+=r2[6],a2.push({key:"A",data:[r2[0],r2[1],r2[2],r2[3],r2[4],e3,s2]});break;case"H":a2.push({key:"H",data:[...r2]}),e3=r2[0];break;case"h":e3+=r2[0],a2.push({key:"H",data:[e3]});break;case"V":a2.push({key:"V",data:[...r2]}),s2=r2[0];break;case"v":s2+=r2[0],a2.push({key:"V",data:[s2]});break;case"S":a2.push({key:"S",data:[...r2]}),e3=r2[2],s2=r2[3];break;case"s":{const t5=r2.map((t6,n3)=>n3%2?t6+s2:t6+e3);a2.push({key:"S",data:t5}),e3=t5[2],s2=t5[3];break}case"T":a2.push({key:"T",data:[...r2]}),e3=r2[0],s2=r2[1];break;case"t":e3+=r2[0],s2+=r2[1],a2.push({key:"T",data:[e3,s2]});break;case"Z":case"z":a2.push({key:"Z",data:[]}),e3=n2,s2=o2}return a2}function m2(t4){const e3=[];let s2="",n2=0,o2=0,a2=0,h3=0,r2=0,i2=0;for(const{key:c3,data:l4}of t4){switch(c3){case"M":e3.push({key:"M",data:[...l4]}),[n2,o2]=l4,[a2,h3]=l4;break;case"C":e3.push({key:"C",data:[...l4]}),n2=l4[4],o2=l4[5],r2=l4[2],i2=l4[3];break;case"L":e3.push({key:"L",data:[...l4]}),[n2,o2]=l4;break;case"H":n2=l4[0],e3.push({key:"L",data:[n2,o2]});break;case"V":o2=l4[0],e3.push({key:"L",data:[n2,o2]});break;case"S":{let t5=0,a3=0;"C"===s2||"S"===s2?(t5=n2+(n2-r2),a3=o2+(o2-i2)):(t5=n2,a3=o2),e3.push({key:"C",data:[t5,a3,...l4]}),r2=l4[0],i2=l4[1],n2=l4[2],o2=l4[3];break}case"T":{const[t5,a3]=l4;let h4=0,c4=0;"Q"===s2||"T"===s2?(h4=n2+(n2-r2),c4=o2+(o2-i2)):(h4=n2,c4=o2);const u2=n2+2*(h4-n2)/3,p3=o2+2*(c4-o2)/3,f2=t5+2*(h4-t5)/3,d3=a3+2*(c4-a3)/3;e3.push({key:"C",data:[u2,p3,f2,d3,t5,a3]}),r2=h4,i2=c4,n2=t5,o2=a3;break}case"Q":{const[t5,s3,a3,h4]=l4,c4=n2+2*(t5-n2)/3,u2=o2+2*(s3-o2)/3,p3=a3+2*(t5-a3)/3,f2=h4+2*(s3-h4)/3;e3.push({key:"C",data:[c4,u2,p3,f2,a3,h4]}),r2=t5,i2=s3,n2=a3,o2=h4;break}case"A":{const t5=Math.abs(l4[0]),s3=Math.abs(l4[1]),a3=l4[2],h4=l4[3],r3=l4[4],i3=l4[5],c4=l4[6];0===t5||0===s3?(e3.push({key:"C",data:[n2,o2,i3,c4,i3,c4]}),n2=i3,o2=c4):n2===i3&&o2===c4||(x2(n2,o2,i3,c4,t5,s3,a3,h4,r3).forEach(function(t6){e3.push({key:"C",data:t6})}),n2=i3,o2=c4);break}case"Z":e3.push({key:"Z",data:[]}),n2=a2,o2=h3}s2=c3}return e3}function w2(t4,e3,s2){return[t4*Math.cos(s2)-e3*Math.sin(s2),t4*Math.sin(s2)+e3*Math.cos(s2)]}function x2(t4,e3,s2,n2,o2,a2,h3,r2,i2,c3){const l4=(u2=h3,Math.PI*u2/180);var u2;let p3=[],f2=0,d3=0,g2=0,M3=0;if(c3)[f2,d3,g2,M3]=c3;else{[t4,e3]=w2(t4,e3,-l4),[s2,n2]=w2(s2,n2,-l4);const h4=(t4-s2)/2,c4=(e3-n2)/2;let u3=h4*h4/(o2*o2)+c4*c4/(a2*a2);u3>1&&(u3=Math.sqrt(u3),o2*=u3,a2*=u3);const p4=o2*o2,k3=a2*a2,b4=p4*k3-p4*c4*c4-k3*h4*h4,y7=p4*c4*c4+k3*h4*h4,m4=(r2===i2?-1:1)*Math.sqrt(Math.abs(b4/y7));g2=m4*o2*c4/a2+(t4+s2)/2,M3=m4*-a2*h4/o2+(e3+n2)/2,f2=Math.asin(parseFloat(((e3-M3)/a2).toFixed(9))),d3=Math.asin(parseFloat(((n2-M3)/a2).toFixed(9))),t4<g2&&(f2=Math.PI-f2),s2<g2&&(d3=Math.PI-d3),f2<0&&(f2=2*Math.PI+f2),d3<0&&(d3=2*Math.PI+d3),i2&&f2>d3&&(f2-=2*Math.PI),!i2&&d3>f2&&(d3-=2*Math.PI)}let k2=d3-f2;if(Math.abs(k2)>120*Math.PI/180){const t5=d3,e4=s2,r3=n2;d3=i2&&d3>f2?f2+120*Math.PI/180*1:f2+120*Math.PI/180*-1,p3=x2(s2=g2+o2*Math.cos(d3),n2=M3+a2*Math.sin(d3),e4,r3,o2,a2,h3,0,i2,[d3,t5,g2,M3])}k2=d3-f2;const b3=Math.cos(f2),y6=Math.sin(f2),m3=Math.cos(d3),P3=Math.sin(d3),v3=Math.tan(k2/4),S4=4/3*o2*v3,O3=4/3*a2*v3,L3=[t4,e3],T3=[t4+S4*y6,e3-O3*b3],D4=[s2+S4*P3,n2-O3*m3],A2=[s2,n2];if(T3[0]=2*L3[0]-T3[0],T3[1]=2*L3[1]-T3[1],c3)return[T3,D4,A2].concat(p3);{p3=[T3,D4,A2].concat(p3);const t5=[];for(let e4=0;e4<p3.length;e4+=3){const s3=w2(p3[e4][0],p3[e4][1],l4),n3=w2(p3[e4+1][0],p3[e4+1][1],l4),o3=w2(p3[e4+2][0],p3[e4+2][1],l4);t5.push([s3[0],s3[1],n3[0],n3[1],o3[0],o3[1]])}return t5}}function v2(t4,e3,s2,n2,o2){return{type:"path",ops:$2(t4,e3,s2,n2,o2)}}function S3(t4,e3,s2){const n2=(t4||[]).length;if(n2>2){const o2=[];for(let e4=0;e4<n2-1;e4++)o2.push(...$2(t4[e4][0],t4[e4][1],t4[e4+1][0],t4[e4+1][1],s2));return e3&&o2.push(...$2(t4[n2-1][0],t4[n2-1][1],t4[0][0],t4[0][1],s2)),{type:"path",ops:o2}}return 2===n2?v2(t4[0][0],t4[0][1],t4[1][0],t4[1][1],s2):{type:"path",ops:[]}}function O2(t4,e3,s2,n2,o2){return S3([[t4,e3],[t4+s2,e3],[t4+s2,e3+n2],[t4,e3+n2]],!0,o2)}function L2(t4,e3){if(t4.length){const s2="number"==typeof t4[0][0]?[t4]:t4,n2=j2(s2[0],1*(1+.2*e3.roughness),e3),o2=e3.disableMultiStroke?[]:j2(s2[0],1.5*(1+.22*e3.roughness),z2(e3));for(let t5=1;t5<s2.length;t5++){const a2=s2[t5];if(a2.length){const t6=j2(a2,1*(1+.2*e3.roughness),e3),s3=e3.disableMultiStroke?[]:j2(a2,1.5*(1+.22*e3.roughness),z2(e3));for(const e4 of t6)"move"!==e4.op&&n2.push(e4);for(const t7 of s3)"move"!==t7.op&&o2.push(t7)}}return{type:"path",ops:n2.concat(o2)}}return{type:"path",ops:[]}}function T2(t4,e3,s2){const n2=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t4/2,2)+Math.pow(e3/2,2))/2)),o2=Math.ceil(Math.max(s2.curveStepCount,s2.curveStepCount/Math.sqrt(200)*n2)),a2=2*Math.PI/o2;let h3=Math.abs(t4/2),r2=Math.abs(e3/2);const i2=1-s2.curveFitting;return h3+=G2(h3*i2,s2),r2+=G2(r2*i2,s2),{increment:a2,rx:h3,ry:r2}}function D3(t4,e3,s2,n2){const[o2,a2]=F2(n2.increment,t4,e3,n2.rx,n2.ry,1,n2.increment*E2(.1,E2(.4,1,s2),s2),s2);let h3=q2(o2,null,s2);if(!s2.disableMultiStroke&&0!==s2.roughness){const[o3]=F2(n2.increment,t4,e3,n2.rx,n2.ry,1.5,0,s2),a3=q2(o3,null,s2);h3=h3.concat(a3)}return{estimatedPoints:a2,opset:{type:"path",ops:h3}}}function A(t4,e3,s2,n2,o2,a2,h3,r2,i2){const c3=t4,l4=e3;let u2=Math.abs(s2/2),p3=Math.abs(n2/2);u2+=G2(.01*u2,i2),p3+=G2(.01*p3,i2);let f2=o2,d3=a2;for(;f2<0;)f2+=2*Math.PI,d3+=2*Math.PI;d3-f2>2*Math.PI&&(f2=0,d3=2*Math.PI);const g2=2*Math.PI/i2.curveStepCount,M3=Math.min(g2/2,(d3-f2)/2),k2=V2(M3,c3,l4,u2,p3,f2,d3,1,i2);if(!i2.disableMultiStroke){const t5=V2(M3,c3,l4,u2,p3,f2,d3,1.5,i2);k2.push(...t5)}return h3&&(r2?k2.push(...$2(c3,l4,c3+u2*Math.cos(f2),l4+p3*Math.sin(f2),i2),...$2(c3,l4,c3+u2*Math.cos(d3),l4+p3*Math.sin(d3),i2)):k2.push({op:"lineTo",data:[c3,l4]},{op:"lineTo",data:[c3+u2*Math.cos(f2),l4+p3*Math.sin(f2)]})),{type:"path",ops:k2}}function _2(t4,e3){const s2=m2(y3(b2(t4))),n2=[];let o2=[0,0],a2=[0,0];for(const{key:t5,data:h3}of s2)switch(t5){case"M":a2=[h3[0],h3[1]],o2=[h3[0],h3[1]];break;case"L":n2.push(...$2(a2[0],a2[1],h3[0],h3[1],e3)),a2=[h3[0],h3[1]];break;case"C":{const[t6,s3,o3,r2,i2,c3]=h3;n2.push(...Z(t6,s3,o3,r2,i2,c3,a2,e3)),a2=[i2,c3];break}case"Z":n2.push(...$2(a2[0],a2[1],o2[0],o2[1],e3)),a2=[o2[0],o2[1]]}return{type:"path",ops:n2}}function I2(t4,e3){const s2=[];for(const n2 of t4)if(n2.length){const t5=e3.maxRandomnessOffset||0,o2=n2.length;if(o2>2){s2.push({op:"move",data:[n2[0][0]+G2(t5,e3),n2[0][1]+G2(t5,e3)]});for(let a2=1;a2<o2;a2++)s2.push({op:"lineTo",data:[n2[a2][0]+G2(t5,e3),n2[a2][1]+G2(t5,e3)]})}}return{type:"fillPath",ops:s2}}function C2(t4,e3){return function(t5,e4){let s2=t5.fillStyle||"hachure";if(!u[s2])switch(s2){case"zigzag":u[s2]||(u[s2]=new h2(e4));break;case"cross-hatch":u[s2]||(u[s2]=new r(e4));break;case"dots":u[s2]||(u[s2]=new i(e4));break;case"dashed":u[s2]||(u[s2]=new c2(e4));break;case"zigzag-line":u[s2]||(u[s2]=new l3(e4));break;default:s2="hachure",u[s2]||(u[s2]=new o(e4))}return u[s2]}(e3,P2).fillPolygons(t4,e3)}function z2(t4){const e3=Object.assign({},t4);return e3.randomizer=void 0,t4.seed&&(e3.seed=t4.seed+1),e3}function W2(t4){return t4.randomizer||(t4.randomizer=new p(t4.seed||0)),t4.randomizer.next()}function E2(t4,e3,s2,n2=1){return s2.roughness*n2*(W2(s2)*(e3-t4)+t4)}function G2(t4,e3,s2=1){return E2(-t4,t4,e3,s2)}function $2(t4,e3,s2,n2,o2,a2=!1){const h3=a2?o2.disableMultiStrokeFill:o2.disableMultiStroke,r2=R2(t4,e3,s2,n2,o2,!0,!1);if(h3)return r2;const i2=R2(t4,e3,s2,n2,o2,!0,!0);return r2.concat(i2)}function R2(t4,e3,s2,n2,o2,a2,h3){const r2=Math.pow(t4-s2,2)+Math.pow(e3-n2,2),i2=Math.sqrt(r2);let c3=1;c3=i2<200?1:i2>500?.4:-.0016668*i2+1.233334;let l4=o2.maxRandomnessOffset||0;l4*l4*100>r2&&(l4=i2/10);const u2=l4/2,p3=.2+.2*W2(o2);let f2=o2.bowing*o2.maxRandomnessOffset*(n2-e3)/200,d3=o2.bowing*o2.maxRandomnessOffset*(t4-s2)/200;f2=G2(f2,o2,c3),d3=G2(d3,o2,c3);const g2=[],M3=__name(()=>G2(u2,o2,c3),"M"),k2=__name(()=>G2(l4,o2,c3),"k"),b3=o2.preserveVertices;return a2&&(h3?g2.push({op:"move",data:[t4+(b3?0:M3()),e3+(b3?0:M3())]}):g2.push({op:"move",data:[t4+(b3?0:G2(l4,o2,c3)),e3+(b3?0:G2(l4,o2,c3))]})),h3?g2.push({op:"bcurveTo",data:[f2+t4+(s2-t4)*p3+M3(),d3+e3+(n2-e3)*p3+M3(),f2+t4+2*(s2-t4)*p3+M3(),d3+e3+2*(n2-e3)*p3+M3(),s2+(b3?0:M3()),n2+(b3?0:M3())]}):g2.push({op:"bcurveTo",data:[f2+t4+(s2-t4)*p3+k2(),d3+e3+(n2-e3)*p3+k2(),f2+t4+2*(s2-t4)*p3+k2(),d3+e3+2*(n2-e3)*p3+k2(),s2+(b3?0:k2()),n2+(b3?0:k2())]}),g2}function j2(t4,e3,s2){if(!t4.length)return[];const n2=[];n2.push([t4[0][0]+G2(e3,s2),t4[0][1]+G2(e3,s2)]),n2.push([t4[0][0]+G2(e3,s2),t4[0][1]+G2(e3,s2)]);for(let o2=1;o2<t4.length;o2++)n2.push([t4[o2][0]+G2(e3,s2),t4[o2][1]+G2(e3,s2)]),o2===t4.length-1&&n2.push([t4[o2][0]+G2(e3,s2),t4[o2][1]+G2(e3,s2)]);return q2(n2,null,s2)}function q2(t4,e3,s2){const n2=t4.length,o2=[];if(n2>3){const a2=[],h3=1-s2.curveTightness;o2.push({op:"move",data:[t4[1][0],t4[1][1]]});for(let e4=1;e4+2<n2;e4++){const s3=t4[e4];a2[0]=[s3[0],s3[1]],a2[1]=[s3[0]+(h3*t4[e4+1][0]-h3*t4[e4-1][0])/6,s3[1]+(h3*t4[e4+1][1]-h3*t4[e4-1][1])/6],a2[2]=[t4[e4+1][0]+(h3*t4[e4][0]-h3*t4[e4+2][0])/6,t4[e4+1][1]+(h3*t4[e4][1]-h3*t4[e4+2][1])/6],a2[3]=[t4[e4+1][0],t4[e4+1][1]],o2.push({op:"bcurveTo",data:[a2[1][0],a2[1][1],a2[2][0],a2[2][1],a2[3][0],a2[3][1]]})}if(e3&&2===e3.length){const t5=s2.maxRandomnessOffset;o2.push({op:"lineTo",data:[e3[0]+G2(t5,s2),e3[1]+G2(t5,s2)]})}}else 3===n2?(o2.push({op:"move",data:[t4[1][0],t4[1][1]]}),o2.push({op:"bcurveTo",data:[t4[1][0],t4[1][1],t4[2][0],t4[2][1],t4[2][0],t4[2][1]]})):2===n2&&o2.push(...R2(t4[0][0],t4[0][1],t4[1][0],t4[1][1],s2,!0,!0));return o2}function F2(t4,e3,s2,n2,o2,a2,h3,r2){const i2=[],c3=[];if(0===r2.roughness){t4/=4,c3.push([e3+n2*Math.cos(-t4),s2+o2*Math.sin(-t4)]);for(let a3=0;a3<=2*Math.PI;a3+=t4){const t5=[e3+n2*Math.cos(a3),s2+o2*Math.sin(a3)];i2.push(t5),c3.push(t5)}c3.push([e3+n2*Math.cos(0),s2+o2*Math.sin(0)]),c3.push([e3+n2*Math.cos(t4),s2+o2*Math.sin(t4)])}else{const l4=G2(.5,r2)-Math.PI/2;c3.push([G2(a2,r2)+e3+.9*n2*Math.cos(l4-t4),G2(a2,r2)+s2+.9*o2*Math.sin(l4-t4)]);const u2=2*Math.PI+l4-.01;for(let h4=l4;h4<u2;h4+=t4){const t5=[G2(a2,r2)+e3+n2*Math.cos(h4),G2(a2,r2)+s2+o2*Math.sin(h4)];i2.push(t5),c3.push(t5)}c3.push([G2(a2,r2)+e3+n2*Math.cos(l4+2*Math.PI+.5*h3),G2(a2,r2)+s2+o2*Math.sin(l4+2*Math.PI+.5*h3)]),c3.push([G2(a2,r2)+e3+.98*n2*Math.cos(l4+h3),G2(a2,r2)+s2+.98*o2*Math.sin(l4+h3)]),c3.push([G2(a2,r2)+e3+.9*n2*Math.cos(l4+.5*h3),G2(a2,r2)+s2+.9*o2*Math.sin(l4+.5*h3)])}return[c3,i2]}function V2(t4,e3,s2,n2,o2,a2,h3,r2,i2){const c3=a2+G2(.1,i2),l4=[];l4.push([G2(r2,i2)+e3+.9*n2*Math.cos(c3-t4),G2(r2,i2)+s2+.9*o2*Math.sin(c3-t4)]);for(let a3=c3;a3<=h3;a3+=t4)l4.push([G2(r2,i2)+e3+n2*Math.cos(a3),G2(r2,i2)+s2+o2*Math.sin(a3)]);return l4.push([e3+n2*Math.cos(h3),s2+o2*Math.sin(h3)]),l4.push([e3+n2*Math.cos(h3),s2+o2*Math.sin(h3)]),q2(l4,null,i2)}function Z(t4,e3,s2,n2,o2,a2,h3,r2){const i2=[],c3=[r2.maxRandomnessOffset||1,(r2.maxRandomnessOffset||1)+.3];let l4=[0,0];const u2=r2.disableMultiStroke?1:2,p3=r2.preserveVertices;for(let f2=0;f2<u2;f2++)0===f2?i2.push({op:"move",data:[h3[0],h3[1]]}):i2.push({op:"move",data:[h3[0]+(p3?0:G2(c3[0],r2)),h3[1]+(p3?0:G2(c3[0],r2))]}),l4=p3?[o2,a2]:[o2+G2(c3[f2],r2),a2+G2(c3[f2],r2)],i2.push({op:"bcurveTo",data:[t4+G2(c3[f2],r2),e3+G2(c3[f2],r2),s2+G2(c3[f2],r2),n2+G2(c3[f2],r2),l4[0],l4[1]]});return i2}function Q2(t4){return[...t4]}function H(t4,e3=0){const s2=t4.length;if(s2<3)throw new Error("A curve must have at least three points.");const n2=[];if(3===s2)n2.push(Q2(t4[0]),Q2(t4[1]),Q2(t4[2]),Q2(t4[2]));else{const s3=[];s3.push(t4[0],t4[0]);for(let e4=1;e4<t4.length;e4++)s3.push(t4[e4]),e4===t4.length-1&&s3.push(t4[e4]);const o2=[],a2=1-e3;n2.push(Q2(s3[0]));for(let t5=1;t5+2<s3.length;t5++){const e4=s3[t5];o2[0]=[e4[0],e4[1]],o2[1]=[e4[0]+(a2*s3[t5+1][0]-a2*s3[t5-1][0])/6,e4[1]+(a2*s3[t5+1][1]-a2*s3[t5-1][1])/6],o2[2]=[s3[t5+1][0]+(a2*s3[t5][0]-a2*s3[t5+2][0])/6,s3[t5+1][1]+(a2*s3[t5][1]-a2*s3[t5+2][1])/6],o2[3]=[s3[t5+1][0],s3[t5+1][1]],n2.push(o2[1],o2[2],o2[3])}}return n2}function N2(t4,e3){return Math.pow(t4[0]-e3[0],2)+Math.pow(t4[1]-e3[1],2)}function B2(t4,e3,s2){const n2=N2(e3,s2);if(0===n2)return N2(t4,e3);let o2=((t4[0]-e3[0])*(s2[0]-e3[0])+(t4[1]-e3[1])*(s2[1]-e3[1]))/n2;return o2=Math.max(0,Math.min(1,o2)),N2(t4,J2(e3,s2,o2))}function J2(t4,e3,s2){return[t4[0]+(e3[0]-t4[0])*s2,t4[1]+(e3[1]-t4[1])*s2]}function K3(t4,e3,s2,n2){const o2=n2||[];if(function(t5,e4){const s3=t5[e4+0],n3=t5[e4+1],o3=t5[e4+2],a3=t5[e4+3];let h4=3*n3[0]-2*s3[0]-a3[0];h4*=h4;let r2=3*n3[1]-2*s3[1]-a3[1];r2*=r2;let i2=3*o3[0]-2*a3[0]-s3[0];i2*=i2;let c3=3*o3[1]-2*a3[1]-s3[1];return c3*=c3,h4<i2&&(h4=i2),r2<c3&&(r2=c3),h4+r2}(t4,e3)<s2){const s3=t4[e3+0];o2.length?(a2=o2[o2.length-1],h3=s3,Math.sqrt(N2(a2,h3))>1&&o2.push(s3)):o2.push(s3),o2.push(t4[e3+3])}else{const n3=.5,a3=t4[e3+0],h4=t4[e3+1],r2=t4[e3+2],i2=t4[e3+3],c3=J2(a3,h4,n3),l4=J2(h4,r2,n3),u2=J2(r2,i2,n3),p3=J2(c3,l4,n3),f2=J2(l4,u2,n3),d3=J2(p3,f2,n3);K3([a3,c3,p3,d3],0,s2,o2),K3([d3,f2,u2,i2],0,s2,o2)}var a2,h3;return o2}function U2(t4,e3){return X3(t4,0,t4.length,e3)}function X3(t4,e3,s2,n2,o2){const a2=o2||[],h3=t4[e3],r2=t4[s2-1];let i2=0,c3=1;for(let n3=e3+1;n3<s2-1;++n3){const e4=B2(t4[n3],h3,r2);e4>i2&&(i2=e4,c3=n3)}return Math.sqrt(i2)>n2?(X3(t4,e3,c3+1,n2,a2),X3(t4,c3,s2,n2,a2)):(a2.length||a2.push(h3),a2.push(r2)),a2}function Y2(t4,e3=.15,s2){const n2=[],o2=(t4.length-1)/3;for(let s3=0;s3<o2;s3++)K3(t4,3*s3,e3,n2);return s2&&s2>0?X3(n2,0,n2.length,s2):n2}var init_rough_esm=__esm({"../../node_modules/.pnpm/roughjs@4.6.6_patch_hash=3543d47108cb41b68ec6a671c0e1f9d0cfe2ce524fea5b0992511ae84c3c6b64/node_modules/roughjs/bundled/rough.esm.js"(){__name(t,"t"),__name(e,"e"),__name(s,"s"),__name(n,"n"),o=class{static{__name(this,"o")}constructor(t4){this.helper=t4}fillPolygons(t4,e3){return this._fillPolygons(t4,e3)}_fillPolygons(t4,e3){const s2=n(t4,e3);return{type:"fillSketch",ops:this.renderLines(s2,e3)}}renderLines(t4,e3){const s2=[];for(const n2 of t4)s2.push(...this.helper.doubleLineOps(n2[0][0],n2[0][1],n2[1][0],n2[1][1],e3));return s2}},__name(a,"a"),h2=class extends o{static{__name(this,"h")}fillPolygons(t4,e3){let s2=e3.hachureGap;s2<0&&(s2=4*e3.strokeWidth),s2=Math.max(s2,.1);const o2=n(t4,Object.assign({},e3,{hachureGap:s2})),h3=Math.PI/180*e3.hachureAngle,r2=[],i2=.5*s2*Math.cos(h3),c3=.5*s2*Math.sin(h3);for(const[t5,e4]of o2)a([t5,e4])&&r2.push([[t5[0]-i2,t5[1]+c3],[...e4]],[[t5[0]+i2,t5[1]-c3],[...e4]]);return{type:"fillSketch",ops:this.renderLines(r2,e3)}}},r=class extends o{static{__name(this,"r")}fillPolygons(t4,e3){const s2=this._fillPolygons(t4,e3),n2=Object.assign({},e3,{hachureAngle:e3.hachureAngle+90}),o2=this._fillPolygons(t4,n2);return s2.ops=s2.ops.concat(o2.ops),s2}},i=class{static{__name(this,"i")}constructor(t4){this.helper=t4}fillPolygons(t4,e3){const s2=n(t4,e3=Object.assign({},e3,{hachureAngle:0}));return this.dotsOnLines(s2,e3)}dotsOnLines(t4,e3){const s2=[];let n2=e3.hachureGap;n2<0&&(n2=4*e3.strokeWidth),n2=Math.max(n2,.1);let o2=e3.fillWeight;o2<0&&(o2=e3.strokeWidth/2);const h3=n2/4;for(const r2 of t4){const t5=a(r2),i2=t5/n2,c3=Math.ceil(i2)-1,l4=t5-c3*n2,u2=(r2[0][0]+r2[1][0])/2-n2/4,p3=Math.min(r2[0][1],r2[1][1]);for(let t6=0;t6<c3;t6++){const a2=p3+l4+t6*n2,r3=u2-h3+2*Math.random()*h3,i3=a2-h3+2*Math.random()*h3,c4=this.helper.ellipse(r3,i3,o2,o2,e3);s2.push(...c4.ops)}}return{type:"fillSketch",ops:s2}}},c2=class{static{__name(this,"c")}constructor(t4){this.helper=t4}fillPolygons(t4,e3){const s2=n(t4,e3);return{type:"fillSketch",ops:this.dashedLine(s2,e3)}}dashedLine(t4,e3){const s2=e3.dashOffset<0?e3.hachureGap<0?4*e3.strokeWidth:e3.hachureGap:e3.dashOffset,n2=e3.dashGap<0?e3.hachureGap<0?4*e3.strokeWidth:e3.hachureGap:e3.dashGap,o2=[];return t4.forEach(t5=>{const h3=a(t5),r2=Math.floor(h3/(s2+n2)),i2=(h3+n2-r2*(s2+n2))/2;let c3=t5[0],l4=t5[1];c3[0]>l4[0]&&(c3=t5[1],l4=t5[0]);const u2=Math.atan((l4[1]-c3[1])/(l4[0]-c3[0]));for(let t6=0;t6<r2;t6++){const a2=t6*(s2+n2),h4=a2+s2,r3=[c3[0]+a2*Math.cos(u2)+i2*Math.cos(u2),c3[1]+a2*Math.sin(u2)+i2*Math.sin(u2)],l5=[c3[0]+h4*Math.cos(u2)+i2*Math.cos(u2),c3[1]+h4*Math.sin(u2)+i2*Math.sin(u2)];o2.push(...this.helper.doubleLineOps(r3[0],r3[1],l5[0],l5[1],e3))}}),o2}},l3=class{static{__name(this,"l")}constructor(t4){this.helper=t4}fillPolygons(t4,e3){const s2=e3.hachureGap<0?4*e3.strokeWidth:e3.hachureGap,o2=e3.zigzagOffset<0?s2:e3.zigzagOffset,a2=n(t4,e3=Object.assign({},e3,{hachureGap:s2+o2}));return{type:"fillSketch",ops:this.zigzagLines(a2,o2,e3)}}zigzagLines(t4,e3,s2){const n2=[];return t4.forEach(t5=>{const o2=a(t5),h3=Math.round(o2/(2*e3));let r2=t5[0],i2=t5[1];r2[0]>i2[0]&&(r2=t5[1],i2=t5[0]);const c3=Math.atan((i2[1]-r2[1])/(i2[0]-r2[0]));for(let t6=0;t6<h3;t6++){const o3=2*t6*e3,a2=2*(t6+1)*e3,h4=Math.sqrt(2*Math.pow(e3,2)),i3=[r2[0]+o3*Math.cos(c3),r2[1]+o3*Math.sin(c3)],l4=[r2[0]+a2*Math.cos(c3),r2[1]+a2*Math.sin(c3)],u2=[i3[0]+h4*Math.cos(c3+Math.PI/4),i3[1]+h4*Math.sin(c3+Math.PI/4)];n2.push(...this.helper.doubleLineOps(i3[0],i3[1],u2[0],u2[1],s2),...this.helper.doubleLineOps(u2[0],u2[1],l4[0],l4[1],s2))}}),n2}},u={},p=class{static{__name(this,"p")}constructor(t4){this.seed=t4}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},f=0,d2=1,g=2,M2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0},__name(k,"k"),__name(b2,"b"),__name(y3,"y"),__name(m2,"m"),__name(w2,"w"),__name(x2,"x"),P2={randOffset:__name(function(t4,e3){return G2(t4,e3)},"randOffset"),randOffsetWithRange:__name(function(t4,e3,s2){return E2(t4,e3,s2)},"randOffsetWithRange"),ellipse:__name(function(t4,e3,s2,n2,o2){return D3(t4,e3,o2,T2(s2,n2,o2)).opset},"ellipse"),doubleLineOps:__name(function(t4,e3,s2,n2,o2){return $2(t4,e3,s2,n2,o2,!0)},"doubleLineOps")},__name(v2,"v"),__name(S3,"S"),__name(O2,"O"),__name(L2,"L"),__name(T2,"T"),__name(D3,"D"),__name(A,"A"),__name(_2,"_"),__name(I2,"I"),__name(C2,"C"),__name(z2,"z"),__name(W2,"W"),__name(E2,"E"),__name(G2,"G"),__name($2,"$"),__name(R2,"R"),__name(j2,"j"),__name(q2,"q"),__name(F2,"F"),__name(V2,"V"),__name(Z,"Z"),__name(Q2,"Q"),__name(H,"H"),__name(N2,"N"),__name(B2,"B"),__name(J2,"J"),__name(K3,"K"),__name(U2,"U"),__name(X3,"X"),__name(Y2,"Y"),tt="none",et=class{static{__name(this,"et")}constructor(t4){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t4||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t4){return t4?Object.assign({},this.defaultOptions,t4):this.defaultOptions}_d(t4,e3,s2){return{shape:t4,sets:e3||[],options:s2||this.defaultOptions}}line(t4,e3,s2,n2,o2){const a2=this._o(o2);return this._d("line",[v2(t4,e3,s2,n2,a2)],a2)}rectangle(t4,e3,s2,n2,o2){const a2=this._o(o2),h3=[],r2=O2(t4,e3,s2,n2,a2);if(a2.fill){const o3=[[t4,e3],[t4+s2,e3],[t4+s2,e3+n2],[t4,e3+n2]];"solid"===a2.fillStyle?h3.push(I2([o3],a2)):h3.push(C2([o3],a2))}return a2.stroke!==tt&&h3.push(r2),this._d("rectangle",h3,a2)}ellipse(t4,e3,s2,n2,o2){const a2=this._o(o2),h3=[],r2=T2(s2,n2,a2),i2=D3(t4,e3,a2,r2);if(a2.fill)if("solid"===a2.fillStyle){const s3=D3(t4,e3,a2,r2).opset;s3.type="fillPath",h3.push(s3)}else h3.push(C2([i2.estimatedPoints],a2));return a2.stroke!==tt&&h3.push(i2.opset),this._d("ellipse",h3,a2)}circle(t4,e3,s2,n2){const o2=this.ellipse(t4,e3,s2,s2,n2);return o2.shape="circle",o2}linearPath(t4,e3){const s2=this._o(e3);return this._d("linearPath",[S3(t4,!1,s2)],s2)}arc(t4,e3,s2,n2,o2,a2,h3=!1,r2){const i2=this._o(r2),c3=[],l4=A(t4,e3,s2,n2,o2,a2,h3,!0,i2);if(h3&&i2.fill)if("solid"===i2.fillStyle){const h4=Object.assign({},i2);h4.disableMultiStroke=!0;const r3=A(t4,e3,s2,n2,o2,a2,!0,!1,h4);r3.type="fillPath",c3.push(r3)}else c3.push(function(t5,e4,s3,n3,o3,a3,h4){const r3=t5,i3=e4;let c4=Math.abs(s3/2),l5=Math.abs(n3/2);c4+=G2(.01*c4,h4),l5+=G2(.01*l5,h4);let u2=o3,p3=a3;for(;u2<0;)u2+=2*Math.PI,p3+=2*Math.PI;p3-u2>2*Math.PI&&(u2=0,p3=2*Math.PI);const f2=(p3-u2)/h4.curveStepCount,d3=[];for(let t6=u2;t6<=p3;t6+=f2)d3.push([r3+c4*Math.cos(t6),i3+l5*Math.sin(t6)]);return d3.push([r3+c4*Math.cos(p3),i3+l5*Math.sin(p3)]),d3.push([r3,i3]),C2([d3],h4)}(t4,e3,s2,n2,o2,a2,i2));return i2.stroke!==tt&&c3.push(l4),this._d("arc",c3,i2)}curve(t4,e3){const s2=this._o(e3),n2=[],o2=L2(t4,s2);if(s2.fill&&s2.fill!==tt)if("solid"===s2.fillStyle){const e4=L2(t4,Object.assign(Object.assign({},s2),{disableMultiStroke:!0,roughness:s2.roughness?s2.roughness+s2.fillShapeRoughnessGain:0}));n2.push({type:"fillPath",ops:this._mergedShape(e4.ops)})}else{const e4=[],o3=t4;if(o3.length){const t5="number"==typeof o3[0][0]?[o3]:o3;for(const n3 of t5)n3.length<3?e4.push(...n3):3===n3.length?e4.push(...Y2(H([n3[0],n3[0],n3[1],n3[2]]),10,(1+s2.roughness)/2)):e4.push(...Y2(H(n3),10,(1+s2.roughness)/2))}e4.length&&n2.push(C2([e4],s2))}return s2.stroke!==tt&&n2.push(o2),this._d("curve",n2,s2)}polygon(t4,e3){const s2=this._o(e3),n2=[],o2=S3(t4,!0,s2);return s2.fill&&("solid"===s2.fillStyle?n2.push(I2([t4],s2)):n2.push(C2([t4],s2))),s2.stroke!==tt&&n2.push(o2),this._d("polygon",n2,s2)}path(t4,e3){const s2=this._o(e3),n2=[];if(!t4)return this._d("path",n2,s2);t4=(t4||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o2=s2.fill&&"transparent"!==s2.fill&&s2.fill!==tt,a2=s2.stroke!==tt,h3=!!(s2.simplification&&s2.simplification<1),r2=function(t5,e4,s3){const n3=m2(y3(b2(t5))),o3=[];let a3=[],h4=[0,0],r3=[];const i3=__name(()=>{r3.length>=4&&a3.push(...Y2(r3,1)),r3=[]},"i"),c3=__name(()=>{i3(),a3.length&&(o3.push(a3),a3=[])},"c");for(const{key:t6,data:e6}of n3)switch(t6){case"M":c3(),h4=[e6[0],e6[1]],a3.push(h4);break;case"L":i3(),a3.push([e6[0],e6[1]]);break;case"C":if(!r3.length){const t7=a3.length?a3[a3.length-1]:h4;r3.push([t7[0],t7[1]])}r3.push([e6[0],e6[1]]),r3.push([e6[2],e6[3]]),r3.push([e6[4],e6[5]]);break;case"Z":i3(),a3.push([h4[0],h4[1]])}if(c3(),!s3)return o3;const l4=[];for(const t6 of o3){const e6=U2(t6,s3);e6.length&&l4.push(e6)}return l4}(t4,0,h3?4-4*(s2.simplification||1):(1+s2.roughness)/2),i2=_2(t4,s2);if(o2)if("solid"===s2.fillStyle)if(1===r2.length){const e4=_2(t4,Object.assign(Object.assign({},s2),{disableMultiStroke:!0,roughness:s2.roughness?s2.roughness+s2.fillShapeRoughnessGain:0}));n2.push({type:"fillPath",ops:this._mergedShape(e4.ops)})}else n2.push(I2(r2,s2));else n2.push(C2(r2,s2));return a2&&(h3?r2.forEach(t5=>{n2.push(S3(t5,!1,s2))}):n2.push(i2)),this._d("path",n2,s2)}opsToPath(t4,e3){let s2="";for(const n2 of t4.ops){const t5="number"==typeof e3&&e3>=0?n2.data.map(t6=>+t6.toFixed(e3)):n2.data;switch(n2.op){case"move":s2+=`M${t5[0]} ${t5[1]} `;break;case"bcurveTo":s2+=`C${t5[0]} ${t5[1]}, ${t5[2]} ${t5[3]}, ${t5[4]} ${t5[5]} `;break;case"lineTo":s2+=`L${t5[0]} ${t5[1]} `}}return s2.trim()}toPaths(t4){const e3=t4.sets||[],s2=t4.options||this.defaultOptions,n2=[];for(const t5 of e3){let e4=null;switch(t5.type){case"path":e4={d:this.opsToPath(t5),stroke:s2.stroke,strokeWidth:s2.strokeWidth,fill:tt};break;case"fillPath":e4={d:this.opsToPath(t5),stroke:tt,strokeWidth:0,fill:s2.fill||tt};break;case"fillSketch":e4=this.fillSketch(t5,s2)}e4&&n2.push(e4)}return n2}fillSketch(t4,e3){let s2=e3.fillWeight;return s2<0&&(s2=e3.strokeWidth/2),{d:this.opsToPath(t4),stroke:e3.fill||tt,strokeWidth:s2,fill:tt}}_mergedShape(t4){return t4.filter((t5,e3)=>0===e3||"move"!==t5.op)}},st=class{static{__name(this,"st")}constructor(t4,e3){this.canvas=t4,this.ctx=this.canvas.getContext("2d"),this.gen=new et(e3)}draw(t4){const e3=t4.sets||[],s2=t4.options||this.getDefaultOptions(),n2=this.ctx,o2=t4.options.fixedDecimalPlaceDigits;for(const a2 of e3)switch(a2.type){case"path":n2.save(),n2.strokeStyle="none"===s2.stroke?"transparent":s2.stroke,n2.lineWidth=s2.strokeWidth,s2.strokeLineDash&&n2.setLineDash(s2.strokeLineDash),s2.strokeLineDashOffset&&(n2.lineDashOffset=s2.strokeLineDashOffset),this._drawToContext(n2,a2,o2),n2.restore();break;case"fillPath":{n2.save(),n2.fillStyle=s2.fill||"";const e4="curve"===t4.shape||"polygon"===t4.shape||"path"===t4.shape?"evenodd":"nonzero";this._drawToContext(n2,a2,o2,e4),n2.restore();break}case"fillSketch":this.fillSketch(n2,a2,s2)}}fillSketch(t4,e3,s2){let n2=s2.fillWeight;n2<0&&(n2=s2.strokeWidth/2),t4.save(),s2.fillLineDash&&t4.setLineDash(s2.fillLineDash),s2.fillLineDashOffset&&(t4.lineDashOffset=s2.fillLineDashOffset),t4.strokeStyle=s2.fill||"",t4.lineWidth=n2,this._drawToContext(t4,e3,s2.fixedDecimalPlaceDigits),t4.restore()}_drawToContext(t4,e3,s2,n2="nonzero"){t4.beginPath();for(const n3 of e3.ops){const e4="number"==typeof s2&&s2>=0?n3.data.map(t5=>+t5.toFixed(s2)):n3.data;switch(n3.op){case"move":t4.moveTo(e4[0],e4[1]);break;case"bcurveTo":t4.bezierCurveTo(e4[0],e4[1],e4[2],e4[3],e4[4],e4[5]);break;case"lineTo":t4.lineTo(e4[0],e4[1])}}"fillPath"===e3.type?t4.fill(n2):t4.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t4,e3,s2,n2,o2){const a2=this.gen.line(t4,e3,s2,n2,o2);return this.draw(a2),a2}rectangle(t4,e3,s2,n2,o2){const a2=this.gen.rectangle(t4,e3,s2,n2,o2);return this.draw(a2),a2}ellipse(t4,e3,s2,n2,o2){const a2=this.gen.ellipse(t4,e3,s2,n2,o2);return this.draw(a2),a2}circle(t4,e3,s2,n2){const o2=this.gen.circle(t4,e3,s2,n2);return this.draw(o2),o2}linearPath(t4,e3){const s2=this.gen.linearPath(t4,e3);return this.draw(s2),s2}polygon(t4,e3){const s2=this.gen.polygon(t4,e3);return this.draw(s2),s2}arc(t4,e3,s2,n2,o2,a2,h3=!1,r2){const i2=this.gen.arc(t4,e3,s2,n2,o2,a2,h3,r2);return this.draw(i2),i2}curve(t4,e3){const s2=this.gen.curve(t4,e3);return this.draw(s2),s2}path(t4,e3){const s2=this.gen.path(t4,e3);return this.draw(s2),s2}},nt="http://www.w3.org/2000/svg",ot=class{static{__name(this,"ot")}constructor(t4,e3){this.svg=t4,this.gen=new et(e3)}draw(t4){const e3=t4.sets||[],s2=t4.options||this.getDefaultOptions(),n2=this.svg.ownerDocument||window.document,o2=n2.createElementNS(nt,"g"),a2=t4.options.fixedDecimalPlaceDigits;for(const h3 of e3){let e4=null;switch(h3.type){case"path":e4=n2.createElementNS(nt,"path"),e4.setAttribute("d",this.opsToPath(h3,a2)),e4.setAttribute("stroke",s2.stroke),e4.setAttribute("stroke-width",s2.strokeWidth+""),e4.setAttribute("fill","none"),s2.strokeLineDash&&e4.setAttribute("stroke-dasharray",s2.strokeLineDash.join(" ").trim()),s2.strokeLineDashOffset&&e4.setAttribute("stroke-dashoffset",`${s2.strokeLineDashOffset}`);break;case"fillPath":e4=n2.createElementNS(nt,"path"),e4.setAttribute("d",this.opsToPath(h3,a2)),e4.setAttribute("stroke","none"),e4.setAttribute("stroke-width","0"),e4.setAttribute("fill",s2.fill||""),"curve"!==t4.shape&&"polygon"!==t4.shape||e4.setAttribute("fill-rule","evenodd");break;case"fillSketch":e4=this.fillSketch(n2,h3,s2)}e4&&o2.appendChild(e4)}return o2}fillSketch(t4,e3,s2){let n2=s2.fillWeight;n2<0&&(n2=s2.strokeWidth/2);const o2=t4.createElementNS(nt,"path");return o2.setAttribute("d",this.opsToPath(e3,s2.fixedDecimalPlaceDigits)),o2.setAttribute("stroke",s2.fill||""),o2.setAttribute("stroke-width",n2+""),o2.setAttribute("fill","none"),s2.fillLineDash&&o2.setAttribute("stroke-dasharray",s2.fillLineDash.join(" ").trim()),s2.fillLineDashOffset&&o2.setAttribute("stroke-dashoffset",`${s2.fillLineDashOffset}`),o2}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t4,e3){return this.gen.opsToPath(t4,e3)}line(t4,e3,s2,n2,o2){const a2=this.gen.line(t4,e3,s2,n2,o2);return this.draw(a2)}rectangle(t4,e3,s2,n2,o2){const a2=this.gen.rectangle(t4,e3,s2,n2,o2);return this.draw(a2)}ellipse(t4,e3,s2,n2,o2){const a2=this.gen.ellipse(t4,e3,s2,n2,o2);return this.draw(a2)}circle(t4,e3,s2,n2){const o2=this.gen.circle(t4,e3,s2,n2);return this.draw(o2)}linearPath(t4,e3){const s2=this.gen.linearPath(t4,e3);return this.draw(s2)}polygon(t4,e3){const s2=this.gen.polygon(t4,e3);return this.draw(s2)}arc(t4,e3,s2,n2,o2,a2,h3=!1,r2){const i2=this.gen.arc(t4,e3,s2,n2,o2,a2,h3,r2);return this.draw(i2)}curve(t4,e3){const s2=this.gen.curve(t4,e3);return this.draw(s2)}path(t4,e3){const s2=this.gen.path(t4,e3);return this.draw(s2)}},at={canvas:__name((t4,e3)=>new st(t4,e3),"canvas"),svg:__name((t4,e3)=>new ot(t4,e3),"svg"),generator:__name(t4=>new et(t4),"generator"),newSeed:__name(()=>et.newSeed(),"newSeed")}}});function anchor(parent4,node2){const{labelStyles:labelStyles}=styles2String(node2);node2.labelStyle=labelStyles;const classes3=getNodeClasses(node2);let cssClasses=classes3;classes3||(cssClasses="anchor");const shapeSvg=parent4.insert("g").attr("class",cssClasses).attr("id",node2.domId||node2.id),{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==node2.look&&(options2.roughness=0);const roughNode=rc.circle(0,0,2,options2),circleElem=shapeSvg.insert(()=>roughNode,":first-child");return circleElem.attr("class","anchor").attr("style",handleUndefinedAttr(cssStyles)),updateNodeBounds(node2,circleElem),node2.intersect=function(point8){return log.info("Circle intersect",node2,1,point8),intersect_default.circle(node2,1,point8)},shapeSvg}var init_anchor=__esm({"src/rendering-util/rendering-elements/shapes/anchor.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),__name(anchor,"anchor")}});function generateArcPoints(x1,y1,x22,y22,rx,ry,clockwise){const midX=(x1+x22)/2,midY=(y1+y22)/2,angle2=Math.atan2(y22-y1,x22-x1),transformedX=(x22-x1)/2/rx,transformedY=(y22-y1)/2/ry,distance2=Math.sqrt(transformedX**2+transformedY**2);if(distance2>1)throw new Error("The given radii are too small to create an arc between the points.");const scaledCenterDistance=Math.sqrt(1-distance2**2),centerX=midX+scaledCenterDistance*ry*Math.sin(angle2)*(clockwise?-1:1),centerY=midY-scaledCenterDistance*rx*Math.cos(angle2)*(clockwise?-1:1),startAngle=Math.atan2((y1-centerY)/ry,(x1-centerX)/rx);let angleRange=Math.atan2((y22-centerY)/ry,(x22-centerX)/rx)-startAngle;clockwise&&angleRange<0&&(angleRange+=2*Math.PI),!clockwise&&angleRange>0&&(angleRange-=2*Math.PI);const points=[];for(let i2=0;i2<20;i2++){const angle3=startAngle+i2/19*angleRange,x5=centerX+rx*Math.cos(angle3),y6=centerY+ry*Math.sin(angle3);points.push({x:x5,y:y6})}return points}async function bowTieRect(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+node2.padding+20,h3=bbox.height+node2.padding,ry=h3/2,rx=ry/(2.5+h3/50),{cssStyles:cssStyles}=node2,points=[{x:w4/2,y:-h3/2},{x:-w4/2,y:-h3/2},...generateArcPoints(-w4/2,-h3/2,-w4/2,h3/2,rx,ry,!1),{x:w4/2,y:h3/2},...generateArcPoints(w4/2,h3/2,w4/2,-h3/2,rx,ry,!0)],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const bowTieRectPath=createPathFromPoints(points),bowTieRectShapePath=rc.path(bowTieRectPath,options2),bowTieRectShape=shapeSvg.insert(()=>bowTieRectShapePath,":first-child");return bowTieRectShape.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&bowTieRectShape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&bowTieRectShape.selectAll("path").attr("style",nodeStyles),bowTieRectShape.attr("transform",`translate(${rx/2}, 0)`),updateNodeBounds(node2,bowTieRectShape),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_bowTieRect=__esm({"src/rendering-util/rendering-elements/shapes/bowTieRect.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(generateArcPoints,"generateArcPoints"),__name(bowTieRect,"bowTieRect")}});function insertPolygonShape(parent4,w4,h3,points){return parent4.insert("polygon",":first-child").attr("points",points.map(function(d3){return d3.x+","+d3.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-w4/2+","+h3/2+")")}var init_insertPolygonShape=__esm({"src/rendering-util/rendering-elements/shapes/insertPolygonShape.ts"(){__name(insertPolygonShape,"insertPolygonShape")}});async function card(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),h3=bbox.height+node2.padding,w4=bbox.width+node2.padding+12,top2=-h3,points=[{x:12,y:top2},{x:w4,y:top2},{x:w4,y:0},{x:0,y:0},{x:0,y:top2+12},{x:12,y:top2}];let polygon2;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2);polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-w4/2}, ${h3/2})`),cssStyles&&polygon2.attr("style",cssStyles)}else polygon2=insertPolygonShape(shapeSvg,w4,h3,points);return nodeStyles&&polygon2.attr("style",nodeStyles),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_card=__esm({"src/rendering-util/rendering-elements/shapes/card.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),init_util(),__name(card,"card")}});function choice(parent4,node2){const{nodeStyles:nodeStyles}=styles2String(node2);node2.label="";const shapeSvg=parent4.insert("g").attr("class",getNodeClasses(node2)).attr("id",node2.domId??node2.id),{cssStyles:cssStyles}=node2,s2=Math.max(28,node2.width??0),points=[{x:0,y:s2/2},{x:s2/2,y:0},{x:0,y:-s2/2},{x:-s2/2,y:0}],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const choicePath=createPathFromPoints(points),roughNode=rc.path(choicePath,options2),choiceShape=shapeSvg.insert(()=>roughNode,":first-child");return cssStyles&&"handDrawn"!==node2.look&&choiceShape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&choiceShape.selectAll("path").attr("style",nodeStyles),node2.width=28,node2.height=28,node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_choice=__esm({"src/rendering-util/rendering-elements/shapes/choice.ts"(){init_intersect(),init_rough_esm(),init_handDrawnShapeStyles(),init_util(),__name(choice,"choice")}});async function circle(parent4,node2,options2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper(parent4,node2,getNodeClasses(node2)),padding2=options2?.padding??halfPadding,radius2=bbox.width/2+padding2;let circleElem;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options3=userNodeOverrides(node2,{}),roughNode=rc.circle(0,0,2*radius2,options3);circleElem=shapeSvg.insert(()=>roughNode,":first-child"),circleElem.attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles))}else circleElem=shapeSvg.insert("circle",":first-child").attr("class","basic label-container").attr("style",nodeStyles).attr("r",radius2).attr("cx",0).attr("cy",0);return updateNodeBounds(node2,circleElem),node2.calcIntersect=function(bounds4,point8){const radius3=bounds4.width/2;return intersect_default.circle(bounds4,radius3,point8)},node2.intersect=function(point8){return log.info("Circle intersect",node2,radius2,point8),intersect_default.circle(node2,radius2,point8)},shapeSvg}var init_circle=__esm({"src/rendering-util/rendering-elements/shapes/circle.ts"(){init_rough_esm(),init_logger(),init_utils2(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(circle,"circle")}});function createLine(r2){const xAxis45=Math.cos(Math.PI/4),yAxis45=Math.sin(Math.PI/4),lineLength=2*r2;return`M ${-lineLength/2*xAxis45},${lineLength/2*yAxis45} L ${lineLength/2*xAxis45},${-lineLength/2*yAxis45}\n                   M ${lineLength/2*xAxis45},${lineLength/2*yAxis45} L ${-lineLength/2*xAxis45},${-lineLength/2*yAxis45}`}function crossedCircle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles,node2.label="";const shapeSvg=parent4.insert("g").attr("class",getNodeClasses(node2)).attr("id",node2.domId??node2.id),radius2=Math.max(30,node2?.width??0),{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const circleNode=rc.circle(0,0,2*radius2,options2),linePath=createLine(radius2),lineNode=rc.path(linePath,options2),crossedCircle2=shapeSvg.insert(()=>circleNode,":first-child");return crossedCircle2.insert(()=>lineNode),cssStyles&&"handDrawn"!==node2.look&&crossedCircle2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&crossedCircle2.selectAll("path").attr("style",nodeStyles),updateNodeBounds(node2,crossedCircle2),node2.intersect=function(point8){log.info("crossedCircle intersect",node2,{radius:radius2,point:point8});return intersect_default.circle(node2,radius2,point8)},shapeSvg}var init_crossedCircle=__esm({"src/rendering-util/rendering-elements/shapes/crossedCircle.ts"(){init_logger(),init_util(),init_handDrawnShapeStyles(),init_rough_esm(),init_intersect(),__name(createLine,"createLine"),__name(crossedCircle,"crossedCircle")}});function generateCirclePoints2(centerX,centerY,radius2,numPoints=100,startAngle=0,endAngle=180){const points=[],startAngleRad=startAngle*Math.PI/180,angleStep=(endAngle*Math.PI/180-startAngleRad)/(numPoints-1);for(let i2=0;i2<numPoints;i2++){const angle2=startAngleRad+i2*angleStep,x5=centerX+radius2*Math.cos(angle2),y6=centerY+radius2*Math.sin(angle2);points.push({x:-x5,y:-y6})}return points}async function curlyBraceLeft(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+(node2.padding??0),h3=bbox.height+(node2.padding??0),radius2=Math.max(5,.1*h3),{cssStyles:cssStyles}=node2,points=[...generateCirclePoints2(w4/2,-h3/2,radius2,30,-90,0),{x:-w4/2-radius2,y:radius2},...generateCirclePoints2(w4/2+2*radius2,-radius2,radius2,20,-180,-270),...generateCirclePoints2(w4/2+2*radius2,radius2,radius2,20,-90,-180),{x:-w4/2-radius2,y:-h3/2},...generateCirclePoints2(w4/2,h3/2,radius2,20,0,90)],rectPoints=[{x:w4/2,y:-h3/2-radius2},{x:-w4/2,y:-h3/2-radius2},...generateCirclePoints2(w4/2,-h3/2,radius2,20,-90,0),{x:-w4/2-radius2,y:-radius2},...generateCirclePoints2(w4/2+.1*w4,-radius2,radius2,20,-180,-270),...generateCirclePoints2(w4/2+.1*w4,radius2,radius2,20,-90,-180),{x:-w4/2-radius2,y:h3/2},...generateCirclePoints2(w4/2,h3/2,radius2,20,0,90),{x:-w4/2,y:h3/2+radius2},{x:w4/2,y:h3/2+radius2}],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{fill:"none"});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const newCurlyBracePath=createPathFromPoints(points).replace("Z",""),curlyBraceLeftNode=rc.path(newCurlyBracePath,options2),rectPath=createPathFromPoints(rectPoints),rectShape=rc.path(rectPath,{...options2}),curlyBraceLeftShape=shapeSvg.insert("g",":first-child");return curlyBraceLeftShape.insert(()=>rectShape,":first-child").attr("stroke-opacity",0),curlyBraceLeftShape.insert(()=>curlyBraceLeftNode,":first-child"),curlyBraceLeftShape.attr("class","text"),cssStyles&&"handDrawn"!==node2.look&&curlyBraceLeftShape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&curlyBraceLeftShape.selectAll("path").attr("style",nodeStyles),curlyBraceLeftShape.attr("transform",`translate(${radius2}, 0)`),label.attr("transform",`translate(${-w4/2+radius2-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,curlyBraceLeftShape),node2.intersect=function(point8){return intersect_default.polygon(node2,rectPoints,point8)},shapeSvg}var init_curlyBraceLeft=__esm({"src/rendering-util/rendering-elements/shapes/curlyBraceLeft.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(generateCirclePoints2,"generateCirclePoints"),__name(curlyBraceLeft,"curlyBraceLeft")}});function generateCirclePoints3(centerX,centerY,radius2,numPoints=100,startAngle=0,endAngle=180){const points=[],startAngleRad=startAngle*Math.PI/180,angleStep=(endAngle*Math.PI/180-startAngleRad)/(numPoints-1);for(let i2=0;i2<numPoints;i2++){const angle2=startAngleRad+i2*angleStep,x5=centerX+radius2*Math.cos(angle2),y6=centerY+radius2*Math.sin(angle2);points.push({x:x5,y:y6})}return points}async function curlyBraceRight(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+(node2.padding??0),h3=bbox.height+(node2.padding??0),radius2=Math.max(5,.1*h3),{cssStyles:cssStyles}=node2,points=[...generateCirclePoints3(w4/2,-h3/2,radius2,20,-90,0),{x:w4/2+radius2,y:-radius2},...generateCirclePoints3(w4/2+2*radius2,-radius2,radius2,20,-180,-270),...generateCirclePoints3(w4/2+2*radius2,radius2,radius2,20,-90,-180),{x:w4/2+radius2,y:h3/2},...generateCirclePoints3(w4/2,h3/2,radius2,20,0,90)],rectPoints=[{x:-w4/2,y:-h3/2-radius2},{x:w4/2,y:-h3/2-radius2},...generateCirclePoints3(w4/2,-h3/2,radius2,20,-90,0),{x:w4/2+radius2,y:-radius2},...generateCirclePoints3(w4/2+2*radius2,-radius2,radius2,20,-180,-270),...generateCirclePoints3(w4/2+2*radius2,radius2,radius2,20,-90,-180),{x:w4/2+radius2,y:h3/2},...generateCirclePoints3(w4/2,h3/2,radius2,20,0,90),{x:w4/2,y:h3/2+radius2},{x:-w4/2,y:h3/2+radius2}],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{fill:"none"});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const newCurlyBracePath=createPathFromPoints(points).replace("Z",""),curlyBraceRightNode=rc.path(newCurlyBracePath,options2),rectPath=createPathFromPoints(rectPoints),rectShape=rc.path(rectPath,{...options2}),curlyBraceRightShape=shapeSvg.insert("g",":first-child");return curlyBraceRightShape.insert(()=>rectShape,":first-child").attr("stroke-opacity",0),curlyBraceRightShape.insert(()=>curlyBraceRightNode,":first-child"),curlyBraceRightShape.attr("class","text"),cssStyles&&"handDrawn"!==node2.look&&curlyBraceRightShape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&curlyBraceRightShape.selectAll("path").attr("style",nodeStyles),curlyBraceRightShape.attr("transform",`translate(${-radius2}, 0)`),label.attr("transform",`translate(${-w4/2+(node2.padding??0)/2-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,curlyBraceRightShape),node2.intersect=function(point8){return intersect_default.polygon(node2,rectPoints,point8)},shapeSvg}var init_curlyBraceRight=__esm({"src/rendering-util/rendering-elements/shapes/curlyBraceRight.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(generateCirclePoints3,"generateCirclePoints"),__name(curlyBraceRight,"curlyBraceRight")}});function generateCirclePoints4(centerX,centerY,radius2,numPoints=100,startAngle=0,endAngle=180){const points=[],startAngleRad=startAngle*Math.PI/180,angleStep=(endAngle*Math.PI/180-startAngleRad)/(numPoints-1);for(let i2=0;i2<numPoints;i2++){const angle2=startAngleRad+i2*angleStep,x5=centerX+radius2*Math.cos(angle2),y6=centerY+radius2*Math.sin(angle2);points.push({x:-x5,y:-y6})}return points}async function curlyBraces(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+(node2.padding??0),h3=bbox.height+(node2.padding??0),radius2=Math.max(5,.1*h3),{cssStyles:cssStyles}=node2,leftCurlyBracePoints=[...generateCirclePoints4(w4/2,-h3/2,radius2,30,-90,0),{x:-w4/2-radius2,y:radius2},...generateCirclePoints4(w4/2+2*radius2,-radius2,radius2,20,-180,-270),...generateCirclePoints4(w4/2+2*radius2,radius2,radius2,20,-90,-180),{x:-w4/2-radius2,y:-h3/2},...generateCirclePoints4(w4/2,h3/2,radius2,20,0,90)],rightCurlyBracePoints=[...generateCirclePoints4(-w4/2+radius2+radius2/2,-h3/2,radius2,20,-90,-180),{x:w4/2-radius2/2,y:radius2},...generateCirclePoints4(-w4/2-radius2/2,-radius2,radius2,20,0,90),...generateCirclePoints4(-w4/2-radius2/2,radius2,radius2,20,-90,0),{x:w4/2-radius2/2,y:-radius2},...generateCirclePoints4(-w4/2+radius2+radius2/2,h3/2,radius2,30,-180,-270)],rectPoints=[{x:w4/2,y:-h3/2-radius2},{x:-w4/2,y:-h3/2-radius2},...generateCirclePoints4(w4/2,-h3/2,radius2,20,-90,0),{x:-w4/2-radius2,y:-radius2},...generateCirclePoints4(w4/2+2*radius2,-radius2,radius2,20,-180,-270),...generateCirclePoints4(w4/2+2*radius2,radius2,radius2,20,-90,-180),{x:-w4/2-radius2,y:h3/2},...generateCirclePoints4(w4/2,h3/2,radius2,20,0,90),{x:-w4/2,y:h3/2+radius2},{x:w4/2-radius2-radius2/2,y:h3/2+radius2},...generateCirclePoints4(-w4/2+radius2+radius2/2,-h3/2,radius2,20,-90,-180),{x:w4/2-radius2/2,y:radius2},...generateCirclePoints4(-w4/2-radius2/2,-radius2,radius2,20,0,90),...generateCirclePoints4(-w4/2-radius2/2,radius2,radius2,20,-90,0),{x:w4/2-radius2/2,y:-radius2},...generateCirclePoints4(-w4/2+radius2+radius2/2,h3/2,radius2,30,-180,-270)],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{fill:"none"});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const newLeftCurlyBracePath=createPathFromPoints(leftCurlyBracePoints).replace("Z",""),leftCurlyBraceNode=rc.path(newLeftCurlyBracePath,options2),newRightCurlyBracePath=createPathFromPoints(rightCurlyBracePoints).replace("Z",""),rightCurlyBraceNode=rc.path(newRightCurlyBracePath,options2),rectPath=createPathFromPoints(rectPoints),rectShape=rc.path(rectPath,{...options2}),curlyBracesShape=shapeSvg.insert("g",":first-child");return curlyBracesShape.insert(()=>rectShape,":first-child").attr("stroke-opacity",0),curlyBracesShape.insert(()=>leftCurlyBraceNode,":first-child"),curlyBracesShape.insert(()=>rightCurlyBraceNode,":first-child"),curlyBracesShape.attr("class","text"),cssStyles&&"handDrawn"!==node2.look&&curlyBracesShape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&curlyBracesShape.selectAll("path").attr("style",nodeStyles),curlyBracesShape.attr("transform",`translate(${radius2-radius2/4}, 0)`),label.attr("transform",`translate(${-w4/2+(node2.padding??0)/2-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,curlyBracesShape),node2.intersect=function(point8){return intersect_default.polygon(node2,rectPoints,point8)},shapeSvg}var init_curlyBraces=__esm({"src/rendering-util/rendering-elements/shapes/curlyBraces.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(generateCirclePoints4,"generateCirclePoints"),__name(curlyBraces,"curlyBraces")}});async function curvedTrapezoid(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(80,1.25*(bbox.width+2*(node2.padding??0)),node2?.width??0),h3=Math.max(20,bbox.height+2*(node2.padding??0),node2?.height??0),radius2=h3/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const rw=w4-radius2,tw=h3/4,points=[{x:rw,y:0},{x:tw,y:0},{x:0,y:h3/2},{x:tw,y:h3},{x:rw,y:h3},...generateCirclePoints(-rw,-h3/2,radius2,50,270,90)],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),polygon2.attr("transform",`translate(${-w4/2}, ${-h3/2})`),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var createCylinderPathD,createOuterCylinderPathD,createInnerCylinderPathD,init_curvedTrapezoid=__esm({"src/rendering-util/rendering-elements/shapes/curvedTrapezoid.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(curvedTrapezoid,"curvedTrapezoid")}});async function cylinder(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+node2.padding,node2.width??0),rx=w4/2,ry=rx/(2.5+w4/50),h3=Math.max(bbox.height+ry+node2.padding,node2.height??0);let cylinder3;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),outerPathData=createOuterCylinderPathD(0,0,w4,h3,rx,ry),innerPathData=createInnerCylinderPathD(0,ry,w4,h3,rx,ry),outerNode=rc.path(outerPathData,userNodeOverrides(node2,{})),innerLine=rc.path(innerPathData,userNodeOverrides(node2,{fill:"none"}));cylinder3=shapeSvg.insert(()=>innerLine,":first-child"),cylinder3=shapeSvg.insert(()=>outerNode,":first-child"),cylinder3.attr("class","basic label-container"),cssStyles&&cylinder3.attr("style",cssStyles)}else{const pathData=createCylinderPathD(0,0,w4,h3,rx,ry);cylinder3=shapeSvg.insert("path",":first-child").attr("d",pathData).attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles)).attr("style",nodeStyles)}return cylinder3.attr("label-offset-y",ry),cylinder3.attr("transform",`translate(${-w4/2}, ${-(h3/2+ry)})`),updateNodeBounds(node2,cylinder3),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))}, ${-bbox.height/2+(node2.padding??0)/1.5-(bbox.y-(bbox.top??0))})`),node2.intersect=function(point8){const pos=intersect_default.rect(node2,point8),x5=pos.x-(node2.x??0);if(0!=rx&&(Math.abs(x5)<(node2.width??0)/2||Math.abs(x5)==(node2.width??0)/2&&Math.abs(pos.y-(node2.y??0))>(node2.height??0)/2-ry)){let y6=ry*ry*(1-x5*x5/(rx*rx));y6>0&&(y6=Math.sqrt(y6)),y6=ry-y6,point8.y-(node2.y??0)>0&&(y6=-y6),pos.y+=y6}return pos},shapeSvg}var init_cylinder=__esm({"src/rendering-util/rendering-elements/shapes/cylinder.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),createCylinderPathD=__name((x5,y6,width3,height2,rx,ry)=>[`M${x5},${y6+ry}`,`a${rx},${ry} 0,0,0 ${width3},0`,`a${rx},${ry} 0,0,0 ${-width3},0`,`l0,${height2}`,`a${rx},${ry} 0,0,0 ${width3},0`,"l0,"+-height2].join(" "),"createCylinderPathD"),createOuterCylinderPathD=__name((x5,y6,width3,height2,rx,ry)=>[`M${x5},${y6+ry}`,`M${x5+width3},${y6+ry}`,`a${rx},${ry} 0,0,0 ${-width3},0`,`l0,${height2}`,`a${rx},${ry} 0,0,0 ${width3},0`,"l0,"+-height2].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD=__name((x5,y6,width3,height2,rx,ry)=>[`M${x5-width3/2},${-height2/2}`,`a${rx},${ry} 0,0,0 ${width3},0`].join(" "),"createInnerCylinderPathD"),__name(cylinder,"cylinder")}});async function dividedRectangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,rectOffset=.2*h3,x5=-w4/2,y6=-h3/2-rectOffset/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const pts2=[{x:x5,y:y6+rectOffset},{x:-x5,y:y6+rectOffset},{x:-x5,y:-y6},{x:x5,y:-y6},{x:x5,y:y6},{x:-x5,y:y6},{x:-x5,y:y6+rectOffset}],poly=rc.polygon(pts2.map(p3=>[p3.x,p3.y]),options2),polygon2=shapeSvg.insert(()=>poly,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectAll("path").attr("style",nodeStyles),label.attr("transform",`translate(${x5+(node2.padding??0)/2-(bbox.x-(bbox.left??0))}, ${y6+rectOffset+(node2.padding??0)/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_dividedRect=__esm({"src/rendering-util/rendering-elements/shapes/dividedRect.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(dividedRectangle,"dividedRectangle")}});async function doublecircle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper(parent4,node2,getNodeClasses(node2)),outerRadius=bbox.width/2+halfPadding+5,innerRadius=bbox.width/2+halfPadding;let circleGroup;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),outerOptions=userNodeOverrides(node2,{roughness:.2,strokeWidth:2.5}),innerOptions=userNodeOverrides(node2,{roughness:.2,strokeWidth:1.5}),outerRoughNode=rc.circle(0,0,2*outerRadius,outerOptions),innerRoughNode=rc.circle(0,0,2*innerRadius,innerOptions);circleGroup=shapeSvg.insert("g",":first-child"),circleGroup.attr("class",handleUndefinedAttr(node2.cssClasses)).attr("style",handleUndefinedAttr(cssStyles)),circleGroup.node()?.appendChild(outerRoughNode),circleGroup.node()?.appendChild(innerRoughNode)}else{circleGroup=shapeSvg.insert("g",":first-child");const outerCircle=circleGroup.insert("circle",":first-child"),innerCircle=circleGroup.insert("circle");circleGroup.attr("class","basic label-container").attr("style",nodeStyles),outerCircle.attr("class","outer-circle").attr("style",nodeStyles).attr("r",outerRadius).attr("cx",0).attr("cy",0),innerCircle.attr("class","inner-circle").attr("style",nodeStyles).attr("r",innerRadius).attr("cx",0).attr("cy",0)}return updateNodeBounds(node2,circleGroup),node2.intersect=function(point8){return log.info("DoubleCircle intersect",node2,outerRadius,point8),intersect_default.circle(node2,outerRadius,point8)},shapeSvg}var init_doubleCircle=__esm({"src/rendering-util/rendering-elements/shapes/doubleCircle.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),__name(doublecircle,"doublecircle")}});function filledCircle(parent4,node2,{config:{themeVariables:themeVariables}}){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.label="",node2.labelStyle=labelStyles;const shapeSvg=parent4.insert("g").attr("class",getNodeClasses(node2)).attr("id",node2.domId??node2.id),{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),{nodeBorder:nodeBorder}=themeVariables,options2=userNodeOverrides(node2,{fillStyle:"solid"});"handDrawn"!==node2.look&&(options2.roughness=0);const circleNode=rc.circle(0,0,14,options2),filledCircle2=shapeSvg.insert(()=>circleNode,":first-child");return filledCircle2.selectAll("path").attr("style",`fill: ${nodeBorder} !important;`),cssStyles&&cssStyles.length>0&&"handDrawn"!==node2.look&&filledCircle2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&filledCircle2.selectAll("path").attr("style",nodeStyles),updateNodeBounds(node2,filledCircle2),node2.intersect=function(point8){log.info("filledCircle intersect",node2,{radius:7,point:point8});return intersect_default.circle(node2,7,point8)},shapeSvg}var init_filledCircle=__esm({"src/rendering-util/rendering-elements/shapes/filledCircle.ts"(){init_rough_esm(),init_logger(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(filledCircle,"filledCircle")}});async function flippedTriangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+(node2.padding??0),h3=w4+bbox.height,tw=w4+bbox.height,points=[{x:0,y:-h3},{x:tw,y:-h3},{x:tw/2,y:0}],{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2),flippedTriangle2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-h3/2}, ${h3/2})`);return cssStyles&&"handDrawn"!==node2.look&&flippedTriangle2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&flippedTriangle2.selectChildren("path").attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,flippedTriangle2),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))}, ${-h3/2+(node2.padding??0)/2+(bbox.y-(bbox.top??0))})`),node2.intersect=function(point8){return log.info("Triangle intersect",node2,points,point8),intersect_default.polygon(node2,points,point8)},shapeSvg}var init_flippedTriangle=__esm({"src/rendering-util/rendering-elements/shapes/flippedTriangle.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_util(),__name(flippedTriangle,"flippedTriangle")}});function forkJoin(parent4,node2,{dir:dir2,config:{state:state3,themeVariables:themeVariables}}){const{nodeStyles:nodeStyles}=styles2String(node2);node2.label="";const shapeSvg=parent4.insert("g").attr("class",getNodeClasses(node2)).attr("id",node2.domId??node2.id),{cssStyles:cssStyles}=node2;let width3=Math.max(70,node2?.width??0),height2=Math.max(10,node2?.height??0);"LR"===dir2&&(width3=Math.max(10,node2?.width??0),height2=Math.max(70,node2?.height??0));const x5=-1*width3/2,y6=-1*height2/2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{stroke:themeVariables.lineColor,fill:themeVariables.lineColor});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const roughNode=rc.rectangle(x5,y6,width3,height2,options2),shape=shapeSvg.insert(()=>roughNode,":first-child");cssStyles&&"handDrawn"!==node2.look&&shape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&shape.selectAll("path").attr("style",nodeStyles),updateNodeBounds(node2,shape);const padding2=state3?.padding??0;return node2.width&&node2.height&&(node2.width+=padding2/2||0,node2.height+=padding2/2||0),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_forkJoin=__esm({"src/rendering-util/rendering-elements/shapes/forkJoin.ts"(){init_rough_esm(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(forkJoin,"forkJoin")}});async function halfRoundedRectangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(80,bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(50,bbox.height+2*(node2.padding??0),node2?.height??0),radius2=h3/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2,y:-h3/2},{x:w4/2-radius2,y:-h3/2},...generateCirclePoints(-w4/2+radius2,0,radius2,50,90,270),{x:w4/2-radius2,y:h3/2},{x:-w4/2,y:h3/2}],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){log.info("Pill intersect",node2,{radius:radius2,point:point8});return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_halfRoundedRectangle=__esm({"src/rendering-util/rendering-elements/shapes/halfRoundedRectangle.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(halfRoundedRectangle,"halfRoundedRectangle")}});async function hexagon(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),h3=bbox.height+(node2.padding??0),w4=bbox.width+2.5*(node2.padding??0),{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");let halfWidth=w4/2;halfWidth+=halfWidth/6;const halfHeight=h3/2,deducedWidth=halfWidth-halfHeight/2,points=[{x:-deducedWidth,y:-halfHeight},{x:0,y:-halfHeight},{x:deducedWidth,y:-halfHeight},{x:halfWidth,y:0},{x:deducedWidth,y:halfHeight},{x:0,y:halfHeight},{x:-deducedWidth,y:halfHeight},{x:-halfWidth,y:0}],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_hexagon=__esm({"src/rendering-util/rendering-elements/shapes/hexagon.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(hexagon,"hexagon")}});async function hourglass(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.label="",node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(30,node2?.width??0),h3=Math.max(30,node2?.height??0),{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:0,y:0},{x:w4,y:0},{x:0,y:h3},{x:w4,y:h3}],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),polygon2.attr("transform",`translate(${-w4/2}, ${-h3/2})`),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){log.info("Pill intersect",node2,{points:points});return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_hourglass=__esm({"src/rendering-util/rendering-elements/shapes/hourglass.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(hourglass,"hourglass")}});async function icon(parent4,node2,{config:{themeVariables:themeVariables,flowchart:flowchart}}){const{labelStyles:labelStyles}=styles2String(node2);node2.labelStyle=labelStyles;const assetHeight=node2.assetHeight??48,assetWidth=node2.assetWidth??48,iconSize=Math.max(assetHeight,assetWidth),defaultWidth=flowchart?.wrappingWidth;node2.width=Math.max(iconSize,defaultWidth??0);const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,"icon-shape default"),topLabel="t"===node2.pos,height2=iconSize,width3=iconSize,{nodeBorder:nodeBorder}=themeVariables,{stylesMap:stylesMap}=compileStyles(node2),x5=-width3/2,y6=-height2/2,labelPadding=node2.label?8:0,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{stroke:"none",fill:"none"});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const iconNode=rc.rectangle(x5,y6,width3,height2,options2),outerWidth=Math.max(width3,bbox.width),outerHeight=height2+bbox.height+labelPadding,outerNode=rc.rectangle(-outerWidth/2,-outerHeight/2,outerWidth,outerHeight,{...options2,fill:"transparent",stroke:"none"}),iconShape=shapeSvg.insert(()=>iconNode,":first-child"),outerShape=shapeSvg.insert(()=>outerNode);if(node2.icon){const iconElem=shapeSvg.append("g");iconElem.html(`<g>${await getIconSVG(node2.icon,{height:iconSize,width:iconSize,fallbackPrefix:""})}</g>`);const iconBBox=iconElem.node().getBBox(),iconWidth=iconBBox.width,iconHeight=iconBBox.height,iconX=iconBBox.x,iconY=iconBBox.y;iconElem.attr("transform",`translate(${-iconWidth/2-iconX},${topLabel?bbox.height/2+labelPadding/2-iconHeight/2-iconY:-bbox.height/2-labelPadding/2-iconHeight/2-iconY})`),iconElem.attr("style",`color: ${stylesMap.get("stroke")??nodeBorder};`)}return label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))},${topLabel?-outerHeight/2:outerHeight/2-bbox.height})`),iconShape.attr("transform",`translate(0,${topLabel?bbox.height/2+labelPadding/2:-bbox.height/2-labelPadding/2})`),updateNodeBounds(node2,outerShape),node2.intersect=function(point8){if(log.info("iconSquare intersect",node2,point8),!node2.label)return intersect_default.rect(node2,point8);const dx=node2.x??0,dy=node2.y??0,nodeHeight=node2.height??0;let points=[];points=topLabel?[{x:dx-bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+width3/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+width3/2,y:dy+nodeHeight/2},{x:dx-width3/2,y:dy+nodeHeight/2},{x:dx-width3/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx-bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding}]:[{x:dx-width3/2,y:dy-nodeHeight/2},{x:dx+width3/2,y:dy-nodeHeight/2},{x:dx+width3/2,y:dy-nodeHeight/2+height2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+height2},{x:dx+bbox.width/2/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy-nodeHeight/2+height2},{x:dx-width3/2,y:dy-nodeHeight/2+height2}];return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_icon=__esm({"src/rendering-util/rendering-elements/shapes/icon.ts"(){init_rough_esm(),init_logger(),init_icons(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(icon,"icon")}});async function iconCircle(parent4,node2,{config:{themeVariables:themeVariables,flowchart:flowchart}}){const{labelStyles:labelStyles}=styles2String(node2);node2.labelStyle=labelStyles;const assetHeight=node2.assetHeight??48,assetWidth=node2.assetWidth??48,iconSize=Math.max(assetHeight,assetWidth),defaultWidth=flowchart?.wrappingWidth;node2.width=Math.max(iconSize,defaultWidth??0);const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,"icon-shape default"),labelPadding=node2.label?8:0,topLabel="t"===node2.pos,{nodeBorder:nodeBorder,mainBkg:mainBkg}=themeVariables,{stylesMap:stylesMap}=compileStyles(node2),rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const fill=stylesMap.get("fill");options2.stroke=fill??mainBkg;const iconElem=shapeSvg.append("g");node2.icon&&iconElem.html(`<g>${await getIconSVG(node2.icon,{height:iconSize,width:iconSize,fallbackPrefix:""})}</g>`);const iconBBox=iconElem.node().getBBox(),iconWidth=iconBBox.width,iconHeight=iconBBox.height,iconX=iconBBox.x,iconY=iconBBox.y,diameter=Math.max(iconWidth,iconHeight)*Math.SQRT2+40,iconNode=rc.circle(0,0,diameter,options2),outerWidth=Math.max(diameter,bbox.width),outerHeight=diameter+bbox.height+labelPadding,outerNode=rc.rectangle(-outerWidth/2,-outerHeight/2,outerWidth,outerHeight,{...options2,fill:"transparent",stroke:"none"}),iconShape=shapeSvg.insert(()=>iconNode,":first-child"),outerShape=shapeSvg.insert(()=>outerNode);return iconElem.attr("transform",`translate(${-iconWidth/2-iconX},${topLabel?bbox.height/2+labelPadding/2-iconHeight/2-iconY:-bbox.height/2-labelPadding/2-iconHeight/2-iconY})`),iconElem.attr("style",`color: ${stylesMap.get("stroke")??nodeBorder};`),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))},${topLabel?-outerHeight/2:outerHeight/2-bbox.height})`),iconShape.attr("transform",`translate(0,${topLabel?bbox.height/2+labelPadding/2:-bbox.height/2-labelPadding/2})`),updateNodeBounds(node2,outerShape),node2.intersect=function(point8){log.info("iconSquare intersect",node2,point8);return intersect_default.rect(node2,point8)},shapeSvg}var createRoundedRectPathD,init_iconCircle=__esm({"src/rendering-util/rendering-elements/shapes/iconCircle.ts"(){init_rough_esm(),init_logger(),init_icons(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(iconCircle,"iconCircle")}}),init_roundedRectPath=__esm({"src/rendering-util/rendering-elements/shapes/roundedRectPath.ts"(){createRoundedRectPathD=__name((x5,y6,totalWidth,totalHeight,radius2)=>["M",x5+radius2,y6,"H",x5+totalWidth-radius2,"A",radius2,radius2,0,0,1,x5+totalWidth,y6+radius2,"V",y6+totalHeight-radius2,"A",radius2,radius2,0,0,1,x5+totalWidth-radius2,y6+totalHeight,"H",x5+radius2,"A",radius2,radius2,0,0,1,x5,y6+totalHeight-radius2,"V",y6+radius2,"A",radius2,radius2,0,0,1,x5+radius2,y6,"Z"].join(" "),"createRoundedRectPathD")}});async function iconRounded(parent4,node2,{config:{themeVariables:themeVariables,flowchart:flowchart}}){const{labelStyles:labelStyles}=styles2String(node2);node2.labelStyle=labelStyles;const assetHeight=node2.assetHeight??48,assetWidth=node2.assetWidth??48,iconSize=Math.max(assetHeight,assetWidth),defaultWidth=flowchart?.wrappingWidth;node2.width=Math.max(iconSize,defaultWidth??0);const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:label}=await labelHelper(parent4,node2,"icon-shape default"),topLabel="t"===node2.pos,height2=iconSize+2*halfPadding,width3=iconSize+2*halfPadding,{nodeBorder:nodeBorder,mainBkg:mainBkg}=themeVariables,{stylesMap:stylesMap}=compileStyles(node2),x5=-width3/2,y6=-height2/2,labelPadding=node2.label?8:0,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const fill=stylesMap.get("fill");options2.stroke=fill??mainBkg;const iconNode=rc.path(createRoundedRectPathD(x5,y6,width3,height2,5),options2),outerWidth=Math.max(width3,bbox.width),outerHeight=height2+bbox.height+labelPadding,outerNode=rc.rectangle(-outerWidth/2,-outerHeight/2,outerWidth,outerHeight,{...options2,fill:"transparent",stroke:"none"}),iconShape=shapeSvg.insert(()=>iconNode,":first-child").attr("class","icon-shape2"),outerShape=shapeSvg.insert(()=>outerNode);if(node2.icon){const iconElem=shapeSvg.append("g");iconElem.html(`<g>${await getIconSVG(node2.icon,{height:iconSize,width:iconSize,fallbackPrefix:""})}</g>`);const iconBBox=iconElem.node().getBBox(),iconWidth=iconBBox.width,iconHeight=iconBBox.height,iconX=iconBBox.x,iconY=iconBBox.y;iconElem.attr("transform",`translate(${-iconWidth/2-iconX},${topLabel?bbox.height/2+labelPadding/2-iconHeight/2-iconY:-bbox.height/2-labelPadding/2-iconHeight/2-iconY})`),iconElem.attr("style",`color: ${stylesMap.get("stroke")??nodeBorder};`)}return label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))},${topLabel?-outerHeight/2:outerHeight/2-bbox.height})`),iconShape.attr("transform",`translate(0,${topLabel?bbox.height/2+labelPadding/2:-bbox.height/2-labelPadding/2})`),updateNodeBounds(node2,outerShape),node2.intersect=function(point8){if(log.info("iconSquare intersect",node2,point8),!node2.label)return intersect_default.rect(node2,point8);const dx=node2.x??0,dy=node2.y??0,nodeHeight=node2.height??0;let points=[];points=topLabel?[{x:dx-bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+width3/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+width3/2,y:dy+nodeHeight/2},{x:dx-width3/2,y:dy+nodeHeight/2},{x:dx-width3/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx-bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding}]:[{x:dx-width3/2,y:dy-nodeHeight/2},{x:dx+width3/2,y:dy-nodeHeight/2},{x:dx+width3/2,y:dy-nodeHeight/2+height2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+height2},{x:dx+bbox.width/2/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy-nodeHeight/2+height2},{x:dx-width3/2,y:dy-nodeHeight/2+height2}];return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_iconRounded=__esm({"src/rendering-util/rendering-elements/shapes/iconRounded.ts"(){init_rough_esm(),init_logger(),init_icons(),init_intersect(),init_handDrawnShapeStyles(),init_roundedRectPath(),init_util(),__name(iconRounded,"iconRounded")}});async function iconSquare(parent4,node2,{config:{themeVariables:themeVariables,flowchart:flowchart}}){const{labelStyles:labelStyles}=styles2String(node2);node2.labelStyle=labelStyles;const assetHeight=node2.assetHeight??48,assetWidth=node2.assetWidth??48,iconSize=Math.max(assetHeight,assetWidth),defaultWidth=flowchart?.wrappingWidth;node2.width=Math.max(iconSize,defaultWidth??0);const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:label}=await labelHelper(parent4,node2,"icon-shape default"),topLabel="t"===node2.pos,height2=iconSize+2*halfPadding,width3=iconSize+2*halfPadding,{nodeBorder:nodeBorder,mainBkg:mainBkg}=themeVariables,{stylesMap:stylesMap}=compileStyles(node2),x5=-width3/2,y6=-height2/2,labelPadding=node2.label?8:0,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const fill=stylesMap.get("fill");options2.stroke=fill??mainBkg;const iconNode=rc.path(createRoundedRectPathD(x5,y6,width3,height2,.1),options2),outerWidth=Math.max(width3,bbox.width),outerHeight=height2+bbox.height+labelPadding,outerNode=rc.rectangle(-outerWidth/2,-outerHeight/2,outerWidth,outerHeight,{...options2,fill:"transparent",stroke:"none"}),iconShape=shapeSvg.insert(()=>iconNode,":first-child"),outerShape=shapeSvg.insert(()=>outerNode);if(node2.icon){const iconElem=shapeSvg.append("g");iconElem.html(`<g>${await getIconSVG(node2.icon,{height:iconSize,width:iconSize,fallbackPrefix:""})}</g>`);const iconBBox=iconElem.node().getBBox(),iconWidth=iconBBox.width,iconHeight=iconBBox.height,iconX=iconBBox.x,iconY=iconBBox.y;iconElem.attr("transform",`translate(${-iconWidth/2-iconX},${topLabel?bbox.height/2+labelPadding/2-iconHeight/2-iconY:-bbox.height/2-labelPadding/2-iconHeight/2-iconY})`),iconElem.attr("style",`color: ${stylesMap.get("stroke")??nodeBorder};`)}return label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))},${topLabel?-outerHeight/2:outerHeight/2-bbox.height})`),iconShape.attr("transform",`translate(0,${topLabel?bbox.height/2+labelPadding/2:-bbox.height/2-labelPadding/2})`),updateNodeBounds(node2,outerShape),node2.intersect=function(point8){if(log.info("iconSquare intersect",node2,point8),!node2.label)return intersect_default.rect(node2,point8);const dx=node2.x??0,dy=node2.y??0,nodeHeight=node2.height??0;let points=[];points=topLabel?[{x:dx-bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+width3/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+width3/2,y:dy+nodeHeight/2},{x:dx-width3/2,y:dy+nodeHeight/2},{x:dx-width3/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx-bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding}]:[{x:dx-width3/2,y:dy-nodeHeight/2},{x:dx+width3/2,y:dy-nodeHeight/2},{x:dx+width3/2,y:dy-nodeHeight/2+height2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+height2},{x:dx+bbox.width/2/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy-nodeHeight/2+height2},{x:dx-width3/2,y:dy-nodeHeight/2+height2}];return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_iconSquare=__esm({"src/rendering-util/rendering-elements/shapes/iconSquare.ts"(){init_rough_esm(),init_logger(),init_icons(),init_intersect(),init_roundedRectPath(),init_handDrawnShapeStyles(),init_util(),__name(iconSquare,"iconSquare")}});async function imageSquare(parent4,node2,{config:{flowchart:flowchart}}){const img=new Image;img.src=node2?.img??"",await img.decode();const imageNaturalWidth=Number(img.naturalWidth.toString().replace("px","")),imageNaturalHeight=Number(img.naturalHeight.toString().replace("px",""));node2.imageAspectRatio=imageNaturalWidth/imageNaturalHeight;const{labelStyles:labelStyles}=styles2String(node2);node2.labelStyle=labelStyles;const defaultWidth=flowchart?.wrappingWidth;node2.defaultWidth=flowchart?.wrappingWidth;const imageRawWidth=Math.max(node2.label?defaultWidth??0:0,node2?.assetWidth??imageNaturalWidth),imageWidth="on"===node2.constraint&&node2?.assetHeight?node2.assetHeight*node2.imageAspectRatio:imageRawWidth,imageHeight="on"===node2.constraint?imageWidth/node2.imageAspectRatio:node2?.assetHeight??imageNaturalHeight;node2.width=Math.max(imageWidth,defaultWidth??0);const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,"image-shape default"),topLabel="t"===node2.pos,x5=-imageWidth/2,y6=-imageHeight/2,labelPadding=node2.label?8:0,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const imageNode=rc.rectangle(x5,y6,imageWidth,imageHeight,options2),outerWidth=Math.max(imageWidth,bbox.width),outerHeight=imageHeight+bbox.height+labelPadding,outerNode=rc.rectangle(-outerWidth/2,-outerHeight/2,outerWidth,outerHeight,{...options2,fill:"none",stroke:"none"}),iconShape=shapeSvg.insert(()=>imageNode,":first-child"),outerShape=shapeSvg.insert(()=>outerNode);if(node2.img){const image=shapeSvg.append("image");image.attr("href",node2.img),image.attr("width",imageWidth),image.attr("height",imageHeight),image.attr("preserveAspectRatio","none"),image.attr("transform",`translate(${-imageWidth/2},${topLabel?outerHeight/2-imageHeight:-outerHeight/2})`)}return label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))},${topLabel?-imageHeight/2-bbox.height/2-labelPadding/2:imageHeight/2-bbox.height/2+labelPadding/2})`),iconShape.attr("transform",`translate(0,${topLabel?bbox.height/2+labelPadding/2:-bbox.height/2-labelPadding/2})`),updateNodeBounds(node2,outerShape),node2.intersect=function(point8){if(log.info("iconSquare intersect",node2,point8),!node2.label)return intersect_default.rect(node2,point8);const dx=node2.x??0,dy=node2.y??0,nodeHeight=node2.height??0;let points=[];points=topLabel?[{x:dx-bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2},{x:dx+bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+imageWidth/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx+imageWidth/2,y:dy+nodeHeight/2},{x:dx-imageWidth/2,y:dy+nodeHeight/2},{x:dx-imageWidth/2,y:dy-nodeHeight/2+bbox.height+labelPadding},{x:dx-bbox.width/2,y:dy-nodeHeight/2+bbox.height+labelPadding}]:[{x:dx-imageWidth/2,y:dy-nodeHeight/2},{x:dx+imageWidth/2,y:dy-nodeHeight/2},{x:dx+imageWidth/2,y:dy-nodeHeight/2+imageHeight},{x:dx+bbox.width/2,y:dy-nodeHeight/2+imageHeight},{x:dx+bbox.width/2/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy+nodeHeight/2},{x:dx-bbox.width/2,y:dy-nodeHeight/2+imageHeight},{x:dx-imageWidth/2,y:dy-nodeHeight/2+imageHeight}];return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_imageSquare=__esm({"src/rendering-util/rendering-elements/shapes/imageSquare.ts"(){init_rough_esm(),init_logger(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(imageSquare,"imageSquare")}});async function inv_trapezoid(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),points=[{x:0,y:0},{x:w4,y:0},{x:w4+3*h3/6,y:-h3},{x:-3*h3/6,y:-h3}];let polygon2;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2);polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-w4/2}, ${h3/2})`),cssStyles&&polygon2.attr("style",cssStyles)}else polygon2=insertPolygonShape(shapeSvg,w4,h3,points);return nodeStyles&&polygon2.attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_invertedTrapezoid=__esm({"src/rendering-util/rendering-elements/shapes/invertedTrapezoid.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),__name(inv_trapezoid,"inv_trapezoid")}});async function drawRect3(parent4,node2,options2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),totalWidth=Math.max(bbox.width+2*options2.labelPaddingX,node2?.width||0),totalHeight=Math.max(bbox.height+2*options2.labelPaddingY,node2?.height||0),x5=-totalWidth/2,y6=-totalHeight/2;let rect3,{rx:rx,ry:ry}=node2;const{cssStyles:cssStyles}=node2;if(options2?.rx&&options2.ry&&(rx=options2.rx,ry=options2.ry),"handDrawn"===node2.look){const rc=at.svg(shapeSvg),options3=userNodeOverrides(node2,{}),roughNode=rx||ry?rc.path(createRoundedRectPathD(x5,y6,totalWidth,totalHeight,rx||0),options3):rc.rectangle(x5,y6,totalWidth,totalHeight,options3);rect3=shapeSvg.insert(()=>roughNode,":first-child"),rect3.attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles))}else rect3=shapeSvg.insert("rect",":first-child"),rect3.attr("class","basic label-container").attr("style",nodeStyles).attr("rx",handleUndefinedAttr(rx)).attr("ry",handleUndefinedAttr(ry)).attr("x",x5).attr("y",y6).attr("width",totalWidth).attr("height",totalHeight);return updateNodeBounds(node2,rect3),node2.calcIntersect=function(bounds4,point8){return intersect_default.rect(bounds4,point8)},node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_drawRect=__esm({"src/rendering-util/rendering-elements/shapes/drawRect.ts"(){init_util(),init_intersect(),init_roundedRectPath(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),__name(drawRect3,"drawRect")}});async function labelRect(parent4,node2){const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,"label"),rect3=shapeSvg.insert("rect",":first-child");return rect3.attr("width",.1).attr("height",.1),shapeSvg.attr("class","label edgeLabel"),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))}, ${-bbox.height/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_labelRect=__esm({"src/rendering-util/rendering-elements/shapes/labelRect.ts"(){init_drawRect(),init_util(),init_intersect(),__name(labelRect,"labelRect")}});async function lean_left(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+(node2.padding??0),node2?.height??0),points=[{x:0,y:0},{x:w4+3*h3/6,y:0},{x:w4,y:-h3},{x:-3*h3/6,y:-h3}];let polygon2;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2);polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-w4/2}, ${h3/2})`),cssStyles&&polygon2.attr("style",cssStyles)}else polygon2=insertPolygonShape(shapeSvg,w4,h3,points);return nodeStyles&&polygon2.attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_leanLeft=__esm({"src/rendering-util/rendering-elements/shapes/leanLeft.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),__name(lean_left,"lean_left")}});async function lean_right(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+(node2.padding??0),node2?.height??0),points=[{x:-3*h3/6,y:0},{x:w4,y:0},{x:w4+3*h3/6,y:-h3},{x:0,y:-h3}];let polygon2;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2);polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-w4/2}, ${h3/2})`),cssStyles&&polygon2.attr("style",cssStyles)}else polygon2=insertPolygonShape(shapeSvg,w4,h3,points);return nodeStyles&&polygon2.attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_leanRight=__esm({"src/rendering-util/rendering-elements/shapes/leanRight.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),__name(lean_right,"lean_right")}});function lightningBolt(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.label="",node2.labelStyle=labelStyles;const shapeSvg=parent4.insert("g").attr("class",getNodeClasses(node2)).attr("id",node2.domId??node2.id),{cssStyles:cssStyles}=node2,width3=Math.max(35,node2?.width??0),height2=Math.max(35,node2?.height??0),points=[{x:width3,y:0},{x:0,y:height2+3.5},{x:width3-14,y:height2+3.5},{x:0,y:2*height2},{x:width3,y:height2-3.5},{x:14,y:height2-3.5}],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const linePath=createPathFromPoints(points),lineNode=rc.path(linePath,options2),lightningBolt2=shapeSvg.insert(()=>lineNode,":first-child");return cssStyles&&"handDrawn"!==node2.look&&lightningBolt2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&lightningBolt2.selectAll("path").attr("style",nodeStyles),lightningBolt2.attr("transform",`translate(-${width3/2},${-height2})`),updateNodeBounds(node2,lightningBolt2),node2.intersect=function(point8){log.info("lightningBolt intersect",node2,point8);return intersect_default.polygon(node2,points,point8)},shapeSvg}var createCylinderPathD2,createOuterCylinderPathD2,createInnerCylinderPathD2,init_lightningBolt=__esm({"src/rendering-util/rendering-elements/shapes/lightningBolt.ts"(){init_logger(),init_util(),init_handDrawnShapeStyles(),init_rough_esm(),init_intersect(),init_util(),__name(lightningBolt,"lightningBolt")}});async function linedCylinder(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+(node2.padding??0),node2.width??0),rx=w4/2,ry=rx/(2.5+w4/50),h3=Math.max(bbox.height+ry+(node2.padding??0),node2.height??0),outerOffset=.1*h3;let cylinder3;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),outerPathData=createOuterCylinderPathD2(0,0,w4,h3,rx,ry,outerOffset),innerPathData=createInnerCylinderPathD2(0,ry,w4,h3,rx,ry),options2=userNodeOverrides(node2,{}),outerNode=rc.path(outerPathData,options2),innerLine=rc.path(innerPathData,options2);shapeSvg.insert(()=>innerLine,":first-child").attr("class","line"),cylinder3=shapeSvg.insert(()=>outerNode,":first-child"),cylinder3.attr("class","basic label-container"),cssStyles&&cylinder3.attr("style",cssStyles)}else{const pathData=createCylinderPathD2(0,0,w4,h3,rx,ry,outerOffset);cylinder3=shapeSvg.insert("path",":first-child").attr("d",pathData).attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles)).attr("style",nodeStyles)}return cylinder3.attr("label-offset-y",ry),cylinder3.attr("transform",`translate(${-w4/2}, ${-(h3/2+ry)})`),updateNodeBounds(node2,cylinder3),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))}, ${-bbox.height/2+ry-(bbox.y-(bbox.top??0))})`),node2.intersect=function(point8){const pos=intersect_default.rect(node2,point8),x5=pos.x-(node2.x??0);if(0!=rx&&(Math.abs(x5)<(node2.width??0)/2||Math.abs(x5)==(node2.width??0)/2&&Math.abs(pos.y-(node2.y??0))>(node2.height??0)/2-ry)){let y6=ry*ry*(1-x5*x5/(rx*rx));y6>0&&(y6=Math.sqrt(y6)),y6=ry-y6,point8.y-(node2.y??0)>0&&(y6=-y6),pos.y+=y6}return pos},shapeSvg}var init_linedCylinder=__esm({"src/rendering-util/rendering-elements/shapes/linedCylinder.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),createCylinderPathD2=__name((x5,y6,width3,height2,rx,ry,outerOffset)=>[`M${x5},${y6+ry}`,`a${rx},${ry} 0,0,0 ${width3},0`,`a${rx},${ry} 0,0,0 ${-width3},0`,`l0,${height2}`,`a${rx},${ry} 0,0,0 ${width3},0`,"l0,"+-height2,`M${x5},${y6+ry+outerOffset}`,`a${rx},${ry} 0,0,0 ${width3},0`].join(" "),"createCylinderPathD"),createOuterCylinderPathD2=__name((x5,y6,width3,height2,rx,ry,outerOffset)=>[`M${x5},${y6+ry}`,`M${x5+width3},${y6+ry}`,`a${rx},${ry} 0,0,0 ${-width3},0`,`l0,${height2}`,`a${rx},${ry} 0,0,0 ${width3},0`,"l0,"+-height2,`M${x5},${y6+ry+outerOffset}`,`a${rx},${ry} 0,0,0 ${width3},0`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD2=__name((x5,y6,width3,height2,rx,ry)=>[`M${x5-width3/2},${-height2/2}`,`a${rx},${ry} 0,0,0 ${width3},0`].join(" "),"createInnerCylinderPathD"),__name(linedCylinder,"linedCylinder")}});async function linedWaveEdgedRect(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),waveAmplitude=h3/4,finalH=h3+waveAmplitude,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2-w4/2*.1,y:-finalH/2},{x:-w4/2-w4/2*.1,y:finalH/2},...generateFullSineWavePoints(-w4/2-w4/2*.1,finalH/2,w4/2+w4/2*.1,finalH/2,waveAmplitude,.8),{x:w4/2+w4/2*.1,y:-finalH/2},{x:-w4/2-w4/2*.1,y:-finalH/2},{x:-w4/2,y:-finalH/2},{x:-w4/2,y:finalH/2*1.1},{x:-w4/2,y:-finalH/2}],poly=rc.polygon(points.map(p3=>[p3.x,p3.y]),options2),waveEdgeRect=shapeSvg.insert(()=>poly,":first-child");return waveEdgeRect.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&waveEdgeRect.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&waveEdgeRect.selectAll("path").attr("style",nodeStyles),waveEdgeRect.attr("transform",`translate(0,${-waveAmplitude/2})`),label.attr("transform",`translate(${-w4/2+(node2.padding??0)+w4/2*.1/2-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)-waveAmplitude/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,waveEdgeRect),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_linedWaveEdgedRect=__esm({"src/rendering-util/rendering-elements/shapes/linedWaveEdgedRect.ts"(){init_util(),init_intersect(),init_rough_esm(),init_handDrawnShapeStyles(),__name(linedWaveEdgedRect,"linedWaveEdgedRect")}});async function multiRect(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),x5=-w4/2,y6=-h3/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),outerPathPoints=[{x:x5-5,y:y6+5},{x:x5-5,y:y6+h3+5},{x:x5+w4-5,y:y6+h3+5},{x:x5+w4-5,y:y6+h3},{x:x5+w4,y:y6+h3},{x:x5+w4,y:y6+h3-5},{x:x5+w4+5,y:y6+h3-5},{x:x5+w4+5,y:y6-5},{x:x5+5,y:y6-5},{x:x5+5,y:y6},{x:x5,y:y6},{x:x5,y:y6+5}],innerPathPoints=[{x:x5,y:y6+5},{x:x5+w4-5,y:y6+5},{x:x5+w4-5,y:y6+h3},{x:x5+w4,y:y6+h3},{x:x5+w4,y:y6},{x:x5,y:y6}];"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const outerPath=createPathFromPoints(outerPathPoints),outerNode=rc.path(outerPath,options2),innerPath3=createPathFromPoints(innerPathPoints),innerNode=rc.path(innerPath3,{...options2,fill:"none"}),multiRect2=shapeSvg.insert(()=>innerNode,":first-child");return multiRect2.insert(()=>outerNode,":first-child"),multiRect2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&multiRect2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&multiRect2.selectAll("path").attr("style",nodeStyles),label.attr("transform",`translate(${-bbox.width/2-5-(bbox.x-(bbox.left??0))}, ${-bbox.height/2+5-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,multiRect2),node2.intersect=function(point8){return intersect_default.polygon(node2,outerPathPoints,point8)},shapeSvg}var init_multiRect=__esm({"src/rendering-util/rendering-elements/shapes/multiRect.ts"(){init_util(),init_handDrawnShapeStyles(),init_rough_esm(),init_intersect(),__name(multiRect,"multiRect")}});async function multiWaveEdgedRectangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),waveAmplitude=h3/4,finalH=h3+waveAmplitude,x5=-w4/2,y6=-finalH/2,{cssStyles:cssStyles}=node2,wavePoints=generateFullSineWavePoints(x5-5,y6+finalH+5,x5+w4-5,y6+finalH+5,waveAmplitude,.8),lastWavePoint=wavePoints?.[wavePoints.length-1],outerPathPoints=[{x:x5-5,y:y6+5},{x:x5-5,y:y6+finalH+5},...wavePoints,{x:x5+w4-5,y:lastWavePoint.y-5},{x:x5+w4,y:lastWavePoint.y-5},{x:x5+w4,y:lastWavePoint.y-10},{x:x5+w4+5,y:lastWavePoint.y-10},{x:x5+w4+5,y:y6-5},{x:x5+5,y:y6-5},{x:x5+5,y:y6},{x:x5,y:y6},{x:x5,y:y6+5}],innerPathPoints=[{x:x5,y:y6+5},{x:x5+w4-5,y:y6+5},{x:x5+w4-5,y:lastWavePoint.y-5},{x:x5+w4,y:lastWavePoint.y-5},{x:x5+w4,y:y6},{x:x5,y:y6}],rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const outerPath=createPathFromPoints(outerPathPoints),outerNode=rc.path(outerPath,options2),innerPath3=createPathFromPoints(innerPathPoints),innerNode=rc.path(innerPath3,options2),shape=shapeSvg.insert(()=>outerNode,":first-child");return shape.insert(()=>innerNode),shape.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&shape.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&shape.selectAll("path").attr("style",nodeStyles),shape.attr("transform",`translate(0,${-waveAmplitude/2})`),label.attr("transform",`translate(${-bbox.width/2-5-(bbox.x-(bbox.left??0))}, ${-bbox.height/2+5-waveAmplitude/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,shape),node2.intersect=function(point8){return intersect_default.polygon(node2,outerPathPoints,point8)},shapeSvg}var init_multiWaveEdgedRectangle=__esm({"src/rendering-util/rendering-elements/shapes/multiWaveEdgedRectangle.ts"(){init_util(),init_intersect(),init_rough_esm(),init_handDrawnShapeStyles(),__name(multiWaveEdgedRectangle,"multiWaveEdgedRectangle")}});async function note(parent4,node2,{config:{themeVariables:themeVariables}}){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;node2.useHtmlLabels||!1!==getConfig().flowchart?.htmlLabels||(node2.centerLabel=!0);const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),totalWidth=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),totalHeight=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),x5=-totalWidth/2,y6=-totalHeight/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{fill:themeVariables.noteBkgColor,stroke:themeVariables.noteBorderColor});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const noteShapeNode=rc.rectangle(x5,y6,totalWidth,totalHeight,options2),rect3=shapeSvg.insert(()=>noteShapeNode,":first-child");return rect3.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&rect3.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&rect3.selectAll("path").attr("style",nodeStyles),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))}, ${-bbox.height/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var createDecisionBoxPathD,init_note=__esm({"src/rendering-util/rendering-elements/shapes/note.ts"(){init_rough_esm(),init_intersect(),init_handDrawnShapeStyles(),init_util(),init_config(),__name(note,"note")}});async function question(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),s2=bbox.width+node2.padding+(bbox.height+node2.padding),points=[{x:s2/2,y:0},{x:s2,y:-s2/2},{x:s2/2,y:-s2},{x:0,y:-s2/2}];let polygon2;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),pathData=createDecisionBoxPathD(0,0,s2),roughNode=rc.path(pathData,options2);polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-s2/2+.5}, ${s2/2})`),cssStyles&&polygon2.attr("style",cssStyles)}else polygon2=insertPolygonShape(shapeSvg,s2,s2,points),polygon2.attr("transform",`translate(${-s2/2+.5}, ${s2/2})`);return nodeStyles&&polygon2.attr("style",nodeStyles),updateNodeBounds(node2,polygon2),node2.calcIntersect=function(bounds4,point8){const s3=bounds4.width,points2=[{x:s3/2,y:0},{x:s3,y:-s3/2},{x:s3/2,y:-s3},{x:0,y:-s3/2}],res=intersect_default.polygon(bounds4,points2,point8);return{x:res.x-.5,y:res.y-.5}},node2.intersect=function(point8){return this.calcIntersect(node2,point8)},shapeSvg}var init_question=__esm({"src/rendering-util/rendering-elements/shapes/question.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),createDecisionBoxPathD=__name((x5,y6,size4)=>[`M${x5+size4/2},${y6}`,`L${x5+size4},${y6-size4/2}`,`L${x5+size4/2},${y6-size4}`,`L${x5},${y6-size4/2}`,"Z"].join(" "),"createDecisionBoxPathD"),__name(question,"question")}});async function rect_left_inv_arrow(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),x5=-Math.max(bbox.width+(node2.padding??0),node2?.width??0)/2,y6=-Math.max(bbox.height+(node2.padding??0),node2?.height??0)/2,notch=y6/2,points=[{x:x5+notch,y:y6},{x:x5,y:0},{x:x5+notch,y:-y6},{x:-x5,y:-y6},{x:-x5,y:y6}],{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>roughNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectAll("path").attr("style",nodeStyles),polygon2.attr("transform",`translate(${-notch/2},0)`),label.attr("transform",`translate(${-notch/2-bbox.width/2-(bbox.x-(bbox.left??0))}, ${-bbox.height/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var createLabel_default,init_rectLeftInvArrow=__esm({"src/rendering-util/rendering-elements/shapes/rectLeftInvArrow.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(rect_left_inv_arrow,"rect_left_inv_arrow")}});function applyStyle2(dom,styleFn){styleFn&&dom.attr("style",styleFn)}async function addHtmlLabel(node2){const fo=select_default2(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),div=fo.append("xhtml:div"),config5=getConfig2();let label=node2.label;node2.label&&hasKatex(node2.label)&&(label=await renderKatexSanitized(node2.label.replace(common_default.lineBreakRegex,"\n"),config5));const labelSpan='<span class="'+(node2.isNode?"nodeLabel":"edgeLabel")+'" '+(node2.labelStyle?'style="'+node2.labelStyle+'"':"")+">"+label+"</span>";return div.html(sanitizeText(labelSpan,config5)),applyStyle2(div,node2.labelStyle),div.style("display","inline-block"),div.style("padding-right","1px"),div.style("white-space","nowrap"),div.attr("xmlns","http://www.w3.org/1999/xhtml"),fo.node()}var init_createLabel=__esm({"src/rendering-util/rendering-elements/createLabel.js"(){init_src32(),init_diagramAPI(),init_common(),init_logger(),init_utils2(),__name(applyStyle2,"applyStyle"),__name(addHtmlLabel,"addHtmlLabel"),createLabel_default=__name(async(_vertexText,style3,isTitle,isNode2)=>{let vertexText=_vertexText||"";if("object"==typeof vertexText&&(vertexText=vertexText[0]),evaluate(getConfig2().flowchart.htmlLabels)){vertexText=vertexText.replace(/\\n|\n/g,"<br />"),log.info("vertexText"+vertexText);const node2={isNode:isNode2,label:decodeEntities(vertexText).replace(/fa[blrs]?:fa-[\w-]+/g,s2=>`<i class='${s2.replace(":"," ")}'></i>`),labelStyle:style3?style3.replace("fill:","color:"):style3};return await addHtmlLabel(node2)}{const svgLabel=document.createElementNS("http://www.w3.org/2000/svg","text");svgLabel.setAttribute("style",style3.replace("color:","fill:"));let rows=[];rows="string"==typeof vertexText?vertexText.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(vertexText)?vertexText:[];for(const row of rows){const tspan=document.createElementNS("http://www.w3.org/2000/svg","tspan");tspan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),tspan.setAttribute("dy","1em"),tspan.setAttribute("x","0"),isTitle?tspan.setAttribute("class","title-row"):tspan.setAttribute("class","row"),tspan.textContent=row.trim(),svgLabel.appendChild(tspan)}return svgLabel}},"createLabel")}});async function rectWithTitle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);let classes3;node2.labelStyle=labelStyles,classes3=node2.cssClasses?"node "+node2.cssClasses:"node default";const shapeSvg=parent4.insert("g").attr("class",classes3).attr("id",node2.domId||node2.id),g2=shapeSvg.insert("g"),label=shapeSvg.insert("g").attr("class","label").attr("style",nodeStyles),description=node2.description,title2=node2.label,text4=label.node().appendChild(await createLabel_default(title2,node2.labelStyle,!0,!0));let bbox={width:0,height:0};if(evaluate(getConfig2()?.flowchart?.htmlLabels)){const div2=text4.children[0],dv2=select_default2(text4);bbox=div2.getBoundingClientRect(),dv2.attr("width",bbox.width),dv2.attr("height",bbox.height)}log.info("Text 2",description);const textRows=description||[],titleBox=text4.getBBox(),descr=label.node().appendChild(await createLabel_default(textRows.join?textRows.join("<br/>"):textRows,node2.labelStyle,!0,!0)),div=descr.children[0],dv=select_default2(descr);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height);const halfPadding=(node2.padding||0)/2;select_default2(descr).attr("transform","translate( "+(bbox.width>titleBox.width?0:(titleBox.width-bbox.width)/2)+", "+(titleBox.height+halfPadding+5)+")"),select_default2(text4).attr("transform","translate( "+(bbox.width<titleBox.width?0:-(titleBox.width-bbox.width)/2)+", 0)"),bbox=label.node().getBBox(),label.attr("transform","translate("+-bbox.width/2+", "+(-bbox.height/2-halfPadding+3)+")");const totalWidth=bbox.width+(node2.padding||0),totalHeight=bbox.height+(node2.padding||0),x5=-bbox.width/2-halfPadding,y6=-bbox.height/2-halfPadding;let rect3,innerLine;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),roughNode=rc.path(createRoundedRectPathD(x5,y6,totalWidth,totalHeight,node2.rx||0),options2),roughLine=rc.line(-bbox.width/2-halfPadding,-bbox.height/2-halfPadding+titleBox.height+halfPadding,bbox.width/2+halfPadding,-bbox.height/2-halfPadding+titleBox.height+halfPadding,options2);innerLine=shapeSvg.insert(()=>(log.debug("Rough node insert CXC",roughNode),roughLine),":first-child"),rect3=shapeSvg.insert(()=>(log.debug("Rough node insert CXC",roughNode),roughNode),":first-child")}else rect3=g2.insert("rect",":first-child"),innerLine=g2.insert("line"),rect3.attr("class","outer title-state").attr("style",nodeStyles).attr("x",-bbox.width/2-halfPadding).attr("y",-bbox.height/2-halfPadding).attr("width",bbox.width+(node2.padding||0)).attr("height",bbox.height+(node2.padding||0)),innerLine.attr("class","divider").attr("x1",-bbox.width/2-halfPadding).attr("x2",bbox.width/2+halfPadding).attr("y1",-bbox.height/2-halfPadding+titleBox.height+halfPadding).attr("y2",-bbox.height/2-halfPadding+titleBox.height+halfPadding);return updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_rectWithTitle=__esm({"src/rendering-util/rendering-elements/shapes/rectWithTitle.ts"(){init_src32(),init_common(),init_util(),init_createLabel(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_diagramAPI(),init_roundedRectPath(),init_logger(),__name(rectWithTitle,"rectWithTitle")}});function generateArcPoints2(x1,y1,x22,y22,rx,ry,clockwise){const midX=(x1+x22)/2,midY=(y1+y22)/2,angle2=Math.atan2(y22-y1,x22-x1),transformedX=(x22-x1)/2/rx,transformedY=(y22-y1)/2/ry,distance2=Math.sqrt(transformedX**2+transformedY**2);if(distance2>1)throw new Error("The given radii are too small to create an arc between the points.");const scaledCenterDistance=Math.sqrt(1-distance2**2),centerX=midX+scaledCenterDistance*ry*Math.sin(angle2)*(clockwise?-1:1),centerY=midY-scaledCenterDistance*rx*Math.cos(angle2)*(clockwise?-1:1),startAngle=Math.atan2((y1-centerY)/ry,(x1-centerX)/rx);let angleRange=Math.atan2((y22-centerY)/ry,(x22-centerX)/rx)-startAngle;clockwise&&angleRange<0&&(angleRange+=2*Math.PI),!clockwise&&angleRange>0&&(angleRange-=2*Math.PI);const points=[];for(let i2=0;i2<20;i2++){const angle3=startAngle+i2/19*angleRange,x5=centerX+rx*Math.cos(angle3),y6=centerY+ry*Math.sin(angle3);points.push({x:x5,y:y6})}return points}async function roundedRect(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),labelPaddingX=node2?.padding??0,labelPaddingY=node2?.padding??0,w4=(node2?.width?node2?.width:bbox.width)+2*labelPaddingX,h3=(node2?.height?node2?.height:bbox.height)+2*labelPaddingY,radius2=node2.radius||5,taper=node2.taper||5,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});node2.stroke&&(options2.stroke=node2.stroke),"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2+taper,y:-h3/2},{x:w4/2-taper,y:-h3/2},...generateArcPoints2(w4/2-taper,-h3/2,w4/2,-h3/2+taper,radius2,radius2,!0),{x:w4/2,y:-h3/2+taper},{x:w4/2,y:h3/2-taper},...generateArcPoints2(w4/2,h3/2-taper,w4/2-taper,h3/2,radius2,radius2,!0),{x:w4/2-taper,y:h3/2},{x:-w4/2+taper,y:h3/2},...generateArcPoints2(-w4/2+taper,h3/2,-w4/2,h3/2-taper,radius2,radius2,!0),{x:-w4/2,y:h3/2-taper},{x:-w4/2,y:-h3/2+taper},...generateArcPoints2(-w4/2,-h3/2+taper,-w4/2+taper,-h3/2,radius2,radius2,!0)],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container outer-path"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_roundedRect=__esm({"src/rendering-util/rendering-elements/shapes/roundedRect.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(generateArcPoints2,"generateArcPoints"),__name(roundedRect,"roundedRect")}});async function shadedProcess(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),halfPadding=node2?.padding??0,w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),x5=-bbox.width/2-halfPadding,y6=-bbox.height/2-halfPadding,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:x5,y:y6},{x:x5+w4+8,y:y6},{x:x5+w4+8,y:y6+h3},{x:x5-8,y:y6+h3},{x:x5-8,y:y6},{x:x5,y:y6},{x:x5,y:y6+h3}],roughNode=rc.polygon(points.map(p3=>[p3.x,p3.y]),options2),rect3=shapeSvg.insert(()=>roughNode,":first-child");return rect3.attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles)),nodeStyles&&"handDrawn"!==node2.look&&rect3.selectAll("path").attr("style",nodeStyles),cssStyles&&"handDrawn"!==node2.look&&rect3.selectAll("path").attr("style",nodeStyles),label.attr("transform",`translate(${-w4/2+4+(node2.padding??0)-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_shadedProcess=__esm({"src/rendering-util/rendering-elements/shapes/shadedProcess.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),__name(shadedProcess,"shadedProcess")}});async function slopedRect(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),x5=-w4/2,y6=-h3/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:x5,y:y6},{x:x5,y:y6+h3},{x:x5+w4,y:y6+h3},{x:x5+w4,y:y6-h3/2}],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),polygon2.attr("transform",`translate(0, ${h3/4})`),label.attr("transform",`translate(${-w4/2+(node2.padding??0)-(bbox.x-(bbox.left??0))}, ${-h3/4+(node2.padding??0)-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_slopedRect=__esm({"src/rendering-util/rendering-elements/shapes/slopedRect.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(slopedRect,"slopedRect")}});async function squareRect(parent4,node2){return drawRect3(parent4,node2,{rx:0,ry:0,classes:"",labelPaddingX:node2.labelPaddingX??2*(node2?.padding||0),labelPaddingY:1*(node2?.padding||0)})}var init_squareRect=__esm({"src/rendering-util/rendering-elements/shapes/squareRect.ts"(){init_drawRect(),__name(squareRect,"squareRect")}});async function stadium(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),h3=bbox.height+node2.padding,w4=bbox.width+h3/4+node2.padding,radius2=h3/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2+radius2,y:-h3/2},{x:w4/2-radius2,y:-h3/2},...generateCirclePoints(-w4/2+radius2,0,radius2,50,90,270),{x:w4/2-radius2,y:h3/2},...generateCirclePoints(w4/2-radius2,0,radius2,50,270,450)],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container outer-path"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_stadium=__esm({"src/rendering-util/rendering-elements/shapes/stadium.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(stadium,"stadium")}});async function state(parent4,node2){return drawRect3(parent4,node2,{rx:5,ry:5,classes:"flowchart-node"})}var init_state=__esm({"src/rendering-util/rendering-elements/shapes/state.ts"(){init_drawRect(),__name(state,"state")}});function stateEnd(parent4,node2,{config:{themeVariables:themeVariables}}){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{cssStyles:cssStyles}=node2,{lineColor:lineColor,stateBorder:stateBorder,nodeBorder:nodeBorder}=themeVariables,shapeSvg=parent4.insert("g").attr("class","node default").attr("id",node2.domId||node2.id),rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const roughNode=rc.circle(0,0,14,{...options2,stroke:lineColor,strokeWidth:2}),innerFill=stateBorder??nodeBorder,roughInnerNode=rc.circle(0,0,5,{...options2,fill:innerFill,stroke:innerFill,strokeWidth:2,fillStyle:"solid"}),circle6=shapeSvg.insert(()=>roughNode,":first-child");return circle6.insert(()=>roughInnerNode),cssStyles&&circle6.selectAll("path").attr("style",cssStyles),nodeStyles&&circle6.selectAll("path").attr("style",nodeStyles),updateNodeBounds(node2,circle6),node2.intersect=function(point8){return intersect_default.circle(node2,7,point8)},shapeSvg}var init_stateEnd=__esm({"src/rendering-util/rendering-elements/shapes/stateEnd.ts"(){init_rough_esm(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(stateEnd,"stateEnd")}});function stateStart(parent4,node2,{config:{themeVariables:themeVariables}}){const{lineColor:lineColor}=themeVariables,shapeSvg=parent4.insert("g").attr("class","node default").attr("id",node2.domId||node2.id);let circle6;if("handDrawn"===node2.look){const roughNode=at.svg(shapeSvg).circle(0,0,14,solidStateFill(lineColor));circle6=shapeSvg.insert(()=>roughNode),circle6.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else circle6=shapeSvg.insert("circle",":first-child"),circle6.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return updateNodeBounds(node2,circle6),node2.intersect=function(point8){return intersect_default.circle(node2,7,point8)},shapeSvg}var init_stateStart=__esm({"src/rendering-util/rendering-elements/shapes/stateStart.ts"(){init_rough_esm(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(stateStart,"stateStart")}});async function subroutine(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),halfPadding=(node2?.padding||0)/2,w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,x5=-bbox.width/2-halfPadding,y6=-bbox.height/2-halfPadding,points=[{x:0,y:0},{x:w4,y:0},{x:w4,y:-h3},{x:0,y:-h3},{x:0,y:0},{x:-8,y:0},{x:w4+8,y:0},{x:w4+8,y:-h3},{x:-8,y:-h3},{x:-8,y:0}];if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),roughNode=rc.rectangle(x5-8,y6,w4+16,h3,options2),l1=rc.line(x5,y6,x5,y6+h3,options2),l22=rc.line(x5+w4,y6,x5+w4,y6+h3,options2);shapeSvg.insert(()=>l1,":first-child"),shapeSvg.insert(()=>l22,":first-child");const rect3=shapeSvg.insert(()=>roughNode,":first-child"),{cssStyles:cssStyles}=node2;rect3.attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles)),updateNodeBounds(node2,rect3)}else{const el=insertPolygonShape(shapeSvg,w4,h3,points);nodeStyles&&el.attr("style",nodeStyles),updateNodeBounds(node2,el)}return node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_subroutine=__esm({"src/rendering-util/rendering-elements/shapes/subroutine.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),init_utils2(),__name(subroutine,"subroutine")}});async function taggedRect(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),x5=-w4/2,y6=-h3/2,tagWidth=.2*h3,tagHeight=.2*h3,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),rectPoints=[{x:x5-tagWidth/2,y:y6},{x:x5+w4+tagWidth/2,y:y6},{x:x5+w4+tagWidth/2,y:y6+h3},{x:x5-tagWidth/2,y:y6+h3}],tagPoints=[{x:x5+w4-tagWidth/2,y:y6+h3},{x:x5+w4+tagWidth/2,y:y6+h3},{x:x5+w4+tagWidth/2,y:y6+h3-tagHeight}];"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const rectPath=createPathFromPoints(rectPoints),rectNode=rc.path(rectPath,options2),tagPath=createPathFromPoints(tagPoints),tagNode=rc.path(tagPath,{...options2,fillStyle:"solid"}),taggedRect2=shapeSvg.insert(()=>tagNode,":first-child");return taggedRect2.insert(()=>rectNode,":first-child"),taggedRect2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&taggedRect2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&taggedRect2.selectAll("path").attr("style",nodeStyles),updateNodeBounds(node2,taggedRect2),node2.intersect=function(point8){return intersect_default.polygon(node2,rectPoints,point8)},shapeSvg}var init_taggedRect=__esm({"src/rendering-util/rendering-elements/shapes/taggedRect.ts"(){init_util(),init_handDrawnShapeStyles(),init_rough_esm(),init_intersect(),__name(taggedRect,"taggedRect")}});async function taggedWaveEdgedRectangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),waveAmplitude=h3/4,tagWidth=.2*w4,tagHeight=.2*h3,finalH=h3+waveAmplitude,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2-w4/2*.1,y:finalH/2},...generateFullSineWavePoints(-w4/2-w4/2*.1,finalH/2,w4/2+w4/2*.1,finalH/2,waveAmplitude,.8),{x:w4/2+w4/2*.1,y:-finalH/2},{x:-w4/2-w4/2*.1,y:-finalH/2}],x5=-w4/2+w4/2*.1,y6=-finalH/2-.4*tagHeight,tagPoints=[{x:x5+w4-tagWidth,y:1.4*(y6+h3)},{x:x5+w4,y:y6+h3-tagHeight},{x:x5+w4,y:.9*(y6+h3)},...generateFullSineWavePoints(x5+w4,1.3*(y6+h3),x5+w4-tagWidth,1.5*(y6+h3),.03*-h3,.5)],waveEdgeRectPath=createPathFromPoints(points),waveEdgeRectNode=rc.path(waveEdgeRectPath,options2),taggedWaveEdgeRectPath=createPathFromPoints(tagPoints),taggedWaveEdgeRectNode=rc.path(taggedWaveEdgeRectPath,{...options2,fillStyle:"solid"}),waveEdgeRect=shapeSvg.insert(()=>taggedWaveEdgeRectNode,":first-child");return waveEdgeRect.insert(()=>waveEdgeRectNode,":first-child"),waveEdgeRect.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&waveEdgeRect.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&waveEdgeRect.selectAll("path").attr("style",nodeStyles),waveEdgeRect.attr("transform",`translate(0,${-waveAmplitude/2})`),label.attr("transform",`translate(${-w4/2+(node2.padding??0)-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)-waveAmplitude/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,waveEdgeRect),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_taggedWaveEdgedRectangle=__esm({"src/rendering-util/rendering-elements/shapes/taggedWaveEdgedRectangle.ts"(){init_util(),init_intersect(),init_rough_esm(),init_handDrawnShapeStyles(),__name(taggedWaveEdgedRectangle,"taggedWaveEdgedRectangle")}});async function text3(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),totalWidth=Math.max(bbox.width+node2.padding,node2?.width||0),totalHeight=Math.max(bbox.height+node2.padding,node2?.height||0),x5=-totalWidth/2,y6=-totalHeight/2,rect3=shapeSvg.insert("rect",":first-child");return rect3.attr("class","text").attr("style",nodeStyles).attr("rx",0).attr("ry",0).attr("x",x5).attr("y",y6).attr("width",totalWidth).attr("height",totalHeight),updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var createCylinderPathD3,createOuterCylinderPathD3,createInnerCylinderPathD3,init_text3=__esm({"src/rendering-util/rendering-elements/shapes/text.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),__name(text3,"text")}});async function tiltedCylinder(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label,halfPadding:halfPadding}=await labelHelper(parent4,node2,getNodeClasses(node2)),labelPadding="neo"===node2.look?2*halfPadding:halfPadding,h3=bbox.height+labelPadding,ry=h3/2,rx=ry/(2.5+h3/50),w4=bbox.width+rx+labelPadding,{cssStyles:cssStyles}=node2;let cylinder3;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),outerPathData=createOuterCylinderPathD3(0,0,w4,h3,rx,ry),innerPathData=createInnerCylinderPathD3(0,0,w4,h3,rx,ry),outerNode=rc.path(outerPathData,userNodeOverrides(node2,{})),innerLine=rc.path(innerPathData,userNodeOverrides(node2,{fill:"none"}));cylinder3=shapeSvg.insert(()=>innerLine,":first-child"),cylinder3=shapeSvg.insert(()=>outerNode,":first-child"),cylinder3.attr("class","basic label-container"),cssStyles&&cylinder3.attr("style",cssStyles)}else{const pathData=createCylinderPathD3(0,0,w4,h3,rx,ry);cylinder3=shapeSvg.insert("path",":first-child").attr("d",pathData).attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles)).attr("style",nodeStyles),cylinder3.attr("class","basic label-container"),cssStyles&&cylinder3.selectAll("path").attr("style",cssStyles),nodeStyles&&cylinder3.selectAll("path").attr("style",nodeStyles)}return cylinder3.attr("label-offset-x",rx),cylinder3.attr("transform",`translate(${-w4/2}, ${h3/2} )`),label.attr("transform",`translate(${-bbox.width/2-rx-(bbox.x-(bbox.left??0))}, ${-bbox.height/2-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,cylinder3),node2.intersect=function(point8){const pos=intersect_default.rect(node2,point8),y6=pos.y-(node2.y??0);if(0!=ry&&(Math.abs(y6)<(node2.height??0)/2||Math.abs(y6)==(node2.height??0)/2&&Math.abs(pos.x-(node2.x??0))>(node2.width??0)/2-rx)){let x5=rx*rx*(1-y6*y6/(ry*ry));0!=x5&&(x5=Math.sqrt(Math.abs(x5))),x5=rx-x5,point8.x-(node2.x??0)>0&&(x5=-x5),pos.x+=x5}return pos},shapeSvg}var init_tiltedCylinder=__esm({"src/rendering-util/rendering-elements/shapes/tiltedCylinder.ts"(){init_util(),init_handDrawnShapeStyles(),init_rough_esm(),init_intersect(),init_utils2(),createCylinderPathD3=__name((x5,y6,width3,height2,rx,ry)=>`M${x5},${y6}\n    a${rx},${ry} 0,0,1 0,${-height2}\n    l${width3},0\n    a${rx},${ry} 0,0,1 0,${height2}\n    M${width3},${-height2}\n    a${rx},${ry} 0,0,0 0,${height2}\n    l${-width3},0`,"createCylinderPathD"),createOuterCylinderPathD3=__name((x5,y6,width3,height2,rx,ry)=>[`M${x5},${y6}`,`M${x5+width3},${y6}`,`a${rx},${ry} 0,0,0 0,${-height2}`,`l${-width3},0`,`a${rx},${ry} 0,0,0 0,${height2}`,`l${width3},0`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD3=__name((x5,y6,width3,height2,rx,ry)=>[`M${x5+width3/2},${-height2/2}`,`a${rx},${ry} 0,0,0 0,${height2}`].join(" "),"createInnerCylinderPathD"),__name(tiltedCylinder,"tiltedCylinder")}});async function trapezoid(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:-3*h3/6,y:0},{x:w4+3*h3/6,y:0},{x:w4,y:-h3},{x:0,y:-h3}];let polygon2;const{cssStyles:cssStyles}=node2;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2);polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-w4/2}, ${h3/2})`),cssStyles&&polygon2.attr("style",cssStyles)}else polygon2=insertPolygonShape(shapeSvg,w4,h3,points);return nodeStyles&&polygon2.attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_trapezoid=__esm({"src/rendering-util/rendering-elements/shapes/trapezoid.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_insertPolygonShape(),__name(trapezoid,"trapezoid")}});async function trapezoidalPentagon(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(60,bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(20,bbox.height+2*(node2.padding??0),node2?.height??0),{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2*.8,y:-h3/2},{x:w4/2*.8,y:-h3/2},{x:w4/2,y:-h3/2*.6},{x:w4/2,y:h3/2},{x:-w4/2,y:h3/2},{x:-w4/2,y:-h3/2*.6}],pathData=createPathFromPoints(points),shapeNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>shapeNode,":first-child");return polygon2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),updateNodeBounds(node2,polygon2),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_trapezoidalPentagon=__esm({"src/rendering-util/rendering-elements/shapes/trapezoidalPentagon.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(trapezoidalPentagon,"trapezoidalPentagon")}});async function triangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),useHtmlLabels=evaluate(getConfig2().flowchart?.htmlLabels),w4=bbox.width+(node2.padding??0),h3=w4+bbox.height,tw=w4+bbox.height,points=[{x:0,y:0},{x:tw,y:0},{x:tw/2,y:-h3}],{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const pathData=createPathFromPoints(points),roughNode=rc.path(pathData,options2),polygon2=shapeSvg.insert(()=>roughNode,":first-child").attr("transform",`translate(${-h3/2}, ${h3/2})`);return cssStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&polygon2.selectChildren("path").attr("style",nodeStyles),node2.width=w4,node2.height=h3,updateNodeBounds(node2,polygon2),label.attr("transform",`translate(${-bbox.width/2-(bbox.x-(bbox.left??0))}, ${h3/2-(bbox.height+(node2.padding??0)/(useHtmlLabels?2:1)-(bbox.y-(bbox.top??0)))})`),node2.intersect=function(point8){return log.info("Triangle intersect",node2,points,point8),intersect_default.polygon(node2,points,point8)},shapeSvg}var init_triangle=__esm({"src/rendering-util/rendering-elements/shapes/triangle.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_util(),init_common(),init_diagramAPI(),__name(triangle,"triangle")}});async function waveEdgedRectangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),waveAmplitude=h3/8,finalH=h3+waveAmplitude,{cssStyles:cssStyles}=node2,widthDif=70-w4,extraW=widthDif>0?widthDif/2:0,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2-extraW,y:finalH/2},...generateFullSineWavePoints(-w4/2-extraW,finalH/2,w4/2+extraW,finalH/2,waveAmplitude,.8),{x:w4/2+extraW,y:-finalH/2},{x:-w4/2-extraW,y:-finalH/2}],waveEdgeRectPath=createPathFromPoints(points),waveEdgeRectNode=rc.path(waveEdgeRectPath,options2),waveEdgeRect=shapeSvg.insert(()=>waveEdgeRectNode,":first-child");return waveEdgeRect.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&waveEdgeRect.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&waveEdgeRect.selectAll("path").attr("style",nodeStyles),waveEdgeRect.attr("transform",`translate(0,${-waveAmplitude/2})`),label.attr("transform",`translate(${-w4/2+(node2.padding??0)-(bbox.x-(bbox.left??0))},${-h3/2+(node2.padding??0)-waveAmplitude-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,waveEdgeRect),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_waveEdgedRectangle=__esm({"src/rendering-util/rendering-elements/shapes/waveEdgedRectangle.ts"(){init_util(),init_intersect(),init_rough_esm(),init_handDrawnShapeStyles(),__name(waveEdgedRectangle,"waveEdgedRectangle")}});async function waveRectangle(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper(parent4,node2,getNodeClasses(node2)),baseWidth=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),baseHeight=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),aspectRatio=baseWidth/baseHeight;let w4=baseWidth,h3=baseHeight;w4>h3*aspectRatio?h3=w4/aspectRatio:w4=h3*aspectRatio,w4=Math.max(w4,100),h3=Math.max(h3,50);const waveAmplitude=Math.min(.2*h3,h3/4),finalH=h3+2*waveAmplitude,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const points=[{x:-w4/2,y:finalH/2},...generateFullSineWavePoints(-w4/2,finalH/2,w4/2,finalH/2,waveAmplitude,1),{x:w4/2,y:-finalH/2},...generateFullSineWavePoints(w4/2,-finalH/2,-w4/2,-finalH/2,waveAmplitude,-1)],waveRectPath=createPathFromPoints(points),waveRectNode=rc.path(waveRectPath,options2),waveRect=shapeSvg.insert(()=>waveRectNode,":first-child");return waveRect.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&waveRect.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&waveRect.selectAll("path").attr("style",nodeStyles),updateNodeBounds(node2,waveRect),node2.intersect=function(point8){return intersect_default.polygon(node2,points,point8)},shapeSvg}var init_waveRectangle=__esm({"src/rendering-util/rendering-elements/shapes/waveRectangle.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),__name(waveRectangle,"waveRectangle")}});async function windowPane(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=Math.max(bbox.width+2*(node2.padding??0),node2?.width??0),h3=Math.max(bbox.height+2*(node2.padding??0),node2?.height??0),x5=-w4/2,y6=-h3/2,{cssStyles:cssStyles}=node2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),outerPathPoints=[{x:x5-5,y:y6-5},{x:x5-5,y:y6+h3},{x:x5+w4,y:y6+h3},{x:x5+w4,y:y6-5}],path4=`M${x5-5},${y6-5} L${x5+w4},${y6-5} L${x5+w4},${y6+h3} L${x5-5},${y6+h3} L${x5-5},${y6-5}\n                M${x5-5},${y6} L${x5+w4},${y6}\n                M${x5},${y6-5} L${x5},${y6+h3}`;"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const no=rc.path(path4,options2),windowPane2=shapeSvg.insert(()=>no,":first-child");return windowPane2.attr("transform","translate(2.5, 2.5)"),windowPane2.attr("class","basic label-container"),cssStyles&&"handDrawn"!==node2.look&&windowPane2.selectAll("path").attr("style",cssStyles),nodeStyles&&"handDrawn"!==node2.look&&windowPane2.selectAll("path").attr("style",nodeStyles),label.attr("transform",`translate(${-bbox.width/2+2.5-(bbox.x-(bbox.left??0))}, ${-bbox.height/2+2.5-(bbox.y-(bbox.top??0))})`),updateNodeBounds(node2,windowPane2),node2.intersect=function(point8){return intersect_default.polygon(node2,outerPathPoints,point8)},shapeSvg}var init_windowPane=__esm({"src/rendering-util/rendering-elements/shapes/windowPane.ts"(){init_util(),init_handDrawnShapeStyles(),init_rough_esm(),init_intersect(),__name(windowPane,"windowPane")}});async function erBox(parent4,node2){const entityNode=node2;if(entityNode.alias&&(node2.label=entityNode.alias),"handDrawn"===node2.look){const{themeVariables:themeVariables2}=getConfig(),{background:background}=themeVariables2,backgroundNode={...node2,id:node2.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${background}`]};await erBox(parent4,backgroundNode)}const config5=getConfig();node2.useHtmlLabels=config5.htmlLabels;let PADDING=config5.er?.diagramPadding??10,TEXT_PADDING=config5.er?.entityPadding??6;const{cssStyles:cssStyles}=node2,{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);if(0===entityNode.attributes.length&&node2.label){const options3={rx:0,ry:0,labelPaddingX:PADDING,labelPaddingY:1.5*PADDING,classes:""};calculateTextWidth(node2.label,config5)+2*options3.labelPaddingX<config5.er.minEntityWidth&&(node2.width=config5.er.minEntityWidth);const shapeSvg2=await drawRect3(parent4,node2,options3);if(!evaluate(config5.htmlLabels)){const textElement=shapeSvg2.select("text"),bbox=textElement.node()?.getBBox();textElement.attr("transform",`translate(${-bbox.width/2}, 0)`)}return shapeSvg2}config5.htmlLabels||(PADDING*=1.25,TEXT_PADDING*=1.25);let cssClasses=getNodeClasses(node2);cssClasses||(cssClasses="node default");const shapeSvg=parent4.insert("g").attr("class",cssClasses).attr("id",node2.domId||node2.id),nameBBox=await addText(shapeSvg,node2.label??"",config5,0,0,["name"],labelStyles);nameBBox.height+=TEXT_PADDING;let yOffset=0;const yOffsets=[],rows=[];let maxTypeWidth=0,maxNameWidth=0,maxKeysWidth=0,maxCommentWidth=0,keysPresent=!0,commentPresent=!0;for(const attribute of entityNode.attributes){const typeBBox=await addText(shapeSvg,attribute.type,config5,0,yOffset,["attribute-type"],labelStyles);maxTypeWidth=Math.max(maxTypeWidth,typeBBox.width+PADDING);const nameBBox2=await addText(shapeSvg,attribute.name,config5,0,yOffset,["attribute-name"],labelStyles);maxNameWidth=Math.max(maxNameWidth,nameBBox2.width+PADDING);const keysBBox=await addText(shapeSvg,attribute.keys.join(),config5,0,yOffset,["attribute-keys"],labelStyles);maxKeysWidth=Math.max(maxKeysWidth,keysBBox.width+PADDING);const commentBBox=await addText(shapeSvg,attribute.comment,config5,0,yOffset,["attribute-comment"],labelStyles);maxCommentWidth=Math.max(maxCommentWidth,commentBBox.width+PADDING);const rowHeight=Math.max(typeBBox.height,nameBBox2.height,keysBBox.height,commentBBox.height)+TEXT_PADDING;rows.push({yOffset:yOffset,rowHeight:rowHeight}),yOffset+=rowHeight}let totalWidthSections=4;maxKeysWidth<=PADDING&&(keysPresent=!1,maxKeysWidth=0,totalWidthSections--),maxCommentWidth<=PADDING&&(commentPresent=!1,maxCommentWidth=0,totalWidthSections--);const shapeBBox=shapeSvg.node().getBBox();if(nameBBox.width+2*PADDING-(maxTypeWidth+maxNameWidth+maxKeysWidth+maxCommentWidth)>0){const difference2=nameBBox.width+2*PADDING-(maxTypeWidth+maxNameWidth+maxKeysWidth+maxCommentWidth);maxTypeWidth+=difference2/totalWidthSections,maxNameWidth+=difference2/totalWidthSections,maxKeysWidth>0&&(maxKeysWidth+=difference2/totalWidthSections),maxCommentWidth>0&&(maxCommentWidth+=difference2/totalWidthSections)}const maxWidth2=maxTypeWidth+maxNameWidth+maxKeysWidth+maxCommentWidth,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");let totalShapeBBoxHeight=0;rows.length>0&&(totalShapeBBoxHeight=rows.reduce((sum2,row)=>sum2+(row?.rowHeight??0),0));const w4=Math.max(shapeBBox.width+2*PADDING,node2?.width||0,maxWidth2),h3=Math.max((totalShapeBBoxHeight??0)+nameBBox.height,node2?.height||0),x5=-w4/2,y6=-h3/2;shapeSvg.selectAll("g:not(:first-child)").each((_3,i2,nodes5)=>{const text4=select_default2(nodes5[i2]),transform8=text4.attr("transform");let translateX2=0,translateY2=0;if(transform8){const translate2=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(transform8);translate2&&(translateX2=parseFloat(translate2[1]),translateY2=parseFloat(translate2[2]),text4.attr("class").includes("attribute-name")?translateX2+=maxTypeWidth:text4.attr("class").includes("attribute-keys")?translateX2+=maxTypeWidth+maxNameWidth:text4.attr("class").includes("attribute-comment")&&(translateX2+=maxTypeWidth+maxNameWidth+maxKeysWidth))}text4.attr("transform",`translate(${x5+PADDING/2+translateX2}, ${translateY2+y6+nameBBox.height+TEXT_PADDING/2})`)}),shapeSvg.select(".name").attr("transform","translate("+-nameBBox.width/2+", "+(y6+TEXT_PADDING/2)+")");const roughRect=rc.rectangle(x5,y6,w4,h3,options2),rect3=shapeSvg.insert(()=>roughRect,":first-child").attr("style",cssStyles.join("")),{themeVariables:themeVariables}=getConfig(),{rowEven:rowEven,rowOdd:rowOdd,nodeBorder:nodeBorder}=themeVariables;yOffsets.push(0);for(const[i2,row]of rows.entries()){const isEven=(i2+1)%2==0&&0!==row.yOffset,roughRect2=rc.rectangle(x5,nameBBox.height+y6+row?.yOffset,w4,row?.rowHeight,{...options2,fill:isEven?rowEven:rowOdd,stroke:nodeBorder});shapeSvg.insert(()=>roughRect2,"g.label").attr("style",cssStyles.join("")).attr("class","row-rect-"+(isEven?"even":"odd"))}let roughLine=rc.line(x5,nameBBox.height+y6,w4+x5,nameBBox.height+y6,options2);shapeSvg.insert(()=>roughLine).attr("class","divider"),roughLine=rc.line(maxTypeWidth+x5,nameBBox.height+y6,maxTypeWidth+x5,h3+y6,options2),shapeSvg.insert(()=>roughLine).attr("class","divider"),keysPresent&&(roughLine=rc.line(maxTypeWidth+maxNameWidth+x5,nameBBox.height+y6,maxTypeWidth+maxNameWidth+x5,h3+y6,options2),shapeSvg.insert(()=>roughLine).attr("class","divider")),commentPresent&&(roughLine=rc.line(maxTypeWidth+maxNameWidth+maxKeysWidth+x5,nameBBox.height+y6,maxTypeWidth+maxNameWidth+maxKeysWidth+x5,h3+y6,options2),shapeSvg.insert(()=>roughLine).attr("class","divider"));for(const yOffset2 of yOffsets)roughLine=rc.line(x5,nameBBox.height+y6+yOffset2,w4+x5,nameBBox.height+y6+yOffset2,options2),shapeSvg.insert(()=>roughLine).attr("class","divider");if(updateNodeBounds(node2,rect3),nodeStyles&&"handDrawn"!==node2.look){const allStyle=nodeStyles.split(";"),strokeStyles=allStyle?.filter(e3=>e3.includes("stroke"))?.map(s2=>`${s2}`).join("; ");shapeSvg.selectAll("path").attr("style",strokeStyles??""),shapeSvg.selectAll(".row-rect-even path").attr("style",nodeStyles)}return node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}async function addText(shapeSvg,labelText,config5,translateX2=0,translateY2=0,classes3=[],style3=""){const label=shapeSvg.insert("g").attr("class",`label ${classes3.join(" ")}`).attr("transform",`translate(${translateX2}, ${translateY2})`).attr("style",style3);labelText!==parseGenericTypes(labelText)&&(labelText=(labelText=parseGenericTypes(labelText)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const text4=label.node().appendChild(await createText(label,labelText,{width:calculateTextWidth(labelText,config5)+100,style:style3,useHtmlLabels:config5.htmlLabels},config5));if(labelText.includes("&lt;")||labelText.includes("&gt;")){let child=text4.children[0];for(child.textContent=child.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");child.childNodes[0];)child=child.childNodes[0],child.textContent=child.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let bbox=text4.getBBox();if(evaluate(config5.htmlLabels)){const div=text4.children[0];div.style.textAlign="start";const dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}return bbox}var init_erBox=__esm({"src/rendering-util/rendering-elements/shapes/erBox.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_drawRect(),init_config(),init_createText(),init_common(),init_src32(),init_utils2(),__name(erBox,"erBox"),__name(addText,"addText")}});async function textHelper(parent4,node2,config5,useHtmlLabels,GAP=config5.class.padding??12){const TEXT_PADDING=useHtmlLabels?0:3,shapeSvg=parent4.insert("g").attr("class",getNodeClasses(node2)).attr("id",node2.domId||node2.id);let annotationGroup=null,labelGroup=null,membersGroup=null,methodsGroup=null,annotationGroupHeight=0,labelGroupHeight=0,membersGroupHeight=0;if(annotationGroup=shapeSvg.insert("g").attr("class","annotation-group text"),node2.annotations.length>0){const annotation=node2.annotations[0];await addText2(annotationGroup,{text:`«${annotation}»`},0);annotationGroupHeight=annotationGroup.node().getBBox().height}labelGroup=shapeSvg.insert("g").attr("class","label-group text"),await addText2(labelGroup,node2,0,["font-weight: bolder"]);const labelGroupBBox=labelGroup.node().getBBox();labelGroupHeight=labelGroupBBox.height,membersGroup=shapeSvg.insert("g").attr("class","members-group text");let yOffset=0;for(const member of node2.members){yOffset+=await addText2(membersGroup,member,yOffset,[member.parseClassifier()])+TEXT_PADDING}membersGroupHeight=membersGroup.node().getBBox().height,membersGroupHeight<=0&&(membersGroupHeight=GAP/2),methodsGroup=shapeSvg.insert("g").attr("class","methods-group text");let methodsYOffset=0;for(const method of node2.methods){methodsYOffset+=await addText2(methodsGroup,method,methodsYOffset,[method.parseClassifier()])+TEXT_PADDING}let bbox=shapeSvg.node().getBBox();if(null!==annotationGroup){const annotationGroupBBox=annotationGroup.node().getBBox();annotationGroup.attr("transform",`translate(${-annotationGroupBBox.width/2})`)}return labelGroup.attr("transform",`translate(${-labelGroupBBox.width/2}, ${annotationGroupHeight})`),bbox=shapeSvg.node().getBBox(),membersGroup.attr("transform",`translate(0, ${annotationGroupHeight+labelGroupHeight+2*GAP})`),bbox=shapeSvg.node().getBBox(),methodsGroup.attr("transform",`translate(0, ${annotationGroupHeight+labelGroupHeight+(membersGroupHeight?membersGroupHeight+4*GAP:2*GAP)})`),bbox=shapeSvg.node().getBBox(),{shapeSvg:shapeSvg,bbox:bbox}}async function addText2(parentGroup,node2,yOffset,styles4=[]){const textEl=parentGroup.insert("g").attr("class","label").attr("style",styles4.join("; ")),config5=getConfig();let useHtmlLabels="useHtmlLabels"in node2?node2.useHtmlLabels:evaluate(config5.htmlLabels)??!0,textContent="";textContent="text"in node2?node2.text:node2.label,!useHtmlLabels&&textContent.startsWith("\\")&&(textContent=textContent.substring(1)),hasKatex(textContent)&&(useHtmlLabels=!0);const text4=await createText(textEl,sanitizeText3(decodeEntities(textContent)),{width:calculateTextWidth(textContent,config5)+50,classes:"markdown-node-label",useHtmlLabels:useHtmlLabels},config5);let bbox,numberOfLines=1;if(useHtmlLabels){const div=text4.children[0],dv=select_default2(text4);numberOfLines=div.innerHTML.split("<br>").length,div.innerHTML.includes("</math>")&&(numberOfLines+=div.innerHTML.split("<mrow>").length-1);const images=div.getElementsByTagName("img");if(images){const noImgText=""===textContent.replace(/<img[^>]*>/g,"").trim();await Promise.all([...images].map(img=>new Promise(res=>{function setupImage(){if(img.style.display="flex",img.style.flexDirection="column",noImgText){const bodyFontSize=config5.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,enlargingFactor=5,width3=parseInt(bodyFontSize,10)*enlargingFactor+"px";img.style.minWidth=width3,img.style.maxWidth=width3}else img.style.width="100%";res(img)}__name(setupImage,"setupImage"),setTimeout(()=>{img.complete&&setupImage()}),img.addEventListener("error",setupImage),img.addEventListener("load",setupImage)})))}bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}else{styles4.includes("font-weight: bolder")&&select_default2(text4).selectAll("tspan").attr("font-weight",""),numberOfLines=text4.children.length;const textChild=text4.children[0];if(""===text4.textContent||text4.textContent.includes("&gt")){textChild.textContent=textContent[0]+textContent.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim();" "===textContent[1]&&(textChild.textContent=textChild.textContent[0]+" "+textChild.textContent.substring(1))}"undefined"===textChild.textContent&&(textChild.textContent=""),bbox=text4.getBBox()}return textEl.attr("transform","translate(0,"+(-bbox.height/(2*numberOfLines)+yOffset)+")"),bbox.height}var init_shapeUtil=__esm({"src/diagrams/class/shapeUtil.ts"(){init_src32(),init_config(),init_util(),init_utils2(),init_diagramAPI(),init_createText(),init_common(),__name(textHelper,"textHelper"),__name(addText2,"addText")}});async function classBox(parent4,node2){const config5=getConfig2(),PADDING=config5.class.padding??12,GAP=PADDING,useHtmlLabels=node2.useHtmlLabels??evaluate(config5.htmlLabels)??!0,classNode=node2;classNode.annotations=classNode.annotations??[],classNode.members=classNode.members??[],classNode.methods=classNode.methods??[];const{shapeSvg:shapeSvg,bbox:bbox}=await textHelper(parent4,node2,config5,useHtmlLabels,GAP),{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles,node2.cssStyles=classNode.styles||"";const styles4=classNode.styles?.join(";")||nodeStyles||"";node2.cssStyles||(node2.cssStyles=styles4.replaceAll("!important","").split(";"));const renderExtraBox=0===classNode.members.length&&0===classNode.methods.length&&!config5.class?.hideEmptyMembersBox,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const w4=bbox.width;let h3=bbox.height;0===classNode.members.length&&0===classNode.methods.length?h3+=GAP:classNode.members.length>0&&0===classNode.methods.length&&(h3+=2*GAP);const x5=-w4/2,y6=-h3/2,roughRect=rc.rectangle(x5-PADDING,y6-PADDING-(renderExtraBox?PADDING:0===classNode.members.length&&0===classNode.methods.length?-PADDING/2:0),w4+2*PADDING,h3+2*PADDING+(renderExtraBox?2*PADDING:0===classNode.members.length&&0===classNode.methods.length?-PADDING:0),options2),rect3=shapeSvg.insert(()=>roughRect,":first-child");rect3.attr("class","basic label-container");const rectBBox=rect3.node().getBBox();shapeSvg.selectAll(".text").each((_3,i2,nodes5)=>{const text4=select_default2(nodes5[i2]),transform8=text4.attr("transform");let translateY2=0;if(transform8){const translate2=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(transform8);translate2&&(translateY2=parseFloat(translate2[2]))}let newTranslateY=translateY2+y6+PADDING-(renderExtraBox?PADDING:0===classNode.members.length&&0===classNode.methods.length?-PADDING/2:0);useHtmlLabels||(newTranslateY-=4);let newTranslateX=x5;(text4.attr("class").includes("label-group")||text4.attr("class").includes("annotation-group"))&&(newTranslateX=-text4.node()?.getBBox().width/2||0,shapeSvg.selectAll("text").each(function(_4,i3,nodes6){"middle"===window.getComputedStyle(nodes6[i3]).textAnchor&&(newTranslateX=0)})),text4.attr("transform",`translate(${newTranslateX}, ${newTranslateY})`)});const annotationGroupHeight=shapeSvg.select(".annotation-group").node().getBBox().height-(renderExtraBox?PADDING/2:0)||0,labelGroupHeight=shapeSvg.select(".label-group").node().getBBox().height-(renderExtraBox?PADDING/2:0)||0,membersGroupHeight=shapeSvg.select(".members-group").node().getBBox().height-(renderExtraBox?PADDING/2:0)||0;if(classNode.members.length>0||classNode.methods.length>0||renderExtraBox){const roughLine=rc.line(rectBBox.x,annotationGroupHeight+labelGroupHeight+y6+PADDING,rectBBox.x+rectBBox.width,annotationGroupHeight+labelGroupHeight+y6+PADDING,options2);shapeSvg.insert(()=>roughLine).attr("class","divider").attr("style",styles4)}if(renderExtraBox||classNode.members.length>0||classNode.methods.length>0){const roughLine=rc.line(rectBBox.x,annotationGroupHeight+labelGroupHeight+membersGroupHeight+y6+2*GAP+PADDING,rectBBox.x+rectBBox.width,annotationGroupHeight+labelGroupHeight+membersGroupHeight+y6+PADDING+2*GAP,options2);shapeSvg.insert(()=>roughLine).attr("class","divider").attr("style",styles4)}if("handDrawn"!==classNode.look&&shapeSvg.selectAll("path").attr("style",styles4),rect3.select(":nth-child(2)").attr("style",styles4),shapeSvg.selectAll(".divider").select("path").attr("style",styles4),node2.labelStyle?shapeSvg.selectAll("span").attr("style",node2.labelStyle):shapeSvg.selectAll("span").attr("style",styles4),!useHtmlLabels){const colorRegex=RegExp(/color\s*:\s*([^;]*)/),match2=colorRegex.exec(styles4);if(match2){const colorStyle=match2[0].replace("color","fill");shapeSvg.selectAll("tspan").attr("style",colorStyle)}else if(labelStyles){const match3=colorRegex.exec(labelStyles);if(match3){const colorStyle=match3[0].replace("color","fill");shapeSvg.selectAll("tspan").attr("style",colorStyle)}}}return updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_classBox=__esm({"src/rendering-util/rendering-elements/shapes/classBox.ts"(){init_util(),init_diagramAPI(),init_src32(),init_rough_esm(),init_handDrawnShapeStyles(),init_intersect(),init_shapeUtil(),init_common(),__name(classBox,"classBox")}});async function requirementBox(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const requirementNode=node2,elementNode=node2,isRequirementNode="verifyMethod"in node2,classes3=getNodeClasses(node2),shapeSvg=parent4.insert("g").attr("class",classes3).attr("id",node2.domId??node2.id);let typeHeight;typeHeight=isRequirementNode?await addText3(shapeSvg,`&lt;&lt;${requirementNode.type}&gt;&gt;`,0,node2.labelStyle):await addText3(shapeSvg,"&lt;&lt;Element&gt;&gt;",0,node2.labelStyle);let accumulativeHeight=typeHeight;const nameHeight=await addText3(shapeSvg,requirementNode.name,accumulativeHeight,node2.labelStyle+"; font-weight: bold;");if(accumulativeHeight+=nameHeight+20,isRequirementNode){accumulativeHeight+=await addText3(shapeSvg,""+(requirementNode.requirementId?`ID: ${requirementNode.requirementId}`:""),accumulativeHeight,node2.labelStyle);accumulativeHeight+=await addText3(shapeSvg,""+(requirementNode.text?`Text: ${requirementNode.text}`:""),accumulativeHeight,node2.labelStyle);accumulativeHeight+=await addText3(shapeSvg,""+(requirementNode.risk?`Risk: ${requirementNode.risk}`:""),accumulativeHeight,node2.labelStyle),await addText3(shapeSvg,""+(requirementNode.verifyMethod?`Verification: ${requirementNode.verifyMethod}`:""),accumulativeHeight,node2.labelStyle)}else{accumulativeHeight+=await addText3(shapeSvg,""+(elementNode.type?`Type: ${elementNode.type}`:""),accumulativeHeight,node2.labelStyle),await addText3(shapeSvg,""+(elementNode.docRef?`Doc Ref: ${elementNode.docRef}`:""),accumulativeHeight,node2.labelStyle)}const totalWidth=(shapeSvg.node()?.getBBox().width??200)+20,totalHeight=(shapeSvg.node()?.getBBox().height??200)+20,x5=-totalWidth/2,y6=-totalHeight/2,rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{});"handDrawn"!==node2.look&&(options2.roughness=0,options2.fillStyle="solid");const roughRect=rc.rectangle(x5,y6,totalWidth,totalHeight,options2),rect3=shapeSvg.insert(()=>roughRect,":first-child");if(rect3.attr("class","basic label-container").attr("style",nodeStyles),shapeSvg.selectAll(".label").each((_3,i2,nodes5)=>{const text4=select_default2(nodes5[i2]),transform8=text4.attr("transform");let translateX2=0,translateY2=0;if(transform8){const translate2=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(transform8);translate2&&(translateX2=parseFloat(translate2[1]),translateY2=parseFloat(translate2[2]))}const newTranslateY=translateY2-totalHeight/2;let newTranslateX=x5+10;0!==i2&&1!==i2||(newTranslateX=translateX2),text4.attr("transform",`translate(${newTranslateX}, ${newTranslateY+20})`)}),accumulativeHeight>typeHeight+nameHeight+20){const roughLine=rc.line(x5,y6+typeHeight+nameHeight+20,x5+totalWidth,y6+typeHeight+nameHeight+20,options2);shapeSvg.insert(()=>roughLine).attr("style",nodeStyles)}return updateNodeBounds(node2,rect3),node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}async function addText3(parentGroup,inputText,yOffset,style3=""){if(""===inputText)return 0;const textEl=parentGroup.insert("g").attr("class","label").attr("style",style3),config5=getConfig2(),useHtmlLabels=config5.htmlLabels??!0,text4=await createText(textEl,sanitizeText3(decodeEntities(inputText)),{width:calculateTextWidth(inputText,config5)+50,classes:"markdown-node-label",useHtmlLabels:useHtmlLabels,style:style3},config5);let bbox;if(useHtmlLabels){const div=text4.children[0],dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}else{const textChild=text4.children[0];for(const child of textChild.children)child.textContent=child.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),style3&&child.setAttribute("style",style3);bbox=text4.getBBox(),bbox.height+=6}return textEl.attr("transform",`translate(${-bbox.width/2},${-bbox.height/2+yOffset})`),bbox.height}var colorFromPriority,init_requirementBox=__esm({"src/rendering-util/rendering-elements/shapes/requirementBox.ts"(){init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),init_diagramAPI(),init_createText(),init_src32(),__name(requirementBox,"requirementBox"),__name(addText3,"addText")}});async function kanbanItem(parent4,kanbanNode,{config:config5}){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(kanbanNode);kanbanNode.labelStyle=labelStyles||"";const orgWidth=kanbanNode.width;kanbanNode.width=(kanbanNode.width??200)-10;const{shapeSvg:shapeSvg,bbox:bbox,label:labelElTitle}=await labelHelper(parent4,kanbanNode,getNodeClasses(kanbanNode)),padding2=kanbanNode.padding||10;let link2,ticketUrl="";"ticket"in kanbanNode&&kanbanNode.ticket&&config5?.kanban?.ticketBaseUrl&&(ticketUrl=config5?.kanban?.ticketBaseUrl.replace("#TICKET#",kanbanNode.ticket),link2=shapeSvg.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",ticketUrl).attr("target","_blank"));const options2={useHtmlLabels:kanbanNode.useHtmlLabels,labelStyle:kanbanNode.labelStyle||"",width:kanbanNode.width,img:kanbanNode.img,padding:kanbanNode.padding||8,centerLabel:!1};let labelEl,bbox2;({label:labelEl,bbox:bbox2}=link2?await insertLabel(link2,"ticket"in kanbanNode&&kanbanNode.ticket||"",options2):await insertLabel(shapeSvg,"ticket"in kanbanNode&&kanbanNode.ticket||"",options2));const{label:labelElAssigned,bbox:bboxAssigned}=await insertLabel(shapeSvg,"assigned"in kanbanNode&&kanbanNode.assigned||"",options2);kanbanNode.width=orgWidth;const totalWidth=kanbanNode?.width||0,heightAdj=Math.max(bbox2.height,bboxAssigned.height)/2,totalHeight=Math.max(bbox.height+20,kanbanNode?.height||0)+heightAdj,x5=-totalWidth/2,y6=-totalHeight/2;let rect3;labelElTitle.attr("transform","translate("+(padding2-totalWidth/2)+", "+(-heightAdj-bbox.height/2)+")"),labelEl.attr("transform","translate("+(padding2-totalWidth/2)+", "+(-heightAdj+bbox.height/2)+")"),labelElAssigned.attr("transform","translate("+(padding2+totalWidth/2-bboxAssigned.width-20)+", "+(-heightAdj+bbox.height/2)+")");const{rx:rx,ry:ry}=kanbanNode,{cssStyles:cssStyles}=kanbanNode;if("handDrawn"===kanbanNode.look){const rc=at.svg(shapeSvg),options3=userNodeOverrides(kanbanNode,{}),roughNode=rx||ry?rc.path(createRoundedRectPathD(x5,y6,totalWidth,totalHeight,rx||0),options3):rc.rectangle(x5,y6,totalWidth,totalHeight,options3);rect3=shapeSvg.insert(()=>roughNode,":first-child"),rect3.attr("class","basic label-container").attr("style",cssStyles||null)}else{rect3=shapeSvg.insert("rect",":first-child"),rect3.attr("class","basic label-container __APA__").attr("style",nodeStyles).attr("rx",rx??5).attr("ry",ry??5).attr("x",x5).attr("y",y6).attr("width",totalWidth).attr("height",totalHeight);const priority3="priority"in kanbanNode&&kanbanNode.priority;if(priority3){const line2=shapeSvg.append("line"),lineX=x5+2,y1=y6+Math.floor((rx??0)/2),y22=y6+totalHeight-Math.floor((rx??0)/2);line2.attr("x1",lineX).attr("y1",y1).attr("x2",lineX).attr("y2",y22).attr("stroke-width","4").attr("stroke",colorFromPriority(priority3))}}return updateNodeBounds(kanbanNode,rect3),kanbanNode.height=totalHeight,kanbanNode.intersect=function(point8){return intersect_default.rect(kanbanNode,point8)},shapeSvg}var init_kanbanItem=__esm({"src/rendering-util/rendering-elements/shapes/kanbanItem.ts"(){init_util(),init_intersect(),init_roundedRectPath(),init_handDrawnShapeStyles(),init_rough_esm(),colorFromPriority=__name(priority3=>{switch(priority3){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority"),__name(kanbanItem,"kanbanItem")}});async function bang(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+10*halfPadding,h3=bbox.height+8*halfPadding,r2=.15*w4,{cssStyles:cssStyles}=node2,minWidth=bbox.width+20,minHeight=bbox.height+20,effectiveWidth=Math.max(w4,minWidth),effectiveHeight=Math.max(h3,minHeight);let bangElem;label.attr("transform",`translate(${-bbox.width/2}, ${-bbox.height/2})`);const path4=`M0 0 \n    a${r2},${r2} 1 0,0 ${.25*effectiveWidth},${-1*effectiveHeight*.1}\n    a${r2},${r2} 1 0,0 ${.25*effectiveWidth},0\n    a${r2},${r2} 1 0,0 ${.25*effectiveWidth},0\n    a${r2},${r2} 1 0,0 ${.25*effectiveWidth},${.1*effectiveHeight}\n\n    a${r2},${r2} 1 0,0 ${.15*effectiveWidth},${.33*effectiveHeight}\n    a${.8*r2},${.8*r2} 1 0,0 0,${.34*effectiveHeight}\n    a${r2},${r2} 1 0,0 ${-1*effectiveWidth*.15},${.33*effectiveHeight}\n\n    a${r2},${r2} 1 0,0 ${-1*effectiveWidth*.25},${.15*effectiveHeight}\n    a${r2},${r2} 1 0,0 ${-1*effectiveWidth*.25},0\n    a${r2},${r2} 1 0,0 ${-1*effectiveWidth*.25},0\n    a${r2},${r2} 1 0,0 ${-1*effectiveWidth*.25},${-1*effectiveHeight*.15}\n\n    a${r2},${r2} 1 0,0 ${-1*effectiveWidth*.1},${-1*effectiveHeight*.33}\n    a${.8*r2},${.8*r2} 1 0,0 0,${-1*effectiveHeight*.34}\n    a${r2},${r2} 1 0,0 ${.1*effectiveWidth},${-1*effectiveHeight*.33}\n  H0 V0 Z`;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),roughNode=rc.path(path4,options2);bangElem=shapeSvg.insert(()=>roughNode,":first-child"),bangElem.attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles))}else bangElem=shapeSvg.insert("path",":first-child").attr("class","basic label-container").attr("style",nodeStyles).attr("d",path4);return bangElem.attr("transform",`translate(${-effectiveWidth/2}, ${-effectiveHeight/2})`),updateNodeBounds(node2,bangElem),node2.calcIntersect=function(bounds4,point8){return intersect_default.rect(bounds4,point8)},node2.intersect=function(point8){return log.info("Bang intersect",node2,point8),intersect_default.rect(node2,point8)},shapeSvg}var init_bang=__esm({"src/rendering-util/rendering-elements/shapes/bang.ts"(){init_logger(),init_util(),init_intersect(),init_handDrawnShapeStyles(),init_rough_esm(),init_utils2(),__name(bang,"bang")}});async function cloud(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+2*halfPadding,h3=bbox.height+2*halfPadding,r1=.15*w4,r2=.25*w4,r3=.35*w4,r4=.2*w4,{cssStyles:cssStyles}=node2;let cloudElem;const path4=`M0 0 \n    a${r1},${r1} 0 0,1 ${.25*w4},${-1*w4*.1}\n    a${r3},${r3} 1 0,1 ${.4*w4},${-1*w4*.1}\n    a${r2},${r2} 1 0,1 ${.35*w4},${.2*w4}\n\n    a${r1},${r1} 1 0,1 ${.15*w4},${.35*h3}\n    a${r4},${r4} 1 0,1 ${-1*w4*.15},${.65*h3}\n\n    a${r2},${r1} 1 0,1 ${-1*w4*.25},${.15*w4}\n    a${r3},${r3} 1 0,1 ${-1*w4*.5},0\n    a${r1},${r1} 1 0,1 ${-1*w4*.25},${-1*w4*.15}\n\n    a${r1},${r1} 1 0,1 ${-1*w4*.1},${-1*h3*.35}\n    a${r4},${r4} 1 0,1 ${.1*w4},${-1*h3*.65}\n  H0 V0 Z`;if("handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{}),roughNode=rc.path(path4,options2);cloudElem=shapeSvg.insert(()=>roughNode,":first-child"),cloudElem.attr("class","basic label-container").attr("style",handleUndefinedAttr(cssStyles))}else cloudElem=shapeSvg.insert("path",":first-child").attr("class","basic label-container").attr("style",nodeStyles).attr("d",path4);return label.attr("transform",`translate(${-bbox.width/2}, ${-bbox.height/2})`),cloudElem.attr("transform",`translate(${-w4/2}, ${-h3/2})`),updateNodeBounds(node2,cloudElem),node2.calcIntersect=function(bounds4,point8){return intersect_default.rect(bounds4,point8)},node2.intersect=function(point8){return log.info("Cloud intersect",node2,point8),intersect_default.rect(node2,point8)},shapeSvg}var init_cloud=__esm({"src/rendering-util/rendering-elements/shapes/cloud.ts"(){init_rough_esm(),init_logger(),init_utils2(),init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(cloud,"cloud")}});async function defaultMindmapNode(parent4,node2){const{labelStyles:labelStyles,nodeStyles:nodeStyles}=styles2String(node2);node2.labelStyle=labelStyles;const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:label}=await labelHelper(parent4,node2,getNodeClasses(node2)),w4=bbox.width+8*halfPadding,h3=bbox.height+2*halfPadding,rectPath=`\n    M${-w4/2} ${h3/2-5}\n    v${10-h3}\n    q0,-5 5,-5\n    h${w4-10}\n    q5,0 5,5\n    v${h3-10}\n    q0,5 -5,5\n    h${10-w4}\n    q-5,0 -5,-5\n    Z\n  `,bg=shapeSvg.append("path").attr("id","node-"+node2.id).attr("class","node-bkg node-"+node2.type).attr("style",nodeStyles).attr("d",rectPath);return shapeSvg.append("line").attr("class","node-line-").attr("x1",-w4/2).attr("y1",h3/2).attr("x2",w4/2).attr("y2",h3/2),label.attr("transform",`translate(${-bbox.width/2}, ${-bbox.height/2})`),shapeSvg.append(()=>label.node()),updateNodeBounds(node2,bg),node2.calcIntersect=function(bounds4,point8){return intersect_default.rect(bounds4,point8)},node2.intersect=function(point8){return intersect_default.rect(node2,point8)},shapeSvg}var init_defaultMindmapNode=__esm({"src/rendering-util/rendering-elements/shapes/defaultMindmapNode.ts"(){init_intersect(),init_handDrawnShapeStyles(),init_util(),__name(defaultMindmapNode,"defaultMindmapNode")}});async function mindmapCircle(parent4,node2){return circle(parent4,node2,{padding:node2.padding??0})}var shapesDefs,shapes,init_mindmapCircle=__esm({"src/rendering-util/rendering-elements/shapes/mindmapCircle.ts"(){init_circle(),__name(mindmapCircle,"mindmapCircle")}});function isValidShape(shape){return shape in shapes}var FlowDB,getDiagramElement,getSubGraphTitleMargins,rect,noteGroup,roundedWithTitle,kanbanSection,shapes2,clusterElems,insertCluster,clear3,markerOffsets,markerOffsets2,pointTransformer,getLineFunctionsWithOffset,init_shapes=__esm({"src/rendering-util/rendering-elements/shapes.ts"(){init_anchor(),init_bowTieRect(),init_card(),init_choice(),init_circle(),init_crossedCircle(),init_curlyBraceLeft(),init_curlyBraceRight(),init_curlyBraces(),init_curvedTrapezoid(),init_cylinder(),init_dividedRect(),init_doubleCircle(),init_filledCircle(),init_flippedTriangle(),init_forkJoin(),init_halfRoundedRectangle(),init_hexagon(),init_hourglass(),init_icon(),init_iconCircle(),init_iconRounded(),init_iconSquare(),init_imageSquare(),init_invertedTrapezoid(),init_labelRect(),init_leanLeft(),init_leanRight(),init_lightningBolt(),init_linedCylinder(),init_linedWaveEdgedRect(),init_multiRect(),init_multiWaveEdgedRectangle(),init_note(),init_question(),init_rectLeftInvArrow(),init_rectWithTitle(),init_roundedRect(),init_shadedProcess(),init_slopedRect(),init_squareRect(),init_stadium(),init_state(),init_stateEnd(),init_stateStart(),init_subroutine(),init_taggedRect(),init_taggedWaveEdgedRectangle(),init_text3(),init_tiltedCylinder(),init_trapezoid(),init_trapezoidalPentagon(),init_triangle(),init_waveEdgedRectangle(),init_waveRectangle(),init_windowPane(),init_erBox(),init_classBox(),init_requirementBox(),init_kanbanItem(),init_bang(),init_cloud(),init_defaultMindmapNode(),init_mindmapCircle(),shapesDefs=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:squareRect},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:roundedRect},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:stadium},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:subroutine},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:cylinder},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:circle},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:bang},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:cloud},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:question},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:hexagon},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:lean_right},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:lean_left},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:trapezoid},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:inv_trapezoid},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:doublecircle},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:text3},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:card},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:shadedProcess},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:stateStart},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:stateEnd},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:forkJoin},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:hourglass},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:curlyBraceLeft},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:curlyBraceRight},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:curlyBraces},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:lightningBolt},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:waveEdgedRectangle},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:halfRoundedRectangle},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:tiltedCylinder},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:linedCylinder},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:curvedTrapezoid},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:dividedRectangle},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:triangle},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:windowPane},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:filledCircle},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:trapezoidalPentagon},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:flippedTriangle},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:slopedRect},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:multiWaveEdgedRectangle},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:multiRect},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:bowTieRect},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:crossedCircle},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:taggedWaveEdgedRectangle},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:taggedRect},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:waveRectangle},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:rect_left_inv_arrow},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:linedWaveEdgedRect}],shapes=__name(()=>{const undocumentedShapes={state:state,choice:choice,note:note,rectWithTitle:rectWithTitle,labelRect:labelRect,iconSquare:iconSquare,iconCircle:iconCircle,icon:icon,iconRounded:iconRounded,imageSquare:imageSquare,anchor:anchor,kanbanItem:kanbanItem,mindmapCircle:mindmapCircle,defaultMindmapNode:defaultMindmapNode,classBox:classBox,erBox:erBox,requirementBox:requirementBox},entries2=[...Object.entries(undocumentedShapes),...shapesDefs.flatMap(shape=>[shape.shortName,..."aliases"in shape?shape.aliases:[],..."internalAliases"in shape?shape.internalAliases:[]].map(alias=>[alias,shape.handler]))];return Object.fromEntries(entries2)},"generateShapeMap")(),__name(isValidShape,"isValidShape")}}),init_flowDb=__esm({"src/diagrams/flowchart/flowDb.ts"(){init_src32(),init_js_yaml(),init_diagramAPI(),init_logger(),init_shapes(),init_utils2(),init_common(),init_commonDb(),FlowDB=class{constructor(){this.vertexCounter=0,this.config=getConfig2(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=setAccTitle,this.setAccDescription=setAccDescription,this.setDiagramTitle=setDiagramTitle,this.getAccTitle=getAccTitle,this.getAccDescription=getAccDescription,this.getDiagramTitle=getDiagramTitle,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}static{__name(this,"FlowDB")}sanitizeText(txt){return common_default.sanitizeText(txt,this.config)}lookUpDomId(id30){for(const vertex of this.vertices.values())if(vertex.id===id30)return vertex.domId;return id30}addVertex(id30,textObj,type3,style3,classes3,dir2,props={},metadata){if(!id30||0===id30.trim().length)return;let doc;if(void 0!==metadata){let yamlData;yamlData=metadata.includes("\n")?metadata+"\n":"{\n"+metadata+"\n}",doc=load(yamlData,{schema:JSON_SCHEMA})}const edge=this.edges.find(e3=>e3.id===id30);if(edge){const edgeDoc=doc;return void 0!==edgeDoc?.animate&&(edge.animate=edgeDoc.animate),void 0!==edgeDoc?.animation&&(edge.animation=edgeDoc.animation),void(void 0!==edgeDoc?.curve&&(edge.interpolate=edgeDoc.curve))}let txt,vertex=this.vertices.get(id30);if(void 0===vertex&&(vertex={id:id30,labelType:"text",domId:"flowchart-"+id30+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(id30,vertex)),this.vertexCounter++,void 0!==textObj?(this.config=getConfig2(),txt=this.sanitizeText(textObj.text.trim()),vertex.labelType=textObj.type,txt.startsWith('"')&&txt.endsWith('"')&&(txt=txt.substring(1,txt.length-1)),vertex.text=txt):void 0===vertex.text&&(vertex.text=id30),void 0!==type3&&(vertex.type=type3),null!=style3&&style3.forEach(s2=>{vertex.styles.push(s2)}),null!=classes3&&classes3.forEach(s2=>{vertex.classes.push(s2)}),void 0!==dir2&&(vertex.dir=dir2),void 0===vertex.props?vertex.props=props:void 0!==props&&Object.assign(vertex.props,props),void 0!==doc){if(doc.shape){if(doc.shape!==doc.shape.toLowerCase()||doc.shape.includes("_"))throw new Error(`No such shape: ${doc.shape}. Shape names should be lowercase.`);if(!isValidShape(doc.shape))throw new Error(`No such shape: ${doc.shape}.`);vertex.type=doc?.shape}doc?.label&&(vertex.text=doc?.label),doc?.icon&&(vertex.icon=doc?.icon,doc.label?.trim()||vertex.text!==id30||(vertex.text="")),doc?.form&&(vertex.form=doc?.form),doc?.pos&&(vertex.pos=doc?.pos),doc?.img&&(vertex.img=doc?.img,doc.label?.trim()||vertex.text!==id30||(vertex.text="")),doc?.constraint&&(vertex.constraint=doc.constraint),doc.w&&(vertex.assetWidth=Number(doc.w)),doc.h&&(vertex.assetHeight=Number(doc.h))}}addSingleLink(_start,_end,type3,id30){const edge={start:_start,end:_end,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};log.info("abc78 Got edge...",edge);const linkTextObj=type3.text;if(void 0!==linkTextObj&&(edge.text=this.sanitizeText(linkTextObj.text.trim()),edge.text.startsWith('"')&&edge.text.endsWith('"')&&(edge.text=edge.text.substring(1,edge.text.length-1)),edge.labelType=linkTextObj.type),void 0!==type3&&(edge.type=type3.type,edge.stroke=type3.stroke,edge.length=type3.length>10?10:type3.length),id30&&!this.edges.some(e3=>e3.id===id30))edge.id=id30,edge.isUserDefinedId=!0;else{const existingLinks=this.edges.filter(e3=>e3.start===edge.start&&e3.end===edge.end);0===existingLinks.length?edge.id=getEdgeId(edge.start,edge.end,{counter:0,prefix:"L"}):edge.id=getEdgeId(edge.start,edge.end,{counter:existingLinks.length+1,prefix:"L"})}if(!(this.edges.length<(this.config.maxEdges??500)))throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.\n\nInitialize mermaid with maxEdges set to a higher number to allow more edges.\nYou cannot set this config via configuration inside the diagram as it is a secure config.\nYou have to call mermaid.initialize.`);log.info("Pushing edge..."),this.edges.push(edge)}isLinkData(value2){return null!==value2&&"object"==typeof value2&&"id"in value2&&"string"==typeof value2.id}addLink(_start,_end,linkData){const id30=this.isLinkData(linkData)?linkData.id.replace("@",""):void 0;log.info("addLink",_start,_end,id30);for(const start3 of _start)for(const end2 of _end){const isLastStart=start3===_start[_start.length-1],isFirstEnd=end2===_end[0];isLastStart&&isFirstEnd?this.addSingleLink(start3,end2,linkData,id30):this.addSingleLink(start3,end2,linkData,void 0)}}updateLinkInterpolate(positions2,interpolate){positions2.forEach(pos=>{"default"===pos?this.edges.defaultInterpolate=interpolate:this.edges[pos].interpolate=interpolate})}updateLink(positions2,style3){positions2.forEach(pos=>{if("number"==typeof pos&&pos>=this.edges.length)throw new Error(`The index ${pos} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);"default"===pos?this.edges.defaultStyle=style3:(this.edges[pos].style=style3,(this.edges[pos]?.style?.length??0)>0&&!this.edges[pos]?.style?.some(s2=>s2?.startsWith("fill"))&&this.edges[pos]?.style?.push("fill:none"))})}addClass(ids,_style){const style3=_style.join().replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");ids.split(",").forEach(id30=>{let classNode=this.classes.get(id30);void 0===classNode&&(classNode={id:id30,styles:[],textStyles:[]},this.classes.set(id30,classNode)),null!=style3&&style3.forEach(s2=>{if(/color/.exec(s2)){const newStyle=s2.replace("fill","bgFill");classNode.textStyles.push(newStyle)}classNode.styles.push(s2)})})}setDirection(dir2){this.direction=dir2.trim(),/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),"TD"===this.direction&&(this.direction="TB")}setClass(ids,className){for(const id30 of ids.split(",")){const vertex=this.vertices.get(id30);vertex&&vertex.classes.push(className);const edge=this.edges.find(e3=>e3.id===id30);edge&&edge.classes.push(className);const subGraph=this.subGraphLookup.get(id30);subGraph&&subGraph.classes.push(className)}}setTooltip(ids,tooltip){if(void 0!==tooltip){tooltip=this.sanitizeText(tooltip);for(const id30 of ids.split(","))this.tooltips.set("gen-1"===this.version?this.lookUpDomId(id30):id30,tooltip)}}setClickFun(id30,functionName,functionArgs){const domId=this.lookUpDomId(id30);if("loose"!==getConfig2().securityLevel)return;if(void 0===functionName)return;let argList=[];if("string"==typeof functionArgs){argList=functionArgs.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let i2=0;i2<argList.length;i2++){let item=argList[i2].trim();item.startsWith('"')&&item.endsWith('"')&&(item=item.substr(1,item.length-2)),argList[i2]=item}}0===argList.length&&argList.push(id30);const vertex=this.vertices.get(id30);vertex&&(vertex.haveCallback=!0,this.funs.push(()=>{const elem=document.querySelector(`[id="${domId}"]`);null!==elem&&elem.addEventListener("click",()=>{utils_default2.runFunc(functionName,...argList)},!1)}))}setLink(ids,linkStr,target){ids.split(",").forEach(id30=>{const vertex=this.vertices.get(id30);void 0!==vertex&&(vertex.link=utils_default2.formatUrl(linkStr,this.config),vertex.linkTarget=target)}),this.setClass(ids,"clickable")}getTooltip(id30){return this.tooltips.get(id30)}setClickEvent(ids,functionName,functionArgs){ids.split(",").forEach(id30=>{this.setClickFun(id30,functionName,functionArgs)}),this.setClass(ids,"clickable")}bindFunctions(element3){this.funs.forEach(fun=>{fun(element3)})}getDirection(){return this.direction?.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(element3){let tooltipElem=select_default2(".mermaidTooltip");null===(tooltipElem._groups||tooltipElem)[0][0]&&(tooltipElem=select_default2("body").append("div").attr("class","mermaidTooltip").style("opacity",0));select_default2(element3).select("svg").selectAll("g.node").on("mouseover",e3=>{const el=select_default2(e3.currentTarget);if(null===el.attr("title"))return;const rect3=e3.currentTarget?.getBoundingClientRect();tooltipElem.transition().duration(200).style("opacity",".9"),tooltipElem.text(el.attr("title")).style("left",window.scrollX+rect3.left+(rect3.right-rect3.left)/2+"px").style("top",window.scrollY+rect3.bottom+"px"),tooltipElem.html(tooltipElem.html().replace(/&lt;br\/&gt;/g,"<br/>")),el.classed("hover",!0)}).on("mouseout",e3=>{tooltipElem.transition().duration(500).style("opacity",0);select_default2(e3.currentTarget).classed("hover",!1)})}clear(ver="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=ver,this.config=getConfig2(),clear()}setGen(ver){this.version=ver||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(_id,list,_title){let id30=_id.text.trim(),title2=_title.text;_id===_title&&/\s/.exec(_title.text)&&(id30=void 0);const result=__name(a2=>{const prims={boolean:{},number:{},string:{}},objs=[];let dir3;return{nodeList:a2.filter(function(item){const type3=typeof item;return item.stmt&&"dir"===item.stmt?(dir3=item.value,!1):""!==item.trim()&&(type3 in prims?!prims[type3].hasOwnProperty(item)&&(prims[type3][item]=!0):!objs.includes(item)&&objs.push(item))}),dir:dir3}},"uniq")(list.flat()),nodeList=result.nodeList;let dir2=result.dir;const flowchartConfig=getConfig2().flowchart??{};if(dir2=dir2??(flowchartConfig.inheritDir?this.getDirection()??getConfig2().direction??void 0:void 0),"gen-1"===this.version)for(let i2=0;i2<nodeList.length;i2++)nodeList[i2]=this.lookUpDomId(nodeList[i2]);id30=id30??"subGraph"+this.subCount,title2=title2||"",title2=this.sanitizeText(title2),this.subCount=this.subCount+1;const subGraph={id:id30,nodes:nodeList,title:title2.trim(),classes:[],dir:dir2,labelType:_title.type};return log.info("Adding",subGraph.id,subGraph.nodes,subGraph.dir),subGraph.nodes=this.makeUniq(subGraph,this.subGraphs).nodes,this.subGraphs.push(subGraph),this.subGraphLookup.set(id30,subGraph),id30}getPosForId(id30){for(const[i2,subGraph]of this.subGraphs.entries())if(subGraph.id===id30)return i2;return-1}indexNodes2(id30,pos){const nodes5=this.subGraphs[pos].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=pos,this.subGraphs[pos].id===id30)return{result:!0,count:0};let count2=0,posCount=1;for(;count2<nodes5.length;){const childPos=this.getPosForId(nodes5[count2]);if(childPos>=0){const res=this.indexNodes2(id30,childPos);if(res.result)return{result:!0,count:posCount+res.count};posCount+=res.count}count2+=1}return{result:!1,count:posCount}}getDepthFirstPos(pos){return this.posCrossRef[pos]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return!!this.firstGraphFlag&&(this.firstGraphFlag=!1,!0)}destructStartLink(_str){let str2=_str.trim(),type3="arrow_open";switch(str2[0]){case"<":type3="arrow_point",str2=str2.slice(1);break;case"x":type3="arrow_cross",str2=str2.slice(1);break;case"o":type3="arrow_circle",str2=str2.slice(1)}let stroke="normal";return str2.includes("=")&&(stroke="thick"),str2.includes(".")&&(stroke="dotted"),{type:type3,stroke:stroke}}countChar(char2,str2){const length2=str2.length;let count2=0;for(let i2=0;i2<length2;++i2)str2[i2]===char2&&++count2;return count2}destructEndLink(_str){const str2=_str.trim();let line2=str2.slice(0,-1),type3="arrow_open";switch(str2.slice(-1)){case"x":type3="arrow_cross",str2.startsWith("x")&&(type3="double_"+type3,line2=line2.slice(1));break;case">":type3="arrow_point",str2.startsWith("<")&&(type3="double_"+type3,line2=line2.slice(1));break;case"o":type3="arrow_circle",str2.startsWith("o")&&(type3="double_"+type3,line2=line2.slice(1))}let stroke="normal",length2=line2.length-1;line2.startsWith("=")&&(stroke="thick"),line2.startsWith("~")&&(stroke="invisible");const dots=this.countChar(".",line2);return dots&&(stroke="dotted",length2=dots),{type:type3,stroke:stroke,length:length2}}destructLink(_str,_startStr){const info2=this.destructEndLink(_str);let startInfo;if(_startStr){if(startInfo=this.destructStartLink(_startStr),startInfo.stroke!==info2.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===startInfo.type)startInfo.type=info2.type;else{if(startInfo.type!==info2.type)return{type:"INVALID",stroke:"INVALID"};startInfo.type="double_"+startInfo.type}return"double_arrow"===startInfo.type&&(startInfo.type="double_arrow_point"),startInfo.length=info2.length,startInfo}return info2}exists(allSgs,_id){for(const sg of allSgs)if(sg.nodes.includes(_id))return!0;return!1}makeUniq(sg,allSubgraphs){const res=[];return sg.nodes.forEach((_id,pos)=>{this.exists(allSubgraphs,_id)||res.push(sg.nodes[pos])}),{nodes:res}}getTypeFromVertex(vertex){if(vertex.img)return"imageSquare";if(vertex.icon)return"circle"===vertex.form?"iconCircle":"square"===vertex.form?"iconSquare":"rounded"===vertex.form?"iconRounded":"icon";switch(vertex.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return vertex.type}}findNode(nodes5,id30){return nodes5.find(node2=>node2.id===id30)}destructEdgeType(type3){let arrowTypeStart="none",arrowTypeEnd="arrow_point";switch(type3){case"arrow_point":case"arrow_circle":case"arrow_cross":arrowTypeEnd=type3;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":arrowTypeStart=type3.replace("double_",""),arrowTypeEnd=arrowTypeStart}return{arrowTypeStart:arrowTypeStart,arrowTypeEnd:arrowTypeEnd}}addNodeFromVertex(vertex,nodes5,parentDB,subGraphDB,config5,look){const parentId=parentDB.get(vertex.id),isGroup2=subGraphDB.get(vertex.id)??!1,node2=this.findNode(nodes5,vertex.id);if(node2)node2.cssStyles=vertex.styles,node2.cssCompiledStyles=this.getCompiledStyles(vertex.classes),node2.cssClasses=vertex.classes.join(" ");else{const baseNode={id:vertex.id,label:vertex.text,labelStyle:"",parentId:parentId,padding:config5.flowchart?.padding||8,cssStyles:vertex.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...vertex.classes]),cssClasses:"default "+vertex.classes.join(" "),dir:vertex.dir,domId:vertex.domId,look:look,link:vertex.link,linkTarget:vertex.linkTarget,tooltip:this.getTooltip(vertex.id),icon:vertex.icon,pos:vertex.pos,img:vertex.img,assetWidth:vertex.assetWidth,assetHeight:vertex.assetHeight,constraint:vertex.constraint};isGroup2?nodes5.push({...baseNode,isGroup:!0,shape:"rect"}):nodes5.push({...baseNode,isGroup:!1,shape:this.getTypeFromVertex(vertex)})}}getCompiledStyles(classDefs){let compiledStyles=[];for(const customClass of classDefs){const cssClass=this.classes.get(customClass);cssClass?.styles&&(compiledStyles=[...compiledStyles,...cssClass.styles??[]].map(s2=>s2.trim())),cssClass?.textStyles&&(compiledStyles=[...compiledStyles,...cssClass.textStyles??[]].map(s2=>s2.trim()))}return compiledStyles}getData(){const config5=getConfig2(),nodes5=[],edges3=[],subGraphs=this.getSubGraphs(),parentDB=new Map,subGraphDB=new Map;for(let i2=subGraphs.length-1;i2>=0;i2--){const subGraph=subGraphs[i2];subGraph.nodes.length>0&&subGraphDB.set(subGraph.id,!0);for(const id30 of subGraph.nodes)parentDB.set(id30,subGraph.id)}for(let i2=subGraphs.length-1;i2>=0;i2--){const subGraph=subGraphs[i2];nodes5.push({id:subGraph.id,label:subGraph.title,labelStyle:"",parentId:parentDB.get(subGraph.id),padding:8,cssCompiledStyles:this.getCompiledStyles(subGraph.classes),cssClasses:subGraph.classes.join(" "),shape:"rect",dir:subGraph.dir,isGroup:!0,look:config5.look})}this.getVertices().forEach(vertex=>{this.addNodeFromVertex(vertex,nodes5,parentDB,subGraphDB,config5,config5.look||"classic")});const e3=this.getEdges();return e3.forEach((rawEdge,index)=>{const{arrowTypeStart:arrowTypeStart,arrowTypeEnd:arrowTypeEnd}=this.destructEdgeType(rawEdge.type),styles4=[...e3.defaultStyle??[]];rawEdge.style&&styles4.push(...rawEdge.style);const edge={id:getEdgeId(rawEdge.start,rawEdge.end,{counter:index,prefix:"L"},rawEdge.id),isUserDefinedId:rawEdge.isUserDefinedId,start:rawEdge.start,end:rawEdge.end,type:rawEdge.type??"normal",label:rawEdge.text,labelpos:"c",thickness:rawEdge.stroke,minlen:rawEdge.length,classes:"invisible"===rawEdge?.stroke?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:"invisible"===rawEdge?.stroke||"arrow_open"===rawEdge?.type?"none":arrowTypeStart,arrowTypeEnd:"invisible"===rawEdge?.stroke||"arrow_open"===rawEdge?.type?"none":arrowTypeEnd,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(rawEdge.classes),labelStyle:styles4,style:styles4,pattern:rawEdge.stroke,look:config5.look,animate:rawEdge.animate,animation:rawEdge.animation,curve:rawEdge.interpolate||this.edges.defaultInterpolate||config5.flowchart?.curve};edges3.push(edge)}),{nodes:nodes5,edges:edges3,other:{},config:config5}}defaultConfig(){return defaultConfig2.flowchart}}}}),init_insertElementsForSize=__esm({"src/rendering-util/insertElementsForSize.js"(){init_src32(),getDiagramElement=__name((id30,securityLevel)=>{let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));return select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body").select(`[id="${id30}"]`)},"getDiagramElement")}}),init_subGraphTitleMargins=__esm({"src/utils/subGraphTitleMargins.ts"(){getSubGraphTitleMargins=__name(({flowchart:flowchart})=>{const subGraphTitleTopMargin=flowchart?.subGraphTitleMargin?.top??0,subGraphTitleBottomMargin=flowchart?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:subGraphTitleTopMargin,subGraphTitleBottomMargin:subGraphTitleBottomMargin,subGraphTitleTotalMargin:subGraphTitleTopMargin+subGraphTitleBottomMargin}},"getSubGraphTitleMargins")}}),init_clusters=__esm({"src/rendering-util/rendering-elements/clusters.js"(){init_diagramAPI(),init_common(),init_logger(),init_subGraphTitleMargins(),init_src32(),init_rough_esm(),init_createText(),init_intersect_rect(),init_createLabel(),init_roundedRectPath(),init_handDrawnShapeStyles(),rect=__name(async(parent4,node2)=>{log.info("Creating subgraph rect for ",node2.id,node2);const siteConfig2=getConfig2(),{themeVariables:themeVariables,handDrawnSeed:handDrawnSeed}=siteConfig2,{clusterBkg:clusterBkg,clusterBorder:clusterBorder}=themeVariables,{labelStyles:labelStyles,nodeStyles:nodeStyles,borderStyles:borderStyles,backgroundStyles:backgroundStyles}=styles2String(node2),shapeSvg=parent4.insert("g").attr("class","cluster "+node2.cssClasses).attr("id",node2.id).attr("data-look",node2.look),useHtmlLabels=evaluate(siteConfig2.flowchart.htmlLabels),labelEl=shapeSvg.insert("g").attr("class","cluster-label "),text4=await createText(labelEl,node2.label,{style:node2.labelStyle,useHtmlLabels:useHtmlLabels,isNode:!0});let bbox=text4.getBBox();if(evaluate(siteConfig2.flowchart.htmlLabels)){const div=text4.children[0],dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}const width3=node2.width<=bbox.width+node2.padding?bbox.width+node2.padding:node2.width;node2.width<=bbox.width+node2.padding?node2.diff=(width3-node2.width)/2-node2.padding:node2.diff=-node2.padding;const height2=node2.height,x5=node2.x-width3/2,y6=node2.y-height2/2;let rect3;if(log.trace("Data ",node2,JSON.stringify(node2)),"handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{roughness:.7,fill:clusterBkg,stroke:clusterBorder,fillWeight:3,seed:handDrawnSeed}),roughNode=rc.path(createRoundedRectPathD(x5,y6,width3,height2,0),options2);rect3=shapeSvg.insert(()=>(log.debug("Rough node insert CXC",roughNode),roughNode),":first-child"),rect3.select("path:nth-child(2)").attr("style",borderStyles.join(";")),rect3.select("path").attr("style",backgroundStyles.join(";").replace("fill","stroke"))}else rect3=shapeSvg.insert("rect",":first-child"),rect3.attr("style",nodeStyles).attr("rx",node2.rx).attr("ry",node2.ry).attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2);const{subGraphTitleTopMargin:subGraphTitleTopMargin}=getSubGraphTitleMargins(siteConfig2);if(labelEl.attr("transform",`translate(${node2.x-bbox.width/2}, ${node2.y-node2.height/2+subGraphTitleTopMargin})`),labelStyles){const span=labelEl.select("span");span&&span.attr("style",labelStyles)}const rectBox=rect3.node().getBBox();return node2.offsetX=0,node2.width=rectBox.width,node2.height=rectBox.height,node2.offsetY=bbox.height-node2.padding/2,node2.intersect=function(point8){return intersect_rect_default(node2,point8)},{cluster:shapeSvg,labelBBox:bbox}},"rect"),noteGroup=__name((parent4,node2)=>{const shapeSvg=parent4.insert("g").attr("class","note-cluster").attr("id",node2.id),rect3=shapeSvg.insert("rect",":first-child"),padding2=0*node2.padding,halfPadding=padding2/2;rect3.attr("rx",node2.rx).attr("ry",node2.ry).attr("x",node2.x-node2.width/2-halfPadding).attr("y",node2.y-node2.height/2-halfPadding).attr("width",node2.width+padding2).attr("height",node2.height+padding2).attr("fill","none");const rectBox=rect3.node().getBBox();return node2.width=rectBox.width,node2.height=rectBox.height,node2.intersect=function(point8){return intersect_rect_default(node2,point8)},{cluster:shapeSvg,labelBBox:{width:0,height:0}}},"noteGroup"),roundedWithTitle=__name(async(parent4,node2)=>{const siteConfig2=getConfig2(),{themeVariables:themeVariables,handDrawnSeed:handDrawnSeed}=siteConfig2,{altBackground:altBackground,compositeBackground:compositeBackground,compositeTitleBackground:compositeTitleBackground,nodeBorder:nodeBorder}=themeVariables,shapeSvg=parent4.insert("g").attr("class",node2.cssClasses).attr("id",node2.id).attr("data-id",node2.id).attr("data-look",node2.look),outerRectG=shapeSvg.insert("g",":first-child"),label=shapeSvg.insert("g").attr("class","cluster-label");let innerRect=shapeSvg.append("rect");const text4=label.node().appendChild(await createLabel_default(node2.label,node2.labelStyle,void 0,!0));let bbox=text4.getBBox();if(evaluate(siteConfig2.flowchart.htmlLabels)){const div=text4.children[0],dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}const padding2=0*node2.padding,halfPadding=padding2/2,width3=(node2.width<=bbox.width+node2.padding?bbox.width+node2.padding:node2.width)+padding2;node2.width<=bbox.width+node2.padding?node2.diff=(width3-node2.width)/2-node2.padding:node2.diff=-node2.padding;const height2=node2.height+padding2,innerHeight=node2.height+padding2-bbox.height-6,x5=node2.x-width3/2,y6=node2.y-height2/2;node2.width=width3;const innerY=node2.y-node2.height/2-halfPadding+bbox.height+2;let rect3;if("handDrawn"===node2.look){const isAlt=node2.cssClasses.includes("statediagram-cluster-alt"),rc=at.svg(shapeSvg),roughOuterNode=node2.rx||node2.ry?rc.path(createRoundedRectPathD(x5,y6,width3,height2,10),{roughness:.7,fill:compositeTitleBackground,fillStyle:"solid",stroke:nodeBorder,seed:handDrawnSeed}):rc.rectangle(x5,y6,width3,height2,{seed:handDrawnSeed});rect3=shapeSvg.insert(()=>roughOuterNode,":first-child");const roughInnerNode=rc.rectangle(x5,innerY,width3,innerHeight,{fill:isAlt?altBackground:compositeBackground,fillStyle:isAlt?"hachure":"solid",stroke:nodeBorder,seed:handDrawnSeed});rect3=shapeSvg.insert(()=>roughOuterNode,":first-child"),innerRect=shapeSvg.insert(()=>roughInnerNode)}else{rect3=outerRectG.insert("rect",":first-child");const outerRectClass="outer";rect3.attr("class",outerRectClass).attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).attr("data-look",node2.look),innerRect.attr("class","inner").attr("x",x5).attr("y",innerY).attr("width",width3).attr("height",innerHeight)}label.attr("transform",`translate(${node2.x-bbox.width/2}, ${y6+1-(evaluate(siteConfig2.flowchart.htmlLabels)?0:3)})`);const rectBox=rect3.node().getBBox();return node2.height=rectBox.height,node2.offsetX=0,node2.offsetY=bbox.height-node2.padding/2,node2.labelBBox=bbox,node2.intersect=function(point8){return intersect_rect_default(node2,point8)},{cluster:shapeSvg,labelBBox:bbox}},"roundedWithTitle"),kanbanSection=__name(async(parent4,node2)=>{log.info("Creating subgraph rect for ",node2.id,node2);const siteConfig2=getConfig2(),{themeVariables:themeVariables,handDrawnSeed:handDrawnSeed}=siteConfig2,{clusterBkg:clusterBkg,clusterBorder:clusterBorder}=themeVariables,{labelStyles:labelStyles,nodeStyles:nodeStyles,borderStyles:borderStyles,backgroundStyles:backgroundStyles}=styles2String(node2),shapeSvg=parent4.insert("g").attr("class","cluster "+node2.cssClasses).attr("id",node2.id).attr("data-look",node2.look),useHtmlLabels=evaluate(siteConfig2.flowchart.htmlLabels),labelEl=shapeSvg.insert("g").attr("class","cluster-label "),text4=await createText(labelEl,node2.label,{style:node2.labelStyle,useHtmlLabels:useHtmlLabels,isNode:!0,width:node2.width});let bbox=text4.getBBox();if(evaluate(siteConfig2.flowchart.htmlLabels)){const div=text4.children[0],dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}const width3=node2.width<=bbox.width+node2.padding?bbox.width+node2.padding:node2.width;node2.width<=bbox.width+node2.padding?node2.diff=(width3-node2.width)/2-node2.padding:node2.diff=-node2.padding;const height2=node2.height,x5=node2.x-width3/2,y6=node2.y-height2/2;let rect3;if(log.trace("Data ",node2,JSON.stringify(node2)),"handDrawn"===node2.look){const rc=at.svg(shapeSvg),options2=userNodeOverrides(node2,{roughness:.7,fill:clusterBkg,stroke:clusterBorder,fillWeight:4,seed:handDrawnSeed}),roughNode=rc.path(createRoundedRectPathD(x5,y6,width3,height2,node2.rx),options2);rect3=shapeSvg.insert(()=>(log.debug("Rough node insert CXC",roughNode),roughNode),":first-child"),rect3.select("path:nth-child(2)").attr("style",borderStyles.join(";")),rect3.select("path").attr("style",backgroundStyles.join(";").replace("fill","stroke"))}else rect3=shapeSvg.insert("rect",":first-child"),rect3.attr("style",nodeStyles).attr("rx",node2.rx).attr("ry",node2.ry).attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2);const{subGraphTitleTopMargin:subGraphTitleTopMargin}=getSubGraphTitleMargins(siteConfig2);if(labelEl.attr("transform",`translate(${node2.x-bbox.width/2}, ${node2.y-node2.height/2+subGraphTitleTopMargin})`),labelStyles){const span=labelEl.select("span");span&&span.attr("style",labelStyles)}const rectBox=rect3.node().getBBox();return node2.offsetX=0,node2.width=rectBox.width,node2.height=rectBox.height,node2.offsetY=bbox.height-node2.padding/2,node2.intersect=function(point8){return intersect_rect_default(node2,point8)},{cluster:shapeSvg,labelBBox:bbox}},"kanbanSection"),shapes2={rect:rect,squareRect:rect,roundedWithTitle:roundedWithTitle,noteGroup:noteGroup,divider:__name((parent4,node2)=>{const siteConfig2=getConfig2(),{themeVariables:themeVariables,handDrawnSeed:handDrawnSeed}=siteConfig2,{nodeBorder:nodeBorder}=themeVariables,shapeSvg=parent4.insert("g").attr("class",node2.cssClasses).attr("id",node2.id).attr("data-look",node2.look),outerRectG=shapeSvg.insert("g",":first-child"),padding2=0*node2.padding,width3=node2.width+padding2;node2.diff=-node2.padding;const height2=node2.height+padding2,x5=node2.x-width3/2,y6=node2.y-height2/2;let rect3;if(node2.width=width3,"handDrawn"===node2.look){const roughOuterNode=at.svg(shapeSvg).rectangle(x5,y6,width3,height2,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:nodeBorder,seed:handDrawnSeed});rect3=shapeSvg.insert(()=>roughOuterNode,":first-child")}else{rect3=outerRectG.insert("rect",":first-child");const outerRectClass="divider";rect3.attr("class",outerRectClass).attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).attr("data-look",node2.look)}const rectBox=rect3.node().getBBox();return node2.height=rectBox.height,node2.offsetX=0,node2.offsetY=0,node2.intersect=function(point8){return intersect_rect_default(node2,point8)},{cluster:shapeSvg,labelBBox:{}}},"divider"),kanbanSection:kanbanSection},clusterElems=new Map,insertCluster=__name(async(elem,node2)=>{const shape=node2.shape||"rect",cluster=await shapes2[shape](elem,node2);return clusterElems.set(node2.id,cluster),cluster},"insertCluster"),clear3=__name(()=>{clusterElems=new Map},"clear")}});function calculateDeltaAndAngle(point1,point22){if(void 0===point1||void 0===point22)return{angle:0,deltaX:0,deltaY:0};point1=pointTransformer(point1),point22=pointTransformer(point22);const[x1,y1]=[point1.x,point1.y],[x22,y22]=[point22.x,point22.y],deltaX=x22-x1,deltaY=y22-y1;return{angle:Math.atan(deltaY/deltaX),deltaX:deltaX,deltaY:deltaY}}var addEdgeMarkers,arrowTypesMap,addEdgeMarker,edgeLabels,terminalLabels,clear4,getLabelStyles,insertEdgeLabel,positionEdgeLabel,outsideNode,intersection,cutPathAtIntersect,findAdjacentPoint,fixCorners,generateDashArray,insertEdge,init_lineWithOffset=__esm({"src/utils/lineWithOffset.ts"(){markerOffsets={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},markerOffsets2={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5},__name(calculateDeltaAndAngle,"calculateDeltaAndAngle"),pointTransformer=__name(data5=>Array.isArray(data5)?{x:data5[0],y:data5[1]}:data5,"pointTransformer"),getLineFunctionsWithOffset=__name(edge=>({x:__name(function(d3,i2,data5){let offset=0;const DIRECTION=pointTransformer(data5[0]).x<pointTransformer(data5[data5.length-1]).x?"left":"right";if(0===i2&&Object.hasOwn(markerOffsets,edge.arrowTypeStart)){const{angle:angle2,deltaX:deltaX}=calculateDeltaAndAngle(data5[0],data5[1]);offset=markerOffsets[edge.arrowTypeStart]*Math.cos(angle2)*(deltaX>=0?1:-1)}else if(i2===data5.length-1&&Object.hasOwn(markerOffsets,edge.arrowTypeEnd)){const{angle:angle2,deltaX:deltaX}=calculateDeltaAndAngle(data5[data5.length-1],data5[data5.length-2]);offset=markerOffsets[edge.arrowTypeEnd]*Math.cos(angle2)*(deltaX>=0?1:-1)}const differenceToEnd=Math.abs(pointTransformer(d3).x-pointTransformer(data5[data5.length-1]).x),differenceInYEnd=Math.abs(pointTransformer(d3).y-pointTransformer(data5[data5.length-1]).y),differenceToStart=Math.abs(pointTransformer(d3).x-pointTransformer(data5[0]).x),differenceInYStart=Math.abs(pointTransformer(d3).y-pointTransformer(data5[0]).y),startMarkerHeight=markerOffsets[edge.arrowTypeStart],endMarkerHeight=markerOffsets[edge.arrowTypeEnd];if(differenceToEnd<endMarkerHeight&&differenceToEnd>0&&differenceInYEnd<endMarkerHeight){let adjustment=endMarkerHeight+1-differenceToEnd;adjustment*="right"===DIRECTION?-1:1,offset-=adjustment}if(differenceToStart<startMarkerHeight&&differenceToStart>0&&differenceInYStart<startMarkerHeight){let adjustment=startMarkerHeight+1-differenceToStart;adjustment*="right"===DIRECTION?-1:1,offset+=adjustment}return pointTransformer(d3).x+offset},"x"),y:__name(function(d3,i2,data5){let offset=0;const DIRECTION=pointTransformer(data5[0]).y<pointTransformer(data5[data5.length-1]).y?"down":"up";if(0===i2&&Object.hasOwn(markerOffsets,edge.arrowTypeStart)){const{angle:angle2,deltaY:deltaY}=calculateDeltaAndAngle(data5[0],data5[1]);offset=markerOffsets[edge.arrowTypeStart]*Math.abs(Math.sin(angle2))*(deltaY>=0?1:-1)}else if(i2===data5.length-1&&Object.hasOwn(markerOffsets,edge.arrowTypeEnd)){const{angle:angle2,deltaY:deltaY}=calculateDeltaAndAngle(data5[data5.length-1],data5[data5.length-2]);offset=markerOffsets[edge.arrowTypeEnd]*Math.abs(Math.sin(angle2))*(deltaY>=0?1:-1)}const differenceToEnd=Math.abs(pointTransformer(d3).y-pointTransformer(data5[data5.length-1]).y),differenceInXEnd=Math.abs(pointTransformer(d3).x-pointTransformer(data5[data5.length-1]).x),differenceToStart=Math.abs(pointTransformer(d3).y-pointTransformer(data5[0]).y),differenceInXStart=Math.abs(pointTransformer(d3).x-pointTransformer(data5[0]).x),startMarkerHeight=markerOffsets[edge.arrowTypeStart],endMarkerHeight=markerOffsets[edge.arrowTypeEnd];if(differenceToEnd<endMarkerHeight&&differenceToEnd>0&&differenceInXEnd<endMarkerHeight){let adjustment=endMarkerHeight+1-differenceToEnd;adjustment*="up"===DIRECTION?-1:1,offset-=adjustment}if(differenceToStart<startMarkerHeight&&differenceToStart>0&&differenceInXStart<startMarkerHeight){let adjustment=startMarkerHeight+1-differenceToStart;adjustment*="up"===DIRECTION?-1:1,offset+=adjustment}return pointTransformer(d3).y+offset},"y")}),"getLineFunctionsWithOffset")}}),init_edgeMarker=__esm({"src/rendering-util/rendering-elements/edgeMarker.ts"(){init_logger(),addEdgeMarkers=__name((svgPath,edge,url,id30,diagramType,strokeColor)=>{edge.arrowTypeStart&&addEdgeMarker(svgPath,"start",edge.arrowTypeStart,url,id30,diagramType,strokeColor),edge.arrowTypeEnd&&addEdgeMarker(svgPath,"end",edge.arrowTypeEnd,url,id30,diagramType,strokeColor)},"addEdgeMarkers"),arrowTypesMap={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},addEdgeMarker=__name((svgPath,position5,arrowType,url,id30,diagramType,strokeColor)=>{const arrowTypeInfo=arrowTypesMap[arrowType];if(!arrowTypeInfo)return void log.warn(`Unknown arrow type: ${arrowType}`);const originalMarkerId=`${id30}_${diagramType}-${arrowTypeInfo.type}${"start"===position5?"Start":"End"}`;if(strokeColor&&""!==strokeColor.trim()){const coloredMarkerId=`${originalMarkerId}_${strokeColor.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(coloredMarkerId)){const originalMarker=document.getElementById(originalMarkerId);if(originalMarker){const coloredMarker=originalMarker.cloneNode(!0);coloredMarker.id=coloredMarkerId;coloredMarker.querySelectorAll("path, circle, line").forEach(path4=>{path4.setAttribute("stroke",strokeColor),arrowTypeInfo.fill&&path4.setAttribute("fill",strokeColor)}),originalMarker.parentNode?.appendChild(coloredMarker)}}svgPath.attr(`marker-${position5}`,`url(${url}#${coloredMarkerId})`)}else svgPath.attr(`marker-${position5}`,`url(${url}#${originalMarkerId})`)},"addEdgeMarker")}});function setTerminalWidth(fo,value2){getConfig2().flowchart.htmlLabels&&fo&&(fo.style.width=9*value2.length+"px",fo.style.height="12px")}function extractCornerPoints(points){const cornerPoints=[],cornerPointPositions=[];for(let i2=1;i2<points.length-1;i2++){const prev2=points[i2-1],curr=points[i2],next3=points[i2+1];(prev2.x===curr.x&&curr.y===next3.y&&Math.abs(curr.x-next3.x)>5&&Math.abs(curr.y-prev2.y)>5||prev2.y===curr.y&&curr.x===next3.x&&Math.abs(curr.x-prev2.x)>5&&Math.abs(curr.y-next3.y)>5)&&(cornerPoints.push(curr),cornerPointPositions.push(i2))}return{cornerPoints:cornerPoints,cornerPointPositions:cornerPointPositions}}function generateRoundedPath(points,radius2){if(points.length<2)return"";let path4="";const size4=points.length;for(let i2=0;i2<size4;i2++){const currPoint=points[i2],prevPoint=points[i2-1],nextPoint=points[i2+1];if(0===i2)path4+=`M${currPoint.x},${currPoint.y}`;else if(i2===size4-1)path4+=`L${currPoint.x},${currPoint.y}`;else{const dx1=currPoint.x-prevPoint.x,dy1=currPoint.y-prevPoint.y,dx2=nextPoint.x-currPoint.x,dy2=nextPoint.y-currPoint.y,len1=Math.hypot(dx1,dy1),len2=Math.hypot(dx2,dy2);if(len1<1e-5||len2<1e-5){path4+=`L${currPoint.x},${currPoint.y}`;continue}const nx1=dx1/len1,ny1=dy1/len1,nx2=dx2/len2,ny2=dy2/len2,dot=nx1*nx2+ny1*ny2,clampedDot=Math.max(-1,Math.min(1,dot)),angle2=Math.acos(clampedDot);if(angle2<1e-5||Math.abs(Math.PI-angle2)<1e-5){path4+=`L${currPoint.x},${currPoint.y}`;continue}const cutLen=Math.min(radius2/Math.sin(angle2/2),len1/2,len2/2),startX2=currPoint.x-nx1*cutLen,startY2=currPoint.y-ny1*cutLen,endX=currPoint.x+nx2*cutLen,endY=currPoint.y+ny2*cutLen;path4+=`L${startX2},${startY2}`,path4+=`Q${currPoint.x},${currPoint.y} ${endX},${endY}`}}return path4}function calculateDeltaAndAngle2(point1,point22){if(!point1||!point22)return{angle:0,deltaX:0,deltaY:0};const deltaX=point22.x-point1.x,deltaY=point22.y-point1.y;return{angle:Math.atan2(deltaY,deltaX),deltaX:deltaX,deltaY:deltaY}}function applyMarkerOffsetsToPoints(points,edge){const newPoints=points.map(point8=>({...point8}));if(points.length>=2&&markerOffsets[edge.arrowTypeStart]){const offsetValue=markerOffsets[edge.arrowTypeStart],point1=points[0],point22=points[1],{angle:angle2}=calculateDeltaAndAngle2(point1,point22),offsetX=offsetValue*Math.cos(angle2),offsetY=offsetValue*Math.sin(angle2);newPoints[0].x=point1.x+offsetX,newPoints[0].y=point1.y+offsetY}const n2=points.length;if(n2>=2&&markerOffsets[edge.arrowTypeEnd]){const offsetValue=markerOffsets[edge.arrowTypeEnd],point1=points[n2-1],point22=points[n2-2],{angle:angle2}=calculateDeltaAndAngle2(point22,point1),offsetX=offsetValue*Math.cos(angle2),offsetY=offsetValue*Math.sin(angle2);newPoints[n2-1].x=point1.x-offsetX,newPoints[n2-1].y=point1.y-offsetY}return newPoints}var insertMarkers,markers,markers_default,nodeElems,setNodeElem,clear5,positionNode,init_edges=__esm({"src/rendering-util/rendering-elements/edges.js"(){init_diagramAPI(),init_common(),init_logger(),init_createText(),init_utils2(),init_lineWithOffset(),init_subGraphTitleMargins(),init_src32(),init_rough_esm(),init_createLabel(),init_edgeMarker(),init_handDrawnShapeStyles(),edgeLabels=new Map,terminalLabels=new Map,clear4=__name(()=>{edgeLabels.clear(),terminalLabels.clear()},"clear"),getLabelStyles=__name(styleArray=>styleArray?styleArray.reduce((acc,style3)=>acc+";"+style3,""):"","getLabelStyles"),insertEdgeLabel=__name(async(elem,edge)=>{let useHtmlLabels=evaluate(getConfig2().flowchart.htmlLabels);const{labelStyles:labelStyles}=styles2String(edge);edge.labelStyle=labelStyles;const labelElement=await createText(elem,edge.label,{style:edge.labelStyle,useHtmlLabels:useHtmlLabels,addSvgBackground:!0,isNode:!1});log.info("abc82",edge,edge.labelType);const edgeLabel=elem.insert("g").attr("class","edgeLabel"),label=edgeLabel.insert("g").attr("class","label").attr("data-id",edge.id);label.node().appendChild(labelElement);let fo,bbox=labelElement.getBBox();if(useHtmlLabels){const div=labelElement.children[0],dv=select_default2(labelElement);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}if(label.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"),edgeLabels.set(edge.id,edgeLabel),edge.width=bbox.width,edge.height=bbox.height,edge.startLabelLeft){const startLabelElement=await createLabel_default(edge.startLabelLeft,getLabelStyles(edge.labelStyle)),startEdgeLabelLeft=elem.insert("g").attr("class","edgeTerminals"),inner2=startEdgeLabelLeft.insert("g").attr("class","inner");fo=inner2.node().appendChild(startLabelElement);const slBox=startLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),terminalLabels.get(edge.id)||terminalLabels.set(edge.id,{}),terminalLabels.get(edge.id).startLeft=startEdgeLabelLeft,setTerminalWidth(fo,edge.startLabelLeft)}if(edge.startLabelRight){const startLabelElement=await createLabel_default(edge.startLabelRight,getLabelStyles(edge.labelStyle)),startEdgeLabelRight=elem.insert("g").attr("class","edgeTerminals"),inner2=startEdgeLabelRight.insert("g").attr("class","inner");fo=startEdgeLabelRight.node().appendChild(startLabelElement),inner2.node().appendChild(startLabelElement);const slBox=startLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),terminalLabels.get(edge.id)||terminalLabels.set(edge.id,{}),terminalLabels.get(edge.id).startRight=startEdgeLabelRight,setTerminalWidth(fo,edge.startLabelRight)}if(edge.endLabelLeft){const endLabelElement=await createLabel_default(edge.endLabelLeft,getLabelStyles(edge.labelStyle)),endEdgeLabelLeft=elem.insert("g").attr("class","edgeTerminals"),inner2=endEdgeLabelLeft.insert("g").attr("class","inner");fo=inner2.node().appendChild(endLabelElement);const slBox=endLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),endEdgeLabelLeft.node().appendChild(endLabelElement),terminalLabels.get(edge.id)||terminalLabels.set(edge.id,{}),terminalLabels.get(edge.id).endLeft=endEdgeLabelLeft,setTerminalWidth(fo,edge.endLabelLeft)}if(edge.endLabelRight){const endLabelElement=await createLabel_default(edge.endLabelRight,getLabelStyles(edge.labelStyle)),endEdgeLabelRight=elem.insert("g").attr("class","edgeTerminals"),inner2=endEdgeLabelRight.insert("g").attr("class","inner");fo=inner2.node().appendChild(endLabelElement);const slBox=endLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),endEdgeLabelRight.node().appendChild(endLabelElement),terminalLabels.get(edge.id)||terminalLabels.set(edge.id,{}),terminalLabels.get(edge.id).endRight=endEdgeLabelRight,setTerminalWidth(fo,edge.endLabelRight)}return labelElement},"insertEdgeLabel"),__name(setTerminalWidth,"setTerminalWidth"),positionEdgeLabel=__name((edge,paths)=>{log.debug("Moving label abc88 ",edge.id,edge.label,edgeLabels.get(edge.id),paths);let path4=paths.updatedPath?paths.updatedPath:paths.originalPath;const siteConfig2=getConfig2(),{subGraphTitleTotalMargin:subGraphTitleTotalMargin}=getSubGraphTitleMargins(siteConfig2);if(edge.label){const el=edgeLabels.get(edge.id);let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcLabelPosition(path4);log.debug("Moving label "+edge.label+" from (",x5,",",y6,") to (",pos.x,",",pos.y,") abc88"),paths.updatedPath&&(x5=pos.x,y6=pos.y)}el.attr("transform",`translate(${x5}, ${y6+subGraphTitleTotalMargin/2})`)}if(edge.startLabelLeft){const el=terminalLabels.get(edge.id).startLeft;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeStart?10:0,"start_left",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}if(edge.startLabelRight){const el=terminalLabels.get(edge.id).startRight;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeStart?10:0,"start_right",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}if(edge.endLabelLeft){const el=terminalLabels.get(edge.id).endLeft;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeEnd?10:0,"end_left",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}if(edge.endLabelRight){const el=terminalLabels.get(edge.id).endRight;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeEnd?10:0,"end_right",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}},"positionEdgeLabel"),outsideNode=__name((node2,point8)=>{const x5=node2.x,y6=node2.y,dx=Math.abs(point8.x-x5),dy=Math.abs(point8.y-y6),w4=node2.width/2,h3=node2.height/2;return dx>=w4||dy>=h3},"outsideNode"),intersection=__name((node2,outsidePoint,insidePoint)=>{log.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(outsidePoint)}\n  insidePoint : ${JSON.stringify(insidePoint)}\n  node        : x:${node2.x} y:${node2.y} w:${node2.width} h:${node2.height}`);const x5=node2.x,y6=node2.y,dx=Math.abs(x5-insidePoint.x),w4=node2.width/2;let r2=insidePoint.x<outsidePoint.x?w4-dx:w4+dx;const h3=node2.height/2,Q3=Math.abs(outsidePoint.y-insidePoint.y),R3=Math.abs(outsidePoint.x-insidePoint.x);if(Math.abs(y6-outsidePoint.y)*w4>Math.abs(x5-outsidePoint.x)*h3){let q3=insidePoint.y<outsidePoint.y?outsidePoint.y-h3-y6:y6-h3-outsidePoint.y;r2=R3*q3/Q3;const res={x:insidePoint.x<outsidePoint.x?insidePoint.x+r2:insidePoint.x-R3+r2,y:insidePoint.y<outsidePoint.y?insidePoint.y+Q3-q3:insidePoint.y-Q3+q3};return 0===r2&&(res.x=outsidePoint.x,res.y=outsidePoint.y),0===R3&&(res.x=outsidePoint.x),0===Q3&&(res.y=outsidePoint.y),log.debug(`abc89 top/bottom calc, Q ${Q3}, q ${q3}, R ${R3}, r ${r2}`,res),res}{r2=insidePoint.x<outsidePoint.x?outsidePoint.x-w4-x5:x5-w4-outsidePoint.x;let q3=Q3*r2/R3,_x=insidePoint.x<outsidePoint.x?insidePoint.x+R3-r2:insidePoint.x-R3+r2,_y=insidePoint.y<outsidePoint.y?insidePoint.y+q3:insidePoint.y-q3;return log.debug(`sides calc abc89, Q ${Q3}, q ${q3}, R ${R3}, r ${r2}`,{_x:_x,_y:_y}),0===r2&&(_x=outsidePoint.x,_y=outsidePoint.y),0===R3&&(_x=outsidePoint.x),0===Q3&&(_y=outsidePoint.y),{x:_x,y:_y}}},"intersection"),cutPathAtIntersect=__name((_points,boundaryNode)=>{log.warn("abc88 cutPathAtIntersect",_points,boundaryNode);let points=[],lastPointOutside=_points[0],isInside=!1;return _points.forEach(point8=>{if(log.info("abc88 checking point",point8,boundaryNode),outsideNode(boundaryNode,point8)||isInside)log.warn("abc88 outside",point8,lastPointOutside),lastPointOutside=point8,isInside||points.push(point8);else{const inter=intersection(boundaryNode,lastPointOutside,point8);log.debug("abc88 inside",point8,lastPointOutside,inter),log.debug("abc88 intersection",inter,boundaryNode);let pointPresent=!1;points.forEach(p3=>{pointPresent=pointPresent||p3.x===inter.x&&p3.y===inter.y}),points.some(e3=>e3.x===inter.x&&e3.y===inter.y)?log.warn("abc88 no intersect",inter,points):points.push(inter),isInside=!0}}),log.debug("returning points",points),points},"cutPathAtIntersect"),__name(extractCornerPoints,"extractCornerPoints"),findAdjacentPoint=__name(function(pointA,pointB,distance2){const xDiff=pointB.x-pointA.x,yDiff=pointB.y-pointA.y,ratio=distance2/Math.sqrt(xDiff*xDiff+yDiff*yDiff);return{x:pointB.x-ratio*xDiff,y:pointB.y-ratio*yDiff}},"findAdjacentPoint"),fixCorners=__name(function(lineData){const{cornerPointPositions:cornerPointPositions}=extractCornerPoints(lineData),newLineData=[];for(let i2=0;i2<lineData.length;i2++)if(cornerPointPositions.includes(i2)){const prevPoint=lineData[i2-1],nextPoint=lineData[i2+1],cornerPoint=lineData[i2],newPrevPoint=findAdjacentPoint(prevPoint,cornerPoint,5),newNextPoint=findAdjacentPoint(nextPoint,cornerPoint,5),xDiff=newNextPoint.x-newPrevPoint.x,yDiff=newNextPoint.y-newPrevPoint.y;newLineData.push(newPrevPoint);const a2=2*Math.sqrt(2);let newCornerPoint={x:cornerPoint.x,y:cornerPoint.y};if(Math.abs(nextPoint.x-prevPoint.x)>10&&Math.abs(nextPoint.y-prevPoint.y)>=10){log.debug("Corner point fixing",Math.abs(nextPoint.x-prevPoint.x),Math.abs(nextPoint.y-prevPoint.y));const r2=5;newCornerPoint=cornerPoint.x===newPrevPoint.x?{x:xDiff<0?newPrevPoint.x-r2+a2:newPrevPoint.x+r2-a2,y:yDiff<0?newPrevPoint.y-a2:newPrevPoint.y+a2}:{x:xDiff<0?newPrevPoint.x-a2:newPrevPoint.x+a2,y:yDiff<0?newPrevPoint.y-r2+a2:newPrevPoint.y+r2-a2}}else log.debug("Corner point skipping fixing",Math.abs(nextPoint.x-prevPoint.x),Math.abs(nextPoint.y-prevPoint.y));newLineData.push(newCornerPoint,newNextPoint)}else newLineData.push(lineData[i2]);return newLineData},"fixCorners"),generateDashArray=__name((len,oValueS,oValueE)=>{const middleLength=len-oValueS-oValueE,numberOfPairs=Math.floor(middleLength/4);return`0 ${oValueS} ${Array(numberOfPairs).fill("2 2").join(" ")} ${oValueE}`},"generateDashArray"),insertEdge=__name(function(elem,edge,clusterDb2,diagramType,startNode,endNode,id30,skipIntersect=!1){const{handDrawnSeed:handDrawnSeed}=getConfig2();let points=edge.points,pointsHasChanged=!1;const tail=startNode;var head2=endNode;const edgeClassStyles=[];for(const key in edge.cssCompiledStyles)isLabelStyle(key)||edgeClassStyles.push(edge.cssCompiledStyles[key]);log.debug("UIO intersect check",edge.points,head2.x,tail.x),head2.intersect&&tail.intersect&&!skipIntersect&&(points=points.slice(1,edge.points.length-1),points.unshift(tail.intersect(points[0])),log.debug("Last point UIO",edge.start,"--\x3e",edge.end,points[points.length-1],head2,head2.intersect(points[points.length-1])),points.push(head2.intersect(points[points.length-1])));const pointsStr=btoa(JSON.stringify(points));edge.toCluster&&(log.info("to cluster abc88",clusterDb2.get(edge.toCluster)),points=cutPathAtIntersect(edge.points,clusterDb2.get(edge.toCluster).node),pointsHasChanged=!0),edge.fromCluster&&(log.debug("from cluster abc88",clusterDb2.get(edge.fromCluster),JSON.stringify(points,null,2)),points=cutPathAtIntersect(points.reverse(),clusterDb2.get(edge.fromCluster).node).reverse(),pointsHasChanged=!0);let lineData=points.filter(p3=>!Number.isNaN(p3.y));lineData=fixCorners(lineData);let curve=basis_default2;switch(curve=linear_default,edge.curve){case"linear":curve=linear_default;break;case"basis":default:curve=basis_default2;break;case"cardinal":curve=cardinal_default;break;case"bumpX":curve=bumpX;break;case"bumpY":curve=bumpY;break;case"catmullRom":curve=catmullRom_default;break;case"monotoneX":curve=monotoneX;break;case"monotoneY":curve=monotoneY;break;case"natural":curve=natural_default;break;case"step":curve=step_default;break;case"stepAfter":curve=stepAfter;break;case"stepBefore":curve=stepBefore}const{x:x5,y:y6}=getLineFunctionsWithOffset(edge),lineFunction=line_default().x(x5).y(y6).curve(curve);let strokeClasses,svgPath;switch(edge.thickness){case"normal":default:strokeClasses="edge-thickness-normal";break;case"thick":strokeClasses="edge-thickness-thick";break;case"invisible":strokeClasses="edge-thickness-invisible"}switch(edge.pattern){case"solid":default:strokeClasses+=" edge-pattern-solid";break;case"dotted":strokeClasses+=" edge-pattern-dotted";break;case"dashed":strokeClasses+=" edge-pattern-dashed"}let linePath="rounded"===edge.curve?generateRoundedPath(applyMarkerOffsetsToPoints(lineData,edge),5):lineFunction(lineData);const edgeStyles=Array.isArray(edge.style)?edge.style:[edge.style];let strokeColor=edgeStyles.find(style3=>style3?.startsWith("stroke:")),animatedEdge=!1;if("handDrawn"===edge.look){const rc=at.svg(elem);Object.assign([],lineData);strokeClasses+=" transition",svgPath=select_default2(rc.path(linePath,{roughness:.3,seed:handDrawnSeed})).select("path").attr("id",edge.id).attr("class"," "+strokeClasses+(edge.classes?" "+edge.classes:"")).attr("style",edgeStyles?edgeStyles.reduce((acc,style3)=>acc+";"+style3,""):"");let d3=svgPath.attr("d");svgPath.attr("d",d3),elem.node().appendChild(svgPath.node())}else{const stylesFromClasses=edgeClassStyles.join(";"),styles4=edgeStyles?edgeStyles.reduce((acc,style3)=>acc+style3+";",""):"";let animationClass="";edge.animate&&(animationClass=" edge-animation-fast"),edge.animation&&(animationClass=" edge-animation-"+edge.animation);const pathStyle=(stylesFromClasses?stylesFromClasses+";"+styles4+";":styles4)+";"+(edgeStyles?edgeStyles.reduce((acc,style3)=>acc+";"+style3,""):"");svgPath=elem.append("path").attr("d",linePath).attr("id",edge.id).attr("class"," "+strokeClasses+(edge.classes?" "+edge.classes:"")+(animationClass??"")).attr("style",pathStyle),strokeColor=pathStyle.match(/stroke:([^;]+)/)?.[1],animatedEdge=!0===edge.animate||!!edge.animation||stylesFromClasses.includes("animation");const pathNode=svgPath.node(),len="function"==typeof pathNode.getTotalLength?pathNode.getTotalLength():0,oValueS=markerOffsets2[edge.arrowTypeStart]||0,oValueE=markerOffsets2[edge.arrowTypeEnd]||0;if("neo"===edge.look&&!animatedEdge){const mOffset=`stroke-dasharray: ${"dotted"===edge.pattern||"dashed"===edge.pattern?generateDashArray(len,oValueS,oValueE):`0 ${oValueS} ${len-oValueS-oValueE} ${oValueE}`}; stroke-dashoffset: 0;`;svgPath.attr("style",mOffset+svgPath.attr("style"))}}svgPath.attr("data-edge",!0),svgPath.attr("data-et","edge"),svgPath.attr("data-id",edge.id),svgPath.attr("data-points",pointsStr),edge.showPoints&&lineData.forEach(point9=>{elem.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",point9.x).attr("cy",point9.y)});let url="";(getConfig2().flowchart.arrowMarkerAbsolute||getConfig2().state.arrowMarkerAbsolute)&&(url=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,url=url.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),log.info("arrowTypeStart",edge.arrowTypeStart),log.info("arrowTypeEnd",edge.arrowTypeEnd),addEdgeMarkers(svgPath,edge,url,id30,diagramType,strokeColor);const point8=points[Math.floor(points.length/2)];utils_default2.isLabelCoordinateInPath(point8,svgPath.attr("d"))||(pointsHasChanged=!0);let paths={};return pointsHasChanged&&(paths.updatedPath=points),paths.originalPath=edge.points,paths},"insertEdge"),__name(generateRoundedPath,"generateRoundedPath"),__name(calculateDeltaAndAngle2,"calculateDeltaAndAngle"),__name(applyMarkerOffsetsToPoints,"applyMarkerOffsetsToPoints")}}),init_markers=__esm({"src/rendering-util/rendering-elements/markers.js"(){init_logger(),insertMarkers=__name((elem,markerArray,type3,id30)=>{markerArray.forEach(markerName=>{markers[markerName](elem,type3,id30)})},"insertMarkers"),markers={extension:__name((elem,type3,id30)=>{log.trace("Making markers for ",id30),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-extensionStart").attr("class","marker extension "+type3).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-extensionEnd").attr("class","marker extension "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-compositionStart").attr("class","marker composition "+type3).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-compositionEnd").attr("class","marker composition "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-aggregationStart").attr("class","marker aggregation "+type3).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-aggregationEnd").attr("class","marker aggregation "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-dependencyStart").attr("class","marker dependency "+type3).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-dependencyEnd").attr("class","marker dependency "+type3).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-lollipopStart").attr("class","marker lollipop "+type3).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-lollipopEnd").attr("class","marker lollipop "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:__name((elem,type3,id30)=>{elem.append("marker").attr("id",id30+"_"+type3+"-pointEnd").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),elem.append("marker").attr("id",id30+"_"+type3+"-pointStart").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:__name((elem,type3,id30)=>{elem.append("marker").attr("id",id30+"_"+type3+"-circleEnd").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),elem.append("marker").attr("id",id30+"_"+type3+"-circleStart").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:__name((elem,type3,id30)=>{elem.append("marker").attr("id",id30+"_"+type3+"-crossEnd").attr("class","marker cross "+type3).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),elem.append("marker").attr("id",id30+"_"+type3+"-crossStart").attr("class","marker cross "+type3).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),only_one:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-onlyOneStart").attr("class","marker onlyOne "+type3).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-onlyOneEnd").attr("class","marker onlyOne "+type3).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),zero_or_one:__name((elem,type3,id30)=>{const startMarker=elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-zeroOrOneStart").attr("class","marker zeroOrOne "+type3).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");startMarker.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),startMarker.append("path").attr("d","M9,0 L9,18");const endMarker=elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+type3).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");endMarker.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),endMarker.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),one_or_more:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-oneOrMoreStart").attr("class","marker oneOrMore "+type3).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-oneOrMoreEnd").attr("class","marker oneOrMore "+type3).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),zero_or_more:__name((elem,type3,id30)=>{const startMarker=elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+type3).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");startMarker.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),startMarker.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const endMarker=elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+type3).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");endMarker.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),endMarker.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),requirement_arrow:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")},"requirement_arrow"),requirement_contains:__name((elem,type3,id30)=>{const containsNode=elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");containsNode.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),containsNode.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),containsNode.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")},markers_default=insertMarkers}});async function insertNode(elem,node2,renderOptions){let newEl,el;"rect"===node2.shape&&(node2.rx&&node2.ry?node2.shape="roundedRect":node2.shape="squareRect");const shapeHandler=node2.shape?shapes[node2.shape]:void 0;if(!shapeHandler)throw new Error(`No such shape: ${node2.shape}. Please check your syntax.`);if(node2.link){let target;"sandbox"===renderOptions.config.securityLevel?target="_top":node2.linkTarget&&(target=node2.linkTarget||"_blank"),newEl=elem.insert("svg:a").attr("xlink:href",node2.link).attr("target",target??null),el=await shapeHandler(newEl,node2,renderOptions)}else el=await shapeHandler(elem,node2,renderOptions),newEl=el;return node2.tooltip&&el.attr("title",node2.tooltip),nodeElems.set(node2.id,newEl),node2.haveCallback&&newEl.attr("class",newEl.attr("class")+" clickable"),newEl}var internalHelpers,symbolTag,isSymbol_default,init_nodes2=__esm({"src/rendering-util/rendering-elements/nodes.ts"(){init_logger(),init_shapes(),nodeElems=new Map,__name(insertNode,"insertNode"),setNodeElem=__name((elem,node2)=>{nodeElems.set(node2.id,elem)},"setNodeElem"),clear5=__name(()=>{nodeElems.clear()},"clear"),positionNode=__name(node2=>{const el=nodeElems.get(node2.id);log.trace("Transforming node",node2.diff,node2,"translate("+(node2.x-node2.width/2-5)+", "+node2.width/2+")");const diff2=node2.diff||0;return node2.clusterNode?el.attr("transform","translate("+(node2.x+diff2-node2.width/2)+", "+(node2.y-node2.height/2-8)+")"):el.attr("transform","translate("+node2.x+", "+node2.y+")"),diff2},"positionNode")}}),init_internals=__esm({"src/internals.ts"(){init_config(),init_common(),init_logger(),init_clusters(),init_edges(),init_markers(),init_nodes2(),init_util(),init_utils2(),internalHelpers={common:common_default,getConfig:getConfig,insertCluster:insertCluster,insertEdge:insertEdge,insertEdgeLabel:insertEdgeLabel,insertMarkers:markers_default,insertNode:insertNode,interpolateToCurve:interpolateToCurve,labelHelper:labelHelper,log:log,positionEdgeLabel:positionEdgeLabel}}});function isSymbol(value2){return"symbol"==typeof value2||isObjectLike_default(value2)&&baseGetTag_default(value2)==symbolTag}var arrayMap_default,init_isSymbol=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isSymbol.js"(){init_baseGetTag(),init_isObjectLike(),symbolTag="[object Symbol]",__name(isSymbol,"isSymbol"),isSymbol_default=isSymbol}});function arrayMap(array4,iteratee){for(var index=-1,length2=null==array4?0:array4.length,result=Array(length2);++index<length2;)result[index]=iteratee(array4[index],index,array4);return result}var INFINITY,symbolProto,symbolToString,baseToString_default,init_arrayMap=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayMap.js"(){__name(arrayMap,"arrayMap"),arrayMap_default=arrayMap}});function baseToString(value2){if("string"==typeof value2)return value2;if(isArray_default(value2))return arrayMap_default(value2,baseToString)+"";if(isSymbol_default(value2))return symbolToString?symbolToString.call(value2):"";var result=value2+"";return"0"==result&&1/value2==-INFINITY?"-0":result}var reWhitespace,trimmedEndIndex_default,init_baseToString=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseToString.js"(){init_Symbol(),init_arrayMap(),init_isArray(),init_isSymbol(),INFINITY=1/0,symbolProto=Symbol_default?Symbol_default.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,__name(baseToString,"baseToString"),baseToString_default=baseToString}});function trimmedEndIndex(string3){for(var index=string3.length;index--&&reWhitespace.test(string3.charAt(index)););return index}var reTrimStart,baseTrim_default,init_trimmedEndIndex=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_trimmedEndIndex.js"(){reWhitespace=/\s/,__name(trimmedEndIndex,"trimmedEndIndex"),trimmedEndIndex_default=trimmedEndIndex}});function baseTrim(string3){return string3?string3.slice(0,trimmedEndIndex_default(string3)+1).replace(reTrimStart,""):string3}var NAN,reIsBadHex,reIsBinary,reIsOctal,freeParseInt,toNumber_default,init_baseTrim=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseTrim.js"(){init_trimmedEndIndex(),reTrimStart=/^\s+/,__name(baseTrim,"baseTrim"),baseTrim_default=baseTrim}});function toNumber(value2){if("number"==typeof value2)return value2;if(isSymbol_default(value2))return NAN;if(isObject_default(value2)){var other="function"==typeof value2.valueOf?value2.valueOf():value2;value2=isObject_default(other)?other+"":other}if("string"!=typeof value2)return 0===value2?value2:+value2;value2=baseTrim_default(value2);var isBinary2=reIsBinary.test(value2);return isBinary2||reIsOctal.test(value2)?freeParseInt(value2.slice(2),isBinary2?2:8):reIsBadHex.test(value2)?NAN:+value2}var INFINITY2,MAX_INTEGER,toFinite_default,init_toNumber=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toNumber.js"(){init_baseTrim(),init_isObject(),init_isSymbol(),NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,__name(toNumber,"toNumber"),toNumber_default=toNumber}});function toFinite(value2){return value2?(value2=toNumber_default(value2))===INFINITY2||value2===-INFINITY2?(value2<0?-1:1)*MAX_INTEGER:value2==value2?value2:0:0===value2?value2:0}var toInteger_default,init_toFinite=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toFinite.js"(){init_toNumber(),INFINITY2=1/0,MAX_INTEGER=17976931348623157e292,__name(toFinite,"toFinite"),toFinite_default=toFinite}});function toInteger(value2){var result=toFinite_default(value2),remainder=result%1;return result==result?remainder?result-remainder:result:0}var WeakMap,WeakMap_default,noop_default2,init_toInteger=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toInteger.js"(){init_toFinite(),__name(toInteger,"toInteger"),toInteger_default=toInteger}}),init_WeakMap=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_WeakMap.js"(){init_getNative(),init_root(),WeakMap=getNative_default(root_default,"WeakMap"),WeakMap_default=WeakMap}});function noop2(){}var arrayEach_default,init_noop2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js"(){__name(noop2,"noop"),noop_default2=noop2}});function arrayEach(array4,iteratee){for(var index=-1,length2=null==array4?0:array4.length;++index<length2&&!1!==iteratee(array4[index],index,array4););return array4}var baseFindIndex_default,init_arrayEach=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayEach.js"(){__name(arrayEach,"arrayEach"),arrayEach_default=arrayEach}});function baseFindIndex(array4,predicate,fromIndex,fromRight){for(var length2=array4.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length2;)if(predicate(array4[index],index,array4))return index;return-1}var baseIsNaN_default,init_baseFindIndex=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseFindIndex.js"(){__name(baseFindIndex,"baseFindIndex"),baseFindIndex_default=baseFindIndex}});function baseIsNaN(value2){return value2!=value2}var strictIndexOf_default,init_baseIsNaN=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsNaN.js"(){__name(baseIsNaN,"baseIsNaN"),baseIsNaN_default=baseIsNaN}});function strictIndexOf(array4,value2,fromIndex){for(var index=fromIndex-1,length2=array4.length;++index<length2;)if(array4[index]===value2)return index;return-1}var baseIndexOf_default,init_strictIndexOf=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_strictIndexOf.js"(){__name(strictIndexOf,"strictIndexOf"),strictIndexOf_default=strictIndexOf}});function baseIndexOf(array4,value2,fromIndex){return value2==value2?strictIndexOf_default(array4,value2,fromIndex):baseFindIndex_default(array4,baseIsNaN_default,fromIndex)}var arrayIncludes_default,init_baseIndexOf=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIndexOf.js"(){init_baseFindIndex(),init_baseIsNaN(),init_strictIndexOf(),__name(baseIndexOf,"baseIndexOf"),baseIndexOf_default=baseIndexOf}});function arrayIncludes(array4,value2){return!!(null==array4?0:array4.length)&&baseIndexOf_default(array4,value2,0)>-1}var nativeKeys,nativeKeys_default,objectProto12,hasOwnProperty10,baseKeys_default,init_arrayIncludes=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayIncludes.js"(){init_baseIndexOf(),__name(arrayIncludes,"arrayIncludes"),arrayIncludes_default=arrayIncludes}}),init_nativeKeys=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_nativeKeys.js"(){init_overArg(),nativeKeys=overArg_default(Object.keys,Object),nativeKeys_default=nativeKeys}});function baseKeys(object3){if(!isPrototype_default(object3))return nativeKeys_default(object3);var result=[];for(var key in Object(object3))hasOwnProperty10.call(object3,key)&&"constructor"!=key&&result.push(key);return result}var keys_default,init_baseKeys=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseKeys.js"(){init_isPrototype(),init_nativeKeys(),objectProto12=Object.prototype,hasOwnProperty10=objectProto12.hasOwnProperty,__name(baseKeys,"baseKeys"),baseKeys_default=baseKeys}});function keys(object3){return isArrayLike_default(object3)?arrayLikeKeys_default(object3):baseKeys_default(object3)}var objectProto13,hasOwnProperty11,assign,assign_default,reIsDeepProp,reIsPlainProp,isKey_default,init_keys=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/keys.js"(){init_arrayLikeKeys(),init_baseKeys(),init_isArrayLike(),__name(keys,"keys"),keys_default=keys}}),init_assign=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/assign.js"(){init_assignValue(),init_copyObject(),init_createAssigner(),init_isArrayLike(),init_isPrototype(),init_keys(),objectProto13=Object.prototype,hasOwnProperty11=objectProto13.hasOwnProperty,assign=createAssigner_default(function(object3,source){if(isPrototype_default(source)||isArrayLike_default(source))copyObject_default(source,keys_default(source),object3);else for(var key in source)hasOwnProperty11.call(source,key)&&assignValue_default(object3,key,source[key])}),assign_default=assign}});function isKey(value2,object3){if(isArray_default(value2))return!1;var type3=typeof value2;return!("number"!=type3&&"symbol"!=type3&&"boolean"!=type3&&null!=value2&&!isSymbol_default(value2))||(reIsPlainProp.test(value2)||!reIsDeepProp.test(value2)||null!=object3&&value2 in Object(object3))}var MAX_MEMOIZE_SIZE,memoizeCapped_default,init_isKey=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isKey.js"(){init_isArray(),init_isSymbol(),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,__name(isKey,"isKey"),isKey_default=isKey}});function memoizeCapped(func){var result=memoize_default(func,function(key){return cache3.size===MAX_MEMOIZE_SIZE&&cache3.clear(),key}),cache3=result.cache;return result}var rePropName,reEscapeChar,stringToPath,stringToPath_default,toString_default,init_memoizeCapped=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_memoizeCapped.js"(){init_memoize(),MAX_MEMOIZE_SIZE=500,__name(memoizeCapped,"memoizeCapped"),memoizeCapped_default=memoizeCapped}}),init_stringToPath=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stringToPath.js"(){init_memoizeCapped(),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped_default(function(string3){var result=[];return 46===string3.charCodeAt(0)&&result.push(""),string3.replace(rePropName,function(match2,number7,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number7||match2)}),result}),stringToPath_default=stringToPath}});function toString2(value2){return null==value2?"":baseToString_default(value2)}var castPath_default,init_toString=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toString.js"(){init_baseToString(),__name(toString2,"toString"),toString_default=toString2}});function castPath(value2,object3){return isArray_default(value2)?value2:isKey_default(value2,object3)?[value2]:stringToPath_default(toString_default(value2))}var INFINITY3,toKey_default,init_castPath=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_castPath.js"(){init_isArray(),init_isKey(),init_stringToPath(),init_toString(),__name(castPath,"castPath"),castPath_default=castPath}});function toKey(value2){if("string"==typeof value2||isSymbol_default(value2))return value2;var result=value2+"";return"0"==result&&1/value2==-INFINITY3?"-0":result}var baseGet_default,init_toKey=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_toKey.js"(){init_isSymbol(),INFINITY3=1/0,__name(toKey,"toKey"),toKey_default=toKey}});function baseGet(object3,path4){for(var index=0,length2=(path4=castPath_default(path4,object3)).length;null!=object3&&index<length2;)object3=object3[toKey_default(path4[index++])];return index&&index==length2?object3:void 0}var get_default,init_baseGet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseGet.js"(){init_castPath(),init_toKey(),__name(baseGet,"baseGet"),baseGet_default=baseGet}});function get3(object3,path4,defaultValue){var result=null==object3?void 0:baseGet_default(object3,path4);return void 0===result?defaultValue:result}var arrayPush_default,init_get=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/get.js"(){init_baseGet(),__name(get3,"get"),get_default=get3}});function arrayPush2(array4,values2){for(var index=-1,length2=values2.length,offset=array4.length;++index<length2;)array4[offset+index]=values2[index];return array4}var spreadableSymbol,isFlattenable_default,init_arrayPush=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayPush.js"(){__name(arrayPush2,"arrayPush"),arrayPush_default=arrayPush2}});function isFlattenable(value2){return isArray_default(value2)||isArguments_default(value2)||!!(spreadableSymbol&&value2&&value2[spreadableSymbol])}var baseFlatten_default,init_isFlattenable=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isFlattenable.js"(){init_Symbol(),init_isArguments(),init_isArray(),spreadableSymbol=Symbol_default?Symbol_default.isConcatSpreadable:void 0,__name(isFlattenable,"isFlattenable"),isFlattenable_default=isFlattenable}});function baseFlatten(array4,depth,predicate,isStrict,result){var index=-1,length2=array4.length;for(predicate||(predicate=isFlattenable_default),result||(result=[]);++index<length2;){var value2=array4[index];depth>0&&predicate(value2)?depth>1?baseFlatten(value2,depth-1,predicate,isStrict,result):arrayPush_default(result,value2):isStrict||(result[result.length]=value2)}return result}var flatten_default,init_baseFlatten=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseFlatten.js"(){init_arrayPush(),init_isFlattenable(),__name(baseFlatten,"baseFlatten"),baseFlatten_default=baseFlatten}});function flatten(array4){return(null==array4?0:array4.length)?baseFlatten_default(array4,1):[]}var flatRest_default,init_flatten=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/flatten.js"(){init_baseFlatten(),__name(flatten,"flatten"),flatten_default=flatten}});function flatRest(func){return setToString_default(overRest_default(func,void 0,flatten_default),func+"")}var baseSlice_default,init_flatRest=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_flatRest.js"(){init_flatten(),init_overRest(),init_setToString(),__name(flatRest,"flatRest"),flatRest_default=flatRest}});function baseSlice(array4,start3,end2){var index=-1,length2=array4.length;start3<0&&(start3=-start3>length2?0:length2+start3),(end2=end2>length2?length2:end2)<0&&(end2+=length2),length2=start3>end2?0:end2-start3>>>0,start3>>>=0;for(var result=Array(length2);++index<length2;)result[index]=array4[index+start3];return result}var reHasUnicode,hasUnicode_default,init_baseSlice=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseSlice.js"(){__name(baseSlice,"baseSlice"),baseSlice_default=baseSlice}});function hasUnicode(string3){return reHasUnicode.test(string3)}var arrayReduce_default,init_hasUnicode=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hasUnicode.js"(){reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),__name(hasUnicode,"hasUnicode"),hasUnicode_default=hasUnicode}});function arrayReduce(array4,iteratee,accumulator,initAccum){var index=-1,length2=null==array4?0:array4.length;for(initAccum&&length2&&(accumulator=array4[++index]);++index<length2;)accumulator=iteratee(accumulator,array4[index],index,array4);return accumulator}var baseAssign_default,init_arrayReduce=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayReduce.js"(){__name(arrayReduce,"arrayReduce"),arrayReduce_default=arrayReduce}});function baseAssign(object3,source){return object3&&copyObject_default(source,keys_default(source),object3)}var baseAssignIn_default,init_baseAssign=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseAssign.js"(){init_copyObject(),init_keys(),__name(baseAssign,"baseAssign"),baseAssign_default=baseAssign}});function baseAssignIn(object3,source){return object3&&copyObject_default(source,keysIn_default(source),object3)}var arrayFilter_default,init_baseAssignIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseAssignIn.js"(){init_copyObject(),init_keysIn(),__name(baseAssignIn,"baseAssignIn"),baseAssignIn_default=baseAssignIn}});function arrayFilter(array4,predicate){for(var index=-1,length2=null==array4?0:array4.length,resIndex=0,result=[];++index<length2;){var value2=array4[index];predicate(value2,index,array4)&&(result[resIndex++]=value2)}return result}var stubArray_default,init_arrayFilter=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayFilter.js"(){__name(arrayFilter,"arrayFilter"),arrayFilter_default=arrayFilter}});function stubArray(){return[]}var objectProto14,propertyIsEnumerable2,nativeGetSymbols,getSymbols_default,copySymbols_default,init_stubArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/stubArray.js"(){__name(stubArray,"stubArray"),stubArray_default=stubArray}}),init_getSymbols=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getSymbols.js"(){init_arrayFilter(),init_stubArray(),objectProto14=Object.prototype,propertyIsEnumerable2=objectProto14.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols_default=nativeGetSymbols?function(object3){return null==object3?[]:(object3=Object(object3),arrayFilter_default(nativeGetSymbols(object3),function(symbol){return propertyIsEnumerable2.call(object3,symbol)}))}:stubArray_default}});function copySymbols(source,object3){return copyObject_default(source,getSymbols_default(source),object3)}var nativeGetSymbols2,getSymbolsIn_default,copySymbolsIn_default,init_copySymbols=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_copySymbols.js"(){init_copyObject(),init_getSymbols(),__name(copySymbols,"copySymbols"),copySymbols_default=copySymbols}}),init_getSymbolsIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getSymbolsIn.js"(){init_arrayPush(),init_getPrototype(),init_getSymbols(),init_stubArray(),nativeGetSymbols2=Object.getOwnPropertySymbols,getSymbolsIn_default=nativeGetSymbols2?function(object3){for(var result=[];object3;)arrayPush_default(result,getSymbols_default(object3)),object3=getPrototype_default(object3);return result}:stubArray_default}});function copySymbolsIn(source,object3){return copyObject_default(source,getSymbolsIn_default(source),object3)}var baseGetAllKeys_default,init_copySymbolsIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_copySymbolsIn.js"(){init_copyObject(),init_getSymbolsIn(),__name(copySymbolsIn,"copySymbolsIn"),copySymbolsIn_default=copySymbolsIn}});function baseGetAllKeys(object3,keysFunc,symbolsFunc){var result=keysFunc(object3);return isArray_default(object3)?result:arrayPush_default(result,symbolsFunc(object3))}var getAllKeys_default,init_baseGetAllKeys=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseGetAllKeys.js"(){init_arrayPush(),init_isArray(),__name(baseGetAllKeys,"baseGetAllKeys"),baseGetAllKeys_default=baseGetAllKeys}});function getAllKeys(object3){return baseGetAllKeys_default(object3,keys_default,getSymbols_default)}var getAllKeysIn_default,init_getAllKeys=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getAllKeys.js"(){init_baseGetAllKeys(),init_getSymbols(),init_keys(),__name(getAllKeys,"getAllKeys"),getAllKeys_default=getAllKeys}});function getAllKeysIn(object3){return baseGetAllKeys_default(object3,keysIn_default,getSymbolsIn_default)}var DataView2,DataView_default,Promise2,Promise_default,Set2,Set_default,dataViewCtorString,mapCtorString,promiseCtorString,setCtorString,weakMapCtorString,getTag,getTag_default,objectProto15,hasOwnProperty12,initCloneArray_default,init_getAllKeysIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getAllKeysIn.js"(){init_baseGetAllKeys(),init_getSymbolsIn(),init_keysIn(),__name(getAllKeysIn,"getAllKeysIn"),getAllKeysIn_default=getAllKeysIn}}),init_DataView=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_DataView.js"(){init_getNative(),init_root(),DataView2=getNative_default(root_default,"DataView"),DataView_default=DataView2}}),init_Promise=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Promise.js"(){init_getNative(),init_root(),Promise2=getNative_default(root_default,"Promise"),Promise_default=Promise2}}),init_Set=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Set.js"(){init_getNative(),init_root(),Set2=getNative_default(root_default,"Set"),Set_default=Set2}}),init_getTag=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getTag.js"(){init_DataView(),init_Map(),init_Promise(),init_Set(),init_WeakMap(),init_baseGetTag(),init_toSource(),dataViewCtorString=toSource_default(DataView_default),mapCtorString=toSource_default(Map_default),promiseCtorString=toSource_default(Promise_default),setCtorString=toSource_default(Set_default),weakMapCtorString=toSource_default(WeakMap_default),getTag=baseGetTag_default,(DataView_default&&"[object DataView]"!=getTag(new DataView_default(new ArrayBuffer(1)))||Map_default&&"[object Map]"!=getTag(new Map_default)||Promise_default&&"[object Promise]"!=getTag(Promise_default.resolve())||Set_default&&"[object Set]"!=getTag(new Set_default)||WeakMap_default&&"[object WeakMap]"!=getTag(new WeakMap_default))&&(getTag=__name(function(value2){var result=baseGetTag_default(value2),Ctor="[object Object]"==result?value2.constructor:void 0,ctorString=Ctor?toSource_default(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result},"getTag")),getTag_default=getTag}});function initCloneArray(array4){var length2=array4.length,result=new array4.constructor(length2);return length2&&"string"==typeof array4[0]&&hasOwnProperty12.call(array4,"index")&&(result.index=array4.index,result.input=array4.input),result}var cloneDataView_default,init_initCloneArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_initCloneArray.js"(){objectProto15=Object.prototype,hasOwnProperty12=objectProto15.hasOwnProperty,__name(initCloneArray,"initCloneArray"),initCloneArray_default=initCloneArray}});function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer_default(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}var reFlags,cloneRegExp_default,init_cloneDataView=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cloneDataView.js"(){init_cloneArrayBuffer(),__name(cloneDataView,"cloneDataView"),cloneDataView_default=cloneDataView}});function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}var symbolProto2,symbolValueOf,cloneSymbol_default,init_cloneRegExp=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cloneRegExp.js"(){reFlags=/\w*$/,__name(cloneRegExp,"cloneRegExp"),cloneRegExp_default=cloneRegExp}});function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}var boolTag2,dateTag2,mapTag3,numberTag2,regexpTag2,setTag3,stringTag2,symbolTag2,arrayBufferTag2,dataViewTag3,float32Tag2,float64Tag2,int8Tag2,int16Tag2,int32Tag2,uint8Tag2,uint8ClampedTag2,uint16Tag2,uint32Tag2,initCloneByTag_default,init_cloneSymbol=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cloneSymbol.js"(){init_Symbol(),symbolProto2=Symbol_default?Symbol_default.prototype:void 0,symbolValueOf=symbolProto2?symbolProto2.valueOf:void 0,__name(cloneSymbol,"cloneSymbol"),cloneSymbol_default=cloneSymbol}});function initCloneByTag(object3,tag,isDeep){var Ctor=object3.constructor;switch(tag){case arrayBufferTag2:return cloneArrayBuffer_default(object3);case boolTag2:case dateTag2:return new Ctor(+object3);case dataViewTag3:return cloneDataView_default(object3,isDeep);case float32Tag2:case float64Tag2:case int8Tag2:case int16Tag2:case int32Tag2:case uint8Tag2:case uint8ClampedTag2:case uint16Tag2:case uint32Tag2:return cloneTypedArray_default(object3,isDeep);case mapTag3:return new Ctor;case numberTag2:case stringTag2:return new Ctor(object3);case regexpTag2:return cloneRegExp_default(object3);case setTag3:return new Ctor;case symbolTag2:return cloneSymbol_default(object3)}}var mapTag4,baseIsMap_default,init_initCloneByTag=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_initCloneByTag.js"(){init_cloneArrayBuffer(),init_cloneDataView(),init_cloneRegExp(),init_cloneSymbol(),init_cloneTypedArray(),boolTag2="[object Boolean]",dateTag2="[object Date]",mapTag3="[object Map]",numberTag2="[object Number]",regexpTag2="[object RegExp]",setTag3="[object Set]",stringTag2="[object String]",symbolTag2="[object Symbol]",arrayBufferTag2="[object ArrayBuffer]",dataViewTag3="[object DataView]",float32Tag2="[object Float32Array]",float64Tag2="[object Float64Array]",int8Tag2="[object Int8Array]",int16Tag2="[object Int16Array]",int32Tag2="[object Int32Array]",uint8Tag2="[object Uint8Array]",uint8ClampedTag2="[object Uint8ClampedArray]",uint16Tag2="[object Uint16Array]",uint32Tag2="[object Uint32Array]",__name(initCloneByTag,"initCloneByTag"),initCloneByTag_default=initCloneByTag}});function baseIsMap(value2){return isObjectLike_default(value2)&&getTag_default(value2)==mapTag4}var nodeIsMap,isMap,isMap_default,setTag4,baseIsSet_default,init_baseIsMap=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsMap.js"(){init_getTag(),init_isObjectLike(),mapTag4="[object Map]",__name(baseIsMap,"baseIsMap"),baseIsMap_default=baseIsMap}}),init_isMap=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isMap.js"(){init_baseIsMap(),init_baseUnary(),init_nodeUtil(),nodeIsMap=nodeUtil_default&&nodeUtil_default.isMap,isMap=nodeIsMap?baseUnary_default(nodeIsMap):baseIsMap_default,isMap_default=isMap}});function baseIsSet(value2){return isObjectLike_default(value2)&&getTag_default(value2)==setTag4}var nodeIsSet,isSet,isSet_default,CLONE_DEEP_FLAG,CLONE_FLAT_FLAG,CLONE_SYMBOLS_FLAG,argsTag3,funcTag3,genTag2,objectTag4,cloneableTags,baseClone_default,init_baseIsSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsSet.js"(){init_getTag(),init_isObjectLike(),setTag4="[object Set]",__name(baseIsSet,"baseIsSet"),baseIsSet_default=baseIsSet}}),init_isSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isSet.js"(){init_baseIsSet(),init_baseUnary(),init_nodeUtil(),nodeIsSet=nodeUtil_default&&nodeUtil_default.isSet,isSet=nodeIsSet?baseUnary_default(nodeIsSet):baseIsSet_default,isSet_default=isSet}});function baseClone(value2,bitmask,customizer,key,object3,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result=object3?customizer(value2,key,object3,stack):customizer(value2)),void 0!==result)return result;if(!isObject_default(value2))return value2;var isArr=isArray_default(value2);if(isArr){if(result=initCloneArray_default(value2),!isDeep)return copyArray_default(value2,result)}else{var tag=getTag_default(value2),isFunc=tag==funcTag3||tag==genTag2;if(isBuffer_default(value2))return cloneBuffer_default(value2,isDeep);if(tag==objectTag4||tag==argsTag3||isFunc&&!object3){if(result=isFlat||isFunc?{}:initCloneObject_default(value2),!isDeep)return isFlat?copySymbolsIn_default(value2,baseAssignIn_default(result,value2)):copySymbols_default(value2,baseAssign_default(result,value2))}else{if(!cloneableTags[tag])return object3?value2:{};result=initCloneByTag_default(value2,tag,isDeep)}}stack||(stack=new Stack_default);var stacked=stack.get(value2);if(stacked)return stacked;stack.set(value2,result),isSet_default(value2)?value2.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value2,stack))}):isMap_default(value2)&&value2.forEach(function(subValue,key2){result.set(key2,baseClone(subValue,bitmask,customizer,key2,value2,stack))});var props=isArr?void 0:(isFull?isFlat?getAllKeysIn_default:getAllKeys_default:isFlat?keysIn_default:keys_default)(value2);return arrayEach_default(props||value2,function(subValue,key2){props&&(subValue=value2[key2=subValue]),assignValue_default(result,key2,baseClone(subValue,bitmask,customizer,key2,value2,stack))}),result}var CLONE_SYMBOLS_FLAG2,clone_default2,init_baseClone=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseClone.js"(){init_Stack(),init_arrayEach(),init_assignValue(),init_baseAssign(),init_baseAssignIn(),init_cloneBuffer(),init_copyArray(),init_copySymbols(),init_copySymbolsIn(),init_getAllKeys(),init_getAllKeysIn(),init_getTag(),init_initCloneArray(),init_initCloneByTag(),init_initCloneObject(),init_isArray(),init_isBuffer(),init_isMap(),init_isObject(),init_isSet(),init_keys(),init_keysIn(),CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,funcTag3="[object Function]",genTag2="[object GeneratorFunction]",objectTag4="[object Object]",(cloneableTags={})[argsTag3="[object Arguments]"]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags["[object Map]"]=cloneableTags["[object Number]"]=cloneableTags[objectTag4]=cloneableTags["[object RegExp]"]=cloneableTags["[object Set]"]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag3]=cloneableTags["[object WeakMap]"]=!1,__name(baseClone,"baseClone"),baseClone_default=baseClone}});function clone2(value2){return baseClone_default(value2,CLONE_SYMBOLS_FLAG2)}var CLONE_DEEP_FLAG2,CLONE_SYMBOLS_FLAG3,cloneDeep_default,init_clone2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/clone.js"(){init_baseClone(),CLONE_SYMBOLS_FLAG2=4,__name(clone2,"clone"),clone_default2=clone2}});function cloneDeep(value2){return baseClone_default(value2,CLONE_DEEP_FLAG2|CLONE_SYMBOLS_FLAG3)}var compact_default,init_cloneDeep=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/cloneDeep.js"(){init_baseClone(),CLONE_DEEP_FLAG2=1,CLONE_SYMBOLS_FLAG3=4,__name(cloneDeep,"cloneDeep"),cloneDeep_default=cloneDeep}});function compact(array4){for(var index=-1,length2=null==array4?0:array4.length,resIndex=0,result=[];++index<length2;){var value2=array4[index];value2&&(result[resIndex++]=value2)}return result}var HASH_UNDEFINED3,setCacheAdd_default,init_compact=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/compact.js"(){__name(compact,"compact"),compact_default=compact}});function setCacheAdd(value2){return this.__data__.set(value2,HASH_UNDEFINED3),this}var setCacheHas_default,init_setCacheAdd=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_setCacheAdd.js"(){HASH_UNDEFINED3="__lodash_hash_undefined__",__name(setCacheAdd,"setCacheAdd"),setCacheAdd_default=setCacheAdd}});function setCacheHas(value2){return this.__data__.has(value2)}var SetCache_default,init_setCacheHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_setCacheHas.js"(){__name(setCacheHas,"setCacheHas"),setCacheHas_default=setCacheHas}});function SetCache(values2){var index=-1,length2=null==values2?0:values2.length;for(this.__data__=new MapCache_default;++index<length2;)this.add(values2[index])}var arraySome_default,init_SetCache=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_SetCache.js"(){init_MapCache(),init_setCacheAdd(),init_setCacheHas(),__name(SetCache,"SetCache"),SetCache.prototype.add=SetCache.prototype.push=setCacheAdd_default,SetCache.prototype.has=setCacheHas_default,SetCache_default=SetCache}});function arraySome(array4,predicate){for(var index=-1,length2=null==array4?0:array4.length;++index<length2;)if(predicate(array4[index],index,array4))return!0;return!1}var cacheHas_default,init_arraySome=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arraySome.js"(){__name(arraySome,"arraySome"),arraySome_default=arraySome}});function cacheHas(cache3,key){return cache3.has(key)}var COMPARE_PARTIAL_FLAG,COMPARE_UNORDERED_FLAG,equalArrays_default,init_cacheHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_cacheHas.js"(){__name(cacheHas,"cacheHas"),cacheHas_default=cacheHas}});function equalArrays(array4,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array4.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array4),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array4;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache_default:void 0;for(stack.set(array4,other),stack.set(other,array4);++index<arrLength;){var arrValue=array4[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array4,stack):customizer(arrValue,othValue,index,array4,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome_default(other,function(othValue2,othIndex){if(!cacheHas_default(seen,othIndex)&&(arrValue===othValue2||equalFunc(arrValue,othValue2,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array4),stack.delete(other),result}var mapToArray_default,init_equalArrays=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_equalArrays.js"(){init_SetCache(),init_arraySome(),init_cacheHas(),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,__name(equalArrays,"equalArrays"),equalArrays_default=equalArrays}});function mapToArray(map5){var index=-1,result=Array(map5.size);return map5.forEach(function(value2,key){result[++index]=[key,value2]}),result}var setToArray_default,init_mapToArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_mapToArray.js"(){__name(mapToArray,"mapToArray"),mapToArray_default=mapToArray}});function setToArray(set5){var index=-1,result=Array(set5.size);return set5.forEach(function(value2){result[++index]=value2}),result}var COMPARE_PARTIAL_FLAG2,COMPARE_UNORDERED_FLAG2,boolTag4,dateTag4,errorTag3,mapTag6,numberTag4,regexpTag4,setTag6,stringTag4,symbolTag4,arrayBufferTag4,dataViewTag5,symbolProto3,symbolValueOf2,equalByTag_default,init_setToArray=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_setToArray.js"(){__name(setToArray,"setToArray"),setToArray_default=setToArray}});function equalByTag(object3,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag5:if(object3.byteLength!=other.byteLength||object3.byteOffset!=other.byteOffset)return!1;object3=object3.buffer,other=other.buffer;case arrayBufferTag4:return!(object3.byteLength!=other.byteLength||!equalFunc(new Uint8Array_default(object3),new Uint8Array_default(other)));case boolTag4:case dateTag4:case numberTag4:return eq_default(+object3,+other);case errorTag3:return object3.name==other.name&&object3.message==other.message;case regexpTag4:case stringTag4:return object3==other+"";case mapTag6:var convert=mapToArray_default;case setTag6:var isPartial=bitmask&COMPARE_PARTIAL_FLAG2;if(convert||(convert=setToArray_default),object3.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object3);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG2,stack.set(object3,other);var result=equalArrays_default(convert(object3),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object3),result;case symbolTag4:if(symbolValueOf2)return symbolValueOf2.call(object3)==symbolValueOf2.call(other)}return!1}var COMPARE_PARTIAL_FLAG3,objectProto16,hasOwnProperty13,equalObjects_default,init_equalByTag=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_equalByTag.js"(){init_Symbol(),init_Uint8Array(),init_eq(),init_equalArrays(),init_mapToArray(),init_setToArray(),COMPARE_PARTIAL_FLAG2=1,COMPARE_UNORDERED_FLAG2=2,boolTag4="[object Boolean]",dateTag4="[object Date]",errorTag3="[object Error]",mapTag6="[object Map]",numberTag4="[object Number]",regexpTag4="[object RegExp]",setTag6="[object Set]",stringTag4="[object String]",symbolTag4="[object Symbol]",arrayBufferTag4="[object ArrayBuffer]",dataViewTag5="[object DataView]",symbolProto3=Symbol_default?Symbol_default.prototype:void 0,symbolValueOf2=symbolProto3?symbolProto3.valueOf:void 0,__name(equalByTag,"equalByTag"),equalByTag_default=equalByTag}});function equalObjects(object3,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG3,objProps=getAllKeys_default(object3),objLength=objProps.length;if(objLength!=getAllKeys_default(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty13.call(other,key)))return!1}var objStacked=stack.get(object3),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object3;var result=!0;stack.set(object3,other),stack.set(other,object3);for(var skipCtor=isPartial;++index<objLength;){var objValue=object3[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object3,stack):customizer(objValue,othValue,key,object3,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object3.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object3)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object3),stack.delete(other),result}var COMPARE_PARTIAL_FLAG4,argsTag4,arrayTag3,objectTag5,objectProto17,hasOwnProperty14,baseIsEqualDeep_default,init_equalObjects=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_equalObjects.js"(){init_getAllKeys(),COMPARE_PARTIAL_FLAG3=1,objectProto16=Object.prototype,hasOwnProperty13=objectProto16.hasOwnProperty,__name(equalObjects,"equalObjects"),equalObjects_default=equalObjects}});function baseIsEqualDeep(object3,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray_default(object3),othIsArr=isArray_default(other),objTag=objIsArr?arrayTag3:getTag_default(object3),othTag=othIsArr?arrayTag3:getTag_default(other),objIsObj=(objTag=objTag==argsTag4?objectTag5:objTag)==objectTag5,othIsObj=(othTag=othTag==argsTag4?objectTag5:othTag)==objectTag5,isSameTag=objTag==othTag;if(isSameTag&&isBuffer_default(object3)){if(!isBuffer_default(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack_default),objIsArr||isTypedArray_default(object3)?equalArrays_default(object3,other,bitmask,customizer,equalFunc,stack):equalByTag_default(object3,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG4)){var objIsWrapped=objIsObj&&hasOwnProperty14.call(object3,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty14.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object3.value():object3,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack_default),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack_default),equalObjects_default(object3,other,bitmask,customizer,equalFunc,stack))}var baseIsEqual_default,init_baseIsEqualDeep=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsEqualDeep.js"(){init_Stack(),init_equalArrays(),init_equalByTag(),init_equalObjects(),init_getTag(),init_isArray(),init_isBuffer(),init_isTypedArray(),COMPARE_PARTIAL_FLAG4=1,argsTag4="[object Arguments]",arrayTag3="[object Array]",objectTag5="[object Object]",objectProto17=Object.prototype,hasOwnProperty14=objectProto17.hasOwnProperty,__name(baseIsEqualDeep,"baseIsEqualDeep"),baseIsEqualDeep_default=baseIsEqualDeep}});function baseIsEqual(value2,other,bitmask,customizer,stack){return value2===other||(null==value2||null==other||!isObjectLike_default(value2)&&!isObjectLike_default(other)?value2!=value2&&other!=other:baseIsEqualDeep_default(value2,other,bitmask,customizer,baseIsEqual,stack))}var COMPARE_PARTIAL_FLAG5,COMPARE_UNORDERED_FLAG3,baseIsMatch_default,init_baseIsEqual=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsEqual.js"(){init_baseIsEqualDeep(),init_isObjectLike(),__name(baseIsEqual,"baseIsEqual"),baseIsEqual_default=baseIsEqual}});function baseIsMatch(object3,source,matchData,customizer){var index=matchData.length,length2=index,noCustomizer=!customizer;if(null==object3)return!length2;for(object3=Object(object3);index--;){var data5=matchData[index];if(noCustomizer&&data5[2]?data5[1]!==object3[data5[0]]:!(data5[0]in object3))return!1}for(;++index<length2;){var key=(data5=matchData[index])[0],objValue=object3[key],srcValue=data5[1];if(noCustomizer&&data5[2]){if(void 0===objValue&&!(key in object3))return!1}else{var stack=new Stack_default;if(customizer)var result=customizer(objValue,srcValue,key,object3,source,stack);if(!(void 0===result?baseIsEqual_default(srcValue,objValue,COMPARE_PARTIAL_FLAG5|COMPARE_UNORDERED_FLAG3,customizer,stack):result))return!1}}return!0}var isStrictComparable_default,init_baseIsMatch=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsMatch.js"(){init_Stack(),init_baseIsEqual(),COMPARE_PARTIAL_FLAG5=1,COMPARE_UNORDERED_FLAG3=2,__name(baseIsMatch,"baseIsMatch"),baseIsMatch_default=baseIsMatch}});function isStrictComparable(value2){return value2==value2&&!isObject_default(value2)}var getMatchData_default,init_isStrictComparable=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_isStrictComparable.js"(){init_isObject(),__name(isStrictComparable,"isStrictComparable"),isStrictComparable_default=isStrictComparable}});function getMatchData(object3){for(var result=keys_default(object3),length2=result.length;length2--;){var key=result[length2],value2=object3[key];result[length2]=[key,value2,isStrictComparable_default(value2)]}return result}var matchesStrictComparable_default,init_getMatchData=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getMatchData.js"(){init_isStrictComparable(),init_keys(),__name(getMatchData,"getMatchData"),getMatchData_default=getMatchData}});function matchesStrictComparable(key,srcValue){return function(object3){return null!=object3&&(object3[key]===srcValue&&(void 0!==srcValue||key in Object(object3)))}}var baseMatches_default,init_matchesStrictComparable=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_matchesStrictComparable.js"(){__name(matchesStrictComparable,"matchesStrictComparable"),matchesStrictComparable_default=matchesStrictComparable}});function baseMatches(source){var matchData=getMatchData_default(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable_default(matchData[0][0],matchData[0][1]):function(object3){return object3===source||baseIsMatch_default(object3,source,matchData)}}var baseHasIn_default,init_baseMatches=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseMatches.js"(){init_baseIsMatch(),init_getMatchData(),init_matchesStrictComparable(),__name(baseMatches,"baseMatches"),baseMatches_default=baseMatches}});function baseHasIn(object3,key){return null!=object3&&key in Object(object3)}var hasPath_default,init_baseHasIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseHasIn.js"(){__name(baseHasIn,"baseHasIn"),baseHasIn_default=baseHasIn}});function hasPath(object3,path4,hasFunc){for(var index=-1,length2=(path4=castPath_default(path4,object3)).length,result=!1;++index<length2;){var key=toKey_default(path4[index]);if(!(result=null!=object3&&hasFunc(object3,key)))break;object3=object3[key]}return result||++index!=length2?result:!!(length2=null==object3?0:object3.length)&&isLength_default(length2)&&isIndex_default(key,length2)&&(isArray_default(object3)||isArguments_default(object3))}var hasIn_default,init_hasPath=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_hasPath.js"(){init_castPath(),init_isArguments(),init_isArray(),init_isIndex(),init_isLength(),init_toKey(),__name(hasPath,"hasPath"),hasPath_default=hasPath}});function hasIn(object3,path4){return null!=object3&&hasPath_default(object3,path4,baseHasIn_default)}var COMPARE_PARTIAL_FLAG6,COMPARE_UNORDERED_FLAG4,baseMatchesProperty_default,init_hasIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/hasIn.js"(){init_baseHasIn(),init_hasPath(),__name(hasIn,"hasIn"),hasIn_default=hasIn}});function baseMatchesProperty(path4,srcValue){return isKey_default(path4)&&isStrictComparable_default(srcValue)?matchesStrictComparable_default(toKey_default(path4),srcValue):function(object3){var objValue=get_default(object3,path4);return void 0===objValue&&objValue===srcValue?hasIn_default(object3,path4):baseIsEqual_default(srcValue,objValue,COMPARE_PARTIAL_FLAG6|COMPARE_UNORDERED_FLAG4)}}var baseProperty_default,init_baseMatchesProperty=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseMatchesProperty.js"(){init_baseIsEqual(),init_get(),init_hasIn(),init_isKey(),init_isStrictComparable(),init_matchesStrictComparable(),init_toKey(),COMPARE_PARTIAL_FLAG6=1,COMPARE_UNORDERED_FLAG4=2,__name(baseMatchesProperty,"baseMatchesProperty"),baseMatchesProperty_default=baseMatchesProperty}});function baseProperty(key){return function(object3){return null==object3?void 0:object3[key]}}var basePropertyDeep_default,init_baseProperty=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseProperty.js"(){__name(baseProperty,"baseProperty"),baseProperty_default=baseProperty}});function basePropertyDeep(path4){return function(object3){return baseGet_default(object3,path4)}}var property_default2,init_basePropertyDeep=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_basePropertyDeep.js"(){init_baseGet(),__name(basePropertyDeep,"basePropertyDeep"),basePropertyDeep_default=basePropertyDeep}});function property(path4){return isKey_default(path4)?baseProperty_default(toKey_default(path4)):basePropertyDeep_default(path4)}var baseIteratee_default,init_property2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/property.js"(){init_baseProperty(),init_basePropertyDeep(),init_isKey(),init_toKey(),__name(property,"property"),property_default2=property}});function baseIteratee(value2){return"function"==typeof value2?value2:null==value2?identity_default4:"object"==typeof value2?isArray_default(value2)?baseMatchesProperty_default(value2[0],value2[1]):baseMatches_default(value2):property_default2(value2)}var arrayAggregator_default,init_baseIteratee=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIteratee.js"(){init_baseMatches(),init_baseMatchesProperty(),init_identity4(),init_isArray(),init_property2(),__name(baseIteratee,"baseIteratee"),baseIteratee_default=baseIteratee}});function arrayAggregator(array4,setter,iteratee,accumulator){for(var index=-1,length2=null==array4?0:array4.length;++index<length2;){var value2=array4[index];setter(accumulator,value2,iteratee(value2),array4)}return accumulator}var baseForOwn_default,init_arrayAggregator=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayAggregator.js"(){__name(arrayAggregator,"arrayAggregator"),arrayAggregator_default=arrayAggregator}});function baseForOwn(object3,iteratee){return object3&&baseFor_default(object3,iteratee,keys_default)}var createBaseEach_default,init_baseForOwn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseForOwn.js"(){init_baseFor(),init_keys(),__name(baseForOwn,"baseForOwn"),baseForOwn_default=baseForOwn}});function createBaseEach(eachFunc,fromRight){return function(collection4,iteratee){if(null==collection4)return collection4;if(!isArrayLike_default(collection4))return eachFunc(collection4,iteratee);for(var length2=collection4.length,index=fromRight?length2:-1,iterable=Object(collection4);(fromRight?index--:++index<length2)&&!1!==iteratee(iterable[index],index,iterable););return collection4}}var baseEach,baseEach_default,baseAggregator_default,init_createBaseEach=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createBaseEach.js"(){init_isArrayLike(),__name(createBaseEach,"createBaseEach"),createBaseEach_default=createBaseEach}}),init_baseEach=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseEach.js"(){init_baseForOwn(),init_createBaseEach(),baseEach=createBaseEach_default(baseForOwn_default),baseEach_default=baseEach}});function baseAggregator(collection4,setter,iteratee,accumulator){return baseEach_default(collection4,function(value2,key,collection5){setter(accumulator,value2,iteratee(value2),collection5)}),accumulator}var createAggregator_default,init_baseAggregator=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseAggregator.js"(){init_baseEach(),__name(baseAggregator,"baseAggregator"),baseAggregator_default=baseAggregator}});function createAggregator(setter,initializer){return function(collection4,iteratee){var func=isArray_default(collection4)?arrayAggregator_default:baseAggregator_default,accumulator=initializer?initializer():{};return func(collection4,setter,baseIteratee_default(iteratee,2),accumulator)}}var now_default,objectProto18,hasOwnProperty15,defaults,defaults_default,arrayIncludesWith_default,init_createAggregator=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createAggregator.js"(){init_arrayAggregator(),init_baseAggregator(),init_baseIteratee(),init_isArray(),__name(createAggregator,"createAggregator"),createAggregator_default=createAggregator}}),init_now=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/now.js"(){init_root(),now_default=__name(function(){return root_default.Date.now()},"now")}}),init_defaults3=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/defaults.js"(){init_baseRest(),init_eq(),init_isIterateeCall(),init_keysIn(),objectProto18=Object.prototype,hasOwnProperty15=objectProto18.hasOwnProperty,defaults=baseRest_default(function(object3,sources){object3=Object(object3);var index=-1,length2=sources.length,guard=length2>2?sources[2]:void 0;for(guard&&isIterateeCall_default(sources[0],sources[1],guard)&&(length2=1);++index<length2;)for(var source=sources[index],props=keysIn_default(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value2=object3[key];(void 0===value2||eq_default(value2,objectProto18[key])&&!hasOwnProperty15.call(object3,key))&&(object3[key]=source[key])}return object3}),defaults_default=defaults}});function arrayIncludesWith(array4,value2,comparator){for(var index=-1,length2=null==array4?0:array4.length;++index<length2;)if(comparator(value2,array4[index]))return!0;return!1}var LARGE_ARRAY_SIZE2,baseDifference_default,init_arrayIncludesWith=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayIncludesWith.js"(){__name(arrayIncludesWith,"arrayIncludesWith"),arrayIncludesWith_default=arrayIncludesWith}});function baseDifference(array4,values2,iteratee,comparator){var index=-1,includes3=arrayIncludes_default,isCommon=!0,length2=array4.length,result=[],valuesLength=values2.length;if(!length2)return result;iteratee&&(values2=arrayMap_default(values2,baseUnary_default(iteratee))),comparator?(includes3=arrayIncludesWith_default,isCommon=!1):values2.length>=LARGE_ARRAY_SIZE2&&(includes3=cacheHas_default,isCommon=!1,values2=new SetCache_default(values2));outer:for(;++index<length2;){var value2=array4[index],computed=null==iteratee?value2:iteratee(value2);if(value2=comparator||0!==value2?value2:0,isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values2[valuesIndex]===computed)continue outer;result.push(value2)}else includes3(values2,computed,comparator)||result.push(value2)}return result}var difference,difference_default,last_default,init_baseDifference=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseDifference.js"(){init_SetCache(),init_arrayIncludes(),init_arrayIncludesWith(),init_arrayMap(),init_baseUnary(),init_cacheHas(),LARGE_ARRAY_SIZE2=200,__name(baseDifference,"baseDifference"),baseDifference_default=baseDifference}}),init_difference=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/difference.js"(){init_baseDifference(),init_baseFlatten(),init_baseRest(),init_isArrayLikeObject(),difference=baseRest_default(function(array4,values2){return isArrayLikeObject_default(array4)?baseDifference_default(array4,baseFlatten_default(values2,1,isArrayLikeObject_default,!0)):[]}),difference_default=difference}});function last(array4){var length2=null==array4?0:array4.length;return length2?array4[length2-1]:void 0}var drop_default,init_last=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/last.js"(){__name(last,"last"),last_default=last}});function drop(array4,n2,guard){var length2=null==array4?0:array4.length;return length2?(n2=guard||void 0===n2?1:toInteger_default(n2),baseSlice_default(array4,n2<0?0:n2,length2)):[]}var dropRight_default,init_drop=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/drop.js"(){init_baseSlice(),init_toInteger(),__name(drop,"drop"),drop_default=drop}});function dropRight(array4,n2,guard){var length2=null==array4?0:array4.length;return length2?(n2=guard||void 0===n2?1:toInteger_default(n2),baseSlice_default(array4,0,(n2=length2-n2)<0?0:n2)):[]}var castFunction_default,init_dropRight=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/dropRight.js"(){init_baseSlice(),init_toInteger(),__name(dropRight,"dropRight"),dropRight_default=dropRight}});function castFunction(value2){return"function"==typeof value2?value2:identity_default4}var forEach_default,init_castFunction=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_castFunction.js"(){init_identity4(),__name(castFunction,"castFunction"),castFunction_default=castFunction}});function forEach(collection4,iteratee){return(isArray_default(collection4)?arrayEach_default:baseEach_default)(collection4,castFunction_default(iteratee))}var arrayEvery_default,init_forEach=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/forEach.js"(){init_arrayEach(),init_baseEach(),init_castFunction(),init_isArray(),__name(forEach,"forEach"),forEach_default=forEach}}),init_each3=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/each.js"(){init_forEach()}});function arrayEvery(array4,predicate){for(var index=-1,length2=null==array4?0:array4.length;++index<length2;)if(!predicate(array4[index],index,array4))return!1;return!0}var baseEvery_default,init_arrayEvery=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_arrayEvery.js"(){__name(arrayEvery,"arrayEvery"),arrayEvery_default=arrayEvery}});function baseEvery(collection4,predicate){var result=!0;return baseEach_default(collection4,function(value2,index,collection5){return result=!!predicate(value2,index,collection5)}),result}var every_default,init_baseEvery=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseEvery.js"(){init_baseEach(),__name(baseEvery,"baseEvery"),baseEvery_default=baseEvery}});function every(collection4,predicate,guard){var func=isArray_default(collection4)?arrayEvery_default:baseEvery_default;return guard&&isIterateeCall_default(collection4,predicate,guard)&&(predicate=void 0),func(collection4,baseIteratee_default(predicate,3))}var baseFilter_default,init_every=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/every.js"(){init_arrayEvery(),init_baseEvery(),init_baseIteratee(),init_isArray(),init_isIterateeCall(),__name(every,"every"),every_default=every}});function baseFilter(collection4,predicate){var result=[];return baseEach_default(collection4,function(value2,index,collection5){predicate(value2,index,collection5)&&result.push(value2)}),result}var filter_default3,init_baseFilter=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseFilter.js"(){init_baseEach(),__name(baseFilter,"baseFilter"),baseFilter_default=baseFilter}});function filter2(collection4,predicate){return(isArray_default(collection4)?arrayFilter_default:baseFilter_default)(collection4,baseIteratee_default(predicate,3))}var createFind_default,init_filter3=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/filter.js"(){init_arrayFilter(),init_baseFilter(),init_baseIteratee(),init_isArray(),__name(filter2,"filter"),filter_default3=filter2}});function createFind(findIndexFunc){return function(collection4,predicate,fromIndex){var iterable=Object(collection4);if(!isArrayLike_default(collection4)){var iteratee=baseIteratee_default(predicate,3);collection4=keys_default(collection4),predicate=__name(function(key){return iteratee(iterable[key],key,iterable)},"predicate")}var index=findIndexFunc(collection4,predicate,fromIndex);return index>-1?iterable[iteratee?collection4[index]:index]:void 0}}var nativeMax2,findIndex_default,init_createFind=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createFind.js"(){init_baseIteratee(),init_isArrayLike(),init_keys(),__name(createFind,"createFind"),createFind_default=createFind}});function findIndex(array4,predicate,fromIndex){var length2=null==array4?0:array4.length;if(!length2)return-1;var index=null==fromIndex?0:toInteger_default(fromIndex);return index<0&&(index=nativeMax2(length2+index,0)),baseFindIndex_default(array4,baseIteratee_default(predicate,3),index)}var find2,find_default2,head_default,init_findIndex=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/findIndex.js"(){init_baseFindIndex(),init_baseIteratee(),init_toInteger(),nativeMax2=Math.max,__name(findIndex,"findIndex"),findIndex_default=findIndex}}),init_find2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/find.js"(){init_createFind(),init_findIndex(),find2=createFind_default(findIndex_default),find_default2=find2}});function head(array4){return array4&&array4.length?array4[0]:void 0}var baseMap_default,init_head=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/head.js"(){__name(head,"head"),head_default=head}}),init_first=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/first.js"(){init_head()}});function baseMap(collection4,iteratee){var index=-1,result=isArrayLike_default(collection4)?Array(collection4.length):[];return baseEach_default(collection4,function(value2,key,collection5){result[++index]=iteratee(value2,key,collection5)}),result}var map_default,init_baseMap=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseMap.js"(){init_baseEach(),init_isArrayLike(),__name(baseMap,"baseMap"),baseMap_default=baseMap}});function map3(collection4,iteratee){return(isArray_default(collection4)?arrayMap_default:baseMap_default)(collection4,baseIteratee_default(iteratee,3))}var flatMap_default,init_map=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/map.js"(){init_arrayMap(),init_baseIteratee(),init_baseMap(),init_isArray(),__name(map3,"map"),map_default=map3}});function flatMap(collection4,iteratee){return baseFlatten_default(map_default(collection4,iteratee),1)}var forIn_default,init_flatMap=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/flatMap.js"(){init_baseFlatten(),init_map(),__name(flatMap,"flatMap"),flatMap_default=flatMap}});function forIn(object3,iteratee){return null==object3?object3:baseFor_default(object3,castFunction_default(iteratee),keysIn_default)}var forOwn_default,init_forIn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/forIn.js"(){init_baseFor(),init_castFunction(),init_keysIn(),__name(forIn,"forIn"),forIn_default=forIn}});function forOwn(object3,iteratee){return object3&&baseForOwn_default(object3,castFunction_default(iteratee))}var objectProto19,hasOwnProperty16,groupBy,groupBy_default,baseGt_default,init_forOwn=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/forOwn.js"(){init_baseForOwn(),init_castFunction(),__name(forOwn,"forOwn"),forOwn_default=forOwn}}),init_groupBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/groupBy.js"(){init_baseAssignValue(),init_createAggregator(),objectProto19=Object.prototype,hasOwnProperty16=objectProto19.hasOwnProperty,groupBy=createAggregator_default(function(result,value2,key){hasOwnProperty16.call(result,key)?result[key].push(value2):baseAssignValue_default(result,key,[value2])}),groupBy_default=groupBy}});function baseGt(value2,other){return value2>other}var objectProto20,hasOwnProperty17,baseHas_default,init_baseGt=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseGt.js"(){__name(baseGt,"baseGt"),baseGt_default=baseGt}});function baseHas(object3,key){return null!=object3&&hasOwnProperty17.call(object3,key)}var has_default,init_baseHas=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseHas.js"(){objectProto20=Object.prototype,hasOwnProperty17=objectProto20.hasOwnProperty,__name(baseHas,"baseHas"),baseHas_default=baseHas}});function has(object3,path4){return null!=object3&&hasPath_default(object3,path4,baseHas_default)}var stringTag5,isString_default,init_has=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/has.js"(){init_baseHas(),init_hasPath(),__name(has,"has"),has_default=has}});function isString(value2){return"string"==typeof value2||!isArray_default(value2)&&isObjectLike_default(value2)&&baseGetTag_default(value2)==stringTag5}var baseValues_default,init_isString=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isString.js"(){init_baseGetTag(),init_isArray(),init_isObjectLike(),stringTag5="[object String]",__name(isString,"isString"),isString_default=isString}});function baseValues(object3,props){return arrayMap_default(props,function(key){return object3[key]})}var values_default,init_baseValues=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseValues.js"(){init_arrayMap(),__name(baseValues,"baseValues"),baseValues_default=baseValues}});function values(object3){return null==object3?[]:baseValues_default(object3,keys_default(object3))}var nativeMax3,includes_default,init_values=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/values.js"(){init_baseValues(),init_keys(),__name(values,"values"),values_default=values}});function includes(collection4,value2,fromIndex,guard){collection4=isArrayLike_default(collection4)?collection4:values_default(collection4),fromIndex=fromIndex&&!guard?toInteger_default(fromIndex):0;var length2=collection4.length;return fromIndex<0&&(fromIndex=nativeMax3(length2+fromIndex,0)),isString_default(collection4)?fromIndex<=length2&&collection4.indexOf(value2,fromIndex)>-1:!!length2&&baseIndexOf_default(collection4,value2,fromIndex)>-1}var nativeMax4,indexOf_default,init_includes=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/includes.js"(){init_baseIndexOf(),init_isArrayLike(),init_isString(),init_toInteger(),init_values(),nativeMax3=Math.max,__name(includes,"includes"),includes_default=includes}});function indexOf(array4,value2,fromIndex){var length2=null==array4?0:array4.length;if(!length2)return-1;var index=null==fromIndex?0:toInteger_default(fromIndex);return index<0&&(index=nativeMax4(length2+index,0)),baseIndexOf_default(array4,value2,index)}var mapTag7,setTag7,objectProto21,hasOwnProperty18,isEmpty_default,init_indexOf=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/indexOf.js"(){init_baseIndexOf(),init_toInteger(),nativeMax4=Math.max,__name(indexOf,"indexOf"),indexOf_default=indexOf}});function isEmpty(value2){if(null==value2)return!0;if(isArrayLike_default(value2)&&(isArray_default(value2)||"string"==typeof value2||"function"==typeof value2.splice||isBuffer_default(value2)||isTypedArray_default(value2)||isArguments_default(value2)))return!value2.length;var tag=getTag_default(value2);if(tag==mapTag7||tag==setTag7)return!value2.size;if(isPrototype_default(value2))return!baseKeys_default(value2).length;for(var key in value2)if(hasOwnProperty18.call(value2,key))return!1;return!0}var regexpTag5,baseIsRegExp_default,init_isEmpty=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isEmpty.js"(){init_baseKeys(),init_getTag(),init_isArguments(),init_isArray(),init_isArrayLike(),init_isBuffer(),init_isPrototype(),init_isTypedArray(),mapTag7="[object Map]",setTag7="[object Set]",objectProto21=Object.prototype,hasOwnProperty18=objectProto21.hasOwnProperty,__name(isEmpty,"isEmpty"),isEmpty_default=isEmpty}});function baseIsRegExp(value2){return isObjectLike_default(value2)&&baseGetTag_default(value2)==regexpTag5}var nodeIsRegExp,isRegExp,isRegExp_default,isUndefined_default,init_baseIsRegExp=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseIsRegExp.js"(){init_baseGetTag(),init_isObjectLike(),regexpTag5="[object RegExp]",__name(baseIsRegExp,"baseIsRegExp"),baseIsRegExp_default=baseIsRegExp}}),init_isRegExp=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isRegExp.js"(){init_baseIsRegExp(),init_baseUnary(),init_nodeUtil(),nodeIsRegExp=nodeUtil_default&&nodeUtil_default.isRegExp,isRegExp=nodeIsRegExp?baseUnary_default(nodeIsRegExp):baseIsRegExp_default,isRegExp_default=isRegExp}});function isUndefined(value2){return void 0===value2}var baseLt_default,init_isUndefined=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isUndefined.js"(){__name(isUndefined,"isUndefined"),isUndefined_default=isUndefined}});function baseLt(value2,other){return value2<other}var mapValues_default,init_baseLt=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseLt.js"(){__name(baseLt,"baseLt"),baseLt_default=baseLt}});function mapValues(object3,iteratee){var result={};return iteratee=baseIteratee_default(iteratee,3),baseForOwn_default(object3,function(value2,key,object4){baseAssignValue_default(result,key,iteratee(value2,key,object4))}),result}var baseExtremum_default,init_mapValues=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/mapValues.js"(){init_baseAssignValue(),init_baseForOwn(),init_baseIteratee(),__name(mapValues,"mapValues"),mapValues_default=mapValues}});function baseExtremum(array4,iteratee,comparator){for(var index=-1,length2=array4.length;++index<length2;){var value2=array4[index],current=iteratee(value2);if(null!=current&&(void 0===computed?current==current&&!isSymbol_default(current):comparator(current,computed)))var computed=current,result=value2}return result}var max_default,init_baseExtremum=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseExtremum.js"(){init_isSymbol(),__name(baseExtremum,"baseExtremum"),baseExtremum_default=baseExtremum}});function max4(array4){return array4&&array4.length?baseExtremum_default(array4,identity_default4,baseGt_default):void 0}var min_default,init_max2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/max.js"(){init_baseExtremum(),init_baseGt(),init_identity4(),__name(max4,"max"),max_default=max4}});function min4(array4){return array4&&array4.length?baseExtremum_default(array4,identity_default4,baseLt_default):void 0}var minBy_default,init_min2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/min.js"(){init_baseExtremum(),init_baseLt(),init_identity4(),__name(min4,"min"),min_default=min4}});function minBy(array4,iteratee){return array4&&array4.length?baseExtremum_default(array4,baseIteratee_default(iteratee,2),baseLt_default):void 0}var FUNC_ERROR_TEXT2,negate_default,init_minBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/minBy.js"(){init_baseExtremum(),init_baseIteratee(),init_baseLt(),__name(minBy,"minBy"),minBy_default=minBy}});function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT2);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}var baseSet_default,init_negate=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/negate.js"(){FUNC_ERROR_TEXT2="Expected a function",__name(negate,"negate"),negate_default=negate}});function baseSet(object3,path4,value2,customizer){if(!isObject_default(object3))return object3;for(var index=-1,length2=(path4=castPath_default(path4,object3)).length,lastIndex=length2-1,nested=object3;null!=nested&&++index<length2;){var key=toKey_default(path4[index]),newValue=value2;if("__proto__"===key||"constructor"===key||"prototype"===key)return object3;if(index!=lastIndex){var objValue=nested[key];void 0===(newValue=customizer?customizer(objValue,key,nested):void 0)&&(newValue=isObject_default(objValue)?objValue:isIndex_default(path4[index+1])?[]:{})}assignValue_default(nested,key,newValue),nested=nested[key]}return object3}var basePickBy_default,init_baseSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseSet.js"(){init_assignValue(),init_castPath(),init_isIndex(),init_isObject(),init_toKey(),__name(baseSet,"baseSet"),baseSet_default=baseSet}});function basePickBy(object3,paths,predicate){for(var index=-1,length2=paths.length,result={};++index<length2;){var path4=paths[index],value2=baseGet_default(object3,path4);predicate(value2,path4)&&baseSet_default(result,castPath_default(path4,object3),value2)}return result}var pickBy_default,init_basePickBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_basePickBy.js"(){init_baseGet(),init_baseSet(),init_castPath(),__name(basePickBy,"basePickBy"),basePickBy_default=basePickBy}});function pickBy(object3,predicate){if(null==object3)return{};var props=arrayMap_default(getAllKeysIn_default(object3),function(prop){return[prop]});return predicate=baseIteratee_default(predicate),basePickBy_default(object3,props,function(value2,path4){return predicate(value2,path4[0])})}var baseSortBy_default,init_pickBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/pickBy.js"(){init_arrayMap(),init_baseIteratee(),init_basePickBy(),init_getAllKeysIn(),__name(pickBy,"pickBy"),pickBy_default=pickBy}});function baseSortBy(array4,comparer){var length2=array4.length;for(array4.sort(comparer);length2--;)array4[length2]=array4[length2].value;return array4}var compareAscending_default,init_baseSortBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseSortBy.js"(){__name(baseSortBy,"baseSortBy"),baseSortBy_default=baseSortBy}});function compareAscending(value2,other){if(value2!==other){var valIsDefined=void 0!==value2,valIsNull=null===value2,valIsReflexive=value2==value2,valIsSymbol=isSymbol_default(value2),othIsDefined=void 0!==other,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol_default(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value2>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value2<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}var compareMultiple_default,init_compareAscending=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_compareAscending.js"(){init_isSymbol(),__name(compareAscending,"compareAscending"),compareAscending_default=compareAscending}});function compareMultiple(object3,other,orders){for(var index=-1,objCriteria=object3.criteria,othCriteria=other.criteria,length2=objCriteria.length,ordersLength=orders.length;++index<length2;){var result=compareAscending_default(objCriteria[index],othCriteria[index]);if(result)return index>=ordersLength?result:result*("desc"==orders[index]?-1:1)}return object3.index-other.index}var baseOrderBy_default,init_compareMultiple=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_compareMultiple.js"(){init_compareAscending(),__name(compareMultiple,"compareMultiple"),compareMultiple_default=compareMultiple}});function baseOrderBy(collection4,iteratees,orders){iteratees=iteratees.length?arrayMap_default(iteratees,function(iteratee){return isArray_default(iteratee)?function(value2){return baseGet_default(value2,1===iteratee.length?iteratee[0]:iteratee)}:iteratee}):[identity_default4];var index=-1;iteratees=arrayMap_default(iteratees,baseUnary_default(baseIteratee_default));var result=baseMap_default(collection4,function(value2,key,collection5){return{criteria:arrayMap_default(iteratees,function(iteratee){return iteratee(value2)}),index:++index,value:value2}});return baseSortBy_default(result,function(object3,other){return compareMultiple_default(object3,other,orders)})}var asciiSize,asciiSize_default,rsAstral,rsCombo,rsFitz,rsNonAstral,rsRegional,rsSurrPair,reOptMod,rsOptJoin,rsSeq,rsSymbol,reUnicode,unicodeSize_default,init_baseOrderBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseOrderBy.js"(){init_arrayMap(),init_baseGet(),init_baseIteratee(),init_baseMap(),init_baseSortBy(),init_baseUnary(),init_compareMultiple(),init_identity4(),init_isArray(),__name(baseOrderBy,"baseOrderBy"),baseOrderBy_default=baseOrderBy}}),init_asciiSize=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_asciiSize.js"(){init_baseProperty(),asciiSize=baseProperty_default("length"),asciiSize_default=asciiSize}});function unicodeSize(string3){for(var result=reUnicode.lastIndex=0;reUnicode.test(string3);)++result;return result}var stringSize_default,init_unicodeSize=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_unicodeSize.js"(){rsAstral="[\\ud800-\\udfff]",reOptMod="(?:"+(rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]")+"|"+(rsFitz="\\ud83c[\\udffb-\\udfff]")+")"+"?",rsOptJoin="(?:\\u200d(?:"+[rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),__name(unicodeSize,"unicodeSize"),unicodeSize_default=unicodeSize}});function stringSize(string3){return hasUnicode_default(string3)?unicodeSize_default(string3):asciiSize_default(string3)}var basePick_default,init_stringSize=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_stringSize.js"(){init_asciiSize(),init_hasUnicode(),init_unicodeSize(),__name(stringSize,"stringSize"),stringSize_default=stringSize}});function basePick(object3,paths){return basePickBy_default(object3,paths,function(value2,path4){return hasIn_default(object3,path4)})}var pick,pick_default,nativeCeil,nativeMax5,baseRange_default,init_basePick=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_basePick.js"(){init_basePickBy(),init_hasIn(),__name(basePick,"basePick"),basePick_default=basePick}}),init_pick=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/pick.js"(){init_basePick(),init_flatRest(),pick=flatRest_default(function(object3,paths){return null==object3?{}:basePick_default(object3,paths)}),pick_default=pick}});function baseRange(start3,end2,step3,fromRight){for(var index=-1,length2=nativeMax5(nativeCeil((end2-start3)/(step3||1)),0),result=Array(length2);length2--;)result[fromRight?length2:++index]=start3,start3+=step3;return result}var createRange_default,init_baseRange=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseRange.js"(){nativeCeil=Math.ceil,nativeMax5=Math.max,__name(baseRange,"baseRange"),baseRange_default=baseRange}});function createRange(fromRight){return function(start3,end2,step3){return step3&&"number"!=typeof step3&&isIterateeCall_default(start3,end2,step3)&&(end2=step3=void 0),start3=toFinite_default(start3),void 0===end2?(end2=start3,start3=0):end2=toFinite_default(end2),step3=void 0===step3?start3<end2?1:-1:toFinite_default(step3),baseRange_default(start3,end2,step3,fromRight)}}var range2,range_default,baseReduce_default,init_createRange=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createRange.js"(){init_baseRange(),init_isIterateeCall(),init_toFinite(),__name(createRange,"createRange"),createRange_default=createRange}}),init_range2=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/range.js"(){init_createRange(),range2=createRange_default(),range_default=range2}});function baseReduce(collection4,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection4,function(value2,index,collection5){accumulator=initAccum?(initAccum=!1,value2):iteratee(accumulator,value2,index,collection5)}),accumulator}var reduce_default,init_baseReduce=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseReduce.js"(){__name(baseReduce,"baseReduce"),baseReduce_default=baseReduce}});function reduce(collection4,iteratee,accumulator){var func=isArray_default(collection4)?arrayReduce_default:baseReduce_default,initAccum=arguments.length<3;return func(collection4,baseIteratee_default(iteratee,4),accumulator,initAccum,baseEach_default)}var reject_default,init_reduce=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/reduce.js"(){init_arrayReduce(),init_baseEach(),init_baseIteratee(),init_baseReduce(),init_isArray(),__name(reduce,"reduce"),reduce_default=reduce}});function reject(collection4,predicate){return(isArray_default(collection4)?arrayFilter_default:baseFilter_default)(collection4,negate_default(baseIteratee_default(predicate,3)))}var mapTag8,setTag8,size_default2,init_reject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/reject.js"(){init_arrayFilter(),init_baseFilter(),init_baseIteratee(),init_isArray(),init_negate(),__name(reject,"reject"),reject_default=reject}});function size(collection4){if(null==collection4)return 0;if(isArrayLike_default(collection4))return isString_default(collection4)?stringSize_default(collection4):collection4.length;var tag=getTag_default(collection4);return tag==mapTag8||tag==setTag8?collection4.size:baseKeys_default(collection4).length}var baseSome_default,init_size3=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/size.js"(){init_baseKeys(),init_getTag(),init_isArrayLike(),init_isString(),init_stringSize(),mapTag8="[object Map]",setTag8="[object Set]",__name(size,"size"),size_default2=size}});function baseSome(collection4,predicate){var result;return baseEach_default(collection4,function(value2,index,collection5){return!(result=predicate(value2,index,collection5))}),!!result}var some_default,init_baseSome=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseSome.js"(){init_baseEach(),__name(baseSome,"baseSome"),baseSome_default=baseSome}});function some(collection4,predicate,guard){var func=isArray_default(collection4)?arraySome_default:baseSome_default;return guard&&isIterateeCall_default(collection4,predicate,guard)&&(predicate=void 0),func(collection4,baseIteratee_default(predicate,3))}var sortBy,sortBy_default,createSet,createSet_default,LARGE_ARRAY_SIZE3,baseUniq_default,init_some=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/some.js"(){init_arraySome(),init_baseIteratee(),init_baseSome(),init_isArray(),init_isIterateeCall(),__name(some,"some"),some_default=some}}),init_sortBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/sortBy.js"(){init_baseFlatten(),init_baseOrderBy(),init_baseRest(),init_isIterateeCall(),sortBy=baseRest_default(function(collection4,iteratees){if(null==collection4)return[];var length2=iteratees.length;return length2>1&&isIterateeCall_default(collection4,iteratees[0],iteratees[1])?iteratees=[]:length2>2&&isIterateeCall_default(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy_default(collection4,baseFlatten_default(iteratees,1),[])}),sortBy_default=sortBy}}),init_createSet=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_createSet.js"(){init_Set(),init_noop2(),init_setToArray(),createSet=Set_default&&1/setToArray_default(new Set_default([,-0]))[1]==Infinity?function(values2){return new Set_default(values2)}:noop_default2,createSet_default=createSet}});function baseUniq(array4,iteratee,comparator){var index=-1,includes3=arrayIncludes_default,length2=array4.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes3=arrayIncludesWith_default;else if(length2>=LARGE_ARRAY_SIZE3){var set5=iteratee?null:createSet_default(array4);if(set5)return setToArray_default(set5);isCommon=!1,includes3=cacheHas_default,seen=new SetCache_default}else seen=iteratee?[]:result;outer:for(;++index<length2;){var value2=array4[index],computed=iteratee?iteratee(value2):value2;if(value2=comparator||0!==value2?value2:0,isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value2)}else includes3(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value2))}return result}var union,union_default,uniq_default,init_baseUniq=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseUniq.js"(){init_SetCache(),init_arrayIncludes(),init_arrayIncludesWith(),init_cacheHas(),init_createSet(),init_setToArray(),LARGE_ARRAY_SIZE3=200,__name(baseUniq,"baseUniq"),baseUniq_default=baseUniq}}),init_union=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/union.js"(){init_baseFlatten(),init_baseRest(),init_baseUniq(),init_isArrayLikeObject(),union=baseRest_default(function(arrays){return baseUniq_default(baseFlatten_default(arrays,1,isArrayLikeObject_default,!0))}),union_default=union}});function uniq(array4){return array4&&array4.length?baseUniq_default(array4):[]}var uniqBy_default,init_uniq=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniq.js"(){init_baseUniq(),__name(uniq,"uniq"),uniq_default=uniq}});function uniqBy(array4,iteratee){return array4&&array4.length?baseUniq_default(array4,baseIteratee_default(iteratee,2)):[]}var idCounter,uniqueId_default,init_uniqBy=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniqBy.js"(){init_baseIteratee(),init_baseUniq(),__name(uniqBy,"uniqBy"),uniqBy_default=uniqBy}});function uniqueId(prefix){var id30=++idCounter;return toString_default(prefix)+id30}var baseZipObject_default,init_uniqueId=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniqueId.js"(){init_toString(),idCounter=0,__name(uniqueId,"uniqueId"),uniqueId_default=uniqueId}});function baseZipObject(props,values2,assignFunc){for(var index=-1,length2=props.length,valsLength=values2.length,result={};++index<length2;){var value2=index<valsLength?values2[index]:void 0;assignFunc(result,props[index],value2)}return result}var zipObject_default,init_baseZipObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseZipObject.js"(){__name(baseZipObject,"baseZipObject"),baseZipObject_default=baseZipObject}});function zipObject(props,values2){return baseZipObject_default(props||[],values2||[],assignValue_default)}var DEFAULT_EDGE_NAME,EDGE_KEY_DELIM,Graph,init_zipObject=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/zipObject.js"(){init_assignValue(),init_baseZipObject(),__name(zipObject,"zipObject"),zipObject_default=zipObject}}),init_lodash=__esm({"../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/lodash.js"(){init_assign(),init_clone2(),init_cloneDeep(),init_compact(),init_constant8(),init_defaults3(),init_difference(),init_drop(),init_dropRight(),init_each3(),init_every(),init_filter3(),init_find2(),init_first(),init_flatMap(),init_flatten(),init_forEach(),init_forIn(),init_forOwn(),init_groupBy(),init_has(),init_identity4(),init_includes(),init_indexOf(),init_isArray(),init_isEmpty(),init_isFunction(),init_isObject(),init_isRegExp(),init_isString(),init_isUndefined(),init_keys(),init_last(),init_map(),init_mapValues(),init_max2(),init_merge4(),init_min2(),init_minBy(),init_noop2(),init_now(),init_pick(),init_pickBy(),init_range2(),init_reduce(),init_reject(),init_size3(),init_some(),init_sortBy(),init_union(),init_uniq(),init_uniqueId(),init_values(),init_zipObject()}});function incrementOrInitEntry(map5,k2){map5[k2]?map5[k2]++:map5[k2]=1}function decrementOrRemoveEntry(map5,k2){--map5[k2]||delete map5[k2]}function edgeArgsToId(isDirected,v_,w_,name){var v3=""+v_,w4=""+w_;if(!isDirected&&v3>w4){var tmp=v3;v3=w4,w4=tmp}return v3+EDGE_KEY_DELIM+w4+EDGE_KEY_DELIM+(isUndefined_default(name)?DEFAULT_EDGE_NAME:name)}function edgeArgsToObj(isDirected,v_,w_,name){var v3=""+v_,w4=""+w_;if(!isDirected&&v3>w4){var tmp=v3;v3=w4,w4=tmp}var edgeObj={v:v3,w:w4};return name&&(edgeObj.name=name),edgeObj}function edgeObjToId(isDirected,edgeObj){return edgeArgsToId(isDirected,edgeObj.v,edgeObj.w,edgeObj.name)}var List,init_graph=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/graph.js"(){init_lodash(),DEFAULT_EDGE_NAME="\0",EDGE_KEY_DELIM="",Graph=class{static{__name(this,"Graph")}constructor(opts={}){this._isDirected=!Object.prototype.hasOwnProperty.call(opts,"directed")||opts.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(opts,"multigraph")&&opts.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(opts,"compound")&&opts.compound,this._label=void 0,this._defaultNodeLabelFn=constant_default7(void 0),this._defaultEdgeLabelFn=constant_default7(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(label){return this._label=label,this}graph(){return this._label}setDefaultNodeLabel(newDefault){return isFunction_default(newDefault)||(newDefault=constant_default7(newDefault)),this._defaultNodeLabelFn=newDefault,this}nodeCount(){return this._nodeCount}nodes(){return keys_default(this._nodes)}sources(){var self2=this;return filter_default3(this.nodes(),function(v3){return isEmpty_default(self2._in[v3])})}sinks(){var self2=this;return filter_default3(this.nodes(),function(v3){return isEmpty_default(self2._out[v3])})}setNodes(vs,value2){var args=arguments,self2=this;return forEach_default(vs,function(v3){args.length>1?self2.setNode(v3,value2):self2.setNode(v3)}),this}setNode(v3,value2){return Object.prototype.hasOwnProperty.call(this._nodes,v3)?(arguments.length>1&&(this._nodes[v3]=value2),this):(this._nodes[v3]=arguments.length>1?value2:this._defaultNodeLabelFn(v3),this._isCompound&&(this._parent[v3]="\0",this._children[v3]={},this._children["\0"][v3]=!0),this._in[v3]={},this._preds[v3]={},this._out[v3]={},this._sucs[v3]={},++this._nodeCount,this)}node(v3){return this._nodes[v3]}hasNode(v3){return Object.prototype.hasOwnProperty.call(this._nodes,v3)}removeNode(v3){if(Object.prototype.hasOwnProperty.call(this._nodes,v3)){var removeEdge=__name(e3=>this.removeEdge(this._edgeObjs[e3]),"removeEdge");delete this._nodes[v3],this._isCompound&&(this._removeFromParentsChildList(v3),delete this._parent[v3],forEach_default(this.children(v3),child=>{this.setParent(child)}),delete this._children[v3]),forEach_default(keys_default(this._in[v3]),removeEdge),delete this._in[v3],delete this._preds[v3],forEach_default(keys_default(this._out[v3]),removeEdge),delete this._out[v3],delete this._sucs[v3],--this._nodeCount}return this}setParent(v3,parent4){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined_default(parent4))parent4="\0";else{for(var ancestor=parent4+="";!isUndefined_default(ancestor);ancestor=this.parent(ancestor))if(ancestor===v3)throw new Error("Setting "+parent4+" as parent of "+v3+" would create a cycle");this.setNode(parent4)}return this.setNode(v3),this._removeFromParentsChildList(v3),this._parent[v3]=parent4,this._children[parent4][v3]=!0,this}_removeFromParentsChildList(v3){delete this._children[this._parent[v3]][v3]}parent(v3){if(this._isCompound){var parent4=this._parent[v3];if("\0"!==parent4)return parent4}}children(v3){if(isUndefined_default(v3)&&(v3="\0"),this._isCompound){var children2=this._children[v3];if(children2)return keys_default(children2)}else{if("\0"===v3)return this.nodes();if(this.hasNode(v3))return[]}}predecessors(v3){var predsV=this._preds[v3];if(predsV)return keys_default(predsV)}successors(v3){var sucsV=this._sucs[v3];if(sucsV)return keys_default(sucsV)}neighbors(v3){var preds=this.predecessors(v3);if(preds)return union_default(preds,this.successors(v3))}isLeaf(v3){return 0===(this.isDirected()?this.successors(v3):this.neighbors(v3)).length}filterNodes(filter6){var copy5=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});copy5.setGraph(this.graph());var self2=this;forEach_default(this._nodes,function(value2,v3){filter6(v3)&&copy5.setNode(v3,value2)}),forEach_default(this._edgeObjs,function(e3){copy5.hasNode(e3.v)&&copy5.hasNode(e3.w)&&copy5.setEdge(e3,self2.edge(e3))});var parents3={};function findParent(v3){var parent4=self2.parent(v3);return void 0===parent4||copy5.hasNode(parent4)?(parents3[v3]=parent4,parent4):parent4 in parents3?parents3[parent4]:findParent(parent4)}return __name(findParent,"findParent"),this._isCompound&&forEach_default(copy5.nodes(),function(v3){copy5.setParent(v3,findParent(v3))}),copy5}setDefaultEdgeLabel(newDefault){return isFunction_default(newDefault)||(newDefault=constant_default7(newDefault)),this._defaultEdgeLabelFn=newDefault,this}edgeCount(){return this._edgeCount}edges(){return values_default(this._edgeObjs)}setPath(vs,value2){var self2=this,args=arguments;return reduce_default(vs,function(v3,w4){return args.length>1?self2.setEdge(v3,w4,value2):self2.setEdge(v3,w4),w4}),this}setEdge(){var v3,w4,name,value2,valueSpecified=!1,arg0=arguments[0];"object"==typeof arg0&&null!==arg0&&"v"in arg0?(v3=arg0.v,w4=arg0.w,name=arg0.name,2===arguments.length&&(value2=arguments[1],valueSpecified=!0)):(v3=arg0,w4=arguments[1],name=arguments[3],arguments.length>2&&(value2=arguments[2],valueSpecified=!0)),v3=""+v3,w4=""+w4,isUndefined_default(name)||(name=""+name);var e3=edgeArgsToId(this._isDirected,v3,w4,name);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,e3))return valueSpecified&&(this._edgeLabels[e3]=value2),this;if(!isUndefined_default(name)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v3),this.setNode(w4),this._edgeLabels[e3]=valueSpecified?value2:this._defaultEdgeLabelFn(v3,w4,name);var edgeObj=edgeArgsToObj(this._isDirected,v3,w4,name);return v3=edgeObj.v,w4=edgeObj.w,Object.freeze(edgeObj),this._edgeObjs[e3]=edgeObj,incrementOrInitEntry(this._preds[w4],v3),incrementOrInitEntry(this._sucs[v3],w4),this._in[w4][e3]=edgeObj,this._out[v3][e3]=edgeObj,this._edgeCount++,this}edge(v3,w4,name){var e3=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v3,w4,name);return this._edgeLabels[e3]}hasEdge(v3,w4,name){var e3=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v3,w4,name);return Object.prototype.hasOwnProperty.call(this._edgeLabels,e3)}removeEdge(v3,w4,name){var e3=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v3,w4,name),edge=this._edgeObjs[e3];return edge&&(v3=edge.v,w4=edge.w,delete this._edgeLabels[e3],delete this._edgeObjs[e3],decrementOrRemoveEntry(this._preds[w4],v3),decrementOrRemoveEntry(this._sucs[v3],w4),delete this._in[w4][e3],delete this._out[v3][e3],this._edgeCount--),this}inEdges(v3,u2){var inV=this._in[v3];if(inV){var edges3=values_default(inV);return u2?filter_default3(edges3,function(edge){return edge.v===u2}):edges3}}outEdges(v3,w4){var outV=this._out[v3];if(outV){var edges3=values_default(outV);return w4?filter_default3(edges3,function(edge){return edge.w===w4}):edges3}}nodeEdges(v3,w4){var inEdges=this.inEdges(v3,w4);if(inEdges)return inEdges.concat(this.outEdges(v3,w4))}},Graph.prototype._nodeCount=0,Graph.prototype._edgeCount=0,__name(incrementOrInitEntry,"incrementOrInitEntry"),__name(decrementOrRemoveEntry,"decrementOrRemoveEntry"),__name(edgeArgsToId,"edgeArgsToId"),__name(edgeArgsToObj,"edgeArgsToObj"),__name(edgeObjToId,"edgeObjToId")}}),init_graphlib=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/index.js"(){init_graph()}});function unlink(entry){entry._prev._next=entry._next,entry._next._prev=entry._prev,delete entry._next,delete entry._prev}function filterOutLinks(k2,v3){if("_next"!==k2&&"_prev"!==k2)return v3}var DEFAULT_WEIGHT_FN,init_list=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/data/list.js"(){List=class{static{__name(this,"List")}constructor(){var sentinel={};sentinel._next=sentinel._prev=sentinel,this._sentinel=sentinel}dequeue(){var sentinel=this._sentinel,entry=sentinel._prev;if(entry!==sentinel)return unlink(entry),entry}enqueue(entry){var sentinel=this._sentinel;entry._prev&&entry._next&&unlink(entry),entry._next=sentinel._next,sentinel._next._prev=entry,sentinel._next=entry,entry._prev=sentinel}toString(){for(var strs=[],sentinel=this._sentinel,curr=sentinel._prev;curr!==sentinel;)strs.push(JSON.stringify(curr,filterOutLinks)),curr=curr._prev;return"["+strs.join(", ")+"]"}},__name(unlink,"unlink"),__name(filterOutLinks,"filterOutLinks")}});function greedyFAS(g2,weightFn){if(g2.nodeCount()<=1)return[];var state3=buildState(g2,weightFn||DEFAULT_WEIGHT_FN),results=doGreedyFAS(state3.graph,state3.buckets,state3.zeroIdx);return flatten_default(map_default(results,function(e3){return g2.outEdges(e3.v,e3.w)}))}function doGreedyFAS(g2,buckets,zeroIdx){for(var entry,results=[],sources=buckets[buckets.length-1],sinks=buckets[0];g2.nodeCount();){for(;entry=sinks.dequeue();)removeNode(g2,buckets,zeroIdx,entry);for(;entry=sources.dequeue();)removeNode(g2,buckets,zeroIdx,entry);if(g2.nodeCount())for(var i2=buckets.length-2;i2>0;--i2)if(entry=buckets[i2].dequeue()){results=results.concat(removeNode(g2,buckets,zeroIdx,entry,!0));break}}return results}function removeNode(g2,buckets,zeroIdx,entry,collectPredecessors){var results=collectPredecessors?[]:void 0;return forEach_default(g2.inEdges(entry.v),function(edge){var weight8=g2.edge(edge),uEntry=g2.node(edge.v);collectPredecessors&&results.push({v:edge.v,w:edge.w}),uEntry.out-=weight8,assignBucket(buckets,zeroIdx,uEntry)}),forEach_default(g2.outEdges(entry.v),function(edge){var weight8=g2.edge(edge),w4=edge.w,wEntry=g2.node(w4);wEntry.in-=weight8,assignBucket(buckets,zeroIdx,wEntry)}),g2.removeNode(entry.v),results}function buildState(g2,weightFn){var fasGraph=new Graph,maxIn=0,maxOut=0;forEach_default(g2.nodes(),function(v3){fasGraph.setNode(v3,{v:v3,in:0,out:0})}),forEach_default(g2.edges(),function(e3){var prevWeight=fasGraph.edge(e3.v,e3.w)||0,weight8=weightFn(e3),edgeWeight=prevWeight+weight8;fasGraph.setEdge(e3.v,e3.w,edgeWeight),maxOut=Math.max(maxOut,fasGraph.node(e3.v).out+=weight8),maxIn=Math.max(maxIn,fasGraph.node(e3.w).in+=weight8)});var buckets=range_default(maxOut+maxIn+3).map(function(){return new List}),zeroIdx=maxIn+1;return forEach_default(fasGraph.nodes(),function(v3){assignBucket(buckets,zeroIdx,fasGraph.node(v3))}),{graph:fasGraph,buckets:buckets,zeroIdx:zeroIdx}}function assignBucket(buckets,zeroIdx,entry){entry.out?entry.in?buckets[entry.out-entry.in+zeroIdx].enqueue(entry):buckets[buckets.length-1].enqueue(entry):buckets[0].enqueue(entry)}var init_greedy_fas=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/greedy-fas.js"(){init_lodash(),init_graphlib(),init_list(),DEFAULT_WEIGHT_FN=constant_default7(1),__name(greedyFAS,"greedyFAS"),__name(doGreedyFAS,"doGreedyFAS"),__name(removeNode,"removeNode"),__name(buildState,"buildState"),__name(assignBucket,"assignBucket")}});function run(g2){var fas="greedy"===g2.graph().acyclicer?greedyFAS(g2,weightFn(g2)):dfsFAS(g2);function weightFn(g3){return function(e3){return g3.edge(e3).weight}}forEach_default(fas,function(e3){var label=g2.edge(e3);g2.removeEdge(e3),label.forwardName=e3.name,label.reversed=!0,g2.setEdge(e3.w,e3.v,label,uniqueId_default("rev"))}),__name(weightFn,"weightFn")}function dfsFAS(g2){var fas=[],stack={},visited={};function dfs3(v3){Object.prototype.hasOwnProperty.call(visited,v3)||(visited[v3]=!0,stack[v3]=!0,forEach_default(g2.outEdges(v3),function(e3){Object.prototype.hasOwnProperty.call(stack,e3.w)?fas.push(e3):dfs3(e3.w)}),delete stack[v3])}return __name(dfs3,"dfs"),forEach_default(g2.nodes(),dfs3),fas}function undo(g2){forEach_default(g2.edges(),function(e3){var label=g2.edge(e3);if(label.reversed){g2.removeEdge(e3);var forwardName=label.forwardName;delete label.reversed,delete label.forwardName,g2.setEdge(e3.w,e3.v,label,forwardName)}})}var init_acyclic=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/acyclic.js"(){init_lodash(),init_greedy_fas(),__name(run,"run"),__name(dfsFAS,"dfsFAS"),__name(undo,"undo")}});function addDummyNode(g2,type3,attrs,name){var v3;do{v3=uniqueId_default(name)}while(g2.hasNode(v3));return attrs.dummy=type3,g2.setNode(v3,attrs),v3}function simplify(g2){var simplified=(new Graph).setGraph(g2.graph());return forEach_default(g2.nodes(),function(v3){simplified.setNode(v3,g2.node(v3))}),forEach_default(g2.edges(),function(e3){var simpleLabel=simplified.edge(e3.v,e3.w)||{weight:0,minlen:1},label=g2.edge(e3);simplified.setEdge(e3.v,e3.w,{weight:simpleLabel.weight+label.weight,minlen:Math.max(simpleLabel.minlen,label.minlen)})}),simplified}function asNonCompoundGraph(g2){var simplified=new Graph({multigraph:g2.isMultigraph()}).setGraph(g2.graph());return forEach_default(g2.nodes(),function(v3){g2.children(v3).length||simplified.setNode(v3,g2.node(v3))}),forEach_default(g2.edges(),function(e3){simplified.setEdge(e3,g2.edge(e3))}),simplified}function intersectRect2(rect3,point8){var sx,sy,x5=rect3.x,y6=rect3.y,dx=point8.x-x5,dy=point8.y-y6,w4=rect3.width/2,h3=rect3.height/2;if(!dx&&!dy)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(dy)*w4>Math.abs(dx)*h3?(dy<0&&(h3=-h3),sx=h3*dx/dy,sy=h3):(dx<0&&(w4=-w4),sx=w4,sy=w4*dy/dx),{x:x5+sx,y:y6+sy}}function buildLayerMatrix(g2){var layering=map_default(range_default(maxRank(g2)+1),function(){return[]});return forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3),rank2=node2.rank;isUndefined_default(rank2)||(layering[rank2][node2.order]=v3)}),layering}function normalizeRanks(g2){var min9=min_default(map_default(g2.nodes(),function(v3){return g2.node(v3).rank}));forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3);has_default(node2,"rank")&&(node2.rank-=min9)})}function removeEmptyRanks(g2){var offset=min_default(map_default(g2.nodes(),function(v3){return g2.node(v3).rank})),layers=[];forEach_default(g2.nodes(),function(v3){var rank2=g2.node(v3).rank-offset;layers[rank2]||(layers[rank2]=[]),layers[rank2].push(v3)});var delta=0,nodeRankFactor=g2.graph().nodeRankFactor;forEach_default(layers,function(vs,i2){isUndefined_default(vs)&&i2%nodeRankFactor!==0?--delta:delta&&forEach_default(vs,function(v3){g2.node(v3).rank+=delta})})}function addBorderNode(g2,prefix,rank2,order2){var node2={width:0,height:0};return arguments.length>=4&&(node2.rank=rank2,node2.order=order2),addDummyNode(g2,"border",node2,prefix)}function maxRank(g2){return max_default(map_default(g2.nodes(),function(v3){var rank2=g2.node(v3).rank;if(!isUndefined_default(rank2))return rank2}))}function partition(collection4,fn3){var result={lhs:[],rhs:[]};return forEach_default(collection4,function(value2){fn3(value2)?result.lhs.push(value2):result.rhs.push(value2)}),result}function time2(name,fn3){var start3=now_default();try{return fn3()}finally{console.log(name+" time: "+(now_default()-start3)+"ms")}}function notime(name,fn3){return fn3()}var init_util2=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/util.js"(){init_lodash(),init_graphlib(),__name(addDummyNode,"addDummyNode"),__name(simplify,"simplify"),__name(asNonCompoundGraph,"asNonCompoundGraph"),__name(intersectRect2,"intersectRect"),__name(buildLayerMatrix,"buildLayerMatrix"),__name(normalizeRanks,"normalizeRanks"),__name(removeEmptyRanks,"removeEmptyRanks"),__name(addBorderNode,"addBorderNode"),__name(maxRank,"maxRank"),__name(partition,"partition"),__name(time2,"time"),__name(notime,"notime")}});function addBorderSegments(g2){function dfs3(v3){var children2=g2.children(v3),node2=g2.node(v3);if(children2.length&&forEach_default(children2,dfs3),Object.prototype.hasOwnProperty.call(node2,"minRank")){node2.borderLeft=[],node2.borderRight=[];for(var rank2=node2.minRank,maxRank2=node2.maxRank+1;rank2<maxRank2;++rank2)addBorderNode2(g2,"borderLeft","_bl",v3,node2,rank2),addBorderNode2(g2,"borderRight","_br",v3,node2,rank2)}}__name(dfs3,"dfs"),forEach_default(g2.children(),dfs3)}function addBorderNode2(g2,prop,prefix,sg,sgNode,rank2){var label={width:0,height:0,rank:rank2,borderType:prop},prev2=sgNode[prop][rank2-1],curr=addDummyNode(g2,"border",label,prefix);sgNode[prop][rank2]=curr,g2.setParent(curr,sg),prev2&&g2.setEdge(prev2,curr,{weight:1})}var init_add_border_segments=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/add-border-segments.js"(){init_lodash(),init_util2(),__name(addBorderSegments,"addBorderSegments"),__name(addBorderNode2,"addBorderNode")}});function adjust2(g2){var rankDir=g2.graph().rankdir.toLowerCase();"lr"!==rankDir&&"rl"!==rankDir||swapWidthHeight(g2)}function undo2(g2){var rankDir=g2.graph().rankdir.toLowerCase();"bt"!==rankDir&&"rl"!==rankDir||reverseY(g2),"lr"!==rankDir&&"rl"!==rankDir||(swapXY(g2),swapWidthHeight(g2))}function swapWidthHeight(g2){forEach_default(g2.nodes(),function(v3){swapWidthHeightOne(g2.node(v3))}),forEach_default(g2.edges(),function(e3){swapWidthHeightOne(g2.edge(e3))})}function swapWidthHeightOne(attrs){var w4=attrs.width;attrs.width=attrs.height,attrs.height=w4}function reverseY(g2){forEach_default(g2.nodes(),function(v3){reverseYOne(g2.node(v3))}),forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);forEach_default(edge.points,reverseYOne),Object.prototype.hasOwnProperty.call(edge,"y")&&reverseYOne(edge)})}function reverseYOne(attrs){attrs.y=-attrs.y}function swapXY(g2){forEach_default(g2.nodes(),function(v3){swapXYOne(g2.node(v3))}),forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);forEach_default(edge.points,swapXYOne),Object.prototype.hasOwnProperty.call(edge,"x")&&swapXYOne(edge)})}function swapXYOne(attrs){var x5=attrs.x;attrs.x=attrs.y,attrs.y=x5}var init_coordinate_system=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/coordinate-system.js"(){init_lodash(),__name(adjust2,"adjust"),__name(undo2,"undo"),__name(swapWidthHeight,"swapWidthHeight"),__name(swapWidthHeightOne,"swapWidthHeightOne"),__name(reverseY,"reverseY"),__name(reverseYOne,"reverseYOne"),__name(swapXY,"swapXY"),__name(swapXYOne,"swapXYOne")}});function run2(g2){g2.graph().dummyChains=[],forEach_default(g2.edges(),function(edge){normalizeEdge(g2,edge)})}function normalizeEdge(g2,e3){var v3=e3.v,vRank=g2.node(v3).rank,w4=e3.w,wRank=g2.node(w4).rank,name=e3.name,edgeLabel=g2.edge(e3),labelRank=edgeLabel.labelRank;if(wRank!==vRank+1){g2.removeEdge(e3);var dummy,i2,attrs=void 0;for(i2=0,++vRank;vRank<wRank;++i2,++vRank)edgeLabel.points=[],dummy=addDummyNode(g2,"edge",attrs={width:0,height:0,edgeLabel:edgeLabel,edgeObj:e3,rank:vRank},"_d"),vRank===labelRank&&(attrs.width=edgeLabel.width,attrs.height=edgeLabel.height,attrs.dummy="edge-label",attrs.labelpos=edgeLabel.labelpos),g2.setEdge(v3,dummy,{weight:edgeLabel.weight},name),0===i2&&g2.graph().dummyChains.push(dummy),v3=dummy;g2.setEdge(v3,w4,{weight:edgeLabel.weight},name)}}function undo3(g2){forEach_default(g2.graph().dummyChains,function(v3){var w4,node2=g2.node(v3),origLabel=node2.edgeLabel;for(g2.setEdge(node2.edgeObj,origLabel);node2.dummy;)w4=g2.successors(v3)[0],g2.removeNode(v3),origLabel.points.push({x:node2.x,y:node2.y}),"edge-label"===node2.dummy&&(origLabel.x=node2.x,origLabel.y=node2.y,origLabel.width=node2.width,origLabel.height=node2.height),v3=w4,node2=g2.node(v3)})}var init_normalize=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/normalize.js"(){init_lodash(),init_util2(),__name(run2,"run"),__name(normalizeEdge,"normalizeEdge"),__name(undo3,"undo")}});function longestPath(g2){var visited={};function dfs3(v3){var label=g2.node(v3);if(Object.prototype.hasOwnProperty.call(visited,v3))return label.rank;visited[v3]=!0;var rank2=min_default(map_default(g2.outEdges(v3),function(e3){return dfs3(e3.w)-g2.edge(e3).minlen}));return rank2!==Number.POSITIVE_INFINITY&&null!=rank2||(rank2=0),label.rank=rank2}__name(dfs3,"dfs"),forEach_default(g2.sources(),dfs3)}function slack(g2,e3){return g2.node(e3.w).rank-g2.node(e3.v).rank-g2.edge(e3).minlen}var init_util3=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/rank/util.js"(){init_lodash(),__name(longestPath,"longestPath"),__name(slack,"slack")}});function feasibleTree(g2){var edge,delta,t4=new Graph({directed:!1}),start3=g2.nodes()[0],size4=g2.nodeCount();for(t4.setNode(start3,{});tightTree(t4,g2)<size4;)edge=findMinSlackEdge(t4,g2),delta=t4.hasNode(edge.v)?slack(g2,edge):-slack(g2,edge),shiftRanks(t4,g2,delta);return t4}function tightTree(t4,g2){function dfs3(v3){forEach_default(g2.nodeEdges(v3),function(e3){var edgeV=e3.v,w4=v3===edgeV?e3.w:edgeV;t4.hasNode(w4)||slack(g2,e3)||(t4.setNode(w4,{}),t4.setEdge(v3,w4,{}),dfs3(w4))})}return __name(dfs3,"dfs"),forEach_default(t4.nodes(),dfs3),t4.nodeCount()}function findMinSlackEdge(t4,g2){return minBy_default(g2.edges(),function(e3){if(t4.hasNode(e3.v)!==t4.hasNode(e3.w))return slack(g2,e3)})}function shiftRanks(t4,g2,delta){forEach_default(t4.nodes(),function(v3){g2.node(v3).rank+=delta})}var init_feasible_tree=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/rank/feasible-tree.js"(){init_lodash(),init_graphlib(),init_util3(),__name(feasibleTree,"feasibleTree"),__name(tightTree,"tightTree"),__name(findMinSlackEdge,"findMinSlackEdge"),__name(shiftRanks,"shiftRanks")}}),init_components=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/components.js"(){}}),init_priority_queue=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/data/priority-queue.js"(){}}),init_dijkstra=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/dijkstra.js"(){init_lodash(),init_priority_queue(),constant_default7(1)}}),init_dijkstra_all=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/dijkstra-all.js"(){init_dijkstra()}}),init_tarjan=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/tarjan.js"(){}}),init_find_cycles=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/find-cycles.js"(){init_tarjan()}}),init_floyd_warshall=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/floyd-warshall.js"(){init_lodash(),constant_default7(1)}});function topsort(g2){var visited={},stack={},results=[];function visit(node2){if(Object.prototype.hasOwnProperty.call(stack,node2))throw new CycleException;Object.prototype.hasOwnProperty.call(visited,node2)||(stack[node2]=!0,visited[node2]=!0,forEach_default(g2.predecessors(node2),visit),delete stack[node2],results.push(node2))}if(__name(visit,"visit"),forEach_default(g2.sinks(),visit),size_default2(visited)!==g2.nodeCount())throw new CycleException;return results}function CycleException(){}var init_topsort=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/topsort.js"(){init_lodash(),topsort.CycleException=CycleException,__name(topsort,"topsort"),__name(CycleException,"CycleException"),CycleException.prototype=new Error}}),init_is_acyclic=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/is-acyclic.js"(){init_topsort()}});function dfs(g2,vs,order2){isArray_default(vs)||(vs=[vs]);var navigation=(g2.isDirected()?g2.successors:g2.neighbors).bind(g2),acc=[],visited={};return forEach_default(vs,function(v3){if(!g2.hasNode(v3))throw new Error("Graph does not have node: "+v3);doDfs(g2,v3,"post"===order2,visited,navigation,acc)}),acc}function doDfs(g2,v3,postorder3,visited,navigation,acc){Object.prototype.hasOwnProperty.call(visited,v3)||(visited[v3]=!0,postorder3||acc.push(v3),forEach_default(navigation(v3),function(w4){doDfs(g2,w4,postorder3,visited,navigation,acc)}),postorder3&&acc.push(v3))}var init_dfs=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/dfs.js"(){init_lodash(),__name(dfs,"dfs"),__name(doDfs,"doDfs")}});function postorder(g2,vs){return dfs(g2,vs,"post")}var init_postorder=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/postorder.js"(){init_dfs(),__name(postorder,"postorder")}});function preorder(g2,vs){return dfs(g2,vs,"pre")}var init_preorder=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/preorder.js"(){init_dfs(),__name(preorder,"preorder")}}),init_prim=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/prim.js"(){init_priority_queue(),init_graph()}}),init_alg=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/alg/index.js"(){init_components(),init_dijkstra(),init_dijkstra_all(),init_find_cycles(),init_floyd_warshall(),init_is_acyclic(),init_postorder(),init_preorder(),init_prim(),init_tarjan(),init_topsort()}});function networkSimplex(g2){longestPath(g2=simplify(g2));var e3,t4=feasibleTree(g2);for(initLowLimValues(t4),initCutValues(t4,g2);e3=leaveEdge(t4);)exchangeEdges(t4,g2,e3,enterEdge(t4,g2,e3))}function initCutValues(t4,g2){var vs=postorder(t4,t4.nodes());vs=vs.slice(0,vs.length-1),forEach_default(vs,function(v3){assignCutValue(t4,g2,v3)})}function assignCutValue(t4,g2,child){var parent4=t4.node(child).parent;t4.edge(child,parent4).cutvalue=calcCutValue(t4,g2,child)}function calcCutValue(t4,g2,child){var parent4=t4.node(child).parent,childIsTail=!0,graphEdge=g2.edge(child,parent4),cutValue=0;return graphEdge||(childIsTail=!1,graphEdge=g2.edge(parent4,child)),cutValue=graphEdge.weight,forEach_default(g2.nodeEdges(child),function(e3){var isOutEdge=e3.v===child,other=isOutEdge?e3.w:e3.v;if(other!==parent4){var pointsToHead=isOutEdge===childIsTail,otherWeight=g2.edge(e3).weight;if(cutValue+=pointsToHead?otherWeight:-otherWeight,isTreeEdge(t4,child,other)){var otherCutValue=t4.edge(child,other).cutvalue;cutValue+=pointsToHead?-otherCutValue:otherCutValue}}}),cutValue}function initLowLimValues(tree,root3){arguments.length<2&&(root3=tree.nodes()[0]),dfsAssignLowLim(tree,{},1,root3)}function dfsAssignLowLim(tree,visited,nextLim,v3,parent4){var low=nextLim,label=tree.node(v3);return visited[v3]=!0,forEach_default(tree.neighbors(v3),function(w4){Object.prototype.hasOwnProperty.call(visited,w4)||(nextLim=dfsAssignLowLim(tree,visited,nextLim,w4,v3))}),label.low=low,label.lim=nextLim++,parent4?label.parent=parent4:delete label.parent,nextLim}function leaveEdge(tree){return find_default2(tree.edges(),function(e3){return tree.edge(e3).cutvalue<0})}function enterEdge(t4,g2,edge){var v3=edge.v,w4=edge.w;g2.hasEdge(v3,w4)||(v3=edge.w,w4=edge.v);var vLabel=t4.node(v3),wLabel=t4.node(w4),tailLabel=vLabel,flip=!1;vLabel.lim>wLabel.lim&&(tailLabel=wLabel,flip=!0);var candidates=filter_default3(g2.edges(),function(edge2){return flip===isDescendant(t4,t4.node(edge2.v),tailLabel)&&flip!==isDescendant(t4,t4.node(edge2.w),tailLabel)});return minBy_default(candidates,function(edge2){return slack(g2,edge2)})}function exchangeEdges(t4,g2,e3,f2){var v3=e3.v,w4=e3.w;t4.removeEdge(v3,w4),t4.setEdge(f2.v,f2.w,{}),initLowLimValues(t4),initCutValues(t4,g2),updateRanks(t4,g2)}function updateRanks(t4,g2){var root3=find_default2(t4.nodes(),function(v3){return!g2.node(v3).parent}),vs=preorder(t4,root3);vs=vs.slice(1),forEach_default(vs,function(v3){var parent4=t4.node(v3).parent,edge=g2.edge(v3,parent4),flipped=!1;edge||(edge=g2.edge(parent4,v3),flipped=!0),g2.node(v3).rank=g2.node(parent4).rank+(flipped?edge.minlen:-edge.minlen)})}function isTreeEdge(tree,u2,v3){return tree.hasEdge(u2,v3)}function isDescendant(tree,vLabel,rootLabel){return rootLabel.low<=vLabel.lim&&vLabel.lim<=rootLabel.lim}var longestPathRanker,init_network_simplex=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/rank/network-simplex.js"(){init_lodash(),init_alg(),init_util2(),init_feasible_tree(),init_util3(),networkSimplex.initLowLimValues=initLowLimValues,networkSimplex.initCutValues=initCutValues,networkSimplex.calcCutValue=calcCutValue,networkSimplex.leaveEdge=leaveEdge,networkSimplex.enterEdge=enterEdge,networkSimplex.exchangeEdges=exchangeEdges,__name(networkSimplex,"networkSimplex"),__name(initCutValues,"initCutValues"),__name(assignCutValue,"assignCutValue"),__name(calcCutValue,"calcCutValue"),__name(initLowLimValues,"initLowLimValues"),__name(dfsAssignLowLim,"dfsAssignLowLim"),__name(leaveEdge,"leaveEdge"),__name(enterEdge,"enterEdge"),__name(exchangeEdges,"exchangeEdges"),__name(updateRanks,"updateRanks"),__name(isTreeEdge,"isTreeEdge"),__name(isDescendant,"isDescendant")}});function rank(g2){switch(g2.graph().ranker){case"network-simplex":default:networkSimplexRanker(g2);break;case"tight-tree":tightTreeRanker(g2);break;case"longest-path":longestPathRanker(g2)}}function tightTreeRanker(g2){longestPath(g2),feasibleTree(g2)}function networkSimplexRanker(g2){networkSimplex(g2)}var init_rank=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/rank/index.js"(){init_feasible_tree(),init_network_simplex(),init_util3(),__name(rank,"rank"),longestPathRanker=longestPath,__name(tightTreeRanker,"tightTreeRanker"),__name(networkSimplexRanker,"networkSimplexRanker")}});function run3(g2){var root3=addDummyNode(g2,"root",{},"_root"),depths=treeDepths(g2),height2=max_default(values_default(depths))-1,nodeSep=2*height2+1;g2.graph().nestingRoot=root3,forEach_default(g2.edges(),function(e3){g2.edge(e3).minlen*=nodeSep});var weight8=sumWeights(g2)+1;forEach_default(g2.children(),function(child){dfs2(g2,root3,nodeSep,weight8,height2,depths,child)}),g2.graph().nodeRankFactor=nodeSep}function dfs2(g2,root3,nodeSep,weight8,height2,depths,v3){var children2=g2.children(v3);if(children2.length){var top2=addBorderNode(g2,"_bt"),bottom2=addBorderNode(g2,"_bb"),label=g2.node(v3);g2.setParent(top2,v3),label.borderTop=top2,g2.setParent(bottom2,v3),label.borderBottom=bottom2,forEach_default(children2,function(child){dfs2(g2,root3,nodeSep,weight8,height2,depths,child);var childNode=g2.node(child),childTop=childNode.borderTop?childNode.borderTop:child,childBottom=childNode.borderBottom?childNode.borderBottom:child,thisWeight=childNode.borderTop?weight8:2*weight8,minlen=childTop!==childBottom?1:height2-depths[v3]+1;g2.setEdge(top2,childTop,{weight:thisWeight,minlen:minlen,nestingEdge:!0}),g2.setEdge(childBottom,bottom2,{weight:thisWeight,minlen:minlen,nestingEdge:!0})}),g2.parent(v3)||g2.setEdge(root3,top2,{weight:0,minlen:height2+depths[v3]})}else v3!==root3&&g2.setEdge(root3,v3,{weight:0,minlen:nodeSep})}function treeDepths(g2){var depths={};function dfs3(v3,depth){var children2=g2.children(v3);children2&&children2.length&&forEach_default(children2,function(child){dfs3(child,depth+1)}),depths[v3]=depth}return __name(dfs3,"dfs"),forEach_default(g2.children(),function(v3){dfs3(v3,1)}),depths}function sumWeights(g2){return reduce_default(g2.edges(),function(acc,e3){return acc+g2.edge(e3).weight},0)}function cleanup(g2){var graphLabel=g2.graph();g2.removeNode(graphLabel.nestingRoot),delete graphLabel.nestingRoot,forEach_default(g2.edges(),function(e3){g2.edge(e3).nestingEdge&&g2.removeEdge(e3)})}var init_nesting_graph=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/nesting-graph.js"(){init_lodash(),init_util2(),__name(run3,"run"),__name(dfs2,"dfs"),__name(treeDepths,"treeDepths"),__name(sumWeights,"sumWeights"),__name(cleanup,"cleanup")}});function addSubgraphConstraints(g2,cg,vs){var rootPrev,prev2={};forEach_default(vs,function(v3){for(var parent4,prevChild,child=g2.parent(v3);child;){if((parent4=g2.parent(child))?(prevChild=prev2[parent4],prev2[parent4]=child):(prevChild=rootPrev,rootPrev=child),prevChild&&prevChild!==child)return void cg.setEdge(prevChild,child);child=parent4}})}var init_add_subgraph_constraints=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/add-subgraph-constraints.js"(){init_lodash(),__name(addSubgraphConstraints,"addSubgraphConstraints")}});function buildLayerGraph(g2,rank2,relationship){var root3=createRootNode(g2),result=new Graph({compound:!0}).setGraph({root:root3}).setDefaultNodeLabel(function(v3){return g2.node(v3)});return forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3),parent4=g2.parent(v3);(node2.rank===rank2||node2.minRank<=rank2&&rank2<=node2.maxRank)&&(result.setNode(v3),result.setParent(v3,parent4||root3),forEach_default(g2[relationship](v3),function(e3){var u2=e3.v===v3?e3.w:e3.v,edge=result.edge(u2,v3),weight8=isUndefined_default(edge)?0:edge.weight;result.setEdge(u2,v3,{weight:g2.edge(e3).weight+weight8})}),Object.prototype.hasOwnProperty.call(node2,"minRank")&&result.setNode(v3,{borderLeft:node2.borderLeft[rank2],borderRight:node2.borderRight[rank2]}))}),result}function createRootNode(g2){for(var v3;g2.hasNode(v3=uniqueId_default("_root")););return v3}var init_build_layer_graph=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/build-layer-graph.js"(){init_lodash(),init_graphlib(),__name(buildLayerGraph,"buildLayerGraph"),__name(createRootNode,"createRootNode")}});function crossCount(g2,layering){for(var cc2=0,i2=1;i2<layering.length;++i2)cc2+=twoLayerCrossCount(g2,layering[i2-1],layering[i2]);return cc2}function twoLayerCrossCount(g2,northLayer,southLayer){for(var southPos=zipObject_default(southLayer,map_default(southLayer,function(v3,i2){return i2})),southEntries=flatten_default(map_default(northLayer,function(v3){return sortBy_default(map_default(g2.outEdges(v3),function(e3){return{pos:southPos[e3.w],weight:g2.edge(e3).weight}}),"pos")})),firstIndex=1;firstIndex<southLayer.length;)firstIndex<<=1;var treeSize=2*firstIndex-1;firstIndex-=1;var tree=map_default(new Array(treeSize),function(){return 0}),cc2=0;return forEach_default(southEntries.forEach(function(entry){var index=entry.pos+firstIndex;tree[index]+=entry.weight;for(var weightSum=0;index>0;)index%2&&(weightSum+=tree[index+1]),tree[index=index-1>>1]+=entry.weight;cc2+=entry.weight*weightSum})),cc2}var init_cross_count=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/cross-count.js"(){init_lodash(),__name(crossCount,"crossCount"),__name(twoLayerCrossCount,"twoLayerCrossCount")}});function initOrder(g2){var visited={},simpleNodes=filter_default3(g2.nodes(),function(v3){return!g2.children(v3).length}),maxRank2=max_default(map_default(simpleNodes,function(v3){return g2.node(v3).rank})),layers=map_default(range_default(maxRank2+1),function(){return[]});function dfs3(v3){if(!has_default(visited,v3)){visited[v3]=!0;var node2=g2.node(v3);layers[node2.rank].push(v3),forEach_default(g2.successors(v3),dfs3)}}__name(dfs3,"dfs");var orderedVs=sortBy_default(simpleNodes,function(v3){return g2.node(v3).rank});return forEach_default(orderedVs,dfs3),layers}var init_init_order=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/init-order.js"(){init_lodash(),__name(initOrder,"initOrder")}});function barycenter(g2,movable){return map_default(movable,function(v3){var inV=g2.inEdges(v3);if(inV.length){var result=reduce_default(inV,function(acc,e3){var edge=g2.edge(e3),nodeU=g2.node(e3.v);return{sum:acc.sum+edge.weight*nodeU.order,weight:acc.weight+edge.weight}},{sum:0,weight:0});return{v:v3,barycenter:result.sum/result.weight,weight:result.weight}}return{v:v3}})}var init_barycenter=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/barycenter.js"(){init_lodash(),__name(barycenter,"barycenter")}});function resolveConflicts(entries2,cg){var mappedEntries={};return forEach_default(entries2,function(entry,i2){var tmp=mappedEntries[entry.v]={indegree:0,in:[],out:[],vs:[entry.v],i:i2};isUndefined_default(entry.barycenter)||(tmp.barycenter=entry.barycenter,tmp.weight=entry.weight)}),forEach_default(cg.edges(),function(e3){var entryV=mappedEntries[e3.v],entryW=mappedEntries[e3.w];isUndefined_default(entryV)||isUndefined_default(entryW)||(entryW.indegree++,entryV.out.push(mappedEntries[e3.w]))}),doResolveConflicts(filter_default3(mappedEntries,function(entry){return!entry.indegree}))}function doResolveConflicts(sourceSet){var entries2=[];function handleIn(vEntry){return function(uEntry){uEntry.merged||(isUndefined_default(uEntry.barycenter)||isUndefined_default(vEntry.barycenter)||uEntry.barycenter>=vEntry.barycenter)&&mergeEntries(vEntry,uEntry)}}function handleOut(vEntry){return function(wEntry){wEntry.in.push(vEntry),0===--wEntry.indegree&&sourceSet.push(wEntry)}}for(__name(handleIn,"handleIn"),__name(handleOut,"handleOut");sourceSet.length;){var entry=sourceSet.pop();entries2.push(entry),forEach_default(entry.in.reverse(),handleIn(entry)),forEach_default(entry.out,handleOut(entry))}return map_default(filter_default3(entries2,function(entry2){return!entry2.merged}),function(entry2){return pick_default(entry2,["vs","i","barycenter","weight"])})}function mergeEntries(target,source){var sum2=0,weight8=0;target.weight&&(sum2+=target.barycenter*target.weight,weight8+=target.weight),source.weight&&(sum2+=source.barycenter*source.weight,weight8+=source.weight),target.vs=source.vs.concat(target.vs),target.barycenter=sum2/weight8,target.weight=weight8,target.i=Math.min(source.i,target.i),source.merged=!0}var init_resolve_conflicts=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/resolve-conflicts.js"(){init_lodash(),__name(resolveConflicts,"resolveConflicts"),__name(doResolveConflicts,"doResolveConflicts"),__name(mergeEntries,"mergeEntries")}});function sort(entries2,biasRight){var parts=partition(entries2,function(entry){return Object.prototype.hasOwnProperty.call(entry,"barycenter")}),sortable=parts.lhs,unsortable=sortBy_default(parts.rhs,function(entry){return-entry.i}),vs=[],sum2=0,weight8=0,vsIndex=0;sortable.sort(compareWithBias(!!biasRight)),vsIndex=consumeUnsortable(vs,unsortable,vsIndex),forEach_default(sortable,function(entry){vsIndex+=entry.vs.length,vs.push(entry.vs),sum2+=entry.barycenter*entry.weight,weight8+=entry.weight,vsIndex=consumeUnsortable(vs,unsortable,vsIndex)});var result={vs:flatten_default(vs)};return weight8&&(result.barycenter=sum2/weight8,result.weight=weight8),result}function consumeUnsortable(vs,unsortable,index){for(var last3;unsortable.length&&(last3=last_default(unsortable)).i<=index;)unsortable.pop(),vs.push(last3.vs),index++;return index}function compareWithBias(bias){return function(entryV,entryW){return entryV.barycenter<entryW.barycenter?-1:entryV.barycenter>entryW.barycenter?1:bias?entryW.i-entryV.i:entryV.i-entryW.i}}var init_sort3=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/sort.js"(){init_lodash(),init_util2(),__name(sort,"sort"),__name(consumeUnsortable,"consumeUnsortable"),__name(compareWithBias,"compareWithBias")}});function sortSubgraph(g2,v3,cg,biasRight){var movable=g2.children(v3),node2=g2.node(v3),bl=node2?node2.borderLeft:void 0,br=node2?node2.borderRight:void 0,subgraphs={};bl&&(movable=filter_default3(movable,function(w4){return w4!==bl&&w4!==br}));var barycenters=barycenter(g2,movable);forEach_default(barycenters,function(entry){if(g2.children(entry.v).length){var subgraphResult=sortSubgraph(g2,entry.v,cg,biasRight);subgraphs[entry.v]=subgraphResult,Object.prototype.hasOwnProperty.call(subgraphResult,"barycenter")&&mergeBarycenters(entry,subgraphResult)}});var entries2=resolveConflicts(barycenters,cg);expandSubgraphs(entries2,subgraphs);var result=sort(entries2,biasRight);if(bl&&(result.vs=flatten_default([bl,result.vs,br]),g2.predecessors(bl).length)){var blPred=g2.node(g2.predecessors(bl)[0]),brPred=g2.node(g2.predecessors(br)[0]);Object.prototype.hasOwnProperty.call(result,"barycenter")||(result.barycenter=0,result.weight=0),result.barycenter=(result.barycenter*result.weight+blPred.order+brPred.order)/(result.weight+2),result.weight+=2}return result}function expandSubgraphs(entries2,subgraphs){forEach_default(entries2,function(entry){entry.vs=flatten_default(entry.vs.map(function(v3){return subgraphs[v3]?subgraphs[v3].vs:v3}))})}function mergeBarycenters(target,other){isUndefined_default(target.barycenter)?(target.barycenter=other.barycenter,target.weight=other.weight):(target.barycenter=(target.barycenter*target.weight+other.barycenter*other.weight)/(target.weight+other.weight),target.weight+=other.weight)}var init_sort_subgraph=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/sort-subgraph.js"(){init_lodash(),init_barycenter(),init_resolve_conflicts(),init_sort3(),__name(sortSubgraph,"sortSubgraph"),__name(expandSubgraphs,"expandSubgraphs"),__name(mergeBarycenters,"mergeBarycenters")}});function order(g2){var maxRank2=maxRank(g2),downLayerGraphs=buildLayerGraphs(g2,range_default(1,maxRank2+1),"inEdges"),upLayerGraphs=buildLayerGraphs(g2,range_default(maxRank2-1,-1,-1),"outEdges"),layering=initOrder(g2);assignOrder(g2,layering);for(var best,bestCC=Number.POSITIVE_INFINITY,i2=0,lastBest=0;lastBest<4;++i2,++lastBest){sweepLayerGraphs(i2%2?downLayerGraphs:upLayerGraphs,i2%4>=2);var cc2=crossCount(g2,layering=buildLayerMatrix(g2));cc2<bestCC&&(lastBest=0,best=cloneDeep_default(layering),bestCC=cc2)}assignOrder(g2,best)}function buildLayerGraphs(g2,ranks,relationship){return map_default(ranks,function(rank2){return buildLayerGraph(g2,rank2,relationship)})}function sweepLayerGraphs(layerGraphs,biasRight){var cg=new Graph;forEach_default(layerGraphs,function(lg){var root3=lg.graph().root,sorted=sortSubgraph(lg,root3,cg,biasRight);forEach_default(sorted.vs,function(v3,i2){lg.node(v3).order=i2}),addSubgraphConstraints(lg,cg,sorted.vs)})}function assignOrder(g2,layering){forEach_default(layering,function(layer){forEach_default(layer,function(v3,i2){g2.node(v3).order=i2})})}var init_order2=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/order/index.js"(){init_lodash(),init_graphlib(),init_util2(),init_add_subgraph_constraints(),init_build_layer_graph(),init_cross_count(),init_init_order(),init_sort_subgraph(),__name(order,"order"),__name(buildLayerGraphs,"buildLayerGraphs"),__name(sweepLayerGraphs,"sweepLayerGraphs"),__name(assignOrder,"assignOrder")}});function parentDummyChains(g2){var postorderNums=postorder2(g2);forEach_default(g2.graph().dummyChains,function(v3){for(var node2=g2.node(v3),edgeObj=node2.edgeObj,pathData=findPath(g2,postorderNums,edgeObj.v,edgeObj.w),path4=pathData.path,lca=pathData.lca,pathIdx=0,pathV=path4[pathIdx],ascending5=!0;v3!==edgeObj.w;){if(node2=g2.node(v3),ascending5){for(;(pathV=path4[pathIdx])!==lca&&g2.node(pathV).maxRank<node2.rank;)pathIdx++;pathV===lca&&(ascending5=!1)}if(!ascending5){for(;pathIdx<path4.length-1&&g2.node(pathV=path4[pathIdx+1]).minRank<=node2.rank;)pathIdx++;pathV=path4[pathIdx]}g2.setParent(v3,pathV),v3=g2.successors(v3)[0]}})}function findPath(g2,postorderNums,v3,w4){var parent4,lca,vPath=[],wPath=[],low=Math.min(postorderNums[v3].low,postorderNums[w4].low),lim=Math.max(postorderNums[v3].lim,postorderNums[w4].lim);parent4=v3;do{parent4=g2.parent(parent4),vPath.push(parent4)}while(parent4&&(postorderNums[parent4].low>low||lim>postorderNums[parent4].lim));for(lca=parent4,parent4=w4;(parent4=g2.parent(parent4))!==lca;)wPath.push(parent4);return{path:vPath.concat(wPath.reverse()),lca:lca}}function postorder2(g2){var result={},lim=0;function dfs3(v3){var low=lim;forEach_default(g2.children(v3),dfs3),result[v3]={low:low,lim:lim++}}return __name(dfs3,"dfs"),forEach_default(g2.children(),dfs3),result}var init_parent_dummy_chains=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/parent-dummy-chains.js"(){init_lodash(),__name(parentDummyChains,"parentDummyChains"),__name(findPath,"findPath"),__name(postorder2,"postorder")}});function findType1Conflicts(g2,layering){var conflicts={};function visitLayer(prevLayer,layer){var k0=0,scanPos=0,prevLayerLength=prevLayer.length,lastNode=last_default(layer);return forEach_default(layer,function(v3,i2){var w4=findOtherInnerSegmentNode(g2,v3),k1=w4?g2.node(w4).order:prevLayerLength;(w4||v3===lastNode)&&(forEach_default(layer.slice(scanPos,i2+1),function(scanNode){forEach_default(g2.predecessors(scanNode),function(u2){var uLabel=g2.node(u2),uPos=uLabel.order;!(uPos<k0||k1<uPos)||uLabel.dummy&&g2.node(scanNode).dummy||addConflict(conflicts,u2,scanNode)})}),scanPos=i2+1,k0=k1)}),layer}return __name(visitLayer,"visitLayer"),reduce_default(layering,visitLayer),conflicts}function findType2Conflicts(g2,layering){var conflicts={};function scan(south,southPos,southEnd,prevNorthBorder,nextNorthBorder){var v3;forEach_default(range_default(southPos,southEnd),function(i2){v3=south[i2],g2.node(v3).dummy&&forEach_default(g2.predecessors(v3),function(u2){var uNode=g2.node(u2);uNode.dummy&&(uNode.order<prevNorthBorder||uNode.order>nextNorthBorder)&&addConflict(conflicts,u2,v3)})})}function visitLayer(north,south){var nextNorthPos,prevNorthPos=-1,southPos=0;return forEach_default(south,function(v3,southLookahead){if("border"===g2.node(v3).dummy){var predecessors=g2.predecessors(v3);predecessors.length&&(nextNorthPos=g2.node(predecessors[0]).order,scan(south,southPos,southLookahead,prevNorthPos,nextNorthPos),southPos=southLookahead,prevNorthPos=nextNorthPos)}scan(south,southPos,south.length,nextNorthPos,north.length)}),south}return __name(scan,"scan"),__name(visitLayer,"visitLayer"),reduce_default(layering,visitLayer),conflicts}function findOtherInnerSegmentNode(g2,v3){if(g2.node(v3).dummy)return find_default2(g2.predecessors(v3),function(u2){return g2.node(u2).dummy})}function addConflict(conflicts,v3,w4){if(v3>w4){var tmp=v3;v3=w4,w4=tmp}var conflictsV=conflicts[v3];conflictsV||(conflicts[v3]=conflictsV={}),conflictsV[w4]=!0}function hasConflict(conflicts,v3,w4){if(v3>w4){var tmp=v3;v3=w4,w4=tmp}return!!conflicts[v3]&&Object.prototype.hasOwnProperty.call(conflicts[v3],w4)}function verticalAlignment(g2,layering,conflicts,neighborFn){var root3={},align={},pos={};return forEach_default(layering,function(layer){forEach_default(layer,function(v3,order2){root3[v3]=v3,align[v3]=v3,pos[v3]=order2})}),forEach_default(layering,function(layer){var prevIdx=-1;forEach_default(layer,function(v3){var ws=neighborFn(v3);if(ws.length)for(var mp=((ws=sortBy_default(ws,function(w5){return pos[w5]})).length-1)/2,i2=Math.floor(mp),il=Math.ceil(mp);i2<=il;++i2){var w4=ws[i2];align[v3]===v3&&prevIdx<pos[w4]&&!hasConflict(conflicts,v3,w4)&&(align[w4]=v3,align[v3]=root3[v3]=root3[w4],prevIdx=pos[w4])}})}),{root:root3,align:align}}function horizontalCompaction(g2,layering,root3,align,reverseSep){var xs={},blockG=buildBlockGraph(g2,layering,root3,reverseSep),borderType=reverseSep?"borderLeft":"borderRight";function iterate(setXsFunc,nextNodesFunc){for(var stack=blockG.nodes(),elem=stack.pop(),visited={};elem;)visited[elem]?setXsFunc(elem):(visited[elem]=!0,stack.push(elem),stack=stack.concat(nextNodesFunc(elem))),elem=stack.pop()}function pass1(elem){xs[elem]=blockG.inEdges(elem).reduce(function(acc,e3){return Math.max(acc,xs[e3.v]+blockG.edge(e3))},0)}function pass2(elem){var min9=blockG.outEdges(elem).reduce(function(acc,e3){return Math.min(acc,xs[e3.w]-blockG.edge(e3))},Number.POSITIVE_INFINITY),node2=g2.node(elem);min9!==Number.POSITIVE_INFINITY&&node2.borderType!==borderType&&(xs[elem]=Math.max(xs[elem],min9))}return __name(iterate,"iterate"),__name(pass1,"pass1"),__name(pass2,"pass2"),iterate(pass1,blockG.predecessors.bind(blockG)),iterate(pass2,blockG.successors.bind(blockG)),forEach_default(align,function(v3){xs[v3]=xs[root3[v3]]}),xs}function buildBlockGraph(g2,layering,root3,reverseSep){var blockGraph=new Graph,graphLabel=g2.graph(),sepFn=sep(graphLabel.nodesep,graphLabel.edgesep,reverseSep);return forEach_default(layering,function(layer){var u2;forEach_default(layer,function(v3){var vRoot=root3[v3];if(blockGraph.setNode(vRoot),u2){var uRoot=root3[u2],prevMax=blockGraph.edge(uRoot,vRoot);blockGraph.setEdge(uRoot,vRoot,Math.max(sepFn(g2,v3,u2),prevMax||0))}u2=v3})}),blockGraph}function findSmallestWidthAlignment(g2,xss){return minBy_default(values_default(xss),function(xs){var max10=Number.NEGATIVE_INFINITY,min9=Number.POSITIVE_INFINITY;return forIn_default(xs,function(x5,v3){var halfWidth=width(g2,v3)/2;max10=Math.max(x5+halfWidth,max10),min9=Math.min(x5-halfWidth,min9)}),max10-min9})}function alignCoordinates(xss,alignTo){var alignToVals=values_default(alignTo),alignToMin=min_default(alignToVals),alignToMax=max_default(alignToVals);forEach_default(["u","d"],function(vert){forEach_default(["l","r"],function(horiz){var delta,alignment=vert+horiz,xs=xss[alignment];if(xs!==alignTo){var xsVals=values_default(xs);(delta="l"===horiz?alignToMin-min_default(xsVals):alignToMax-max_default(xsVals))&&(xss[alignment]=mapValues_default(xs,function(x5){return x5+delta}))}})})}function balance(xss,align){return mapValues_default(xss.ul,function(ignore,v3){if(align)return xss[align.toLowerCase()][v3];var xs=sortBy_default(map_default(xss,v3));return(xs[1]+xs[2])/2})}function positionX(g2){var adjustedLayering,layering=buildLayerMatrix(g2),conflicts=merge_default3(findType1Conflicts(g2,layering),findType2Conflicts(g2,layering)),xss={};forEach_default(["u","d"],function(vert){adjustedLayering="u"===vert?layering:values_default(layering).reverse(),forEach_default(["l","r"],function(horiz){"r"===horiz&&(adjustedLayering=map_default(adjustedLayering,function(inner2){return values_default(inner2).reverse()}));var neighborFn=("u"===vert?g2.predecessors:g2.successors).bind(g2),align=verticalAlignment(0,adjustedLayering,conflicts,neighborFn),xs=horizontalCompaction(g2,adjustedLayering,align.root,align.align,"r"===horiz);"r"===horiz&&(xs=mapValues_default(xs,function(x5){return-x5})),xss[vert+horiz]=xs})});var smallestWidth=findSmallestWidthAlignment(g2,xss);return alignCoordinates(xss,smallestWidth),balance(xss,g2.graph().align)}function sep(nodeSep,edgeSep,reverseSep){return function(g2,v3,w4){var delta,vLabel=g2.node(v3),wLabel=g2.node(w4),sum2=0;if(sum2+=vLabel.width/2,Object.prototype.hasOwnProperty.call(vLabel,"labelpos"))switch(vLabel.labelpos.toLowerCase()){case"l":delta=-vLabel.width/2;break;case"r":delta=vLabel.width/2}if(delta&&(sum2+=reverseSep?delta:-delta),delta=0,sum2+=(vLabel.dummy?edgeSep:nodeSep)/2,sum2+=(wLabel.dummy?edgeSep:nodeSep)/2,sum2+=wLabel.width/2,Object.prototype.hasOwnProperty.call(wLabel,"labelpos"))switch(wLabel.labelpos.toLowerCase()){case"l":delta=wLabel.width/2;break;case"r":delta=-wLabel.width/2}return delta&&(sum2+=reverseSep?delta:-delta),delta=0,sum2}}function width(g2,v3){return g2.node(v3).width}var init_bk=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/position/bk.js"(){init_lodash(),init_graphlib(),init_util2(),__name(findType1Conflicts,"findType1Conflicts"),__name(findType2Conflicts,"findType2Conflicts"),__name(findOtherInnerSegmentNode,"findOtherInnerSegmentNode"),__name(addConflict,"addConflict"),__name(hasConflict,"hasConflict"),__name(verticalAlignment,"verticalAlignment"),__name(horizontalCompaction,"horizontalCompaction"),__name(buildBlockGraph,"buildBlockGraph"),__name(findSmallestWidthAlignment,"findSmallestWidthAlignment"),__name(alignCoordinates,"alignCoordinates"),__name(balance,"balance"),__name(positionX,"positionX"),__name(sep,"sep"),__name(width,"width")}});function position(g2){positionY(g2=asNonCompoundGraph(g2)),forOwn_default(positionX(g2),function(x5,v3){g2.node(v3).x=x5})}function positionY(g2){var layering=buildLayerMatrix(g2),rankSep=g2.graph().ranksep,prevY=0;forEach_default(layering,function(layer){var maxHeight=max_default(map_default(layer,function(v3){return g2.node(v3).height}));forEach_default(layer,function(v3){g2.node(v3).y=prevY+maxHeight/2}),prevY+=maxHeight+rankSep})}var graphNumAttrs,graphDefaults,graphAttrs,nodeNumAttrs,nodeDefaults,edgeNumAttrs,edgeDefaults,edgeAttrs,init_position=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/position/index.js"(){init_lodash(),init_util2(),init_bk(),__name(position,"position"),__name(positionY,"positionY")}});function layout(g2,opts){var time4=opts&&opts.debugTiming?time2:notime;time4("layout",()=>{var layoutGraph=time4("  buildLayoutGraph",()=>buildLayoutGraph(g2));time4("  runLayout",()=>runLayout(layoutGraph,time4)),time4("  updateInputGraph",()=>updateInputGraph(g2,layoutGraph))})}function runLayout(g2,time4){time4("    makeSpaceForEdgeLabels",()=>makeSpaceForEdgeLabels(g2)),time4("    removeSelfEdges",()=>removeSelfEdges(g2)),time4("    acyclic",()=>run(g2)),time4("    nestingGraph.run",()=>run3(g2)),time4("    rank",()=>rank(asNonCompoundGraph(g2))),time4("    injectEdgeLabelProxies",()=>injectEdgeLabelProxies(g2)),time4("    removeEmptyRanks",()=>removeEmptyRanks(g2)),time4("    nestingGraph.cleanup",()=>cleanup(g2)),time4("    normalizeRanks",()=>normalizeRanks(g2)),time4("    assignRankMinMax",()=>assignRankMinMax(g2)),time4("    removeEdgeLabelProxies",()=>removeEdgeLabelProxies(g2)),time4("    normalize.run",()=>run2(g2)),time4("    parentDummyChains",()=>parentDummyChains(g2)),time4("    addBorderSegments",()=>addBorderSegments(g2)),time4("    order",()=>order(g2)),time4("    insertSelfEdges",()=>insertSelfEdges(g2)),time4("    adjustCoordinateSystem",()=>adjust2(g2)),time4("    position",()=>position(g2)),time4("    positionSelfEdges",()=>positionSelfEdges(g2)),time4("    removeBorderNodes",()=>removeBorderNodes(g2)),time4("    normalize.undo",()=>undo3(g2)),time4("    fixupEdgeLabelCoords",()=>fixupEdgeLabelCoords(g2)),time4("    undoCoordinateSystem",()=>undo2(g2)),time4("    translateGraph",()=>translateGraph(g2)),time4("    assignNodeIntersects",()=>assignNodeIntersects(g2)),time4("    reversePoints",()=>reversePointsForReversedEdges(g2)),time4("    acyclic.undo",()=>undo(g2))}function updateInputGraph(inputGraph,layoutGraph){forEach_default(inputGraph.nodes(),function(v3){var inputLabel=inputGraph.node(v3),layoutLabel=layoutGraph.node(v3);inputLabel&&(inputLabel.x=layoutLabel.x,inputLabel.y=layoutLabel.y,layoutGraph.children(v3).length&&(inputLabel.width=layoutLabel.width,inputLabel.height=layoutLabel.height))}),forEach_default(inputGraph.edges(),function(e3){var inputLabel=inputGraph.edge(e3),layoutLabel=layoutGraph.edge(e3);inputLabel.points=layoutLabel.points,Object.prototype.hasOwnProperty.call(layoutLabel,"x")&&(inputLabel.x=layoutLabel.x,inputLabel.y=layoutLabel.y)}),inputGraph.graph().width=layoutGraph.graph().width,inputGraph.graph().height=layoutGraph.graph().height}function buildLayoutGraph(inputGraph){var g2=new Graph({multigraph:!0,compound:!0}),graph=canonicalize(inputGraph.graph());return g2.setGraph(merge_default3({},graphDefaults,selectNumberAttrs(graph,graphNumAttrs),pick_default(graph,graphAttrs))),forEach_default(inputGraph.nodes(),function(v3){var node2=canonicalize(inputGraph.node(v3));g2.setNode(v3,defaults_default(selectNumberAttrs(node2,nodeNumAttrs),nodeDefaults)),g2.setParent(v3,inputGraph.parent(v3))}),forEach_default(inputGraph.edges(),function(e3){var edge=canonicalize(inputGraph.edge(e3));g2.setEdge(e3,merge_default3({},edgeDefaults,selectNumberAttrs(edge,edgeNumAttrs),pick_default(edge,edgeAttrs)))}),g2}function makeSpaceForEdgeLabels(g2){var graph=g2.graph();graph.ranksep/=2,forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);edge.minlen*=2,"c"!==edge.labelpos.toLowerCase()&&("TB"===graph.rankdir||"BT"===graph.rankdir?edge.width+=edge.labeloffset:edge.height+=edge.labeloffset)})}function injectEdgeLabelProxies(g2){forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);if(edge.width&&edge.height){var v3=g2.node(e3.v),label={rank:(g2.node(e3.w).rank-v3.rank)/2+v3.rank,e:e3};addDummyNode(g2,"edge-proxy",label,"_ep")}})}function assignRankMinMax(g2){var maxRank2=0;forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3);node2.borderTop&&(node2.minRank=g2.node(node2.borderTop).rank,node2.maxRank=g2.node(node2.borderBottom).rank,maxRank2=max_default(maxRank2,node2.maxRank))}),g2.graph().maxRank=maxRank2}function removeEdgeLabelProxies(g2){forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3);"edge-proxy"===node2.dummy&&(g2.edge(node2.e).labelRank=node2.rank,g2.removeNode(v3))})}function translateGraph(g2){var minX=Number.POSITIVE_INFINITY,maxX=0,minY=Number.POSITIVE_INFINITY,maxY=0,graphLabel=g2.graph(),marginX=graphLabel.marginx||0,marginY=graphLabel.marginy||0;function getExtremes(attrs){var x5=attrs.x,y6=attrs.y,w4=attrs.width,h3=attrs.height;minX=Math.min(minX,x5-w4/2),maxX=Math.max(maxX,x5+w4/2),minY=Math.min(minY,y6-h3/2),maxY=Math.max(maxY,y6+h3/2)}__name(getExtremes,"getExtremes"),forEach_default(g2.nodes(),function(v3){getExtremes(g2.node(v3))}),forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);Object.prototype.hasOwnProperty.call(edge,"x")&&getExtremes(edge)}),minX-=marginX,minY-=marginY,forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3);node2.x-=minX,node2.y-=minY}),forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);forEach_default(edge.points,function(p3){p3.x-=minX,p3.y-=minY}),Object.prototype.hasOwnProperty.call(edge,"x")&&(edge.x-=minX),Object.prototype.hasOwnProperty.call(edge,"y")&&(edge.y-=minY)}),graphLabel.width=maxX-minX+marginX,graphLabel.height=maxY-minY+marginY}function assignNodeIntersects(g2){forEach_default(g2.edges(),function(e3){var p1,p22,edge=g2.edge(e3),nodeV=g2.node(e3.v),nodeW=g2.node(e3.w);edge.points?(p1=edge.points[0],p22=edge.points[edge.points.length-1]):(edge.points=[],p1=nodeW,p22=nodeV),edge.points.unshift(intersectRect2(nodeV,p1)),edge.points.push(intersectRect2(nodeW,p22))})}function fixupEdgeLabelCoords(g2){forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);if(Object.prototype.hasOwnProperty.call(edge,"x"))switch("l"!==edge.labelpos&&"r"!==edge.labelpos||(edge.width-=edge.labeloffset),edge.labelpos){case"l":edge.x-=edge.width/2+edge.labeloffset;break;case"r":edge.x+=edge.width/2+edge.labeloffset}})}function reversePointsForReversedEdges(g2){forEach_default(g2.edges(),function(e3){var edge=g2.edge(e3);edge.reversed&&edge.points.reverse()})}function removeBorderNodes(g2){forEach_default(g2.nodes(),function(v3){if(g2.children(v3).length){var node2=g2.node(v3),t4=g2.node(node2.borderTop),b3=g2.node(node2.borderBottom),l4=g2.node(last_default(node2.borderLeft)),r2=g2.node(last_default(node2.borderRight));node2.width=Math.abs(r2.x-l4.x),node2.height=Math.abs(b3.y-t4.y),node2.x=l4.x+node2.width/2,node2.y=t4.y+node2.height/2}}),forEach_default(g2.nodes(),function(v3){"border"===g2.node(v3).dummy&&g2.removeNode(v3)})}function removeSelfEdges(g2){forEach_default(g2.edges(),function(e3){if(e3.v===e3.w){var node2=g2.node(e3.v);node2.selfEdges||(node2.selfEdges=[]),node2.selfEdges.push({e:e3,label:g2.edge(e3)}),g2.removeEdge(e3)}})}function insertSelfEdges(g2){var layers=buildLayerMatrix(g2);forEach_default(layers,function(layer){var orderShift=0;forEach_default(layer,function(v3,i2){var node2=g2.node(v3);node2.order=i2+orderShift,forEach_default(node2.selfEdges,function(selfEdge){addDummyNode(g2,"selfedge",{width:selfEdge.label.width,height:selfEdge.label.height,rank:node2.rank,order:i2+ ++orderShift,e:selfEdge.e,label:selfEdge.label},"_se")}),delete node2.selfEdges})})}function positionSelfEdges(g2){forEach_default(g2.nodes(),function(v3){var node2=g2.node(v3);if("selfedge"===node2.dummy){var selfNode=g2.node(node2.e.v),x5=selfNode.x+selfNode.width/2,y6=selfNode.y,dx=node2.x-x5,dy=selfNode.height/2;g2.setEdge(node2.e,node2.label),g2.removeNode(v3),node2.label.points=[{x:x5+2*dx/3,y:y6-dy},{x:x5+5*dx/6,y:y6-dy},{x:x5+dx,y:y6},{x:x5+5*dx/6,y:y6+dy},{x:x5+2*dx/3,y:y6+dy}],node2.label.x=node2.x,node2.label.y=node2.y}})}function selectNumberAttrs(obj,attrs){return mapValues_default(pick_default(obj,attrs),Number)}function canonicalize(attrs){var newAttrs={};return forEach_default(attrs,function(v3,k2){newAttrs[k2.toLowerCase()]=v3}),newAttrs}var init_layout=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/layout.js"(){init_lodash(),init_graphlib(),init_add_border_segments(),init_coordinate_system(),init_acyclic(),init_normalize(),init_rank(),init_nesting_graph(),init_order2(),init_parent_dummy_chains(),init_position(),init_util2(),__name(layout,"layout"),__name(runLayout,"runLayout"),__name(updateInputGraph,"updateInputGraph"),graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"],__name(buildLayoutGraph,"buildLayoutGraph"),__name(makeSpaceForEdgeLabels,"makeSpaceForEdgeLabels"),__name(injectEdgeLabelProxies,"injectEdgeLabelProxies"),__name(assignRankMinMax,"assignRankMinMax"),__name(removeEdgeLabelProxies,"removeEdgeLabelProxies"),__name(translateGraph,"translateGraph"),__name(assignNodeIntersects,"assignNodeIntersects"),__name(fixupEdgeLabelCoords,"fixupEdgeLabelCoords"),__name(reversePointsForReversedEdges,"reversePointsForReversedEdges"),__name(removeBorderNodes,"removeBorderNodes"),__name(removeSelfEdges,"removeSelfEdges"),__name(insertSelfEdges,"insertSelfEdges"),__name(positionSelfEdges,"positionSelfEdges"),__name(selectNumberAttrs,"selectNumberAttrs"),__name(canonicalize,"canonicalize")}}),init_dagre=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/dagre/index.js"(){init_acyclic(),init_layout(),init_normalize(),init_rank()}});function write(g2){var json3={options:{directed:g2.isDirected(),multigraph:g2.isMultigraph(),compound:g2.isCompound()},nodes:writeNodes(g2),edges:writeEdges(g2)};return isUndefined_default(g2.graph())||(json3.value=clone_default2(g2.graph())),json3}function writeNodes(g2){return map_default(g2.nodes(),function(v3){var nodeValue=g2.node(v3),parent4=g2.parent(v3),node2={v:v3};return isUndefined_default(nodeValue)||(node2.value=nodeValue),isUndefined_default(parent4)||(node2.parent=parent4),node2})}function writeEdges(g2){return map_default(g2.edges(),function(e3){var edgeValue=g2.edge(e3),edge={v:e3.v,w:e3.w};return isUndefined_default(e3.name)||(edge.name=e3.name),isUndefined_default(edgeValue)||(edge.value=edgeValue),edge})}var clusterDb,descendants,parents,clear6,isDescendant2,edgeInCluster,copy2,extractDescendants,findCommonEdges,findNonClusterChild,getAnchorId,adjustClustersAndEdges,extractor,sorter,sortNodesByHierarchy,recursiveRender,render3,init_json=__esm({"../../node_modules/.pnpm/dagre-d3-es@7.0.11/node_modules/dagre-d3-es/src/graphlib/json.js"(){init_lodash(),init_graph(),__name(write,"write"),__name(writeNodes,"writeNodes"),__name(writeEdges,"writeEdges")}}),init_mermaid_graphlib=__esm({"src/rendering-util/layout-algorithms/dagre/mermaid-graphlib.js"(){init_logger(),init_graphlib(),init_json(),clusterDb=new Map,descendants=new Map,parents=new Map,clear6=__name(()=>{descendants.clear(),parents.clear(),clusterDb.clear()},"clear"),isDescendant2=__name((id30,ancestorId)=>{const ancestorDescendants=descendants.get(ancestorId)||[];return log.trace("In isDescendant",ancestorId," ",id30," = ",ancestorDescendants.includes(id30)),ancestorDescendants.includes(id30)},"isDescendant"),edgeInCluster=__name((edge,clusterId)=>{const clusterDescendants=descendants.get(clusterId)||[];return log.info("Descendants of ",clusterId," is ",clusterDescendants),log.info("Edge is ",edge),edge.v!==clusterId&&edge.w!==clusterId&&(clusterDescendants?clusterDescendants.includes(edge.v)||isDescendant2(edge.v,clusterId)||isDescendant2(edge.w,clusterId)||clusterDescendants.includes(edge.w):(log.debug("Tilt, ",clusterId,",not in descendants"),!1))},"edgeInCluster"),copy2=__name((clusterId,graph,newGraph,rootId)=>{log.warn("Copying children of ",clusterId,"root",rootId,"data",graph.node(clusterId),rootId);const nodes5=graph.children(clusterId)||[];clusterId!==rootId&&nodes5.push(clusterId),log.warn("Copying (nodes) clusterId",clusterId,"nodes",nodes5),nodes5.forEach(node2=>{if(graph.children(node2).length>0)copy2(node2,graph,newGraph,rootId);else{const data5=graph.node(node2);log.info("cp ",node2," to ",rootId," with parent ",clusterId),newGraph.setNode(node2,data5),rootId!==graph.parent(node2)&&(log.warn("Setting parent",node2,graph.parent(node2)),newGraph.setParent(node2,graph.parent(node2))),clusterId!==rootId&&node2!==clusterId?(log.debug("Setting parent",node2,clusterId),newGraph.setParent(node2,clusterId)):(log.info("In copy ",clusterId,"root",rootId,"data",graph.node(clusterId),rootId),log.debug("Not Setting parent for node=",node2,"cluster!==rootId",clusterId!==rootId,"node!==clusterId",node2!==clusterId));const edges3=graph.edges(node2);log.debug("Copying Edges",edges3),edges3.forEach(edge=>{log.info("Edge",edge);const data6=graph.edge(edge.v,edge.w,edge.name);log.info("Edge data",data6,rootId);try{edgeInCluster(edge,rootId)?(log.info("Copying as ",edge.v,edge.w,data6,edge.name),newGraph.setEdge(edge.v,edge.w,data6,edge.name),log.info("newGraph edges ",newGraph.edges(),newGraph.edge(newGraph.edges()[0]))):log.info("Skipping copy of edge ",edge.v,"--\x3e",edge.w," rootId: ",rootId," clusterId:",clusterId)}catch(e3){log.error(e3)}})}log.debug("Removing node",node2),graph.removeNode(node2)})},"copy"),extractDescendants=__name((id30,graph)=>{const children2=graph.children(id30);let res=[...children2];for(const child of children2)parents.set(child,id30),res=[...res,...extractDescendants(child,graph)];return res},"extractDescendants"),findCommonEdges=__name((graph,id1,id210)=>{const edges1=graph.edges().filter(edge=>edge.v===id1||edge.w===id1),edges22=graph.edges().filter(edge=>edge.v===id210||edge.w===id210),edges1Prim=edges1.map(edge=>({v:edge.v===id1?id210:edge.v,w:edge.w===id1?id1:edge.w})),edges2Prim=edges22.map(edge=>({v:edge.v,w:edge.w}));return edges1Prim.filter(edgeIn1=>edges2Prim.some(edge=>edgeIn1.v===edge.v&&edgeIn1.w===edge.w))},"findCommonEdges"),findNonClusterChild=__name((id30,graph,clusterId)=>{const children2=graph.children(id30);if(log.trace("Searching children of id ",id30,children2),children2.length<1)return id30;let reserve;for(const child of children2){const _id=findNonClusterChild(child,graph,clusterId),commonEdges=findCommonEdges(graph,clusterId,_id);if(_id){if(!(commonEdges.length>0))return _id;reserve=_id}}return reserve},"findNonClusterChild"),getAnchorId=__name(id30=>clusterDb.has(id30)&&clusterDb.get(id30).externalConnections&&clusterDb.has(id30)?clusterDb.get(id30).id:id30,"getAnchorId"),adjustClustersAndEdges=__name((graph,depth)=>{if(!graph||depth>10)log.debug("Opting out, no graph ");else{log.debug("Opting in, graph "),graph.nodes().forEach(function(id30){graph.children(id30).length>0&&(log.warn("Cluster identified",id30," Replacement id in edges: ",findNonClusterChild(id30,graph,id30)),descendants.set(id30,extractDescendants(id30,graph)),clusterDb.set(id30,{id:findNonClusterChild(id30,graph,id30),clusterData:graph.node(id30)}))}),graph.nodes().forEach(function(id30){const children2=graph.children(id30),edges3=graph.edges();children2.length>0?(log.debug("Cluster identified",id30,descendants),edges3.forEach(edge=>{isDescendant2(edge.v,id30)^isDescendant2(edge.w,id30)&&(log.warn("Edge: ",edge," leaves cluster ",id30),log.warn("Descendants of XXX ",id30,": ",descendants.get(id30)),clusterDb.get(id30).externalConnections=!0)})):log.debug("Not a cluster ",id30,descendants)});for(let id30 of clusterDb.keys()){const nonClusterChild=clusterDb.get(id30).id,parent4=graph.parent(nonClusterChild);parent4!==id30&&clusterDb.has(parent4)&&!clusterDb.get(parent4).externalConnections&&(clusterDb.get(id30).id=parent4)}graph.edges().forEach(function(e3){const edge=graph.edge(e3);log.warn("Edge "+e3.v+" -> "+e3.w+": "+JSON.stringify(e3)),log.warn("Edge "+e3.v+" -> "+e3.w+": "+JSON.stringify(graph.edge(e3)));let v3=e3.v,w4=e3.w;if(log.warn("Fix XXX",clusterDb,"ids:",e3.v,e3.w,"Translating: ",clusterDb.get(e3.v)," --- ",clusterDb.get(e3.w)),clusterDb.get(e3.v)||clusterDb.get(e3.w)){if(log.warn("Fixing and trying - removing XXX",e3.v,e3.w,e3.name),v3=getAnchorId(e3.v),w4=getAnchorId(e3.w),graph.removeEdge(e3.v,e3.w,e3.name),v3!==e3.v){const parent4=graph.parent(v3);clusterDb.get(parent4).externalConnections=!0,edge.fromCluster=e3.v}if(w4!==e3.w){const parent4=graph.parent(w4);clusterDb.get(parent4).externalConnections=!0,edge.toCluster=e3.w}log.warn("Fix Replacing with XXX",v3,w4,e3.name),graph.setEdge(v3,w4,edge,e3.name)}}),log.warn("Adjusted Graph",write(graph)),extractor(graph,0),log.trace(clusterDb)}},"adjustClustersAndEdges"),extractor=__name((graph,depth)=>{if(log.warn("extractor - ",depth,write(graph),graph.children("D")),depth>10)return void log.error("Bailing out");let nodes5=graph.nodes(),hasChildren=!1;for(const node2 of nodes5){const children2=graph.children(node2);hasChildren=hasChildren||children2.length>0}if(hasChildren){log.debug("Nodes = ",nodes5,depth);for(const node2 of nodes5)if(log.debug("Extracting node",node2,clusterDb,clusterDb.has(node2)&&!clusterDb.get(node2).externalConnections,!graph.parent(node2),graph.node(node2),graph.children("D")," Depth ",depth),clusterDb.has(node2))if(!clusterDb.get(node2).externalConnections&&graph.children(node2)&&graph.children(node2).length>0){log.warn("Cluster without external connections, without a parent and with children",node2,depth);let dir2="TB"===graph.graph().rankdir?"LR":"TB";clusterDb.get(node2)?.clusterData?.dir&&(dir2=clusterDb.get(node2).clusterData.dir,log.warn("Fixing dir",clusterDb.get(node2).clusterData.dir,dir2));const clusterGraph=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:dir2,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});log.warn("Old graph before copy",write(graph)),copy2(node2,graph,clusterGraph,node2),graph.setNode(node2,{clusterNode:!0,id:node2,clusterData:clusterDb.get(node2).clusterData,label:clusterDb.get(node2).label,graph:clusterGraph}),log.warn("New graph after copy node: (",node2,")",write(clusterGraph)),log.debug("Old graph after copy",write(graph))}else log.warn("Cluster ** ",node2," **not meeting the criteria !externalConnections:",!clusterDb.get(node2).externalConnections," no parent: ",!graph.parent(node2)," children ",graph.children(node2)&&graph.children(node2).length>0,graph.children("D"),depth),log.debug(clusterDb);else log.debug("Not a cluster",node2,depth);nodes5=graph.nodes(),log.warn("New list of nodes",nodes5);for(const node2 of nodes5){const data5=graph.node(node2);log.warn(" Now next level",node2,data5),data5?.clusterNode&&extractor(data5.graph,depth+1)}}else log.debug("Done, no node has children",graph.nodes())},"extractor"),sorter=__name((graph,nodes5)=>{if(0===nodes5.length)return[];let result=Object.assign([],nodes5);return nodes5.forEach(node2=>{const children2=graph.children(node2),sorted=sorter(graph,children2);result=[...result,...sorted]}),result},"sorter"),sortNodesByHierarchy=__name(graph=>sorter(graph,graph.children()),"sortNodesByHierarchy")}}),dagre_exports={};__export(dagre_exports,{render:()=>render3});var _window,navigator2,typeofstr,typeofobj,typeoffn,typeofhtmlele,instanceStr,string,fn$6,array2,plainObject,object,number$1,integer,htmlElement,elementOrCollection,element,collection,core2,stylesheet,event,emptyString,domElement,boundingBox,promise,ms,memoize2,camel2dash,dash2camel,prependCamel,capitalize,endsWith,number6,rgba3,rgbaNoBackRefs,hsla2,hslaNoBackRefs,ascending3,descending2,extend4,hex2tuple,hsl2tuple,rgb2tuple,colorname2tuple,color2tuple,colors,setMap,getMap,commonjsGlobal,isObject_12,hasRequiredIsObject,_freeGlobal,hasRequired_freeGlobal,_root,hasRequired_root,now_1,hasRequiredNow,_trimmedEndIndex,hasRequired_trimmedEndIndex,_baseTrim,hasRequired_baseTrim,_Symbol,hasRequired_Symbol,_getRawTag,hasRequired_getRawTag,_objectToString,hasRequired_objectToString,_baseGetTag,hasRequired_baseGetTag,isObjectLike_1,hasRequiredIsObjectLike,isSymbol_1,hasRequiredIsSymbol,toNumber_1,hasRequiredToNumber,debounce_1,hasRequiredDebounce,debounceExports,debounce,performance$1,pnow,raf,requestAnimationFrame2,performanceNow,hashIterableInts,hashInt,hashIntAlt,combineHashes,combineHashesArray,hashArrays,hashIntsArray,hashString,hashStrings,hashStringsArray,movePointByBoxAspect,warningsEnabled,warnSupported,traceSupported,MAX_INT$1,trueify,falsify,zeroify,noop$1,error,warnings,warn,clone3,copy3,copyArray2,uuid,_staticEmptyObject,staticEmptyObject,defaults$g,removeFromArray,clearArray,push,getPrefixedProperty,setPrefixedProperty,ObjectMap,Map$1,ObjectSet,Set$1,Element,defineSearch,elesfn$v,heap$2,heap$1,hasRequiredHeap$1,heap,hasRequiredHeap,heapExports,Heap,dijkstraDefaults,elesfn$u,elesfn$t,aStarDefaults,elesfn$s,floydWarshallDefaults,elesfn$r,bellmanFordDefaults,elesfn$q,sqrt2,collapse,contractUntil,elesfn$p,_Math$hypot,copyPosition,modelToRenderedPosition$1,renderedToModelPosition,array2point,min5,max5,mean,median,deg2rad,getAngleFromDisp,log22,signum,dist,sqdist,inPlaceSumNormalize,qbezierAt,qbezierPtAt,lineAt,bound,makeBoundingBox,copyBoundingBox,clearBoundingBox,updateBoundingBox,expandBoundingBoxByPoint,expandBoundingBox,expandBoundingBoxSides,assignBoundingBox,boundingBoxesIntersect,inBoundingBox,pointInBoundingBox,boundingBoxInBoundingBox,hypot,roundRectangleIntersectLine,inLineVicinity,inBezierVicinity,solveQuadratic,solveCubic,sqdistToQuadraticBezier,sqdistToFiniteLine,pointInsidePolygonPoints,pointInsidePolygon,pointInsideRoundPolygon,joinLines,expandPolygon,intersectLineEllipse,checkInEllipse,intersectLineCircle,midOfThree,finiteLinesIntersect,transformPoints,polygonIntersectLine,roundPolygonIntersectLine,shortenIntersection,generateUnitNgonPointsFitToSquare,fitPolygonToSquare,generateUnitNgonPoints,getRoundRectangleRadius,getRoundPolygonRadius,getCutRectangleCornerLength,bezierPtsToQuadCoeff,getBarrelCurveConstants,pageRankDefaults,elesfn$o,defaults$f,elesfn$n,defaults$e,elesfn$m,defaults$d,elesfn$l,defaults$c,setOptions$3,getSimilarity$1,addLoops,normalize2,mmult,expand,inflate,hasConverged,assign$2,isDuplicate,removeDuplicates,markovClustering,markovClustering$1,identity$1,absDiff,addAbsDiff,addSquaredDiff,sqrt3,maxAbsDiff,getDistance,distances,defaults$b,setOptions$2,getDist,randomCentroids,classify,buildCluster,haveValuesConverged,haveMatricesConverged,seenBefore,randomMedoids,findCost,kMeans,kMedoids,updateCentroids,updateMembership,assign$1,fuzzyCMeans,kClustering,defaults$a,linkageAliases,setOptions$1,mergeClosest,_getAllChildren,_buildDendrogram,_buildClustersFromTree,hierarchicalClustering,hierarchicalClustering$1,defaults$9,setOptions4,getSimilarity2,getPreference,findExemplars,assignClusters,assign4,affinityPropagation,affinityPropagation$1,hierholzerDefaults,elesfn$k,hopcroftTarjanBiconnected,tarjanStronglyConnected,elesfn$j,_api,deliver,execute,execute_handlers,resolver,_resolve,Promise$1,Animation,anifn,define$3,isArray_1,hasRequiredIsArray,_isKey,hasRequired_isKey,isFunction_1,hasRequiredIsFunction,_coreJsData,hasRequired_coreJsData,_isMasked,hasRequired_isMasked,_toSource,hasRequired_toSource,_baseIsNative,hasRequired_baseIsNative,_getValue,hasRequired_getValue,_getNative,hasRequired_getNative,_nativeCreate,hasRequired_nativeCreate,_hashClear,hasRequired_hashClear,_hashDelete,hasRequired_hashDelete,_hashGet,hasRequired_hashGet,_hashHas,hasRequired_hashHas,_hashSet,hasRequired_hashSet,_Hash,hasRequired_Hash,_listCacheClear,hasRequired_listCacheClear,eq_1,hasRequiredEq,_assocIndexOf,hasRequired_assocIndexOf,_listCacheDelete,hasRequired_listCacheDelete,_listCacheGet,hasRequired_listCacheGet,_listCacheHas,hasRequired_listCacheHas,_listCacheSet,hasRequired_listCacheSet,_ListCache,hasRequired_ListCache,_Map,hasRequired_Map,_mapCacheClear,hasRequired_mapCacheClear,_isKeyable,hasRequired_isKeyable,_getMapData,hasRequired_getMapData,_mapCacheDelete,hasRequired_mapCacheDelete,_mapCacheGet,hasRequired_mapCacheGet,_mapCacheHas,hasRequired_mapCacheHas,_mapCacheSet,hasRequired_mapCacheSet,_MapCache,hasRequired_MapCache,memoize_1,hasRequiredMemoize,_memoizeCapped,hasRequired_memoizeCapped,_stringToPath,hasRequired_stringToPath,_arrayMap,hasRequired_arrayMap,_baseToString,hasRequired_baseToString,toString_1,hasRequiredToString,_castPath,hasRequired_castPath,_toKey,hasRequired_toKey,_baseGet,hasRequired_baseGet,get_1,hasRequiredGet,getExports,get4,_defineProperty,hasRequired_defineProperty,_baseAssignValue,hasRequired_baseAssignValue,_assignValue,hasRequired_assignValue,_isIndex,hasRequired_isIndex,_baseSet,hasRequired_baseSet,set_1,hasRequiredSet,setExports,set4,_copyArray,hasRequired_copyArray,toPath_1,hasRequiredToPath,toPathExports,toPath,define$2,define$1,define2,elesfn$i,elesfn$h,tokens,newQuery,Type2,stateSelectors,lookup,stateSelectorMatches,stateSelectorRegex,cleanMetaChars,replaceLastQuery,exprs,consumeExpr,consumeWhitespace,parse,toString3,parse$1,valCmp,boolCmp,existCmp,data$1,meta,match,matches$1,filter3,matching,Selector,selfn,elesfn$g,cache,elesfn$f,fn$5,elesfn$e,data3,elesfn$d,fn$4,elesfn$c,beforePositionSet,positionDef,position2,fn$3,elesfn$b,noninf,updateBounds,updateBoundsFromBox,prefixedProperty,updateBoundsFromArrow,updateBoundsFromLabel,updateBoundsFromOutline,updateBoundsFromMiter,updateBoundsFromMiterBorder,boundingBoxImpl,getKey,getBoundingBoxPosKey,cachedBoundingBoxImpl,defBbOpts,defBbOptsKey,filledBbOpts,bounds,fn$2,elesfn$a,defineDimFns,widthHeight,ifEdge,ifEdgeRenderedPosition,ifEdgeRenderedPositions,pts,renderedName,edgePoints,dimensions,Event,eventRegex,defaults$8,defaultsKeys,emptyOpts,p2,forEachEvent,makeEventObj,forEachEventObj,emitterOptions$1,argSelector$1,elesfn$9,elesfn$8,fn$1,elesfn$7,zIndexSort,elesfn$6,defineSymbolIterator,getLayoutDimensionOptions,elesfn$5,elesfn$4,eleTakesUpSpace,eleInteractive,parentInteractive,eleVisible,edgeVisibleViaNode,elesfn$3,elesfn$2,defineDagExtremity,defineDagOneHop,defineDagAllHops,Collection,elesfn$1,corefn$9,generateSpringRK4,cubicBezier,easings,corefn$8,emitterOptions,argSelector2,elesfn,corefn$7,corefn$6,corefn$5,rendererDefaults,corefn$4,corefn$3,styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1,_Style,styfn,corefn$2,corefn$1,fn2,Core,corefn,defaults$7,deprecatedOptionDefaults,getInfo,setInfo,defaults$6,defaults$5,DEBUG,defaults$4,createLayoutInfo,findLCA,_findLCA_aux,randomizePositions,getScaleInBoundsFn,refreshPositions,step,calculateNodeForces,randomDistance,nodeRepulsion2,nodesOverlap,findClippingPoint,calculateEdgeForces,calculateGravityForces,propagateForces,updatePositions,limitForce,_updateAncestryBoundaries,separateComponents,defaults$3,defaults$2,defaults$1,defaults3,layout4,noop4,throwImgErr,BRp$f,BRp$e,BRp$d,x3,y4,v1,v22,sinA,sinA90,radDirection,drawDirection,angle,halfAngle,cRadius,lenOut,radius,limit,startX,startY,stopX,stopY,lastPoint,asVec,invertVec,calcCornerArc,AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L,BRp$c,BRp$b,BRp$a,BRp$9,lineAngleFromDelta,lineAngle,bezierAngle,BRp$8,warnedCutRect,BRp$7,BRp$6,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1,beforeRenderCallbacks,BR,BRp,fullFpsTime,defs,ElementTextureCacheLookup,maxZoom$1,getTxrReasons,initDefaults,ElementTextureCache,ETCp,LayeredTextureCache,LTCp,layerIdPool,MAX_INT,CRp$b,impl,CRp$a,getZeroRotation,getLabelRotation,getSourceLabelRotation,getTargetLabelRotation,getOpacity,getTextOpacity,CRp$9,drawEdgeOverlayUnderlay,CRp$8,CRp$7,CRp$6,drawNodeOverlayUnderlay,CRp$5,fpsHeight,ARRAY_TYPE,Atlas,AtlasCollection,AtlasManager,AtlasBatchManager,RENDER_TARGET,TEX_PICKING_MODE,ElementDrawingWebGL,CRp$4,getStyleKeysForLabel,getBoundingBoxForLabel,CRp$3,sin0,cos0,sin2,cos2,ellipseStepSize,i2,CRp$2,CRp$1,CR,CRp,pathsImpld,incExts,extensions,modules,extension2,_Stylesheet,sheetfn,cytoscape2,init_dagre2=__esm({"src/rendering-util/layout-algorithms/dagre/index.js"(){init_dagre(),init_json(),init_graphlib(),init_markers(),init_util(),init_mermaid_graphlib(),init_nodes2(),init_clusters(),init_edges(),init_logger(),init_subGraphTitleMargins(),init_diagramAPI(),recursiveRender=__name(async(_elem,graph,diagramType,id30,parentCluster,siteConfig2)=>{log.warn("Graph in recursive render:XAX",write(graph),parentCluster);const dir2=graph.graph().rankdir;log.trace("Dir in recursive render - dir:",dir2);const elem=_elem.insert("g").attr("class","root");graph.nodes()?log.info("Recursive render XXX",graph.nodes()):log.info("No nodes found for",graph),graph.edges().length>0&&log.info("Recursive edges",graph.edge(graph.edges()[0]));const clusters=elem.insert("g").attr("class","clusters"),edgePaths=elem.insert("g").attr("class","edgePaths"),edgeLabels3=elem.insert("g").attr("class","edgeLabels"),nodes5=elem.insert("g").attr("class","nodes");await Promise.all(graph.nodes().map(async function(v3){const node2=graph.node(v3);if(void 0!==parentCluster){const data5=JSON.parse(JSON.stringify(parentCluster.clusterData));log.trace("Setting data for parent cluster XXX\n Node.id = ",v3,"\n data=",data5.height,"\nParent cluster",parentCluster.height),graph.setNode(parentCluster.id,data5),graph.parent(v3)||(log.trace("Setting parent",v3,parentCluster.id),graph.setParent(v3,parentCluster.id,data5))}if(log.info("(Insert) Node XXX"+v3+": "+JSON.stringify(graph.node(v3))),node2?.clusterNode){log.info("Cluster identified XBX",v3,node2.width,graph.node(v3));const{ranksep:ranksep,nodesep:nodesep}=graph.graph();node2.graph.setGraph({...node2.graph.graph(),ranksep:ranksep+25,nodesep:nodesep});const o2=await recursiveRender(nodes5,node2.graph,diagramType,id30,graph.node(v3),siteConfig2),newEl=o2.elem;updateNodeBounds(node2,newEl),node2.diff=o2.diff||0,log.info("New compound node after recursive render XAX",v3,"width",node2.width,"height",node2.height),setNodeElem(newEl,node2)}else graph.children(v3).length>0?(log.trace("Cluster - the non recursive path XBX",v3,node2.id,node2,node2.width,"Graph:",graph),log.trace(findNonClusterChild(node2.id,graph)),clusterDb.set(node2.id,{id:findNonClusterChild(node2.id,graph),node:node2})):(log.trace("Node - the non recursive path XAX",v3,nodes5,graph.node(v3),dir2),await insertNode(nodes5,graph.node(v3),{config:siteConfig2,dir:dir2}))}));const processEdges=__name(async()=>{const edgePromises=graph.edges().map(async function(e3){const edge=graph.edge(e3.v,e3.w,e3.name);log.info("Edge "+e3.v+" -> "+e3.w+": "+JSON.stringify(e3)),log.info("Edge "+e3.v+" -> "+e3.w+": ",e3," ",JSON.stringify(graph.edge(e3))),log.info("Fix",clusterDb,"ids:",e3.v,e3.w,"Translating: ",clusterDb.get(e3.v),clusterDb.get(e3.w)),await insertEdgeLabel(edgeLabels3,edge)});await Promise.all(edgePromises)},"processEdges");await processEdges(),log.info("Graph before layout:",JSON.stringify(write(graph))),log.info("############################################# XXX"),log.info("###                Layout                 ### XXX"),log.info("############################################# XXX"),layout(graph),log.info("Graph after layout:",JSON.stringify(write(graph)));let diff2=0,{subGraphTitleTotalMargin:subGraphTitleTotalMargin}=getSubGraphTitleMargins(siteConfig2);return await Promise.all(sortNodesByHierarchy(graph).map(async function(v3){const node2=graph.node(v3);if(log.info("Position XBX => "+v3+": ("+node2.x,","+node2.y,") width: ",node2.width," height: ",node2.height),node2?.clusterNode)node2.y+=subGraphTitleTotalMargin,log.info("A tainted cluster node XBX1",v3,node2.id,node2.width,node2.height,node2.x,node2.y,graph.parent(v3)),clusterDb.get(node2.id).node=node2,positionNode(node2);else if(graph.children(v3).length>0){log.info("A pure cluster node XBX1",v3,node2.id,node2.x,node2.y,node2.width,node2.height,graph.parent(v3)),node2.height+=subGraphTitleTotalMargin,graph.node(node2.parentId);const halfPadding=node2?.padding/2||0,labelHeight=node2?.labelBBox?.height||0,offsetY=labelHeight-halfPadding||0;log.debug("OffsetY",offsetY,"labelHeight",labelHeight,"halfPadding",halfPadding),await insertCluster(clusters,node2),clusterDb.get(node2.id).node=node2}else{const parent4=graph.node(node2.parentId);node2.y+=subGraphTitleTotalMargin/2,log.info("A regular node XBX1 - using the padding",node2.id,"parent",node2.parentId,node2.width,node2.height,node2.x,node2.y,"offsetY",node2.offsetY,"parent",parent4,parent4?.offsetY,node2),positionNode(node2)}})),graph.edges().forEach(function(e3){const edge=graph.edge(e3);log.info("Edge "+e3.v+" -> "+e3.w+": "+JSON.stringify(edge),edge),edge.points.forEach(point8=>point8.y+=subGraphTitleTotalMargin/2);const startNode=graph.node(e3.v);var endNode=graph.node(e3.w);const paths=insertEdge(edgePaths,edge,clusterDb,diagramType,startNode,endNode,id30);positionEdgeLabel(edge,paths)}),graph.nodes().forEach(function(v3){const n2=graph.node(v3);log.info(v3,n2.type,n2.diff),n2.isGroup&&(diff2=n2.diff)}),log.warn("Returning from recursive render XAX",elem,diff2),{elem:elem,diff:diff2}},"recursiveRender"),render3=__name(async(data4Layout,svg2)=>{const graph=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:data4Layout.direction,nodesep:data4Layout.config?.nodeSpacing||data4Layout.config?.flowchart?.nodeSpacing||data4Layout.nodeSpacing,ranksep:data4Layout.config?.rankSpacing||data4Layout.config?.flowchart?.rankSpacing||data4Layout.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),element3=svg2.select("g");markers_default(element3,data4Layout.markers,data4Layout.type,data4Layout.diagramId),clear5(),clear4(),clear3(),clear6(),data4Layout.nodes.forEach(node2=>{graph.setNode(node2.id,{...node2}),node2.parentId&&graph.setParent(node2.id,node2.parentId)}),log.debug("Edges:",data4Layout.edges),data4Layout.edges.forEach(edge=>{if(edge.start===edge.end){const nodeId=edge.start,specialId1=nodeId+"---"+nodeId+"---1",specialId2=nodeId+"---"+nodeId+"---2",node2=graph.node(nodeId);graph.setNode(specialId1,{domId:specialId1,id:specialId1,parentId:node2.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),graph.setParent(specialId1,node2.parentId),graph.setNode(specialId2,{domId:specialId2,id:specialId2,parentId:node2.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),graph.setParent(specialId2,node2.parentId);const edge1=structuredClone(edge),edgeMid=structuredClone(edge),edge2=structuredClone(edge);edge1.label="",edge1.arrowTypeEnd="none",edge1.id=nodeId+"-cyclic-special-1",edgeMid.arrowTypeStart="none",edgeMid.arrowTypeEnd="none",edgeMid.id=nodeId+"-cyclic-special-mid",edge2.label="",node2.isGroup&&(edge1.fromCluster=nodeId,edge2.toCluster=nodeId),edge2.id=nodeId+"-cyclic-special-2",edge2.arrowTypeStart="none",graph.setEdge(nodeId,specialId1,edge1,nodeId+"-cyclic-special-0"),graph.setEdge(specialId1,specialId2,edgeMid,nodeId+"-cyclic-special-1"),graph.setEdge(specialId2,nodeId,edge2,nodeId+"-cyc<lic-special-2")}else graph.setEdge(edge.start,edge.end,{...edge},edge.id)}),log.warn("Graph at first:",JSON.stringify(write(graph))),adjustClustersAndEdges(graph),log.warn("Graph after XAX:",JSON.stringify(write(graph)));const siteConfig2=getConfig2();await recursiveRender(element3,graph,data4Layout.type,data4Layout.diagramId,void 0,siteConfig2)},"render")}});function _arrayLikeToArray(r2,a2){(null==a2||a2>r2.length)&&(a2=r2.length);for(var e3=0,n2=Array(a2);e3<a2;e3++)n2[e3]=r2[e3];return n2}function _arrayWithHoles(r2){if(Array.isArray(r2))return r2}function _arrayWithoutHoles(r2){if(Array.isArray(r2))return _arrayLikeToArray(r2)}function _classCallCheck(a2,n2){if(!(a2 instanceof n2))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e3,r2){for(var t4=0;t4<r2.length;t4++){var o2=r2[t4];o2.enumerable=o2.enumerable||!1,o2.configurable=!0,"value"in o2&&(o2.writable=!0),Object.defineProperty(e3,_toPropertyKey(o2.key),o2)}}function _createClass(e3,r2,t4){return r2&&_defineProperties(e3.prototype,r2),Object.defineProperty(e3,"prototype",{writable:!1}),e3}function _createForOfIteratorHelper(r2,e3){var t4="undefined"!=typeof Symbol&&r2[Symbol.iterator]||r2["@@iterator"];if(!t4){if(Array.isArray(r2)||(t4=_unsupportedIterableToArray(r2))||e3){t4&&(r2=t4);var n2=0,F3=__name(function(){},"F");return{s:F3,n:__name(function(){return n2>=r2.length?{done:!0}:{done:!1,value:r2[n2++]}},"n"),e:__name(function(r3){throw r3},"e"),f:F3}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o2,a2=!0,u2=!1;return{s:__name(function(){t4=t4.call(r2)},"s"),n:__name(function(){var r3=t4.next();return a2=r3.done,r3},"n"),e:__name(function(r3){u2=!0,o2=r3},"e"),f:__name(function(){try{a2||null==t4.return||t4.return()}finally{if(u2)throw o2}},"f")}}function _defineProperty$1(e3,r2,t4){return(r2=_toPropertyKey(r2))in e3?Object.defineProperty(e3,r2,{value:t4,enumerable:!0,configurable:!0,writable:!0}):e3[r2]=t4,e3}function _iterableToArray(r2){if("undefined"!=typeof Symbol&&null!=r2[Symbol.iterator]||null!=r2["@@iterator"])return Array.from(r2)}function _iterableToArrayLimit(r2,l4){var t4=null==r2?null:"undefined"!=typeof Symbol&&r2[Symbol.iterator]||r2["@@iterator"];if(null!=t4){var e3,n2,i2,u2,a2=[],f2=!0,o2=!1;try{if(i2=(t4=t4.call(r2)).next,0===l4){if(Object(t4)!==t4)return;f2=!1}else for(;!(f2=(e3=i2.call(t4)).done)&&(a2.push(e3.value),a2.length!==l4);f2=!0);}catch(r3){o2=!0,n2=r3}finally{try{if(!f2&&null!=t4.return&&(u2=t4.return(),Object(u2)!==u2))return}finally{if(o2)throw n2}}return a2}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(r2,e3){return _arrayWithHoles(r2)||_iterableToArrayLimit(r2,e3)||_unsupportedIterableToArray(r2,e3)||_nonIterableRest()}function _toConsumableArray(r2){return _arrayWithoutHoles(r2)||_iterableToArray(r2)||_unsupportedIterableToArray(r2)||_nonIterableSpread()}function _toPrimitive(t4,r2){if("object"!=typeof t4||!t4)return t4;var e3=t4[Symbol.toPrimitive];if(void 0!==e3){var i2=e3.call(t4,r2);if("object"!=typeof i2)return i2;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t4)}function _toPropertyKey(t4){var i2=_toPrimitive(t4,"string");return"symbol"==typeof i2?i2:i2+""}function _typeof(o2){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o3){return typeof o3}:function(o3){return o3&&"function"==typeof Symbol&&o3.constructor===Symbol&&o3!==Symbol.prototype?"symbol":typeof o3})(o2)}function _unsupportedIterableToArray(r2,a2){if(r2){if("string"==typeof r2)return _arrayLikeToArray(r2,a2);var t4={}.toString.call(r2).slice(8,-1);return"Object"===t4&&r2.constructor&&(t4=r2.constructor.name),"Map"===t4||"Set"===t4?Array.from(r2):"Arguments"===t4||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t4)?_arrayLikeToArray(r2,a2):void 0}}function getDefaultExportFromCjs(x5){return x5&&x5.__esModule&&Object.prototype.hasOwnProperty.call(x5,"default")?x5.default:x5}function requireIsObject(){if(hasRequiredIsObject)return isObject_12;function isObject3(value2){var type3=typeof value2;return null!=value2&&("object"==type3||"function"==type3)}return hasRequiredIsObject=1,__name(isObject3,"isObject"),isObject_12=isObject3}function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var freeGlobal2="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=freeGlobal2}function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var freeGlobal2=require_freeGlobal(),freeSelf2="object"==typeof self&&self&&self.Object===Object&&self,root3=freeGlobal2||freeSelf2||Function("return this")();return _root=root3}function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var root3=require_root();return now_1=__name(function(){return root3.Date.now()},"now")}function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var reWhitespace2=/\s/;function trimmedEndIndex2(string3){for(var index=string3.length;index--&&reWhitespace2.test(string3.charAt(index)););return index}return __name(trimmedEndIndex2,"trimmedEndIndex"),_trimmedEndIndex=trimmedEndIndex2}function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var trimmedEndIndex2=require_trimmedEndIndex(),reTrimStart2=/^\s+/;function baseTrim2(string3){return string3?string3.slice(0,trimmedEndIndex2(string3)+1).replace(reTrimStart2,""):string3}return __name(baseTrim2,"baseTrim"),_baseTrim=baseTrim2}function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var Symbol3=require_root().Symbol;return _Symbol=Symbol3}function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var Symbol3=require_Symbol(),objectProto22=Object.prototype,hasOwnProperty19=objectProto22.hasOwnProperty,nativeObjectToString3=objectProto22.toString,symToStringTag3=Symbol3?Symbol3.toStringTag:void 0;function getRawTag2(value2){var isOwn=hasOwnProperty19.call(value2,symToStringTag3),tag=value2[symToStringTag3];try{value2[symToStringTag3]=void 0;var unmasked=!0}catch(e3){}var result=nativeObjectToString3.call(value2);return unmasked&&(isOwn?value2[symToStringTag3]=tag:delete value2[symToStringTag3]),result}return __name(getRawTag2,"getRawTag"),_getRawTag=getRawTag2}function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var nativeObjectToString3=Object.prototype.toString;function objectToString2(value2){return nativeObjectToString3.call(value2)}return __name(objectToString2,"objectToString"),_objectToString=objectToString2}function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var Symbol3=require_Symbol(),getRawTag2=require_getRawTag(),objectToString2=require_objectToString(),symToStringTag3=Symbol3?Symbol3.toStringTag:void 0;function baseGetTag2(value2){return null==value2?void 0===value2?"[object Undefined]":"[object Null]":symToStringTag3&&symToStringTag3 in Object(value2)?getRawTag2(value2):objectToString2(value2)}return __name(baseGetTag2,"baseGetTag"),_baseGetTag=baseGetTag2}function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;function isObjectLike2(value2){return null!=value2&&"object"==typeof value2}return hasRequiredIsObjectLike=1,__name(isObjectLike2,"isObjectLike"),isObjectLike_1=isObjectLike2}function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var baseGetTag2=require_baseGetTag(),isObjectLike2=requireIsObjectLike();function isSymbol2(value2){return"symbol"==typeof value2||isObjectLike2(value2)&&"[object Symbol]"==baseGetTag2(value2)}return __name(isSymbol2,"isSymbol"),isSymbol_1=isSymbol2}function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var baseTrim2=require_baseTrim(),isObject3=requireIsObject(),isSymbol2=requireIsSymbol(),reIsBadHex2=/^[-+]0x[0-9a-f]+$/i,reIsBinary2=/^0b[01]+$/i,reIsOctal2=/^0o[0-7]+$/i,freeParseInt2=parseInt;function toNumber2(value2){if("number"==typeof value2)return value2;if(isSymbol2(value2))return NaN;if(isObject3(value2)){var other="function"==typeof value2.valueOf?value2.valueOf():value2;value2=isObject3(other)?other+"":other}if("string"!=typeof value2)return 0===value2?value2:+value2;value2=baseTrim2(value2);var isBinary2=reIsBinary2.test(value2);return isBinary2||reIsOctal2.test(value2)?freeParseInt2(value2.slice(2),isBinary2?2:8):reIsBadHex2.test(value2)?NaN:+value2}return __name(toNumber2,"toNumber"),toNumber_1=toNumber2}function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var isObject3=requireIsObject(),now3=requireNow(),toNumber2=requireToNumber(),nativeMax6=Math.max,nativeMin=Math.min;function debounce2(func,wait,options2){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time4){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time4,result=func.apply(thisArg,args)}function leadingEdge(time4){return lastInvokeTime=time4,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time4):result}function remainingWait(time4){var timeWaiting=wait-(time4-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time4-lastInvokeTime)):timeWaiting}function shouldInvoke(time4){var timeSinceLastCall=time4-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time4-lastInvokeTime>=maxWait}function timerExpired(){var time4=now3();if(shouldInvoke(time4))return trailingEdge(time4);timerId=setTimeout(timerExpired,remainingWait(time4))}function trailingEdge(time4){return timerId=void 0,trailing&&lastArgs?invokeFunc(time4):(lastArgs=lastThis=void 0,result)}function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0}function flush(){return void 0===timerId?result:trailingEdge(now3())}function debounced(){var time4=now3(),isInvoking=shouldInvoke(time4);if(lastArgs=arguments,lastThis=this,lastCallTime=time4,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber2(wait)||0,isObject3(options2)&&(leading=!!options2.leading,maxWait=(maxing="maxWait"in options2)?nativeMax6(toNumber2(options2.maxWait)||0,wait):maxWait,trailing="trailing"in options2?!!options2.trailing:trailing),__name(invokeFunc,"invokeFunc"),__name(leadingEdge,"leadingEdge"),__name(remainingWait,"remainingWait"),__name(shouldInvoke,"shouldInvoke"),__name(timerExpired,"timerExpired"),__name(trailingEdge,"trailingEdge"),__name(cancel,"cancel"),__name(flush,"flush"),__name(debounced,"debounced"),debounced.cancel=cancel,debounced.flush=flush,debounced}return __name(debounce2,"debounce"),debounce_1=debounce2}function rotatePoint(x5,y6,centerX,centerY,angleDegrees){var angleRadians=angleDegrees*Math.PI/180;return{x:Math.cos(angleRadians)*(x5-centerX)-Math.sin(angleRadians)*(y6-centerY)+centerX,y:Math.sin(angleRadians)*(x5-centerX)+Math.cos(angleRadians)*(y6-centerY)+centerY}}function rotatePosAndSkewByBox(pos,box,angleDegrees){if(0===angleDegrees)return pos;var centerX=(box.x1+box.x2)/2,centerY=(box.y1+box.y2)/2,skewX=box.w/box.h,skewY=1/skewX,rotated=rotatePoint(pos.x,pos.y,centerX,centerY,angleDegrees),skewed=movePointByBoxAspect(rotated.x,rotated.y,centerX,centerY,skewX,skewY);return{x:skewed.x,y:skewed.y}}function requireHeap$1(){return hasRequiredHeap$1||(hasRequiredHeap$1=1,module2=heap$2,function(){var Heap2,defaultCmp,floor,heapify,heappop,heappush,heappushpop,heapreplace,insort,min9,nlargest,nsmallest,updateItem,_siftdown,_siftup;floor=Math.floor,min9=Math.min,defaultCmp=__name(function(x5,y6){return x5<y6?-1:x5>y6?1:0},"defaultCmp"),insort=__name(function(a2,x5,lo,hi,cmp){var mid;if(null==lo&&(lo=0),null==cmp&&(cmp=defaultCmp),lo<0)throw new Error("lo must be non-negative");for(null==hi&&(hi=a2.length);lo<hi;)cmp(x5,a2[mid=floor((lo+hi)/2)])<0?hi=mid:lo=mid+1;return[].splice.apply(a2,[lo,lo-lo].concat(x5)),x5},"insort"),heappush=__name(function(array4,item,cmp){return null==cmp&&(cmp=defaultCmp),array4.push(item),_siftdown(array4,0,array4.length-1,cmp)},"heappush"),heappop=__name(function(array4,cmp){var lastelt,returnitem;return null==cmp&&(cmp=defaultCmp),lastelt=array4.pop(),array4.length?(returnitem=array4[0],array4[0]=lastelt,_siftup(array4,0,cmp)):returnitem=lastelt,returnitem},"heappop"),heapreplace=__name(function(array4,item,cmp){var returnitem;return null==cmp&&(cmp=defaultCmp),returnitem=array4[0],array4[0]=item,_siftup(array4,0,cmp),returnitem},"heapreplace"),heappushpop=__name(function(array4,item,cmp){var _ref;return null==cmp&&(cmp=defaultCmp),array4.length&&cmp(array4[0],item)<0&&(item=(_ref=[array4[0],item])[0],array4[0]=_ref[1],_siftup(array4,0,cmp)),item},"heappushpop"),heapify=__name(function(array4,cmp){var i2,_i,_len,_ref1,_results,_results1;for(null==cmp&&(cmp=defaultCmp),_results=[],_i=0,_len=(_ref1=function(){_results1=[];for(var _j=0,_ref=floor(array4.length/2);0<=_ref?_j<_ref:_j>_ref;0<=_ref?_j++:_j--)_results1.push(_j);return _results1}.apply(this).reverse()).length;_i<_len;_i++)i2=_ref1[_i],_results.push(_siftup(array4,i2,cmp));return _results},"heapify"),updateItem=__name(function(array4,item,cmp){var pos;if(null==cmp&&(cmp=defaultCmp),-1!==(pos=array4.indexOf(item)))return _siftdown(array4,0,pos,cmp),_siftup(array4,pos,cmp)},"updateItem"),nlargest=__name(function(array4,n2,cmp){var elem,result,_i,_len,_ref;if(null==cmp&&(cmp=defaultCmp),!(result=array4.slice(0,n2)).length)return result;for(heapify(result,cmp),_i=0,_len=(_ref=array4.slice(n2)).length;_i<_len;_i++)elem=_ref[_i],heappushpop(result,elem,cmp);return result.sort(cmp).reverse()},"nlargest"),nsmallest=__name(function(array4,n2,cmp){var elem,los,result,_i,_j,_len,_ref,_ref1,_results;if(null==cmp&&(cmp=defaultCmp),10*n2<=array4.length){if(!(result=array4.slice(0,n2).sort(cmp)).length)return result;for(los=result[result.length-1],_i=0,_len=(_ref=array4.slice(n2)).length;_i<_len;_i++)cmp(elem=_ref[_i],los)<0&&(insort(result,elem,0,null,cmp),result.pop(),los=result[result.length-1]);return result}for(heapify(array4,cmp),_results=[],_j=0,_ref1=min9(n2,array4.length);0<=_ref1?_j<_ref1:_j>_ref1;0<=_ref1?++_j:--_j)_results.push(heappop(array4,cmp));return _results},"nsmallest"),_siftdown=__name(function(array4,startpos,pos,cmp){var newitem,parent4,parentpos;for(null==cmp&&(cmp=defaultCmp),newitem=array4[pos];pos>startpos&&cmp(newitem,parent4=array4[parentpos=pos-1>>1])<0;)array4[pos]=parent4,pos=parentpos;return array4[pos]=newitem},"_siftdown"),_siftup=__name(function(array4,pos,cmp){var childpos,endpos,newitem,rightpos,startpos;for(null==cmp&&(cmp=defaultCmp),endpos=array4.length,startpos=pos,newitem=array4[pos],childpos=2*pos+1;childpos<endpos;)(rightpos=childpos+1)<endpos&&!(cmp(array4[childpos],array4[rightpos])<0)&&(childpos=rightpos),array4[pos]=array4[childpos],childpos=2*(pos=childpos)+1;return array4[pos]=newitem,_siftdown(array4,startpos,pos,cmp)},"_siftup"),Heap2=function(){function Heap3(cmp){this.cmp=null!=cmp?cmp:defaultCmp,this.nodes=[]}return Heap3.push=heappush,Heap3.pop=heappop,Heap3.replace=heapreplace,Heap3.pushpop=heappushpop,Heap3.heapify=heapify,Heap3.updateItem=updateItem,Heap3.nlargest=nlargest,Heap3.nsmallest=nsmallest,__name(Heap3,"Heap"),Heap3.prototype.push=function(x5){return heappush(this.nodes,x5,this.cmp)},Heap3.prototype.pop=function(){return heappop(this.nodes,this.cmp)},Heap3.prototype.peek=function(){return this.nodes[0]},Heap3.prototype.contains=function(x5){return-1!==this.nodes.indexOf(x5)},Heap3.prototype.replace=function(x5){return heapreplace(this.nodes,x5,this.cmp)},Heap3.prototype.pushpop=function(x5){return heappushpop(this.nodes,x5,this.cmp)},Heap3.prototype.heapify=function(){return heapify(this.nodes,this.cmp)},Heap3.prototype.updateItem=function(x5){return updateItem(this.nodes,x5,this.cmp)},Heap3.prototype.clear=function(){return this.nodes=[]},Heap3.prototype.empty=function(){return 0===this.nodes.length},Heap3.prototype.size=function(){return this.nodes.length},Heap3.prototype.clone=function(){var heap2;return(heap2=new Heap3).nodes=this.nodes.slice(0),heap2},Heap3.prototype.toArray=function(){return this.nodes.slice(0)},Heap3.prototype.insert=Heap3.prototype.push,Heap3.prototype.top=Heap3.prototype.peek,Heap3.prototype.front=Heap3.prototype.peek,Heap3.prototype.has=Heap3.prototype.contains,Heap3.prototype.copy=Heap3.prototype.clone,Heap3}(),module2.exports=Heap2}.call(heap$1)),heap$2.exports;var module2}function requireHeap(){return hasRequiredHeap?heap:(hasRequiredHeap=1,heap=requireHeap$1())}function inflatePolygon(polygon2,d3){if(polygon2.length<3)throw new Error("Need at least 3 vertices");var add3=__name(function(a2,b3){return{x:a2.x+b3.x,y:a2.y+b3.y}},"add"),sub2=__name(function(a2,b3){return{x:a2.x-b3.x,y:a2.y-b3.y}},"sub"),scale2=__name(function(v3,s2){return{x:v3.x*s2,y:v3.y*s2}},"scale"),cross3=__name(function(u2,v3){return u2.x*v3.y-u2.y*v3.x},"cross"),normalize4=__name(function(v3){var len=hypot(v3.x,v3.y);return 0===len?{x:0,y:0}:{x:v3.x/len,y:v3.y/len}},"normalize"),signedArea=__name(function(pts3){for(var A2=0,i3=0;i3<pts3.length;i3++){var p4=pts3[i3],q4=pts3[(i3+1)%pts3.length];A2+=p4.x*q4.y-q4.x*p4.y}return A2/2},"signedArea"),intersectLines=__name(function(p1,p22,p32,p4){var r2=sub2(p22,p1),s2=sub2(p4,p32),denom=cross3(r2,s2);if(Math.abs(denom)<1e-9)return add3(p1,scale2(r2,.5));var t4=cross3(sub2(p32,p1),s2)/denom;return add3(p1,scale2(r2,t4))},"intersectLines"),pts2=polygon2.map(function(p4){return{x:p4.x,y:p4.y}});signedArea(pts2)<0&&pts2.reverse();for(var n2=pts2.length,normals=[],i2=0;i2<n2;i2++){var p3=pts2[i2],q3=pts2[(i2+1)%n2],edge=sub2(q3,p3),out=normalize4({x:edge.y,y:-edge.x});normals.push(out)}for(var offsetEdges=normals.map(function(nrm,i3){return{p1:add3(pts2[i3],scale2(nrm,d3)),p2:add3(pts2[(i3+1)%n2],scale2(nrm,d3))}}),inflated=[],_i2=0;_i2<n2;_i2++){var prevEdge=offsetEdges[(_i2-1+n2)%n2],currEdge=offsetEdges[_i2],ip=intersectLines(prevEdge.p1,prevEdge.p2,currEdge.p1,currEdge.p2);inflated.push(ip)}return inflated}function miterBox(pts2,centerX,centerY,width3,height2,strokeWidth){var offsetPoints=inflatePolygon(transformPoints(pts2,centerX,centerY,width3,height2),strokeWidth),bb=makeBoundingBox();return offsetPoints.forEach(function(pt){return expandBoundingBoxByPoint(bb,pt.x,pt.y)}),bb}function satPolygonIntersection(poly1,poly2){function getAxes2(polygon2){for(var axes2=[],i2=0;i2<polygon2.length;i2++){var p1=polygon2[i2],p22=polygon2[(i2+1)%polygon2.length],edge={x:p22.x-p1.x,y:p22.y-p1.y},normal={x:-edge.y,y:edge.x},length2=Math.sqrt(normal.x*normal.x+normal.y*normal.y);axes2.push({x:normal.x/length2,y:normal.y/length2})}return axes2}function project(polygon2,axis3){var _step,min9=1/0,max10=-1/0,_iterator=_createForOfIteratorHelper(polygon2);try{for(_iterator.s();!(_step=_iterator.n()).done;){var point8=_step.value,projection2=point8.x*axis3.x+point8.y*axis3.y;min9=Math.min(min9,projection2),max10=Math.max(max10,projection2)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return{min:min9,max:max10}}function overlaps(proj12,proj22){return!(proj12.max<proj22.min||proj22.max<proj12.min)}__name(getAxes2,"getAxes"),__name(project,"project"),__name(overlaps,"overlaps");var _step2,_iterator2=_createForOfIteratorHelper([].concat(_toConsumableArray(getAxes2(poly1)),_toConsumableArray(getAxes2(poly2))));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var axis2=_step2.value;if(!overlaps(project(poly1,axis2),project(poly2,axis2)))return!1}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return!0}function clusteringDistance(method,length2,getP,getQ,nodeP,nodeQ){var impl2;return impl2=fn$6(method)?method:distances[method]||distances.euclidean,0===length2&&fn$6(method)?impl2(nodeP,nodeQ):impl2(length2,getP,getQ,nodeP,nodeQ)}function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var isArray2=Array.isArray;return isArray_1=isArray2}function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var isArray2=requireIsArray(),isSymbol2=requireIsSymbol(),reIsDeepProp2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp2=/^\w*$/;function isKey2(value2,object3){if(isArray2(value2))return!1;var type3=typeof value2;return!("number"!=type3&&"symbol"!=type3&&"boolean"!=type3&&null!=value2&&!isSymbol2(value2))||(reIsPlainProp2.test(value2)||!reIsDeepProp2.test(value2)||null!=object3&&value2 in Object(object3))}return __name(isKey2,"isKey"),_isKey=isKey2}function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var baseGetTag2=require_baseGetTag(),isObject3=requireIsObject();function isFunction2(value2){if(!isObject3(value2))return!1;var tag=baseGetTag2(value2);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}return __name(isFunction2,"isFunction"),isFunction_1=isFunction2}function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var coreJsData2=require_root()["__core-js_shared__"];return _coreJsData=coreJsData2}function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var uid,coreJsData2=require_coreJsData(),maskSrcKey2=(uid=/[^.]+$/.exec(coreJsData2&&coreJsData2.keys&&coreJsData2.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";function isMasked2(func){return!!maskSrcKey2&&maskSrcKey2 in func}return __name(isMasked2,"isMasked"),_isMasked=isMasked2}function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var funcToString4=Function.prototype.toString;function toSource2(func){if(null!=func){try{return funcToString4.call(func)}catch(e3){}try{return func+""}catch(e3){}}return""}return __name(toSource2,"toSource"),_toSource=toSource2}function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var isFunction2=requireIsFunction(),isMasked2=require_isMasked(),isObject3=requireIsObject(),toSource2=require_toSource(),reIsHostCtor2=/^\[object .+?Constructor\]$/,funcProto4=Function.prototype,objectProto22=Object.prototype,funcToString4=funcProto4.toString,hasOwnProperty19=objectProto22.hasOwnProperty,reIsNative2=RegExp("^"+funcToString4.call(hasOwnProperty19).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative2(value2){return!(!isObject3(value2)||isMasked2(value2))&&(isFunction2(value2)?reIsNative2:reIsHostCtor2).test(toSource2(value2))}return __name(baseIsNative2,"baseIsNative"),_baseIsNative=baseIsNative2}function require_getValue(){if(hasRequired_getValue)return _getValue;function getValue3(object3,key){return null==object3?void 0:object3[key]}return hasRequired_getValue=1,__name(getValue3,"getValue"),_getValue=getValue3}function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var baseIsNative2=require_baseIsNative(),getValue3=require_getValue();function getNative2(object3,key){var value2=getValue3(object3,key);return baseIsNative2(value2)?value2:void 0}return __name(getNative2,"getNative"),_getNative=getNative2}function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var nativeCreate2=require_getNative()(Object,"create");return _nativeCreate=nativeCreate2}function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var nativeCreate2=require_nativeCreate();function hashClear2(){this.__data__=nativeCreate2?nativeCreate2(null):{},this.size=0}return __name(hashClear2,"hashClear"),_hashClear=hashClear2}function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;function hashDelete2(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}return hasRequired_hashDelete=1,__name(hashDelete2,"hashDelete"),_hashDelete=hashDelete2}function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var nativeCreate2=require_nativeCreate(),hasOwnProperty19=Object.prototype.hasOwnProperty;function hashGet2(key){var data5=this.__data__;if(nativeCreate2){var result=data5[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty19.call(data5,key)?data5[key]:void 0}return __name(hashGet2,"hashGet"),_hashGet=hashGet2}function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var nativeCreate2=require_nativeCreate(),hasOwnProperty19=Object.prototype.hasOwnProperty;function hashHas2(key){var data5=this.__data__;return nativeCreate2?void 0!==data5[key]:hasOwnProperty19.call(data5,key)}return __name(hashHas2,"hashHas"),_hashHas=hashHas2}function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var nativeCreate2=require_nativeCreate();function hashSet2(key,value2){var data5=this.__data__;return this.size+=this.has(key)?0:1,data5[key]=nativeCreate2&&void 0===value2?"__lodash_hash_undefined__":value2,this}return __name(hashSet2,"hashSet"),_hashSet=hashSet2}function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var hashClear2=require_hashClear(),hashDelete2=require_hashDelete(),hashGet2=require_hashGet(),hashHas2=require_hashHas(),hashSet2=require_hashSet();function Hash2(entries2){var index=-1,length2=null==entries2?0:entries2.length;for(this.clear();++index<length2;){var entry=entries2[index];this.set(entry[0],entry[1])}}return __name(Hash2,"Hash"),Hash2.prototype.clear=hashClear2,Hash2.prototype.delete=hashDelete2,Hash2.prototype.get=hashGet2,Hash2.prototype.has=hashHas2,Hash2.prototype.set=hashSet2,_Hash=Hash2}function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;function listCacheClear2(){this.__data__=[],this.size=0}return hasRequired_listCacheClear=1,__name(listCacheClear2,"listCacheClear"),_listCacheClear=listCacheClear2}function requireEq(){if(hasRequiredEq)return eq_1;function eq3(value2,other){return value2===other||value2!=value2&&other!=other}return hasRequiredEq=1,__name(eq3,"eq"),eq_1=eq3}function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var eq3=requireEq();function assocIndexOf2(array4,key){for(var length2=array4.length;length2--;)if(eq3(array4[length2][0],key))return length2;return-1}return __name(assocIndexOf2,"assocIndexOf"),_assocIndexOf=assocIndexOf2}function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var assocIndexOf2=require_assocIndexOf(),splice2=Array.prototype.splice;function listCacheDelete2(key){var data5=this.__data__,index=assocIndexOf2(data5,key);return!(index<0)&&(index==data5.length-1?data5.pop():splice2.call(data5,index,1),--this.size,!0)}return __name(listCacheDelete2,"listCacheDelete"),_listCacheDelete=listCacheDelete2}function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var assocIndexOf2=require_assocIndexOf();function listCacheGet2(key){var data5=this.__data__,index=assocIndexOf2(data5,key);return index<0?void 0:data5[index][1]}return __name(listCacheGet2,"listCacheGet"),_listCacheGet=listCacheGet2}function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var assocIndexOf2=require_assocIndexOf();function listCacheHas2(key){return assocIndexOf2(this.__data__,key)>-1}return __name(listCacheHas2,"listCacheHas"),_listCacheHas=listCacheHas2}function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var assocIndexOf2=require_assocIndexOf();function listCacheSet2(key,value2){var data5=this.__data__,index=assocIndexOf2(data5,key);return index<0?(++this.size,data5.push([key,value2])):data5[index][1]=value2,this}return __name(listCacheSet2,"listCacheSet"),_listCacheSet=listCacheSet2}function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var listCacheClear2=require_listCacheClear(),listCacheDelete2=require_listCacheDelete(),listCacheGet2=require_listCacheGet(),listCacheHas2=require_listCacheHas(),listCacheSet2=require_listCacheSet();function ListCache2(entries2){var index=-1,length2=null==entries2?0:entries2.length;for(this.clear();++index<length2;){var entry=entries2[index];this.set(entry[0],entry[1])}}return __name(ListCache2,"ListCache"),ListCache2.prototype.clear=listCacheClear2,ListCache2.prototype.delete=listCacheDelete2,ListCache2.prototype.get=listCacheGet2,ListCache2.prototype.has=listCacheHas2,ListCache2.prototype.set=listCacheSet2,_ListCache=ListCache2}function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var Map3=require_getNative()(require_root(),"Map");return _Map=Map3}function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var Hash2=require_Hash(),ListCache2=require_ListCache(),Map3=require_Map();function mapCacheClear2(){this.size=0,this.__data__={hash:new Hash2,map:new(Map3||ListCache2),string:new Hash2}}return __name(mapCacheClear2,"mapCacheClear"),_mapCacheClear=mapCacheClear2}function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;function isKeyable2(value2){var type3=typeof value2;return"string"==type3||"number"==type3||"symbol"==type3||"boolean"==type3?"__proto__"!==value2:null===value2}return hasRequired_isKeyable=1,__name(isKeyable2,"isKeyable"),_isKeyable=isKeyable2}function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var isKeyable2=require_isKeyable();function getMapData2(map5,key){var data5=map5.__data__;return isKeyable2(key)?data5["string"==typeof key?"string":"hash"]:data5.map}return __name(getMapData2,"getMapData"),_getMapData=getMapData2}function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var getMapData2=require_getMapData();function mapCacheDelete2(key){var result=getMapData2(this,key).delete(key);return this.size-=result?1:0,result}return __name(mapCacheDelete2,"mapCacheDelete"),_mapCacheDelete=mapCacheDelete2}function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var getMapData2=require_getMapData();function mapCacheGet2(key){return getMapData2(this,key).get(key)}return __name(mapCacheGet2,"mapCacheGet"),_mapCacheGet=mapCacheGet2}function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var getMapData2=require_getMapData();function mapCacheHas2(key){return getMapData2(this,key).has(key)}return __name(mapCacheHas2,"mapCacheHas"),_mapCacheHas=mapCacheHas2}function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var getMapData2=require_getMapData();function mapCacheSet2(key,value2){var data5=getMapData2(this,key),size4=data5.size;return data5.set(key,value2),this.size+=data5.size==size4?0:1,this}return __name(mapCacheSet2,"mapCacheSet"),_mapCacheSet=mapCacheSet2}function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var mapCacheClear2=require_mapCacheClear(),mapCacheDelete2=require_mapCacheDelete(),mapCacheGet2=require_mapCacheGet(),mapCacheHas2=require_mapCacheHas(),mapCacheSet2=require_mapCacheSet();function MapCache2(entries2){var index=-1,length2=null==entries2?0:entries2.length;for(this.clear();++index<length2;){var entry=entries2[index];this.set(entry[0],entry[1])}}return __name(MapCache2,"MapCache"),MapCache2.prototype.clear=mapCacheClear2,MapCache2.prototype.delete=mapCacheDelete2,MapCache2.prototype.get=mapCacheGet2,MapCache2.prototype.has=mapCacheHas2,MapCache2.prototype.set=mapCacheSet2,_MapCache=MapCache2}function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var MapCache2=require_MapCache();function memoize4(func,resolver3){if("function"!=typeof func||null!=resolver3&&"function"!=typeof resolver3)throw new TypeError("Expected a function");var memoized=__name(function(){var args=arguments,key=resolver3?resolver3.apply(this,args):args[0],cache3=memoized.cache;if(cache3.has(key))return cache3.get(key);var result=func.apply(this,args);return memoized.cache=cache3.set(key,result)||cache3,result},"memoized");return memoized.cache=new(memoize4.Cache||MapCache2),memoized}return __name(memoize4,"memoize"),memoize4.Cache=MapCache2,memoize_1=memoize4}function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var memoize4=requireMemoize();function memoizeCapped2(func){var result=memoize4(func,function(key){return 500===cache3.size&&cache3.clear(),key}),cache3=result.cache;return result}return __name(memoizeCapped2,"memoizeCapped"),_memoizeCapped=memoizeCapped2}function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var memoizeCapped2=require_memoizeCapped(),rePropName2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar2=/\\(\\)?/g,stringToPath2=memoizeCapped2(function(string3){var result=[];return 46===string3.charCodeAt(0)&&result.push(""),string3.replace(rePropName2,function(match2,number7,quote,subString){result.push(quote?subString.replace(reEscapeChar2,"$1"):number7||match2)}),result});return _stringToPath=stringToPath2}function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;function arrayMap2(array4,iteratee){for(var index=-1,length2=null==array4?0:array4.length,result=Array(length2);++index<length2;)result[index]=iteratee(array4[index],index,array4);return result}return hasRequired_arrayMap=1,__name(arrayMap2,"arrayMap"),_arrayMap=arrayMap2}function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var Symbol3=require_Symbol(),arrayMap2=require_arrayMap(),isArray2=requireIsArray(),isSymbol2=requireIsSymbol(),symbolProto4=Symbol3?Symbol3.prototype:void 0,symbolToString2=symbolProto4?symbolProto4.toString:void 0;function baseToString2(value2){if("string"==typeof value2)return value2;if(isArray2(value2))return arrayMap2(value2,baseToString2)+"";if(isSymbol2(value2))return symbolToString2?symbolToString2.call(value2):"";var result=value2+"";return"0"==result&&1/value2==-1/0?"-0":result}return __name(baseToString2,"baseToString"),_baseToString=baseToString2}function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var baseToString2=require_baseToString();function toString6(value2){return null==value2?"":baseToString2(value2)}return __name(toString6,"toString"),toString_1=toString6}function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var isArray2=requireIsArray(),isKey2=require_isKey(),stringToPath2=require_stringToPath(),toString6=requireToString();function castPath2(value2,object3){return isArray2(value2)?value2:isKey2(value2,object3)?[value2]:stringToPath2(toString6(value2))}return __name(castPath2,"castPath"),_castPath=castPath2}function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var isSymbol2=requireIsSymbol();function toKey2(value2){if("string"==typeof value2||isSymbol2(value2))return value2;var result=value2+"";return"0"==result&&1/value2==-1/0?"-0":result}return __name(toKey2,"toKey"),_toKey=toKey2}function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var castPath2=require_castPath(),toKey2=require_toKey();function baseGet2(object3,path4){for(var index=0,length2=(path4=castPath2(path4,object3)).length;null!=object3&&index<length2;)object3=object3[toKey2(path4[index++])];return index&&index==length2?object3:void 0}return __name(baseGet2,"baseGet"),_baseGet=baseGet2}function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var baseGet2=require_baseGet();function get5(object3,path4,defaultValue){var result=null==object3?void 0:baseGet2(object3,path4);return void 0===result?defaultValue:result}return __name(get5,"get"),get_1=get5}function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var getNative2=require_getNative(),defineProperty2=function(){try{var func=getNative2(Object,"defineProperty");return func({},"",{}),func}catch(e3){}}();return _defineProperty=defineProperty2}function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var defineProperty2=require_defineProperty();function baseAssignValue2(object3,key,value2){"__proto__"==key&&defineProperty2?defineProperty2(object3,key,{configurable:!0,enumerable:!0,value:value2,writable:!0}):object3[key]=value2}return __name(baseAssignValue2,"baseAssignValue"),_baseAssignValue=baseAssignValue2}function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var baseAssignValue2=require_baseAssignValue(),eq3=requireEq(),hasOwnProperty19=Object.prototype.hasOwnProperty;function assignValue2(object3,key,value2){var objValue=object3[key];hasOwnProperty19.call(object3,key)&&eq3(objValue,value2)&&(void 0!==value2||key in object3)||baseAssignValue2(object3,key,value2)}return __name(assignValue2,"assignValue"),_assignValue=assignValue2}function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var reIsUint2=/^(?:0|[1-9]\d*)$/;function isIndex2(value2,length2){var type3=typeof value2;return!!(length2=null==length2?9007199254740991:length2)&&("number"==type3||"symbol"!=type3&&reIsUint2.test(value2))&&value2>-1&&value2%1==0&&value2<length2}return __name(isIndex2,"isIndex"),_isIndex=isIndex2}function require_baseSet(){if(hasRequired_baseSet)return _baseSet;hasRequired_baseSet=1;var assignValue2=require_assignValue(),castPath2=require_castPath(),isIndex2=require_isIndex(),isObject3=requireIsObject(),toKey2=require_toKey();function baseSet2(object3,path4,value2,customizer){if(!isObject3(object3))return object3;for(var index=-1,length2=(path4=castPath2(path4,object3)).length,lastIndex=length2-1,nested=object3;null!=nested&&++index<length2;){var key=toKey2(path4[index]),newValue=value2;if("__proto__"===key||"constructor"===key||"prototype"===key)return object3;if(index!=lastIndex){var objValue=nested[key];void 0===(newValue=customizer?customizer(objValue,key,nested):void 0)&&(newValue=isObject3(objValue)?objValue:isIndex2(path4[index+1])?[]:{})}assignValue2(nested,key,newValue),nested=nested[key]}return object3}return __name(baseSet2,"baseSet"),_baseSet=baseSet2}function requireSet(){if(hasRequiredSet)return set_1;hasRequiredSet=1;var baseSet2=require_baseSet();function set5(object3,path4,value2){return null==object3?object3:baseSet2(object3,path4,value2)}return __name(set5,"set"),set_1=set5}function require_copyArray(){if(hasRequired_copyArray)return _copyArray;function copyArray4(source,array4){var index=-1,length2=source.length;for(array4||(array4=Array(length2));++index<length2;)array4[index]=source[index];return array4}return hasRequired_copyArray=1,__name(copyArray4,"copyArray"),_copyArray=copyArray4}function requireToPath(){if(hasRequiredToPath)return toPath_1;hasRequiredToPath=1;var arrayMap2=require_arrayMap(),copyArray4=require_copyArray(),isArray2=requireIsArray(),isSymbol2=requireIsSymbol(),stringToPath2=require_stringToPath(),toKey2=require_toKey(),toString6=requireToString();function toPath2(value2){return isArray2(value2)?arrayMap2(value2,toKey2):isSymbol2(value2)?[value2]:copyArray4(stringToPath2(toString6(value2)))}return __name(toPath2,"toPath"),toPath_1=toPath2}function forEachCompound(eles,fn3,includeSelf,recursiveStep){for(var q3=[],did=new Set$1,hasCompounds=eles.cy().hasCompoundNodes(),i2=0;i2<eles.length;i2++){var ele=eles[i2];includeSelf?q3.push(ele):hasCompounds&&recursiveStep(q3,did,ele)}for(;q3.length>0;){var _ele=q3.shift();fn3(_ele),did.add(_ele.id()),hasCompounds&&recursiveStep(q3,did,_ele)}return eles}function addChildren(q3,did,ele){if(ele.isParent())for(var children2=ele._private.children,i2=0;i2<children2.length;i2++){var child=children2[i2];did.has(child.id())||q3.push(child)}}function addParent(q3,did,ele){if(ele.isChild()){var parent4=ele._private.parent;did.has(parent4.id())||q3.push(parent4)}}function addParentAndChildren(q3,did,ele){addParent(q3,did,ele),addChildren(q3,did,ele)}function defineDegreeFunction(callback){return function(includeLoops){if(void 0===includeLoops&&(includeLoops=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var degree=0,node2=this[0],connectedEdges=node2._private.edges,i2=0;i2<connectedEdges.length;i2++){var edge=connectedEdges[i2];!includeLoops&&edge.isLoop()||(degree+=callback(node2,edge))}return degree}}}function defineDegreeBoundsFunction(degreeFn,callback){return function(includeLoops){for(var ret,nodes5=this.nodes(),i2=0;i2<nodes5.length;i2++){var degree=nodes5[i2][degreeFn](includeLoops);void 0===degree||void 0!==ret&&!callback(degree,ret)||(ret=degree)}return ret}}function returnFalse(){return!1}function returnTrue(){return!0}function Emitter(){for(var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:emptyOpts,context=arguments.length>1?arguments[1]:void 0,i2=0;i2<defaultsKeys.length;i2++){var key=defaultsKeys[i2];this[key]=opts[key]||defaults$8[key]}this.context=context||this.context,this.listeners=[],this.emitting=0}function styleCache(key,fn3,ele){var val,_p=ele._private,cache3=_p.styleCache=_p.styleCache||[];return null!=(val=cache3[key])?val:val=cache3[key]=fn3(ele)}function cacheStyleFunction(key,fn3){return key=hashString(key),__name(function(ele){return styleCache(key,fn3,ele)},"cachedStyleFunction")}function cachePrototypeStyleFunction(key,fn3){key=hashString(key);var selfFn=__name(function(ele){return fn3.call(ele)},"selfFn");return __name(function(){var ele=this[0];if(ele)return styleCache(key,selfFn,ele)},"cachedPrototypeStyleFunction")}function checkCompound(ele,parentOk){var parents3=ele._private.data.parent?ele.parents():null;if(parents3)for(var i2=0;i2<parents3.length;i2++){if(!parentOk(parents3[i2]))return!1}return!0}function defineDerivedStateFunction(specs){var ok=specs.ok,edgeOkViaNode=specs.edgeOkViaNode||specs.ok,parentOk=specs.parentOk||specs.ok;return function(){var cy=this.cy();if(!cy.styleEnabled())return!0;var ele=this[0],hasCompoundNodes2=cy.hasCompoundNodes();if(ele){var _p=ele._private;if(!ok(ele))return!1;if(ele.isNode())return!hasCompoundNodes2||checkCompound(ele,parentOk);var src=_p.source,tgt=_p.target;return edgeOkViaNode(src)&&(!hasCompoundNodes2||checkCompound(src,edgeOkViaNode))&&(src===tgt||edgeOkViaNode(tgt)&&(!hasCompoundNodes2||checkCompound(tgt,edgeOkViaNode)))}}}function defineSwitchFunction(params){return function(){var args=arguments,changedEles=[];if(2===args.length){var data5=args[0],handler=args[1];this.on(params.event,data5,handler)}else if(1===args.length&&fn$6(args[0])){var _handler=args[0];this.on(params.event,_handler)}else if(0===args.length||1===args.length&&array2(args[0])){for(var addlEvents=1===args.length?args[0]:null,i2=0;i2<this.length;i2++){var ele=this[i2],able=!params.ableField||ele._private[params.ableField],changed=ele._private[params.field]!=params.value;if(params.overrideAble){var overrideAble2=params.overrideAble(ele);if(void 0!==overrideAble2&&(able=overrideAble2,!overrideAble2))return this}able&&(ele._private[params.field]=params.value,changed&&changedEles.push(ele))}var changedColl=this.spawn(changedEles);changedColl.updateStyle(),changedColl.emit(params.event),addlEvents&&changedColl.emit(addlEvents)}return this}}function defineSwitchSet(params){elesfn$3[params.field]=function(){var ele=this[0];if(ele){if(params.overrideField){var val=params.overrideField(ele);if(void 0!==val)return val}return ele._private[params.field]}},elesfn$3[params.on]=defineSwitchFunction({event:params.on,field:params.field,ableField:params.ableField,overrideAble:params.overrideAble,value:!0}),elesfn$3[params.off]=defineSwitchFunction({event:params.off,field:params.field,ableField:params.ableField,overrideAble:params.overrideAble,value:!1})}function defineSourceFunction(params){return __name(function(selector){for(var sources=[],i2=0;i2<this.length;i2++){var src=this[i2]._private[params.attr];src&&sources.push(src)}return this.spawn(sources,!0).filter(selector)},"sourceImpl")}function defineEdgesWithFunction(params){return __name(function(otherNodes){var elements2=[],cy=this._private.cy,p3=params||{};string(otherNodes)&&(otherNodes=cy.$(otherNodes));for(var h3=0;h3<otherNodes.length;h3++)for(var edges3=otherNodes[h3]._private.edges,i2=0;i2<edges3.length;i2++){var edge=edges3[i2],edgeData2=edge._private.data,thisToOther=this.hasElementWithId(edgeData2.source)&&otherNodes.hasElementWithId(edgeData2.target),otherToThis=otherNodes.hasElementWithId(edgeData2.source)&&this.hasElementWithId(edgeData2.target);if(thisToOther||otherToThis){if(p3.thisIsSrc||p3.thisIsTgt){if(p3.thisIsSrc&&!thisToOther)continue;if(p3.thisIsTgt&&!otherToThis)continue}elements2.push(edge)}}return this.spawn(elements2,!0)},"edgesWithImpl")}function defineParallelEdgesFunction(params){return params=extend4({},{codirected:!1},params),__name(function(selector){for(var elements2=[],edges3=this.edges(),p3=params,i2=0;i2<edges3.length;i2++)for(var edge1_p=edges3[i2]._private,src1=edge1_p.source,srcid1=src1._private.data.id,tgtid1=edge1_p.data.target,srcEdges1=src1._private.edges,j3=0;j3<srcEdges1.length;j3++){var edge2=srcEdges1[j3],edge2data=edge2._private.data,tgtid2=edge2data.target,srcid2=edge2data.source,codirected=tgtid2===tgtid1&&srcid2===srcid1,oppdirected=srcid1===tgtid2&&tgtid1===srcid2;(p3.codirected&&codirected||!p3.codirected&&(codirected||oppdirected))&&elements2.push(edge2)}return this.spawn(elements2,!0).filter(selector)},"parallelEdgesImpl")}function generateCubicBezier(mX1,mY1,mX2,mY2){var float32ArraySupported="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var i2=0;i2<4;++i2)if("number"!=typeof arguments[i2]||isNaN(arguments[i2])||!isFinite(arguments[i2]))return!1;mX1=Math.min(mX1,1),mX2=Math.min(mX2,1),mX1=Math.max(mX1,0),mX2=Math.max(mX2,0);var mSampleValues=float32ArraySupported?new Float32Array(11):new Array(11);function A2(aA1,aA2){return 1-3*aA2+3*aA1}function B3(aA1,aA2){return 3*aA2-6*aA1}function C3(aA1){return 3*aA1}function calcBezier(aT,aA1,aA2){return((A2(aA1,aA2)*aT+B3(aA1,aA2))*aT+C3(aA1))*aT}function getSlope(aT,aA1,aA2){return 3*A2(aA1,aA2)*aT*aT+2*B3(aA1,aA2)*aT+C3(aA1)}function newtonRaphsonIterate(aX,aGuessT){for(var _i=0;_i<4;++_i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(0===currentSlope)return aGuessT;aGuessT-=(calcBezier(aGuessT,mX1,mX2)-aX)/currentSlope}return aGuessT}function calcSampleValues(){for(var _i2=0;_i2<11;++_i2)mSampleValues[_i2]=calcBezier(.1*_i2,mX1,mX2)}function binarySubdivide(aX,aA,aB){var currentX,currentT,i3=0;do{(currentX=calcBezier(currentT=aA+(aB-aA)/2,mX1,mX2)-aX)>0?aB=currentT:aA=currentT}while(Math.abs(currentX)>1e-7&&++i3<10);return currentT}function getTForX(aX){for(var intervalStart=0,currentSample=1;10!==currentSample&&mSampleValues[currentSample]<=aX;++currentSample)intervalStart+=.1;--currentSample;var guessForT=intervalStart+.1*((aX-mSampleValues[currentSample])/(mSampleValues[currentSample+1]-mSampleValues[currentSample])),initialSlope=getSlope(guessForT,mX1,mX2);return initialSlope>=.001?newtonRaphsonIterate(aX,guessForT):0===initialSlope?guessForT:binarySubdivide(aX,intervalStart,intervalStart+.1)}__name(A2,"A"),__name(B3,"B"),__name(C3,"C"),__name(calcBezier,"calcBezier"),__name(getSlope,"getSlope"),__name(newtonRaphsonIterate,"newtonRaphsonIterate"),__name(calcSampleValues,"calcSampleValues"),__name(binarySubdivide,"binarySubdivide"),__name(getTForX,"getTForX");var _precomputed=!1;function precompute(){_precomputed=!0,mX1===mY1&&mX2===mY2||calcSampleValues()}__name(precompute,"precompute");var f2=__name(function(aX){return _precomputed||precompute(),mX1===mY1&&mX2===mY2?aX:0===aX?0:1===aX?1:calcBezier(getTForX(aX),mY1,mY2)},"f");f2.getControlPoints=function(){return[{x:mX1,y:mY1},{x:mX2,y:mY2}]};var str2="generateBezier("+[mX1,mY1,mX2,mY2]+")";return f2.toString=function(){return str2},f2}function getEasedValue(type3,start3,end2,percent,easingFn){if(1===percent)return end2;if(start3===end2)return end2;var val=easingFn(start3,end2,percent);return null==type3||((type3.roundValue||type3.color)&&(val=Math.round(val)),void 0!==type3.min&&(val=Math.max(val,type3.min)),void 0!==type3.max&&(val=Math.min(val,type3.max))),val}function getValue2(prop,spec){return null!=prop.pfValue||null!=prop.value?null==prop.pfValue||null!=spec&&"%"===spec.type.units?prop.value:prop.pfValue:prop}function ease(startProp,endProp,percent,easingFn,propSpec){var type3=null!=propSpec?propSpec.type:null;percent<0?percent=0:percent>1&&(percent=1);var start3=getValue2(startProp,propSpec),end2=getValue2(endProp,propSpec);if(number$1(start3)&&number$1(end2))return getEasedValue(type3,start3,end2,percent,easingFn);if(array2(start3)&&array2(end2)){for(var easedArr=[],i2=0;i2<end2.length;i2++){var si=start3[i2],ei=end2[i2];if(null!=si&&null!=ei){var val=getEasedValue(type3,si,ei,percent,easingFn);easedArr.push(val)}else easedArr.push(ei)}return easedArr}}function step$1(self2,ani,now3,isCore){var isEles=!isCore,_p=self2._private,ani_p=ani._private,pEasing=ani_p.easing,startTime=ani_p.startTime,style3=(isCore?self2:self2.cy()).style();if(!ani_p.easingImpl)if(null==pEasing)ani_p.easingImpl=easings.linear;else{var easingVals,name,args;if(string(pEasing))easingVals=style3.parse("transition-timing-function",pEasing).value;else easingVals=pEasing;string(easingVals)?(name=easingVals,args=[]):(name=easingVals[1],args=easingVals.slice(2).map(function(n2){return+n2})),args.length>0?("spring"===name&&args.push(ani_p.duration),ani_p.easingImpl=easings[name].apply(null,args)):ani_p.easingImpl=easings[name]}var percent,easing=ani_p.easingImpl;if(percent=0===ani_p.duration?1:(now3-startTime)/ani_p.duration,ani_p.applying&&(percent=ani_p.progress),percent<0?percent=0:percent>1&&(percent=1),null==ani_p.delay){var startPos=ani_p.startPosition,endPos=ani_p.position;if(endPos&&isEles&&!self2.locked()){var newPos={};valid(startPos.x,endPos.x)&&(newPos.x=ease(startPos.x,endPos.x,percent,easing)),valid(startPos.y,endPos.y)&&(newPos.y=ease(startPos.y,endPos.y,percent,easing)),self2.position(newPos)}var startPan=ani_p.startPan,endPan=ani_p.pan,pan2=_p.pan,animatingPan=null!=endPan&&isCore;animatingPan&&(valid(startPan.x,endPan.x)&&(pan2.x=ease(startPan.x,endPan.x,percent,easing)),valid(startPan.y,endPan.y)&&(pan2.y=ease(startPan.y,endPan.y,percent,easing)),self2.emit("pan"));var startZoom=ani_p.startZoom,endZoom=ani_p.zoom,animatingZoom=null!=endZoom&&isCore;animatingZoom&&(valid(startZoom,endZoom)&&(_p.zoom=bound(_p.minZoom,ease(startZoom,endZoom,percent,easing),_p.maxZoom)),self2.emit("zoom")),(animatingPan||animatingZoom)&&self2.emit("viewport");var props=ani_p.style;if(props&&props.length>0&&isEles){for(var i2=0;i2<props.length;i2++){var prop=props[i2],_name=prop.name,end2=prop,start3=ani_p.startStyle[_name],easedVal=ease(start3,end2,percent,easing,style3.properties[start3.name]);style3.overrideBypass(self2,_name,easedVal)}self2.emit("style")}}return ani_p.progress=percent,percent}function valid(start3,end2){return null!=start3&&null!=end2&&(!(!number$1(start3)||!number$1(end2))||!(!start3||!end2))}function startAnimation(self2,ani,now3,isCore){var ani_p=ani._private;ani_p.started=!0,ani_p.startTime=now3-ani_p.progress*ani_p.duration}function stepAll(now3,cy){var eles=cy._private.aniEles,doneEles=[];function stepOne(ele2,isCore){var _p=ele2._private,current=_p.animation.current,queue=_p.animation.queue,ranAnis=!1;if(0===current.length){var next3=queue.shift();next3&&current.push(next3)}for(var callbacks=__name(function(_callbacks){for(var j3=_callbacks.length-1;j3>=0;j3--){(0,_callbacks[j3])()}_callbacks.splice(0,_callbacks.length)},"callbacks"),i2=current.length-1;i2>=0;i2--){var ani=current[i2],ani_p=ani._private;ani_p.stopped?(current.splice(i2,1),ani_p.hooked=!1,ani_p.playing=!1,ani_p.started=!1,callbacks(ani_p.frames)):(ani_p.playing||ani_p.applying)&&(ani_p.playing&&ani_p.applying&&(ani_p.applying=!1),ani_p.started||startAnimation(0,ani,now3),step$1(ele2,ani,now3,isCore),ani_p.applying&&(ani_p.applying=!1),callbacks(ani_p.frames),null!=ani_p.step&&ani_p.step(now3),ani.completed()&&(current.splice(i2,1),ani_p.hooked=!1,ani_p.playing=!1,ani_p.started=!1,callbacks(ani_p.completes)),ranAnis=!0)}return isCore||0!==current.length||0!==queue.length||doneEles.push(ele2),ranAnis}__name(stepOne,"stepOne");for(var ranEleAni=!1,e3=0;e3<eles.length;e3++){var handledThisEle=stepOne(eles[e3]);ranEleAni=ranEleAni||handledThisEle}var ranCoreAni=stepOne(cy,!0);(ranEleAni||ranCoreAni)&&(eles.length>0?cy.notify("draw",eles):cy.notify("draw")),eles.unmerge(doneEles),cy.emit("step")}function BreadthFirstLayout(options2){this.options=extend4({},defaults$7,deprecatedOptionDefaults,options2)}function CircleLayout(options2){this.options=extend4({},defaults$6,options2)}function ConcentricLayout(options2){this.options=extend4({},defaults$5,options2)}function CoseLayout(options2){this.options=extend4({},defaults$4,options2),this.options.layout=this;var nodes5=this.options.eles.nodes(),notEdges=this.options.eles.edges().filter(function(e3){var sourceId=e3.source().data("id"),targetId=e3.target().data("id"),hasSource=nodes5.some(function(n2){return n2.data("id")===sourceId}),hasTarget=nodes5.some(function(n2){return n2.data("id")===targetId});return!hasSource||!hasTarget});this.options.eles=this.options.eles.not(notEdges)}function GridLayout(options2){this.options=extend4({},defaults$3,options2)}function NullLayout(options2){this.options=extend4({},defaults$2,options2)}function PresetLayout(options2){this.options=extend4({},defaults$1,options2)}function RandomLayout(options2){this.options=extend4({},defaults3,options2)}function NullRenderer(options2){this.options=options2,this.notifications=0}function drawPreparedRoundCorner(ctx,roundCorner){0===roundCorner.radius?ctx.lineTo(roundCorner.cx,roundCorner.cy):ctx.arc(roundCorner.cx,roundCorner.cy,roundCorner.radius,roundCorner.startAngle,roundCorner.endAngle,roundCorner.counterClockwise)}function getRoundCorner(previousPoint,currentPoint,nextPoint,radiusMax){var isArcRadius=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===radiusMax||0===currentPoint.radius?{cx:currentPoint.x,cy:currentPoint.y,radius:0,startX:currentPoint.x,startY:currentPoint.y,stopX:currentPoint.x,stopY:currentPoint.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(calcCornerArc(previousPoint,currentPoint,nextPoint,radiusMax,isArcRadius),{cx:x3,cy:y4,radius:cRadius,startX:startX,startY:startY,stopX:stopX,stopY:stopY,startAngle:v1.ang+Math.PI/2*radDirection,endAngle:v22.ang-Math.PI/2*radDirection,counterClockwise:drawDirection})}function getPts(pts2){var retPts=[];if(null!=pts2){for(var i2=0;i2<pts2.length;i2+=2){var x5=pts2[i2],y6=pts2[i2+1];retPts.push({x:x5,y:y6})}return retPts}}function pushBezierPts(r2,edge,pts2){for(var qbezierAt$1=__name(function(p1,p22,p32,t4){return qbezierAt(p1,p22,p32,t4)},"qbezierAt$1"),bpts=edge._private.rstyle.bezierPts,i2=0;i2<r2.bezierProjPcts.length;i2++){var p3=r2.bezierProjPcts[i2];bpts.push({x:qbezierAt$1(pts2[0],pts2[2],pts2[4],p3),y:qbezierAt$1(pts2[1],pts2[3],pts2[5],p3)})}}function polygon(context,points){for(var i2=0;i2<points.length;i2++){var pt=points[i2];context.lineTo(pt.x,pt.y)}}function triangleBackcurve(context,points,controlPoint){for(var firstPt,i2=0;i2<points.length;i2++){var pt=points[i2];0===i2&&(firstPt=pt),context.lineTo(pt.x,pt.y)}context.quadraticCurveTo(controlPoint.x,controlPoint.y,firstPt.x,firstPt.y)}function triangleTee(context,trianglePoints,teePoints){context.beginPath&&context.beginPath();for(var triPts=trianglePoints,i2=0;i2<triPts.length;i2++){var pt=triPts[i2];context.lineTo(pt.x,pt.y)}var teePts=teePoints,firstTeePt=teePoints[0];context.moveTo(firstTeePt.x,firstTeePt.y);for(i2=1;i2<teePts.length;i2++){pt=teePts[i2];context.lineTo(pt.x,pt.y)}context.closePath&&context.closePath()}function circleTriangle(context,trianglePoints,rx,ry,r2){context.beginPath&&context.beginPath(),context.arc(rx,ry,r2,0,2*Math.PI,!1);var triPts=trianglePoints,firstTrPt=triPts[0];context.moveTo(firstTrPt.x,firstTrPt.y);for(var i2=0;i2<triPts.length;i2++){var pt=triPts[i2];context.lineTo(pt.x,pt.y)}context.closePath&&context.closePath()}function circle$1(context,rx,ry,r2){context.arc(rx,ry,r2,0,2*Math.PI,!1)}function circle3(ctx,x5,y6,width3,height2){var radius2=Math.min(width3,height2)/2,centerX=x5+width3/2,centerY=y6+height2/2;ctx.beginPath(),ctx.arc(centerX,centerY,radius2,0,2*Math.PI),ctx.closePath()}function roundRect(ctx,x5,y6,width3,height2){var radius2=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,r2=Math.min(radius2,width3/2,height2/2);ctx.beginPath(),ctx.moveTo(x5+r2,y6),ctx.lineTo(x5+width3-r2,y6),ctx.quadraticCurveTo(x5+width3,y6,x5+width3,y6+r2),ctx.lineTo(x5+width3,y6+height2-r2),ctx.quadraticCurveTo(x5+width3,y6+height2,x5+width3-r2,y6+height2),ctx.lineTo(x5+r2,y6+height2),ctx.quadraticCurveTo(x5,y6+height2,x5,y6+height2-r2),ctx.lineTo(x5,y6+r2),ctx.quadraticCurveTo(x5,y6,x5+r2,y6),ctx.closePath()}function compileShader(gl,type3,source){var shader=gl.createShader(type3);if(gl.shaderSource(shader,source),gl.compileShader(shader),!gl.getShaderParameter(shader,gl.COMPILE_STATUS))throw new Error(gl.getShaderInfoLog(shader));return shader}function createProgram(gl,vertexSource,fragementSource){var vertexShader=compileShader(gl,gl.VERTEX_SHADER,vertexSource),fragmentShader=compileShader(gl,gl.FRAGMENT_SHADER,fragementSource),program=gl.createProgram();if(gl.attachShader(program,vertexShader),gl.attachShader(program,fragmentShader),gl.linkProgram(program),!gl.getProgramParameter(program,gl.LINK_STATUS))throw new Error("Could not initialize shaders");return program}function createTextureCanvas(r2,width3,height2){void 0===height2&&(height2=width3);var canvas=r2.makeOffscreenCanvas(width3,height2),ctx=canvas.context=canvas.getContext("2d");return canvas.clear=function(){return ctx.clearRect(0,0,canvas.width,canvas.height)},canvas.clear(),canvas}function getEffectivePanZoom(r2){var pixelRatio=r2.pixelRatio,zoom2=r2.cy.zoom(),pan2=r2.cy.pan();return{zoom:zoom2*pixelRatio,pan:{x:pan2.x*pixelRatio,y:pan2.y*pixelRatio}}}function getEffectiveZoom(r2){var pixelRatio=r2.pixelRatio;return r2.cy.zoom()*pixelRatio}function modelToRenderedPosition2(r2,pan2,zoom2,x5,y6){var rx=x5*zoom2+pan2.x,ry=y6*zoom2+pan2.y;return[rx,ry=Math.round(r2.canvasHeight-ry)]}function isSimpleShape(node2){return"solid"===node2.pstyle("background-fill").value&&("none"===node2.pstyle("background-image").strValue&&(0===node2.pstyle("border-width").value||(0===node2.pstyle("border-opacity").value||"solid"===node2.pstyle("border-style").value)))}function arrayEqual(a1,a2){if(a1.length!==a2.length)return!1;for(var i2=0;i2<a1.length;i2++)if(a1[i2]!==a2[i2])return!1;return!0}function toWebGLColor(color2,opacity,outArray){var r2=color2[0]/255,g2=color2[1]/255,b3=color2[2]/255,a2=opacity,arr=outArray||new Array(4);return arr[0]=r2*a2,arr[1]=g2*a2,arr[2]=b3*a2,arr[3]=a2,arr}function indexToVec4(index,outArray){var arr=outArray||new Array(4);return arr[0]=(255&index)/255,arr[1]=(index>>8&255)/255,arr[2]=(index>>16&255)/255,arr[3]=(index>>24&255)/255,arr}function vec4ToIndex(vec4){return vec4[0]+(vec4[1]<<8)+(vec4[2]<<16)+(vec4[3]<<24)}function createTexture(gl,debugID){var texture=gl.createTexture();return texture.buffer=function(offscreenCanvas){gl.bindTexture(gl.TEXTURE_2D,texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_NEAREST),gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,offscreenCanvas),gl.generateMipmap(gl.TEXTURE_2D),gl.bindTexture(gl.TEXTURE_2D,null)},texture.deleteTexture=function(){gl.deleteTexture(texture)},texture}function getTypeInfo(gl,glslType){switch(glslType){case"float":return[1,gl.FLOAT,4];case"vec2":return[2,gl.FLOAT,4];case"vec3":return[3,gl.FLOAT,4];case"vec4":return[4,gl.FLOAT,4];case"int":return[1,gl.INT,4];case"ivec2":return[2,gl.INT,4]}}function createTypedArray(gl,glType,dataOrSize){switch(glType){case gl.FLOAT:return new Float32Array(dataOrSize);case gl.INT:return new Int32Array(dataOrSize)}}function createTypedArrayView(gl,glType,array4,stride,size4,i2){switch(glType){case gl.FLOAT:return new Float32Array(array4.buffer,i2*stride,size4);case gl.INT:return new Int32Array(array4.buffer,i2*stride,size4)}}function createBufferStaticDraw(gl,type3,attributeLoc,dataArray){var _getTypeInfo2=_slicedToArray(getTypeInfo(gl,type3),2),size4=_getTypeInfo2[0],glType=_getTypeInfo2[1],data5=createTypedArray(gl,glType,dataArray),buffer=gl.createBuffer();return gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,data5,gl.STATIC_DRAW),glType===gl.FLOAT?gl.vertexAttribPointer(attributeLoc,size4,glType,!1,0,0):glType===gl.INT&&gl.vertexAttribIPointer(attributeLoc,size4,glType,0,0),gl.enableVertexAttribArray(attributeLoc),gl.bindBuffer(gl.ARRAY_BUFFER,null),buffer}function createBufferDynamicDraw(gl,instances,type3,attributeLoc){var _getTypeInfo4=_slicedToArray(getTypeInfo(gl,type3),3),size4=_getTypeInfo4[0],glType=_getTypeInfo4[1],bytes=_getTypeInfo4[2],dataArray=createTypedArray(gl,glType,instances*size4),stride=size4*bytes,buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,instances*stride,gl.DYNAMIC_DRAW),gl.enableVertexAttribArray(attributeLoc),glType===gl.FLOAT?gl.vertexAttribPointer(attributeLoc,size4,glType,!1,stride,0):glType===gl.INT&&gl.vertexAttribIPointer(attributeLoc,size4,glType,stride,0),gl.vertexAttribDivisor(attributeLoc,1),gl.bindBuffer(gl.ARRAY_BUFFER,null);for(var views=new Array(instances),i2=0;i2<instances;i2++)views[i2]=createTypedArrayView(gl,glType,dataArray,stride,size4,i2);return buffer.dataArray=dataArray,buffer.stride=stride,buffer.size=size4,buffer.getView=function(i3){return views[i3]},buffer.setPoint=function(i3,x5,y6){var view=views[i3];view[0]=x5,view[1]=y6},buffer.bufferSubData=function(count2){gl.bindBuffer(gl.ARRAY_BUFFER,buffer),count2?gl.bufferSubData(gl.ARRAY_BUFFER,0,dataArray,0,count2*size4):gl.bufferSubData(gl.ARRAY_BUFFER,0,dataArray)},buffer}function create3x3MatrixBufferDynamicDraw(gl,instances,attributeLoc){for(var matrixData=new Float32Array(9*instances),matrixViews=new Array(instances),i2=0;i2<instances;i2++){var byteOffset=9*i2*4;matrixViews[i2]=new Float32Array(matrixData.buffer,byteOffset,9)}var buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,matrixData.byteLength,gl.DYNAMIC_DRAW);for(var _i=0;_i<3;_i++){var loc=attributeLoc+_i;gl.enableVertexAttribArray(loc),gl.vertexAttribPointer(loc,3,gl.FLOAT,!1,36,12*_i),gl.vertexAttribDivisor(loc,1)}return gl.bindBuffer(gl.ARRAY_BUFFER,null),buffer.getMatrixView=function(i3){return matrixViews[i3]},buffer.setData=function(matrix,i3){matrixViews[i3].set(matrix,0)},buffer.bufferSubData=function(){gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferSubData(gl.ARRAY_BUFFER,0,matrixData)},buffer}function createPickingFrameBuffer(gl){var fb=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,fb);var targetTexture=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,targetTexture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,targetTexture,0),gl.bindFramebuffer(gl.FRAMEBUFFER,null),fb.setFramebufferAttachmentSizes=function(width3,height2){gl.bindTexture(gl.TEXTURE_2D,targetTexture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width3,height2,0,gl.RGBA,gl.UNSIGNED_BYTE,null)},fb}function create3(){var out=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(out[1]=0,out[2]=0,out[3]=0,out[5]=0,out[6]=0,out[7]=0),out[0]=1,out[4]=1,out[8]=1,out}function identity6(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out}function multiply(out,a2,b3){var a00=a2[0],a01=a2[1],a02=a2[2],a10=a2[3],a11=a2[4],a12=a2[5],a20=a2[6],a21=a2[7],a22=a2[8],b00=b3[0],b01=b3[1],b02=b3[2],b10=b3[3],b11=b3[4],b12=b3[5],b20=b3[6],b21=b3[7],b22=b3[8];return out[0]=b00*a00+b01*a10+b02*a20,out[1]=b00*a01+b01*a11+b02*a21,out[2]=b00*a02+b01*a12+b02*a22,out[3]=b10*a00+b11*a10+b12*a20,out[4]=b10*a01+b11*a11+b12*a21,out[5]=b10*a02+b11*a12+b12*a22,out[6]=b20*a00+b21*a10+b22*a20,out[7]=b20*a01+b21*a11+b22*a21,out[8]=b20*a02+b21*a12+b22*a22,out}function translate(out,a2,v3){var a00=a2[0],a01=a2[1],a02=a2[2],a10=a2[3],a11=a2[4],a12=a2[5],a20=a2[6],a21=a2[7],a22=a2[8],x5=v3[0],y6=v3[1];return out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a10,out[4]=a11,out[5]=a12,out[6]=x5*a00+y6*a10+a20,out[7]=x5*a01+y6*a11+a21,out[8]=x5*a02+y6*a12+a22,out}function rotate(out,a2,rad){var a00=a2[0],a01=a2[1],a02=a2[2],a10=a2[3],a11=a2[4],a12=a2[5],a20=a2[6],a21=a2[7],a22=a2[8],s2=Math.sin(rad),c3=Math.cos(rad);return out[0]=c3*a00+s2*a10,out[1]=c3*a01+s2*a11,out[2]=c3*a02+s2*a12,out[3]=c3*a10-s2*a00,out[4]=c3*a11-s2*a01,out[5]=c3*a12-s2*a02,out[6]=a20,out[7]=a21,out[8]=a22,out}function scale(out,a2,v3){var x5=v3[0],y6=v3[1];return out[0]=x5*a2[0],out[1]=x5*a2[1],out[2]=x5*a2[2],out[3]=y6*a2[3],out[4]=y6*a2[4],out[5]=y6*a2[5],out[6]=a2[6],out[7]=a2[7],out[8]=a2[8],out}function projection(out,width3,height2){return out[0]=2/width3,out[1]=0,out[2]=0,out[3]=0,out[4]=-2/height2,out[5]=0,out[6]=-1,out[7]=1,out[8]=1,out}function intersection2(set1,set22){return set1.intersection?set1.intersection(set22):new Set(_toConsumableArray(set1).filter(function(x5){return set22.has(x5)}))}function getBGColor(r2){var container2=r2.cy.container(),cssColor=container2&&container2.style&&container2.style.backgroundColor||"white";return color2tuple(cssColor)}function getLabelLines(ele,prefix){var rs=ele._private.rscratch;return getPrefixedProperty(rs,"labelWrapCachedLines",prefix)||[]}function overrideCanvasRendererFunctions(r2){var renderCanvas=r2.render;r2.render=function(options2){options2=options2||{};var cy=r2.cy;r2.webgl&&(cy.zoom()>maxZoom$1?(clearWebgl(r2),renderCanvas.call(r2,options2)):(clearCanvas(r2),renderWebgl(r2,options2,RENDER_TARGET.SCREEN)))};var baseFunc=r2.matchCanvasSize;r2.matchCanvasSize=function(container2){baseFunc.call(r2,container2),r2.pickingFrameBuffer.setFramebufferAttachmentSizes(r2.canvasWidth,r2.canvasHeight),r2.pickingFrameBuffer.needsDraw=!0},r2.findNearestElements=function(x5,y6,interactiveElementsOnly,isTouch){return findNearestElementsWebgl(r2,x5,y6)};var _baseFunc=r2.invalidateCachedZSortedEles;r2.invalidateCachedZSortedEles=function(){_baseFunc.call(r2),r2.pickingFrameBuffer.needsDraw=!0};var _baseFunc2=r2.notify;r2.notify=function(eventName,eles){_baseFunc2.call(r2,eventName,eles),"viewport"===eventName||"bounds"===eventName?r2.pickingFrameBuffer.needsDraw=!0:"background"===eventName&&r2.drawing.invalidate(eles,{type:"node-body"})}}function clearWebgl(r2){var gl=r2.data.contexts[r2.WEBGL];gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)}function clearCanvas(r2){var clear19=__name(function(context){context.save(),context.setTransform(1,0,0,1,0,0),context.clearRect(0,0,r2.canvasWidth,r2.canvasHeight),context.restore()},"clear");clear19(r2.data.contexts[r2.NODE]),clear19(r2.data.contexts[r2.DRAG])}function createPanZoomMatrix(r2){var width3=r2.canvasWidth,height2=r2.canvasHeight,_util$getEffectivePan=getEffectivePanZoom(r2),pan2=_util$getEffectivePan.pan,zoom2=_util$getEffectivePan.zoom,transform8=create3();translate(transform8,transform8,[pan2.x,pan2.y]),scale(transform8,transform8,[zoom2,zoom2]);var projection$1=create3();projection(projection$1,width3,height2);var product=create3();return multiply(product,projection$1,transform8),product}function setContextTransform(r2,context){var width3=r2.canvasWidth,height2=r2.canvasHeight,_util$getEffectivePan2=getEffectivePanZoom(r2),pan2=_util$getEffectivePan2.pan,zoom2=_util$getEffectivePan2.zoom;context.setTransform(1,0,0,1,0,0),context.clearRect(0,0,width3,height2),context.translate(pan2.x,pan2.y),context.scale(zoom2,zoom2)}function drawSelectionRectangle(r2,options2){r2.drawSelectionRectangle(options2,function(context){return setContextTransform(r2,context)})}function drawAxes(r2){var context=r2.data.contexts[r2.NODE];context.save(),setContextTransform(r2,context),context.strokeStyle="rgba(0, 0, 0, 0.3)",context.beginPath(),context.moveTo(-1e3,0),context.lineTo(1e3,0),context.stroke(),context.beginPath(),context.moveTo(0,-1e3),context.lineTo(0,1e3),context.stroke(),context.restore()}function drawAtlases(r2){var draw26=__name(function(drawing,name,row){for(var collection4=drawing.atlasManager.getAtlasCollection(name),context=r2.data.contexts[r2.NODE],atlases=collection4.atlases,_i=0;_i<atlases.length;_i++){var canvas=atlases[_i].canvas;if(canvas){var w4=canvas.width,h3=canvas.height,x5=w4*_i,y6=canvas.height*row;context.save(),context.scale(.4,.4),context.drawImage(canvas,x5,y6),context.strokeStyle="black",context.rect(x5,y6,w4,h3),context.stroke(),context.restore()}}},"draw"),i2=0;draw26(r2.drawing,"node",i2++),draw26(r2.drawing,"label",i2++)}function getPickingIndexes(r2,mX1,mY1,mX2,mY2){var x5,y6,_util$getEffectivePan3=getEffectivePanZoom(r2),_util$modelToRendered2=_slicedToArray(modelToRenderedPosition2(r2,_util$getEffectivePan3.pan,_util$getEffectivePan3.zoom,mX1,mY1),2);x5=_util$modelToRendered2[0]-3,y6=_util$modelToRendered2[1]-3;var gl=r2.data.contexts[r2.WEBGL];gl.bindFramebuffer(gl.FRAMEBUFFER,r2.pickingFrameBuffer),r2.pickingFrameBuffer.needsDraw&&(gl.viewport(0,0,gl.canvas.width,gl.canvas.height),renderWebgl(r2,null,RENDER_TARGET.PICKING),r2.pickingFrameBuffer.needsDraw=!1);var data5=new Uint8Array(144);gl.readPixels(x5,y6,6,6,gl.RGBA,gl.UNSIGNED_BYTE,data5),gl.bindFramebuffer(gl.FRAMEBUFFER,null);for(var indexes=new Set,i2=0;i2<36;i2++){var index=vec4ToIndex(data5.slice(4*i2,4*i2+4))-1;index>=0&&indexes.add(index)}return indexes}function findNearestElementsWebgl(r2,x5,y6){var node2,edge,_step,indexes=getPickingIndexes(r2,x5,y6),eles=r2.getCachedZSortedEles(),_iterator=_createForOfIteratorHelper(indexes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var ele=eles[_step.value];if(!node2&&ele.isNode()&&(node2=ele),!edge&&ele.isEdge()&&(edge=ele),node2&&edge)break}}catch(err){_iterator.e(err)}finally{_iterator.f()}return[node2,edge].filter(Boolean)}function drawEle(r2,index,ele){var drawing=r2.drawing;index+=1,ele.isNode()?(drawing.drawNode(ele,index,"node-underlay"),drawing.drawNode(ele,index,"node-body"),drawing.drawTexture(ele,index,"label"),drawing.drawNode(ele,index,"node-overlay")):(drawing.drawEdgeLine(ele,index),drawing.drawEdgeArrow(ele,index,"source"),drawing.drawEdgeArrow(ele,index,"target"),drawing.drawTexture(ele,index,"label"),drawing.drawTexture(ele,index,"edge-source-label"),drawing.drawTexture(ele,index,"edge-target-label"))}function renderWebgl(r2,options2,renderTarget){var start3;r2.webglDebug&&(start3=performance.now());var drawing=r2.drawing,eleCount=0;if(renderTarget.screen&&r2.data.canvasNeedsRedraw[r2.SELECT_BOX]&&drawSelectionRectangle(r2,options2),r2.data.canvasNeedsRedraw[r2.NODE]||renderTarget.picking){var gl=r2.data.contexts[r2.WEBGL];renderTarget.screen?(gl.clearColor(0,0,0,0),gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA)):gl.disable(gl.BLEND),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.viewport(0,0,gl.canvas.width,gl.canvas.height);var panZoomMatrix=createPanZoomMatrix(r2),eles=r2.getCachedZSortedEles();if(eleCount=eles.length,drawing.startFrame(panZoomMatrix,renderTarget),renderTarget.screen){for(var i2=0;i2<eles.nondrag.length;i2++)drawEle(r2,i2,eles.nondrag[i2]);for(var _i2=0;_i2<eles.drag.length;_i2++)drawEle(r2,_i2,eles.drag[_i2])}else if(renderTarget.picking)for(var _i3=0;_i3<eles.length;_i3++)drawEle(r2,_i3,eles[_i3]);drawing.endFrame(),renderTarget.screen&&r2.webglDebugShowAtlases&&(drawAxes(r2),drawAtlases(r2)),r2.data.canvasNeedsRedraw[r2.NODE]=!1,r2.data.canvasNeedsRedraw[r2.DRAG]=!1}if(r2.webglDebug){var end2=performance.now(),time4=Math.ceil(end2-start3),debugInfo=drawing.getDebugInfo(),report=["".concat(eleCount," elements"),"".concat(debugInfo.totalInstances," instances"),"".concat(debugInfo.batchCount," batches"),"".concat(debugInfo.totalAtlases," atlases"),"".concat(debugInfo.wrappedCount," wrapped textures"),"".concat(debugInfo.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(renderTarget.name,") - frame time ").concat(time4,"ms")),console.log("Totals:"),console.log("  ".concat(report)),console.log("Texture Atlases Used:");var _step2,_iterator2=_createForOfIteratorHelper(debugInfo.atlasInfo);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var info2=_step2.value;console.log("  ".concat(info2.type,": ").concat(info2.keyCount," keys, ").concat(info2.atlasCount," atlases"))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}console.log("")}r2.data.gc&&(console.log("Garbage Collect!"),r2.data.gc=!1,drawing.gc())}function b64ToBlob(b64,mimeType){for(var bytes=atob(b64),buff=new ArrayBuffer(bytes.length),buffUint8=new Uint8Array(buff),i2=0;i2<bytes.length;i2++)buffUint8[i2]=bytes.charCodeAt(i2);return new Blob([buff],{type:mimeType})}function b64UriToB64(b64uri){var i2=b64uri.indexOf(",");return b64uri.substr(i2+1)}function output(options2,canvas,mimeType){var getB64Uri=__name(function(){return canvas.toDataURL(mimeType,options2.quality)},"getB64Uri");switch(options2.output){case"blob-promise":return new Promise$1(function(resolve2,reject3){try{canvas.toBlob(function(blob){null!=blob?resolve2(blob):reject3(new Error("`canvas.toBlob()` sent a null value in its callback"))},mimeType,options2.quality)}catch(err){reject3(err)}});case"blob":return b64ToBlob(b64UriToB64(getB64Uri()),mimeType);case"base64":return b64UriToB64(getB64Uri());default:return getB64Uri()}}function CanvasRenderer(options2){var r2=this,document2=r2.cy.window().document;options2.webgl&&(CRp.CANVAS_LAYERS=r2.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),r2.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};r2.data.canvasContainer=document2.createElement("div");var containerStyle=r2.data.canvasContainer.style;r2.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",containerStyle.position="relative",containerStyle.zIndex="0",containerStyle.overflow="hidden";var container2=options2.cy.container();container2.appendChild(r2.data.canvasContainer),container2.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var styleMap2={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(styleMap2["-ms-touch-action"]="none",styleMap2["touch-action"]="none");for(var i2=0;i2<CRp.CANVAS_LAYERS;i2++){var canvas=r2.data.canvases[i2]=document2.createElement("canvas"),type3=CRp.CANVAS_TYPES[i2];r2.data.contexts[i2]=canvas.getContext(type3),r2.data.contexts[i2]||error("Could not create canvas of type "+type3),Object.keys(styleMap2).forEach(function(k2){canvas.style[k2]=styleMap2[k2]}),canvas.style.position="absolute",canvas.setAttribute("data-id","layer"+i2),canvas.style.zIndex=String(CRp.CANVAS_LAYERS-i2),r2.data.canvasContainer.appendChild(canvas),r2.data.canvasNeedsRedraw[i2]=!1}r2.data.topCanvas=r2.data.canvases[0],r2.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),r2.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),r2.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag"),r2.data.canvases[CRp.WEBGL]&&r2.data.canvases[CRp.WEBGL].setAttribute("data-id","layer"+CRp.WEBGL+"-webgl");for(i2=0;i2<CRp.BUFFER_COUNT;i2++)r2.data.bufferCanvases[i2]=document2.createElement("canvas"),r2.data.bufferContexts[i2]=r2.data.bufferCanvases[i2].getContext("2d"),r2.data.bufferCanvases[i2].style.position="absolute",r2.data.bufferCanvases[i2].setAttribute("data-id","buffer"+i2),r2.data.bufferCanvases[i2].style.zIndex=String(-i2-1),r2.data.bufferCanvases[i2].style.visibility="hidden";r2.pathsEnabled=!0;var emptyBb=makeBoundingBox(),getBoxCenter=__name(function(bb){return{x:(bb.x1+bb.x2)/2,y:(bb.y1+bb.y2)/2}},"getBoxCenter"),getCenterOffset=__name(function(bb){return{x:-bb.w/2,y:-bb.h/2}},"getCenterOffset"),backgroundTimestampHasChanged=__name(function(ele){var _p=ele[0]._private;return!(_p.oldBackgroundTimestamp===_p.backgroundTimestamp)},"backgroundTimestampHasChanged"),getStyleKey=__name(function(ele){return ele[0]._private.nodeKey},"getStyleKey"),getLabelKey=__name(function(ele){return ele[0]._private.labelStyleKey},"getLabelKey"),getSourceLabelKey=__name(function(ele){return ele[0]._private.sourceLabelStyleKey},"getSourceLabelKey"),getTargetLabelKey=__name(function(ele){return ele[0]._private.targetLabelStyleKey},"getTargetLabelKey"),drawElement=__name(function(context,ele,bb,scaledLabelShown,useEleOpacity){return r2.drawElement(context,ele,bb,!1,!1,useEleOpacity)},"drawElement"),drawLabel4=__name(function(context,ele,bb,scaledLabelShown,useEleOpacity){return r2.drawElementText(context,ele,bb,scaledLabelShown,"main",useEleOpacity)},"drawLabel"),drawSourceLabel=__name(function(context,ele,bb,scaledLabelShown,useEleOpacity){return r2.drawElementText(context,ele,bb,scaledLabelShown,"source",useEleOpacity)},"drawSourceLabel"),drawTargetLabel=__name(function(context,ele,bb,scaledLabelShown,useEleOpacity){return r2.drawElementText(context,ele,bb,scaledLabelShown,"target",useEleOpacity)},"drawTargetLabel"),getElementBox=__name(function(ele){return ele.boundingBox(),ele[0]._private.bodyBounds},"getElementBox"),getLabelBox=__name(function(ele){return ele.boundingBox(),ele[0]._private.labelBounds.main||emptyBb},"getLabelBox"),getSourceLabelBox=__name(function(ele){return ele.boundingBox(),ele[0]._private.labelBounds.source||emptyBb},"getSourceLabelBox"),getTargetLabelBox=__name(function(ele){return ele.boundingBox(),ele[0]._private.labelBounds.target||emptyBb},"getTargetLabelBox"),isLabelVisibleAtScale=__name(function(ele,scaledLabelShown){return scaledLabelShown},"isLabelVisibleAtScale"),getElementRotationPoint=__name(function(ele){return getBoxCenter(getElementBox(ele))},"getElementRotationPoint"),addTextMargin=__name(function(prefix,pt,ele){var pre=prefix?prefix+"-":"";return{x:pt.x+ele.pstyle(pre+"text-margin-x").pfValue,y:pt.y+ele.pstyle(pre+"text-margin-y").pfValue}},"addTextMargin"),getRsPt=__name(function(ele,x5,y6){var rs=ele[0]._private.rscratch;return{x:rs[x5],y:rs[y6]}},"getRsPt"),getLabelRotationPoint=__name(function(ele){return addTextMargin("",getRsPt(ele,"labelX","labelY"),ele)},"getLabelRotationPoint"),getSourceLabelRotationPoint=__name(function(ele){return addTextMargin("source",getRsPt(ele,"sourceLabelX","sourceLabelY"),ele)},"getSourceLabelRotationPoint"),getTargetLabelRotationPoint=__name(function(ele){return addTextMargin("target",getRsPt(ele,"targetLabelX","targetLabelY"),ele)},"getTargetLabelRotationPoint"),getElementRotationOffset=__name(function(ele){return getCenterOffset(getElementBox(ele))},"getElementRotationOffset"),getSourceLabelRotationOffset=__name(function(ele){return getCenterOffset(getSourceLabelBox(ele))},"getSourceLabelRotationOffset"),getTargetLabelRotationOffset=__name(function(ele){return getCenterOffset(getTargetLabelBox(ele))},"getTargetLabelRotationOffset"),getLabelRotationOffset=__name(function(ele){var bb=getLabelBox(ele),p3=getCenterOffset(getLabelBox(ele));if(ele.isNode()){switch(ele.pstyle("text-halign").value){case"left":p3.x=-bb.w-(bb.leftPad||0);break;case"right":p3.x=-(bb.rightPad||0)}switch(ele.pstyle("text-valign").value){case"top":p3.y=-bb.h-(bb.topPad||0);break;case"bottom":p3.y=-(bb.botPad||0)}}return p3},"getLabelRotationOffset"),eleTxrCache=r2.data.eleTxrCache=new ElementTextureCache(r2,{getKey:getStyleKey,doesEleInvalidateKey:backgroundTimestampHasChanged,drawElement:drawElement,getBoundingBox:getElementBox,getRotationPoint:getElementRotationPoint,getRotationOffset:getElementRotationOffset,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),lblTxrCache=r2.data.lblTxrCache=new ElementTextureCache(r2,{getKey:getLabelKey,drawElement:drawLabel4,getBoundingBox:getLabelBox,getRotationPoint:getLabelRotationPoint,getRotationOffset:getLabelRotationOffset,isVisible:isLabelVisibleAtScale}),slbTxrCache=r2.data.slbTxrCache=new ElementTextureCache(r2,{getKey:getSourceLabelKey,drawElement:drawSourceLabel,getBoundingBox:getSourceLabelBox,getRotationPoint:getSourceLabelRotationPoint,getRotationOffset:getSourceLabelRotationOffset,isVisible:isLabelVisibleAtScale}),tlbTxrCache=r2.data.tlbTxrCache=new ElementTextureCache(r2,{getKey:getTargetLabelKey,drawElement:drawTargetLabel,getBoundingBox:getTargetLabelBox,getRotationPoint:getTargetLabelRotationPoint,getRotationOffset:getTargetLabelRotationOffset,isVisible:isLabelVisibleAtScale}),lyrTxrCache=r2.data.lyrTxrCache=new LayeredTextureCache(r2);r2.onUpdateEleCalcs(__name(function(willDraw,eles){eleTxrCache.invalidateElements(eles),lblTxrCache.invalidateElements(eles),slbTxrCache.invalidateElements(eles),tlbTxrCache.invalidateElements(eles),lyrTxrCache.invalidateElements(eles);for(var _i=0;_i<eles.length;_i++){var _p=eles[_i]._private;_p.oldBackgroundTimestamp=_p.backgroundTimestamp}},"invalidateTextureCaches"));var refineInLayers=__name(function(reqs){for(var i3=0;i3<reqs.length;i3++)lyrTxrCache.enqueueElementRefinement(reqs[i3].ele)},"refineInLayers");eleTxrCache.onDequeue(refineInLayers),lblTxrCache.onDequeue(refineInLayers),slbTxrCache.onDequeue(refineInLayers),tlbTxrCache.onDequeue(refineInLayers),options2.webgl&&r2.initWebgl(options2,{getStyleKey:getStyleKey,getLabelKey:getLabelKey,getSourceLabelKey:getSourceLabelKey,getTargetLabelKey:getTargetLabelKey,drawElement:drawElement,drawLabel:drawLabel4,drawSourceLabel:drawSourceLabel,drawTargetLabel:drawTargetLabel,getElementBox:getElementBox,getLabelBox:getLabelBox,getSourceLabelBox:getSourceLabelBox,getTargetLabelBox:getTargetLabelBox,getElementRotationPoint:getElementRotationPoint,getElementRotationOffset:getElementRotationOffset,getLabelRotationPoint:getLabelRotationPoint,getSourceLabelRotationPoint:getSourceLabelRotationPoint,getTargetLabelRotationPoint:getTargetLabelRotationPoint,getLabelRotationOffset:getLabelRotationOffset,getSourceLabelRotationOffset:getSourceLabelRotationOffset,getTargetLabelRotationOffset:getTargetLabelRotationOffset})}function setExtension(type3,name,registrant){var ext=registrant,overrideErr=__name(function(field){warn("Can not register `"+name+"` for `"+type3+"` since `"+field+"` already exists in the prototype and can not be overridden")},"overrideErr");if("core"===type3){if(Core.prototype[name])return overrideErr(name);Core.prototype[name]=registrant}else if("collection"===type3){if(Collection.prototype[name])return overrideErr(name);Collection.prototype[name]=registrant}else if("layout"===type3){for(var Layout2=__name(function(options2){this.options=options2,registrant.call(this,options2),plainObject(this._private)||(this._private={}),this._private.cy=options2.cy,this._private.listeners=[],this.createEmitter()},"Layout"),layoutProto=Layout2.prototype=Object.create(registrant.prototype),optLayoutFns=[],i2=0;i2<optLayoutFns.length;i2++){var fnName=optLayoutFns[i2];layoutProto[fnName]=layoutProto[fnName]||function(){return this}}layoutProto.start&&!layoutProto.run?layoutProto.run=function(){return this.start(),this}:!layoutProto.start&&layoutProto.run&&(layoutProto.start=function(){return this.run(),this});var regStop=registrant.prototype.stop;layoutProto.stop=function(){var opts=this.options;if(opts&&opts.animate){var anis=this.animations;if(anis)for(var _i=0;_i<anis.length;_i++)anis[_i].stop()}return regStop?regStop.call(this):this.emit("layoutstop"),this},layoutProto.destroy||(layoutProto.destroy=function(){return this}),layoutProto.cy=function(){return this._private.cy};var getCy=__name(function(layout6){return layout6._private.cy},"getCy"),emitterOpts={addEventFields:__name(function(layout6,evt){evt.layout=layout6,evt.cy=getCy(layout6),evt.target=layout6},"addEventFields"),bubble:__name(function(){return!0},"bubble"),parent:__name(function(layout6){return getCy(layout6)},"parent")};extend4(layoutProto,{createEmitter:__name(function(){return this._private.emitter=new Emitter(emitterOpts,this),this},"createEmitter"),emitter:__name(function(){return this._private.emitter},"emitter"),on:__name(function(evt,cb){return this.emitter().on(evt,cb),this},"on"),one:__name(function(evt,cb){return this.emitter().one(evt,cb),this},"one"),once:__name(function(evt,cb){return this.emitter().one(evt,cb),this},"once"),removeListener:__name(function(evt,cb){return this.emitter().removeListener(evt,cb),this},"removeListener"),removeAllListeners:__name(function(){return this.emitter().removeAllListeners(),this},"removeAllListeners"),emit:__name(function(evt,params){return this.emitter().emit(evt,params),this},"emit")}),define2.eventAliasesOn(layoutProto),ext=Layout2}else if("renderer"===type3&&"null"!==name&&"base"!==name){var BaseRenderer3=getExtension("renderer","base"),bProto=BaseRenderer3.prototype,RegistrantRenderer=registrant,rProto=registrant.prototype,Renderer=__name(function(){BaseRenderer3.apply(this,arguments),RegistrantRenderer.apply(this,arguments)},"Renderer"),proto=Renderer.prototype;for(var pName in bProto){var pVal=bProto[pName];if(null!=rProto[pName])return overrideErr(pName);proto[pName]=pVal}for(var _pName in rProto)proto[_pName]=rProto[_pName];bProto.clientFunctions.forEach(function(name2){proto[name2]=proto[name2]||function(){error("Renderer does not implement `renderer."+name2+"()` on its prototype")}}),ext=Renderer}else if("__proto__"===type3||"constructor"===type3||"prototype"===type3)return error(type3+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[type3,name],value:ext})}function getExtension(type3,name){return getMap({map:extensions,keys:[type3,name]})}function setModule(type3,name,moduleType,moduleName,registrant){return setMap({map:modules,keys:[type3,name,moduleType,moduleName],value:registrant})}function getModule(type3,name,moduleType,moduleName){return getMap({map:modules,keys:[type3,name,moduleType,moduleName]})}var import_cytoscape_cose_bilkent,init_cytoscape_esm=__esm({"../../node_modules/.pnpm/cytoscape@3.33.1/node_modules/cytoscape/dist/cytoscape.esm.mjs"(){for(__name(_arrayLikeToArray,"_arrayLikeToArray"),__name(_arrayWithHoles,"_arrayWithHoles"),__name(_arrayWithoutHoles,"_arrayWithoutHoles"),__name(_classCallCheck,"_classCallCheck"),__name(_defineProperties,"_defineProperties"),__name(_createClass,"_createClass"),__name(_createForOfIteratorHelper,"_createForOfIteratorHelper"),__name(_defineProperty$1,"_defineProperty$1"),__name(_iterableToArray,"_iterableToArray"),__name(_iterableToArrayLimit,"_iterableToArrayLimit"),__name(_nonIterableRest,"_nonIterableRest"),__name(_nonIterableSpread,"_nonIterableSpread"),__name(_slicedToArray,"_slicedToArray"),__name(_toConsumableArray,"_toConsumableArray"),__name(_toPrimitive,"_toPrimitive"),__name(_toPropertyKey,"_toPropertyKey"),__name(_typeof,"_typeof"),__name(_unsupportedIterableToArray,"_unsupportedIterableToArray"),_window="undefined"==typeof window?null:window,navigator2=_window?_window.navigator:null,_window&&_window.document,typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele="undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement),instanceStr=__name(function(obj){return obj&&obj.instanceString&&fn$6(obj.instanceString)?obj.instanceString():null},"instanceStr"),string=__name(function(obj){return null!=obj&&_typeof(obj)==typeofstr},"string"),fn$6=__name(function(obj){return null!=obj&&_typeof(obj)===typeoffn},"fn"),array2=__name(function(obj){return!elementOrCollection(obj)&&(Array.isArray?Array.isArray(obj):null!=obj&&obj instanceof Array)},"array"),plainObject=__name(function(obj){return null!=obj&&_typeof(obj)===typeofobj&&!array2(obj)&&obj.constructor===Object},"plainObject"),object=__name(function(obj){return null!=obj&&_typeof(obj)===typeofobj},"object"),number$1=__name(function(obj){return null!=obj&&_typeof(obj)===_typeof(1)&&!isNaN(obj)},"number"),integer=__name(function(obj){return number$1(obj)&&Math.floor(obj)===obj},"integer"),htmlElement=__name(function(obj){return"undefined"===typeofhtmlele?void 0:null!=obj&&obj instanceof HTMLElement},"htmlElement"),elementOrCollection=__name(function(obj){return element(obj)||collection(obj)},"elementOrCollection"),element=__name(function(obj){return"collection"===instanceStr(obj)&&obj._private.single},"element"),collection=__name(function(obj){return"collection"===instanceStr(obj)&&!obj._private.single},"collection"),core2=__name(function(obj){return"core"===instanceStr(obj)},"core"),stylesheet=__name(function(obj){return"stylesheet"===instanceStr(obj)},"stylesheet"),event=__name(function(obj){return"event"===instanceStr(obj)},"event"),emptyString=__name(function(obj){return null==obj||!(""!==obj&&!obj.match(/^\s+$/))},"emptyString"),domElement=__name(function(obj){return"undefined"!=typeof HTMLElement&&obj instanceof HTMLElement},"domElement"),boundingBox=__name(function(obj){return plainObject(obj)&&number$1(obj.x1)&&number$1(obj.x2)&&number$1(obj.y1)&&number$1(obj.y2)},"boundingBox"),promise=__name(function(obj){return object(obj)&&fn$6(obj.then)},"promise"),ms=__name(function(){return navigator2&&navigator2.userAgent.match(/msie|trident|edge/i)},"ms"),memoize2=__name(function(fn3,keyFn){keyFn||(keyFn=__name(function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var args=[],i2=0;i2<arguments.length;i2++)args.push(arguments[i2]);return args.join("$")},"keyFn"));var _memoizedFn=__name(function(){var ret,args=arguments,k2=keyFn.apply(this,args),cache3=_memoizedFn.cache;return(ret=cache3[k2])||(ret=cache3[k2]=fn3.apply(this,args)),ret},"memoizedFn");return _memoizedFn.cache={},_memoizedFn},"memoize"),camel2dash=memoize2(function(str2){return str2.replace(/([A-Z])/g,function(v3){return"-"+v3.toLowerCase()})}),dash2camel=memoize2(function(str2){return str2.replace(/(-\w)/g,function(v3){return v3[1].toUpperCase()})}),prependCamel=memoize2(function(prefix,str2){return prefix+str2[0].toUpperCase()+str2.substring(1)},function(prefix,str2){return prefix+"$"+str2}),capitalize=__name(function(str2){return emptyString(str2)?str2:str2.charAt(0).toUpperCase()+str2.substring(1)},"capitalize"),endsWith=__name(function(string3,suffix){return string3.slice(-1*suffix.length)===suffix},"endsWith"),rgba3="rgb[a]?\\(("+(number6="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))")+"[%]?)\\s*,\\s*("+number6+"[%]?)\\s*,\\s*("+number6+"[%]?)(?:\\s*,\\s*("+number6+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number6+"[%]?)\\s*,\\s*(?:"+number6+"[%]?)\\s*,\\s*(?:"+number6+"[%]?)(?:\\s*,\\s*(?:"+number6+"))?\\)",hsla2="hsl[a]?\\(("+number6+")\\s*,\\s*("+number6+"[%])\\s*,\\s*("+number6+"[%])(?:\\s*,\\s*("+number6+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number6+")\\s*,\\s*(?:"+number6+"[%])\\s*,\\s*(?:"+number6+"[%])(?:\\s*,\\s*(?:"+number6+"))?\\)",ascending3=__name(function(a2,b3){return a2<b3?-1:a2>b3?1:0},"ascending"),descending2=__name(function(a2,b3){return-1*ascending3(a2,b3)},"descending"),extend4=null!=Object.assign?Object.assign.bind(Object):function(tgt){for(var args=arguments,i2=1;i2<args.length;i2++){var obj=args[i2];if(null!=obj)for(var keys2=Object.keys(obj),j3=0;j3<keys2.length;j3++){var k2=keys2[j3];tgt[k2]=obj[k2]}}return tgt},hex2tuple=__name(function(hex2){if((4===hex2.length||7===hex2.length)&&"#"===hex2[0]){var r2,g2,b3;return 4===hex2.length?(r2=parseInt(hex2[1]+hex2[1],16),g2=parseInt(hex2[2]+hex2[2],16),b3=parseInt(hex2[3]+hex2[3],16)):(r2=parseInt(hex2[1]+hex2[2],16),g2=parseInt(hex2[3]+hex2[4],16),b3=parseInt(hex2[5]+hex2[6],16)),[r2,g2,b3]}},"hex2tuple"),hsl2tuple=__name(function(hsl2){var ret,h3,s2,l4,a2,r2,g2,b3;function hue2rgb(p4,q4,t4){return t4<0&&(t4+=1),t4>1&&(t4-=1),t4<1/6?p4+6*(q4-p4)*t4:t4<.5?q4:t4<2/3?p4+(q4-p4)*(2/3-t4)*6:p4}__name(hue2rgb,"hue2rgb");var m3=new RegExp("^"+hsla2+"$").exec(hsl2);if(m3){if((h3=parseInt(m3[1]))<0?h3=(360- -1*h3%360)%360:h3>360&&(h3%=360),h3/=360,(s2=parseFloat(m3[2]))<0||s2>100)return;if(s2/=100,(l4=parseFloat(m3[3]))<0||l4>100)return;if(l4/=100,void 0!==(a2=m3[4])&&((a2=parseFloat(a2))<0||a2>1))return;if(0===s2)r2=g2=b3=Math.round(255*l4);else{var q3=l4<.5?l4*(1+s2):l4+s2-l4*s2,p3=2*l4-q3;r2=Math.round(255*hue2rgb(p3,q3,h3+1/3)),g2=Math.round(255*hue2rgb(p3,q3,h3)),b3=Math.round(255*hue2rgb(p3,q3,h3-1/3))}ret=[r2,g2,b3,a2]}return ret},"hsl2tuple"),rgb2tuple=__name(function(rgb2){var ret,m3=new RegExp("^"+rgba3+"$").exec(rgb2);if(m3){ret=[];for(var isPct=[],i2=1;i2<=3;i2++){var channel2=m3[i2];if("%"===channel2[channel2.length-1]&&(isPct[i2]=!0),channel2=parseFloat(channel2),isPct[i2]&&(channel2=channel2/100*255),channel2<0||channel2>255)return;ret.push(Math.floor(channel2))}var atLeastOneIsPct=isPct[1]||isPct[2]||isPct[3],allArePct=isPct[1]&&isPct[2]&&isPct[3];if(atLeastOneIsPct&&!allArePct)return;var alpha=m3[4];if(void 0!==alpha){if((alpha=parseFloat(alpha))<0||alpha>1)return;ret.push(alpha)}}return ret},"rgb2tuple"),colorname2tuple=__name(function(color2){return colors[color2.toLowerCase()]},"colorname2tuple"),color2tuple=__name(function(color2){return(array2(color2)?color2:null)||colorname2tuple(color2)||hex2tuple(color2)||rgb2tuple(color2)||hsl2tuple(color2)},"color2tuple"),colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=__name(function(options2){for(var obj=options2.map,keys2=options2.keys,l4=keys2.length,i2=0;i2<l4;i2++){var key=keys2[i2];if(plainObject(key))throw Error("Tried to set map with object key");i2<keys2.length-1?(null==obj[key]&&(obj[key]={}),obj=obj[key]):obj[key]=options2.value}},"setMap"),getMap=__name(function(options2){for(var obj=options2.map,keys2=options2.keys,l4=keys2.length,i2=0;i2<l4;i2++){var key=keys2[i2];if(plainObject(key))throw Error("Tried to get map with object key");if(null==(obj=obj[key]))return obj}return obj},"getMap"),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},__name(getDefaultExportFromCjs,"getDefaultExportFromCjs"),__name(requireIsObject,"requireIsObject"),__name(require_freeGlobal,"require_freeGlobal"),__name(require_root,"require_root"),__name(requireNow,"requireNow"),__name(require_trimmedEndIndex,"require_trimmedEndIndex"),__name(require_baseTrim,"require_baseTrim"),__name(require_Symbol,"require_Symbol"),__name(require_getRawTag,"require_getRawTag"),__name(require_objectToString,"require_objectToString"),__name(require_baseGetTag,"require_baseGetTag"),__name(requireIsObjectLike,"requireIsObjectLike"),__name(requireIsSymbol,"requireIsSymbol"),__name(requireToNumber,"requireToNumber"),__name(requireDebounce,"requireDebounce"),debounceExports=requireDebounce(),debounce=getDefaultExportFromCjs(debounceExports),performance$1=_window?_window.performance:null,pnow=performance$1&&performance$1.now?function(){return performance$1.now()}:function(){return Date.now()},raf=function(){if(_window){if(_window.requestAnimationFrame)return function(fn3){_window.requestAnimationFrame(fn3)};if(_window.mozRequestAnimationFrame)return function(fn3){_window.mozRequestAnimationFrame(fn3)};if(_window.webkitRequestAnimationFrame)return function(fn3){_window.webkitRequestAnimationFrame(fn3)};if(_window.msRequestAnimationFrame)return function(fn3){_window.msRequestAnimationFrame(fn3)}}return function(fn3){fn3&&setTimeout(function(){fn3(pnow())},1e3/60)}}(),requestAnimationFrame2=__name(function(fn3){return raf(fn3)},"requestAnimationFrame"),performanceNow=pnow,hashIterableInts=__name(function(iterator){for(var entry,hash=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;!(entry=iterator.next()).done;)hash=65599*hash+entry.value|0;return hash},"hashIterableInts"),hashInt=__name(function(num){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261)+num|0},"hashInt"),hashIntAlt=__name(function(num){var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(seed<<5)+seed+num|0},"hashIntAlt"),combineHashes=__name(function(hash1,hash2){return 2097152*hash1+hash2},"combineHashes"),combineHashesArray=__name(function(hashes){return 2097152*hashes[0]+hashes[1]},"combineHashesArray"),hashArrays=__name(function(hashes1,hashes2){return[hashInt(hashes1[0],hashes2[0]),hashIntAlt(hashes1[1],hashes2[1])]},"hashArrays"),hashIntsArray=__name(function(ints,seed){var entry={value:0,done:!1},i2=0,length2=ints.length;return hashIterableInts({next:__name(function(){return i2<length2?entry.value=ints[i2++]:entry.done=!0,entry},"next")},seed)},"hashIntsArray"),hashString=__name(function(str2,seed){var entry={value:0,done:!1},i2=0,length2=str2.length;return hashIterableInts({next:__name(function(){return i2<length2?entry.value=str2.charCodeAt(i2++):entry.done=!0,entry},"next")},seed)},"hashString"),hashStrings=__name(function(){return hashStringsArray(arguments)},"hashStrings"),hashStringsArray=__name(function(strs){for(var hash,i2=0;i2<strs.length;i2++){var str2=strs[i2];hash=0===i2?hashString(str2):hashString(str2,hash)}return hash},"hashStringsArray"),__name(rotatePoint,"rotatePoint"),movePointByBoxAspect=__name(function(x5,y6,boxX,boxY,skewX,skewY){return{x:(x5-boxX)*skewX+boxX,y:(y6-boxY)*skewY+boxY}},"movePointByBoxAspect"),__name(rotatePosAndSkewByBox,"rotatePosAndSkewByBox"),warningsEnabled=!0,warnSupported=null!=console.warn,traceSupported=null!=console.trace,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=__name(function(){return!0},"trueify"),falsify=__name(function(){return!1},"falsify"),zeroify=__name(function(){return 0},"zeroify"),noop$1=__name(function(){},"noop"),error=__name(function(msg){throw new Error(msg)},"error"),warnings=__name(function(enabled){if(void 0===enabled)return warningsEnabled;warningsEnabled=!!enabled},"warnings"),warn=__name(function(msg){warnings()&&(warnSupported?console.warn(msg):(console.log(msg),traceSupported&&console.trace()))},"warn"),clone3=__name(function(obj){return extend4({},obj)},"clone"),copy3=__name(function(obj){return null==obj?obj:array2(obj)?obj.slice():plainObject(obj)?clone3(obj):obj},"copy"),copyArray2=__name(function(arr){return arr.slice()},"copyArray"),uuid=__name(function(a2,b3){for(b3=a2="";a2++<36;b3+=51*a2&52?(15^a2?8^Math.random()*(20^a2?16:4):4).toString(16):"-");return b3},"uuid"),_staticEmptyObject={},staticEmptyObject=__name(function(){return _staticEmptyObject},"staticEmptyObject"),defaults$g=__name(function(_defaults){var keys2=Object.keys(_defaults);return function(opts){for(var filledOpts={},i2=0;i2<keys2.length;i2++){var key=keys2[i2],optVal=null==opts?void 0:opts[key];filledOpts[key]=void 0===optVal?_defaults[key]:optVal}return filledOpts}},"defaults"),removeFromArray=__name(function(arr,ele,oneCopy){for(var i2=arr.length-1;i2>=0;i2--)arr[i2]===ele&&arr.splice(i2,1)},"removeFromArray"),clearArray=__name(function(arr){arr.splice(0,arr.length)},"clearArray"),push=__name(function(arr,otherArr){for(var i2=0;i2<otherArr.length;i2++){var el=otherArr[i2];arr.push(el)}},"push"),getPrefixedProperty=__name(function(obj,propName,prefix){return prefix&&(propName=prependCamel(prefix,propName)),obj[propName]},"getPrefixedProperty"),setPrefixedProperty=__name(function(obj,propName,prefix,value2){prefix&&(propName=prependCamel(prefix,propName)),obj[propName]=value2},"setPrefixedProperty"),ObjectMap=function(){function ObjectMap2(){_classCallCheck(this,ObjectMap2),this._obj={}}return __name(ObjectMap2,"ObjectMap"),_createClass(ObjectMap2,[{key:"set",value:__name(function(key,val){return this._obj[key]=val,this},"set")},{key:"delete",value:__name(function(key){return this._obj[key]=void 0,this},"_delete")},{key:"clear",value:__name(function(){this._obj={}},"clear")},{key:"has",value:__name(function(key){return void 0!==this._obj[key]},"has")},{key:"get",value:__name(function(key){return this._obj[key]},"get")}])}(),Map$1="undefined"!=typeof Map?Map:ObjectMap,ObjectSet=function(){function ObjectSet2(arrayOrObjectSet){if(_classCallCheck(this,ObjectSet2),this._obj=Object.create(null),this.size=0,null!=arrayOrObjectSet){var arr;arr=null!=arrayOrObjectSet.instanceString&&arrayOrObjectSet.instanceString()===this.instanceString()?arrayOrObjectSet.toArray():arrayOrObjectSet;for(var i2=0;i2<arr.length;i2++)this.add(arr[i2])}}return __name(ObjectSet2,"ObjectSet"),_createClass(ObjectSet2,[{key:"instanceString",value:__name(function(){return"set"},"instanceString")},{key:"add",value:__name(function(val){var o2=this._obj;1!==o2[val]&&(o2[val]=1,this.size++)},"add")},{key:"delete",value:__name(function(val){var o2=this._obj;1===o2[val]&&(o2[val]=0,this.size--)},"_delete")},{key:"clear",value:__name(function(){this._obj=Object.create(null)},"clear")},{key:"has",value:__name(function(val){return 1===this._obj[val]},"has")},{key:"toArray",value:__name(function(){var _this=this;return Object.keys(this._obj).filter(function(key){return _this.has(key)})},"toArray")},{key:"forEach",value:__name(function(callback,thisArg){return this.toArray().forEach(callback,thisArg)},"forEach")}])}(),Set$1="undefined"!==("undefined"==typeof Set?"undefined":_typeof(Set))?Set:ObjectSet,Element=__name(function(cy,params){var restore=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==cy&&void 0!==params&&core2(cy)){var group2=params.group;if(null==group2&&(group2=params.data&&null!=params.data.source&&null!=params.data.target?"edges":"nodes"),"nodes"===group2||"edges"===group2){this.length=1,this[0]=this;var _p=this._private={cy:cy,single:!0,data:params.data||{},position:params.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:group2,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!params.selected,selectable:void 0===params.selectable||!!params.selectable,locked:!!params.locked,grabbed:!1,grabbable:void 0===params.grabbable||!!params.grabbable,pannable:void 0===params.pannable?"edges"===group2:!!params.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:params.scratch||{},edges:[],children:[],parent:params.parent&&params.parent.isNode()?params.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==_p.position.x&&(_p.position.x=0),null==_p.position.y&&(_p.position.y=0),params.renderedPosition){var rpos=params.renderedPosition,pan2=cy.pan(),zoom2=cy.zoom();_p.position={x:(rpos.x-pan2.x)/zoom2,y:(rpos.y-pan2.y)/zoom2}}var classes3=[];array2(params.classes)?classes3=params.classes:string(params.classes)&&(classes3=params.classes.split(/\s+/));for(var i2=0,l4=classes3.length;i2<l4;i2++){var cls=classes3[i2];cls&&""!==cls&&_p.classes.add(cls)}this.createEmitter(),(void 0===restore||restore)&&this.restore();var bypass=params.style||params.css;bypass&&(warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(bypass))}else error("An element must be of type `nodes` or `edges`; you specified `"+group2+"`")}else error("An element must have a core reference and parameters set")},"Element"),defineSearch=__name(function(params){return params={bfs:params.bfs||!params.dfs,dfs:params.dfs||!params.bfs},__name(function(roots,fn3,directed){var options2;plainObject(roots)&&!elementOrCollection(roots)&&(roots=(options2=roots).roots||options2.root,fn3=options2.visit,directed=options2.directed),directed=2!==arguments.length||fn$6(fn3)?directed:fn3,fn3=fn$6(fn3)?fn3:function(){};for(var found,cy=this._private.cy,v3=roots=string(roots)?this.filter(roots):roots,Q3=[],connectedNodes=[],connectedBy={},id2depth={},V3={},j3=0,_this$byGroup=this.byGroup(),nodes5=_this$byGroup.nodes,edges3=_this$byGroup.edges,i2=0;i2<v3.length;i2++){var vi2=v3[i2],viId=vi2.id();vi2.isNode()&&(Q3.unshift(vi2),params.bfs&&(V3[viId]=!0,connectedNodes.push(vi2)),id2depth[viId]=0)}for(var _ret,_loop=__name(function(){var v5=params.bfs?Q3.shift():Q3.pop(),vId=v5.id();if(params.dfs){if(V3[vId])return 0;V3[vId]=!0,connectedNodes.push(v5)}var ret,depth=id2depth[vId],prevEdge=connectedBy[vId],src=null!=prevEdge?prevEdge.source():null,tgt=null!=prevEdge?prevEdge.target():null,prevNode=null==prevEdge?void 0:v5.same(src)?tgt[0]:src[0];if(!0===(ret=fn3(v5,prevEdge,prevNode,j3++,depth)))return found=v5,1;if(!1===ret)return 1;for(var vwEdges=v5.connectedEdges().filter(function(e4){return(!directed||e4.source().same(v5))&&edges3.has(e4)}),_i2=0;_i2<vwEdges.length;_i2++){var e3=vwEdges[_i2],w4=e3.connectedNodes().filter(function(n2){return!n2.same(v5)&&nodes5.has(n2)}),wId=w4.id();0===w4.length||V3[wId]||(w4=w4[0],Q3.push(w4),params.bfs&&(V3[wId]=!0,connectedNodes.push(w4)),connectedBy[wId]=e3,id2depth[wId]=id2depth[vId]+1)}},"_loop");0!==Q3.length&&(0===(_ret=_loop())||1!==_ret););for(var connectedEles=cy.collection(),_i=0;_i<connectedNodes.length;_i++){var node2=connectedNodes[_i],edge=connectedBy[node2.id()];null!=edge&&connectedEles.push(edge),connectedEles.push(node2)}return{path:cy.collection(connectedEles),found:cy.collection(found)}},"searchFn")},"defineSearch"),(elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})}).bfs=elesfn$v.breadthFirstSearch,elesfn$v.dfs=elesfn$v.depthFirstSearch,heap$1=(heap$2={exports:{}}).exports,__name(requireHeap$1,"requireHeap$1"),__name(requireHeap,"requireHeap"),heapExports=requireHeap(),Heap=getDefaultExportFromCjs(heapExports),dijkstraDefaults=defaults$g({root:null,weight:__name(function(edge){return 1},"weight"),directed:!1}),elesfn$u={dijkstra:__name(function(options2){if(!plainObject(options2)){var args=arguments;options2={root:args[0],weight:args[1],directed:args[2]}}var _dijkstraDefaults=dijkstraDefaults(options2),root3=_dijkstraDefaults.root,weight8=_dijkstraDefaults.weight,directed=_dijkstraDefaults.directed,eles=this,weightFn=weight8,source=string(root3)?this.filter(root3)[0]:root3[0],dist3={},prev2={},knownDist={},_this$byGroup=this.byGroup(),nodes5=_this$byGroup.nodes,edges3=_this$byGroup.edges;edges3.unmergeBy(function(ele){return ele.isLoop()});for(var getDist3=__name(function(node3){return dist3[node3.id()]},"getDist"),setDist=__name(function(node3,d3){dist3[node3.id()]=d3,Q3.updateItem(node3)},"setDist"),Q3=new Heap(function(a2,b3){return getDist3(a2)-getDist3(b3)}),i2=0;i2<nodes5.length;i2++){var node2=nodes5[i2];dist3[node2.id()]=node2.same(source)?0:1/0,Q3.push(node2)}for(var distBetween=__name(function(u3,v5){for(var smallestEdge,uvs=(directed?u3.edgesTo(v5):u3.edgesWith(v5)).intersect(edges3),smallestDistance=1/0,_i=0;_i<uvs.length;_i++){var edge=uvs[_i],_weight=weightFn(edge);(_weight<smallestDistance||!smallestEdge)&&(smallestDistance=_weight,smallestEdge=edge)}return{edge:smallestEdge,dist:smallestDistance}},"distBetween");Q3.size()>0;){var u2=Q3.pop(),smalletsDist=getDist3(u2),uid=u2.id();if(knownDist[uid]=smalletsDist,smalletsDist!==1/0)for(var neighbors=u2.neighborhood().intersect(nodes5),_i2=0;_i2<neighbors.length;_i2++){var v3=neighbors[_i2],vid=v3.id(),vDist=distBetween(u2,v3),alt=smalletsDist+vDist.dist;alt<getDist3(v3)&&(setDist(v3,alt),prev2[vid]={node:u2,edge:vDist.edge})}}return{distanceTo:__name(function(node3){var target=string(node3)?nodes5.filter(node3)[0]:node3[0];return knownDist[target.id()]},"distanceTo"),pathTo:__name(function(node3){var target=string(node3)?nodes5.filter(node3)[0]:node3[0],S4=[],u3=target,uid2=u3.id();if(target.length>0)for(S4.unshift(target);prev2[uid2];){var p3=prev2[uid2];S4.unshift(p3.edge),S4.unshift(p3.node),uid2=(u3=p3.node).id()}return eles.spawn(S4)},"pathTo")}},"dijkstra")},elesfn$t={kruskal:__name(function(weightFn){weightFn=weightFn||function(edge2){return 1};for(var _this$byGroup=this.byGroup(),nodes5=_this$byGroup.nodes,edges3=_this$byGroup.edges,numNodes=nodes5.length,forest=new Array(numNodes),A2=nodes5,findSetIndex=__name(function(ele){for(var i3=0;i3<forest.length;i3++){if(forest[i3].has(ele))return i3}},"findSetIndex"),i2=0;i2<numNodes;i2++)forest[i2]=this.spawn(nodes5[i2]);for(var S4=edges3.sort(function(a2,b3){return weightFn(a2)-weightFn(b3)}),_i=0;_i<S4.length;_i++){var edge=S4[_i],u2=edge.source()[0],v3=edge.target()[0],setUIndex=findSetIndex(u2),setVIndex=findSetIndex(v3),setU=forest[setUIndex],setV=forest[setVIndex];setUIndex!==setVIndex&&(A2.merge(edge),setU.merge(setV),forest.splice(setVIndex,1))}return A2},"kruskal")},aStarDefaults=defaults$g({root:null,goal:null,weight:__name(function(edge){return 1},"weight"),heuristic:__name(function(edge){return 0},"heuristic"),directed:!1}),elesfn$s={aStar:__name(function(options2){var cy=this.cy(),_aStarDefaults=aStarDefaults(options2),root3=_aStarDefaults.root,goal=_aStarDefaults.goal,heuristic2=_aStarDefaults.heuristic,directed=_aStarDefaults.directed,weight8=_aStarDefaults.weight;root3=cy.collection(root3)[0],goal=cy.collection(goal)[0];var cMin,cMinId,sid=root3.id(),tid=goal.id(),gScore={},fScore={},closedSetIds={},openSet=new Heap(function(a2,b3){return fScore[a2.id()]-fScore[b3.id()]}),openSetIds=new Set$1,cameFrom={},cameFromEdge={},addToOpenSet=__name(function(ele,id30){openSet.push(ele),openSetIds.add(id30)},"addToOpenSet"),popFromOpenSet=__name(function(){cMin=openSet.pop(),cMinId=cMin.id(),openSetIds.delete(cMinId)},"popFromOpenSet"),isInOpenSet=__name(function(id30){return openSetIds.has(id30)},"isInOpenSet");addToOpenSet(root3,sid),gScore[sid]=0,fScore[sid]=heuristic2(root3);for(var steps=0;openSet.size()>0;){if(popFromOpenSet(),steps++,cMinId===tid){for(var path4=[],pathNode=goal,pathNodeId=tid,pathEdge=cameFromEdge[pathNodeId];path4.unshift(pathNode),null!=pathEdge&&path4.unshift(pathEdge),null!=(pathNode=cameFrom[pathNodeId]);)pathEdge=cameFromEdge[pathNodeId=pathNode.id()];return{found:!0,distance:gScore[cMinId],path:this.spawn(path4),steps:steps}}closedSetIds[cMinId]=!0;for(var vwEdges=cMin._private.edges,i2=0;i2<vwEdges.length;i2++){var e3=vwEdges[i2];if(this.hasElementWithId(e3.id())&&(!directed||e3.data("source")===cMinId)){var wSrc=e3.source(),wTgt=e3.target(),w4=wSrc.id()!==cMinId?wSrc:wTgt,wid=w4.id();if(this.hasElementWithId(wid)&&!closedSetIds[wid]){var tempScore=gScore[cMinId]+weight8(e3);isInOpenSet(wid)?tempScore<gScore[wid]&&(gScore[wid]=tempScore,fScore[wid]=tempScore+heuristic2(w4),cameFrom[wid]=cMin,cameFromEdge[wid]=e3):(gScore[wid]=tempScore,fScore[wid]=tempScore+heuristic2(w4),addToOpenSet(w4,wid),cameFrom[wid]=cMin,cameFromEdge[wid]=e3)}}}}return{found:!1,distance:void 0,path:void 0,steps:steps}},"aStar")},floydWarshallDefaults=defaults$g({weight:__name(function(edge){return 1},"weight"),directed:!1}),elesfn$r={floydWarshall:__name(function(options2){for(var cy=this.cy(),_floydWarshallDefault=floydWarshallDefaults(options2),weight8=_floydWarshallDefault.weight,directed=_floydWarshallDefault.directed,weightFn=weight8,_this$byGroup=this.byGroup(),nodes5=_this$byGroup.nodes,edges3=_this$byGroup.edges,N3=nodes5.length,Nsq=N3*N3,indexOf2=__name(function(node2){return nodes5.indexOf(node2)},"indexOf"),atIndex=__name(function(i3){return nodes5[i3]},"atIndex"),dist3=new Array(Nsq),n2=0;n2<Nsq;n2++){var j3=n2%N3,i2=(n2-j3)/N3;dist3[n2]=i2===j3?0:1/0}for(var next3=new Array(Nsq),edgeNext=new Array(Nsq),_i=0;_i<edges3.length;_i++){var edge=edges3[_i],src=edge.source()[0],tgt=edge.target()[0];if(src!==tgt){var s2=indexOf2(src),t4=indexOf2(tgt),st2=s2*N3+t4,_weight=weightFn(edge);if(dist3[st2]>_weight&&(dist3[st2]=_weight,next3[st2]=t4,edgeNext[st2]=edge),!directed){var ts=t4*N3+s2;!directed&&dist3[ts]>_weight&&(dist3[ts]=_weight,next3[ts]=s2,edgeNext[ts]=edge)}}}for(var k2=0;k2<N3;k2++)for(var _i2=0;_i2<N3;_i2++)for(var ik=_i2*N3+k2,_j=0;_j<N3;_j++){var ij=_i2*N3+_j,kj=k2*N3+_j;dist3[ik]+dist3[kj]<dist3[ij]&&(dist3[ij]=dist3[ik]+dist3[kj],next3[ij]=next3[ik])}var getArgEle=__name(function(ele){return(string(ele)?cy.filter(ele):ele)[0]},"getArgEle"),indexOfArgEle=__name(function(ele){return indexOf2(getArgEle(ele))},"indexOfArgEle");return{distance:__name(function(from2,to){var i3=indexOfArgEle(from2),j4=indexOfArgEle(to);return dist3[i3*N3+j4]},"distance"),path:__name(function(from2,to){var i3=indexOfArgEle(from2),j4=indexOfArgEle(to),fromNode=atIndex(i3);if(i3===j4)return fromNode.collection();if(null==next3[i3*N3+j4])return cy.collection();var edge2,path5=cy.collection(),prev2=i3;for(path5.merge(fromNode);i3!==j4;)prev2=i3,i3=next3[i3*N3+j4],edge2=edgeNext[prev2*N3+i3],path5.merge(edge2),path5.merge(atIndex(i3));return path5},"path")}},"floydWarshall")},bellmanFordDefaults=defaults$g({weight:__name(function(edge){return 1},"weight"),directed:!1,root:null}),elesfn$q={bellmanFord:__name(function(options2){var _this=this,_bellmanFordDefaults=bellmanFordDefaults(options2),weight8=_bellmanFordDefaults.weight,directed=_bellmanFordDefaults.directed,root3=_bellmanFordDefaults.root,weightFn=weight8,eles=this,cy=this.cy(),_this$byGroup=this.byGroup(),edges3=_this$byGroup.edges,nodes5=_this$byGroup.nodes,numNodes=nodes5.length,infoMap=new Map$1,hasNegativeWeightCycle=!1,negativeWeightCycles=[];root3=cy.collection(root3)[0],edges3.unmergeBy(function(edge2){return edge2.isLoop()});for(var numEdges=edges3.length,getInfo3=__name(function(node3){var obj=infoMap.get(node3.id());return obj||(obj={},infoMap.set(node3.id(),obj)),obj},"getInfo"),getNodeFromTo=__name(function(to){return(string(to)?cy.$(to):to)[0]},"getNodeFromTo"),distanceTo=__name(function(to){return getInfo3(getNodeFromTo(to)).dist},"distanceTo"),pathTo=__name(function(to){for(var thisStart=arguments.length>1&&void 0!==arguments[1]?arguments[1]:root3,path4=[],node3=getNodeFromTo(to);;){if(null==node3)return _this.spawn();var _getInfo=getInfo3(node3),edge2=_getInfo.edge,pred=_getInfo.pred;if(path4.unshift(node3[0]),node3.same(thisStart)&&path4.length>0)break;null!=edge2&&path4.unshift(edge2),node3=pred}return eles.spawn(path4)},"pathTo"),i2=0;i2<numNodes;i2++){var node2=nodes5[i2],info2=getInfo3(node2);node2.same(root3)?info2.dist=0:info2.dist=1/0,info2.pred=null,info2.edge=null}for(var replacedEdge=!1,checkForEdgeReplacement=__name(function(node1,node22,edge2,info1,info22,weight9){var dist3=info1.dist+weight9;dist3<info22.dist&&!edge2.same(info1.edge)&&(info22.dist=dist3,info22.pred=node1,info22.edge=edge2,replacedEdge=!0)},"checkForEdgeReplacement"),_i=1;_i<numNodes;_i++){replacedEdge=!1;for(var e3=0;e3<numEdges;e3++){var edge=edges3[e3],src=edge.source(),tgt=edge.target(),_weight=weightFn(edge),srcInfo=getInfo3(src),tgtInfo=getInfo3(tgt);checkForEdgeReplacement(src,tgt,edge,srcInfo,tgtInfo,_weight),directed||checkForEdgeReplacement(tgt,src,edge,tgtInfo,srcInfo,_weight)}if(!replacedEdge)break}if(replacedEdge)for(var negativeWeightCycleIds=[],_e2=0;_e2<numEdges;_e2++){var _edge=edges3[_e2],_src=_edge.source(),_tgt=_edge.target(),_weight2=weightFn(_edge),srcDist=getInfo3(_src).dist,tgtDist=getInfo3(_tgt).dist;if(srcDist+_weight2<tgtDist||!directed&&tgtDist+_weight2<srcDist){if(hasNegativeWeightCycle||(warn("Graph contains a negative weight cycle for Bellman-Ford"),hasNegativeWeightCycle=!0),!1===options2.findNegativeWeightCycles)break;var negativeNodes=[];srcDist+_weight2<tgtDist&&negativeNodes.push(_src),!directed&&tgtDist+_weight2<srcDist&&negativeNodes.push(_tgt);for(var numNegativeNodes=negativeNodes.length,n2=0;n2<numNegativeNodes;n2++){var start3=negativeNodes[n2],cycle=[start3];cycle.push(getInfo3(start3).edge);for(var _node=getInfo3(start3).pred;-1===cycle.indexOf(_node);)cycle.push(_node),cycle.push(getInfo3(_node).edge),_node=getInfo3(_node).pred;for(var smallestId=(cycle=cycle.slice(cycle.indexOf(_node)))[0].id(),smallestIndex=0,c3=2;c3<cycle.length;c3+=2)cycle[c3].id()<smallestId&&(smallestId=cycle[c3].id(),smallestIndex=c3);(cycle=cycle.slice(smallestIndex).concat(cycle.slice(0,smallestIndex))).push(cycle[0]);var cycleId=cycle.map(function(el){return el.id()}).join(",");-1===negativeWeightCycleIds.indexOf(cycleId)&&(negativeWeightCycles.push(eles.spawn(cycle)),negativeWeightCycleIds.push(cycleId))}}}return{distanceTo:distanceTo,pathTo:pathTo,hasNegativeWeightCycle:hasNegativeWeightCycle,negativeWeightCycles:negativeWeightCycles}},"bellmanFord")},sqrt2=Math.sqrt(2),collapse=__name(function(edgeIndex,nodeMap,remainingEdges){0===remainingEdges.length&&error("Karger-Stein must be run on a connected (sub)graph");for(var edgeInfo=remainingEdges[edgeIndex],sourceIn=edgeInfo[1],targetIn=edgeInfo[2],partition1=nodeMap[sourceIn],partition2=nodeMap[targetIn],newEdges=remainingEdges,i2=newEdges.length-1;i2>=0;i2--){var edge=newEdges[i2],src=edge[1],tgt=edge[2];(nodeMap[src]===partition1&&nodeMap[tgt]===partition2||nodeMap[src]===partition2&&nodeMap[tgt]===partition1)&&newEdges.splice(i2,1)}for(var _i=0;_i<newEdges.length;_i++){var _edge=newEdges[_i];_edge[1]===partition2?(newEdges[_i]=_edge.slice(),newEdges[_i][1]=partition1):_edge[2]===partition2&&(newEdges[_i]=_edge.slice(),newEdges[_i][2]=partition1)}for(var _i2=0;_i2<nodeMap.length;_i2++)nodeMap[_i2]===partition2&&(nodeMap[_i2]=partition1);return newEdges},"collapse"),contractUntil=__name(function(metaNodeMap,remainingEdges,size4,sizeLimit){for(;size4>sizeLimit;){var edgeIndex=Math.floor(Math.random()*remainingEdges.length);remainingEdges=collapse(edgeIndex,metaNodeMap,remainingEdges),size4--}return remainingEdges},"contractUntil"),elesfn$p={kargerStein:__name(function(){var _this=this,_this$byGroup=this.byGroup(),nodes5=_this$byGroup.nodes,edges3=_this$byGroup.edges;edges3.unmergeBy(function(edge){return edge.isLoop()});var numNodes=nodes5.length,numEdges=edges3.length,numIter=Math.ceil(Math.pow(Math.log(numNodes)/Math.LN2,2)),stopSize=Math.floor(numNodes/sqrt2);if(!(numNodes<2)){for(var edgeIndexes=[],i2=0;i2<numEdges;i2++){var e3=edges3[i2];edgeIndexes.push([i2,nodes5.indexOf(e3.source()),nodes5.indexOf(e3.target())])}for(var minCutSize=1/0,minCutEdgeIndexes=[],minCutNodeMap=new Array(numNodes),metaNodeMap=new Array(numNodes),metaNodeMap2=new Array(numNodes),copyNodesMap=__name(function(from2,to){for(var _i3=0;_i3<numNodes;_i3++)to[_i3]=from2[_i3]},"copyNodesMap"),iter=0;iter<=numIter;iter++){for(var _i4=0;_i4<numNodes;_i4++)metaNodeMap[_i4]=_i4;var edgesState=contractUntil(metaNodeMap,edgeIndexes.slice(),numNodes,stopSize),edgesState2=edgesState.slice();copyNodesMap(metaNodeMap,metaNodeMap2);var res1=contractUntil(metaNodeMap,edgesState,stopSize,2),res2=contractUntil(metaNodeMap2,edgesState2,stopSize,2);res1.length<=res2.length&&res1.length<minCutSize?(minCutSize=res1.length,minCutEdgeIndexes=res1,copyNodesMap(metaNodeMap,minCutNodeMap)):res2.length<=res1.length&&res2.length<minCutSize&&(minCutSize=res2.length,minCutEdgeIndexes=res2,copyNodesMap(metaNodeMap2,minCutNodeMap))}for(var cut=this.spawn(minCutEdgeIndexes.map(function(e4){return edges3[e4[0]]})),partition1=this.spawn(),partition2=this.spawn(),witnessNodePartition=minCutNodeMap[0],_i5=0;_i5<minCutNodeMap.length;_i5++){var partitionId=minCutNodeMap[_i5],node2=nodes5[_i5];partitionId===witnessNodePartition?partition1.merge(node2):partition2.merge(node2)}var constructComponent=__name(function(subset){var component2=_this.spawn();return subset.forEach(function(node3){component2.merge(node3),node3.connectedEdges().forEach(function(edge){_this.contains(edge)&&!cut.contains(edge)&&component2.merge(edge)})}),component2},"constructComponent"),components3=[constructComponent(partition1),constructComponent(partition2)];return{cut:cut,components:components3,partition1:partition1,partition2:partition2}}error("At least 2 nodes are required for Karger-Stein algorithm")},"kargerStein")},copyPosition=__name(function(p3){return{x:p3.x,y:p3.y}},"copyPosition"),modelToRenderedPosition$1=__name(function(p3,zoom2,pan2){return{x:p3.x*zoom2+pan2.x,y:p3.y*zoom2+pan2.y}},"modelToRenderedPosition"),renderedToModelPosition=__name(function(p3,zoom2,pan2){return{x:(p3.x-pan2.x)/zoom2,y:(p3.y-pan2.y)/zoom2}},"renderedToModelPosition"),array2point=__name(function(arr){return{x:arr[0],y:arr[1]}},"array2point"),min5=__name(function(arr){for(var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,min9=1/0,i2=begin;i2<end2;i2++){var val=arr[i2];isFinite(val)&&(min9=Math.min(val,min9))}return min9},"min"),max5=__name(function(arr){for(var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,max10=-1/0,i2=begin;i2<end2;i2++){var val=arr[i2];isFinite(val)&&(max10=Math.max(val,max10))}return max10},"max"),mean=__name(function(arr){for(var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,total=0,n2=0,i2=begin;i2<end2;i2++){var val=arr[i2];isFinite(val)&&(total+=val,n2++)}return total/n2},"mean"),median=__name(function(arr){var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,sort3=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],includeHoles=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?arr=arr.slice(begin,end2):(end2<arr.length&&arr.splice(end2,arr.length-end2),begin>0&&arr.splice(0,begin));for(var off=0,i2=arr.length-1;i2>=0;i2--){var v3=arr[i2];includeHoles?isFinite(v3)||(arr[i2]=-1/0,off++):arr.splice(i2,1)}sort3&&arr.sort(function(a2,b3){return a2-b3});var len=arr.length,mid=Math.floor(len/2);return len%2!=0?arr[mid+1+off]:(arr[mid-1+off]+arr[mid+off])/2},"median"),deg2rad=__name(function(deg){return Math.PI*deg/180},"deg2rad"),getAngleFromDisp=__name(function(dispX,dispY){return Math.atan2(dispY,dispX)-Math.PI/2},"getAngleFromDisp"),log22=Math.log2||function(n2){return Math.log(n2)/Math.log(2)},signum=__name(function(x5){return x5>0?1:x5<0?-1:0},"signum"),dist=__name(function(p1,p22){return Math.sqrt(sqdist(p1,p22))},"dist"),sqdist=__name(function(p1,p22){var dx=p22.x-p1.x,dy=p22.y-p1.y;return dx*dx+dy*dy},"sqdist"),inPlaceSumNormalize=__name(function(v3){for(var length2=v3.length,total=0,i2=0;i2<length2;i2++)total+=v3[i2];for(var _i=0;_i<length2;_i++)v3[_i]=v3[_i]/total;return v3},"inPlaceSumNormalize"),qbezierAt=__name(function(p0,p1,p22,t4){return(1-t4)*(1-t4)*p0+2*(1-t4)*t4*p1+t4*t4*p22},"qbezierAt"),qbezierPtAt=__name(function(p0,p1,p22,t4){return{x:qbezierAt(p0.x,p1.x,p22.x,t4),y:qbezierAt(p0.y,p1.y,p22.y,t4)}},"qbezierPtAt"),lineAt=__name(function(p0,p1,t4,d3){var vec_x=p1.x-p0.x,vec_y=p1.y-p0.y,vecDist=dist(p0,p1),normVec_x=vec_x/vecDist,normVec_y=vec_y/vecDist;return t4=null==t4?0:t4,d3=null!=d3?d3:t4*vecDist,{x:p0.x+normVec_x*d3,y:p0.y+normVec_y*d3}},"lineAt"),bound=__name(function(min9,val,max10){return Math.max(min9,Math.min(max10,val))},"bound"),makeBoundingBox=__name(function(bb){if(null==bb)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=bb.x1&&null!=bb.y1){if(null!=bb.x2&&null!=bb.y2&&bb.x2>=bb.x1&&bb.y2>=bb.y1)return{x1:bb.x1,y1:bb.y1,x2:bb.x2,y2:bb.y2,w:bb.x2-bb.x1,h:bb.y2-bb.y1};if(null!=bb.w&&null!=bb.h&&bb.w>=0&&bb.h>=0)return{x1:bb.x1,y1:bb.y1,x2:bb.x1+bb.w,y2:bb.y1+bb.h,w:bb.w,h:bb.h}}},"makeBoundingBox"),copyBoundingBox=__name(function(bb){return{x1:bb.x1,x2:bb.x2,w:bb.w,y1:bb.y1,y2:bb.y2,h:bb.h}},"copyBoundingBox"),clearBoundingBox=__name(function(bb){bb.x1=1/0,bb.y1=1/0,bb.x2=-1/0,bb.y2=-1/0,bb.w=0,bb.h=0},"clearBoundingBox"),updateBoundingBox=__name(function(bb1,bb2){bb1.x1=Math.min(bb1.x1,bb2.x1),bb1.x2=Math.max(bb1.x2,bb2.x2),bb1.w=bb1.x2-bb1.x1,bb1.y1=Math.min(bb1.y1,bb2.y1),bb1.y2=Math.max(bb1.y2,bb2.y2),bb1.h=bb1.y2-bb1.y1},"updateBoundingBox"),expandBoundingBoxByPoint=__name(function(bb,x5,y6){bb.x1=Math.min(bb.x1,x5),bb.x2=Math.max(bb.x2,x5),bb.w=bb.x2-bb.x1,bb.y1=Math.min(bb.y1,y6),bb.y2=Math.max(bb.y2,y6),bb.h=bb.y2-bb.y1},"expandBoundingBoxByPoint"),expandBoundingBox=__name(function(bb){var padding2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return bb.x1-=padding2,bb.x2+=padding2,bb.y1-=padding2,bb.y2+=padding2,bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1,bb},"expandBoundingBox"),expandBoundingBoxSides=__name(function(bb){var top2,right3,bottom2,left3,padding2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===padding2.length)top2=right3=bottom2=left3=padding2[0];else if(2===padding2.length)top2=bottom2=padding2[0],left3=right3=padding2[1];else if(4===padding2.length){var _padding=_slicedToArray(padding2,4);top2=_padding[0],right3=_padding[1],bottom2=_padding[2],left3=_padding[3]}return bb.x1-=left3,bb.x2+=right3,bb.y1-=top2,bb.y2+=bottom2,bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1,bb},"expandBoundingBoxSides"),assignBoundingBox=__name(function(bb1,bb2){bb1.x1=bb2.x1,bb1.y1=bb2.y1,bb1.x2=bb2.x2,bb1.y2=bb2.y2,bb1.w=bb1.x2-bb1.x1,bb1.h=bb1.y2-bb1.y1},"assignBoundingBox"),boundingBoxesIntersect=__name(function(bb1,bb2){return!(bb1.x1>bb2.x2)&&(!(bb2.x1>bb1.x2)&&(!(bb1.x2<bb2.x1)&&(!(bb2.x2<bb1.x1)&&(!(bb1.y2<bb2.y1)&&(!(bb2.y2<bb1.y1)&&(!(bb1.y1>bb2.y2)&&!(bb2.y1>bb1.y2)))))))},"boundingBoxesIntersect"),inBoundingBox=__name(function(bb,x5,y6){return bb.x1<=x5&&x5<=bb.x2&&bb.y1<=y6&&y6<=bb.y2},"inBoundingBox"),pointInBoundingBox=__name(function(bb,pt){return inBoundingBox(bb,pt.x,pt.y)},"pointInBoundingBox"),boundingBoxInBoundingBox=__name(function(bb1,bb2){return inBoundingBox(bb1,bb2.x1,bb2.y1)&&inBoundingBox(bb1,bb2.x2,bb2.y2)},"boundingBoxInBoundingBox"),hypot=null!==(_Math$hypot=Math.hypot)&&void 0!==_Math$hypot?_Math$hypot:function(x5,y6){return Math.sqrt(x5*x5+y6*y6)},__name(inflatePolygon,"inflatePolygon"),__name(miterBox,"miterBox"),roundRectangleIntersectLine=__name(function(x5,y6,nodeX,nodeY,width3,height2,padding2){var straightLineIntersections,arcIntersections,radius2=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",cornerRadius="auto"===radius2?getRoundRectangleRadius(width3,height2):radius2,halfWidth=width3/2,halfHeight=height2/2,doWidth=(cornerRadius=Math.min(cornerRadius,halfWidth,halfHeight))!==halfWidth,doHeight=cornerRadius!==halfHeight;if(doWidth){var topStartY=nodeY-halfHeight-padding2;if((straightLineIntersections=finiteLinesIntersect(x5,y6,nodeX,nodeY,nodeX-halfWidth+cornerRadius-padding2,topStartY,nodeX+halfWidth-cornerRadius+padding2,topStartY,!1)).length>0)return straightLineIntersections}if(doHeight){var rightStartX=nodeX+halfWidth+padding2;if((straightLineIntersections=finiteLinesIntersect(x5,y6,nodeX,nodeY,rightStartX,nodeY-halfHeight+cornerRadius-padding2,rightStartX,nodeY+halfHeight-cornerRadius+padding2,!1)).length>0)return straightLineIntersections}if(doWidth){var bottomStartY=nodeY+halfHeight+padding2;if((straightLineIntersections=finiteLinesIntersect(x5,y6,nodeX,nodeY,nodeX-halfWidth+cornerRadius-padding2,bottomStartY,nodeX+halfWidth-cornerRadius+padding2,bottomStartY,!1)).length>0)return straightLineIntersections}if(doHeight){var leftStartX=nodeX-halfWidth-padding2;if((straightLineIntersections=finiteLinesIntersect(x5,y6,nodeX,nodeY,leftStartX,nodeY-halfHeight+cornerRadius-padding2,leftStartX,nodeY+halfHeight-cornerRadius+padding2,!1)).length>0)return straightLineIntersections}var topLeftCenterX=nodeX-halfWidth+cornerRadius,topLeftCenterY=nodeY-halfHeight+cornerRadius;if((arcIntersections=intersectLineCircle(x5,y6,nodeX,nodeY,topLeftCenterX,topLeftCenterY,cornerRadius+padding2)).length>0&&arcIntersections[0]<=topLeftCenterX&&arcIntersections[1]<=topLeftCenterY)return[arcIntersections[0],arcIntersections[1]];var topRightCenterX=nodeX+halfWidth-cornerRadius,topRightCenterY=nodeY-halfHeight+cornerRadius;if((arcIntersections=intersectLineCircle(x5,y6,nodeX,nodeY,topRightCenterX,topRightCenterY,cornerRadius+padding2)).length>0&&arcIntersections[0]>=topRightCenterX&&arcIntersections[1]<=topRightCenterY)return[arcIntersections[0],arcIntersections[1]];var bottomRightCenterX=nodeX+halfWidth-cornerRadius,bottomRightCenterY=nodeY+halfHeight-cornerRadius;if((arcIntersections=intersectLineCircle(x5,y6,nodeX,nodeY,bottomRightCenterX,bottomRightCenterY,cornerRadius+padding2)).length>0&&arcIntersections[0]>=bottomRightCenterX&&arcIntersections[1]>=bottomRightCenterY)return[arcIntersections[0],arcIntersections[1]];var bottomLeftCenterX=nodeX-halfWidth+cornerRadius,bottomLeftCenterY=nodeY+halfHeight-cornerRadius;return(arcIntersections=intersectLineCircle(x5,y6,nodeX,nodeY,bottomLeftCenterX,bottomLeftCenterY,cornerRadius+padding2)).length>0&&arcIntersections[0]<=bottomLeftCenterX&&arcIntersections[1]>=bottomLeftCenterY?[arcIntersections[0],arcIntersections[1]]:[]},"roundRectangleIntersectLine"),inLineVicinity=__name(function(x5,y6,lx1,ly1,lx2,ly2,tolerance){var t4=tolerance,x1=Math.min(lx1,lx2),x22=Math.max(lx1,lx2),y1=Math.min(ly1,ly2),y22=Math.max(ly1,ly2);return x1-t4<=x5&&x5<=x22+t4&&y1-t4<=y6&&y6<=y22+t4},"inLineVicinity"),inBezierVicinity=__name(function(x5,y6,x1,y1,x22,y22,x32,y32,tolerance){var bb_x1=Math.min(x1,x32,x22)-tolerance,bb_x2=Math.max(x1,x32,x22)+tolerance,bb_y1=Math.min(y1,y32,y22)-tolerance,bb_y2=Math.max(y1,y32,y22)+tolerance;return!(x5<bb_x1||x5>bb_x2||y6<bb_y1||y6>bb_y2)},"inBezierVicinity"),solveQuadratic=__name(function(a2,b3,c3,val){var r2=b3*b3-4*a2*(c3-=val);if(r2<0)return[];var sqrtR=Math.sqrt(r2),denom=2*a2;return[(-b3+sqrtR)/denom,(-b3-sqrtR)/denom]},"solveQuadratic"),solveCubic=__name(function(a2,b3,c3,d3,result){var discriminant,q3,r2,dum1,s2,t4,term1,r13;return 0===a2&&(a2=1e-5),r2=-27*(d3/=a2)+(b3/=a2)*(9*(c3/=a2)-b3*b3*2),discriminant=(q3=(3*c3-b3*b3)/9)*q3*q3+(r2/=54)*r2,result[1]=0,term1=b3/3,discriminant>0?(s2=(s2=r2+Math.sqrt(discriminant))<0?-Math.pow(-s2,1/3):Math.pow(s2,1/3),t4=(t4=r2-Math.sqrt(discriminant))<0?-Math.pow(-t4,1/3):Math.pow(t4,1/3),result[0]=-term1+s2+t4,term1+=(s2+t4)/2,result[4]=result[2]=-term1,term1=Math.sqrt(3)*(-t4+s2)/2,result[3]=term1,void(result[5]=-term1)):(result[5]=result[3]=0,0===discriminant?(r13=r2<0?-Math.pow(-r2,1/3):Math.pow(r2,1/3),result[0]=2*r13-term1,void(result[4]=result[2]=-(r13+term1))):(dum1=(q3=-q3)*q3*q3,dum1=Math.acos(r2/Math.sqrt(dum1)),r13=2*Math.sqrt(q3),result[0]=-term1+r13*Math.cos(dum1/3),result[2]=-term1+r13*Math.cos((dum1+2*Math.PI)/3),void(result[4]=-term1+r13*Math.cos((dum1+4*Math.PI)/3))))},"solveCubic"),sqdistToQuadraticBezier=__name(function(x5,y6,x1,y1,x22,y22,x32,y32){var roots=[];solveCubic(1*x1*x1-4*x1*x22+2*x1*x32+4*x22*x22-4*x22*x32+x32*x32+y1*y1-4*y1*y22+2*y1*y32+4*y22*y22-4*y22*y32+y32*y32,9*x1*x22-3*x1*x1-3*x1*x32-6*x22*x22+3*x22*x32+9*y1*y22-3*y1*y1-3*y1*y32-6*y22*y22+3*y22*y32,3*x1*x1-6*x1*x22+x1*x32-x1*x5+2*x22*x22+2*x22*x5-x32*x5+3*y1*y1-6*y1*y22+y1*y32-y1*y6+2*y22*y22+2*y22*y6-y32*y6,1*x1*x22-x1*x1+x1*x5-x22*x5+y1*y22-y1*y1+y1*y6-y22*y6,roots);for(var params=[],index=0;index<6;index+=2)Math.abs(roots[index+1])<1e-7&&roots[index]>=0&&roots[index]<=1&&params.push(roots[index]);params.push(1),params.push(0);for(var curX,curY,distSquared,minDistanceSquared=-1,i2=0;i2<params.length;i2++)curX=Math.pow(1-params[i2],2)*x1+2*(1-params[i2])*params[i2]*x22+params[i2]*params[i2]*x32,curY=Math.pow(1-params[i2],2)*y1+2*(1-params[i2])*params[i2]*y22+params[i2]*params[i2]*y32,distSquared=Math.pow(curX-x5,2)+Math.pow(curY-y6,2),minDistanceSquared>=0?distSquared<minDistanceSquared&&(minDistanceSquared=distSquared):minDistanceSquared=distSquared;return minDistanceSquared},"sqdistToQuadraticBezier"),sqdistToFiniteLine=__name(function(x5,y6,x1,y1,x22,y22){var offset=[x5-x1,y6-y1],line2=[x22-x1,y22-y1],lineSq=line2[0]*line2[0]+line2[1]*line2[1],hypSq=offset[0]*offset[0]+offset[1]*offset[1],dotProduct=offset[0]*line2[0]+offset[1]*line2[1],adjSq=dotProduct*dotProduct/lineSq;return dotProduct<0?hypSq:adjSq>lineSq?(x5-x22)*(x5-x22)+(y6-y22)*(y6-y22):hypSq-adjSq},"sqdistToFiniteLine"),pointInsidePolygonPoints=__name(function(x5,y6,points){for(var x1,y1,x22,y22,up=0,i2=0;i2<points.length/2;i2++)if(x1=points[2*i2],y1=points[2*i2+1],i2+1<points.length/2?(x22=points[2*(i2+1)],y22=points[2*(i2+1)+1]):(x22=points[2*(i2+1-points.length/2)],y22=points[2*(i2+1-points.length/2)+1]),x1==x5&&x22==x5);else{if(!(x1>=x5&&x5>=x22||x1<=x5&&x5<=x22))continue;(x5-x1)/(x22-x1)*(y22-y1)+y1>y6&&up++}return up%2!=0},"pointInsidePolygonPoints"),pointInsidePolygon=__name(function(x5,y6,basePoints,centerX,centerY,width3,height2,direction,padding2){var angle2,transformedPoints=new Array(basePoints.length);null!=direction[0]?(angle2=Math.atan(direction[1]/direction[0]),direction[0]<0?angle2+=Math.PI/2:angle2=-angle2-Math.PI/2):angle2=direction;for(var points,cos3=Math.cos(-angle2),sin3=Math.sin(-angle2),i2=0;i2<transformedPoints.length/2;i2++)transformedPoints[2*i2]=width3/2*(basePoints[2*i2]*cos3-basePoints[2*i2+1]*sin3),transformedPoints[2*i2+1]=height2/2*(basePoints[2*i2+1]*cos3+basePoints[2*i2]*sin3),transformedPoints[2*i2]+=centerX,transformedPoints[2*i2+1]+=centerY;if(padding2>0){var expandedLineSet=expandPolygon(transformedPoints,-padding2);points=joinLines(expandedLineSet)}else points=transformedPoints;return pointInsidePolygonPoints(x5,y6,points)},"pointInsidePolygon"),pointInsideRoundPolygon=__name(function(x5,y6,basePoints,centerX,centerY,width3,height2,corners){for(var cutPolygonPoints=new Array(2*basePoints.length),i2=0;i2<corners.length;i2++){var corner=corners[i2];if(cutPolygonPoints[4*i2+0]=corner.startX,cutPolygonPoints[4*i2+1]=corner.startY,cutPolygonPoints[4*i2+2]=corner.stopX,cutPolygonPoints[4*i2+3]=corner.stopY,Math.pow(corner.cx-x5,2)+Math.pow(corner.cy-y6,2)<=Math.pow(corner.radius,2))return!0}return pointInsidePolygonPoints(x5,y6,cutPolygonPoints)},"pointInsideRoundPolygon"),joinLines=__name(function(lineSet){for(var currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,vertices=new Array(lineSet.length/2),i2=0;i2<lineSet.length/4;i2++){currentLineStartX=lineSet[4*i2],currentLineStartY=lineSet[4*i2+1],currentLineEndX=lineSet[4*i2+2],currentLineEndY=lineSet[4*i2+3],i2<lineSet.length/4-1?(nextLineStartX=lineSet[4*(i2+1)],nextLineStartY=lineSet[4*(i2+1)+1],nextLineEndX=lineSet[4*(i2+1)+2],nextLineEndY=lineSet[4*(i2+1)+3]):(nextLineStartX=lineSet[0],nextLineStartY=lineSet[1],nextLineEndX=lineSet[2],nextLineEndY=lineSet[3]);var intersection4=finiteLinesIntersect(currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,!0);vertices[2*i2]=intersection4[0],vertices[2*i2+1]=intersection4[1]}return vertices},"joinLines"),expandPolygon=__name(function(points,pad3){for(var currentPointX,currentPointY,nextPointX,nextPointY,expandedLineSet=new Array(2*points.length),i2=0;i2<points.length/2;i2++){currentPointX=points[2*i2],currentPointY=points[2*i2+1],i2<points.length/2-1?(nextPointX=points[2*(i2+1)],nextPointY=points[2*(i2+1)+1]):(nextPointX=points[0],nextPointY=points[1]);var offsetX=nextPointY-currentPointY,offsetY=-(nextPointX-currentPointX),offsetLength=Math.sqrt(offsetX*offsetX+offsetY*offsetY),normalizedOffsetX=offsetX/offsetLength,normalizedOffsetY=offsetY/offsetLength;expandedLineSet[4*i2]=currentPointX+normalizedOffsetX*pad3,expandedLineSet[4*i2+1]=currentPointY+normalizedOffsetY*pad3,expandedLineSet[4*i2+2]=nextPointX+normalizedOffsetX*pad3,expandedLineSet[4*i2+3]=nextPointY+normalizedOffsetY*pad3}return expandedLineSet},"expandPolygon"),intersectLineEllipse=__name(function(x5,y6,centerX,centerY,ellipseWradius,ellipseHradius){var dispX=centerX-x5,dispY=centerY-y6;dispX/=ellipseWradius,dispY/=ellipseHradius;var len=Math.sqrt(dispX*dispX+dispY*dispY),newLength=len-1;if(newLength<0)return[];var lenProportion=newLength/len;return[(centerX-x5)*lenProportion+x5,(centerY-y6)*lenProportion+y6]},"intersectLineEllipse"),checkInEllipse=__name(function(x5,y6,width3,height2,centerX,centerY,padding2){return x5-=centerX,y6-=centerY,(x5/=width3/2+padding2)*x5+(y6/=height2/2+padding2)*y6<=1},"checkInEllipse"),intersectLineCircle=__name(function(x1,y1,x22,y22,centerX,centerY,radius2){var d3=[x22-x1,y22-y1],f2=[x1-centerX,y1-centerY],a2=d3[0]*d3[0]+d3[1]*d3[1],b3=2*(f2[0]*d3[0]+f2[1]*d3[1]),discriminant=b3*b3-4*a2*(f2[0]*f2[0]+f2[1]*f2[1]-radius2*radius2);if(discriminant<0)return[];var t13=(-b3+Math.sqrt(discriminant))/(2*a2),t22=(-b3-Math.sqrt(discriminant))/(2*a2),tMin=Math.min(t13,t22),tMax=Math.max(t13,t22),inRangeParams=[];if(tMin>=0&&tMin<=1&&inRangeParams.push(tMin),tMax>=0&&tMax<=1&&inRangeParams.push(tMax),0===inRangeParams.length)return[];var nearIntersectionX=inRangeParams[0]*d3[0]+x1,nearIntersectionY=inRangeParams[0]*d3[1]+y1;return inRangeParams.length>1?inRangeParams[0]==inRangeParams[1]?[nearIntersectionX,nearIntersectionY]:[nearIntersectionX,nearIntersectionY,inRangeParams[1]*d3[0]+x1,inRangeParams[1]*d3[1]+y1]:[nearIntersectionX,nearIntersectionY]},"intersectLineCircle"),midOfThree=__name(function(a2,b3,c3){return b3<=a2&&a2<=c3||c3<=a2&&a2<=b3?a2:a2<=b3&&b3<=c3||c3<=b3&&b3<=a2?b3:c3},"midOfThree"),finiteLinesIntersect=__name(function(x1,y1,x22,y22,x32,y32,x42,y42,infiniteLines){var dx13=x1-x32,dx21=x22-x1,dx43=x42-x32,dy13=y1-y32,dy21=y22-y1,dy43=y42-y32,ua_t=dx43*dy13-dy43*dx13,ub_t=dx21*dy13-dy21*dx13,u_b=dy43*dx21-dx43*dy21;if(0!==u_b){var ua=ua_t/u_b,ub=ub_t/u_b;return-.001<=ua&&ua<=1.001&&-.001<=ub&&ub<=1.001||infiniteLines?[x1+ua*dx21,y1+ua*dy21]:[]}return 0===ua_t||0===ub_t?midOfThree(x1,x22,x42)===x42?[x42,y42]:midOfThree(x1,x22,x32)===x32?[x32,y32]:midOfThree(x32,x42,x22)===x22?[x22,y22]:[]:[]},"finiteLinesIntersect"),transformPoints=__name(function(points,centerX,centerY,width3,height2){var ret=[],halfW=width3/2,halfH=height2/2,x5=centerX,y6=centerY;ret.push({x:x5+halfW*points[0],y:y6+halfH*points[1]});for(var i2=1;i2<points.length/2;i2++)ret.push({x:x5+halfW*points[2*i2],y:y6+halfH*points[2*i2+1]});return ret},"transformPoints"),polygonIntersectLine=__name(function(x5,y6,basePoints,centerX,centerY,width3,height2,padding2){var intersection4,points,currentX,currentY,nextX,nextY,intersections=[],transformedPoints=new Array(basePoints.length),doTransform=!0;if(null==width3&&(doTransform=!1),doTransform){for(var i2=0;i2<transformedPoints.length/2;i2++)transformedPoints[2*i2]=basePoints[2*i2]*width3+centerX,transformedPoints[2*i2+1]=basePoints[2*i2+1]*height2+centerY;if(padding2>0){var expandedLineSet=expandPolygon(transformedPoints,-padding2);points=joinLines(expandedLineSet)}else points=transformedPoints}else points=basePoints;for(var _i3=0;_i3<points.length/2;_i3++)currentX=points[2*_i3],currentY=points[2*_i3+1],_i3<points.length/2-1?(nextX=points[2*(_i3+1)],nextY=points[2*(_i3+1)+1]):(nextX=points[0],nextY=points[1]),0!==(intersection4=finiteLinesIntersect(x5,y6,centerX,centerY,currentX,currentY,nextX,nextY)).length&&intersections.push(intersection4[0],intersection4[1]);return intersections},"polygonIntersectLine"),roundPolygonIntersectLine=__name(function(x5,y6,basePoints,centerX,centerY,width3,height2,padding2,corners){var intersection4,intersections=[],lines=new Array(2*basePoints.length);corners.forEach(function(corner,i3){0===i3?(lines[lines.length-2]=corner.startX,lines[lines.length-1]=corner.startY):(lines[4*i3-2]=corner.startX,lines[4*i3-1]=corner.startY),lines[4*i3]=corner.stopX,lines[4*i3+1]=corner.stopY,0!==(intersection4=intersectLineCircle(x5,y6,centerX,centerY,corner.cx,corner.cy,corner.radius)).length&&intersections.push(intersection4[0],intersection4[1])});for(var i2=0;i2<lines.length/4;i2++)0!==(intersection4=finiteLinesIntersect(x5,y6,centerX,centerY,lines[4*i2],lines[4*i2+1],lines[4*i2+2],lines[4*i2+3],!1)).length&&intersections.push(intersection4[0],intersection4[1]);if(intersections.length>2){for(var lowestIntersection=[intersections[0],intersections[1]],lowestSquaredDistance=Math.pow(lowestIntersection[0]-x5,2)+Math.pow(lowestIntersection[1]-y6,2),_i4=1;_i4<intersections.length/2;_i4++){var squaredDistance=Math.pow(intersections[2*_i4]-x5,2)+Math.pow(intersections[2*_i4+1]-y6,2);squaredDistance<=lowestSquaredDistance&&(lowestIntersection[0]=intersections[2*_i4],lowestIntersection[1]=intersections[2*_i4+1],lowestSquaredDistance=squaredDistance)}return lowestIntersection}return intersections},"roundPolygonIntersectLine"),shortenIntersection=__name(function(intersection4,offset,amount){var disp=[intersection4[0]-offset[0],intersection4[1]-offset[1]],length2=Math.sqrt(disp[0]*disp[0]+disp[1]*disp[1]),lenRatio=(length2-amount)/length2;return lenRatio<0&&(lenRatio=1e-5),[offset[0]+lenRatio*disp[0],offset[1]+lenRatio*disp[1]]},"shortenIntersection"),generateUnitNgonPointsFitToSquare=__name(function(sides,rotationRadians){var points=generateUnitNgonPoints(sides,rotationRadians);return points=fitPolygonToSquare(points)},"generateUnitNgonPointsFitToSquare"),fitPolygonToSquare=__name(function(points){for(var x5,y6,sides=points.length/2,minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i2=0;i2<sides;i2++)x5=points[2*i2],y6=points[2*i2+1],minX=Math.min(minX,x5),maxX=Math.max(maxX,x5),minY=Math.min(minY,y6),maxY=Math.max(maxY,y6);for(var sx=2/(maxX-minX),sy=2/(maxY-minY),_i5=0;_i5<sides;_i5++)x5=points[2*_i5]=points[2*_i5]*sx,y6=points[2*_i5+1]=points[2*_i5+1]*sy,minX=Math.min(minX,x5),maxX=Math.max(maxX,x5),minY=Math.min(minY,y6),maxY=Math.max(maxY,y6);if(minY<-1)for(var _i6=0;_i6<sides;_i6++)y6=points[2*_i6+1]=points[2*_i6+1]+(-1-minY);return points},"fitPolygonToSquare"),generateUnitNgonPoints=__name(function(sides,rotationRadians){var increment=1/sides*2*Math.PI,startAngle=sides%2==0?Math.PI/2+increment/2:Math.PI/2;startAngle+=rotationRadians;for(var currentAngle,points=new Array(2*sides),i2=0;i2<sides;i2++)currentAngle=i2*increment+startAngle,points[2*i2]=Math.cos(currentAngle),points[2*i2+1]=Math.sin(-currentAngle);return points},"generateUnitNgonPoints"),getRoundRectangleRadius=__name(function(width3,height2){return Math.min(width3/4,height2/4,8)},"getRoundRectangleRadius"),getRoundPolygonRadius=__name(function(width3,height2){return Math.min(width3/10,height2/10,8)},"getRoundPolygonRadius"),getCutRectangleCornerLength=__name(function(){return 8},"getCutRectangleCornerLength"),bezierPtsToQuadCoeff=__name(function(p0,p1,p22){return[p0-2*p1+p22,2*(p1-p0),p0]},"bezierPtsToQuadCoeff"),getBarrelCurveConstants=__name(function(width3,height2){return{heightOffset:Math.min(15,.05*height2),widthOffset:Math.min(100,.25*width3),ctrlPtOffsetPct:.05}},"getBarrelCurveConstants"),__name(satPolygonIntersection,"satPolygonIntersection"),pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:__name(function(edge){return 1},"weight")}),elesfn$o={pageRank:__name(function(options2){for(var _pageRankDefaults=pageRankDefaults(options2),dampingFactor=_pageRankDefaults.dampingFactor,precision=_pageRankDefaults.precision,iterations=_pageRankDefaults.iterations,weight8=_pageRankDefaults.weight,cy=this._private.cy,_this$byGroup=this.byGroup(),nodes5=_this$byGroup.nodes,edges3=_this$byGroup.edges,numNodes=nodes5.length,numNodesSqd=numNodes*numNodes,numEdges=edges3.length,matrix=new Array(numNodesSqd),columnSum=new Array(numNodes),additionalProb=(1-dampingFactor)/numNodes,i2=0;i2<numNodes;i2++){for(var j3=0;j3<numNodes;j3++){matrix[i2*numNodes+j3]=0}columnSum[i2]=0}for(var _i=0;_i<numEdges;_i++){var edge=edges3[_i],srcId=edge.data("source"),tgtId=edge.data("target");if(srcId!==tgtId){var s2=nodes5.indexOfId(srcId),t4=nodes5.indexOfId(tgtId),w4=weight8(edge);matrix[t4*numNodes+s2]+=w4,columnSum[s2]+=w4}}for(var p3=1/numNodes+additionalProb,_j=0;_j<numNodes;_j++)if(0===columnSum[_j])for(var _i2=0;_i2<numNodes;_i2++){matrix[_i2*numNodes+_j]=p3}else for(var _i3=0;_i3<numNodes;_i3++){var _n3=_i3*numNodes+_j;matrix[_n3]=matrix[_n3]/columnSum[_j]+additionalProb}for(var previous,eigenvector=new Array(numNodes),temp=new Array(numNodes),_i4=0;_i4<numNodes;_i4++)eigenvector[_i4]=1;for(var iter=0;iter<iterations;iter++){for(var _i5=0;_i5<numNodes;_i5++)temp[_i5]=0;for(var _i6=0;_i6<numNodes;_i6++)for(var _j2=0;_j2<numNodes;_j2++){var _n4=_i6*numNodes+_j2;temp[_i6]+=matrix[_n4]*eigenvector[_j2]}inPlaceSumNormalize(temp),previous=eigenvector,eigenvector=temp,temp=previous;for(var diff2=0,_i7=0;_i7<numNodes;_i7++){var delta=previous[_i7]-eigenvector[_i7];diff2+=delta*delta}if(diff2<precision)break}return{rank:__name(function(node2){return node2=cy.collection(node2)[0],eigenvector[nodes5.indexOf(node2)]},"rank")}},"pageRank")},defaults$f=defaults$g({root:null,weight:__name(function(edge){return 1},"weight"),directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:__name(function(options2){options2=defaults$f(options2);var cy=this.cy(),nodes5=this.nodes(),numNodes=nodes5.length;if(options2.directed){for(var indegrees={},outdegrees={},maxIndegree=0,maxOutdegree=0,_i=0;_i<numNodes;_i++){var _node=nodes5[_i],id30=_node.id();options2.root=_node;var _currDegree=this.degreeCentrality(options2);maxIndegree<_currDegree.indegree&&(maxIndegree=_currDegree.indegree),maxOutdegree<_currDegree.outdegree&&(maxOutdegree=_currDegree.outdegree),indegrees[id30]=_currDegree.indegree,outdegrees[id30]=_currDegree.outdegree}return{indegree:__name(function(node3){return 0==maxIndegree?0:(string(node3)&&(node3=cy.filter(node3)),indegrees[node3.id()]/maxIndegree)},"indegree"),outdegree:__name(function(node3){return 0===maxOutdegree?0:(string(node3)&&(node3=cy.filter(node3)),outdegrees[node3.id()]/maxOutdegree)},"outdegree")}}for(var degrees3={},maxDegree=0,i2=0;i2<numNodes;i2++){var node2=nodes5[i2];options2.root=node2;var currDegree=this.degreeCentrality(options2);maxDegree<currDegree.degree&&(maxDegree=currDegree.degree),degrees3[node2.id()]=currDegree.degree}return{degree:__name(function(node3){return 0===maxDegree?0:(string(node3)&&(node3=cy.filter(node3)),degrees3[node3.id()]/maxDegree)},"degree")}},"degreeCentralityNormalized"),degreeCentrality:__name(function(options2){options2=defaults$f(options2);var cy=this.cy(),callingEles=this,_options=options2,root3=_options.root,weight8=_options.weight,directed=_options.directed,alpha=_options.alpha;if(root3=cy.collection(root3)[0],directed){for(var edges3=root3.connectedEdges(),incoming=edges3.filter(function(edge){return edge.target().same(root3)&&callingEles.has(edge)}),outgoing=edges3.filter(function(edge){return edge.source().same(root3)&&callingEles.has(edge)}),k_in=incoming.length,k_out=outgoing.length,s_in=0,s_out=0,_i2=0;_i2<incoming.length;_i2++)s_in+=weight8(incoming[_i2]);for(var _i3=0;_i3<outgoing.length;_i3++)s_out+=weight8(outgoing[_i3]);return{indegree:Math.pow(k_in,1-alpha)*Math.pow(s_in,alpha),outdegree:Math.pow(k_out,1-alpha)*Math.pow(s_out,alpha)}}for(var connEdges=root3.connectedEdges().intersection(callingEles),k2=connEdges.length,s2=0,i2=0;i2<connEdges.length;i2++)s2+=weight8(connEdges[i2]);return{degree:Math.pow(k2,1-alpha)*Math.pow(s2,alpha)}},"degreeCentrality")},elesfn$n.dc=elesfn$n.degreeCentrality,elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized,defaults$e=defaults$g({harmonic:!0,weight:__name(function(){return 1},"weight"),directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:__name(function(options2){for(var _defaults=defaults$e(options2),harmonic=_defaults.harmonic,weight8=_defaults.weight,directed=_defaults.directed,cy=this.cy(),closenesses={},maxCloseness=0,nodes5=this.nodes(),fw=this.floydWarshall({weight:weight8,directed:directed}),i2=0;i2<nodes5.length;i2++){for(var currCloseness=0,node_i=nodes5[i2],j3=0;j3<nodes5.length;j3++)if(i2!==j3){var d3=fw.distance(node_i,nodes5[j3]);currCloseness+=harmonic?1/d3:d3}harmonic||(currCloseness=1/currCloseness),maxCloseness<currCloseness&&(maxCloseness=currCloseness),closenesses[node_i.id()]=currCloseness}return{closeness:__name(function(node2){return 0==maxCloseness?0:(node2=string(node2)?cy.filter(node2)[0].id():node2.id(),closenesses[node2]/maxCloseness)},"closeness")}},"closenessCentralityNormalized"),closenessCentrality:__name(function(options2){var _defaults2=defaults$e(options2),root3=_defaults2.root,weight8=_defaults2.weight,directed=_defaults2.directed,harmonic=_defaults2.harmonic;root3=this.filter(root3)[0];for(var dijkstra3=this.dijkstra({root:root3,weight:weight8,directed:directed}),totalDistance=0,nodes5=this.nodes(),i2=0;i2<nodes5.length;i2++){var n2=nodes5[i2];if(!n2.same(root3)){var d3=dijkstra3.distanceTo(n2);totalDistance+=harmonic?1/d3:d3}}return harmonic?totalDistance:1/totalDistance},"closenessCentrality")},elesfn$m.cc=elesfn$m.closenessCentrality,elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized,defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:__name(function(options2){for(var _defaults=defaults$d(options2),directed=_defaults.directed,weight8=_defaults.weight,weighted=null!=weight8,cy=this.cy(),V3=this.nodes(),A2={},_C={},max10=0,C3={set:__name(function(key,val){_C[key]=val,val>max10&&(max10=val)},"set"),get:__name(function(key){return _C[key]},"get")},i2=0;i2<V3.length;i2++){var v3=V3[i2],vid=v3.id();A2[vid]=directed?v3.outgoers().nodes():v3.openNeighborhood().nodes(),C3.set(vid,0)}for(var _loop=__name(function(){for(var sid=V3[s2].id(),S4=[],P3={},g2={},d3={},Q3=new Heap(function(a2,b3){return d3[a2]-d3[b3]}),_i=0;_i<V3.length;_i++){var _vid=V3[_i].id();P3[_vid]=[],g2[_vid]=0,d3[_vid]=1/0}for(g2[sid]=1,d3[sid]=0,Q3.push(sid);!Q3.empty();){var _v=Q3.pop();if(S4.push(_v),weighted)for(var j3=0;j3<A2[_v].length;j3++){var w4=A2[_v][j3],vEle=cy.getElementById(_v),edge=void 0;edge=vEle.edgesTo(w4).length>0?vEle.edgesTo(w4)[0]:w4.edgesTo(vEle)[0];var edgeWeight=weight8(edge);w4=w4.id(),d3[w4]>d3[_v]+edgeWeight&&(d3[w4]=d3[_v]+edgeWeight,Q3.nodes.indexOf(w4)<0?Q3.push(w4):Q3.updateItem(w4),g2[w4]=0,P3[w4]=[]),d3[w4]==d3[_v]+edgeWeight&&(g2[w4]=g2[w4]+g2[_v],P3[w4].push(_v))}else for(var _j=0;_j<A2[_v].length;_j++){var _w=A2[_v][_j].id();d3[_w]==1/0&&(Q3.push(_w),d3[_w]=d3[_v]+1),d3[_w]==d3[_v]+1&&(g2[_w]=g2[_w]+g2[_v],P3[_w].push(_v))}}for(var e3={},_i2=0;_i2<V3.length;_i2++)e3[V3[_i2].id()]=0;for(;S4.length>0;){for(var _w2=S4.pop(),_j2=0;_j2<P3[_w2].length;_j2++){var _v2=P3[_w2][_j2];e3[_v2]=e3[_v2]+g2[_v2]/g2[_w2]*(1+e3[_w2])}_w2!=V3[s2].id()&&C3.set(_w2,C3.get(_w2)+e3[_w2])}},"_loop"),s2=0;s2<V3.length;s2++)_loop();var ret={betweenness:__name(function(node2){var id30=cy.collection(node2).id();return C3.get(id30)},"betweenness"),betweennessNormalized:__name(function(node2){if(0==max10)return 0;var id30=cy.collection(node2).id();return C3.get(id30)/max10},"betweennessNormalized")};return ret.betweennessNormalised=ret.betweennessNormalized,ret},"betweennessCentrality")},elesfn$l.bc=elesfn$l.betweennessCentrality,defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(edge){return 1}]}),setOptions$3=__name(function(options2){return defaults$c(options2)},"setOptions"),getSimilarity$1=__name(function(edge,attributes){for(var total=0,i2=0;i2<attributes.length;i2++)total+=attributes[i2](edge);return total},"getSimilarity"),addLoops=__name(function(M3,n2,val){for(var i2=0;i2<n2;i2++)M3[i2*n2+i2]=val},"addLoops"),normalize2=__name(function(M3,n2){for(var sum2,col=0;col<n2;col++){sum2=0;for(var row=0;row<n2;row++)sum2+=M3[row*n2+col];for(var _row=0;_row<n2;_row++)M3[_row*n2+col]=M3[_row*n2+col]/sum2}},"normalize"),mmult=__name(function(A2,B3,n2){for(var C3=new Array(n2*n2),i2=0;i2<n2;i2++){for(var j3=0;j3<n2;j3++)C3[i2*n2+j3]=0;for(var k2=0;k2<n2;k2++)for(var _j=0;_j<n2;_j++)C3[i2*n2+_j]+=A2[i2*n2+k2]*B3[k2*n2+_j]}return C3},"mmult"),expand=__name(function(M3,n2,expandFactor){for(var _M=M3.slice(0),p3=1;p3<expandFactor;p3++)M3=mmult(M3,_M,n2);return M3},"expand"),inflate=__name(function(M3,n2,inflateFactor){for(var _M=new Array(n2*n2),i2=0;i2<n2*n2;i2++)_M[i2]=Math.pow(M3[i2],inflateFactor);return normalize2(_M,n2),_M},"inflate"),hasConverged=__name(function(M3,_M,n2,roundFactor){for(var i2=0;i2<n2;i2++){if(Math.round(M3[i2]*Math.pow(10,roundFactor))/Math.pow(10,roundFactor)!==Math.round(_M[i2]*Math.pow(10,roundFactor))/Math.pow(10,roundFactor))return!1}return!0},"hasConverged"),assign$2=__name(function(M3,n2,nodes5,cy){for(var clusters=[],i2=0;i2<n2;i2++){for(var cluster=[],j3=0;j3<n2;j3++)Math.round(1e3*M3[i2*n2+j3])/1e3>0&&cluster.push(nodes5[j3]);0!==cluster.length&&clusters.push(cy.collection(cluster))}return clusters},"assign"),isDuplicate=__name(function(c1,c22){for(var i2=0;i2<c1.length;i2++)if(!c22[i2]||c1[i2].id()!==c22[i2].id())return!1;return!0},"isDuplicate"),removeDuplicates=__name(function(clusters){for(var i2=0;i2<clusters.length;i2++)for(var j3=0;j3<clusters.length;j3++)i2!=j3&&isDuplicate(clusters[i2],clusters[j3])&&clusters.splice(j3,1);return clusters},"removeDuplicates"),markovClustering=__name(function(options2){for(var nodes5=this.nodes(),edges3=this.edges(),cy=this.cy(),opts=setOptions$3(options2),id2position={},i2=0;i2<nodes5.length;i2++)id2position[nodes5[i2].id()]=i2;for(var _M,n2=nodes5.length,n22=n2*n2,M3=new Array(n22),_i=0;_i<n22;_i++)M3[_i]=0;for(var e3=0;e3<edges3.length;e3++){var edge=edges3[e3],_i2=id2position[edge.source().id()],j3=id2position[edge.target().id()],sim=getSimilarity$1(edge,opts.attributes);M3[_i2*n2+j3]+=sim,M3[j3*n2+_i2]+=sim}addLoops(M3,n2,opts.multFactor),normalize2(M3,n2);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;)isStillMoving=!1,_M=expand(M3,n2,opts.expandFactor),M3=inflate(_M,n2,opts.inflateFactor),hasConverged(M3,_M,n22,4)||(isStillMoving=!0),iterations++;var clusters=assign$2(M3,n2,nodes5,cy);return clusters=removeDuplicates(clusters)},"markovClustering"),markovClustering$1={markovClustering:markovClustering,mcl:markovClustering},identity$1=__name(function(x5){return x5},"identity"),absDiff=__name(function(p3,q3){return Math.abs(q3-p3)},"absDiff"),addAbsDiff=__name(function(total,p3,q3){return total+absDiff(p3,q3)},"addAbsDiff"),addSquaredDiff=__name(function(total,p3,q3){return total+Math.pow(q3-p3,2)},"addSquaredDiff"),sqrt3=__name(function(x5){return Math.sqrt(x5)},"sqrt"),maxAbsDiff=__name(function(currentMax,p3,q3){return Math.max(currentMax,absDiff(p3,q3))},"maxAbsDiff"),getDistance=__name(function(length2,getP,getQ,init3,visit){for(var post=arguments.length>5&&void 0!==arguments[5]?arguments[5]:identity$1,ret=init3,dim=0;dim<length2;dim++)ret=visit(ret,getP(dim),getQ(dim));return post(ret)},"getDistance"),(distances={euclidean:__name(function(length2,getP,getQ){return length2>=2?getDistance(length2,getP,getQ,0,addSquaredDiff,sqrt3):getDistance(length2,getP,getQ,0,addAbsDiff)},"euclidean"),squaredEuclidean:__name(function(length2,getP,getQ){return getDistance(length2,getP,getQ,0,addSquaredDiff)},"squaredEuclidean"),manhattan:__name(function(length2,getP,getQ){return getDistance(length2,getP,getQ,0,addAbsDiff)},"manhattan"),max:__name(function(length2,getP,getQ){return getDistance(length2,getP,getQ,-1/0,maxAbsDiff)},"max")})["squared-euclidean"]=distances.squaredEuclidean,distances.squaredeuclidean=distances.squaredEuclidean,__name(clusteringDistance,"clusteringDistance"),defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=__name(function(options2){return defaults$b(options2)},"setOptions"),getDist=__name(function(type3,node2,centroid,attributes,mode){var getP="kMedoids"!==mode?function(i2){return centroid[i2]}:function(i2){return attributes[i2](centroid)},getQ=__name(function(i2){return attributes[i2](node2)},"getQ"),nodeP=centroid,nodeQ=node2;return clusteringDistance(type3,attributes.length,getP,getQ,nodeP,nodeQ)},"getDist"),randomCentroids=__name(function(nodes5,k2,attributes){for(var ndim=attributes.length,min9=new Array(ndim),max10=new Array(ndim),centroids=new Array(k2),centroid=null,i2=0;i2<ndim;i2++)min9[i2]=nodes5.min(attributes[i2]).value,max10[i2]=nodes5.max(attributes[i2]).value;for(var c3=0;c3<k2;c3++){centroid=[];for(var _i=0;_i<ndim;_i++)centroid[_i]=Math.random()*(max10[_i]-min9[_i])+min9[_i];centroids[c3]=centroid}return centroids},"randomCentroids"),classify=__name(function(node2,centroids,distance2,attributes,type3){for(var min9=1/0,index=0,i2=0;i2<centroids.length;i2++){var dist3=getDist(distance2,node2,centroids[i2],attributes,type3);dist3<min9&&(min9=dist3,index=i2)}return index},"classify"),buildCluster=__name(function(centroid,nodes5,assignment){for(var cluster=[],node2=null,n2=0;n2<nodes5.length;n2++)assignment[(node2=nodes5[n2]).id()]===centroid&&cluster.push(node2);return cluster},"buildCluster"),haveValuesConverged=__name(function(v12,v23,sensitivityThreshold){return Math.abs(v23-v12)<=sensitivityThreshold},"haveValuesConverged"),haveMatricesConverged=__name(function(v12,v23,sensitivityThreshold){for(var i2=0;i2<v12.length;i2++)for(var j3=0;j3<v12[i2].length;j3++){if(Math.abs(v12[i2][j3]-v23[i2][j3])>sensitivityThreshold)return!1}return!0},"haveMatricesConverged"),seenBefore=__name(function(node2,medoids,n2){for(var i2=0;i2<n2;i2++)if(node2===medoids[i2])return!0;return!1},"seenBefore"),randomMedoids=__name(function(nodes5,k2){var medoids=new Array(k2);if(nodes5.length<50)for(var i2=0;i2<k2;i2++){for(var node2=nodes5[Math.floor(Math.random()*nodes5.length)];seenBefore(node2,medoids,i2);)node2=nodes5[Math.floor(Math.random()*nodes5.length)];medoids[i2]=node2}else for(var _i2=0;_i2<k2;_i2++)medoids[_i2]=nodes5[Math.floor(Math.random()*nodes5.length)];return medoids},"randomMedoids"),findCost=__name(function(potentialNewMedoid,cluster,attributes){for(var cost=0,n2=0;n2<cluster.length;n2++)cost+=getDist("manhattan",cluster[n2],potentialNewMedoid,attributes,"kMedoids");return cost},"findCost"),kMeans=__name(function(options2){var centroids,cy=this.cy(),nodes5=this.nodes(),node2=null,opts=setOptions$2(options2),clusters=new Array(opts.k),assignment={};opts.testMode?"number"==typeof opts.testCentroids?(opts.testCentroids,centroids=randomCentroids(nodes5,opts.k,opts.attributes)):centroids="object"===_typeof(opts.testCentroids)?opts.testCentroids:randomCentroids(nodes5,opts.k,opts.attributes):centroids=randomCentroids(nodes5,opts.k,opts.attributes);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;){for(var n2=0;n2<nodes5.length;n2++)assignment[(node2=nodes5[n2]).id()]=classify(node2,centroids,opts.distance,opts.attributes,"kMeans");isStillMoving=!1;for(var c3=0;c3<opts.k;c3++){var cluster=buildCluster(c3,nodes5,assignment);if(0!==cluster.length){for(var ndim=opts.attributes.length,centroid=centroids[c3],newCentroid=new Array(ndim),sum2=new Array(ndim),d3=0;d3<ndim;d3++){sum2[d3]=0;for(var i2=0;i2<cluster.length;i2++)node2=cluster[i2],sum2[d3]+=opts.attributes[d3](node2);newCentroid[d3]=sum2[d3]/cluster.length,haveValuesConverged(newCentroid[d3],centroid[d3],opts.sensitivityThreshold)||(isStillMoving=!0)}centroids[c3]=newCentroid,clusters[c3]=cy.collection(cluster)}}iterations++}return clusters},"kMeans"),kMedoids=__name(function(options2){var medoids,curCost,cy=this.cy(),nodes5=this.nodes(),node2=null,opts=setOptions$2(options2),clusters=new Array(opts.k),assignment={},minCosts=new Array(opts.k);opts.testMode?"number"==typeof opts.testCentroids||(medoids="object"===_typeof(opts.testCentroids)?opts.testCentroids:randomMedoids(nodes5,opts.k)):medoids=randomMedoids(nodes5,opts.k);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;){for(var n2=0;n2<nodes5.length;n2++)assignment[(node2=nodes5[n2]).id()]=classify(node2,medoids,opts.distance,opts.attributes,"kMedoids");isStillMoving=!1;for(var m3=0;m3<medoids.length;m3++){var cluster=buildCluster(m3,nodes5,assignment);if(0!==cluster.length){minCosts[m3]=findCost(medoids[m3],cluster,opts.attributes);for(var _n=0;_n<cluster.length;_n++)(curCost=findCost(cluster[_n],cluster,opts.attributes))<minCosts[m3]&&(minCosts[m3]=curCost,medoids[m3]=cluster[_n],isStillMoving=!0);clusters[m3]=cy.collection(cluster)}}iterations++}return clusters},"kMedoids"),updateCentroids=__name(function(centroids,nodes5,U3,weight8,opts){for(var numerator,denominator,n2=0;n2<nodes5.length;n2++)for(var c3=0;c3<centroids.length;c3++)weight8[n2][c3]=Math.pow(U3[n2][c3],opts.m);for(var _c=0;_c<centroids.length;_c++)for(var dim=0;dim<opts.attributes.length;dim++){numerator=0,denominator=0;for(var _n2=0;_n2<nodes5.length;_n2++)numerator+=weight8[_n2][_c]*opts.attributes[dim](nodes5[_n2]),denominator+=weight8[_n2][_c];centroids[_c][dim]=numerator/denominator}},"updateCentroids"),updateMembership=__name(function(U3,_U,centroids,nodes5,opts){for(var i2=0;i2<U3.length;i2++)_U[i2]=U3[i2].slice();for(var sum2,numerator,denominator,pow=2/(opts.m-1),c3=0;c3<centroids.length;c3++)for(var n2=0;n2<nodes5.length;n2++){sum2=0;for(var k2=0;k2<centroids.length;k2++)numerator=getDist(opts.distance,nodes5[n2],centroids[c3],opts.attributes,"cmeans"),denominator=getDist(opts.distance,nodes5[n2],centroids[k2],opts.attributes,"cmeans"),sum2+=Math.pow(numerator/denominator,pow);U3[n2][c3]=1/sum2}},"updateMembership"),assign$1=__name(function(nodes5,U3,opts,cy){for(var max10,index,clusters=new Array(opts.k),c3=0;c3<clusters.length;c3++)clusters[c3]=[];for(var n2=0;n2<U3.length;n2++){max10=-1/0,index=-1;for(var _c2=0;_c2<U3[0].length;_c2++)U3[n2][_c2]>max10&&(max10=U3[n2][_c2],index=_c2);clusters[index].push(nodes5[n2])}for(var _c3=0;_c3<clusters.length;_c3++)clusters[_c3]=cy.collection(clusters[_c3]);return clusters},"assign"),fuzzyCMeans=__name(function(options2){var centroids,U3,_U,weight8,cy=this.cy(),nodes5=this.nodes(),opts=setOptions$2(options2);_U=new Array(nodes5.length);for(var i2=0;i2<nodes5.length;i2++)_U[i2]=new Array(opts.k);U3=new Array(nodes5.length);for(var _i3=0;_i3<nodes5.length;_i3++)U3[_i3]=new Array(opts.k);for(var _i4=0;_i4<nodes5.length;_i4++){for(var total=0,j3=0;j3<opts.k;j3++)U3[_i4][j3]=Math.random(),total+=U3[_i4][j3];for(var _j=0;_j<opts.k;_j++)U3[_i4][_j]=U3[_i4][_j]/total}centroids=new Array(opts.k);for(var _i5=0;_i5<opts.k;_i5++)centroids[_i5]=new Array(opts.attributes.length);weight8=new Array(nodes5.length);for(var _i6=0;_i6<nodes5.length;_i6++)weight8[_i6]=new Array(opts.k);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;)isStillMoving=!1,updateCentroids(centroids,nodes5,U3,weight8,opts),updateMembership(U3,_U,centroids,nodes5,opts),haveMatricesConverged(U3,_U,opts.sensitivityThreshold)||(isStillMoving=!0),iterations++;return{clusters:assign$1(nodes5,U3,opts,cy),degreeOfMembership:U3}},"fuzzyCMeans"),kClustering={kMeans:kMeans,kMedoids:kMedoids,fuzzyCMeans:fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=__name(function(options2){var opts=defaults$a(options2),preferredAlias=linkageAliases[opts.linkage];return null!=preferredAlias&&(opts.linkage=preferredAlias),opts},"setOptions"),mergeClosest=__name(function(clusters,index,dists,mins,opts){for(var dist3,minKey=0,min9=1/0,attrs=opts.attributes,getDist3=__name(function(n1,n2){return clusteringDistance(opts.distance,attrs.length,function(i3){return attrs[i3](n1)},function(i3){return attrs[i3](n2)},n1,n2)},"getDist"),i2=0;i2<clusters.length;i2++){var key=clusters[i2].key,_dist=dists[key][mins[key]];_dist<min9&&(minKey=key,min9=_dist)}if("threshold"===opts.mode&&min9>=opts.threshold||"dendrogram"===opts.mode&&1===clusters.length)return!1;var merged,c1=index[minKey],c22=index[mins[minKey]];merged="dendrogram"===opts.mode?{left:c1,right:c22,key:c1.key}:{value:c1.value.concat(c22.value),key:c1.key},clusters[c1.index]=merged,clusters.splice(c22.index,1),index[c1.key]=merged;for(var _i=0;_i<clusters.length;_i++){var cur=clusters[_i];c1.key===cur.key?dist3=1/0:"min"===opts.linkage?(dist3=dists[c1.key][cur.key],dists[c1.key][cur.key]>dists[c22.key][cur.key]&&(dist3=dists[c22.key][cur.key])):"max"===opts.linkage?(dist3=dists[c1.key][cur.key],dists[c1.key][cur.key]<dists[c22.key][cur.key]&&(dist3=dists[c22.key][cur.key])):dist3="mean"===opts.linkage?(dists[c1.key][cur.key]*c1.size+dists[c22.key][cur.key]*c22.size)/(c1.size+c22.size):"dendrogram"===opts.mode?getDist3(cur.value,c1.value):getDist3(cur.value[0],c1.value[0]),dists[c1.key][cur.key]=dists[cur.key][c1.key]=dist3}for(var _i2=0;_i2<clusters.length;_i2++){var key1=clusters[_i2].key;if(mins[key1]===c1.key||mins[key1]===c22.key){for(var _min=key1,j3=0;j3<clusters.length;j3++){var key2=clusters[j3].key;dists[key1][key2]<dists[key1][_min]&&(_min=key2)}mins[key1]=_min}clusters[_i2].index=_i2}return c1.key=c22.key=c1.index=c22.index=null,!0},"mergeClosest"),_getAllChildren=__name(function(root3,arr,cy){root3&&(root3.value?arr.push(root3.value):(root3.left&&_getAllChildren(root3.left,arr),root3.right&&_getAllChildren(root3.right,arr)))},"getAllChildren"),_buildDendrogram=__name(function(root3,cy){if(!root3)return"";if(root3.left&&root3.right){var leftStr=_buildDendrogram(root3.left,cy),rightStr=_buildDendrogram(root3.right,cy),node2=cy.add({group:"nodes",data:{id:leftStr+","+rightStr}});return cy.add({group:"edges",data:{source:leftStr,target:node2.id()}}),cy.add({group:"edges",data:{source:rightStr,target:node2.id()}}),node2.id()}return root3.value?root3.value.id():void 0},"buildDendrogram"),_buildClustersFromTree=__name(function(root3,k2,cy){if(!root3)return[];var left3=[],right3=[],leaves=[];return 0===k2?(root3.left&&_getAllChildren(root3.left,left3),root3.right&&_getAllChildren(root3.right,right3),leaves=left3.concat(right3),[cy.collection(leaves)]):1===k2?root3.value?[cy.collection(root3.value)]:(root3.left&&_getAllChildren(root3.left,left3),root3.right&&_getAllChildren(root3.right,right3),[cy.collection(left3),cy.collection(right3)]):root3.value?[cy.collection(root3.value)]:(root3.left&&(left3=_buildClustersFromTree(root3.left,k2-1,cy)),root3.right&&(right3=_buildClustersFromTree(root3.right,k2-1,cy)),left3.concat(right3))},"buildClustersFromTree"),hierarchicalClustering=__name(function(options2){for(var cy=this.cy(),nodes5=this.nodes(),opts=setOptions$1(options2),attrs=opts.attributes,getDist3=__name(function(n1,n22){return clusteringDistance(opts.distance,attrs.length,function(i3){return attrs[i3](n1)},function(i3){return attrs[i3](n22)},n1,n22)},"getDist"),clusters=[],dists=[],mins=[],index=[],n2=0;n2<nodes5.length;n2++){var cluster={value:"dendrogram"===opts.mode?nodes5[n2]:[nodes5[n2]],key:n2,index:n2};clusters[n2]=cluster,index[n2]=cluster,dists[n2]=[],mins[n2]=0}for(var i2=0;i2<clusters.length;i2++)for(var j3=0;j3<=i2;j3++){var dist3=void 0;dist3="dendrogram"===opts.mode?i2===j3?1/0:getDist3(clusters[i2].value,clusters[j3].value):i2===j3?1/0:getDist3(clusters[i2].value[0],clusters[j3].value[0]),dists[i2][j3]=dist3,dists[j3][i2]=dist3,dist3<dists[i2][mins[i2]]&&(mins[i2]=j3)}for(var retClusters,merged=mergeClosest(clusters,index,dists,mins,opts);merged;)merged=mergeClosest(clusters,index,dists,mins,opts);return"dendrogram"===opts.mode?(retClusters=_buildClustersFromTree(clusters[0],opts.dendrogramDepth,cy),opts.addDendrogram&&_buildDendrogram(clusters[0],cy)):(retClusters=new Array(clusters.length),clusters.forEach(function(cluster2,i3){cluster2.key=cluster2.index=null,retClusters[i3]=cy.collection(cluster2.value)})),retClusters},"hierarchicalClustering"),hierarchicalClustering$1={hierarchicalClustering:hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions4=__name(function(options2){var dmp=options2.damping,pref=options2.preference;.5<=dmp&&dmp<1||error("Damping must range on [0.5, 1).  Got: ".concat(dmp));var validPrefs=["median","mean","min","max"];return validPrefs.some(function(v3){return v3===pref})||number$1(pref)||error("Preference must be one of [".concat(validPrefs.map(function(p3){return"'".concat(p3,"'")}).join(", "),"] or a number.  Got: ").concat(pref)),defaults$9(options2)},"setOptions"),getSimilarity2=__name(function(type3,n1,n2,attributes){var attr=__name(function(n3,i2){return attributes[i2](n3)},"attr");return-clusteringDistance(type3,attributes.length,function(i2){return attr(n1,i2)},function(i2){return attr(n2,i2)},n1,n2)},"getSimilarity"),getPreference=__name(function(S4,preference){return"median"===preference?median(S4):"mean"===preference?mean(S4):"min"===preference?min5(S4):"max"===preference?max5(S4):preference},"getPreference"),findExemplars=__name(function(n2,R3,A2){for(var indices=[],i2=0;i2<n2;i2++)R3[i2*n2+i2]+A2[i2*n2+i2]>0&&indices.push(i2);return indices},"findExemplars"),assignClusters=__name(function(n2,S4,exemplars){for(var clusters=[],i2=0;i2<n2;i2++){for(var index=-1,max10=-1/0,ei=0;ei<exemplars.length;ei++){var e3=exemplars[ei];S4[i2*n2+e3]>max10&&(index=e3,max10=S4[i2*n2+e3])}index>0&&clusters.push(index)}for(var _ei=0;_ei<exemplars.length;_ei++)clusters[exemplars[_ei]]=exemplars[_ei];return clusters},"assignClusters"),assign4=__name(function(n2,S4,exemplars){for(var clusters=assignClusters(n2,S4,exemplars),ei=0;ei<exemplars.length;ei++){for(var ii=[],c3=0;c3<clusters.length;c3++)clusters[c3]===exemplars[ei]&&ii.push(c3);for(var maxI=-1,maxSum=-1/0,i2=0;i2<ii.length;i2++){for(var sum2=0,j3=0;j3<ii.length;j3++)sum2+=S4[ii[j3]*n2+ii[i2]];sum2>maxSum&&(maxI=i2,maxSum=sum2)}exemplars[ei]=ii[maxI]}return clusters=assignClusters(n2,S4,exemplars)},"assign"),affinityPropagation=__name(function(options2){for(var n2,n22,S4,p3,R3,A2,cy=this.cy(),nodes5=this.nodes(),opts=setOptions4(options2),id2position={},i2=0;i2<nodes5.length;i2++)id2position[nodes5[i2].id()]=i2;n22=(n2=nodes5.length)*n2,S4=new Array(n22);for(var _i=0;_i<n22;_i++)S4[_i]=-1/0;for(var _i2=0;_i2<n2;_i2++)for(var j3=0;j3<n2;j3++)_i2!==j3&&(S4[_i2*n2+j3]=getSimilarity2(opts.distance,nodes5[_i2],nodes5[j3],opts.attributes));p3=getPreference(S4,opts.preference);for(var _i3=0;_i3<n2;_i3++)S4[_i3*n2+_i3]=p3;R3=new Array(n22);for(var _i4=0;_i4<n22;_i4++)R3[_i4]=0;A2=new Array(n22);for(var _i5=0;_i5<n22;_i5++)A2[_i5]=0;for(var old=new Array(n2),Rp=new Array(n2),se2=new Array(n2),_i6=0;_i6<n2;_i6++)old[_i6]=0,Rp[_i6]=0,se2[_i6]=0;for(var iter,e3=new Array(n2*opts.minIterations),_i7=0;_i7<e3.length;_i7++)e3[_i7]=0;for(iter=0;iter<opts.maxIterations;iter++){for(var _i8=0;_i8<n2;_i8++){for(var max10=-1/0,max22=-1/0,maxI=-1,AS=0,_j=0;_j<n2;_j++)old[_j]=R3[_i8*n2+_j],(AS=A2[_i8*n2+_j]+S4[_i8*n2+_j])>=max10?(max22=max10,max10=AS,maxI=_j):AS>max22&&(max22=AS);for(var _j2=0;_j2<n2;_j2++)R3[_i8*n2+_j2]=(1-opts.damping)*(S4[_i8*n2+_j2]-max10)+opts.damping*old[_j2];R3[_i8*n2+maxI]=(1-opts.damping)*(S4[_i8*n2+maxI]-max22)+opts.damping*old[maxI]}for(var _i9=0;_i9<n2;_i9++){for(var sum2=0,_j3=0;_j3<n2;_j3++)old[_j3]=A2[_j3*n2+_i9],Rp[_j3]=Math.max(0,R3[_j3*n2+_i9]),sum2+=Rp[_j3];sum2-=Rp[_i9],Rp[_i9]=R3[_i9*n2+_i9],sum2+=Rp[_i9];for(var _j4=0;_j4<n2;_j4++)A2[_j4*n2+_i9]=(1-opts.damping)*Math.min(0,sum2-Rp[_j4])+opts.damping*old[_j4];A2[_i9*n2+_i9]=(1-opts.damping)*(sum2-Rp[_i9])+opts.damping*old[_i9]}for(var K5=0,_i10=0;_i10<n2;_i10++){var E3=A2[_i10*n2+_i10]+R3[_i10*n2+_i10]>0?1:0;e3[iter%opts.minIterations*n2+_i10]=E3,K5+=E3}if(K5>0&&(iter>=opts.minIterations-1||iter==opts.maxIterations-1)){for(var _sum=0,_i11=0;_i11<n2;_i11++){se2[_i11]=0;for(var _j5=0;_j5<opts.minIterations;_j5++)se2[_i11]+=e3[_j5*n2+_i11];0!==se2[_i11]&&se2[_i11]!==opts.minIterations||_sum++}if(_sum===n2)break}}for(var exemplarsIndices=findExemplars(n2,R3,A2),clusterIndices=assign4(n2,S4,exemplarsIndices),clusters={},c3=0;c3<exemplarsIndices.length;c3++)clusters[exemplarsIndices[c3]]=[];for(var _i12=0;_i12<nodes5.length;_i12++){var clusterIndex=clusterIndices[id2position[nodes5[_i12].id()]];null!=clusterIndex&&clusters[clusterIndex].push(nodes5[_i12])}for(var retClusters=new Array(exemplarsIndices.length),_c=0;_c<exemplarsIndices.length;_c++)retClusters[_c]=cy.collection(clusters[exemplarsIndices[_c]]);return retClusters},"affinityPropagation"),affinityPropagation$1={affinityPropagation:affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:__name(function(options2){if(!plainObject(options2)){var args=arguments;options2={root:args[0],directed:args[1]}}var oddIn,oddOut,startVertex,_hierholzerDefaults=hierholzerDefaults(options2),root3=_hierholzerDefaults.root,directed=_hierholzerDefaults.directed,dflag=!1;root3&&(startVertex=string(root3)?this.filter(root3)[0].id():root3[0].id());var nodes5={},edges3={};directed?this.forEach(function(ele){var id30=ele.id();if(ele.isNode()){var ind=ele.indegree(!0),outd=ele.outdegree(!0),d1=ind-outd,d22=outd-ind;1==d1?oddIn?dflag=!0:oddIn=id30:1==d22?oddOut?dflag=!0:oddOut=id30:(d22>1||d1>1)&&(dflag=!0),nodes5[id30]=[],ele.outgoers().forEach(function(e3){e3.isEdge()&&nodes5[id30].push(e3.id())})}else edges3[id30]=[void 0,ele.target().id()]}):this.forEach(function(ele){var id30=ele.id();ele.isNode()?(ele.degree(!0)%2&&(oddIn?oddOut?dflag=!0:oddOut=id30:oddIn=id30),nodes5[id30]=[],ele.connectedEdges().forEach(function(e3){return nodes5[id30].push(e3.id())})):edges3[id30]=[ele.source().id(),ele.target().id()]});var result={found:!1,trail:void 0};if(dflag)return result;if(oddOut&&oddIn)if(directed){if(startVertex&&oddOut!=startVertex)return result;startVertex=oddOut}else{if(startVertex&&oddOut!=startVertex&&oddIn!=startVertex)return result;startVertex||(startVertex=oddOut)}else startVertex||(startVertex=this[0].id());var walk=__name(function(v3){for(var adj,adjTail,adjHead,currentNode=v3,subtour2=[v3];nodes5[currentNode].length;)adj=nodes5[currentNode].shift(),adjTail=edges3[adj][0],currentNode!=(adjHead=edges3[adj][1])?(nodes5[adjHead]=nodes5[adjHead].filter(function(e3){return e3!=adj}),currentNode=adjHead):directed||currentNode==adjTail||(nodes5[adjTail]=nodes5[adjTail].filter(function(e3){return e3!=adj}),currentNode=adjTail),subtour2.unshift(adj),subtour2.unshift(currentNode);return subtour2},"walk"),trail=[],subtour=[];for(subtour=walk(startVertex);1!=subtour.length;)0==nodes5[subtour[0]].length?(trail.unshift(this.getElementById(subtour.shift())),trail.unshift(this.getElementById(subtour.shift()))):subtour=walk(subtour.shift()).concat(subtour);for(var d3 in trail.unshift(this.getElementById(subtour.shift())),nodes5)if(nodes5[d3].length)return result;return result.found=!0,result.trail=this.spawn(trail,!0),result},"hierholzer")},hopcroftTarjanBiconnected=__name(function(){var eles=this,nodes5={},id30=0,edgeCount3=0,components3=[],stack=[],visitedEdges={},buildComponent=__name(function(x5,y6){for(var i2=stack.length-1,cutset=[],component2=eles.spawn();stack[i2].x!=x5||stack[i2].y!=y6;)cutset.push(stack.pop().edge),i2--;cutset.push(stack.pop().edge),cutset.forEach(function(edge){var connectedNodes=edge.connectedNodes().intersection(eles);component2.merge(edge),connectedNodes.forEach(function(node2){var nodeId=node2.id(),connectedEdges=node2.connectedEdges().intersection(eles);component2.merge(node2),nodes5[nodeId].cutVertex?component2.merge(connectedEdges.filter(function(edge2){return edge2.isLoop()})):component2.merge(connectedEdges)})}),components3.push(component2)},"buildComponent"),_biconnectedSearch=__name(function(root3,currentNode,parent4){root3===parent4&&(edgeCount3+=1),nodes5[currentNode]={id:id30,low:id30++,cutVertex:!1};var sourceId,targetId,otherNodeId,edgeId,edges3=eles.getElementById(currentNode).connectedEdges().intersection(eles);0===edges3.size()?components3.push(eles.spawn(eles.getElementById(currentNode))):edges3.forEach(function(edge){sourceId=edge.source().id(),targetId=edge.target().id(),(otherNodeId=sourceId===currentNode?targetId:sourceId)!==parent4&&(edgeId=edge.id(),visitedEdges[edgeId]||(visitedEdges[edgeId]=!0,stack.push({x:currentNode,y:otherNodeId,edge:edge})),otherNodeId in nodes5?nodes5[currentNode].low=Math.min(nodes5[currentNode].low,nodes5[otherNodeId].id):(_biconnectedSearch(root3,otherNodeId,currentNode),nodes5[currentNode].low=Math.min(nodes5[currentNode].low,nodes5[otherNodeId].low),nodes5[currentNode].id<=nodes5[otherNodeId].low&&(nodes5[currentNode].cutVertex=!0,buildComponent(currentNode,otherNodeId))))})},"biconnectedSearch");eles.forEach(function(ele){if(ele.isNode()){var nodeId=ele.id();nodeId in nodes5||(edgeCount3=0,_biconnectedSearch(nodeId,nodeId),nodes5[nodeId].cutVertex=edgeCount3>1)}});var cutVertices=Object.keys(nodes5).filter(function(id31){return nodes5[id31].cutVertex}).map(function(id31){return eles.getElementById(id31)});return{cut:eles.spawn(cutVertices),components:components3}},"hopcroftTarjanBiconnected"),elesfn$j={},[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,{hopcroftTarjanBiconnected:hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},{tarjanStronglyConnected:tarjanStronglyConnected=__name(function(){var eles=this,nodes5={},index=0,components3=[],stack=[],cut=eles.spawn(eles),_stronglyConnectedSearch=__name(function(sourceNodeId){if(stack.push(sourceNodeId),nodes5[sourceNodeId]={index:index,low:index++,explored:!1},eles.getElementById(sourceNodeId).connectedEdges().intersection(eles).forEach(function(edge){var targetNodeId=edge.target().id();targetNodeId!==sourceNodeId&&(targetNodeId in nodes5||_stronglyConnectedSearch(targetNodeId),nodes5[targetNodeId].explored||(nodes5[sourceNodeId].low=Math.min(nodes5[sourceNodeId].low,nodes5[targetNodeId].low)))}),nodes5[sourceNodeId].index===nodes5[sourceNodeId].low){for(var componentNodes=eles.spawn();;){var nodeId=stack.pop();if(componentNodes.merge(eles.getElementById(nodeId)),nodes5[nodeId].low=nodes5[sourceNodeId].index,nodes5[nodeId].explored=!0,nodeId===sourceNodeId)break}var componentEdges=componentNodes.edgesWith(componentNodes),component2=componentNodes.merge(componentEdges);components3.push(component2),cut=cut.difference(component2)}},"stronglyConnectedSearch");return eles.forEach(function(ele){if(ele.isNode()){var nodeId=ele.id();nodeId in nodes5||_stronglyConnectedSearch(nodeId)}}),{cut:cut,components:components3}},"tarjanStronglyConnected"),tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected}].forEach(function(props){extend4(elesfn$j,props)}),(_api=__name(function(executor){if(!(this instanceof _api))return new _api(executor);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof executor&&executor.call(this,this.fulfill.bind(this),this.reject.bind(this))},"api")).prototype={fulfill:__name(function(value2){return deliver(this,1,"fulfillValue",value2)},"fulfill"),reject:__name(function(value2){return deliver(this,2,"rejectReason",value2)},"reject"),then:__name(function(onFulfilled,onRejected){var next3=new _api;return this.onFulfilled.push(resolver(onFulfilled,next3,"fulfill")),this.onRejected.push(resolver(onRejected,next3,"reject")),execute(this),next3.proxy},"then")},deliver=__name(function(curr,state3,name,value2){return 0===curr.state&&(curr.state=state3,curr[name]=value2,execute(curr)),curr},"deliver"),execute=__name(function(curr){1===curr.state?execute_handlers(curr,"onFulfilled",curr.fulfillValue):2===curr.state&&execute_handlers(curr,"onRejected",curr.rejectReason)},"execute"),execute_handlers=__name(function(curr,name,value2){if(0!==curr[name].length){var handlers=curr[name];curr[name]=[];var func=__name(function(){for(var i2=0;i2<handlers.length;i2++)handlers[i2](value2)},"func");"function"==typeof setImmediate?setImmediate(func):setTimeout(func,0)}},"execute_handlers"),resolver=__name(function(cb,next3,method){return function(value2){if("function"!=typeof cb)next3[method].call(next3,value2);else{var result;try{result=cb(value2)}catch(e3){return void next3.reject(e3)}_resolve(next3,result)}}},"resolver"),_resolve=__name(function(promise4,x5){if(promise4!==x5&&promise4.proxy!==x5){var then2;if("object"===_typeof(x5)&&null!==x5||"function"==typeof x5)try{then2=x5.then}catch(e3){return void promise4.reject(e3)}if("function"!=typeof then2)promise4.fulfill(x5);else{var resolved=!1;try{then2.call(x5,function(y6){resolved||(resolved=!0,y6===x5?promise4.reject(new TypeError("circular thenable chain")):_resolve(promise4,y6))},function(r2){resolved||(resolved=!0,promise4.reject(r2))})}catch(e3){resolved||promise4.reject(e3)}}}else promise4.reject(new TypeError("cannot resolve promise with itself"))},"resolve"),_api.all=function(ps){return new _api(function(resolveAll,rejectAll){for(var vals=new Array(ps.length),doneCount=0,fulfill2=__name(function(i3,val){vals[i3]=val,++doneCount===ps.length&&resolveAll(vals)},"fulfill"),i2=0;i2<ps.length;i2++)(function(i3){var p3=ps[i3];null!=p3&&null!=p3.then?p3.then(function(val2){fulfill2(i3,val2)},function(err){rejectAll(err)}):fulfill2(i3,p3)})(i2)})},_api.resolve=function(val){return new _api(function(resolve2,reject3){resolve2(val)})},_api.reject=function(val){return new _api(function(resolve2,reject3){reject3(val)})},Promise$1="undefined"!=typeof Promise?Promise:_api,anifn=(Animation=__name(function(target,opts,opts2){var isCore=core2(target),isEle=!isCore,_p=this._private=extend4({duration:1e3},opts,opts2);if(_p.target=target,_p.style=_p.style||_p.css,_p.started=!1,_p.playing=!1,_p.hooked=!1,_p.applying=!1,_p.progress=0,_p.completes=[],_p.frames=[],_p.complete&&fn$6(_p.complete)&&_p.completes.push(_p.complete),isEle){var pos=target.position();_p.startPosition=_p.startPosition||{x:pos.x,y:pos.y},_p.startStyle=_p.startStyle||target.cy().style().getAnimationStartStyle(target,_p.style)}if(isCore){var pan2=target.pan();_p.startPan={x:pan2.x,y:pan2.y},_p.startZoom=target.zoom()}this.length=1,this[0]=this},"Animation")).prototype,extend4(anifn,{instanceString:__name(function(){return"animation"},"instanceString"),hook:__name(function(){var _p=this._private;if(!_p.hooked){var tAni=_p.target._private.animation;(_p.queue?tAni.queue:tAni.current).push(this),elementOrCollection(_p.target)&&_p.target.cy().addToAnimationPool(_p.target),_p.hooked=!0}return this},"hook"),play:__name(function(){var _p=this._private;return 1===_p.progress&&(_p.progress=0),_p.playing=!0,_p.started=!1,_p.stopped=!1,this.hook(),this},"play"),playing:__name(function(){return this._private.playing},"playing"),apply:__name(function(){var _p=this._private;return _p.applying=!0,_p.started=!1,_p.stopped=!1,this.hook(),this},"apply"),applying:__name(function(){return this._private.applying},"applying"),pause:__name(function(){var _p=this._private;return _p.playing=!1,_p.started=!1,this},"pause"),stop:__name(function(){var _p=this._private;return _p.playing=!1,_p.started=!1,_p.stopped=!0,this},"stop"),rewind:__name(function(){return this.progress(0)},"rewind"),fastforward:__name(function(){return this.progress(1)},"fastforward"),time:__name(function(t4){var _p=this._private;return void 0===t4?_p.progress*_p.duration:this.progress(t4/_p.duration)},"time"),progress:__name(function(p3){var _p=this._private,wasPlaying=_p.playing;return void 0===p3?_p.progress:(wasPlaying&&this.pause(),_p.progress=p3,_p.started=!1,wasPlaying&&this.play(),this)},"progress"),completed:__name(function(){return 1===this._private.progress},"completed"),reverse:__name(function(){var _p=this._private,wasPlaying=_p.playing;wasPlaying&&this.pause(),_p.progress=1-_p.progress,_p.started=!1;var swap=__name(function(a2,b3){var _pa=_p[a2];null!=_pa&&(_p[a2]=_p[b3],_p[b3]=_pa)},"swap");if(swap("zoom","startZoom"),swap("pan","startPan"),swap("position","startPosition"),_p.style)for(var i2=0;i2<_p.style.length;i2++){var prop=_p.style[i2],name=prop.name,startStyleProp=_p.startStyle[name];_p.startStyle[name]=prop,_p.style[i2]=startStyleProp}return wasPlaying&&this.play(),this},"reverse"),promise:__name(function(type3){var arr,_p=this._private;if("frame"===type3)arr=_p.frames;else arr=_p.completes;return new Promise$1(function(resolve2,reject3){arr.push(function(){resolve2()})})},"promise")}),anifn.complete=anifn.completed,anifn.run=anifn.play,anifn.running=anifn.playing,define$3={animated:__name(function(){return __name(function(){var all=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var ele=all[0];return ele?ele._private.animation.current.length>0:void 0},"animatedImpl")},"animated"),clearQueue:__name(function(){return __name(function(){var all=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var i2=0;i2<all.length;i2++){all[i2]._private.animation.queue=[]}return this},"clearQueueImpl")},"clearQueue"),delay:__name(function(){return __name(function(time4,complete){return(this._private.cy||this).styleEnabled()?this.animate({delay:time4,duration:time4,complete:complete}):this},"delayImpl")},"delay"),delayAnimation:__name(function(){return __name(function(time4,complete){return(this._private.cy||this).styleEnabled()?this.animation({delay:time4,duration:time4,complete:complete}):this},"delayAnimationImpl")},"delayAnimation"),animation:__name(function(){return __name(function(properties,params){var selfIsArrayLike=void 0!==this.length,all=selfIsArrayLike?this:[this],cy=this._private.cy||this,isCore=!selfIsArrayLike,isEles=!isCore;if(!cy.styleEnabled())return this;var style3=cy.style();if(properties=extend4({},properties,params),0===Object.keys(properties).length)return new Animation(all[0],properties);switch(void 0===properties.duration&&(properties.duration=400),properties.duration){case"slow":properties.duration=600;break;case"fast":properties.duration=200}if(isEles&&(properties.style=style3.getPropsList(properties.style||properties.css),properties.css=void 0),isEles&&null!=properties.renderedPosition){var rpos=properties.renderedPosition,pan2=cy.pan(),zoom2=cy.zoom();properties.position=renderedToModelPosition(rpos,zoom2,pan2)}if(isCore&&null!=properties.panBy){var panBy2=properties.panBy,cyPan=cy.pan();properties.pan={x:cyPan.x+panBy2.x,y:cyPan.y+panBy2.y}}var center4=properties.center||properties.centre;if(isCore&&null!=center4){var centerPan=cy.getCenterPan(center4.eles,properties.zoom);null!=centerPan&&(properties.pan=centerPan)}if(isCore&&null!=properties.fit){var fit2=properties.fit,fitVp=cy.getFitViewport(fit2.eles||fit2.boundingBox,fit2.padding);null!=fitVp&&(properties.pan=fitVp.pan,properties.zoom=fitVp.zoom)}if(isCore&&plainObject(properties.zoom)){var vp=cy.getZoomedViewport(properties.zoom);null!=vp?(vp.zoomed&&(properties.zoom=vp.zoom),vp.panned&&(properties.pan=vp.pan)):properties.zoom=null}return new Animation(all[0],properties)},"animationImpl")},"animation"),animate:__name(function(){return __name(function(properties,params){var all=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;params&&(properties=extend4({},properties,params));for(var i2=0;i2<all.length;i2++){var ele=all[i2],queue=ele.animated()&&(void 0===properties.queue||properties.queue);ele.animation(properties,queue?{queue:!0}:void 0).play()}return this},"animateImpl")},"animate"),stop:__name(function(){return __name(function(clearQueue2,jumpToEnd){var all=void 0!==this.length?this:[this],cy=this._private.cy||this;if(!cy.styleEnabled())return this;for(var i2=0;i2<all.length;i2++){for(var _p=all[i2]._private,anis=_p.animation.current,j3=0;j3<anis.length;j3++){var ani_p=anis[j3]._private;jumpToEnd&&(ani_p.duration=0)}clearQueue2&&(_p.animation.queue=[]),jumpToEnd||(_p.animation.current=[])}return cy.notify("draw"),this},"stopImpl")},"stop")},__name(requireIsArray,"requireIsArray"),__name(require_isKey,"require_isKey"),__name(requireIsFunction,"requireIsFunction"),__name(require_coreJsData,"require_coreJsData"),__name(require_isMasked,"require_isMasked"),__name(require_toSource,"require_toSource"),__name(require_baseIsNative,"require_baseIsNative"),__name(require_getValue,"require_getValue"),__name(require_getNative,"require_getNative"),__name(require_nativeCreate,"require_nativeCreate"),__name(require_hashClear,"require_hashClear"),__name(require_hashDelete,"require_hashDelete"),__name(require_hashGet,"require_hashGet"),__name(require_hashHas,"require_hashHas"),__name(require_hashSet,"require_hashSet"),__name(require_Hash,"require_Hash"),__name(require_listCacheClear,"require_listCacheClear"),__name(requireEq,"requireEq"),__name(require_assocIndexOf,"require_assocIndexOf"),__name(require_listCacheDelete,"require_listCacheDelete"),__name(require_listCacheGet,"require_listCacheGet"),__name(require_listCacheHas,"require_listCacheHas"),__name(require_listCacheSet,"require_listCacheSet"),__name(require_ListCache,"require_ListCache"),__name(require_Map,"require_Map"),__name(require_mapCacheClear,"require_mapCacheClear"),__name(require_isKeyable,"require_isKeyable"),__name(require_getMapData,"require_getMapData"),__name(require_mapCacheDelete,"require_mapCacheDelete"),__name(require_mapCacheGet,"require_mapCacheGet"),__name(require_mapCacheHas,"require_mapCacheHas"),__name(require_mapCacheSet,"require_mapCacheSet"),__name(require_MapCache,"require_MapCache"),__name(requireMemoize,"requireMemoize"),__name(require_memoizeCapped,"require_memoizeCapped"),__name(require_stringToPath,"require_stringToPath"),__name(require_arrayMap,"require_arrayMap"),__name(require_baseToString,"require_baseToString"),__name(requireToString,"requireToString"),__name(require_castPath,"require_castPath"),__name(require_toKey,"require_toKey"),__name(require_baseGet,"require_baseGet"),__name(requireGet,"requireGet"),getExports=requireGet(),get4=getDefaultExportFromCjs(getExports),__name(require_defineProperty,"require_defineProperty"),__name(require_baseAssignValue,"require_baseAssignValue"),__name(require_assignValue,"require_assignValue"),__name(require_isIndex,"require_isIndex"),__name(require_baseSet,"require_baseSet"),__name(requireSet,"requireSet"),setExports=requireSet(),set4=getDefaultExportFromCjs(setExports),__name(require_copyArray,"require_copyArray"),__name(requireToPath,"requireToPath"),toPathExports=requireToPath(),toPath=getDefaultExportFromCjs(toPathExports),define$2={data:__name(function(params){return params=extend4({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:__name(function(self2){},"beforeGet"),beforeSet:__name(function(self2,obj){},"beforeSet"),onSet:__name(function(self2){},"onSet"),canSet:__name(function(self2){return!0},"canSet")},params),__name(function(name,value2){var p3=params,selfIsArrayLike=void 0!==this.length,all=selfIsArrayLike?this:[this],single=selfIsArrayLike?this[0]:this;if(string(name)){var ret,path4=-1!==name.indexOf(".")&&toPath(name);if(p3.allowGetting&&void 0===value2)return single&&(p3.beforeGet(single),ret=path4&&void 0===single._private[p3.field][name]?get4(single._private[p3.field],path4):single._private[p3.field][name]),ret;if(p3.allowSetting&&void 0!==value2&&!p3.immutableKeys[name]){var change2=_defineProperty$1({},name,value2);p3.beforeSet(this,change2);for(var i2=0,l4=all.length;i2<l4;i2++){var ele=all[i2];p3.canSet(ele)&&(path4&&void 0===single._private[p3.field][name]?set4(ele._private[p3.field],path4,value2):ele._private[p3.field][name]=value2)}p3.updateStyle&&this.updateStyle(),p3.onSet(this),p3.settingTriggersEvent&&this[p3.triggerFnName](p3.settingEvent)}}else if(p3.allowSetting&&plainObject(name)){var k2,v3,obj=name,keys2=Object.keys(obj);p3.beforeSet(this,obj);for(var _i=0;_i<keys2.length;_i++){if(v3=obj[k2=keys2[_i]],!p3.immutableKeys[k2])for(var j3=0;j3<all.length;j3++){var _ele=all[j3];p3.canSet(_ele)&&(_ele._private[p3.field][k2]=v3)}}p3.updateStyle&&this.updateStyle(),p3.onSet(this),p3.settingTriggersEvent&&this[p3.triggerFnName](p3.settingEvent)}else if(p3.allowBinding&&fn$6(name)){var fn3=name;this.on(p3.bindingEvent,fn3)}else if(p3.allowGetting&&void 0===name){var _ret;return single&&(p3.beforeGet(single),_ret=single._private[p3.field]),_ret}return this},"dataImpl")},"data"),removeData:__name(function(params){return params=extend4({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},params),__name(function(names){var p3=params,all=void 0!==this.length?this:[this];if(string(names)){for(var keys2=names.split(/\s+/),l4=keys2.length,i2=0;i2<l4;i2++){var key=keys2[i2];if(!emptyString(key))if(!p3.immutableKeys[key])for(var i_a=0,l_a=all.length;i_a<l_a;i_a++)all[i_a]._private[p3.field][key]=void 0}p3.triggerEvent&&this[p3.triggerFnName](p3.event)}else if(void 0===names){for(var _i_a=0,_l_a=all.length;_i_a<_l_a;_i_a++)for(var _privateFields=all[_i_a]._private[p3.field],_keys=Object.keys(_privateFields),_i2=0;_i2<_keys.length;_i2++){var _key=_keys[_i2];!p3.immutableKeys[_key]&&(_privateFields[_key]=void 0)}p3.triggerEvent&&this[p3.triggerFnName](p3.event)}return this},"removeDataImpl")},"removeData")},define$1={eventAliasesOn:__name(function(proto){var p3=proto;p3.addListener=p3.listen=p3.bind=p3.on,p3.unlisten=p3.unbind=p3.off=p3.removeListener,p3.trigger=p3.emit,p3.pon=p3.promiseOn=function(events,selector){var self2=this,args=Array.prototype.slice.call(arguments,0);return new Promise$1(function(resolve2,reject3){var callback=__name(function(e3){self2.off.apply(self2,offArgs),resolve2(e3)},"callback"),onArgs=args.concat([callback]),offArgs=onArgs.concat([]);self2.on.apply(self2,onArgs)})}},"eventAliasesOn")},define2={},[define$3,define$2,define$1].forEach(function(m3){extend4(define2,m3)}),elesfn$i={animate:define2.animate(),animation:define2.animation(),animated:define2.animated(),clearQueue:define2.clearQueue(),delay:define2.delay(),delayAnimation:define2.delayAnimation(),stop:define2.stop()},elesfn$h={classes:__name(function(_classes){if(void 0===_classes){var ret=[];return this[0]._private.classes.forEach(function(cls2){return ret.push(cls2)}),ret}array2(_classes)||(_classes=(_classes||"").match(/\S+/g)||[]);for(var changed=[],classesSet=new Set$1(_classes),j3=0;j3<this.length;j3++){for(var ele=this[j3],_p=ele._private,eleClasses=_p.classes,changedEle=!1,i2=0;i2<_classes.length;i2++){var cls=_classes[i2];if(!eleClasses.has(cls)){changedEle=!0;break}}changedEle||(changedEle=eleClasses.size!==_classes.length),changedEle&&(_p.classes=classesSet,changed.push(ele))}return changed.length>0&&this.spawn(changed).updateStyle().emit("class"),this},"classes"),addClass:__name(function(classes3){return this.toggleClass(classes3,!0)},"addClass"),hasClass:__name(function(className){var ele=this[0];return null!=ele&&ele._private.classes.has(className)},"hasClass"),toggleClass:__name(function(classes3,toggle){array2(classes3)||(classes3=classes3.match(/\S+/g)||[]);for(var toggleUndefd=void 0===toggle,changed=[],i2=0,il=this.length;i2<il;i2++)for(var ele=this[i2],eleClasses=ele._private.classes,changedEle=!1,j3=0;j3<classes3.length;j3++){var cls=classes3[j3],hasClass2=eleClasses.has(cls),changedNow=!1;toggle||toggleUndefd&&!hasClass2?(eleClasses.add(cls),changedNow=!0):(!toggle||toggleUndefd&&hasClass2)&&(eleClasses.delete(cls),changedNow=!0),!changedEle&&changedNow&&(changed.push(ele),changedEle=!0)}return changed.length>0&&this.spawn(changed).updateStyle().emit("class"),this},"toggleClass"),removeClass:__name(function(classes3){return this.toggleClass(classes3,!1)},"removeClass"),flashClass:__name(function(classes3,duration){var self2=this;if(null==duration)duration=250;else if(0===duration)return self2;return self2.addClass(classes3),setTimeout(function(){self2.removeClass(classes3)},duration),self2},"flashClass")},elesfn$h.className=elesfn$h.classNames=elesfn$h.classes,(tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:number6,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"}).variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+",tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+",tokens.value=tokens.string+"|"+tokens.number,tokens.id=tokens.variable,function(){var ops,op2,i2;for(ops=tokens.comparatorOp.split("|"),i2=0;i2<ops.length;i2++)op2=ops[i2],tokens.comparatorOp+="|@"+op2;for(ops=tokens.comparatorOp.split("|"),i2=0;i2<ops.length;i2++)(op2=ops[i2]).indexOf("!")>=0||"="!==op2&&(tokens.comparatorOp+="|\\!"+op2)}(),newQuery=__name(function(){return{checks:[]}},"newQuery"),Type2={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:__name(function(ele){return ele.selected()},"matches")},{selector:":unselected",matches:__name(function(ele){return!ele.selected()},"matches")},{selector:":selectable",matches:__name(function(ele){return ele.selectable()},"matches")},{selector:":unselectable",matches:__name(function(ele){return!ele.selectable()},"matches")},{selector:":locked",matches:__name(function(ele){return ele.locked()},"matches")},{selector:":unlocked",matches:__name(function(ele){return!ele.locked()},"matches")},{selector:":visible",matches:__name(function(ele){return ele.visible()},"matches")},{selector:":hidden",matches:__name(function(ele){return!ele.visible()},"matches")},{selector:":transparent",matches:__name(function(ele){return ele.transparent()},"matches")},{selector:":grabbed",matches:__name(function(ele){return ele.grabbed()},"matches")},{selector:":free",matches:__name(function(ele){return!ele.grabbed()},"matches")},{selector:":removed",matches:__name(function(ele){return ele.removed()},"matches")},{selector:":inside",matches:__name(function(ele){return!ele.removed()},"matches")},{selector:":grabbable",matches:__name(function(ele){return ele.grabbable()},"matches")},{selector:":ungrabbable",matches:__name(function(ele){return!ele.grabbable()},"matches")},{selector:":animated",matches:__name(function(ele){return ele.animated()},"matches")},{selector:":unanimated",matches:__name(function(ele){return!ele.animated()},"matches")},{selector:":parent",matches:__name(function(ele){return ele.isParent()},"matches")},{selector:":childless",matches:__name(function(ele){return ele.isChildless()},"matches")},{selector:":child",matches:__name(function(ele){return ele.isChild()},"matches")},{selector:":orphan",matches:__name(function(ele){return ele.isOrphan()},"matches")},{selector:":nonorphan",matches:__name(function(ele){return ele.isChild()},"matches")},{selector:":compound",matches:__name(function(ele){return ele.isNode()?ele.isParent():ele.source().isParent()||ele.target().isParent()},"matches")},{selector:":loop",matches:__name(function(ele){return ele.isLoop()},"matches")},{selector:":simple",matches:__name(function(ele){return ele.isSimple()},"matches")},{selector:":active",matches:__name(function(ele){return ele.active()},"matches")},{selector:":inactive",matches:__name(function(ele){return!ele.active()},"matches")},{selector:":backgrounding",matches:__name(function(ele){return ele.backgrounding()},"matches")},{selector:":nonbackgrounding",matches:__name(function(ele){return!ele.backgrounding()},"matches")}].sort(function(a2,b3){return descending2(a2.selector,b3.selector)}),lookup=function(){for(var s2,selToFn={},i2=0;i2<stateSelectors.length;i2++)selToFn[(s2=stateSelectors[i2]).selector]=s2.matches;return selToFn}(),stateSelectorMatches=__name(function(sel,ele){return lookup[sel](ele)},"stateSelectorMatches"),stateSelectorRegex="("+stateSelectors.map(function(s2){return s2.selector}).join("|")+")",cleanMetaChars=__name(function(str2){return str2.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(match2,$1){return $1})},"cleanMetaChars"),replaceLastQuery=__name(function(selector,examiningQuery,replacementQuery){selector[selector.length-1]=replacementQuery},"replaceLastQuery"),(exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:__name(function(selector,query,_ref){var group2=_slicedToArray(_ref,1)[0];query.checks.push({type:Type2.GROUP,value:"*"===group2?group2:group2+"s"})},"populate")},{name:"state",query:!0,regex:stateSelectorRegex,populate:__name(function(selector,query,_ref3){var state3=_slicedToArray(_ref3,1)[0];query.checks.push({type:Type2.STATE,value:state3})},"populate")},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:__name(function(selector,query,_ref5){var id30=_slicedToArray(_ref5,1)[0];query.checks.push({type:Type2.ID,value:cleanMetaChars(id30)})},"populate")},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:__name(function(selector,query,_ref7){var className=_slicedToArray(_ref7,1)[0];query.checks.push({type:Type2.CLASS,value:cleanMetaChars(className)})},"populate")},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:__name(function(selector,query,_ref9){var variable=_slicedToArray(_ref9,1)[0];query.checks.push({type:Type2.DATA_EXIST,field:cleanMetaChars(variable)})},"populate")},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:__name(function(selector,query,_ref11){var _ref12=_slicedToArray(_ref11,3),variable=_ref12[0],comparatorOp=_ref12[1],value2=_ref12[2];value2=null!=new RegExp("^"+tokens.string+"$").exec(value2)?value2.substring(1,value2.length-1):parseFloat(value2),query.checks.push({type:Type2.DATA_COMPARE,field:cleanMetaChars(variable),operator:comparatorOp,value:value2})},"populate")},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:__name(function(selector,query,_ref13){var _ref14=_slicedToArray(_ref13,2),boolOp=_ref14[0],variable=_ref14[1];query.checks.push({type:Type2.DATA_BOOL,field:cleanMetaChars(variable),operator:boolOp})},"populate")},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:__name(function(selector,query,_ref15){var _ref16=_slicedToArray(_ref15,3),meta3=_ref16[0],comparatorOp=_ref16[1],number7=_ref16[2];query.checks.push({type:Type2.META_COMPARE,field:cleanMetaChars(meta3),operator:comparatorOp,value:parseFloat(number7)})},"populate")},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:__name(function(selector,query){var currentSubject=selector.currentSubject,edgeCount3=selector.edgeCount,compoundCount=selector.compoundCount,lastQ=selector[selector.length-1];return null!=currentSubject&&(lastQ.subject=currentSubject,selector.currentSubject=null),lastQ.edgeCount=edgeCount3,lastQ.compoundCount=compoundCount,selector.edgeCount=0,selector.compoundCount=0,selector[selector.length++]=newQuery()},"populate")},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:__name(function(selector,query){if(null==selector.currentSubject){var edgeQuery=newQuery(),source=query,target=newQuery();return edgeQuery.checks.push({type:Type2.DIRECTED_EDGE,source:source,target:target}),replaceLastQuery(selector,query,edgeQuery),selector.edgeCount++,target}var srcTgtQ=newQuery(),_source=query,_target=newQuery();return srcTgtQ.checks.push({type:Type2.NODE_SOURCE,source:_source,target:_target}),replaceLastQuery(selector,query,srcTgtQ),selector.edgeCount++,_target},"populate")},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:__name(function(selector,query){if(null==selector.currentSubject){var edgeQuery=newQuery(),source=query,target=newQuery();return edgeQuery.checks.push({type:Type2.UNDIRECTED_EDGE,nodes:[source,target]}),replaceLastQuery(selector,query,edgeQuery),selector.edgeCount++,target}var nhoodQ=newQuery(),node2=query,neighbor=newQuery();return nhoodQ.checks.push({type:Type2.NODE_NEIGHBOR,node:node2,neighbor:neighbor}),replaceLastQuery(selector,query,nhoodQ),neighbor},"populate")},{name:"child",separator:!0,regex:tokens.child,populate:__name(function(selector,query){if(null==selector.currentSubject){var parentChildQuery=newQuery(),child=newQuery(),parent4=selector[selector.length-1];return parentChildQuery.checks.push({type:Type2.CHILD,parent:parent4,child:child}),replaceLastQuery(selector,query,parentChildQuery),selector.compoundCount++,child}if(selector.currentSubject===query){var compound=newQuery(),left3=selector[selector.length-1],right3=newQuery(),subject=newQuery(),_child=newQuery(),_parent=newQuery();return compound.checks.push({type:Type2.COMPOUND_SPLIT,left:left3,right:right3,subject:subject}),subject.checks=query.checks,query.checks=[{type:Type2.TRUE}],_parent.checks.push({type:Type2.TRUE}),right3.checks.push({type:Type2.PARENT,parent:_parent,child:_child}),replaceLastQuery(selector,left3,compound),selector.currentSubject=subject,selector.compoundCount++,_child}var _parent2=newQuery(),_child2=newQuery(),pcQChecks=[{type:Type2.PARENT,parent:_parent2,child:_child2}];return _parent2.checks=query.checks,query.checks=pcQChecks,selector.compoundCount++,_child2},"populate")},{name:"descendant",separator:!0,regex:tokens.descendant,populate:__name(function(selector,query){if(null==selector.currentSubject){var ancChQuery=newQuery(),descendant=newQuery(),ancestor=selector[selector.length-1];return ancChQuery.checks.push({type:Type2.DESCENDANT,ancestor:ancestor,descendant:descendant}),replaceLastQuery(selector,query,ancChQuery),selector.compoundCount++,descendant}if(selector.currentSubject===query){var compound=newQuery(),left3=selector[selector.length-1],right3=newQuery(),subject=newQuery(),_descendant=newQuery(),_ancestor=newQuery();return compound.checks.push({type:Type2.COMPOUND_SPLIT,left:left3,right:right3,subject:subject}),subject.checks=query.checks,query.checks=[{type:Type2.TRUE}],_ancestor.checks.push({type:Type2.TRUE}),right3.checks.push({type:Type2.ANCESTOR,ancestor:_ancestor,descendant:_descendant}),replaceLastQuery(selector,left3,compound),selector.currentSubject=subject,selector.compoundCount++,_descendant}var _ancestor2=newQuery(),_descendant2=newQuery(),adQChecks=[{type:Type2.ANCESTOR,ancestor:_ancestor2,descendant:_descendant2}];return _ancestor2.checks=query.checks,query.checks=adQChecks,selector.compoundCount++,_descendant2},"populate")},{name:"subject",modifier:!0,regex:tokens.subject,populate:__name(function(selector,query){if(null!=selector.currentSubject&&selector.currentSubject!==query)return warn("Redefinition of subject in selector `"+selector.toString()+"`"),!1;selector.currentSubject=query;var topChk=selector[selector.length-1].checks[0],topType=null==topChk?null:topChk.type;topType===Type2.DIRECTED_EDGE?topChk.type=Type2.NODE_TARGET:topType===Type2.UNDIRECTED_EDGE&&(topChk.type=Type2.NODE_NEIGHBOR,topChk.node=topChk.nodes[1],topChk.neighbor=topChk.nodes[0],topChk.nodes=null)},"populate")}]).forEach(function(e3){return e3.regexObj=new RegExp("^"+e3.regex)}),consumeExpr=__name(function(remaining){for(var expr,match2,name,j3=0;j3<exprs.length;j3++){var e3=exprs[j3],n2=e3.name,m3=remaining.match(e3.regexObj);if(null!=m3){match2=m3,expr=e3,name=n2;var consumed=m3[0];remaining=remaining.substring(consumed.length);break}}return{expr:expr,match:match2,name:name,remaining:remaining}},"consumeExpr"),consumeWhitespace=__name(function(remaining){var match2=remaining.match(/^\s+/);if(match2){var consumed=match2[0];remaining=remaining.substring(consumed.length)}return remaining},"consumeWhitespace"),parse=__name(function(selector){var remaining=this.inputText=selector,currentQuery=this[0]=newQuery();for(this.length=1,remaining=consumeWhitespace(remaining);;){var exprInfo=consumeExpr(remaining);if(null==exprInfo.expr)return warn("The selector `"+selector+"`is invalid"),!1;var args=exprInfo.match.slice(1),ret=exprInfo.expr.populate(this,currentQuery,args);if(!1===ret)return!1;if(null!=ret&&(currentQuery=ret),(remaining=exprInfo.remaining).match(/^\s*$/))break}var lastQ=this[this.length-1];null!=this.currentSubject&&(lastQ.subject=this.currentSubject),lastQ.edgeCount=this.edgeCount,lastQ.compoundCount=this.compoundCount;for(var i2=0;i2<this.length;i2++){var q3=this[i2];if(q3.compoundCount>0&&q3.edgeCount>0)return warn("The selector `"+selector+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(q3.edgeCount>1)return warn("The selector `"+selector+"` is invalid because it uses multiple edge selectors"),!1;1===q3.edgeCount&&warn("The selector `"+selector+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},"parse"),toString3=__name(function(){if(null!=this.toStringCache)return this.toStringCache;for(var clean=__name(function(obj){return null==obj?"":obj},"clean"),cleanVal=__name(function(val){return string(val)?'"'+val+'"':clean(val)},"cleanVal"),space=__name(function(val){return" "+val+" "},"space"),checkToString=__name(function(check,subject){var type3=check.type,value2=check.value;switch(type3){case Type2.GROUP:var group2=clean(value2);return group2.substring(0,group2.length-1);case Type2.DATA_COMPARE:var field=check.field,operator=check.operator;return"["+field+space(clean(operator))+cleanVal(value2)+"]";case Type2.DATA_BOOL:var _operator=check.operator,_field=check.field;return"["+clean(_operator)+_field+"]";case Type2.DATA_EXIST:return"["+check.field+"]";case Type2.META_COMPARE:var _operator2=check.operator;return"[["+check.field+space(clean(_operator2))+cleanVal(value2)+"]]";case Type2.STATE:return value2;case Type2.ID:return"#"+value2;case Type2.CLASS:return"."+value2;case Type2.PARENT:case Type2.CHILD:return queryToString(check.parent,subject)+space(">")+queryToString(check.child,subject);case Type2.ANCESTOR:case Type2.DESCENDANT:return queryToString(check.ancestor,subject)+" "+queryToString(check.descendant,subject);case Type2.COMPOUND_SPLIT:var lhs=queryToString(check.left,subject),sub2=queryToString(check.subject,subject),rhs=queryToString(check.right,subject);return lhs+(lhs.length>0?" ":"")+sub2+rhs;case Type2.TRUE:return""}},"checkToString"),queryToString=__name(function(query2,subject){return query2.checks.reduce(function(str3,chk,i3){return str3+(subject===query2&&0===i3?"$":"")+checkToString(chk,subject)},"")},"queryToString"),str2="",i2=0;i2<this.length;i2++){var query=this[i2];str2+=queryToString(query,query.subject),this.length>1&&i2<this.length-1&&(str2+=", ")}return this.toStringCache=str2,str2},"toString"),parse$1={parse:parse,toString:toString3},valCmp=__name(function(fieldVal,operator,value2){var matches33,fieldStr,valStr,isFieldStr=string(fieldVal),isFieldNum=number$1(fieldVal),isValStr=string(value2),caseInsensitive=!1,notExpr=!1,isIneqCmp=!1;switch(operator.indexOf("!")>=0&&(operator=operator.replace("!",""),notExpr=!0),operator.indexOf("@")>=0&&(operator=operator.replace("@",""),caseInsensitive=!0),(isFieldStr||isValStr||caseInsensitive)&&(fieldStr=isFieldStr||isFieldNum?""+fieldVal:"",valStr=""+value2),caseInsensitive&&(fieldVal=fieldStr=fieldStr.toLowerCase(),value2=valStr=valStr.toLowerCase()),operator){case"*=":matches33=fieldStr.indexOf(valStr)>=0;break;case"$=":matches33=fieldStr.indexOf(valStr,fieldStr.length-valStr.length)>=0;break;case"^=":matches33=0===fieldStr.indexOf(valStr);break;case"=":matches33=fieldVal===value2;break;case">":isIneqCmp=!0,matches33=fieldVal>value2;break;case">=":isIneqCmp=!0,matches33=fieldVal>=value2;break;case"<":isIneqCmp=!0,matches33=fieldVal<value2;break;case"<=":isIneqCmp=!0,matches33=fieldVal<=value2;break;default:matches33=!1}return!notExpr||null==fieldVal&&isIneqCmp||(matches33=!matches33),matches33},"valCmp"),boolCmp=__name(function(fieldVal,operator){switch(operator){case"?":return!!fieldVal;case"!":return!fieldVal;case"^":return void 0===fieldVal}},"boolCmp"),existCmp=__name(function(fieldVal){return void 0!==fieldVal},"existCmp"),data$1=__name(function(ele,field){return ele.data(field)},"data"),meta=__name(function(ele,field){return ele[field]()},"meta"),match=[],matches$1=__name(function(query,ele){return query.checks.every(function(chk){return match[chk.type](chk,ele)})},"matches"),match[Type2.GROUP]=function(check,ele){var group2=check.value;return"*"===group2||group2===ele.group()},match[Type2.STATE]=function(check,ele){var stateSelector=check.value;return stateSelectorMatches(stateSelector,ele)},match[Type2.ID]=function(check,ele){var id30=check.value;return ele.id()===id30},match[Type2.CLASS]=function(check,ele){var cls=check.value;return ele.hasClass(cls)},match[Type2.META_COMPARE]=function(check,ele){var field=check.field,operator=check.operator,value2=check.value;return valCmp(meta(ele,field),operator,value2)},match[Type2.DATA_COMPARE]=function(check,ele){var field=check.field,operator=check.operator,value2=check.value;return valCmp(data$1(ele,field),operator,value2)},match[Type2.DATA_BOOL]=function(check,ele){var field=check.field,operator=check.operator;return boolCmp(data$1(ele,field),operator)},match[Type2.DATA_EXIST]=function(check,ele){var field=check.field;return check.operator,existCmp(data$1(ele,field))},match[Type2.UNDIRECTED_EDGE]=function(check,ele){var qA=check.nodes[0],qB=check.nodes[1],src=ele.source(),tgt=ele.target();return matches$1(qA,src)&&matches$1(qB,tgt)||matches$1(qB,src)&&matches$1(qA,tgt)},match[Type2.NODE_NEIGHBOR]=function(check,ele){return matches$1(check.node,ele)&&ele.neighborhood().some(function(n2){return n2.isNode()&&matches$1(check.neighbor,n2)})},match[Type2.DIRECTED_EDGE]=function(check,ele){return matches$1(check.source,ele.source())&&matches$1(check.target,ele.target())},match[Type2.NODE_SOURCE]=function(check,ele){return matches$1(check.source,ele)&&ele.outgoers().some(function(n2){return n2.isNode()&&matches$1(check.target,n2)})},match[Type2.NODE_TARGET]=function(check,ele){return matches$1(check.target,ele)&&ele.incomers().some(function(n2){return n2.isNode()&&matches$1(check.source,n2)})},match[Type2.CHILD]=function(check,ele){return matches$1(check.child,ele)&&matches$1(check.parent,ele.parent())},match[Type2.PARENT]=function(check,ele){return matches$1(check.parent,ele)&&ele.children().some(function(c3){return matches$1(check.child,c3)})},match[Type2.DESCENDANT]=function(check,ele){return matches$1(check.descendant,ele)&&ele.ancestors().some(function(a2){return matches$1(check.ancestor,a2)})},match[Type2.ANCESTOR]=function(check,ele){return matches$1(check.ancestor,ele)&&ele.descendants().some(function(d3){return matches$1(check.descendant,d3)})},match[Type2.COMPOUND_SPLIT]=function(check,ele){return matches$1(check.subject,ele)&&matches$1(check.left,ele)&&matches$1(check.right,ele)},match[Type2.TRUE]=function(){return!0},match[Type2.COLLECTION]=function(check,ele){return check.value.has(ele)},match[Type2.FILTER]=function(check,ele){return(0,check.value)(ele)},filter3=__name(function(collection4){var self2=this;if(1===self2.length&&1===self2[0].checks.length&&self2[0].checks[0].type===Type2.ID)return collection4.getElementById(self2[0].checks[0].value).collection();var selectorFunction=__name(function(element3){for(var j3=0;j3<self2.length;j3++){var query=self2[j3];if(matches$1(query,element3))return!0}return!1},"selectorFunction");return null==self2.text()&&(selectorFunction=__name(function(){return!0},"selectorFunction")),collection4.filter(selectorFunction)},"filter"),matching={matches:__name(function(ele){for(var j3=0;j3<this.length;j3++){var query=this[j3];if(matches$1(query,ele))return!0}return!1},"matches"),filter:filter3},selfn=(Selector=__name(function(selector){this.inputText=selector,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==selector||string(selector)&&selector.match(/^\s*$/)||(elementOrCollection(selector)?this.addQuery({checks:[{type:Type2.COLLECTION,value:selector.collection()}]}):fn$6(selector)?this.addQuery({checks:[{type:Type2.FILTER,value:selector}]}):string(selector)?this.parse(selector)||(this.invalid=!0):error("A selector must be created from a string; found "))},"Selector")).prototype,[parse$1,matching].forEach(function(p3){return extend4(selfn,p3)}),selfn.text=function(){return this.inputText},selfn.size=function(){return this.length},selfn.eq=function(i2){return this[i2]},selfn.sameText=function(otherSel){return!this.invalid&&!otherSel.invalid&&this.text()===otherSel.text()},selfn.addQuery=function(q3){this[this.length++]=q3},selfn.selector=selfn.toString,elesfn$g={allAre:__name(function(selector){var selObj=new Selector(selector);return this.every(function(ele){return selObj.matches(ele)})},"allAre"),is:__name(function(selector){var selObj=new Selector(selector);return this.some(function(ele){return selObj.matches(ele)})},"is"),some:__name(function(fn3,thisArg){for(var i2=0;i2<this.length;i2++){if(thisArg?fn3.apply(thisArg,[this[i2],i2,this]):fn3(this[i2],i2,this))return!0}return!1},"some"),every:__name(function(fn3,thisArg){for(var i2=0;i2<this.length;i2++){if(!(thisArg?fn3.apply(thisArg,[this[i2],i2,this]):fn3(this[i2],i2,this)))return!1}return!0},"every"),same:__name(function(collection4){if(this===collection4)return!0;collection4=this.cy().collection(collection4);var thisLength=this.length;return thisLength===collection4.length&&(1===thisLength?this[0]===collection4[0]:this.every(function(ele){return collection4.hasElementWithId(ele.id())}))},"same"),anySame:__name(function(collection4){return collection4=this.cy().collection(collection4),this.some(function(ele){return collection4.hasElementWithId(ele.id())})},"anySame"),allAreNeighbors:__name(function(collection4){collection4=this.cy().collection(collection4);var nhood=this.neighborhood();return collection4.every(function(ele){return nhood.hasElementWithId(ele.id())})},"allAreNeighbors"),contains:__name(function(collection4){collection4=this.cy().collection(collection4);var self2=this;return collection4.every(function(ele){return self2.hasElementWithId(ele.id())})},"contains")},elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors,elesfn$g.has=elesfn$g.contains,elesfn$g.equal=elesfn$g.equals=elesfn$g.same,cache=__name(function(fn3,name){return __name(function(arg1,arg2,arg3,arg4){var key,selectorOrEles=arg1;if(null==selectorOrEles?key="":elementOrCollection(selectorOrEles)&&1===selectorOrEles.length&&(key=selectorOrEles.id()),1===this.length&&key){var _p=this[0]._private,tch=_p.traversalCache=_p.traversalCache||{},ch=tch[name]=tch[name]||[],hash=hashString(key),cacheHit=ch[hash];return cacheHit||(ch[hash]=fn3.call(this,arg1,arg2,arg3,arg4))}return fn3.call(this,arg1,arg2,arg3,arg4)},"traversalCache")},"cache"),elesfn$f={parent:__name(function(selector){var parents3=[];if(1===this.length){var parent4=this[0]._private.parent;if(parent4)return parent4}for(var i2=0;i2<this.length;i2++){var _parent=this[i2]._private.parent;_parent&&parents3.push(_parent)}return this.spawn(parents3,!0).filter(selector)},"parent"),parents:__name(function(selector){for(var parents3=[],eles=this.parent();eles.nonempty();){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];parents3.push(ele)}eles=eles.parent()}return this.spawn(parents3,!0).filter(selector)},"parents"),commonAncestors:__name(function(selector){for(var ancestors,i2=0;i2<this.length;i2++){var parents3=this[i2].parents();ancestors=(ancestors=ancestors||parents3).intersect(parents3)}return ancestors.filter(selector)},"commonAncestors"),orphans:__name(function(selector){return this.stdFilter(function(ele){return ele.isOrphan()}).filter(selector)},"orphans"),nonorphans:__name(function(selector){return this.stdFilter(function(ele){return ele.isChild()}).filter(selector)},"nonorphans"),children:cache(function(selector){for(var children2=[],i2=0;i2<this.length;i2++)for(var eleChildren=this[i2]._private.children,j3=0;j3<eleChildren.length;j3++)children2.push(eleChildren[j3]);return this.spawn(children2,!0).filter(selector)},"children"),siblings:__name(function(selector){return this.parent().children().not(this).filter(selector)},"siblings"),isParent:__name(function(){var ele=this[0];if(ele)return ele.isNode()&&0!==ele._private.children.length},"isParent"),isChildless:__name(function(){var ele=this[0];if(ele)return ele.isNode()&&0===ele._private.children.length},"isChildless"),isChild:__name(function(){var ele=this[0];if(ele)return ele.isNode()&&null!=ele._private.parent},"isChild"),isOrphan:__name(function(){var ele=this[0];if(ele)return ele.isNode()&&null==ele._private.parent},"isOrphan"),descendants:__name(function(selector){var elements2=[];function add3(eles){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];elements2.push(ele),ele.children().nonempty()&&add3(ele.children())}}return __name(add3,"add"),add3(this.children()),this.spawn(elements2,!0).filter(selector)},"descendants")},__name(forEachCompound,"forEachCompound"),__name(addChildren,"addChildren"),elesfn$f.forEachDown=function(fn3){return forEachCompound(this,fn3,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addChildren)},__name(addParent,"addParent"),elesfn$f.forEachUp=function(fn3){return forEachCompound(this,fn3,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParent)},__name(addParentAndChildren,"addParentAndChildren"),elesfn$f.forEachUpAndDown=function(fn3){return forEachCompound(this,fn3,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParentAndChildren)},elesfn$f.ancestors=elesfn$f.parents,(fn$5=elesfn$e={data:define2.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define2.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define2.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define2.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define2.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define2.removeData({field:"rscratch",triggerEvent:!1}),id:__name(function(){var ele=this[0];if(ele)return ele._private.data.id},"id")}).attr=fn$5.data,fn$5.removeAttr=fn$5.removeData,data3=elesfn$e,elesfn$d={},__name(defineDegreeFunction,"defineDegreeFunction"),extend4(elesfn$d,{degree:defineDegreeFunction(function(node2,edge){return edge.source().same(edge.target())?2:1}),indegree:defineDegreeFunction(function(node2,edge){return edge.target().same(node2)?1:0}),outdegree:defineDegreeFunction(function(node2,edge){return edge.source().same(node2)?1:0})}),__name(defineDegreeBoundsFunction,"defineDegreeBoundsFunction"),extend4(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",function(degree,min9){return degree<min9}),maxDegree:defineDegreeBoundsFunction("degree",function(degree,max10){return degree>max10}),minIndegree:defineDegreeBoundsFunction("indegree",function(degree,min9){return degree<min9}),maxIndegree:defineDegreeBoundsFunction("indegree",function(degree,max10){return degree>max10}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(degree,min9){return degree<min9}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(degree,max10){return degree>max10})}),extend4(elesfn$d,{totalDegree:__name(function(includeLoops){for(var total=0,nodes5=this.nodes(),i2=0;i2<nodes5.length;i2++)total+=nodes5[i2].degree(includeLoops);return total},"totalDegree")}),beforePositionSet=__name(function(eles,newPos,silent){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];if(!ele.locked()){var oldPos=ele._private.position,delta={x:null!=newPos.x?newPos.x-oldPos.x:0,y:null!=newPos.y?newPos.y-oldPos.y:0};!ele.isParent()||0===delta.x&&0===delta.y||ele.children().shift(delta,silent),ele.dirtyBoundingBoxCache()}}},"beforePositionSet"),positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:__name(function(ele){ele.updateCompoundBounds()},"beforeGet"),beforeSet:__name(function(eles,newPos){beforePositionSet(eles,newPos,!1)},"beforeSet"),onSet:__name(function(eles){eles.dirtyCompoundBoundsCache()},"onSet"),canSet:__name(function(ele){return!ele.locked()},"canSet")},fn$4=elesfn$c={position:define2.data(positionDef),silentPosition:define2.data(extend4({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:__name(function(eles,newPos){beforePositionSet(eles,newPos,!0)},"beforeSet"),onSet:__name(function(eles){eles.dirtyCompoundBoundsCache()},"onSet")})),positions:__name(function(pos,silent){if(plainObject(pos))silent?this.silentPosition(pos):this.position(pos);else if(fn$6(pos)){var _fn=pos,cy=this.cy();cy.startBatch();for(var i2=0;i2<this.length;i2++){var _pos,ele=this[i2];(_pos=_fn(ele,i2))&&(silent?ele.silentPosition(_pos):ele.position(_pos))}cy.endBatch()}return this},"positions"),silentPositions:__name(function(pos){return this.positions(pos,!0)},"silentPositions"),shift:__name(function(dim,val,silent){var delta;if(plainObject(dim)?(delta={x:number$1(dim.x)?dim.x:0,y:number$1(dim.y)?dim.y:0},silent=val):string(dim)&&number$1(val)&&((delta={x:0,y:0})[dim]=val),null!=delta){var cy=this.cy();cy.startBatch();for(var i2=0;i2<this.length;i2++){var ele=this[i2];if(!(cy.hasCompoundNodes()&&ele.isChild()&&ele.ancestors().anySame(this))){var pos=ele.position(),newPos={x:pos.x+delta.x,y:pos.y+delta.y};silent?ele.silentPosition(newPos):ele.position(newPos)}}cy.endBatch()}return this},"shift"),silentShift:__name(function(dim,val){return plainObject(dim)?this.shift(dim,!0):string(dim)&&number$1(val)&&this.shift(dim,val,!0),this},"silentShift"),renderedPosition:__name(function(dim,val){var ele=this[0],cy=this.cy(),zoom2=cy.zoom(),pan2=cy.pan(),rpos=plainObject(dim)?dim:void 0,setting=void 0!==rpos||void 0!==val&&string(dim);if(ele&&ele.isNode()){if(!setting){var pos=ele.position();return rpos=modelToRenderedPosition$1(pos,zoom2,pan2),void 0===dim?rpos:rpos[dim]}for(var i2=0;i2<this.length;i2++){var _ele=this[i2];void 0!==val?_ele.position(dim,(val-pan2[dim])/zoom2):void 0!==rpos&&_ele.position(renderedToModelPosition(rpos,zoom2,pan2))}}else if(!setting)return;return this},"renderedPosition"),relativePosition:__name(function(dim,val){var ele=this[0],cy=this.cy(),ppos=plainObject(dim)?dim:void 0,setting=void 0!==ppos||void 0!==val&&string(dim),hasCompoundNodes2=cy.hasCompoundNodes();if(ele&&ele.isNode()){if(!setting){var pos=ele.position(),_parent=hasCompoundNodes2?ele.parent():null,_hasParent=_parent&&_parent.length>0,_relativeToParent=_hasParent;_hasParent&&(_parent=_parent[0]);var _origin=_relativeToParent?_parent.position():{x:0,y:0};return ppos={x:pos.x-_origin.x,y:pos.y-_origin.y},void 0===dim?ppos:ppos[dim]}for(var i2=0;i2<this.length;i2++){var _ele2=this[i2],parent4=hasCompoundNodes2?_ele2.parent():null,hasParent=parent4&&parent4.length>0,relativeToParent=hasParent;hasParent&&(parent4=parent4[0]);var origin=relativeToParent?parent4.position():{x:0,y:0};void 0!==val?_ele2.position(dim,val+origin[dim]):void 0!==ppos&&_ele2.position({x:ppos.x+origin.x,y:ppos.y+origin.y})}}else if(!setting)return;return this},"relativePosition")},fn$4.modelPosition=fn$4.point=fn$4.position,fn$4.modelPositions=fn$4.points=fn$4.positions,fn$4.renderedPoint=fn$4.renderedPosition,fn$4.relativePoint=fn$4.relativePosition,position2=elesfn$c,fn$3=elesfn$b={},elesfn$b.renderedBoundingBox=function(options2){var bb=this.boundingBox(options2),cy=this.cy(),zoom2=cy.zoom(),pan2=cy.pan(),x1=bb.x1*zoom2+pan2.x,x22=bb.x2*zoom2+pan2.x,y1=bb.y1*zoom2+pan2.y,y22=bb.y2*zoom2+pan2.y;return{x1:x1,x2:x22,y1:y1,y2:y22,w:x22-x1,h:y22-y1}},elesfn$b.dirtyCompoundBoundsCache=function(){var silent=arguments.length>0&&void 0!==arguments[0]&&arguments[0],cy=this.cy();return cy.styleEnabled()&&cy.hasCompoundNodes()?(this.forEachUp(function(ele){if(ele.isParent()){var _p=ele._private;_p.compoundBoundsClean=!1,_p.bbCache=null,silent||ele.emitAndNotify("bounds")}}),this):this},elesfn$b.updateCompoundBounds=function(){var force=arguments.length>0&&void 0!==arguments[0]&&arguments[0],cy=this.cy();if(!cy.styleEnabled()||!cy.hasCompoundNodes())return this;if(!force&&cy.batching())return this;function update2(parent4){if(parent4.isParent()){var _p2=parent4._private,children2=parent4.children(),includeLabels="include"===parent4.pstyle("compound-sizing-wrt-labels").value,min9={width:{val:parent4.pstyle("min-width").pfValue,left:parent4.pstyle("min-width-bias-left"),right:parent4.pstyle("min-width-bias-right")},height:{val:parent4.pstyle("min-height").pfValue,top:parent4.pstyle("min-height-bias-top"),bottom:parent4.pstyle("min-height-bias-bottom")}},bb=children2.boundingBox({includeLabels:includeLabels,includeOverlays:!1,useCache:!1}),pos=_p2.position;0!==bb.w&&0!==bb.h||((bb={w:parent4.pstyle("width").pfValue,h:parent4.pstyle("height").pfValue}).x1=pos.x-bb.w/2,bb.x2=pos.x+bb.w/2,bb.y1=pos.y-bb.h/2,bb.y2=pos.y+bb.h/2),__name(computeBiasValues,"computeBiasValues"),__name(computePaddingValues,"computePaddingValues");var leftVal=min9.width.left.value;"px"===min9.width.left.units&&min9.width.val>0&&(leftVal=100*leftVal/min9.width.val);var rightVal=min9.width.right.value;"px"===min9.width.right.units&&min9.width.val>0&&(rightVal=100*rightVal/min9.width.val);var topVal=min9.height.top.value;"px"===min9.height.top.units&&min9.height.val>0&&(topVal=100*topVal/min9.height.val);var bottomVal=min9.height.bottom.value;"px"===min9.height.bottom.units&&min9.height.val>0&&(bottomVal=100*bottomVal/min9.height.val);var widthBiasDiffs=computeBiasValues(min9.width.val-bb.w,leftVal,rightVal),diffLeft=widthBiasDiffs.biasDiff,diffRight=widthBiasDiffs.biasComplementDiff,heightBiasDiffs=computeBiasValues(min9.height.val-bb.h,topVal,bottomVal),diffTop=heightBiasDiffs.biasDiff,diffBottom=heightBiasDiffs.biasComplementDiff;_p2.autoPadding=computePaddingValues(bb.w,bb.h,parent4.pstyle("padding"),parent4.pstyle("padding-relative-to").value),_p2.autoWidth=Math.max(bb.w,min9.width.val),pos.x=(-diffLeft+bb.x1+bb.x2+diffRight)/2,_p2.autoHeight=Math.max(bb.h,min9.height.val),pos.y=(-diffTop+bb.y1+bb.y2+diffBottom)/2}function computeBiasValues(propDiff,propBias,propBiasComplement){var biasDiff=0,biasComplementDiff=0,biasTotal=propBias+propBiasComplement;return propDiff>0&&biasTotal>0&&(biasDiff=propBias/biasTotal*propDiff,biasComplementDiff=propBiasComplement/biasTotal*propDiff),{biasDiff:biasDiff,biasComplementDiff:biasComplementDiff}}function computePaddingValues(width3,height2,paddingObject,relativeTo){if("%"!==paddingObject.units)return"px"===paddingObject.units?paddingObject.pfValue:0;switch(relativeTo){case"width":return width3>0?paddingObject.pfValue*width3:0;case"height":return height2>0?paddingObject.pfValue*height2:0;case"average":return width3>0&&height2>0?paddingObject.pfValue*(width3+height2)/2:0;case"min":return width3>0&&height2>0?width3>height2?paddingObject.pfValue*height2:paddingObject.pfValue*width3:0;case"max":return width3>0&&height2>0?width3>height2?paddingObject.pfValue*width3:paddingObject.pfValue*height2:0;default:return 0}}}__name(update2,"update");for(var i2=0;i2<this.length;i2++){var ele=this[i2],_p=ele._private;_p.compoundBoundsClean&&!force||(update2(ele),cy.batching()||(_p.compoundBoundsClean=!0))}return this},noninf=__name(function(x5){return x5===1/0||x5===-1/0?0:x5},"noninf"),updateBounds=__name(function(b3,x1,y1,x22,y22){x22-x1!==0&&y22-y1!==0&&null!=x1&&null!=y1&&null!=x22&&null!=y22&&(b3.x1=x1<b3.x1?x1:b3.x1,b3.x2=x22>b3.x2?x22:b3.x2,b3.y1=y1<b3.y1?y1:b3.y1,b3.y2=y22>b3.y2?y22:b3.y2,b3.w=b3.x2-b3.x1,b3.h=b3.y2-b3.y1)},"updateBounds"),updateBoundsFromBox=__name(function(b3,b22){return null==b22?b3:updateBounds(b3,b22.x1,b22.y1,b22.x2,b22.y2)},"updateBoundsFromBox"),prefixedProperty=__name(function(obj,field,prefix){return getPrefixedProperty(obj,field,prefix)},"prefixedProperty"),updateBoundsFromArrow=__name(function(bounds4,ele,prefix){if(!ele.cy().headless()){var x5,y6,_p=ele._private,rstyle=_p.rstyle,halfArW=rstyle.arrowWidth/2;if("none"!==ele.pstyle(prefix+"-arrow-shape").value){"source"===prefix?(x5=rstyle.srcX,y6=rstyle.srcY):"target"===prefix?(x5=rstyle.tgtX,y6=rstyle.tgtY):(x5=rstyle.midX,y6=rstyle.midY);var bbs=_p.arrowBounds=_p.arrowBounds||{},bb=bbs[prefix]=bbs[prefix]||{};bb.x1=x5-halfArW,bb.y1=y6-halfArW,bb.x2=x5+halfArW,bb.y2=y6+halfArW,bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1,expandBoundingBox(bb,1),updateBounds(bounds4,bb.x1,bb.y1,bb.x2,bb.y2)}}},"updateBoundsFromArrow"),updateBoundsFromLabel=__name(function(bounds4,ele,prefix){if(!ele.cy().headless()){var prefixDash;prefixDash=prefix?prefix+"-":"";var _p=ele._private,rstyle=_p.rstyle;if(ele.pstyle(prefixDash+"label").strValue){var lx1,lx2,ly1,ly2,halign=ele.pstyle("text-halign"),valign=ele.pstyle("text-valign"),labelWidth=prefixedProperty(rstyle,"labelWidth",prefix),labelHeight=prefixedProperty(rstyle,"labelHeight",prefix),labelX=prefixedProperty(rstyle,"labelX",prefix),labelY=prefixedProperty(rstyle,"labelY",prefix),marginX=ele.pstyle(prefixDash+"text-margin-x").pfValue,marginY=ele.pstyle(prefixDash+"text-margin-y").pfValue,isEdge2=ele.isEdge(),rotation=ele.pstyle(prefixDash+"text-rotation"),outlineWidth=ele.pstyle("text-outline-width").pfValue,halfBorderWidth=ele.pstyle("text-border-width").pfValue/2,padding2=ele.pstyle("text-background-padding").pfValue,lh=labelHeight,lw=labelWidth,lw_2=lw/2,lh_2=lh/2;if(isEdge2)lx1=labelX-lw_2,lx2=labelX+lw_2,ly1=labelY-lh_2,ly2=labelY+lh_2;else{switch(halign.value){case"left":lx1=labelX-lw,lx2=labelX;break;case"center":lx1=labelX-lw_2,lx2=labelX+lw_2;break;case"right":lx1=labelX,lx2=labelX+lw}switch(valign.value){case"top":ly1=labelY-lh,ly2=labelY;break;case"center":ly1=labelY-lh_2,ly2=labelY+lh_2;break;case"bottom":ly1=labelY,ly2=labelY+lh}}var leftPad=marginX-Math.max(outlineWidth,halfBorderWidth)-padding2-2,rightPad=marginX+Math.max(outlineWidth,halfBorderWidth)+padding2+2,topPad=marginY-Math.max(outlineWidth,halfBorderWidth)-padding2-2,botPad=marginY+Math.max(outlineWidth,halfBorderWidth)+padding2+2;lx1+=leftPad,lx2+=rightPad,ly1+=topPad,ly2+=botPad;var bbPrefix=prefix||"main",bbs=_p.labelBounds,bb=bbs[bbPrefix]=bbs[bbPrefix]||{};bb.x1=lx1,bb.y1=ly1,bb.x2=lx2,bb.y2=ly2,bb.w=lx2-lx1,bb.h=ly2-ly1,bb.leftPad=leftPad,bb.rightPad=rightPad,bb.topPad=topPad,bb.botPad=botPad;var isAutorotate=isEdge2&&"autorotate"===rotation.strValue,isPfValue=null!=rotation.pfValue&&0!==rotation.pfValue;if(isAutorotate||isPfValue){var theta=isAutorotate?prefixedProperty(_p.rstyle,"labelAngle",prefix):rotation.pfValue,cos3=Math.cos(theta),sin3=Math.sin(theta),xo=(lx1+lx2)/2,yo=(ly1+ly2)/2;if(!isEdge2){switch(halign.value){case"left":xo=lx2;break;case"right":xo=lx1}switch(valign.value){case"top":yo=ly2;break;case"bottom":yo=ly1}}var rotate2=__name(function(x5,y6){return{x:(x5-=xo)*cos3-(y6-=yo)*sin3+xo,y:x5*sin3+y6*cos3+yo}},"rotate"),px1y1=rotate2(lx1,ly1),px1y2=rotate2(lx1,ly2),px2y1=rotate2(lx2,ly1),px2y2=rotate2(lx2,ly2);lx1=Math.min(px1y1.x,px1y2.x,px2y1.x,px2y2.x),lx2=Math.max(px1y1.x,px1y2.x,px2y1.x,px2y2.x),ly1=Math.min(px1y1.y,px1y2.y,px2y1.y,px2y2.y),ly2=Math.max(px1y1.y,px1y2.y,px2y1.y,px2y2.y)}var bbPrefixRot=bbPrefix+"Rot",bbRot=bbs[bbPrefixRot]=bbs[bbPrefixRot]||{};bbRot.x1=lx1,bbRot.y1=ly1,bbRot.x2=lx2,bbRot.y2=ly2,bbRot.w=lx2-lx1,bbRot.h=ly2-ly1,updateBounds(bounds4,lx1,ly1,lx2,ly2),updateBounds(_p.labelBounds.all,lx1,ly1,lx2,ly2)}return bounds4}},"updateBoundsFromLabel"),updateBoundsFromOutline=__name(function(bounds4,ele){if(!ele.cy().headless()){var outlineOpacity=ele.pstyle("outline-opacity").value,expansion=ele.pstyle("outline-width").value+ele.pstyle("outline-offset").value;updateBoundsFromMiter(bounds4,ele,outlineOpacity,expansion,"outside",expansion/2)}},"updateBoundsFromOutline"),updateBoundsFromMiter=__name(function(bounds4,ele,opacity,expansionSize,expansionPosition,useFallbackValue){if(!(0===opacity||expansionSize<=0||"inside"===expansionPosition)){var cy=ele.cy(),shape=ele.pstyle("shape").value,rshape=cy.renderer().nodeShapes[shape],_ele$position=ele.position(),x5=_ele$position.x,y6=_ele$position.y,w4=ele.width(),h3=ele.height();if(rshape.hasMiterBounds){"center"===expansionPosition&&(expansionSize/=2);var mbb=rshape.miterBounds(x5,y6,w4,h3,expansionSize);updateBoundsFromBox(bounds4,mbb)}else null!=useFallbackValue&&useFallbackValue>0&&expandBoundingBoxSides(bounds4,[useFallbackValue,useFallbackValue,useFallbackValue,useFallbackValue])}},"updateBoundsFromMiter"),updateBoundsFromMiterBorder=__name(function(bounds4,ele){if(!ele.cy().headless()){var borderOpacity=ele.pstyle("border-opacity").value,borderWidth=ele.pstyle("border-width").pfValue,borderPosition=ele.pstyle("border-position").value;updateBoundsFromMiter(bounds4,ele,borderOpacity,borderWidth,borderPosition)}},"updateBoundsFromMiterBorder"),boundingBoxImpl=__name(function(ele,options2){var ex1,ex2,ey1,ey2,x5,y6,cy=ele._private.cy,styleEnabled2=cy.styleEnabled(),headless2=cy.headless(),bounds4=makeBoundingBox(),_p=ele._private,isNode2=ele.isNode(),isEdge2=ele.isEdge(),rstyle=_p.rstyle,manualExpansion=isNode2&&styleEnabled2?ele.pstyle("bounds-expansion").pfValue:[0],isDisplayed=__name(function(ele2){return"none"!==ele2.pstyle("display").value},"isDisplayed"),displayed=!styleEnabled2||isDisplayed(ele)&&(!isEdge2||isDisplayed(ele.source())&&isDisplayed(ele.target()));if(displayed){var overlayPadding=0;styleEnabled2&&options2.includeOverlays&&0!==ele.pstyle("overlay-opacity").value&&(overlayPadding=ele.pstyle("overlay-padding").value);var underlayPadding=0;styleEnabled2&&options2.includeUnderlays&&0!==ele.pstyle("underlay-opacity").value&&(underlayPadding=ele.pstyle("underlay-padding").value);var padding2=Math.max(overlayPadding,underlayPadding),wHalf=0;if(styleEnabled2&&(wHalf=ele.pstyle("width").pfValue/2),isNode2&&options2.includeNodes){var pos=ele.position();x5=pos.x,y6=pos.y;var halfW=ele.outerWidth()/2,halfH=ele.outerHeight()/2;updateBounds(bounds4,ex1=x5-halfW,ey1=y6-halfH,ex2=x5+halfW,ey2=y6+halfH),styleEnabled2&&updateBoundsFromOutline(bounds4,ele),styleEnabled2&&options2.includeOutlines&&!headless2&&updateBoundsFromOutline(bounds4,ele),styleEnabled2&&updateBoundsFromMiterBorder(bounds4,ele)}else if(isEdge2&&options2.includeEdges)if(styleEnabled2&&!headless2){var curveStyle=ele.pstyle("curve-style").strValue;if(ex1=Math.min(rstyle.srcX,rstyle.midX,rstyle.tgtX),ex2=Math.max(rstyle.srcX,rstyle.midX,rstyle.tgtX),ey1=Math.min(rstyle.srcY,rstyle.midY,rstyle.tgtY),ey2=Math.max(rstyle.srcY,rstyle.midY,rstyle.tgtY),updateBounds(bounds4,ex1-=wHalf,ey1-=wHalf,ex2+=wHalf,ey2+=wHalf),"haystack"===curveStyle){var hpts=rstyle.haystackPts;if(hpts&&2===hpts.length){if(ex1=hpts[0].x,ey1=hpts[0].y,ex1>(ex2=hpts[1].x)){var temp=ex1;ex1=ex2,ex2=temp}if(ey1>(ey2=hpts[1].y)){var _temp=ey1;ey1=ey2,ey2=_temp}updateBounds(bounds4,ex1-wHalf,ey1-wHalf,ex2+wHalf,ey2+wHalf)}}else if("bezier"===curveStyle||"unbundled-bezier"===curveStyle||endsWith(curveStyle,"segments")||endsWith(curveStyle,"taxi")){var pts2;switch(curveStyle){case"bezier":case"unbundled-bezier":pts2=rstyle.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":pts2=rstyle.linePts}if(null!=pts2)for(var j3=0;j3<pts2.length;j3++){var pt=pts2[j3];ex1=pt.x-wHalf,ex2=pt.x+wHalf,ey1=pt.y-wHalf,ey2=pt.y+wHalf,updateBounds(bounds4,ex1,ey1,ex2,ey2)}}}else{var n1pos=ele.source().position(),n2pos=ele.target().position();if((ex1=n1pos.x)>(ex2=n2pos.x)){var _temp2=ex1;ex1=ex2,ex2=_temp2}if((ey1=n1pos.y)>(ey2=n2pos.y)){var _temp3=ey1;ey1=ey2,ey2=_temp3}updateBounds(bounds4,ex1-=wHalf,ey1-=wHalf,ex2+=wHalf,ey2+=wHalf)}if(styleEnabled2&&options2.includeEdges&&isEdge2&&(updateBoundsFromArrow(bounds4,ele,"mid-source"),updateBoundsFromArrow(bounds4,ele,"mid-target"),updateBoundsFromArrow(bounds4,ele,"source"),updateBoundsFromArrow(bounds4,ele,"target")),styleEnabled2)if("yes"===ele.pstyle("ghost").value){var gx=ele.pstyle("ghost-offset-x").pfValue,gy=ele.pstyle("ghost-offset-y").pfValue;updateBounds(bounds4,bounds4.x1+gx,bounds4.y1+gy,bounds4.x2+gx,bounds4.y2+gy)}var bbBody=_p.bodyBounds=_p.bodyBounds||{};assignBoundingBox(bbBody,bounds4),expandBoundingBoxSides(bbBody,manualExpansion),expandBoundingBox(bbBody,1),styleEnabled2&&(ex1=bounds4.x1,ex2=bounds4.x2,ey1=bounds4.y1,ey2=bounds4.y2,updateBounds(bounds4,ex1-padding2,ey1-padding2,ex2+padding2,ey2+padding2));var bbOverlay=_p.overlayBounds=_p.overlayBounds||{};assignBoundingBox(bbOverlay,bounds4),expandBoundingBoxSides(bbOverlay,manualExpansion),expandBoundingBox(bbOverlay,1);var bbLabels=_p.labelBounds=_p.labelBounds||{};null!=bbLabels.all?clearBoundingBox(bbLabels.all):bbLabels.all=makeBoundingBox(),styleEnabled2&&options2.includeLabels&&(options2.includeMainLabels&&updateBoundsFromLabel(bounds4,ele,null),isEdge2&&(options2.includeSourceLabels&&updateBoundsFromLabel(bounds4,ele,"source"),options2.includeTargetLabels&&updateBoundsFromLabel(bounds4,ele,"target")))}return bounds4.x1=noninf(bounds4.x1),bounds4.y1=noninf(bounds4.y1),bounds4.x2=noninf(bounds4.x2),bounds4.y2=noninf(bounds4.y2),bounds4.w=noninf(bounds4.x2-bounds4.x1),bounds4.h=noninf(bounds4.y2-bounds4.y1),bounds4.w>0&&bounds4.h>0&&displayed&&(expandBoundingBoxSides(bounds4,manualExpansion),expandBoundingBox(bounds4,1)),bounds4},"boundingBoxImpl"),getKey=__name(function(opts){var i2=0,tf=__name(function(val){return(val?1:0)<<i2++},"tf"),key=0;return key+=tf(opts.incudeNodes),key+=tf(opts.includeEdges),key+=tf(opts.includeLabels),key+=tf(opts.includeMainLabels),key+=tf(opts.includeSourceLabels),key+=tf(opts.includeTargetLabels),key+=tf(opts.includeOverlays),key+=tf(opts.includeOutlines)},"getKey"),getBoundingBoxPosKey=__name(function(ele){var r2=__name(function(x5){return Math.round(x5)},"r");if(ele.isEdge()){var p1=ele.source().position(),p22=ele.target().position();return hashIntsArray([r2(p1.x),r2(p1.y),r2(p22.x),r2(p22.y)])}var p3=ele.position();return hashIntsArray([r2(p3.x),r2(p3.y)])},"getBoundingBoxPosKey"),cachedBoundingBoxImpl=__name(function(ele,opts){var bb,_p=ele._private,isEdge2=ele.isEdge(),usingDefOpts=(null==opts?defBbOptsKey:getKey(opts))===defBbOptsKey;if(null==_p.bbCache?(bb=boundingBoxImpl(ele,defBbOpts),_p.bbCache=bb,_p.bbCachePosKey=getBoundingBoxPosKey(ele)):bb=_p.bbCache,!usingDefOpts){var isNode2=ele.isNode();bb=makeBoundingBox(),(opts.includeNodes&&isNode2||opts.includeEdges&&!isNode2)&&(opts.includeOverlays?updateBoundsFromBox(bb,_p.overlayBounds):updateBoundsFromBox(bb,_p.bodyBounds)),opts.includeLabels&&(opts.includeMainLabels&&(!isEdge2||opts.includeSourceLabels&&opts.includeTargetLabels)?updateBoundsFromBox(bb,_p.labelBounds.all):(opts.includeMainLabels&&updateBoundsFromBox(bb,_p.labelBounds.mainRot),opts.includeSourceLabels&&updateBoundsFromBox(bb,_p.labelBounds.sourceRot),opts.includeTargetLabels&&updateBoundsFromBox(bb,_p.labelBounds.targetRot))),bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1}return bb},"cachedBoundingBoxImpl"),defBbOptsKey=getKey(defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0}),filledBbOpts=defaults$g(defBbOpts),elesfn$b.boundingBox=function(options2){var bounds4,useCache=void 0===options2||void 0===options2.useCache||!0===options2.useCache,isDirty=memoize2(function(ele2){var _p=ele2._private;return null==_p.bbCache||_p.styleDirty||_p.bbCachePosKey!==getBoundingBoxPosKey(ele2)},function(ele2){return ele2.id()});if(useCache&&1===this.length&&!isDirty(this[0]))options2=void 0===options2?defBbOpts:filledBbOpts(options2),bounds4=cachedBoundingBoxImpl(this[0],options2);else{bounds4=makeBoundingBox();var opts=filledBbOpts(options2=options2||defBbOpts),styleEnabled2=this.cy().styleEnabled();this.edges().forEach(isDirty),this.nodes().forEach(isDirty),styleEnabled2&&this.recalculateRenderedStyle(useCache),this.updateCompoundBounds(!useCache);for(var i2=0;i2<this.length;i2++){var ele=this[i2];isDirty(ele)&&ele.dirtyBoundingBoxCache(),updateBoundsFromBox(bounds4,cachedBoundingBoxImpl(ele,opts))}}return bounds4.x1=noninf(bounds4.x1),bounds4.y1=noninf(bounds4.y1),bounds4.x2=noninf(bounds4.x2),bounds4.y2=noninf(bounds4.y2),bounds4.w=noninf(bounds4.x2-bounds4.x1),bounds4.h=noninf(bounds4.y2-bounds4.y1),bounds4},elesfn$b.dirtyBoundingBoxCache=function(){for(var i2=0;i2<this.length;i2++){var _p=this[i2]._private;_p.bbCache=null,_p.bbCachePosKey=null,_p.bodyBounds=null,_p.overlayBounds=null,_p.labelBounds.all=null,_p.labelBounds.source=null,_p.labelBounds.target=null,_p.labelBounds.main=null,_p.labelBounds.sourceRot=null,_p.labelBounds.targetRot=null,_p.labelBounds.mainRot=null,_p.arrowBounds.source=null,_p.arrowBounds.target=null,_p.arrowBounds["mid-source"]=null,_p.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},elesfn$b.boundingBoxAt=function(fn3){var nodes5=this.nodes(),cy=this.cy(),hasCompoundNodes2=cy.hasCompoundNodes(),parents3=cy.collection();if(hasCompoundNodes2&&(parents3=nodes5.filter(function(node2){return node2.isParent()}),nodes5=nodes5.not(parents3)),plainObject(fn3)){var obj=fn3;fn3=__name(function(){return obj},"fn")}var storeOldPos=__name(function(node2,i2){return node2._private.bbAtOldPos=fn3(node2,i2)},"storeOldPos"),getOldPos=__name(function(node2){return node2._private.bbAtOldPos},"getOldPos");cy.startBatch(),nodes5.forEach(storeOldPos).silentPositions(fn3),hasCompoundNodes2&&(parents3.dirtyCompoundBoundsCache(),parents3.dirtyBoundingBoxCache(),parents3.updateCompoundBounds(!0));var bb=copyBoundingBox(this.boundingBox({useCache:!1}));return nodes5.silentPositions(getOldPos),hasCompoundNodes2&&(parents3.dirtyCompoundBoundsCache(),parents3.dirtyBoundingBoxCache(),parents3.updateCompoundBounds(!0)),cy.endBatch(),bb},fn$3.boundingbox=fn$3.bb=fn$3.boundingBox,fn$3.renderedBoundingbox=fn$3.renderedBoundingBox,bounds=elesfn$b,fn$2=elesfn$a={},(defineDimFns=__name(function(opts){opts.uppercaseName=capitalize(opts.name),opts.autoName="auto"+opts.uppercaseName,opts.labelName="label"+opts.uppercaseName,opts.outerName="outer"+opts.uppercaseName,opts.uppercaseOuterName=capitalize(opts.outerName),fn$2[opts.name]=__name(function(){var ele=this[0],_p=ele._private,styleEnabled2=_p.cy._private.styleEnabled;if(ele){if(styleEnabled2){if(ele.isParent())return ele.updateCompoundBounds(),_p[opts.autoName]||0;var d3=ele.pstyle(opts.name);return"label"===d3.strValue?(ele.recalculateRenderedStyle(),_p.rstyle[opts.labelName]||0):d3.pfValue}return 1}},"dimImpl"),fn$2["outer"+opts.uppercaseName]=__name(function(){var ele=this[0],styleEnabled2=ele._private.cy._private.styleEnabled;if(ele){if(styleEnabled2){var dim=ele[opts.name](),borderPos=ele.pstyle("border-position").value;return dim+("center"===borderPos?ele.pstyle("border-width").pfValue:"outside"===borderPos?2*ele.pstyle("border-width").pfValue:0)+2*ele.padding()}return 1}},"outerDimImpl"),fn$2["rendered"+opts.uppercaseName]=__name(function(){var ele=this[0];if(ele)return ele[opts.name]()*this.cy().zoom()},"renderedDimImpl"),fn$2["rendered"+opts.uppercaseOuterName]=__name(function(){var ele=this[0];if(ele)return ele[opts.outerName]()*this.cy().zoom()},"renderedOuterDimImpl")},"defineDimFns"))({name:"width"}),defineDimFns({name:"height"}),elesfn$a.padding=function(){var ele=this[0],_p=ele._private;return ele.isParent()?(ele.updateCompoundBounds(),void 0!==_p.autoPadding?_p.autoPadding:ele.pstyle("padding").pfValue):ele.pstyle("padding").pfValue},elesfn$a.paddedHeight=function(){var ele=this[0];return ele.height()+2*ele.padding()},elesfn$a.paddedWidth=function(){var ele=this[0];return ele.width()+2*ele.padding()},widthHeight=elesfn$a,ifEdge=__name(function(ele,getValue3){if(ele.isEdge()&&ele.takesUpSpace())return getValue3(ele)},"ifEdge"),ifEdgeRenderedPosition=__name(function(ele,getPoint){if(ele.isEdge()&&ele.takesUpSpace()){var cy=ele.cy();return modelToRenderedPosition$1(getPoint(ele),cy.zoom(),cy.pan())}},"ifEdgeRenderedPosition"),ifEdgeRenderedPositions=__name(function(ele,getPoints){if(ele.isEdge()&&ele.takesUpSpace()){var cy=ele.cy(),pan2=cy.pan(),zoom2=cy.zoom();return getPoints(ele).map(function(p3){return modelToRenderedPosition$1(p3,zoom2,pan2)})}},"ifEdgeRenderedPositions"),pts={controlPoints:{get:__name(function(ele){return ele.renderer().getControlPoints(ele)},"controlPoints"),mult:!0},segmentPoints:{get:__name(function(ele){return ele.renderer().getSegmentPoints(ele)},"segmentPoints"),mult:!0},sourceEndpoint:{get:__name(function(ele){return ele.renderer().getSourceEndpoint(ele)},"sourceEndpoint")},targetEndpoint:{get:__name(function(ele){return ele.renderer().getTargetEndpoint(ele)},"targetEndpoint")},midpoint:{get:__name(function(ele){return ele.renderer().getEdgeMidpoint(ele)},"midpoint")}},renderedName=__name(function(name){return"rendered"+name[0].toUpperCase()+name.substr(1)},"renderedName"),edgePoints=Object.keys(pts).reduce(function(obj,name){var spec=pts[name],rName=renderedName(name);return obj[name]=function(){return ifEdge(this,spec.get)},spec.mult?obj[rName]=function(){return ifEdgeRenderedPositions(this,spec.get)}:obj[rName]=function(){return ifEdgeRenderedPosition(this,spec.get)},obj},{}),dimensions=extend4({},position2,bounds,widthHeight,edgePoints),Event=__name(function(src,props){this.recycle(src,props)},"Event"),__name(returnFalse,"returnFalse"),__name(returnTrue,"returnTrue"),Event.prototype={instanceString:__name(function(){return"event"},"instanceString"),recycle:__name(function(src,props){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,null!=src&&src.preventDefault?(this.type=src.type,this.isDefaultPrevented=src.defaultPrevented?returnTrue:returnFalse):null!=src&&src.type?props=src:this.type=src,null!=props&&(this.originalEvent=props.originalEvent,this.type=null!=props.type?props.type:this.type,this.cy=props.cy,this.target=props.target,this.position=props.position,this.renderedPosition=props.renderedPosition,this.namespace=props.namespace,this.layout=props.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var pos=this.position,zoom2=this.cy.zoom(),pan2=this.cy.pan();this.renderedPosition={x:pos.x*zoom2+pan2.x,y:pos.y*zoom2+pan2.y}}this.timeStamp=src&&src.timeStamp||Date.now()},"recycle"),preventDefault:__name(function(){this.isDefaultPrevented=returnTrue;var e3=this.originalEvent;e3&&e3.preventDefault&&e3.preventDefault()},"preventDefault"),stopPropagation:__name(function(){this.isPropagationStopped=returnTrue;var e3=this.originalEvent;e3&&e3.stopPropagation&&e3.stopPropagation()},"stopPropagation"),stopImmediatePropagation:__name(function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},"stopImmediatePropagation"),isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,defaults$8={qualifierCompare:__name(function(q1,q22){return q1===q22},"qualifierCompare"),eventMatches:__name(function(){return!0},"eventMatches"),addEventFields:__name(function(){},"addEventFields"),callbackContext:__name(function(context){return context},"callbackContext"),beforeEmit:__name(function(){},"beforeEmit"),afterEmit:__name(function(){},"afterEmit"),bubble:__name(function(){return!1},"bubble"),parent:__name(function(){return null},"parent"),context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={},__name(Emitter,"Emitter"),p2=Emitter.prototype,forEachEvent=__name(function(self2,handler,events,qualifier,callback,conf5,confOverrides){fn$6(qualifier)&&(callback=qualifier,qualifier=null),confOverrides&&(conf5=null==conf5?confOverrides:extend4({},conf5,confOverrides));for(var eventList=array2(events)?events:events.split(/\s+/),i2=0;i2<eventList.length;i2++){var evt=eventList[i2];if(!emptyString(evt)){var match2=evt.match(eventRegex);if(match2)if(!1===handler(self2,evt,match2[1],match2[2]?match2[2]:null,qualifier,callback,conf5))break}}},"forEachEvent"),makeEventObj=__name(function(self2,obj){return self2.addEventFields(self2.context,obj),new Event(obj.type,obj)},"makeEventObj"),forEachEventObj=__name(function(self2,handler,events){if(event(events))handler(self2,events);else if(plainObject(events))handler(self2,makeEventObj(self2,events));else for(var eventList=array2(events)?events:events.split(/\s+/),i2=0;i2<eventList.length;i2++){var evt=eventList[i2];if(!emptyString(evt)){var match2=evt.match(eventRegex);if(match2){var type3=match2[1],namespace=match2[2]?match2[2]:null;handler(self2,makeEventObj(self2,{type:type3,namespace:namespace,target:self2.context}))}}}},"forEachEventObj"),p2.on=p2.addListener=function(events,qualifier,callback,conf5,confOverrides){return forEachEvent(this,function(self2,event3,type3,namespace,qualifier2,callback2,conf6){fn$6(callback2)&&self2.listeners.push({event:event3,callback:callback2,type:type3,namespace:namespace,qualifier:qualifier2,conf:conf6})},events,qualifier,callback,conf5,confOverrides),this},p2.one=function(events,qualifier,callback,conf5){return this.on(events,qualifier,callback,conf5,{one:!0})},p2.removeListener=p2.off=function(events,qualifier,callback,conf5){var _this=this;0!==this.emitting&&(this.listeners=copyArray2(this.listeners));for(var listeners=this.listeners,_loop=__name(function(i3){var listener=listeners[i3];forEachEvent(_this,function(self2,event3,type3,namespace,qualifier2,callback2){if((listener.type===type3||"*"===events)&&(!namespace&&".*"!==listener.namespace||listener.namespace===namespace)&&(!qualifier2||self2.qualifierCompare(listener.qualifier,qualifier2))&&(!callback2||listener.callback===callback2))return listeners.splice(i3,1),!1},events,qualifier,callback,conf5)},"_loop"),i2=listeners.length-1;i2>=0;i2--)_loop(i2);return this},p2.removeAllListeners=function(){return this.removeListener("*")},p2.emit=p2.trigger=function(events,extraParams,manualCallback){var listeners=this.listeners,numListenersBeforeEmit=listeners.length;return this.emitting++,array2(extraParams)||(extraParams=[extraParams]),forEachEventObj(this,function(self2,eventObj){null!=manualCallback&&(listeners=[{event:eventObj.event,type:eventObj.type,namespace:eventObj.namespace,callback:manualCallback}],numListenersBeforeEmit=listeners.length);for(var _loop2=__name(function(){var listener=listeners[i2];if(listener.type===eventObj.type&&(!listener.namespace||listener.namespace===eventObj.namespace||".*"===listener.namespace)&&self2.eventMatches(self2.context,listener,eventObj)){var args=[eventObj];null!=extraParams&&push(args,extraParams),self2.beforeEmit(self2.context,listener,eventObj),listener.conf&&listener.conf.one&&(self2.listeners=self2.listeners.filter(function(l4){return l4!==listener}));var context=self2.callbackContext(self2.context,listener,eventObj),ret=listener.callback.apply(context,args);self2.afterEmit(self2.context,listener,eventObj),!1===ret&&(eventObj.stopPropagation(),eventObj.preventDefault())}},"_loop2"),i2=0;i2<numListenersBeforeEmit;i2++)_loop2();self2.bubble(self2.context)&&!eventObj.isPropagationStopped()&&self2.parent(self2.context).emit(eventObj,extraParams)},events),this.emitting--,this},emitterOptions$1={qualifierCompare:__name(function(selector1,selector2){return null==selector1||null==selector2?null==selector1&&null==selector2:selector1.sameText(selector2)},"qualifierCompare"),eventMatches:__name(function(ele,listener,eventObj){var selector=listener.qualifier;return null==selector||ele!==eventObj.target&&element(eventObj.target)&&selector.matches(eventObj.target)},"eventMatches"),addEventFields:__name(function(ele,evt){evt.cy=ele.cy(),evt.target=ele},"addEventFields"),callbackContext:__name(function(ele,listener,eventObj){return null!=listener.qualifier?eventObj.target:ele},"callbackContext"),beforeEmit:__name(function(context,listener){listener.conf&&listener.conf.once&&listener.conf.onceCollection.removeListener(listener.event,listener.qualifier,listener.callback)},"beforeEmit"),bubble:__name(function(){return!0},"bubble"),parent:__name(function(ele){return ele.isChild()?ele.parent():ele.cy()},"parent")},argSelector$1=__name(function(arg){return string(arg)?new Selector(arg):arg},"argSelector"),elesfn$9={createEmitter:__name(function(){for(var i2=0;i2<this.length;i2++){var ele=this[i2],_p=ele._private;_p.emitter||(_p.emitter=new Emitter(emitterOptions$1,ele))}return this},"createEmitter"),emitter:__name(function(){return this._private.emitter},"emitter"),on:__name(function(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++){this[i2].emitter().on(events,argSel,callback)}return this},"on"),removeListener:__name(function(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++){this[i2].emitter().removeListener(events,argSel,callback)}return this},"removeListener"),removeAllListeners:__name(function(){for(var i2=0;i2<this.length;i2++){this[i2].emitter().removeAllListeners()}return this},"removeAllListeners"),one:__name(function(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++){this[i2].emitter().one(events,argSel,callback)}return this},"one"),once:__name(function(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++){this[i2].emitter().on(events,argSel,callback,{once:!0,onceCollection:this})}},"once"),emit:__name(function(events,extraParams){for(var i2=0;i2<this.length;i2++){this[i2].emitter().emit(events,extraParams)}return this},"emit"),emitAndNotify:__name(function(event3,extraParams){if(0!==this.length)return this.cy().notify(event3,this),this.emit(event3,extraParams),this},"emitAndNotify")},define2.eventAliasesOn(elesfn$9),elesfn$8={nodes:__name(function(selector){return this.filter(function(ele){return ele.isNode()}).filter(selector)},"nodes"),edges:__name(function(selector){return this.filter(function(ele){return ele.isEdge()}).filter(selector)},"edges"),byGroup:__name(function(){for(var nodes5=this.spawn(),edges3=this.spawn(),i2=0;i2<this.length;i2++){var ele=this[i2];ele.isNode()?nodes5.push(ele):edges3.push(ele)}return{nodes:nodes5,edges:edges3}},"byGroup"),filter:__name(function(_filter,thisArg){if(void 0===_filter)return this;if(string(_filter)||elementOrCollection(_filter))return new Selector(_filter).filter(this);if(fn$6(_filter)){for(var filterEles=this.spawn(),i2=0;i2<this.length;i2++){var ele=this[i2];(thisArg?_filter.apply(thisArg,[ele,i2,this]):_filter(ele,i2,this))&&filterEles.push(ele)}return filterEles}return this.spawn()},"filter"),not:__name(function(toRemove){if(toRemove){string(toRemove)&&(toRemove=this.filter(toRemove));for(var elements2=this.spawn(),i2=0;i2<this.length;i2++){var element3=this[i2];toRemove.has(element3)||elements2.push(element3)}return elements2}return this},"not"),absoluteComplement:__name(function(){return this.cy().mutableElements().not(this)},"absoluteComplement"),intersect:__name(function(other){if(string(other)){var selector=other;return this.filter(selector)}for(var elements2=this.spawn(),col2=other,col1Smaller=this.length<other.length,colS=col1Smaller?this:col2,colL=col1Smaller?col2:this,i2=0;i2<colS.length;i2++){var ele=colS[i2];colL.has(ele)&&elements2.push(ele)}return elements2},"intersect"),xor:__name(function(other){var cy=this._private.cy;string(other)&&(other=cy.$(other));var elements2=this.spawn(),col2=other,add3=__name(function(col,other2){for(var i2=0;i2<col.length;i2++){var ele=col[i2],id30=ele._private.data.id;other2.hasElementWithId(id30)||elements2.push(ele)}},"add");return add3(this,col2),add3(col2,this),elements2},"xor"),diff:__name(function(other){var cy=this._private.cy;string(other)&&(other=cy.$(other));var left3=this.spawn(),right3=this.spawn(),both=this.spawn(),col2=other,add3=__name(function(col,other2,retEles){for(var i2=0;i2<col.length;i2++){var ele=col[i2],id30=ele._private.data.id;other2.hasElementWithId(id30)?both.merge(ele):retEles.push(ele)}},"add");return add3(this,col2,left3),add3(col2,this,right3),{left:left3,right:right3,both:both}},"diff"),add:__name(function(toAdd){var cy=this._private.cy;if(!toAdd)return this;if(string(toAdd)){var selector=toAdd;toAdd=cy.mutableElements().filter(selector)}for(var elements2=this.spawnSelf(),i2=0;i2<toAdd.length;i2++){var ele=toAdd[i2];!this.has(ele)&&elements2.push(ele)}return elements2},"add"),merge:__name(function(toAdd){var _p=this._private,cy=_p.cy;if(!toAdd)return this;if(toAdd&&string(toAdd)){var selector=toAdd;toAdd=cy.mutableElements().filter(selector)}for(var map5=_p.map,i2=0;i2<toAdd.length;i2++){var toAddEle=toAdd[i2],id30=toAddEle._private.data.id;if(!map5.has(id30)){var index=this.length++;this[index]=toAddEle,map5.set(id30,{ele:toAddEle,index:index})}}return this},"merge"),unmergeAt:__name(function(i2){var id30=this[i2].id(),map5=this._private.map;this[i2]=void 0,map5.delete(id30);var unmergedLastEle=i2===this.length-1;if(this.length>1&&!unmergedLastEle){var lastEleI=this.length-1,lastEle=this[lastEleI],lastEleId=lastEle._private.data.id;this[lastEleI]=void 0,this[i2]=lastEle,map5.set(lastEleId,{ele:lastEle,index:i2})}return this.length--,this},"unmergeAt"),unmergeOne:__name(function(ele){ele=ele[0];var _p=this._private,id30=ele._private.data.id,entry=_p.map.get(id30);if(!entry)return this;var i2=entry.index;return this.unmergeAt(i2),this},"unmergeOne"),unmerge:__name(function(toRemove){var cy=this._private.cy;if(!toRemove)return this;if(toRemove&&string(toRemove)){var selector=toRemove;toRemove=cy.mutableElements().filter(selector)}for(var i2=0;i2<toRemove.length;i2++)this.unmergeOne(toRemove[i2]);return this},"unmerge"),unmergeBy:__name(function(toRmFn){for(var i2=this.length-1;i2>=0;i2--){toRmFn(this[i2])&&this.unmergeAt(i2)}return this},"unmergeBy"),map:__name(function(mapFn,thisArg){for(var arr=[],i2=0;i2<this.length;i2++){var ele=this[i2],ret=thisArg?mapFn.apply(thisArg,[ele,i2,this]):mapFn(ele,i2,this);arr.push(ret)}return arr},"map"),reduce:__name(function(fn3,initialValue){for(var val=initialValue,i2=0;i2<this.length;i2++)val=fn3(val,this[i2],i2,this);return val},"reduce"),max:__name(function(valFn,thisArg){for(var maxEle,max10=-1/0,i2=0;i2<this.length;i2++){var ele=this[i2],val=thisArg?valFn.apply(thisArg,[ele,i2,this]):valFn(ele,i2,this);val>max10&&(max10=val,maxEle=ele)}return{value:max10,ele:maxEle}},"max"),min:__name(function(valFn,thisArg){for(var minEle,min9=1/0,i2=0;i2<this.length;i2++){var ele=this[i2],val=thisArg?valFn.apply(thisArg,[ele,i2,this]):valFn(ele,i2,this);val<min9&&(min9=val,minEle=ele)}return{value:min9,ele:minEle}},"min")},(fn$1=elesfn$8).u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add,fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not,fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect,fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor,fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter,fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement,elesfn$7={isNode:__name(function(){return"nodes"===this.group()},"isNode"),isEdge:__name(function(){return"edges"===this.group()},"isEdge"),isLoop:__name(function(){return this.isEdge()&&this.source()[0]===this.target()[0]},"isLoop"),isSimple:__name(function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},"isSimple"),group:__name(function(){var ele=this[0];if(ele)return ele._private.group},"group")},zIndexSort=__name(function(a2,b3){var hasCompoundNodes2=a2.cy().hasCompoundNodes();function getDepth(ele){var style3=ele.pstyle("z-compound-depth");return"auto"===style3.value?hasCompoundNodes2?ele.zDepth():0:"bottom"===style3.value?-1:"top"===style3.value?MAX_INT$1:0}__name(getDepth,"getDepth");var depthDiff=getDepth(a2)-getDepth(b3);if(0!==depthDiff)return depthDiff;function getEleDepth(ele){return"auto"===ele.pstyle("z-index-compare").value&&ele.isNode()?1:0}__name(getEleDepth,"getEleDepth");var eleDiff=getEleDepth(a2)-getEleDepth(b3);if(0!==eleDiff)return eleDiff;var zDiff=a2.pstyle("z-index").value-b3.pstyle("z-index").value;return 0!==zDiff?zDiff:a2.poolIndex()-b3.poolIndex()},"zIndexSort"),elesfn$6={forEach:__name(function(fn3,thisArg){if(fn$6(fn3))for(var N3=this.length,i2=0;i2<N3;i2++){var ele=this[i2];if(!1===(thisArg?fn3.apply(thisArg,[ele,i2,this]):fn3(ele,i2,this)))break}return this},"forEach"),toArray:__name(function(){for(var array4=[],i2=0;i2<this.length;i2++)array4.push(this[i2]);return array4},"toArray"),slice:__name(function(start3,end2){var array4=[],thisSize=this.length;null==end2&&(end2=thisSize),null==start3&&(start3=0),start3<0&&(start3=thisSize+start3),end2<0&&(end2=thisSize+end2);for(var i2=start3;i2>=0&&i2<end2&&i2<thisSize;i2++)array4.push(this[i2]);return this.spawn(array4)},"slice"),size:__name(function(){return this.length},"size"),eq:__name(function(i2){return this[i2]||this.spawn()},"eq"),first:__name(function(){return this[0]||this.spawn()},"first"),last:__name(function(){return this[this.length-1]||this.spawn()},"last"),empty:__name(function(){return 0===this.length},"empty"),nonempty:__name(function(){return!this.empty()},"nonempty"),sort:__name(function(sortFn){if(!fn$6(sortFn))return this;var sorted=this.toArray().sort(sortFn);return this.spawn(sorted)},"sort"),sortByZIndex:__name(function(){return this.sort(zIndexSort)},"sortByZIndex"),zDepth:__name(function(){var ele=this[0];if(ele){var _p=ele._private;if("nodes"===_p.group){var depth=_p.data.parent?ele.parents().size():0;return ele.isParent()?depth:MAX_INT$1-1}var src=_p.source,tgt=_p.target,srcDepth=src.zDepth(),tgtDepth=tgt.zDepth();return Math.max(srcDepth,tgtDepth,0)}},"zDepth")},elesfn$6.each=elesfn$6.forEach,defineSymbolIterator=__name(function(){"undefined"!=("undefined"==typeof Symbol?"undefined":_typeof(Symbol))&&"undefined"!=_typeof(Symbol.iterator)&&(elesfn$6[Symbol.iterator]=function(){var _this=this,entry={value:void 0,done:!1},i2=0,length2=this.length;return _defineProperty$1({next:__name(function(){return i2<length2?entry.value=_this[i2++]:(entry.value=void 0,entry.done=!0),entry},"next")},Symbol.iterator,function(){return this})})},"defineSymbolIterator"),defineSymbolIterator(),getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:__name(function(options2){var dims;if(options2=getLayoutDimensionOptions(options2),this.takesUpSpace())if(options2.nodeDimensionsIncludeLabels){var bbDim=this.boundingBox();dims={w:bbDim.w,h:bbDim.h}}else dims={w:this.outerWidth(),h:this.outerHeight()};else dims={w:0,h:0};return 0!==dims.w&&0!==dims.h||(dims.w=dims.h=1),dims},"layoutDimensions"),layoutPositions:__name(function(layout6,options2,fn3){var nodes5=this.nodes().filter(function(n2){return!n2.isParent()}),cy=this.cy(),layoutEles=options2.eles,getMemoizeKey=__name(function(node3){return node3.id()},"getMemoizeKey"),fnMem=memoize2(fn3,getMemoizeKey);layout6.emit({type:"layoutstart",layout:layout6}),layout6.animations=[];var calculateSpacing=__name(function(spacing2,nodesBb,pos){var center4_x=nodesBb.x1+nodesBb.w/2,center4_y=nodesBb.y1+nodesBb.h/2;return{x:center4_x+(pos.x-center4_x)*spacing2,y:center4_y+(pos.y-center4_y)*spacing2}},"calculateSpacing"),useSpacingFactor=options2.spacingFactor&&1!==options2.spacingFactor,bb=__name(function(){if(!useSpacingFactor)return null;for(var bb2=makeBoundingBox(),i3=0;i3<nodes5.length;i3++){var node3=nodes5[i3],pos=fnMem(node3,i3);expandBoundingBoxByPoint(bb2,pos.x,pos.y)}return bb2},"spacingBb")(),getFinalPos=memoize2(function(node3,i3){var newPos2=fnMem(node3,i3);if(useSpacingFactor){var spacing2=Math.abs(options2.spacingFactor);newPos2=calculateSpacing(spacing2,bb,newPos2)}return null!=options2.transform&&(newPos2=options2.transform(node3,newPos2)),newPos2},getMemoizeKey);if(options2.animate){for(var i2=0;i2<nodes5.length;i2++){var node2=nodes5[i2],newPos=getFinalPos(node2,i2);if(null==options2.animateFilter||options2.animateFilter(node2,i2)){var ani=node2.animation({position:newPos,duration:options2.animationDuration,easing:options2.animationEasing});layout6.animations.push(ani)}else node2.position(newPos)}if(options2.fit){var fitAni=cy.animation({fit:{boundingBox:layoutEles.boundingBoxAt(getFinalPos),padding:options2.padding},duration:options2.animationDuration,easing:options2.animationEasing});layout6.animations.push(fitAni)}else if(void 0!==options2.zoom&&void 0!==options2.pan){var zoomPanAni=cy.animation({zoom:options2.zoom,pan:options2.pan,duration:options2.animationDuration,easing:options2.animationEasing});layout6.animations.push(zoomPanAni)}layout6.animations.forEach(function(ani2){return ani2.play()}),layout6.one("layoutready",options2.ready),layout6.emit({type:"layoutready",layout:layout6}),Promise$1.all(layout6.animations.map(function(ani2){return ani2.promise()})).then(function(){layout6.one("layoutstop",options2.stop),layout6.emit({type:"layoutstop",layout:layout6})})}else nodes5.positions(getFinalPos),options2.fit&&cy.fit(options2.eles,options2.padding),null!=options2.zoom&&cy.zoom(options2.zoom),options2.pan&&cy.pan(options2.pan),layout6.one("layoutready",options2.ready),layout6.emit({type:"layoutready",layout:layout6}),layout6.one("layoutstop",options2.stop),layout6.emit({type:"layoutstop",layout:layout6});return this},"layoutPositions"),layout:__name(function(options2){return this.cy().makeLayout(extend4({},options2,{eles:this}))},"layout")},elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout,__name(styleCache,"styleCache"),__name(cacheStyleFunction,"cacheStyleFunction"),__name(cachePrototypeStyleFunction,"cachePrototypeStyleFunction"),elesfn$4={recalculateRenderedStyle:__name(function(useCache){var cy=this.cy(),renderer10=cy.renderer(),styleEnabled2=cy.styleEnabled();return renderer10&&styleEnabled2&&renderer10.recalculateRenderedStyle(this,useCache),this},"recalculateRenderedStyle"),dirtyStyleCache:__name(function(){var eles,cy=this.cy(),dirty=__name(function(ele){return ele._private.styleCache=null},"dirty");cy.hasCompoundNodes()?((eles=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(eles.connectedEdges()),eles.forEach(dirty)):this.forEach(function(ele){dirty(ele),ele.connectedEdges().forEach(dirty)});return this},"dirtyStyleCache"),updateStyle:__name(function(notifyRenderer){var cy=this._private.cy;if(!cy.styleEnabled())return this;if(cy.batching())return cy._private.batchStyleEles.merge(this),this;var updatedEles=this;notifyRenderer=!(!notifyRenderer&&void 0!==notifyRenderer),cy.hasCompoundNodes()&&(updatedEles=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var changedEles=updatedEles;return notifyRenderer?changedEles.emitAndNotify("style"):changedEles.emit("style"),updatedEles.forEach(function(ele){return ele._private.styleDirty=!0}),this},"updateStyle"),cleanStyle:__name(function(){var cy=this.cy();if(cy.styleEnabled())for(var i2=0;i2<this.length;i2++){var ele=this[i2];ele._private.styleDirty&&(ele._private.styleDirty=!1,cy.style().apply(ele))}},"cleanStyle"),parsedStyle:__name(function(property2){var includeNonDefault=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ele=this[0],cy=ele.cy();if(cy.styleEnabled()&&ele){ele._private.styleDirty&&(ele._private.styleDirty=!1,cy.style().apply(ele));var overriddenStyle=ele._private.style[property2];return null!=overriddenStyle?overriddenStyle:includeNonDefault?cy.style().getDefaultProperty(property2):null}},"parsedStyle"),numericStyle:__name(function(property2){var ele=this[0];if(ele.cy().styleEnabled()&&ele){var pstyle=ele.pstyle(property2);return void 0!==pstyle.pfValue?pstyle.pfValue:pstyle.value}},"numericStyle"),numericStyleUnits:__name(function(property2){var ele=this[0];if(ele.cy().styleEnabled())return ele?ele.pstyle(property2).units:void 0},"numericStyleUnits"),renderedStyle:__name(function(property2){var cy=this.cy();if(!cy.styleEnabled())return this;var ele=this[0];return ele?cy.style().getRenderedStyle(ele,property2):void 0},"renderedStyle"),style:__name(function(name,value2){var cy=this.cy();if(!cy.styleEnabled())return this;var style3=cy.style();if(plainObject(name)){var props=name;style3.applyBypass(this,props,false),this.emitAndNotify("style")}else if(string(name)){if(void 0===value2){var ele=this[0];return ele?style3.getStylePropertyValue(ele,name):void 0}style3.applyBypass(this,name,value2,false),this.emitAndNotify("style")}else if(void 0===name){var _ele=this[0];return _ele?style3.getRawStyle(_ele):void 0}return this},"style"),removeStyle:__name(function(names){var cy=this.cy();if(!cy.styleEnabled())return this;var style3=cy.style();if(void 0===names)for(var i2=0;i2<this.length;i2++){var ele=this[i2];style3.removeAllBypasses(ele,false)}else{names=names.split(/\s+/);for(var _i=0;_i<this.length;_i++){var _ele2=this[_i];style3.removeBypasses(_ele2,names,false)}}return this.emitAndNotify("style"),this},"removeStyle"),show:__name(function(){return this.css("display","element"),this},"show"),hide:__name(function(){return this.css("display","none"),this},"hide"),effectiveOpacity:__name(function(){var cy=this.cy();if(!cy.styleEnabled())return 1;var hasCompoundNodes2=cy.hasCompoundNodes(),ele=this[0];if(ele){var _p=ele._private,parentOpacity=ele.pstyle("opacity").value;if(!hasCompoundNodes2)return parentOpacity;var parents3=_p.data.parent?ele.parents():null;if(parents3)for(var i2=0;i2<parents3.length;i2++){parentOpacity*=parents3[i2].pstyle("opacity").value}return parentOpacity}},"effectiveOpacity"),transparent:__name(function(){if(!this.cy().styleEnabled())return!1;var ele=this[0],hasCompoundNodes2=ele.cy().hasCompoundNodes();return ele?hasCompoundNodes2?0===ele.effectiveOpacity():0===ele.pstyle("opacity").value:void 0},"transparent"),backgrounding:__name(function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding},"backgrounding")},__name(checkCompound,"checkCompound"),__name(defineDerivedStateFunction,"defineDerivedStateFunction"),eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",function(ele){return"element"===ele.pstyle("display").value&&0!==ele.width()&&(!ele.isNode()||0!==ele.height())}),elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace})),eleInteractive=cacheStyleFunction("eleInteractive",function(ele){return"yes"===ele.pstyle("events").value&&"visible"===ele.pstyle("visibility").value&&eleTakesUpSpace(ele)}),parentInteractive=cacheStyleFunction("parentInteractive",function(parent4){return"visible"===parent4.pstyle("visibility").value&&eleTakesUpSpace(parent4)}),elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace})),elesfn$4.noninteractive=function(){var ele=this[0];if(ele)return!ele.interactive()},eleVisible=cacheStyleFunction("eleVisible",function(ele){return"visible"===ele.pstyle("visibility").value&&0!==ele.pstyle("opacity").pfValue&&eleTakesUpSpace(ele)}),edgeVisibleViaNode=eleTakesUpSpace,elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode})),elesfn$4.hidden=function(){var ele=this[0];if(ele)return!ele.visible()},elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())}),elesfn$4.bypass=elesfn$4.css=elesfn$4.style,elesfn$4.renderedCss=elesfn$4.renderedStyle,elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle,elesfn$4.pstyle=elesfn$4.parsedStyle,elesfn$3={},__name(defineSwitchFunction,"defineSwitchFunction"),__name(defineSwitchSet,"defineSwitchSet"),defineSwitchSet({field:"locked",overrideField:__name(function(ele){return!!ele.cy().autolock()||void 0},"overrideField"),on:"lock",off:"unlock"}),defineSwitchSet({field:"grabbable",overrideField:__name(function(ele){return!ele.cy().autoungrabify()&&!ele.pannable()&&void 0},"overrideField"),on:"grabify",off:"ungrabify"}),defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:__name(function(ele){return!ele.cy().autounselectify()&&void 0},"overrideAble"),on:"select",off:"unselect"}),defineSwitchSet({field:"selectable",overrideField:__name(function(ele){return!ele.cy().autounselectify()&&void 0},"overrideField"),on:"selectify",off:"unselectify"}),elesfn$3.deselect=elesfn$3.unselect,elesfn$3.grabbed=function(){var ele=this[0];if(ele)return ele._private.grabbed},defineSwitchSet({field:"active",on:"activate",off:"unactivate"}),defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"}),elesfn$3.inactive=function(){var ele=this[0];if(ele)return!ele._private.active},elesfn$2={},defineDagExtremity=__name(function(params){return __name(function(selector){for(var ret=[],i2=0;i2<this.length;i2++){var ele=this[i2];if(ele.isNode()){for(var disqualified=!1,edges3=ele.connectedEdges(),j3=0;j3<edges3.length;j3++){var edge=edges3[j3],src=edge.source(),tgt=edge.target();if(params.noIncomingEdges&&tgt===ele&&src!==ele||params.noOutgoingEdges&&src===ele&&tgt!==ele){disqualified=!0;break}}disqualified||ret.push(ele)}}return this.spawn(ret,!0).filter(selector)},"dagExtremityImpl")},"defineDagExtremity"),defineDagOneHop=__name(function(params){return function(selector){for(var oEles=[],i2=0;i2<this.length;i2++){var ele=this[i2];if(ele.isNode())for(var edges3=ele.connectedEdges(),j3=0;j3<edges3.length;j3++){var edge=edges3[j3],src=edge.source(),tgt=edge.target();params.outgoing&&src===ele?(oEles.push(edge),oEles.push(tgt)):params.incoming&&tgt===ele&&(oEles.push(edge),oEles.push(src))}}return this.spawn(oEles,!0).filter(selector)}},"defineDagOneHop"),defineDagAllHops=__name(function(params){return function(selector){for(var eles=this,sEles=[],sElesIds={};;){var next3=params.outgoing?eles.outgoers():eles.incomers();if(0===next3.length)break;for(var newNext=!1,i2=0;i2<next3.length;i2++){var n2=next3[i2],nid=n2.id();sElesIds[nid]||(sElesIds[nid]=!0,sEles.push(n2),newNext=!0)}if(!newNext)break;eles=next3}return this.spawn(sEles,!0).filter(selector)}},"defineDagAllHops"),elesfn$2.clearTraversalCache=function(){for(var i2=0;i2<this.length;i2++)this[i2]._private.traversalCache=null},extend4(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({})}),extend4(elesfn$2,{neighborhood:cache(function(selector){for(var elements2=[],nodes5=this.nodes(),i2=0;i2<nodes5.length;i2++)for(var node2=nodes5[i2],connectedEdges=node2.connectedEdges(),j3=0;j3<connectedEdges.length;j3++){var edge=connectedEdges[j3],src=edge.source(),tgt=edge.target(),otherNode=node2===src?tgt:src;otherNode.length>0&&elements2.push(otherNode[0]),elements2.push(edge[0])}return this.spawn(elements2,!0).filter(selector)},"neighborhood"),closedNeighborhood:__name(function(selector){return this.neighborhood().add(this).filter(selector)},"closedNeighborhood"),openNeighborhood:__name(function(selector){return this.neighborhood(selector)},"openNeighborhood")}),elesfn$2.neighbourhood=elesfn$2.neighborhood,elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood,elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood,extend4(elesfn$2,{source:cache(__name(function(selector){var src,ele=this[0];return ele&&(src=ele._private.source||ele.cy().collection()),src&&selector?src.filter(selector):src},"sourceImpl"),"source"),target:cache(__name(function(selector){var tgt,ele=this[0];return ele&&(tgt=ele._private.target||ele.cy().collection()),tgt&&selector?tgt.filter(selector):tgt},"targetImpl"),"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})}),__name(defineSourceFunction,"defineSourceFunction"),extend4(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")}),__name(defineEdgesWithFunction,"defineEdgesWithFunction"),extend4(elesfn$2,{connectedEdges:cache(function(selector){for(var retEles=[],i2=0;i2<this.length;i2++){var node2=this[i2];if(node2.isNode())for(var edges3=node2._private.edges,j3=0;j3<edges3.length;j3++){var edge=edges3[j3];retEles.push(edge)}}return this.spawn(retEles,!0).filter(selector)},"connectedEdges"),connectedNodes:cache(function(selector){for(var retEles=[],i2=0;i2<this.length;i2++){var edge=this[i2];edge.isEdge()&&(retEles.push(edge.source()[0]),retEles.push(edge.target()[0]))}return this.spawn(retEles,!0).filter(selector)},"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")}),__name(defineParallelEdgesFunction,"defineParallelEdgesFunction"),extend4(elesfn$2,{components:__name(function(root3){var self2=this,cy=self2.cy(),visited=cy.collection(),unvisited=null==root3?self2.nodes():root3.nodes(),components3=[];null!=root3&&unvisited.empty()&&(unvisited=root3.sources());var visitInComponent=__name(function(node2,component2){visited.merge(node2),unvisited.unmerge(node2),component2.merge(node2)},"visitInComponent");if(unvisited.empty())return self2.spawn();var _loop=__name(function(){var cmpt=cy.collection();components3.push(cmpt);var root4=unvisited[0];visitInComponent(root4,cmpt),self2.bfs({directed:!1,roots:root4,visit:__name(function(v3){return visitInComponent(v3,cmpt)},"visit")}),cmpt.forEach(function(node2){node2.connectedEdges().forEach(function(e3){self2.has(e3)&&cmpt.has(e3.source())&&cmpt.has(e3.target())&&cmpt.merge(e3)})})},"_loop");do{_loop()}while(unvisited.length>0);return components3},"components"),component:__name(function(){var ele=this[0];return ele.cy().mutableElements().components(ele)[0]},"component")}),elesfn$2.componentsOf=elesfn$2.components,Collection=__name(function(cy,elements2){var unique=arguments.length>2&&void 0!==arguments[2]&&arguments[2],removed=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==cy){var map5=new Map$1,createdElements=!1;if(elements2){if(elements2.length>0&&plainObject(elements2[0])&&!element(elements2[0])){createdElements=!0;for(var eles=[],elesIds=new Set$1,i2=0,l4=elements2.length;i2<l4;i2++){var json3=elements2[i2];null==json3.data&&(json3.data={});var _data=json3.data;if(null==_data.id)_data.id=uuid();else if(cy.hasElementWithId(_data.id)||elesIds.has(_data.id))continue;var ele=new Element(cy,json3,!1);eles.push(ele),elesIds.add(_data.id)}elements2=eles}}else elements2=[];this.length=0;for(var _i=0,_l=elements2.length;_i<_l;_i++){var element$1=elements2[_i][0];if(null!=element$1){var id30=element$1._private.data.id;unique&&map5.has(id30)||(unique&&map5.set(id30,{index:this.length,ele:element$1}),this[this.length]=element$1,this.length++)}}this._private={eles:this,cy:cy,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m3){this.lazyMap=m3},rebuildMap:__name(function(){for(var m3=this.lazyMap=new Map$1,eles2=this.eles,_i2=0;_i2<eles2.length;_i2++){var _ele=eles2[_i2];m3.set(_ele.id(),{index:_i2,ele:_ele})}},"rebuildMap")},unique&&(this._private.map=map5),createdElements&&!removed&&this.restore()}else error("A collection must have a reference to the core")},"Collection"),(elesfn$1=Element.prototype=Collection.prototype=Object.create(Array.prototype)).instanceString=function(){return"collection"},elesfn$1.spawn=function(eles,unique){return new Collection(this.cy(),eles,unique)},elesfn$1.spawnSelf=function(){return this.spawn(this)},elesfn$1.cy=function(){return this._private.cy},elesfn$1.renderer=function(){return this._private.cy.renderer()},elesfn$1.element=function(){return this[0]},elesfn$1.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])},elesfn$1.unique=function(){return new Collection(this._private.cy,this,!0)},elesfn$1.hasElementWithId=function(id30){return id30=""+id30,this._private.map.has(id30)},elesfn$1.getElementById=function(id30){id30=""+id30;var cy=this._private.cy,entry=this._private.map.get(id30);return entry?entry.ele:new Collection(cy)},elesfn$1.$id=elesfn$1.getElementById,elesfn$1.poolIndex=function(){var eles=this._private.cy._private.elements,id30=this[0]._private.data.id;return eles._private.map.get(id30).index},elesfn$1.indexOf=function(ele){var id30=ele[0]._private.data.id;return this._private.map.get(id30).index},elesfn$1.indexOfId=function(id30){return id30=""+id30,this._private.map.get(id30).index},elesfn$1.json=function(obj){var ele=this.element(),cy=this.cy();if(null==ele&&obj)return this;if(null!=ele){var p3=ele._private;if(plainObject(obj)){if(cy.startBatch(),obj.data){ele.data(obj.data);var _data2=p3.data;if(ele.isEdge()){var move=!1,spec={},src=obj.data.source,tgt=obj.data.target;null!=src&&src!=_data2.source&&(spec.source=""+src,move=!0),null!=tgt&&tgt!=_data2.target&&(spec.target=""+tgt,move=!0),move&&(ele=ele.move(spec))}else{var newParentValSpecd="parent"in obj.data,parent4=obj.data.parent;!newParentValSpecd||null==parent4&&null==_data2.parent||parent4==_data2.parent||(void 0===parent4&&(parent4=null),null!=parent4&&(parent4=""+parent4),ele=ele.move({parent:parent4}))}}obj.position&&ele.position(obj.position);var checkSwitch=__name(function(k2,trueFnName,falseFnName){var obj_k=obj[k2];null!=obj_k&&obj_k!==p3[k2]&&(obj_k?ele[trueFnName]():ele[falseFnName]())},"checkSwitch");return checkSwitch("removed","remove","restore"),checkSwitch("selected","select","unselect"),checkSwitch("selectable","selectify","unselectify"),checkSwitch("locked","lock","unlock"),checkSwitch("grabbable","grabify","ungrabify"),checkSwitch("pannable","panify","unpanify"),null!=obj.classes&&ele.classes(obj.classes),cy.endBatch(),this}if(void 0===obj){var json3={data:copy3(p3.data),position:copy3(p3.position),group:p3.group,removed:p3.removed,selected:p3.selected,selectable:p3.selectable,locked:p3.locked,grabbable:p3.grabbable,pannable:p3.pannable,classes:null};json3.classes="";var i2=0;return p3.classes.forEach(function(cls){return json3.classes+=0===i2++?cls:" "+cls}),json3}}},elesfn$1.jsons=function(){for(var jsons=[],i2=0;i2<this.length;i2++){var json3=this[i2].json();jsons.push(json3)}return jsons},elesfn$1.clone=function(){for(var cy=this.cy(),elesArr=[],i2=0;i2<this.length;i2++){var json3=this[i2].json(),clone6=new Element(cy,json3,!1);elesArr.push(clone6)}return new Collection(cy,elesArr)},elesfn$1.copy=elesfn$1.clone,elesfn$1.restore=function(){for(var elements2,i2,notifyRenderer=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],addToPool2=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],cy=this.cy(),cy_p=cy._private,nodes5=[],edges3=[],_i3=0,l4=this.length;_i3<l4;_i3++){var ele=this[_i3];addToPool2&&!ele.removed()||(ele.isNode()?nodes5.push(ele):edges3.push(ele))}elements2=nodes5.concat(edges3);var removeFromElements=__name(function(){elements2.splice(i2,1),i2--},"removeFromElements");for(i2=0;i2<elements2.length;i2++){var _ele2=elements2[i2],_private=_ele2._private,_data3=_private.data;if(_ele2.clearTraversalCache(),addToPool2||_private.removed)if(void 0===_data3.id)_data3.id=uuid();else if(number$1(_data3.id))_data3.id=""+_data3.id;else{if(emptyString(_data3.id)||!string(_data3.id)){error("Can not create element with invalid string ID `"+_data3.id+"`"),removeFromElements();continue}if(cy.hasElementWithId(_data3.id)){error("Can not create second element with ID `"+_data3.id+"`"),removeFromElements();continue}}else;var id30=_data3.id;if(_ele2.isNode()){var pos=_private.position;null==pos.x&&(pos.x=0),null==pos.y&&(pos.y=0)}if(_ele2.isEdge()){for(var edge=_ele2,fields=["source","target"],fieldsLength=fields.length,badSourceOrTarget=!1,j3=0;j3<fieldsLength;j3++){var field=fields[j3],val=_data3[field];number$1(val)&&(val=_data3[field]=""+_data3[field]),null==val||""===val?(error("Can not create edge `"+id30+"` with unspecified "+field),badSourceOrTarget=!0):cy.hasElementWithId(val)||(error("Can not create edge `"+id30+"` with nonexistant "+field+" `"+val+"`"),badSourceOrTarget=!0)}if(badSourceOrTarget){removeFromElements();continue}var src=cy.getElementById(_data3.source),tgt=cy.getElementById(_data3.target);src.same(tgt)?src._private.edges.push(edge):(src._private.edges.push(edge),tgt._private.edges.push(edge)),edge._private.source=src,edge._private.target=tgt}_private.map=new Map$1,_private.map.set(id30,{ele:_ele2,index:0}),_private.removed=!1,addToPool2&&cy.addToPool(_ele2)}for(var _i4=0;_i4<nodes5.length;_i4++){var node2=nodes5[_i4],_data4=node2._private.data;number$1(_data4.parent)&&(_data4.parent=""+_data4.parent);var parentId=_data4.parent;if(null!=parentId||node2._private.parent){var parent4=node2._private.parent?cy.collection().merge(node2._private.parent):cy.getElementById(parentId);if(parent4.empty())_data4.parent=void 0;else if(parent4[0].removed())warn("Node added with missing parent, reference to parent removed"),_data4.parent=void 0,node2._private.parent=null;else{for(var selfAsParent=!1,ancestor=parent4;!ancestor.empty();){if(node2.same(ancestor)){selfAsParent=!0,_data4.parent=void 0;break}ancestor=ancestor.parent()}selfAsParent||(parent4[0]._private.children.push(node2),node2._private.parent=parent4[0],cy_p.hasCompoundNodes=!0)}}}if(elements2.length>0){for(var restored=elements2.length===this.length?this:new Collection(cy,elements2),_i5=0;_i5<restored.length;_i5++){var _ele3=restored[_i5];_ele3.isNode()||(_ele3.parallelEdges().clearTraversalCache(),_ele3.source().clearTraversalCache(),_ele3.target().clearTraversalCache())}(cy_p.hasCompoundNodes?cy.collection().merge(restored).merge(restored.connectedNodes()).merge(restored.parent()):restored).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(notifyRenderer),notifyRenderer?restored.emitAndNotify("add"):addToPool2&&restored.emit("add")}return this},elesfn$1.removed=function(){var ele=this[0];return ele&&ele._private.removed},elesfn$1.inside=function(){var ele=this[0];return ele&&!ele._private.removed},elesfn$1.remove=function(){var notifyRenderer=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],removeFromPool2=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],elesToRemove=[],elesToRemoveIds={},cy=this._private.cy;function addConnectedEdges(node2){for(var edges3=node2._private.edges,i3=0;i3<edges3.length;i3++)add3(edges3[i3])}function addChildren2(node2){for(var children2=node2._private.children,i3=0;i3<children2.length;i3++)add3(children2[i3])}function add3(ele2){var alreadyAdded=elesToRemoveIds[ele2.id()];removeFromPool2&&ele2.removed()||alreadyAdded||(elesToRemoveIds[ele2.id()]=!0,ele2.isNode()?(elesToRemove.push(ele2),addConnectedEdges(ele2),addChildren2(ele2)):elesToRemove.unshift(ele2))}__name(addConnectedEdges,"addConnectedEdges"),__name(addChildren2,"addChildren"),__name(add3,"add");for(var i2=0,l4=this.length;i2<l4;i2++){add3(this[i2])}function removeEdgeRef(node2,edge){var connectedEdges=node2._private.edges;removeFromArray(connectedEdges,edge),node2.clearTraversalCache()}function removeParallelRef(pllEdge2){pllEdge2.clearTraversalCache()}__name(removeEdgeRef,"removeEdgeRef"),__name(removeParallelRef,"removeParallelRef");var alteredParents=[];function removeChildRef(parent5,ele2){ele2=ele2[0];var children2=(parent5=parent5[0])._private.children,pid=parent5.id();removeFromArray(children2,ele2),ele2._private.parent=null,alteredParents.ids[pid]||(alteredParents.ids[pid]=!0,alteredParents.push(parent5))}alteredParents.ids={},__name(removeChildRef,"removeChildRef"),this.dirtyCompoundBoundsCache(),removeFromPool2&&cy.removeFromPool(elesToRemove);for(var _i6=0;_i6<elesToRemove.length;_i6++){var _ele4=elesToRemove[_i6];if(_ele4.isEdge()){var src=_ele4.source()[0],tgt=_ele4.target()[0];removeEdgeRef(src,_ele4),removeEdgeRef(tgt,_ele4);for(var pllEdges=_ele4.parallelEdges(),j3=0;j3<pllEdges.length;j3++){var pllEdge=pllEdges[j3];removeParallelRef(pllEdge),pllEdge.isBundledBezier()&&pllEdge.dirtyBoundingBoxCache()}}else{var parent4=_ele4.parent();0!==parent4.length&&removeChildRef(parent4,_ele4)}removeFromPool2&&(_ele4._private.removed=!0)}var elesStillInside=cy._private.elements;cy._private.hasCompoundNodes=!1;for(var _i7=0;_i7<elesStillInside.length;_i7++){if(elesStillInside[_i7].isParent()){cy._private.hasCompoundNodes=!0;break}}var removedElements=new Collection(this.cy(),elesToRemove);removedElements.size()>0&&(notifyRenderer?removedElements.emitAndNotify("remove"):removeFromPool2&&removedElements.emit("remove"));for(var _i8=0;_i8<alteredParents.length;_i8++){var _ele6=alteredParents[_i8];removeFromPool2&&_ele6.removed()||_ele6.updateStyle()}return removedElements},elesfn$1.move=function(struct){var cy=this._private.cy,eles=this,toString6=__name(function(id30){return null==id30?id30:""+id30},"toString");if(void 0!==struct.source||void 0!==struct.target){var srcId=toString6(struct.source),tgtId=toString6(struct.target),srcExists=null!=srcId&&cy.hasElementWithId(srcId),tgtExists=null!=tgtId&&cy.hasElementWithId(tgtId);(srcExists||tgtExists)&&(cy.batch(function(){eles.remove(false,false),eles.emitAndNotify("moveout");for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_data5=ele._private.data;ele.isEdge()&&(srcExists&&(_data5.source=srcId),tgtExists&&(_data5.target=tgtId))}eles.restore(false,false)}),eles.emitAndNotify("move"))}else if(void 0!==struct.parent){var parentId=toString6(struct.parent);if(null===parentId||cy.hasElementWithId(parentId)){var pidToAssign=null===parentId?void 0:parentId;cy.batch(function(){var updated=eles.remove(false,false);updated.emitAndNotify("moveout");for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_data6=ele._private.data;ele.isNode()&&(_data6.parent=pidToAssign)}updated.restore(false,false)}),eles.emitAndNotify("move")}}return this},[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data3,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach(function(props){extend4(elesfn$1,props)}),corefn$9={add:__name(function(opts){var elements2,cy=this;if(elementOrCollection(opts)){var eles=opts;if(eles._private.cy===cy)elements2=eles.restore();else{for(var jsons=[],i2=0;i2<eles.length;i2++){var ele=eles[i2];jsons.push(ele.json())}elements2=new Collection(cy,jsons)}}else if(array2(opts)){elements2=new Collection(cy,opts)}else if(plainObject(opts)&&(array2(opts.nodes)||array2(opts.edges))){for(var elesByGroup=opts,_jsons2=[],grs=["nodes","edges"],_i=0,il=grs.length;_i<il;_i++){var group2=grs[_i],elesArray=elesByGroup[group2];if(array2(elesArray))for(var j3=0,jl=elesArray.length;j3<jl;j3++){var json3=extend4({group:group2},elesArray[j3]);_jsons2.push(json3)}}elements2=new Collection(cy,_jsons2)}else{elements2=new Element(cy,opts).collection()}return elements2},"add"),remove:__name(function(collection4){if(elementOrCollection(collection4));else if(string(collection4)){var selector=collection4;collection4=this.$(selector)}return collection4.remove()},"remove")},__name(generateCubicBezier,"generateCubicBezier"),generateSpringRK4=function(){function springAccelerationForState(state3){return-state3.tension*state3.x-state3.friction*state3.v}function springEvaluateStateWithDerivative(initialState,dt,derivative){var state3={x:initialState.x+derivative.dx*dt,v:initialState.v+derivative.dv*dt,tension:initialState.tension,friction:initialState.friction};return{dx:state3.v,dv:springAccelerationForState(state3)}}function springIntegrateState(state3,dt){var a2={dx:state3.v,dv:springAccelerationForState(state3)},b3=springEvaluateStateWithDerivative(state3,.5*dt,a2),c3=springEvaluateStateWithDerivative(state3,.5*dt,b3),d3=springEvaluateStateWithDerivative(state3,dt,c3),dxdt=1/6*(a2.dx+2*(b3.dx+c3.dx)+d3.dx),dvdt=1/6*(a2.dv+2*(b3.dv+c3.dv)+d3.dv);return state3.x=state3.x+dxdt*dt,state3.v=state3.v+dvdt*dt,state3}return __name(springAccelerationForState,"springAccelerationForState"),__name(springEvaluateStateWithDerivative,"springEvaluateStateWithDerivative"),__name(springIntegrateState,"springIntegrateState"),__name(function springRK4Factory(tension,friction,duration){var have_duration,dt,last_state,initState={x:-1,v:0,tension:null,friction:null},path4=[0],time_lapsed=0;for(tension=parseFloat(tension)||500,friction=parseFloat(friction)||20,duration=duration||null,initState.tension=tension,initState.friction=friction,dt=(have_duration=null!==duration)?(time_lapsed=springRK4Factory(tension,friction))/duration*.016:.016;last_state=springIntegrateState(last_state||initState,dt),path4.push(1+last_state.x),time_lapsed+=16,Math.abs(last_state.x)>1e-4&&Math.abs(last_state.v)>1e-4;);return have_duration?function(percentComplete){return path4[percentComplete*(path4.length-1)|0]}:time_lapsed},"springRK4Factory")}(),cubicBezier=__name(function(t13,p1,t22,p22){var bezier=generateCubicBezier(t13,p1,t22,p22);return function(start3,end2,percent){return start3+(end2-start3)*bezier(percent)}},"cubicBezier"),easings={linear:__name(function(start3,end2,percent){return start3+(end2-start3)*percent},"linear"),ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:__name(function(tension,friction,duration){if(0===duration)return easings.linear;var spring2=generateSpringRK4(tension,friction,duration);return function(start3,end2,percent){return start3+(end2-start3)*spring2(percent)}},"spring"),"cubic-bezier":cubicBezier},__name(getEasedValue,"getEasedValue"),__name(getValue2,"getValue"),__name(ease,"ease"),__name(step$1,"step$1"),__name(valid,"valid"),__name(startAnimation,"startAnimation"),__name(stepAll,"stepAll"),corefn$8={animate:define2.animate(),animation:define2.animation(),animated:define2.animated(),clearQueue:define2.clearQueue(),delay:define2.delay(),delayAnimation:define2.delayAnimation(),stop:define2.stop(),addToAnimationPool:__name(function(eles){this.styleEnabled()&&this._private.aniEles.merge(eles)},"addToAnimationPool"),stopAnimationLoop:__name(function(){this._private.animationsRunning=!1},"stopAnimationLoop"),startAnimationLoop:__name(function(){var cy=this;if(cy._private.animationsRunning=!0,cy.styleEnabled()){__name(headlessStep,"headlessStep");var renderer10=cy.renderer();renderer10&&renderer10.beforeRender?renderer10.beforeRender(__name(function(willDraw,now3){stepAll(now3,cy)},"rendererAnimationStep"),renderer10.beforeRenderPriorities.animations):headlessStep()}function headlessStep(){cy._private.animationsRunning&&requestAnimationFrame2(__name(function(now3){stepAll(now3,cy),headlessStep()},"animationStep"))}},"startAnimationLoop")},emitterOptions={qualifierCompare:__name(function(selector1,selector2){return null==selector1||null==selector2?null==selector1&&null==selector2:selector1.sameText(selector2)},"qualifierCompare"),eventMatches:__name(function(cy,listener,eventObj){var selector=listener.qualifier;return null==selector||cy!==eventObj.target&&element(eventObj.target)&&selector.matches(eventObj.target)},"eventMatches"),addEventFields:__name(function(cy,evt){evt.cy=cy,evt.target=cy},"addEventFields"),callbackContext:__name(function(cy,listener,eventObj){return null!=listener.qualifier?eventObj.target:cy},"callbackContext")},argSelector2=__name(function(arg){return string(arg)?new Selector(arg):arg},"argSelector"),elesfn={createEmitter:__name(function(){var _p=this._private;return _p.emitter||(_p.emitter=new Emitter(emitterOptions,this)),this},"createEmitter"),emitter:__name(function(){return this._private.emitter},"emitter"),on:__name(function(events,selector,callback){return this.emitter().on(events,argSelector2(selector),callback),this},"on"),removeListener:__name(function(events,selector,callback){return this.emitter().removeListener(events,argSelector2(selector),callback),this},"removeListener"),removeAllListeners:__name(function(){return this.emitter().removeAllListeners(),this},"removeAllListeners"),one:__name(function(events,selector,callback){return this.emitter().one(events,argSelector2(selector),callback),this},"one"),once:__name(function(events,selector,callback){return this.emitter().one(events,argSelector2(selector),callback),this},"once"),emit:__name(function(events,extraParams){return this.emitter().emit(events,extraParams),this},"emit"),emitAndNotify:__name(function(event3,eles){return this.emit(event3),this.notify(event3,eles),this},"emitAndNotify")},define2.eventAliasesOn(elesfn),(corefn$7={png:__name(function(options2){return options2=options2||{},this._private.renderer.png(options2)},"png"),jpg:__name(function(options2){var renderer10=this._private.renderer;return(options2=options2||{}).bg=options2.bg||"#fff",renderer10.jpg(options2)},"jpg")}).jpeg=corefn$7.jpg,(corefn$6={layout:__name(function(options2){if(null!=options2)if(null!=options2.name){var eles,name=options2.name,Layout2=this.extension("layout",name);if(null!=Layout2)return eles=string(options2.eles)?this.$(options2.eles):null!=options2.eles?options2.eles:this.$(),new Layout2(extend4({},options2,{cy:this,eles:eles}));error("No such layout `"+name+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else error("A `name` must be specified to make a layout");else error("Layout options must be specified to make a layout")},"layout")}).createLayout=corefn$6.makeLayout=corefn$6.layout,corefn$5={notify:__name(function(eventName,eventEles){var _p=this._private;if(this.batching()){_p.batchNotifications=_p.batchNotifications||{};var eles=_p.batchNotifications[eventName]=_p.batchNotifications[eventName]||this.collection();null!=eventEles&&eles.merge(eventEles)}else if(_p.notificationsEnabled){var renderer10=this.renderer();!this.destroyed()&&renderer10&&renderer10.notify(eventName,eventEles)}},"notify"),notifications:__name(function(bool2){var p3=this._private;return void 0===bool2?p3.notificationsEnabled:(p3.notificationsEnabled=!!bool2,this)},"notifications"),noNotifications:__name(function(callback){this.notifications(!1),callback(),this.notifications(!0)},"noNotifications"),batching:__name(function(){return this._private.batchCount>0},"batching"),startBatch:__name(function(){var _p=this._private;return null==_p.batchCount&&(_p.batchCount=0),0===_p.batchCount&&(_p.batchStyleEles=this.collection(),_p.batchNotifications={}),_p.batchCount++,this},"startBatch"),endBatch:__name(function(){var _p=this._private;if(0===_p.batchCount)return this;if(_p.batchCount--,0===_p.batchCount){_p.batchStyleEles.updateStyle();var renderer10=this.renderer();Object.keys(_p.batchNotifications).forEach(function(eventName){var eles=_p.batchNotifications[eventName];eles.empty()?renderer10.notify(eventName):renderer10.notify(eventName,eles)})}return this},"endBatch"),batch:__name(function(callback){return this.startBatch(),callback(),this.endBatch(),this},"batch"),batchData:__name(function(map5){var cy=this;return this.batch(function(){for(var ids=Object.keys(map5),i2=0;i2<ids.length;i2++){var id30=ids[i2],data5=map5[id30];cy.getElementById(id30).data(data5)}})},"batchData")},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),(corefn$4={renderTo:__name(function(context,zoom2,pan2,pxRatio){return this._private.renderer.renderTo(context,zoom2,pan2,pxRatio),this},"renderTo"),renderer:__name(function(){return this._private.renderer},"renderer"),forceRender:__name(function(){return this.notify("draw"),this},"forceRender"),resize:__name(function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},"resize"),initRenderer:__name(function(options2){var RendererProto=this.extension("renderer",options2.name);if(null!=RendererProto){void 0!==options2.wheelSensitivity&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var rOpts=rendererDefaults(options2);rOpts.cy=this,this._private.renderer=new RendererProto(rOpts),this.notify("init")}else error("Can not initialise: No such renderer `".concat(options2.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},"initRenderer"),destroyRenderer:__name(function(){this.notify("destroy");var domEle=this.container();if(domEle)for(domEle._cyreg=null;domEle.childNodes.length>0;)domEle.removeChild(domEle.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(ele){var _p=ele._private;_p.rscratch={},_p.rstyle={},_p.animation.current=[],_p.animation.queue=[]})},"destroyRenderer"),onRender:__name(function(fn3){return this.on("render",fn3)},"onRender"),offRender:__name(function(fn3){return this.off("render",fn3)},"offRender")}).invalidateDimensions=corefn$4.resize,(corefn$3={collection:__name(function(eles,opts){return string(eles)?this.$(eles):elementOrCollection(eles)?eles.collection():array2(eles)?(opts||(opts={}),new Collection(this,eles,opts.unique,opts.removed)):new Collection(this)},"collection"),nodes:__name(function(selector){var nodes5=this.$(function(ele){return ele.isNode()});return selector?nodes5.filter(selector):nodes5},"nodes"),edges:__name(function(selector){var edges3=this.$(function(ele){return ele.isEdge()});return selector?edges3.filter(selector):edges3},"edges"),$:__name(function(selector){var eles=this._private.elements;return selector?eles.filter(selector):eles.spawnSelf()},"$"),mutableElements:__name(function(){return this._private.elements},"mutableElements")}).elements=corefn$3.filter=corefn$3.$,(styfn$8={}).apply=function(eles){for(var updatedEles=this._private.cy.collection(),ie2=0;ie2<eles.length;ie2++){var ele=eles[ie2],cxtMeta=this.getContextMeta(ele);if(!cxtMeta.empty){var cxtStyle=this.getContextStyle(cxtMeta),app=this.applyContextStyle(cxtMeta,cxtStyle,ele);ele._private.appliedInitStyle?this.updateTransitions(ele,app.diffProps):ele._private.appliedInitStyle=!0,this.updateStyleHints(ele)&&updatedEles.push(ele)}}return updatedEles},styfn$8.getPropertiesDiff=function(oldCxtKey,newCxtKey){var cache3=this._private.propDiffs=this._private.propDiffs||{},dualCxtKey=oldCxtKey+"-"+newCxtKey,cachedVal=cache3[dualCxtKey];if(cachedVal)return cachedVal;for(var diffProps=[],addedProp={},i2=0;i2<this.length;i2++){var cxt=this[i2],oldHasCxt="t"===oldCxtKey[i2],newHasCxt="t"===newCxtKey[i2],cxtHasDiffed=oldHasCxt!==newHasCxt,cxtHasMappedProps=cxt.mappedProperties.length>0;if(cxtHasDiffed||newHasCxt&&cxtHasMappedProps){var props=void 0;cxtHasDiffed&&cxtHasMappedProps||cxtHasDiffed?props=cxt.properties:cxtHasMappedProps&&(props=cxt.mappedProperties);for(var j3=0;j3<props.length;j3++){for(var prop=props[j3],name=prop.name,laterCxtOverrides=!1,k2=i2+1;k2<this.length;k2++){var laterCxt=this[k2];if("t"===newCxtKey[k2]&&(laterCxtOverrides=null!=laterCxt.properties[prop.name]))break}addedProp[name]||laterCxtOverrides||(addedProp[name]=!0,diffProps.push(name))}}}return cache3[dualCxtKey]=diffProps,diffProps},styfn$8.getContextMeta=function(ele){for(var diffProps,cxtKey="",prevKey=ele._private.styleCxtKey||"",i2=0;i2<this.length;i2++){var context=this[i2];cxtKey+=context.selector&&context.selector.matches(ele)?"t":"f"}return diffProps=this.getPropertiesDiff(prevKey,cxtKey),ele._private.styleCxtKey=cxtKey,{key:cxtKey,diffPropNames:diffProps,empty:0===diffProps.length}},styfn$8.getContextStyle=function(cxtMeta){var cxtKey=cxtMeta.key,cxtStyles=this._private.contextStyles=this._private.contextStyles||{};if(cxtStyles[cxtKey])return cxtStyles[cxtKey];for(var style3={_private:{key:cxtKey}},i2=0;i2<this.length;i2++){var cxt=this[i2];if("t"===cxtKey[i2])for(var j3=0;j3<cxt.properties.length;j3++){var prop=cxt.properties[j3];style3[prop.name]=prop}}return cxtStyles[cxtKey]=style3,style3},styfn$8.applyContextStyle=function(cxtMeta,cxtStyle,ele){for(var diffProps=cxtMeta.diffPropNames,retDiffProps={},types=this.types,i2=0;i2<diffProps.length;i2++){var diffPropName=diffProps[i2],cxtProp=cxtStyle[diffPropName],eleProp=ele.pstyle(diffPropName);if(!cxtProp){if(!eleProp)continue;cxtProp=eleProp.bypass?{name:diffPropName,deleteBypassed:!0}:{name:diffPropName,delete:!0}}if(eleProp!==cxtProp){if(cxtProp.mapped===types.fn&&null!=eleProp&&null!=eleProp.mapping&&eleProp.mapping.value===cxtProp.value){var mapping=eleProp.mapping;if((mapping.fnValue=cxtProp.value(ele))===mapping.prevFnValue)continue}var retDiffProp=retDiffProps[diffPropName]={prev:eleProp};this.applyParsedProperty(ele,cxtProp),retDiffProp.next=ele.pstyle(diffPropName),retDiffProp.next&&retDiffProp.next.bypass&&(retDiffProp.next=retDiffProp.next.bypassed)}}return{diffProps:retDiffProps}},styfn$8.updateStyleHints=function(ele){var _p=ele._private,self2=this,propNames=self2.propertyGroupNames,propGrKeys=self2.propertyGroupKeys,propHash=__name(function(ele2,propNames2,seedKey){return self2.getPropertiesHash(ele2,propNames2,seedKey)},"propHash"),oldStyleKey=_p.styleKey;if(ele.removed())return!1;var isNode2="nodes"===_p.group,overriddenStyles=ele._private.style;propNames=Object.keys(overriddenStyles);for(var i2=0;i2<propGrKeys.length;i2++){var grKey=propGrKeys[i2];_p.styleKeys[grKey]=[9261,5381]}for(var updateGrKey1=__name(function(val,grKey2){return _p.styleKeys[grKey2][0]=hashInt(val,_p.styleKeys[grKey2][0])},"updateGrKey1"),updateGrKey2=__name(function(val,grKey2){return _p.styleKeys[grKey2][1]=hashIntAlt(val,_p.styleKeys[grKey2][1])},"updateGrKey2"),updateGrKey=__name(function(val,grKey2){updateGrKey1(val,grKey2),updateGrKey2(val,grKey2)},"updateGrKey"),updateGrKeyWStr=__name(function(strVal,grKey2){for(var j3=0;j3<strVal.length;j3++){var ch=strVal.charCodeAt(j3);updateGrKey1(ch,grKey2),updateGrKey2(ch,grKey2)}},"updateGrKeyWStr"),cleanNum=__name(function(val){return-128<val&&val<128&&Math.floor(val)!==val?2e9-(1024*val|0):val},"cleanNum"),_i=0;_i<propNames.length;_i++){var name=propNames[_i],parsedProp=overriddenStyles[name];if(null!=parsedProp){var propInfo=this.properties[name],type3=propInfo.type,_grKey=propInfo.groupKey,normalizedNumberVal=void 0;null!=propInfo.hashOverride?normalizedNumberVal=propInfo.hashOverride(ele,parsedProp):null!=parsedProp.pfValue&&(normalizedNumberVal=parsedProp.pfValue);var numberVal=null==propInfo.enums?parsedProp.value:null,haveNormNum=null!=normalizedNumberVal,haveNum=haveNormNum||null!=numberVal,units=parsedProp.units;if(type3.number&&haveNum&&!type3.multiple)updateGrKey(cleanNum(haveNormNum?normalizedNumberVal:numberVal),_grKey),haveNormNum||null==units||updateGrKeyWStr(units,_grKey);else updateGrKeyWStr(parsedProp.strValue,_grKey)}}for(var hash=[9261,5381],_i2=0;_i2<propGrKeys.length;_i2++){var _grKey2=propGrKeys[_i2],grHash=_p.styleKeys[_grKey2];hash[0]=hashInt(grHash[0],hash[0]),hash[1]=hashIntAlt(grHash[1],hash[1])}_p.styleKey=combineHashes(hash[0],hash[1]);var sk=_p.styleKeys;_p.labelDimsKey=combineHashesArray(sk.labelDimensions);var labelKeys=propHash(ele,["label"],sk.labelDimensions);if(_p.labelKey=combineHashesArray(labelKeys),_p.labelStyleKey=combineHashesArray(hashArrays(sk.commonLabel,labelKeys)),!isNode2){var sourceLabelKeys=propHash(ele,["source-label"],sk.labelDimensions);_p.sourceLabelKey=combineHashesArray(sourceLabelKeys),_p.sourceLabelStyleKey=combineHashesArray(hashArrays(sk.commonLabel,sourceLabelKeys));var targetLabelKeys=propHash(ele,["target-label"],sk.labelDimensions);_p.targetLabelKey=combineHashesArray(targetLabelKeys),_p.targetLabelStyleKey=combineHashesArray(hashArrays(sk.commonLabel,targetLabelKeys))}if(isNode2){var _p$styleKeys=_p.styleKeys,nodeBody=_p$styleKeys.nodeBody,nodeBorder=_p$styleKeys.nodeBorder,nodeOutline=_p$styleKeys.nodeOutline,backgroundImage=_p$styleKeys.backgroundImage,compound=_p$styleKeys.compound,pie2=_p$styleKeys.pie,stripe=_p$styleKeys.stripe,nodeKeys=[nodeBody,nodeBorder,nodeOutline,backgroundImage,compound,pie2,stripe].filter(function(k2){return null!=k2}).reduce(hashArrays,[9261,5381]);_p.nodeKey=combineHashesArray(nodeKeys),_p.hasPie=null!=pie2&&9261!==pie2[0]&&5381!==pie2[1],_p.hasStripe=null!=stripe&&9261!==stripe[0]&&5381!==stripe[1]}return oldStyleKey!==_p.styleKey},styfn$8.clearStyleHints=function(ele){var _p=ele._private;_p.styleCxtKey="",_p.styleKeys={},_p.styleKey=null,_p.labelKey=null,_p.labelStyleKey=null,_p.sourceLabelKey=null,_p.sourceLabelStyleKey=null,_p.targetLabelKey=null,_p.targetLabelStyleKey=null,_p.nodeKey=null,_p.hasPie=null,_p.hasStripe=null},styfn$8.applyParsedProperty=function(ele,parsedProp){var flatProp,self2=this,prop=parsedProp,style3=ele._private.style,types=self2.types,type3=self2.properties[prop.name].type,propIsBypass=prop.bypass,origProp=style3[prop.name],origPropIsBypass=origProp&&origProp.bypass,_p=ele._private,getVal=__name(function(p3){return null==p3?null:null!=p3.pfValue?p3.pfValue:p3.value},"getVal"),checkTriggers=__name(function(){var fromVal=getVal(origProp),toVal=getVal(prop);self2.checkTriggers(ele,prop.name,fromVal,toVal)},"checkTriggers");if("curve-style"===parsedProp.name&&ele.isEdge()&&("bezier"!==parsedProp.value&&ele.isLoop()||"haystack"===parsedProp.value&&(ele.source().isParent()||ele.target().isParent()))&&(prop=parsedProp=this.parse(parsedProp.name,"bezier",propIsBypass)),prop.delete)return style3[prop.name]=void 0,checkTriggers(),!0;if(prop.deleteBypassed)return origProp?!!origProp.bypass&&(origProp.bypassed=void 0,checkTriggers(),!0):(checkTriggers(),!0);if(prop.deleteBypass)return origProp?!!origProp.bypass&&(style3[prop.name]=origProp.bypassed,checkTriggers(),!0):(checkTriggers(),!0);var printMappingErr=__name(function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+ele.id()+"` has no mapping for property `"+prop.name+"` with data field `"+prop.field+"`); try a `["+prop.field+"]` selector to limit scope to elements with `"+prop.field+"` defined")},"printMappingErr");switch(prop.mapped){case types.mapData:for(var percent,fields=prop.field.split("."),fieldVal=_p.data,i2=0;i2<fields.length&&fieldVal;i2++){fieldVal=fieldVal[fields[i2]]}if(null==fieldVal)return printMappingErr(),!1;if(!number$1(fieldVal))return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+prop.field+": "+fieldVal+"` for `"+ele.id()+"` is non-numeric)"),!1;var fieldWidth=prop.fieldMax-prop.fieldMin;if((percent=0===fieldWidth?0:(fieldVal-prop.fieldMin)/fieldWidth)<0?percent=0:percent>1&&(percent=1),type3.color){var r1=prop.valueMin[0],r2=prop.valueMax[0],g1=prop.valueMin[1],g2=prop.valueMax[1],b1=prop.valueMin[2],b22=prop.valueMax[2],a1=null==prop.valueMin[3]?1:prop.valueMin[3],a2=null==prop.valueMax[3]?1:prop.valueMax[3],clr=[Math.round(r1+(r2-r1)*percent),Math.round(g1+(g2-g1)*percent),Math.round(b1+(b22-b1)*percent),Math.round(a1+(a2-a1)*percent)];flatProp={bypass:prop.bypass,name:prop.name,value:clr,strValue:"rgb("+clr[0]+", "+clr[1]+", "+clr[2]+")"}}else{if(!type3.number)return!1;var calcValue=prop.valueMin+(prop.valueMax-prop.valueMin)*percent;flatProp=this.parse(prop.name,calcValue,prop.bypass,"mapping")}if(!flatProp)return printMappingErr(),!1;flatProp.mapping=prop,prop=flatProp;break;case types.data:for(var _fields=prop.field.split("."),_fieldVal=_p.data,_i3=0;_i3<_fields.length&&_fieldVal;_i3++){_fieldVal=_fieldVal[_fields[_i3]]}if(null!=_fieldVal&&(flatProp=this.parse(prop.name,_fieldVal,prop.bypass,"mapping")),!flatProp)return printMappingErr(),!1;flatProp.mapping=prop,prop=flatProp;break;case types.fn:var fn3=prop.value,fnRetVal=null!=prop.fnValue?prop.fnValue:fn3(ele);if(prop.prevFnValue=fnRetVal,null==fnRetVal)return warn("Custom function mappers may not return null (i.e. `"+prop.name+"` for ele `"+ele.id()+"` is null)"),!1;if(!(flatProp=this.parse(prop.name,fnRetVal,prop.bypass,"mapping")))return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+prop.name+"` for ele `"+ele.id()+"` is invalid)"),!1;flatProp.mapping=copy3(prop),prop=flatProp;break;case void 0:break;default:return!1}return propIsBypass?(prop.bypassed=origPropIsBypass?origProp.bypassed:origProp,style3[prop.name]=prop):origPropIsBypass?origProp.bypassed=prop:style3[prop.name]=prop,checkTriggers(),!0},styfn$8.cleanElements=function(eles,keepBypasses){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];if(this.clearStyleHints(ele),ele.dirtyCompoundBoundsCache(),ele.dirtyBoundingBoxCache(),keepBypasses)for(var style3=ele._private.style,propNames=Object.keys(style3),j3=0;j3<propNames.length;j3++){var propName=propNames[j3],eleProp=style3[propName];null!=eleProp&&(eleProp.bypass?eleProp.bypassed=null:style3[propName]=null)}else ele._private.style={}}},styfn$8.update=function(){this._private.cy.mutableElements().updateStyle()},styfn$8.updateTransitions=function(ele,diffProps){var self2=this,_p=ele._private,props=ele.pstyle("transition-property").value,duration=ele.pstyle("transition-duration").pfValue,delay2=ele.pstyle("transition-delay").pfValue;if(props.length>0&&duration>0){for(var style3={},anyPrev=!1,i2=0;i2<props.length;i2++){var prop=props[i2],styProp=ele.pstyle(prop),diffProp=diffProps[prop];if(diffProp){var fromProp=diffProp.prev,toProp=null!=diffProp.next?diffProp.next:styProp,diff2=!1,initVal=void 0;fromProp&&(number$1(fromProp.pfValue)&&number$1(toProp.pfValue)?(diff2=toProp.pfValue-fromProp.pfValue,initVal=fromProp.pfValue+1e-6*diff2):number$1(fromProp.value)&&number$1(toProp.value)?(diff2=toProp.value-fromProp.value,initVal=fromProp.value+1e-6*diff2):array2(fromProp.value)&&array2(toProp.value)&&(diff2=fromProp.value[0]!==toProp.value[0]||fromProp.value[1]!==toProp.value[1]||fromProp.value[2]!==toProp.value[2],initVal=fromProp.strValue),diff2&&(style3[prop]=toProp.strValue,this.applyBypass(ele,prop,initVal),anyPrev=!0))}}if(!anyPrev)return;_p.transitioning=!0,new Promise$1(function(resolve2){delay2>0?ele.delayAnimation(delay2).play().promise().then(resolve2):resolve2()}).then(function(){return ele.animation({style:style3,duration:duration,easing:ele.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){self2.removeBypasses(ele,props),ele.emitAndNotify("style"),_p.transitioning=!1})}else _p.transitioning&&(this.removeBypasses(ele,props),ele.emitAndNotify("style"),_p.transitioning=!1)},styfn$8.checkTrigger=function(ele,name,fromValue,toValue,getTrigger,onTrigger){var prop=this.properties[name],triggerCheck=getTrigger(prop);ele.removed()||null!=triggerCheck&&triggerCheck(fromValue,toValue,ele)&&onTrigger(prop)},styfn$8.checkZOrderTrigger=function(ele,name,fromValue,toValue){var _this=this;this.checkTrigger(ele,name,fromValue,toValue,function(prop){return prop.triggersZOrder},function(){_this._private.cy.notify("zorder",ele)})},styfn$8.checkBoundsTrigger=function(ele,name,fromValue,toValue){this.checkTrigger(ele,name,fromValue,toValue,function(prop){return prop.triggersBounds},function(prop){ele.dirtyCompoundBoundsCache(),ele.dirtyBoundingBoxCache()})},styfn$8.checkConnectedEdgesBoundsTrigger=function(ele,name,fromValue,toValue){this.checkTrigger(ele,name,fromValue,toValue,function(prop){return prop.triggersBoundsOfConnectedEdges},function(prop){ele.connectedEdges().forEach(function(edge){edge.dirtyBoundingBoxCache()})})},styfn$8.checkParallelEdgesBoundsTrigger=function(ele,name,fromValue,toValue){this.checkTrigger(ele,name,fromValue,toValue,function(prop){return prop.triggersBoundsOfParallelEdges},function(prop){ele.parallelEdges().forEach(function(pllEdge){pllEdge.dirtyBoundingBoxCache()})})},styfn$8.checkTriggers=function(ele,name,fromValue,toValue){ele.dirtyStyleCache(),this.checkZOrderTrigger(ele,name,fromValue,toValue),this.checkBoundsTrigger(ele,name,fromValue,toValue),this.checkConnectedEdgesBoundsTrigger(ele,name,fromValue,toValue),this.checkParallelEdgesBoundsTrigger(ele,name,fromValue,toValue)},(styfn$7={}).applyBypass=function(eles,name,value2,updateTransitions){var props=[];if("*"===name||"**"===name){if(void 0!==value2)for(var i2=0;i2<this.properties.length;i2++){var _name=this.properties[i2].name,parsedProp=this.parse(_name,value2,!0);parsedProp&&props.push(parsedProp)}}else if(string(name)){var _parsedProp=this.parse(name,value2,!0);_parsedProp&&props.push(_parsedProp)}else{if(!plainObject(name))return!1;var specifiedProps=name;updateTransitions=value2;for(var names=Object.keys(specifiedProps),_i=0;_i<names.length;_i++){var _name2=names[_i],_value=specifiedProps[_name2];if(void 0===_value&&(_value=specifiedProps[dash2camel(_name2)]),void 0!==_value){var _parsedProp2=this.parse(_name2,_value,!0);_parsedProp2&&props.push(_parsedProp2)}}}if(0===props.length)return!1;for(var ret=!1,_i2=0;_i2<eles.length;_i2++){for(var ele=eles[_i2],diffProps={},diffProp=void 0,j3=0;j3<props.length;j3++){var _prop=props[j3];if(updateTransitions){var prevProp=ele.pstyle(_prop.name);diffProp=diffProps[_prop.name]={prev:prevProp}}ret=this.applyParsedProperty(ele,copy3(_prop))||ret,updateTransitions&&(diffProp.next=ele.pstyle(_prop.name))}ret&&this.updateStyleHints(ele),updateTransitions&&this.updateTransitions(ele,diffProps,true)}return ret},styfn$7.overrideBypass=function(eles,name,value2){name=camel2dash(name);for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],prop=ele._private.style[name],type3=this.properties[name].type,isColor=type3.color,isMulti=type3.mutiple,oldValue=prop?null!=prop.pfValue?prop.pfValue:prop.value:null;prop&&prop.bypass?(prop.value=value2,null!=prop.pfValue&&(prop.pfValue=value2),prop.strValue=isColor?"rgb("+value2.join(",")+")":isMulti?value2.join(" "):""+value2,this.updateStyleHints(ele)):this.applyBypass(ele,name,value2),this.checkTriggers(ele,name,oldValue,value2)}},styfn$7.removeAllBypasses=function(eles,updateTransitions){return this.removeBypasses(eles,this.propertyNames,updateTransitions)},styfn$7.removeBypasses=function(eles,props,updateTransitions){for(var j3=0;j3<eles.length;j3++){for(var ele=eles[j3],diffProps={},i2=0;i2<props.length;i2++){var name=props[i2],prop=this.properties[name],prevProp=ele.pstyle(prop.name);if(prevProp&&prevProp.bypass){var parsedProp=this.parse(name,"",!0),diffProp=diffProps[prop.name]={prev:prevProp};this.applyParsedProperty(ele,parsedProp),diffProp.next=ele.pstyle(prop.name)}}this.updateStyleHints(ele),updateTransitions&&this.updateTransitions(ele,diffProps,true)}},(styfn$6={}).getEmSizeInPixels=function(){var px=this.containerCss("font-size");return null!=px?parseFloat(px):1},styfn$6.containerCss=function(propName){var cy=this._private.cy,domElement3=cy.container(),containerWindow=cy.window();if(containerWindow&&domElement3&&containerWindow.getComputedStyle)return containerWindow.getComputedStyle(domElement3).getPropertyValue(propName)},(styfn$5={}).getRenderedStyle=function(ele,prop){return prop?this.getStylePropertyValue(ele,prop,!0):this.getRawStyle(ele,!0)},styfn$5.getRawStyle=function(ele,isRenderedVal){if(ele=ele[0]){for(var rstyle={},i2=0;i2<this.properties.length;i2++){var prop=this.properties[i2],val=this.getStylePropertyValue(ele,prop.name,isRenderedVal);null!=val&&(rstyle[prop.name]=val,rstyle[dash2camel(prop.name)]=val)}return rstyle}},styfn$5.getIndexedStyle=function(ele,property2,subproperty,index){var pstyle=ele.pstyle(property2)[subproperty][index];return null!=pstyle?pstyle:ele.cy().style().getDefaultProperty(property2)[subproperty][0]},styfn$5.getStylePropertyValue=function(ele,propName,isRenderedVal){if(ele=ele[0]){var prop=this.properties[propName];prop.alias&&(prop=prop.pointsTo);var type3=prop.type,styleProp=ele.pstyle(prop.name);if(styleProp){var value2=styleProp.value,units=styleProp.units,strValue=styleProp.strValue;if(isRenderedVal&&type3.number&&null!=value2&&number$1(value2)){var zoom2=ele.cy().zoom(),getRenderedValue=__name(function(val){return val*zoom2},"getRenderedValue"),getValueStringWithUnits=__name(function(val,units2){return getRenderedValue(val)+units2},"getValueStringWithUnits"),isArrayValue=array2(value2);return(isArrayValue?units.every(function(u2){return null!=u2}):null!=units)?isArrayValue?value2.map(function(v3,i2){return getValueStringWithUnits(v3,units[i2])}).join(" "):getValueStringWithUnits(value2,units):isArrayValue?value2.map(function(v3){return string(v3)?v3:""+getRenderedValue(v3)}).join(" "):""+getRenderedValue(value2)}if(null!=strValue)return strValue}return null}},styfn$5.getAnimationStartStyle=function(ele,aniProps){for(var rstyle={},i2=0;i2<aniProps.length;i2++){var name=aniProps[i2].name,styleProp=ele.pstyle(name);void 0!==styleProp&&(styleProp=plainObject(styleProp)?this.parse(name,styleProp.strValue):this.parse(name,styleProp)),styleProp&&(rstyle[name]=styleProp)}return rstyle},styfn$5.getPropsList=function(propsObj){var rstyle=[],style3=propsObj,props=this.properties;if(style3)for(var names=Object.keys(style3),i2=0;i2<names.length;i2++){var name=names[i2],val=style3[name],prop=props[name]||props[camel2dash(name)],styleProp=this.parse(prop.name,val);styleProp&&rstyle.push(styleProp)}return rstyle},styfn$5.getNonDefaultPropertiesHash=function(ele,propNames,seed){var name,val,strVal,chVal,i2,j3,hash=seed.slice();for(i2=0;i2<propNames.length;i2++)if(name=propNames[i2],null!=(val=ele.pstyle(name,!1)))if(null!=val.pfValue)hash[0]=hashInt(chVal,hash[0]),hash[1]=hashIntAlt(chVal,hash[1]);else for(strVal=val.strValue,j3=0;j3<strVal.length;j3++)chVal=strVal.charCodeAt(j3),hash[0]=hashInt(chVal,hash[0]),hash[1]=hashIntAlt(chVal,hash[1]);return hash},styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash,(styfn$4={}).appendFromJson=function(json3){for(var i2=0;i2<json3.length;i2++){var context=json3[i2],selector=context.selector,props=context.style||context.css,names=Object.keys(props);this.selector(selector);for(var j3=0;j3<names.length;j3++){var name=names[j3],value2=props[name];this.css(name,value2)}}return this},styfn$4.fromJson=function(json3){return this.resetToDefault(),this.appendFromJson(json3),this},styfn$4.json=function(){for(var json3=[],i2=this.defaultLength;i2<this.length;i2++){for(var cxt=this[i2],selector=cxt.selector,props=cxt.properties,css={},j3=0;j3<props.length;j3++){var prop=props[j3];css[prop.name]=prop.strValue}json3.push({selector:selector?selector.toString():"core",style:css})}return json3},(styfn$3={}).appendFromString=function(string3){var selAndBlockStr,blockRem,propAndValStr,remaining=""+string3;function removeSelAndBlockFromRemaining(){remaining=remaining.length>selAndBlockStr.length?remaining.substr(selAndBlockStr.length):""}function removePropAndValFromRem(){blockRem=blockRem.length>propAndValStr.length?blockRem.substr(propAndValStr.length):""}for(remaining=remaining.replace(/[/][*](\s|.)+?[*][/]/g,""),__name(removeSelAndBlockFromRemaining,"removeSelAndBlockFromRemaining"),__name(removePropAndValFromRem,"removePropAndValFromRem");;){if(remaining.match(/^\s*$/))break;var selAndBlock=remaining.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!selAndBlock){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+remaining);break}selAndBlockStr=selAndBlock[0];var selectorStr=selAndBlock[1];if("core"!==selectorStr)if(new Selector(selectorStr).invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+selectorStr),removeSelAndBlockFromRemaining();continue}var blockStr=selAndBlock[2],invalidBlock=!1;blockRem=blockStr;for(var props=[];;){if(blockRem.match(/^\s*$/))break;var propAndVal=blockRem.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!propAndVal){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+blockStr),invalidBlock=!0;break}propAndValStr=propAndVal[0];var propStr=propAndVal[1],valStr=propAndVal[2];if(this.properties[propStr])this.parse(propStr,valStr)?(props.push({name:propStr,val:valStr}),removePropAndValFromRem()):(warn("Skipping property: Invalid property definition in: "+propAndValStr),removePropAndValFromRem());else warn("Skipping property: Invalid property name in: "+propAndValStr),removePropAndValFromRem()}if(invalidBlock){removeSelAndBlockFromRemaining();break}this.selector(selectorStr);for(var i2=0;i2<props.length;i2++){var _prop=props[i2];this.css(_prop.name,_prop.val)}removeSelAndBlockFromRemaining()}return this},styfn$3.fromString=function(string3){return this.resetToDefault(),this.appendFromString(string3),this},styfn$2={},function(){var number$12=number6,rgba4=rgbaNoBackRefs,hsla3=hslaNoBackRefs,data5=__name(function(prefix){return"^"+prefix+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},"data"),mapData=__name(function(prefix){var mapArg=number$12+"|\\w+|"+rgba4+"|"+hsla3+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+prefix+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+number$12+")\\s*\\,\\s*("+number$12+")\\s*,\\s*("+mapArg+")\\s*\\,\\s*("+mapArg+")\\)$"},"mapData"),urlRegexes=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:data5("data")},layoutData:{mapping:!0,regex:data5("layoutData")},scratch:{mapping:!0,regex:data5("scratch")},mapData:{mapping:!0,regex:mapData("mapData")},mapLayoutData:{mapping:!0,regex:mapData("mapLayoutData")},mapScratch:{mapping:!0,regex:mapData("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:urlRegexes,singleRegexMatchValue:!0},urls:{regexes:urlRegexes,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:__name(function(valArr,unitsArr){switch(valArr.length){case 2:return"deg"!==unitsArr[0]&&"rad"!==unitsArr[0]&&"deg"!==unitsArr[1]&&"rad"!==unitsArr[1];case 1:return string(valArr[0])||"deg"===unitsArr[0]||"rad"===unitsArr[0];default:return!1}},"validate")},easing:{regexes:["^(spring)\\s*\\(\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:__name(function(valArr){var length2=valArr.length;return 1===length2||2===length2||4===length2},"validate")}};var diff2={zeroNonZero:__name(function(val1,val2){return(null==val1||null==val2)&&val1!==val2||(0==val1&&0!=val2||0!=val1&&0==val2)},"zeroNonZero"),any:__name(function(val1,val2){return val1!=val2},"any"),emptyNonEmpty:__name(function(str1,str2){var empty1=emptyString(str1),empty22=emptyString(str2);return empty1&&!empty22||!empty1&&empty22},"emptyNonEmpty")},t4=styfn$2.types,mainLabel=[{name:"label",type:t4.text,triggersBounds:diff2.any,triggersZOrder:diff2.emptyNonEmpty},{name:"text-rotation",type:t4.textRotation,triggersBounds:diff2.any},{name:"text-margin-x",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"text-margin-y",type:t4.bidirectionalSize,triggersBounds:diff2.any}],sourceLabel=[{name:"source-label",type:t4.text,triggersBounds:diff2.any},{name:"source-text-rotation",type:t4.textRotation,triggersBounds:diff2.any},{name:"source-text-margin-x",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"source-text-margin-y",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"source-text-offset",type:t4.size,triggersBounds:diff2.any}],targetLabel=[{name:"target-label",type:t4.text,triggersBounds:diff2.any},{name:"target-text-rotation",type:t4.textRotation,triggersBounds:diff2.any},{name:"target-text-margin-x",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"target-text-margin-y",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"target-text-offset",type:t4.size,triggersBounds:diff2.any}],labelDimensions=[{name:"font-family",type:t4.fontFamily,triggersBounds:diff2.any},{name:"font-style",type:t4.fontStyle,triggersBounds:diff2.any},{name:"font-weight",type:t4.fontWeight,triggersBounds:diff2.any},{name:"font-size",type:t4.size,triggersBounds:diff2.any},{name:"text-transform",type:t4.textTransform,triggersBounds:diff2.any},{name:"text-wrap",type:t4.textWrap,triggersBounds:diff2.any},{name:"text-overflow-wrap",type:t4.textOverflowWrap,triggersBounds:diff2.any},{name:"text-max-width",type:t4.size,triggersBounds:diff2.any},{name:"text-outline-width",type:t4.size,triggersBounds:diff2.any},{name:"line-height",type:t4.positiveNumber,triggersBounds:diff2.any}],commonLabel=[{name:"text-valign",type:t4.valign,triggersBounds:diff2.any},{name:"text-halign",type:t4.halign,triggersBounds:diff2.any},{name:"color",type:t4.color},{name:"text-outline-color",type:t4.color},{name:"text-outline-opacity",type:t4.zeroOneNumber},{name:"text-background-color",type:t4.color},{name:"text-background-opacity",type:t4.zeroOneNumber},{name:"text-background-padding",type:t4.size,triggersBounds:diff2.any},{name:"text-border-opacity",type:t4.zeroOneNumber},{name:"text-border-color",type:t4.color},{name:"text-border-width",type:t4.size,triggersBounds:diff2.any},{name:"text-border-style",type:t4.borderStyle,triggersBounds:diff2.any},{name:"text-background-shape",type:t4.textBackgroundShape,triggersBounds:diff2.any},{name:"text-justification",type:t4.justification},{name:"box-select-labels",type:t4.bool,triggersBounds:diff2.any}],behavior=[{name:"events",type:t4.bool,triggersZOrder:diff2.any},{name:"text-events",type:t4.bool,triggersZOrder:diff2.any},{name:"box-selection",type:t4.boxSelection,triggersZOrder:diff2.any}],visibility=[{name:"display",type:t4.display,triggersZOrder:diff2.any,triggersBounds:diff2.any,triggersBoundsOfConnectedEdges:diff2.any,triggersBoundsOfParallelEdges:__name(function(fromValue,toValue,ele){return fromValue!==toValue&&"bezier"===ele.pstyle("curve-style").value},"triggersBoundsOfParallelEdges")},{name:"visibility",type:t4.visibility,triggersZOrder:diff2.any},{name:"opacity",type:t4.zeroOneNumber,triggersZOrder:diff2.zeroNonZero},{name:"text-opacity",type:t4.zeroOneNumber},{name:"min-zoomed-font-size",type:t4.size},{name:"z-compound-depth",type:t4.zCompoundDepth,triggersZOrder:diff2.any},{name:"z-index-compare",type:t4.zIndexCompare,triggersZOrder:diff2.any},{name:"z-index",type:t4.number,triggersZOrder:diff2.any}],overlay=[{name:"overlay-padding",type:t4.size,triggersBounds:diff2.any},{name:"overlay-color",type:t4.color},{name:"overlay-opacity",type:t4.zeroOneNumber,triggersBounds:diff2.zeroNonZero},{name:"overlay-shape",type:t4.overlayShape,triggersBounds:diff2.any},{name:"overlay-corner-radius",type:t4.cornerRadius}],underlay=[{name:"underlay-padding",type:t4.size,triggersBounds:diff2.any},{name:"underlay-color",type:t4.color},{name:"underlay-opacity",type:t4.zeroOneNumber,triggersBounds:diff2.zeroNonZero},{name:"underlay-shape",type:t4.overlayShape,triggersBounds:diff2.any},{name:"underlay-corner-radius",type:t4.cornerRadius}],transition2=[{name:"transition-property",type:t4.propList},{name:"transition-duration",type:t4.time},{name:"transition-delay",type:t4.time},{name:"transition-timing-function",type:t4.easing}],nodeSizeHashOverride=__name(function(ele,parsedProp){return"label"===parsedProp.value?-ele.poolIndex():parsedProp.pfValue},"nodeSizeHashOverride"),nodeBody=[{name:"height",type:t4.nodeSize,triggersBounds:diff2.any,hashOverride:nodeSizeHashOverride},{name:"width",type:t4.nodeSize,triggersBounds:diff2.any,hashOverride:nodeSizeHashOverride},{name:"shape",type:t4.nodeShape,triggersBounds:diff2.any},{name:"shape-polygon-points",type:t4.polygonPointList,triggersBounds:diff2.any},{name:"corner-radius",type:t4.cornerRadius},{name:"background-color",type:t4.color},{name:"background-fill",type:t4.fill},{name:"background-opacity",type:t4.zeroOneNumber},{name:"background-blacken",type:t4.nOneOneNumber},{name:"background-gradient-stop-colors",type:t4.colors},{name:"background-gradient-stop-positions",type:t4.percentages},{name:"background-gradient-direction",type:t4.gradientDirection},{name:"padding",type:t4.sizeMaybePercent,triggersBounds:diff2.any},{name:"padding-relative-to",type:t4.paddingRelativeTo,triggersBounds:diff2.any},{name:"bounds-expansion",type:t4.boundsExpansion,triggersBounds:diff2.any}],nodeBorder=[{name:"border-color",type:t4.color},{name:"border-opacity",type:t4.zeroOneNumber},{name:"border-width",type:t4.size,triggersBounds:diff2.any},{name:"border-style",type:t4.borderStyle},{name:"border-cap",type:t4.lineCap},{name:"border-join",type:t4.lineJoin},{name:"border-dash-pattern",type:t4.numbers},{name:"border-dash-offset",type:t4.number},{name:"border-position",type:t4.linePosition}],nodeOutline=[{name:"outline-color",type:t4.color},{name:"outline-opacity",type:t4.zeroOneNumber},{name:"outline-width",type:t4.size,triggersBounds:diff2.any},{name:"outline-style",type:t4.borderStyle},{name:"outline-offset",type:t4.size,triggersBounds:diff2.any}],backgroundImage=[{name:"background-image",type:t4.urls},{name:"background-image-crossorigin",type:t4.bgCrossOrigin},{name:"background-image-opacity",type:t4.zeroOneNumbers},{name:"background-image-containment",type:t4.bgContainment},{name:"background-image-smoothing",type:t4.bools},{name:"background-position-x",type:t4.bgPos},{name:"background-position-y",type:t4.bgPos},{name:"background-width-relative-to",type:t4.bgRelativeTo},{name:"background-height-relative-to",type:t4.bgRelativeTo},{name:"background-repeat",type:t4.bgRepeat},{name:"background-fit",type:t4.bgFit},{name:"background-clip",type:t4.bgClip},{name:"background-width",type:t4.bgWH},{name:"background-height",type:t4.bgWH},{name:"background-offset-x",type:t4.bgPos},{name:"background-offset-y",type:t4.bgPos}],compound=[{name:"position",type:t4.position,triggersBounds:diff2.any},{name:"compound-sizing-wrt-labels",type:t4.compoundIncludeLabels,triggersBounds:diff2.any},{name:"min-width",type:t4.size,triggersBounds:diff2.any},{name:"min-width-bias-left",type:t4.sizeMaybePercent,triggersBounds:diff2.any},{name:"min-width-bias-right",type:t4.sizeMaybePercent,triggersBounds:diff2.any},{name:"min-height",type:t4.size,triggersBounds:diff2.any},{name:"min-height-bias-top",type:t4.sizeMaybePercent,triggersBounds:diff2.any},{name:"min-height-bias-bottom",type:t4.sizeMaybePercent,triggersBounds:diff2.any}],edgeLine=[{name:"line-style",type:t4.lineStyle},{name:"line-color",type:t4.color},{name:"line-fill",type:t4.fill},{name:"line-cap",type:t4.lineCap},{name:"line-opacity",type:t4.zeroOneNumber},{name:"line-dash-pattern",type:t4.numbers},{name:"line-dash-offset",type:t4.number},{name:"line-outline-width",type:t4.size},{name:"line-outline-color",type:t4.color},{name:"line-gradient-stop-colors",type:t4.colors},{name:"line-gradient-stop-positions",type:t4.percentages},{name:"curve-style",type:t4.curveStyle,triggersBounds:diff2.any,triggersBoundsOfParallelEdges:__name(function(fromValue,toValue){return fromValue!==toValue&&("bezier"===fromValue||"bezier"===toValue)},"triggersBoundsOfParallelEdges")},{name:"haystack-radius",type:t4.zeroOneNumber,triggersBounds:diff2.any},{name:"source-endpoint",type:t4.edgeEndpoint,triggersBounds:diff2.any},{name:"target-endpoint",type:t4.edgeEndpoint,triggersBounds:diff2.any},{name:"control-point-step-size",type:t4.size,triggersBounds:diff2.any},{name:"control-point-distances",type:t4.bidirectionalSizes,triggersBounds:diff2.any},{name:"control-point-weights",type:t4.numbers,triggersBounds:diff2.any},{name:"segment-distances",type:t4.bidirectionalSizes,triggersBounds:diff2.any},{name:"segment-weights",type:t4.numbers,triggersBounds:diff2.any},{name:"segment-radii",type:t4.numbers,triggersBounds:diff2.any},{name:"radius-type",type:t4.radiusType,triggersBounds:diff2.any},{name:"taxi-turn",type:t4.bidirectionalSizeMaybePercent,triggersBounds:diff2.any},{name:"taxi-turn-min-distance",type:t4.size,triggersBounds:diff2.any},{name:"taxi-direction",type:t4.axisDirection,triggersBounds:diff2.any},{name:"taxi-radius",type:t4.number,triggersBounds:diff2.any},{name:"edge-distances",type:t4.edgeDistances,triggersBounds:diff2.any},{name:"arrow-scale",type:t4.positiveNumber,triggersBounds:diff2.any},{name:"loop-direction",type:t4.angle,triggersBounds:diff2.any},{name:"loop-sweep",type:t4.angle,triggersBounds:diff2.any},{name:"source-distance-from-node",type:t4.size,triggersBounds:diff2.any},{name:"target-distance-from-node",type:t4.size,triggersBounds:diff2.any}],ghost=[{name:"ghost",type:t4.bool,triggersBounds:diff2.any},{name:"ghost-offset-x",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"ghost-offset-y",type:t4.bidirectionalSize,triggersBounds:diff2.any},{name:"ghost-opacity",type:t4.zeroOneNumber}],core4=[{name:"selection-box-color",type:t4.color},{name:"selection-box-opacity",type:t4.zeroOneNumber},{name:"selection-box-border-color",type:t4.color},{name:"selection-box-border-width",type:t4.size},{name:"active-bg-color",type:t4.color},{name:"active-bg-opacity",type:t4.zeroOneNumber},{name:"active-bg-size",type:t4.size},{name:"outside-texture-bg-color",type:t4.color},{name:"outside-texture-bg-opacity",type:t4.zeroOneNumber}],pie2=[];styfn$2.pieBackgroundN=16,pie2.push({name:"pie-size",type:t4.sizeMaybePercent}),pie2.push({name:"pie-hole",type:t4.sizeMaybePercent}),pie2.push({name:"pie-start-angle",type:t4.angle});for(var i2=1;i2<=styfn$2.pieBackgroundN;i2++)pie2.push({name:"pie-"+i2+"-background-color",type:t4.color}),pie2.push({name:"pie-"+i2+"-background-size",type:t4.percent}),pie2.push({name:"pie-"+i2+"-background-opacity",type:t4.zeroOneNumber});var stripe=[];styfn$2.stripeBackgroundN=16,stripe.push({name:"stripe-size",type:t4.sizeMaybePercent}),stripe.push({name:"stripe-direction",type:t4.axisDirectionPrimary});for(var _i=1;_i<=styfn$2.stripeBackgroundN;_i++)stripe.push({name:"stripe-"+_i+"-background-color",type:t4.color}),stripe.push({name:"stripe-"+_i+"-background-size",type:t4.percent}),stripe.push({name:"stripe-"+_i+"-background-opacity",type:t4.zeroOneNumber});var edgeArrow=[],arrowPrefixes=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:t4.arrowShape,triggersBounds:diff2.any},{name:"arrow-color",type:t4.color},{name:"arrow-fill",type:t4.arrowFill},{name:"arrow-width",type:t4.arrowWidth}].forEach(function(prop2){arrowPrefixes.forEach(function(prefix){var name=prefix+"-"+prop2.name,type3=prop2.type,triggersBounds=prop2.triggersBounds;edgeArrow.push({name:name,type:type3,triggersBounds:triggersBounds})})},{});var props=styfn$2.properties=[].concat(behavior,transition2,visibility,overlay,underlay,ghost,commonLabel,labelDimensions,mainLabel,sourceLabel,targetLabel,nodeBody,nodeBorder,nodeOutline,backgroundImage,pie2,stripe,compound,edgeLine,edgeArrow,core4),propGroups=styfn$2.propertyGroups={behavior:behavior,transition:transition2,visibility:visibility,overlay:overlay,underlay:underlay,ghost:ghost,commonLabel:commonLabel,labelDimensions:labelDimensions,mainLabel:mainLabel,sourceLabel:sourceLabel,targetLabel:targetLabel,nodeBody:nodeBody,nodeBorder:nodeBorder,nodeOutline:nodeOutline,backgroundImage:backgroundImage,pie:pie2,stripe:stripe,compound:compound,edgeLine:edgeLine,edgeArrow:edgeArrow,core:core4},propGroupNames=styfn$2.propertyGroupNames={};(styfn$2.propertyGroupKeys=Object.keys(propGroups)).forEach(function(key){propGroupNames[key]=propGroups[key].map(function(prop2){return prop2.name}),propGroups[key].forEach(function(prop2){return prop2.groupKey=key})});var aliases=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=props.map(function(p3){return p3.name});for(var _i2=0;_i2<props.length;_i2++){var prop=props[_i2];props[prop.name]=prop}for(var _i3=0;_i3<aliases.length;_i3++){var alias=aliases[_i3],pointsToProp=props[alias.pointsTo],aliasProp={name:alias.name,alias:!0,pointsTo:pointsToProp};props.push(aliasProp),props[alias.name]=aliasProp}}(),styfn$2.getDefaultProperty=function(name){return this.getDefaultProperties()[name]},styfn$2.getDefaultProperties=function(){var _p=this._private;if(null!=_p.defaultProperties)return _p.defaultProperties;for(var rawProps=extend4({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(css,prop2){for(var i3=1;i3<=styfn$2.pieBackgroundN;i3++){var name2=prop2.name.replace("{{i}}",i3),val2=prop2.value;css[name2]=val2}return css},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(css,prop2){for(var i3=1;i3<=styfn$2.stripeBackgroundN;i3++){var name2=prop2.name.replace("{{i}}",i3),val2=prop2.value;css[name2]=val2}return css},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(css,prop2){return styfn$2.arrowPrefixes.forEach(function(prefix){var name2=prefix+"-"+prop2.name,val2=prop2.value;css[name2]=val2}),css},{})),parsedProps={},i2=0;i2<this.properties.length;i2++){var prop=this.properties[i2];if(!prop.pointsTo){var name=prop.name,val=rawProps[name],parsedProp=this.parse(name,val);parsedProps[name]=parsedProp}}return _p.defaultProperties=parsedProps,_p.defaultProperties},styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length},(styfn$1={}).parse=function(name,value2,propIsBypass,propIsFlat){if(fn$6(value2))return this.parseImplWarn(name,value2,propIsBypass,propIsFlat);var ret,argHash=hashStrings(name,""+value2,propIsBypass?"t":"f","mapping"===propIsFlat||!0===propIsFlat||!1===propIsFlat||null==propIsFlat?"dontcare":propIsFlat),propCache=this.propCache=this.propCache||[];return(ret=propCache[argHash])||(ret=propCache[argHash]=this.parseImplWarn(name,value2,propIsBypass,propIsFlat)),(propIsBypass||"mapping"===propIsFlat)&&(ret=copy3(ret))&&(ret.value=copy3(ret.value)),ret},styfn$1.parseImplWarn=function(name,value2,propIsBypass,propIsFlat){var prop=this.parseImpl(name,value2,propIsBypass,propIsFlat);return prop||null==value2||warn("The style property `".concat(name,": ").concat(value2,"` is invalid")),!prop||"width"!==prop.name&&"height"!==prop.name||"label"!==value2||warn("The style value of `label` is deprecated for `"+prop.name+"`"),prop},styfn$1.parseImpl=function(name,value2,propIsBypass,propIsFlat){name=camel2dash(name);var property2=this.properties[name],passedValue=value2,types=this.types;if(!property2)return null;if(void 0===value2)return null;property2.alias&&(property2=property2.pointsTo,name=property2.name);var valueIsString=string(value2);valueIsString&&(value2=value2.trim());var data5,mapData,type3=property2.type;if(!type3)return null;if(propIsBypass&&(""===value2||null===value2))return{name:name,value:value2,bypass:!0,deleteBypass:!0};if(fn$6(value2))return{name:name,value:value2,strValue:"fn",mapped:types.fn,bypass:propIsBypass};if(!valueIsString||propIsFlat||value2.length<7||"a"!==value2[1]);else{if(value2.length>=7&&"d"===value2[0]&&(data5=new RegExp(types.data.regex).exec(value2))){if(propIsBypass)return!1;var mapped=types.data;return{name:name,value:data5,strValue:""+value2,mapped:mapped,field:data5[1],bypass:propIsBypass}}if(value2.length>=10&&"m"===value2[0]&&(mapData=new RegExp(types.mapData.regex).exec(value2))){if(propIsBypass)return!1;if(type3.multiple)return!1;var _mapped=types.mapData;if(!type3.color&&!type3.number)return!1;var valueMin=this.parse(name,mapData[4]);if(!valueMin||valueMin.mapped)return!1;var valueMax=this.parse(name,mapData[5]);if(!valueMax||valueMax.mapped)return!1;if(valueMin.pfValue===valueMax.pfValue||valueMin.strValue===valueMax.strValue)return warn("`"+name+": "+value2+"` is not a valid mapper because the output range is zero; converting to `"+name+": "+valueMin.strValue+"`"),this.parse(name,valueMin.strValue);if(type3.color){var c1=valueMin.value,c22=valueMax.value;if(!(c1[0]!==c22[0]||c1[1]!==c22[1]||c1[2]!==c22[2]||c1[3]!==c22[3]&&(null!=c1[3]&&1!==c1[3]||null!=c22[3]&&1!==c22[3])))return!1}return{name:name,value:mapData,strValue:""+value2,mapped:_mapped,field:mapData[1],fieldMin:parseFloat(mapData[2]),fieldMax:parseFloat(mapData[3]),valueMin:valueMin.value,valueMax:valueMax.value,bypass:propIsBypass}}}if(type3.multiple&&"multiple"!==propIsFlat){var vals;if(vals=valueIsString?value2.split(/\s+/):array2(value2)?value2:[value2],type3.evenMultiple&&vals.length%2!=0)return null;for(var valArr=[],unitsArr=[],pfValArr=[],strVal="",hasEnum=!1,i2=0;i2<vals.length;i2++){var p3=this.parse(name,vals[i2],propIsBypass,"multiple");hasEnum=hasEnum||string(p3.value),valArr.push(p3.value),pfValArr.push(null!=p3.pfValue?p3.pfValue:p3.value),unitsArr.push(p3.units),strVal+=(i2>0?" ":"")+p3.strValue}return type3.validate&&!type3.validate(valArr,unitsArr)?null:type3.singleEnum&&hasEnum?1===valArr.length&&string(valArr[0])?{name:name,value:valArr[0],strValue:valArr[0],bypass:propIsBypass}:null:{name:name,value:valArr,pfValue:pfValArr,strValue:strVal,bypass:propIsBypass,units:unitsArr}}var checkEnums=__name(function(){for(var _i=0;_i<type3.enums.length;_i++){if(type3.enums[_i]===value2)return{name:name,value:value2,strValue:""+value2,bypass:propIsBypass}}return null},"checkEnums");if(type3.number){var units,implicitUnits="px";if(type3.units&&(units=type3.units),type3.implicitUnits&&(implicitUnits=type3.implicitUnits),!type3.unitless)if(valueIsString){var unitsRegex="px|em"+(type3.allowPercent?"|\\%":"");units&&(unitsRegex=units);var match2=value2.match("^("+number6+")("+unitsRegex+")?$");match2&&(value2=match2[1],units=match2[2]||implicitUnits)}else units&&!type3.implicitUnits||(units=implicitUnits);if(value2=parseFloat(value2),isNaN(value2)&&void 0===type3.enums)return null;if(isNaN(value2)&&void 0!==type3.enums)return value2=passedValue,checkEnums();if(type3.integer&&!integer(value2))return null;if(void 0!==type3.min&&(value2<type3.min||type3.strictMin&&value2===type3.min)||void 0!==type3.max&&(value2>type3.max||type3.strictMax&&value2===type3.max))return null;var ret={name:name,value:value2,strValue:""+value2+(units||""),units:units,bypass:propIsBypass};return type3.unitless||"px"!==units&&"em"!==units?ret.pfValue=value2:ret.pfValue="px"!==units&&units?this.getEmSizeInPixels()*value2:value2,"ms"!==units&&"s"!==units||(ret.pfValue="ms"===units?value2:1e3*value2),"deg"!==units&&"rad"!==units||(ret.pfValue="rad"===units?value2:deg2rad(value2)),"%"===units&&(ret.pfValue=value2/100),ret}if(type3.propList){var props=[],propsStr=""+value2;if("none"===propsStr);else{for(var propsSplit=propsStr.split(/\s*,\s*|\s+/),_i2=0;_i2<propsSplit.length;_i2++){var propName=propsSplit[_i2].trim();this.properties[propName]?props.push(propName):warn("`"+propName+"` is not a valid property name")}if(0===props.length)return null}return{name:name,value:props,strValue:0===props.length?"none":props.join(" "),bypass:propIsBypass}}if(type3.color){var tuple=color2tuple(value2);return tuple?{name:name,value:tuple,pfValue:tuple,strValue:"rgb("+tuple[0]+","+tuple[1]+","+tuple[2]+")",bypass:propIsBypass}:null}if(type3.regex||type3.regexes){if(type3.enums){var enumProp=checkEnums();if(enumProp)return enumProp}for(var regexes=type3.regexes?type3.regexes:[type3.regex],_i3=0;_i3<regexes.length;_i3++){var m3=new RegExp(regexes[_i3]).exec(value2);if(m3)return{name:name,value:type3.singleRegexMatchValue?m3[1]:m3,strValue:""+value2,bypass:propIsBypass}}return null}return type3.string?{name:name,value:""+value2,strValue:""+value2,bypass:propIsBypass}:type3.enums?checkEnums():null},(styfn=(_Style=__name(function(cy){if(!(this instanceof _Style))return new _Style(cy);core2(cy)?(this._private={cy:cy,coreStyle:{}},this.length=0,this.resetToDefault()):error("A style must have a core reference")},"Style")).prototype).instanceString=function(){return"style"},styfn.clear=function(){for(var _p=this._private,eles=_p.cy.elements(),i2=0;i2<this.length;i2++)this[i2]=void 0;return this.length=0,_p.contextStyles={},_p.propDiffs={},this.cleanElements(eles,!0),eles.forEach(function(ele){var ele_p=ele[0]._private;ele_p.styleDirty=!0,ele_p.appliedInitStyle=!1}),this},styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},styfn.core=function(propName){return this._private.coreStyle[propName]||this.getDefaultProperty(propName)},styfn.selector=function(selectorStr){var selector="core"===selectorStr?null:new Selector(selectorStr),i2=this.length++;return this[i2]={selector:selector,properties:[],mappedProperties:[],index:i2},this},styfn.css=function(){var args=arguments;if(1===args.length)for(var map5=args[0],i2=0;i2<this.properties.length;i2++){var prop=this.properties[i2],mapVal=map5[prop.name];void 0===mapVal&&(mapVal=map5[dash2camel(prop.name)]),void 0!==mapVal&&this.cssRule(prop.name,mapVal)}else 2===args.length&&this.cssRule(args[0],args[1]);return this},styfn.style=styfn.css,styfn.cssRule=function(name,value2){var property2=this.parse(name,value2);if(property2){var i2=this.length-1;this[i2].properties.push(property2),this[i2].properties[property2.name]=property2,property2.name.match(/pie-(\d+)-background-size/)&&property2.value&&(this._private.hasPie=!0),property2.name.match(/stripe-(\d+)-background-size/)&&property2.value&&(this._private.hasStripe=!0),property2.mapped&&this[i2].mappedProperties.push(property2),!this[i2].selector&&(this._private.coreStyle[property2.name]=property2)}return this},styfn.append=function(style3){return stylesheet(style3)?style3.appendToStyle(this):array2(style3)?this.appendFromJson(style3):string(style3)&&this.appendFromString(style3),this},_Style.fromJson=function(cy,json3){var style3=new _Style(cy);return style3.fromJson(json3),style3},_Style.fromString=function(cy,string3){return new _Style(cy).fromString(string3)},[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach(function(props){extend4(styfn,props)}),_Style.types=styfn.types,_Style.properties=styfn.properties,_Style.propertyGroups=styfn.propertyGroups,_Style.propertyGroupNames=styfn.propertyGroupNames,_Style.propertyGroupKeys=styfn.propertyGroupKeys,corefn$2={style:__name(function(newStyle){newStyle&&this.setStyle(newStyle).update();return this._private.style},"style"),setStyle:__name(function(style3){var _p=this._private;return stylesheet(style3)?_p.style=style3.generateStyle(this):array2(style3)?_p.style=_Style.fromJson(this,style3):string(style3)?_p.style=_Style.fromString(this,style3):_p.style=_Style(this),_p.style},"setStyle"),updateStyle:__name(function(){this.mutableElements().updateStyle()},"updateStyle")},corefn$1={autolock:__name(function(bool2){return void 0===bool2?this._private.autolock:(this._private.autolock=!!bool2,this)},"autolock"),autoungrabify:__name(function(bool2){return void 0===bool2?this._private.autoungrabify:(this._private.autoungrabify=!!bool2,this)},"autoungrabify"),autounselectify:__name(function(bool2){return void 0===bool2?this._private.autounselectify:(this._private.autounselectify=!!bool2,this)},"autounselectify"),selectionType:__name(function(selType){var _p=this._private;return null==_p.selectionType&&(_p.selectionType="single"),void 0===selType?_p.selectionType:("additive"!==selType&&"single"!==selType||(_p.selectionType=selType),this)},"selectionType"),panningEnabled:__name(function(bool2){return void 0===bool2?this._private.panningEnabled:(this._private.panningEnabled=!!bool2,this)},"panningEnabled"),userPanningEnabled:__name(function(bool2){return void 0===bool2?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!bool2,this)},"userPanningEnabled"),zoomingEnabled:__name(function(bool2){return void 0===bool2?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!bool2,this)},"zoomingEnabled"),userZoomingEnabled:__name(function(bool2){return void 0===bool2?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!bool2,this)},"userZoomingEnabled"),boxSelectionEnabled:__name(function(bool2){return void 0===bool2?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!bool2,this)},"boxSelectionEnabled"),pan:__name(function(){var dim,val,dims,x5,y6,args=arguments,pan2=this._private.pan;switch(args.length){case 0:return pan2;case 1:if(string(args[0]))return pan2[dim=args[0]];if(plainObject(args[0])){if(!this._private.panningEnabled)return this;x5=(dims=args[0]).x,y6=dims.y,number$1(x5)&&(pan2.x=x5),number$1(y6)&&(pan2.y=y6),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;val=args[1],"x"!==(dim=args[0])&&"y"!==dim||!number$1(val)||(pan2[dim]=val),this.emit("pan viewport")}return this.notify("viewport"),this},"pan"),panBy:__name(function(arg0,arg1){var dim,val,dims,x5,y6,args=arguments,pan2=this._private.pan;if(!this._private.panningEnabled)return this;switch(args.length){case 1:plainObject(arg0)&&(x5=(dims=args[0]).x,y6=dims.y,number$1(x5)&&(pan2.x+=x5),number$1(y6)&&(pan2.y+=y6),this.emit("pan viewport"));break;case 2:val=arg1,"x"!==(dim=arg0)&&"y"!==dim||!number$1(val)||(pan2[dim]+=val),this.emit("pan viewport")}return this.notify("viewport"),this},"panBy"),gc:__name(function(){this.notify("gc")},"gc"),fit:__name(function(elements2,padding2){var viewportState=this.getFitViewport(elements2,padding2);if(viewportState){var _p=this._private;_p.zoom=viewportState.zoom,_p.pan=viewportState.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},"fit"),getFitViewport:__name(function(elements2,padding2){if(number$1(elements2)&&void 0===padding2&&(padding2=elements2,elements2=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var bb;if(string(elements2)){var sel=elements2;elements2=this.$(sel)}else if(boundingBox(elements2)){var bbe=elements2;(bb={x1:bbe.x1,y1:bbe.y1,x2:bbe.x2,y2:bbe.y2}).w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1}else elementOrCollection(elements2)||(elements2=this.mutableElements());if(!elementOrCollection(elements2)||!elements2.empty()){bb=bb||elements2.boundingBox();var zoom2,w4=this.width(),h3=this.height();if(padding2=number$1(padding2)?padding2:0,!isNaN(w4)&&!isNaN(h3)&&w4>0&&h3>0&&!isNaN(bb.w)&&!isNaN(bb.h)&&bb.w>0&&bb.h>0)return{zoom:zoom2=(zoom2=(zoom2=Math.min((w4-2*padding2)/bb.w,(h3-2*padding2)/bb.h))>this._private.maxZoom?this._private.maxZoom:zoom2)<this._private.minZoom?this._private.minZoom:zoom2,pan:{x:(w4-zoom2*(bb.x1+bb.x2))/2,y:(h3-zoom2*(bb.y1+bb.y2))/2}}}}},"getFitViewport"),zoomRange:__name(function(min9,max10){var _p=this._private;if(null==max10){var opts=min9;min9=opts.min,max10=opts.max}return number$1(min9)&&number$1(max10)&&min9<=max10?(_p.minZoom=min9,_p.maxZoom=max10):number$1(min9)&&void 0===max10&&min9<=_p.maxZoom?_p.minZoom=min9:number$1(max10)&&void 0===min9&&max10>=_p.minZoom&&(_p.maxZoom=max10),this},"zoomRange"),minZoom:__name(function(zoom2){return void 0===zoom2?this._private.minZoom:this.zoomRange({min:zoom2})},"minZoom"),maxZoom:__name(function(zoom2){return void 0===zoom2?this._private.maxZoom:this.zoomRange({max:zoom2})},"maxZoom"),getZoomedViewport:__name(function(params){var pos,zoom2,_p=this._private,currentPan=_p.pan,currentZoom=_p.zoom,bail=!1;if(_p.zoomingEnabled||(bail=!0),number$1(params)?zoom2=params:plainObject(params)&&(zoom2=params.level,null!=params.position?pos=modelToRenderedPosition$1(params.position,currentZoom,currentPan):null!=params.renderedPosition&&(pos=params.renderedPosition),null==pos||_p.panningEnabled||(bail=!0)),zoom2=(zoom2=zoom2>_p.maxZoom?_p.maxZoom:zoom2)<_p.minZoom?_p.minZoom:zoom2,bail||!number$1(zoom2)||zoom2===currentZoom||null!=pos&&(!number$1(pos.x)||!number$1(pos.y)))return null;if(null!=pos){var pan1=currentPan,zoom1=currentZoom,zoom22=zoom2;return{zoomed:!0,panned:!0,zoom:zoom22,pan:{x:-zoom22/zoom1*(pos.x-pan1.x)+pos.x,y:-zoom22/zoom1*(pos.y-pan1.y)+pos.y}}}return{zoomed:!0,panned:!1,zoom:zoom2,pan:currentPan}},"getZoomedViewport"),zoom:__name(function(params){if(void 0===params)return this._private.zoom;var vp=this.getZoomedViewport(params),_p=this._private;return null!=vp&&vp.zoomed?(_p.zoom=vp.zoom,vp.panned&&(_p.pan.x=vp.pan.x,_p.pan.y=vp.pan.y),this.emit("zoom"+(vp.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},"zoom"),viewport:__name(function(opts){var _p=this._private,zoomDefd=!0,panDefd=!0,events=[],zoomFailed=!1,panFailed=!1;if(!opts)return this;if(number$1(opts.zoom)||(zoomDefd=!1),plainObject(opts.pan)||(panDefd=!1),!zoomDefd&&!panDefd)return this;if(zoomDefd){var z3=opts.zoom;z3<_p.minZoom||z3>_p.maxZoom||!_p.zoomingEnabled?zoomFailed=!0:(_p.zoom=z3,events.push("zoom"))}if(panDefd&&(!zoomFailed||!opts.cancelOnFailedZoom)&&_p.panningEnabled){var p3=opts.pan;number$1(p3.x)&&(_p.pan.x=p3.x,panFailed=!1),number$1(p3.y)&&(_p.pan.y=p3.y,panFailed=!1),panFailed||events.push("pan")}return events.length>0&&(events.push("viewport"),this.emit(events.join(" ")),this.notify("viewport")),this},"viewport"),center:__name(function(elements2){var pan2=this.getCenterPan(elements2);return pan2&&(this._private.pan=pan2,this.emit("pan viewport"),this.notify("viewport")),this},"center"),getCenterPan:__name(function(elements2,zoom2){if(this._private.panningEnabled){if(string(elements2)){var selector=elements2;elements2=this.mutableElements().filter(selector)}else elementOrCollection(elements2)||(elements2=this.mutableElements());if(0!==elements2.length){var bb=elements2.boundingBox(),w4=this.width(),h3=this.height();return{x:(w4-(zoom2=void 0===zoom2?this._private.zoom:zoom2)*(bb.x1+bb.x2))/2,y:(h3-zoom2*(bb.y1+bb.y2))/2}}}},"getCenterPan"),reset:__name(function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},"reset"),invalidateSize:__name(function(){this._private.sizeCache=null},"invalidateSize"),size:__name(function(){var style3,val,_p=this._private,container2=_p.container,cy=this;return _p.sizeCache=_p.sizeCache||(container2?(style3=cy.window().getComputedStyle(container2),val=__name(function(name){return parseFloat(style3.getPropertyValue(name))},"val"),{width:container2.clientWidth-val("padding-left")-val("padding-right"),height:container2.clientHeight-val("padding-top")-val("padding-bottom")}):{width:1,height:1})},"size"),width:__name(function(){return this.size().width},"width"),height:__name(function(){return this.size().height},"height"),extent:__name(function(){var pan2=this._private.pan,zoom2=this._private.zoom,rb=this.renderedExtent(),b3={x1:(rb.x1-pan2.x)/zoom2,x2:(rb.x2-pan2.x)/zoom2,y1:(rb.y1-pan2.y)/zoom2,y2:(rb.y2-pan2.y)/zoom2};return b3.w=b3.x2-b3.x1,b3.h=b3.y2-b3.y1,b3},"extent"),renderedExtent:__name(function(){var width3=this.width(),height2=this.height();return{x1:0,y1:0,x2:width3,y2:height2,w:width3,h:height2}},"renderedExtent"),multiClickDebounceTime:__name(function(_int){return _int?(this._private.multiClickDebounceTime=_int,this):this._private.multiClickDebounceTime},"multiClickDebounceTime")},corefn$1.centre=corefn$1.center,corefn$1.autolockNodes=corefn$1.autolock,corefn$1.autoungrabifyNodes=corefn$1.autoungrabify,(fn2={data:define2.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define2.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define2.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define2.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})}).attr=fn2.data,fn2.removeAttr=fn2.removeData,Core=__name(function(opts){var cy=this,container2=(opts=extend4({},opts)).container;container2&&!htmlElement(container2)&&htmlElement(container2[0])&&(container2=container2[0]);var reg=container2?container2._cyreg:null;(reg=reg||{})&&reg.cy&&(reg.cy.destroy(),reg={});var readies=reg.readies=reg.readies||[];container2&&(container2._cyreg=reg),reg.cy=cy;var head2=void 0!==_window&&void 0!==container2&&!opts.headless,options2=opts;options2.layout=extend4({name:head2?"grid":"null"},options2.layout),options2.renderer=extend4({name:head2?"canvas":"null"},options2.renderer);var defVal=__name(function(def,val,altVal){return void 0!==val?val:void 0!==altVal?altVal:def},"defVal"),_p=this._private={container:container2,ready:!1,options:options2,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:options2.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:defVal(!0,options2.zoomingEnabled),userZoomingEnabled:defVal(!0,options2.userZoomingEnabled),panningEnabled:defVal(!0,options2.panningEnabled),userPanningEnabled:defVal(!0,options2.userPanningEnabled),boxSelectionEnabled:defVal(!0,options2.boxSelectionEnabled),autolock:defVal(!1,options2.autolock,options2.autolockNodes),autoungrabify:defVal(!1,options2.autoungrabify,options2.autoungrabifyNodes),autounselectify:defVal(!1,options2.autounselectify),styleEnabled:void 0===options2.styleEnabled?head2:options2.styleEnabled,zoom:number$1(options2.zoom)?options2.zoom:1,pan:{x:plainObject(options2.pan)&&number$1(options2.pan.x)?options2.pan.x:0,y:plainObject(options2.pan)&&number$1(options2.pan.y)?options2.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:defVal(250,options2.multiClickDebounceTime)};this.createEmitter(),this.selectionType(options2.selectionType),this.zoomRange({min:options2.minZoom,max:options2.maxZoom});var loadExtData=__name(function(extData,next3){if(extData.some(promise))return Promise$1.all(extData).then(next3);next3(extData)},"loadExtData");_p.styleEnabled&&cy.setStyle([]);var rendererOptions=extend4({},options2,options2.renderer);cy.initRenderer(rendererOptions);var setElesAndLayout=__name(function(elements2,onload,ondone){cy.notifications(!1);var oldEles=cy.mutableElements();oldEles.length>0&&oldEles.remove(),null!=elements2&&(plainObject(elements2)||array2(elements2))&&cy.add(elements2),cy.one("layoutready",function(e3){cy.notifications(!0),cy.emit(e3),cy.one("load",onload),cy.emitAndNotify("load")}).one("layoutstop",function(){cy.one("done",ondone),cy.emit("done")});var layoutOpts=extend4({},cy._private.options.layout);layoutOpts.eles=cy.elements(),cy.layout(layoutOpts).run()},"setElesAndLayout");loadExtData([options2.style,options2.elements],function(thens){var initStyle=thens[0],initEles=thens[1];_p.styleEnabled&&cy.style().append(initStyle),setElesAndLayout(initEles,function(){cy.startAnimationLoop(),_p.ready=!0,fn$6(options2.ready)&&cy.on("ready",options2.ready);for(var i2=0;i2<readies.length;i2++){var fn3=readies[i2];cy.on("ready",fn3)}reg&&(reg.readies=[]),cy.emit("ready")},options2.done)})},"Core"),corefn=Core.prototype,extend4(corefn,{instanceString:__name(function(){return"core"},"instanceString"),isReady:__name(function(){return this._private.ready},"isReady"),destroyed:__name(function(){return this._private.destroyed},"destroyed"),ready:__name(function(fn3){return this.isReady()?this.emitter().emit("ready",[],fn3):this.on("ready",fn3),this},"ready"),destroy:__name(function(){var cy=this;if(!cy.destroyed())return cy.stopAnimationLoop(),cy.destroyRenderer(),this.emit("destroy"),cy._private.destroyed=!0,cy},"destroy"),hasElementWithId:__name(function(id30){return this._private.elements.hasElementWithId(id30)},"hasElementWithId"),getElementById:__name(function(id30){return this._private.elements.getElementById(id30)},"getElementById"),hasCompoundNodes:__name(function(){return this._private.hasCompoundNodes},"hasCompoundNodes"),headless:__name(function(){return this._private.renderer.isHeadless()},"headless"),styleEnabled:__name(function(){return this._private.styleEnabled},"styleEnabled"),addToPool:__name(function(eles){return this._private.elements.merge(eles),this},"addToPool"),removeFromPool:__name(function(eles){return this._private.elements.unmerge(eles),this},"removeFromPool"),container:__name(function(){return this._private.container||null},"container"),window:__name(function(){if(null==this._private.container)return _window;var ownerDocument=this._private.container.ownerDocument;return void 0===ownerDocument||null==ownerDocument?_window:ownerDocument.defaultView||_window},"window"),mount:__name(function(container2){if(null!=container2){var cy=this,_p=cy._private,options2=_p.options;return!htmlElement(container2)&&htmlElement(container2[0])&&(container2=container2[0]),cy.stopAnimationLoop(),cy.destroyRenderer(),_p.container=container2,_p.styleEnabled=!0,cy.invalidateSize(),cy.initRenderer(extend4({},options2,options2.renderer,{name:"null"===options2.renderer.name?"canvas":options2.renderer.name})),cy.startAnimationLoop(),cy.style(options2.style),cy.emit("mount"),cy}},"mount"),unmount:__name(function(){var cy=this;return cy.stopAnimationLoop(),cy.destroyRenderer(),cy.initRenderer({name:"null"}),cy.emit("unmount"),cy},"unmount"),options:__name(function(){return copy3(this._private.options)},"options"),json:__name(function(obj){var cy=this,_p=cy._private,eles=cy.mutableElements(),getFreshRef=__name(function(ele){return cy.getElementById(ele.id())},"getFreshRef");if(plainObject(obj)){if(cy.startBatch(),obj.elements){var idInJson={},updateEles=__name(function(jsons,gr2){for(var toAdd=[],toMod=[],i3=0;i3<jsons.length;i3++){var json4=jsons[i3];if(json4.data.id){var id30=""+json4.data.id,ele=cy.getElementById(id30);idInJson[id30]=!0,0!==ele.length?toMod.push({ele:ele,json:json4}):gr2?(json4.group=gr2,toAdd.push(json4)):toAdd.push(json4)}else warn("cy.json() cannot handle elements without an ID attribute")}cy.add(toAdd);for(var _i=0;_i<toMod.length;_i++){var _toMod$_i=toMod[_i],_ele=_toMod$_i.ele,_json=_toMod$_i.json;_ele.json(_json)}},"updateEles");if(array2(obj.elements))updateEles(obj.elements);else for(var grs=["nodes","edges"],i2=0;i2<grs.length;i2++){var gr=grs[i2],elements2=obj.elements[gr];array2(elements2)&&updateEles(elements2,gr)}var parentsToRemove=cy.collection();eles.filter(function(ele){return!idInJson[ele.id()]}).forEach(function(ele){ele.isParent()?parentsToRemove.merge(ele):ele.remove()}),parentsToRemove.forEach(function(ele){return ele.children().move({parent:null})}),parentsToRemove.forEach(function(ele){return getFreshRef(ele).remove()})}obj.style&&cy.style(obj.style),null!=obj.zoom&&obj.zoom!==_p.zoom&&cy.zoom(obj.zoom),obj.pan&&(obj.pan.x===_p.pan.x&&obj.pan.y===_p.pan.y||cy.pan(obj.pan)),obj.data&&cy.data(obj.data);for(var fields=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],_i2=0;_i2<fields.length;_i2++){var f2=fields[_i2];null!=obj[f2]&&cy[f2](obj[f2])}return cy.endBatch(),this}var json3={};!!obj?json3.elements=this.elements().map(function(ele){return ele.json()}):(json3.elements={},eles.forEach(function(ele){var group2=ele.group();json3.elements[group2]||(json3.elements[group2]=[]),json3.elements[group2].push(ele.json())})),this._private.styleEnabled&&(json3.style=cy.style().json()),json3.data=copy3(cy.data());var options2=_p.options;return json3.zoomingEnabled=_p.zoomingEnabled,json3.userZoomingEnabled=_p.userZoomingEnabled,json3.zoom=_p.zoom,json3.minZoom=_p.minZoom,json3.maxZoom=_p.maxZoom,json3.panningEnabled=_p.panningEnabled,json3.userPanningEnabled=_p.userPanningEnabled,json3.pan=copy3(_p.pan),json3.boxSelectionEnabled=_p.boxSelectionEnabled,json3.renderer=copy3(options2.renderer),json3.hideEdgesOnViewport=options2.hideEdgesOnViewport,json3.textureOnViewport=options2.textureOnViewport,json3.wheelSensitivity=options2.wheelSensitivity,json3.motionBlur=options2.motionBlur,json3.multiClickDebounceTime=options2.multiClickDebounceTime,json3},"json")}),corefn.$id=corefn.getElementById,[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn2].forEach(function(props){extend4(corefn,props)}),defaults$7={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:__name(function(node2,position5){return position5},"transform")},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=__name(function(ele){return ele.scratch("breadthfirst")},"getInfo"),setInfo=__name(function(ele,obj){return ele.scratch("breadthfirst",obj)},"setInfo"),__name(BreadthFirstLayout,"BreadthFirstLayout"),BreadthFirstLayout.prototype.run=function(){var roots,options2=this.options,cy=options2.cy,eles=options2.eles,nodes5=eles.nodes().filter(function(n3){return n3.isChildless()}),graph=eles,directed=options2.directed,maximal=options2.acyclic||options2.maximal||options2.maximalAdjustments>0,hasBoundingBox=!!options2.boundingBox,bb=makeBoundingBox(hasBoundingBox?options2.boundingBox:structuredClone(cy.extent()));if(elementOrCollection(options2.roots))roots=options2.roots;else if(array2(options2.roots)){for(var rootsArray=[],i2=0;i2<options2.roots.length;i2++){var id30=options2.roots[i2],ele=cy.getElementById(id30);rootsArray.push(ele)}roots=cy.collection(rootsArray)}else if(string(options2.roots))roots=cy.$(options2.roots);else if(directed)roots=nodes5.roots();else{var components3=eles.components();roots=cy.collection();for(var _loop=__name(function(){var comp=components3[_i],maxDegree=comp.maxDegree(!1),compRoots=comp.filter(function(ele2){return ele2.degree(!1)===maxDegree});roots=roots.add(compRoots)},"_loop"),_i=0;_i<components3.length;_i++)_loop()}var depths=[],foundByBfs={},addToDepth=__name(function(ele2,d3){null==depths[d3]&&(depths[d3]=[]);var i3=depths[d3].length;depths[d3].push(ele2),setInfo(ele2,{index:i3,depth:d3})},"addToDepth"),changeDepth=__name(function(ele2,newDepth){var _getInfo=getInfo(ele2),depth=_getInfo.depth,index=_getInfo.index;depths[depth][index]=null,ele2.isChildless()&&addToDepth(ele2,newDepth)},"changeDepth");graph.bfs({roots:roots,directed:options2.directed,visit:__name(function(node2,edge,pNode,i3,depth){var ele2=node2[0],id31=ele2.id();ele2.isChildless()&&addToDepth(ele2,depth),foundByBfs[id31]=!0},"visit")});for(var orphanNodes=[],_i2=0;_i2<nodes5.length;_i2++){var _ele=nodes5[_i2];foundByBfs[_ele.id()]||orphanNodes.push(_ele)}var assignDepthsAt=__name(function(i3){for(var eles2=depths[i3],j3=0;j3<eles2.length;j3++){var _ele2=eles2[j3];null!=_ele2?setInfo(_ele2,{depth:i3,index:j3}):(eles2.splice(j3,1),j3--)}},"assignDepthsAt"),adjustMaximally=__name(function(ele2,shifted2){for(var eInfo=getInfo(ele2),incomers=ele2.incomers().filter(function(el){return el.isNode()&&eles.has(el)}),maxDepth=-1,id31=ele2.id(),k2=0;k2<incomers.length;k2++){var incmr=incomers[k2],iInfo=getInfo(incmr);maxDepth=Math.max(maxDepth,iInfo.depth)}if(eInfo.depth<=maxDepth){if(!options2.acyclic&&shifted2[id31])return null;var newDepth=maxDepth+1;return changeDepth(ele2,newDepth),shifted2[id31]=newDepth,!0}return!1},"adjustMaximally");if(directed&&maximal){var Q3=[],shifted={},enqueue=__name(function(n3){return Q3.push(n3)},"enqueue"),dequeue=__name(function(){return Q3.shift()},"dequeue");for(nodes5.forEach(function(n3){return Q3.push(n3)});Q3.length>0;){var _ele3=dequeue(),didShift=adjustMaximally(_ele3,shifted);if(didShift)_ele3.outgoers().filter(function(el){return el.isNode()&&eles.has(el)}).forEach(enqueue);else if(null===didShift){warn("Detected double maximal shift for node `"+_ele3.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var minDistance=0;if(options2.avoidOverlap)for(var _i3=0;_i3<nodes5.length;_i3++){var nbb=nodes5[_i3].layoutDimensions(options2),w4=nbb.w,h3=nbb.h;minDistance=Math.max(minDistance,w4,h3)}var cachedWeightedPercent={},getWeightedPercent=__name(function(ele2){if(cachedWeightedPercent[ele2.id()])return cachedWeightedPercent[ele2.id()];for(var eleDepth=getInfo(ele2).depth,neighbors=ele2.neighborhood(),percent=0,samples=0,_i4=0;_i4<neighbors.length;_i4++){var neighbor=neighbors[_i4];if(!neighbor.isEdge()&&!neighbor.isParent()&&nodes5.has(neighbor)){var bf=getInfo(neighbor);if(null!=bf){var index=bf.index,depth=bf.depth;if(null!=index&&null!=depth){var nDepth=depths[depth].length;depth<eleDepth&&(percent+=index/nDepth,samples++)}}}}return percent/=samples=Math.max(1,samples),0===samples&&(percent=0),cachedWeightedPercent[ele2.id()]=percent,percent},"getWeightedPercent"),sortFn=__name(function(a2,b3){var diff2=getWeightedPercent(a2)-getWeightedPercent(b3);return 0===diff2?ascending3(a2.id(),b3.id()):diff2},"sortFn");void 0!==options2.depthSort&&(sortFn=options2.depthSort);for(var depthsLen=depths.length,_i5=0;_i5<depthsLen;_i5++)depths[_i5].sort(sortFn),assignDepthsAt(_i5);for(var orphanDepth=[],_i6=0;_i6<orphanNodes.length;_i6++)orphanDepth.push(orphanNodes[_i6]);var assignDepths=__name(function(){for(var _i7=0;_i7<depthsLen;_i7++)assignDepthsAt(_i7)},"assignDepths");orphanDepth.length&&(depths.unshift(orphanDepth),depthsLen=depths.length,assignDepths());for(var biggestDepthSize=0,_i8=0;_i8<depthsLen;_i8++)biggestDepthSize=Math.max(depths[_i8].length,biggestDepthSize);var center4_x=bb.x1+bb.w/2,center4_y=bb.y1+bb.h/2,aveNodeSize=nodes5.reduce(function(acc,node2){return box=node2.boundingBox({includeLabels:options2.nodeDimensionsIncludeLabels}),{w:-1===acc.w?box.w:(acc.w+box.w)/2,h:-1===acc.h?box.h:(acc.h+box.h)/2};var box},{w:-1,h:-1}),distanceY=Math.max(1===depthsLen?0:hasBoundingBox?(bb.h-2*options2.padding-aveNodeSize.h)/(depthsLen-1):(bb.h-2*options2.padding-aveNodeSize.h)/(depthsLen+1),minDistance),maxDepthSize=depths.reduce(function(max10,eles2){return Math.max(max10,eles2.length)},0),getPositionTopBottom=__name(function(ele2){var _getInfo2=getInfo(ele2),depth=_getInfo2.depth,index=_getInfo2.index;if(options2.circle){var radiusStepSize=Math.min(bb.w/2/depthsLen,bb.h/2/depthsLen),radius2=(radiusStepSize=Math.max(radiusStepSize,minDistance))*depth+radiusStepSize-(depthsLen>0&&depths[0].length<=3?radiusStepSize/2:0),theta=2*Math.PI/depths[depth].length*index;return 0===depth&&1===depths[0].length&&(radius2=1),{x:center4_x+radius2*Math.cos(theta),y:center4_y+radius2*Math.sin(theta)}}var depthSize=depths[depth].length,distanceX=Math.max(1===depthSize?0:hasBoundingBox?(bb.w-2*options2.padding-aveNodeSize.w)/((options2.grid?maxDepthSize:depthSize)-1):(bb.w-2*options2.padding-aveNodeSize.w)/((options2.grid?maxDepthSize:depthSize)+1),minDistance);return{x:center4_x+(index+1-(depthSize+1)/2)*distanceX,y:center4_y+(depth+1-(depthsLen+1)/2)*distanceY}},"getPositionTopBottom"),rotateDegrees={downward:0,leftward:90,upward:180,rightward:-90};-1===Object.keys(rotateDegrees).indexOf(options2.direction)&&error("Invalid direction '".concat(options2.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(rotateDegrees).join(", ")));var getPosition=__name(function(ele2){return rotatePosAndSkewByBox(getPositionTopBottom(ele2),bb,rotateDegrees[options2.direction])},"getPosition");return eles.nodes().layoutPositions(this,options2,getPosition),this},defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:__name(function(node2,position5){return position5},"transform")},__name(CircleLayout,"CircleLayout"),CircleLayout.prototype.run=function(){var params=this.options,options2=params,cy=params.cy,eles=options2.eles,clockwise=void 0!==options2.counterclockwise?!options2.counterclockwise:options2.clockwise,nodes5=eles.nodes().not(":parent");options2.sort&&(nodes5=nodes5.sort(options2.sort));for(var r2,bb=makeBoundingBox(options2.boundingBox?options2.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),center4_x=bb.x1+bb.w/2,center4_y=bb.y1+bb.h/2,dTheta=(void 0===options2.sweep?2*Math.PI-2*Math.PI/nodes5.length:options2.sweep)/Math.max(1,nodes5.length-1),minDistance=0,i2=0;i2<nodes5.length;i2++){var nbb=nodes5[i2].layoutDimensions(options2),w4=nbb.w,h3=nbb.h;minDistance=Math.max(minDistance,w4,h3)}if(r2=number$1(options2.radius)?options2.radius:nodes5.length<=1?0:Math.min(bb.h,bb.w)/2-minDistance,nodes5.length>1&&options2.avoidOverlap){minDistance*=1.75;var dcos=Math.cos(dTheta)-Math.cos(0),dsin=Math.sin(dTheta)-Math.sin(0),rMin=Math.sqrt(minDistance*minDistance/(dcos*dcos+dsin*dsin));r2=Math.max(rMin,r2)}var getPos=__name(function(ele,i3){var theta=options2.startAngle+i3*dTheta*(clockwise?1:-1),rx=r2*Math.cos(theta),ry=r2*Math.sin(theta);return{x:center4_x+rx,y:center4_y+ry}},"getPos");return eles.nodes().layoutPositions(this,options2,getPos),this},defaults$5={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:__name(function(node2){return node2.degree()},"concentric"),levelWidth:__name(function(nodes5){return nodes5.maxDegree()/4},"levelWidth"),animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:__name(function(node2,position5){return position5},"transform")},__name(ConcentricLayout,"ConcentricLayout"),ConcentricLayout.prototype.run=function(){for(var params=this.options,options2=params,clockwise=void 0!==options2.counterclockwise?!options2.counterclockwise:options2.clockwise,cy=params.cy,eles=options2.eles,nodes5=eles.nodes().not(":parent"),bb=makeBoundingBox(options2.boundingBox?options2.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),center4_x=bb.x1+bb.w/2,center4_y=bb.y1+bb.h/2,nodeValues=[],maxNodeSize=0,i2=0;i2<nodes5.length;i2++){var value2,node2=nodes5[i2];value2=options2.concentric(node2),nodeValues.push({value:value2,node:node2}),node2._private.scratch.concentric=value2}nodes5.updateStyle();for(var _i=0;_i<nodes5.length;_i++){var nbb=nodes5[_i].layoutDimensions(options2);maxNodeSize=Math.max(maxNodeSize,nbb.w,nbb.h)}nodeValues.sort(function(a2,b3){return b3.value-a2.value});for(var levelWidth2=options2.levelWidth(nodes5),levels=[[]],currentLevel=levels[0],_i2=0;_i2<nodeValues.length;_i2++){var val=nodeValues[_i2];if(currentLevel.length>0)Math.abs(currentLevel[0].value-val.value)>=levelWidth2&&(currentLevel=[],levels.push(currentLevel));currentLevel.push(val)}var minDist=maxNodeSize+options2.minNodeSpacing;if(!options2.avoidOverlap){var firstLvlHasMulti=levels.length>0&&levels[0].length>1,rStep=(Math.min(bb.w,bb.h)/2-minDist)/(levels.length+firstLvlHasMulti?1:0);minDist=Math.min(minDist,rStep)}for(var r2=0,_i3=0;_i3<levels.length;_i3++){var level=levels[_i3],sweep=void 0===options2.sweep?2*Math.PI-2*Math.PI/level.length:options2.sweep,dTheta=level.dTheta=sweep/Math.max(1,level.length-1);if(level.length>1&&options2.avoidOverlap){var dcos=Math.cos(dTheta)-Math.cos(0),dsin=Math.sin(dTheta)-Math.sin(0),rMin=Math.sqrt(minDist*minDist/(dcos*dcos+dsin*dsin));r2=Math.max(rMin,r2)}level.r=r2,r2+=minDist}if(options2.equidistant){for(var rDeltaMax=0,_r=0,_i4=0;_i4<levels.length;_i4++){var rDelta=levels[_i4].r-_r;rDeltaMax=Math.max(rDeltaMax,rDelta)}_r=0;for(var _i5=0;_i5<levels.length;_i5++){var _level2=levels[_i5];0===_i5&&(_r=_level2.r),_level2.r=_r,_r+=rDeltaMax}}for(var pos={},_i6=0;_i6<levels.length;_i6++)for(var _level3=levels[_i6],_dTheta=_level3.dTheta,_r2=_level3.r,j3=0;j3<_level3.length;j3++){var _val=_level3[j3],theta=options2.startAngle+(clockwise?1:-1)*_dTheta*j3,p3={x:center4_x+_r2*Math.cos(theta),y:center4_y+_r2*Math.sin(theta)};pos[_val.node.id()]=p3}return eles.nodes().layoutPositions(this,options2,function(ele){var id30=ele.id();return pos[id30]}),this},defaults$4={ready:__name(function(){},"ready"),stop:__name(function(){},"stop"),animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:__name(function(node2){return 2048},"nodeRepulsion"),nodeOverlap:4,idealEdgeLength:__name(function(edge){return 32},"idealEdgeLength"),edgeElasticity:__name(function(edge){return 32},"edgeElasticity"),nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1},__name(CoseLayout,"CoseLayout"),CoseLayout.prototype.run=function(){var options2=this.options,cy=options2.cy,layout6=this;layout6.stopped=!1,!0!==options2.animate&&!1!==options2.animate||layout6.emit({type:"layoutstart",layout:layout6}),DEBUG=!0===options2.debug;var layoutInfo=createLayoutInfo(cy,layout6,options2);DEBUG&&undefined(layoutInfo),options2.randomize&&randomizePositions(layoutInfo);var startTime=performanceNow(),refresh=__name(function(){refreshPositions(layoutInfo,cy,options2),!0===options2.fit&&cy.fit(options2.padding)},"refresh"),mainLoop=__name(function(i3){return!(layout6.stopped||i3>=options2.numIter)&&(step(layoutInfo,options2),layoutInfo.temperature=layoutInfo.temperature*options2.coolingFactor,!(layoutInfo.temperature<options2.minTemp))},"mainLoop"),done=__name(function(){if(!0===options2.animate||!1===options2.animate)refresh(),layout6.one("layoutstop",options2.stop),layout6.emit({type:"layoutstop",layout:layout6});else{var nodes5=options2.eles.nodes(),getScaledPos=getScaleInBoundsFn(layoutInfo,options2,nodes5);nodes5.layoutPositions(layout6,options2,getScaledPos)}},"done"),i2=0,loopRet=!0;if(!0===options2.animate){var _frame=__name(function(){for(var f2=0;loopRet&&f2<options2.refresh;)loopRet=mainLoop(i2),i2++,f2++;loopRet?(performanceNow()-startTime>=options2.animationThreshold&&refresh(),requestAnimationFrame2(_frame)):(separateComponents(layoutInfo,options2),done())},"frame");_frame()}else{for(;loopRet;)loopRet=mainLoop(i2),i2++;separateComponents(layoutInfo,options2),done()}return this},CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},createLayoutInfo=__name(function(cy,layout6,options2){for(var edges3=options2.eles.edges(),nodes5=options2.eles.nodes(),bb=makeBoundingBox(options2.boundingBox?options2.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),layoutInfo={isCompound:cy.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:nodes5.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:edges3.size(),temperature:options2.initialTemp,clientWidth:bb.w,clientHeight:bb.h,boundingBox:bb},components3=options2.eles.components(),id2cmptId={},i2=0;i2<components3.length;i2++)for(var component2=components3[i2],j3=0;j3<component2.length;j3++){id2cmptId[component2[j3].id()]=i2}for(i2=0;i2<layoutInfo.nodeSize;i2++){var nbb=(n2=nodes5[i2]).layoutDimensions(options2);(tempNode={}).isLocked=n2.locked(),tempNode.id=n2.data("id"),tempNode.parentId=n2.data("parent"),tempNode.cmptId=id2cmptId[n2.id()],tempNode.children=[],tempNode.positionX=n2.position("x"),tempNode.positionY=n2.position("y"),tempNode.offsetX=0,tempNode.offsetY=0,tempNode.height=nbb.w,tempNode.width=nbb.h,tempNode.maxX=tempNode.positionX+tempNode.width/2,tempNode.minX=tempNode.positionX-tempNode.width/2,tempNode.maxY=tempNode.positionY+tempNode.height/2,tempNode.minY=tempNode.positionY-tempNode.height/2,tempNode.padLeft=parseFloat(n2.style("padding")),tempNode.padRight=parseFloat(n2.style("padding")),tempNode.padTop=parseFloat(n2.style("padding")),tempNode.padBottom=parseFloat(n2.style("padding")),tempNode.nodeRepulsion=fn$6(options2.nodeRepulsion)?options2.nodeRepulsion(n2):options2.nodeRepulsion,layoutInfo.layoutNodes.push(tempNode),layoutInfo.idToIndex[tempNode.id]=i2}var queue=[],start3=0,end2=-1,tempGraph=[];for(i2=0;i2<layoutInfo.nodeSize;i2++){var n2,p_id=(n2=layoutInfo.layoutNodes[i2]).parentId;null!=p_id?layoutInfo.layoutNodes[layoutInfo.idToIndex[p_id]].children.push(n2.id):(queue[++end2]=n2.id,tempGraph.push(n2.id))}for(layoutInfo.graphSet.push(tempGraph);start3<=end2;){var node_id=queue[start3++],node_ix=layoutInfo.idToIndex[node_id],children2=layoutInfo.layoutNodes[node_ix].children;if(children2.length>0){layoutInfo.graphSet.push(children2);for(i2=0;i2<children2.length;i2++)queue[++end2]=children2[i2]}}for(i2=0;i2<layoutInfo.graphSet.length;i2++){var graph=layoutInfo.graphSet[i2];for(j3=0;j3<graph.length;j3++){var index=layoutInfo.idToIndex[graph[j3]];layoutInfo.indexToGraph[index]=i2}}for(i2=0;i2<layoutInfo.edgeSize;i2++){var e3=edges3[i2],tempEdge={};tempEdge.id=e3.data("id"),tempEdge.sourceId=e3.data("source"),tempEdge.targetId=e3.data("target");var idealLength=fn$6(options2.idealEdgeLength)?options2.idealEdgeLength(e3):options2.idealEdgeLength,elasticity=fn$6(options2.edgeElasticity)?options2.edgeElasticity(e3):options2.edgeElasticity,sourceIx=layoutInfo.idToIndex[tempEdge.sourceId],targetIx=layoutInfo.idToIndex[tempEdge.targetId];if(layoutInfo.indexToGraph[sourceIx]!=layoutInfo.indexToGraph[targetIx]){for(var lca=findLCA(tempEdge.sourceId,tempEdge.targetId,layoutInfo),lcaGraph=layoutInfo.graphSet[lca],depth=0,tempNode=layoutInfo.layoutNodes[sourceIx];-1===lcaGraph.indexOf(tempNode.id);)tempNode=layoutInfo.layoutNodes[layoutInfo.idToIndex[tempNode.parentId]],depth++;for(tempNode=layoutInfo.layoutNodes[targetIx];-1===lcaGraph.indexOf(tempNode.id);)tempNode=layoutInfo.layoutNodes[layoutInfo.idToIndex[tempNode.parentId]],depth++;idealLength*=depth*options2.nestingFactor}tempEdge.idealLength=idealLength,tempEdge.elasticity=elasticity,layoutInfo.layoutEdges.push(tempEdge)}return layoutInfo},"createLayoutInfo"),findLCA=__name(function(node1,node2,layoutInfo){var res=_findLCA_aux(node1,node2,0,layoutInfo);return 2>res.count?0:res.graph},"findLCA"),_findLCA_aux=__name(function(node1,node2,graphIx,layoutInfo){var graph=layoutInfo.graphSet[graphIx];if(-1<graph.indexOf(node1)&&-1<graph.indexOf(node2))return{count:2,graph:graphIx};for(var c3=0,i2=0;i2<graph.length;i2++){var nodeId=graph[i2],nodeIx=layoutInfo.idToIndex[nodeId],children2=layoutInfo.layoutNodes[nodeIx].children;if(0!==children2.length){var childGraphIx=layoutInfo.indexToGraph[layoutInfo.idToIndex[children2[0]]],result=_findLCA_aux(node1,node2,childGraphIx,layoutInfo);if(0!==result.count){if(1!==result.count)return result;if(2===++c3)break}}}return{count:c3,graph:graphIx}},"findLCA_aux"),randomizePositions=__name(function(layoutInfo,cy){for(var width3=layoutInfo.clientWidth,height2=layoutInfo.clientHeight,i2=0;i2<layoutInfo.nodeSize;i2++){var n2=layoutInfo.layoutNodes[i2];0!==n2.children.length||n2.isLocked||(n2.positionX=Math.random()*width3,n2.positionY=Math.random()*height2)}},"randomizePositions"),getScaleInBoundsFn=__name(function(layoutInfo,options2,nodes5){var bb=layoutInfo.boundingBox,coseBB={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return options2.boundingBox&&(nodes5.forEach(function(node2){var lnode=layoutInfo.layoutNodes[layoutInfo.idToIndex[node2.data("id")]];coseBB.x1=Math.min(coseBB.x1,lnode.positionX),coseBB.x2=Math.max(coseBB.x2,lnode.positionX),coseBB.y1=Math.min(coseBB.y1,lnode.positionY),coseBB.y2=Math.max(coseBB.y2,lnode.positionY)}),coseBB.w=coseBB.x2-coseBB.x1,coseBB.h=coseBB.y2-coseBB.y1),function(ele,i2){var lnode=layoutInfo.layoutNodes[layoutInfo.idToIndex[ele.data("id")]];if(options2.boundingBox){var pctX=0===coseBB.w?.5:(lnode.positionX-coseBB.x1)/coseBB.w,pctY=0===coseBB.h?.5:(lnode.positionY-coseBB.y1)/coseBB.h;return{x:bb.x1+pctX*bb.w,y:bb.y1+pctY*bb.h}}return{x:lnode.positionX,y:lnode.positionY}}},"getScaleInBoundsFn"),refreshPositions=__name(function(layoutInfo,cy,options2){var layout6=options2.layout,nodes5=options2.eles.nodes(),getScaledPos=getScaleInBoundsFn(layoutInfo,options2,nodes5);nodes5.positions(getScaledPos),!0!==layoutInfo.ready&&(layoutInfo.ready=!0,layout6.one("layoutready",options2.ready),layout6.emit({type:"layoutready",layout:this}))},"refreshPositions"),step=__name(function(layoutInfo,options2,_step){calculateNodeForces(layoutInfo,options2),calculateEdgeForces(layoutInfo),calculateGravityForces(layoutInfo,options2),propagateForces(layoutInfo),updatePositions(layoutInfo)},"step"),calculateNodeForces=__name(function(layoutInfo,options2){for(var i2=0;i2<layoutInfo.graphSet.length;i2++)for(var graph=layoutInfo.graphSet[i2],numNodes=graph.length,j3=0;j3<numNodes;j3++)for(var node1=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[j3]]],k2=j3+1;k2<numNodes;k2++){var node2=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[k2]]];nodeRepulsion2(node1,node2,layoutInfo,options2)}},"calculateNodeForces"),randomDistance=__name(function(max10){return 2*max10*Math.random()-1},"randomDistance"),nodeRepulsion2=__name(function(node1,node2,layoutInfo,options2){if(node1.cmptId===node2.cmptId||layoutInfo.isCompound){var directionX=node2.positionX-node1.positionX,directionY=node2.positionY-node1.positionY;0===directionX&&0===directionY&&(directionX=randomDistance(1),directionY=randomDistance(1));var overlap=nodesOverlap(node1,node2,directionX,directionY);if(overlap>0)var forceX=(force=options2.nodeOverlap*overlap)*directionX/(distance2=Math.sqrt(directionX*directionX+directionY*directionY)),forceY=force*directionY/distance2;else{var force,point1=findClippingPoint(node1,directionX,directionY),point22=findClippingPoint(node2,-1*directionX,-1*directionY),distanceX=point22.x-point1.x,distanceY=point22.y-point1.y,distanceSqr=distanceX*distanceX+distanceY*distanceY,distance2=Math.sqrt(distanceSqr);forceX=(force=(node1.nodeRepulsion+node2.nodeRepulsion)/distanceSqr)*distanceX/distance2,forceY=force*distanceY/distance2}node1.isLocked||(node1.offsetX-=forceX,node1.offsetY-=forceY),node2.isLocked||(node2.offsetX+=forceX,node2.offsetY+=forceY)}},"nodeRepulsion"),nodesOverlap=__name(function(node1,node2,dX,dY){if(dX>0)var overlapX=node1.maxX-node2.minX;else overlapX=node2.maxX-node1.minX;if(dY>0)var overlapY=node1.maxY-node2.minY;else overlapY=node2.maxY-node1.minY;return overlapX>=0&&overlapY>=0?Math.sqrt(overlapX*overlapX+overlapY*overlapY):0},"nodesOverlap"),findClippingPoint=__name(function(node2,dX,dY){var X4=node2.positionX,Y3=node2.positionY,H2=node2.height||1,W3=node2.width||1,dirSlope=dY/dX,nodeSlope=H2/W3,res={};return 0===dX&&0<dY||0===dX&&0>dY?(res.x=X4,res.y=Y3+H2/2,res):0<dX&&-1*nodeSlope<=dirSlope&&dirSlope<=nodeSlope?(res.x=X4+W3/2,res.y=Y3+W3*dY/2/dX,res):0>dX&&-1*nodeSlope<=dirSlope&&dirSlope<=nodeSlope?(res.x=X4-W3/2,res.y=Y3-W3*dY/2/dX,res):0<dY&&(dirSlope<=-1*nodeSlope||dirSlope>=nodeSlope)?(res.x=X4+H2*dX/2/dY,res.y=Y3+H2/2,res):0>dY&&(dirSlope<=-1*nodeSlope||dirSlope>=nodeSlope)?(res.x=X4-H2*dX/2/dY,res.y=Y3-H2/2,res):res},"findClippingPoint"),calculateEdgeForces=__name(function(layoutInfo,options2){for(var i2=0;i2<layoutInfo.edgeSize;i2++){var edge=layoutInfo.layoutEdges[i2],sourceIx=layoutInfo.idToIndex[edge.sourceId],source=layoutInfo.layoutNodes[sourceIx],targetIx=layoutInfo.idToIndex[edge.targetId],target=layoutInfo.layoutNodes[targetIx],directionX=target.positionX-source.positionX,directionY=target.positionY-source.positionY;if(0!==directionX||0!==directionY){var point1=findClippingPoint(source,directionX,directionY),point22=findClippingPoint(target,-1*directionX,-1*directionY),lx=point22.x-point1.x,ly=point22.y-point1.y,l4=Math.sqrt(lx*lx+ly*ly),force=Math.pow(edge.idealLength-l4,2)/edge.elasticity;if(0!==l4)var forceX=force*lx/l4,forceY=force*ly/l4;else forceX=0,forceY=0;source.isLocked||(source.offsetX+=forceX,source.offsetY+=forceY),target.isLocked||(target.offsetX-=forceX,target.offsetY-=forceY)}}},"calculateEdgeForces"),calculateGravityForces=__name(function(layoutInfo,options2){if(0!==options2.gravity)for(var i2=0;i2<layoutInfo.graphSet.length;i2++){var graph=layoutInfo.graphSet[i2],numNodes=graph.length;if(0===i2)var centerX=layoutInfo.clientHeight/2,centerY=layoutInfo.clientWidth/2;else{var temp=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[0]]],parent4=layoutInfo.layoutNodes[layoutInfo.idToIndex[temp.parentId]];centerX=parent4.positionX,centerY=parent4.positionY}for(var j3=0;j3<numNodes;j3++){var node2=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[j3]]];if(!node2.isLocked){var dx=centerX-node2.positionX,dy=centerY-node2.positionY,d3=Math.sqrt(dx*dx+dy*dy);if(d3>1){var fx=options2.gravity*dx/d3,fy=options2.gravity*dy/d3;node2.offsetX+=fx,node2.offsetY+=fy}}}}},"calculateGravityForces"),propagateForces=__name(function(layoutInfo,options2){var queue=[],start3=0,end2=-1;for(queue.push.apply(queue,layoutInfo.graphSet[0]),end2+=layoutInfo.graphSet[0].length;start3<=end2;){var nodeId=queue[start3++],nodeIndex=layoutInfo.idToIndex[nodeId],node2=layoutInfo.layoutNodes[nodeIndex],children2=node2.children;if(0<children2.length&&!node2.isLocked){for(var offX=node2.offsetX,offY=node2.offsetY,i2=0;i2<children2.length;i2++){var childNode=layoutInfo.layoutNodes[layoutInfo.idToIndex[children2[i2]]];childNode.offsetX+=offX,childNode.offsetY+=offY,queue[++end2]=children2[i2]}node2.offsetX=0,node2.offsetY=0}}},"propagateForces"),updatePositions=__name(function(layoutInfo,options2){for(var i2=0;i2<layoutInfo.nodeSize;i2++){0<(n2=layoutInfo.layoutNodes[i2]).children.length&&(n2.maxX=void 0,n2.minX=void 0,n2.maxY=void 0,n2.minY=void 0)}for(i2=0;i2<layoutInfo.nodeSize;i2++){if(!(0<(n2=layoutInfo.layoutNodes[i2]).children.length||n2.isLocked)){var tempForce=limitForce(n2.offsetX,n2.offsetY,layoutInfo.temperature);n2.positionX+=tempForce.x,n2.positionY+=tempForce.y,n2.offsetX=0,n2.offsetY=0,n2.minX=n2.positionX-n2.width,n2.maxX=n2.positionX+n2.width,n2.minY=n2.positionY-n2.height,n2.maxY=n2.positionY+n2.height,_updateAncestryBoundaries(n2,layoutInfo)}}for(i2=0;i2<layoutInfo.nodeSize;i2++){var n2;0<(n2=layoutInfo.layoutNodes[i2]).children.length&&!n2.isLocked&&(n2.positionX=(n2.maxX+n2.minX)/2,n2.positionY=(n2.maxY+n2.minY)/2,n2.width=n2.maxX-n2.minX,n2.height=n2.maxY-n2.minY)}},"updatePositions"),limitForce=__name(function(forceX,forceY,max10){var force=Math.sqrt(forceX*forceX+forceY*forceY);if(force>max10)var res={x:max10*forceX/force,y:max10*forceY/force};else res={x:forceX,y:forceY};return res},"limitForce"),_updateAncestryBoundaries=__name(function(node2,layoutInfo){var parentId=node2.parentId;if(null!=parentId){var p3=layoutInfo.layoutNodes[layoutInfo.idToIndex[parentId]],flag=!1;return(null==p3.maxX||node2.maxX+p3.padRight>p3.maxX)&&(p3.maxX=node2.maxX+p3.padRight,flag=!0),(null==p3.minX||node2.minX-p3.padLeft<p3.minX)&&(p3.minX=node2.minX-p3.padLeft,flag=!0),(null==p3.maxY||node2.maxY+p3.padBottom>p3.maxY)&&(p3.maxY=node2.maxY+p3.padBottom,flag=!0),(null==p3.minY||node2.minY-p3.padTop<p3.minY)&&(p3.minY=node2.minY-p3.padTop,flag=!0),flag?_updateAncestryBoundaries(p3,layoutInfo):void 0}},"updateAncestryBoundaries"),separateComponents=__name(function(layoutInfo,options2){for(var nodes5=layoutInfo.layoutNodes,components3=[],i2=0;i2<nodes5.length;i2++){var node2=nodes5[i2],cid=node2.cmptId;(components3[cid]=components3[cid]||[]).push(node2)}var totalA=0;for(i2=0;i2<components3.length;i2++){if(c3=components3[i2]){c3.x1=1/0,c3.x2=-1/0,c3.y1=1/0,c3.y2=-1/0;for(var j3=0;j3<c3.length;j3++){var n2=c3[j3];c3.x1=Math.min(c3.x1,n2.positionX-n2.width/2),c3.x2=Math.max(c3.x2,n2.positionX+n2.width/2),c3.y1=Math.min(c3.y1,n2.positionY-n2.height/2),c3.y2=Math.max(c3.y2,n2.positionY+n2.height/2)}c3.w=c3.x2-c3.x1,c3.h=c3.y2-c3.y1,totalA+=c3.w*c3.h}}components3.sort(function(c1,c22){return c22.w*c22.h-c1.w*c1.h});var x5=0,y6=0,usedW=0,rowH=0,maxRowW=Math.sqrt(totalA)*layoutInfo.clientWidth/layoutInfo.clientHeight;for(i2=0;i2<components3.length;i2++){var c3;if(c3=components3[i2]){for(j3=0;j3<c3.length;j3++){(n2=c3[j3]).isLocked||(n2.positionX+=x5-c3.x1,n2.positionY+=y6-c3.y1)}x5+=c3.w+options2.componentSpacing,usedW+=c3.w+options2.componentSpacing,rowH=Math.max(rowH,c3.h),usedW>maxRowW&&(y6+=rowH+options2.componentSpacing,x5=0,usedW=0,rowH=0)}}},"separateComponents"),defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:__name(function(node2){},"position"),sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:__name(function(node2,position5){return position5},"transform")},__name(GridLayout,"GridLayout"),GridLayout.prototype.run=function(){var params=this.options,options2=params,cy=params.cy,eles=options2.eles,nodes5=eles.nodes().not(":parent");options2.sort&&(nodes5=nodes5.sort(options2.sort));var bb=makeBoundingBox(options2.boundingBox?options2.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});if(0===bb.h||0===bb.w)eles.nodes().layoutPositions(this,options2,function(ele){return{x:bb.x1,y:bb.y1}});else{var cells=nodes5.size(),splits=Math.sqrt(cells*bb.h/bb.w),rows=Math.round(splits),cols=Math.round(bb.w/bb.h*splits),small=__name(function(val){if(null==val)return Math.min(rows,cols);Math.min(rows,cols)==rows?rows=val:cols=val},"small"),large=__name(function(val){if(null==val)return Math.max(rows,cols);Math.max(rows,cols)==rows?rows=val:cols=val},"large"),oRows=options2.rows,oCols=null!=options2.cols?options2.cols:options2.columns;if(null!=oRows&&null!=oCols)rows=oRows,cols=oCols;else if(null!=oRows&&null==oCols)rows=oRows,cols=Math.ceil(cells/rows);else if(null==oRows&&null!=oCols)cols=oCols,rows=Math.ceil(cells/cols);else if(cols*rows>cells){var sm=small(),lg=large();(sm-1)*lg>=cells?small(sm-1):(lg-1)*sm>=cells&&large(lg-1)}else for(;cols*rows<cells;){var _sm=small(),_lg=large();(_lg+1)*_sm>=cells?large(_lg+1):small(_sm+1)}var cellWidth=bb.w/cols,cellHeight=bb.h/rows;if(options2.condense&&(cellWidth=0,cellHeight=0),options2.avoidOverlap)for(var i2=0;i2<nodes5.length;i2++){var node2=nodes5[i2],pos=node2._private.position;null!=pos.x&&null!=pos.y||(pos.x=0,pos.y=0);var nbb=node2.layoutDimensions(options2),p3=options2.avoidOverlapPadding,w4=nbb.w+p3,h3=nbb.h+p3;cellWidth=Math.max(cellWidth,w4),cellHeight=Math.max(cellHeight,h3)}for(var cellUsed={},used=__name(function(row2,col2){return!!cellUsed["c-"+row2+"-"+col2]},"used"),use=__name(function(row2,col2){cellUsed["c-"+row2+"-"+col2]=!0},"use"),row=0,col=0,moveToNextCell=__name(function(){++col>=cols&&(col=0,row++)},"moveToNextCell"),id2manPos={},_i=0;_i<nodes5.length;_i++){var _node=nodes5[_i],rcPos=options2.position(_node);if(rcPos&&(void 0!==rcPos.row||void 0!==rcPos.col)){var _pos={row:rcPos.row,col:rcPos.col};if(void 0===_pos.col)for(_pos.col=0;used(_pos.row,_pos.col);)_pos.col++;else if(void 0===_pos.row)for(_pos.row=0;used(_pos.row,_pos.col);)_pos.row++;id2manPos[_node.id()]=_pos,use(_pos.row,_pos.col)}}var getPos=__name(function(element3,i3){var x5,y6;if(element3.locked()||element3.isParent())return!1;var rcPos2=id2manPos[element3.id()];if(rcPos2)x5=rcPos2.col*cellWidth+cellWidth/2+bb.x1,y6=rcPos2.row*cellHeight+cellHeight/2+bb.y1;else{for(;used(row,col);)moveToNextCell();x5=col*cellWidth+cellWidth/2+bb.x1,y6=row*cellHeight+cellHeight/2+bb.y1,use(row,col),moveToNextCell()}return{x:x5,y:y6}},"getPos");nodes5.layoutPositions(this,options2,getPos)}return this},defaults$2={ready:__name(function(){},"ready"),stop:__name(function(){},"stop")},__name(NullLayout,"NullLayout"),NullLayout.prototype.run=function(){var options2=this.options,eles=options2.eles;return options2.cy,this.emit("layoutstart"),eles.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",options2.ready),this.emit("layoutready"),this.one("layoutstop",options2.stop),this.emit("layoutstop"),this},NullLayout.prototype.stop=function(){return this},defaults$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:__name(function(node2,position5){return position5},"transform")},__name(PresetLayout,"PresetLayout"),PresetLayout.prototype.run=function(){var options2=this.options,nodes5=options2.eles.nodes(),posIsFn=fn$6(options2.positions);function getPosition(node2){if(null==options2.positions)return copyPosition(node2.position());if(posIsFn)return options2.positions(node2);var pos=options2.positions[node2._private.data.id];return null==pos?null:pos}return __name(getPosition,"getPosition"),nodes5.layoutPositions(this,options2,function(node2,i2){var position5=getPosition(node2);return!node2.locked()&&null!=position5&&position5}),this},defaults3={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:__name(function(node2,i2){return!0},"animateFilter"),ready:void 0,stop:void 0,transform:__name(function(node2,position5){return position5},"transform")},__name(RandomLayout,"RandomLayout"),RandomLayout.prototype.run=function(){var options2=this.options,cy=options2.cy,eles=options2.eles,bb=makeBoundingBox(options2.boundingBox?options2.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),getPos=__name(function(node2,i2){return{x:bb.x1+Math.round(Math.random()*bb.w),y:bb.y1+Math.round(Math.random()*bb.h)}},"getPos");return eles.nodes().layoutPositions(this,options2,getPos),this},layout4=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}],__name(NullRenderer,"NullRenderer"),noop4=__name(function(){},"noop"),throwImgErr=__name(function(){throw new Error("A headless instance can not render images")},"throwImgErr"),NullRenderer.prototype={recalculateRenderedStyle:noop4,notify:__name(function(){this.notifications++},"notify"),init:noop4,isHeadless:__name(function(){return!0},"isHeadless"),png:throwImgErr,jpg:throwImgErr},(BRp$f={}).arrowShapeWidth=.3,BRp$f.registerArrowShapes=function(){var arrowShapes=this.arrowShapes={},renderer10=this,bbCollide=__name(function(x5,y6,size4,angle2,translation,edgeWidth,padding2){var x1=translation.x-size4/2-padding2,x22=translation.x+size4/2+padding2,y1=translation.y-size4/2-padding2,y22=translation.y+size4/2+padding2;return x1<=x5&&x5<=x22&&y1<=y6&&y6<=y22},"bbCollide"),transform8=__name(function(x5,y6,size4,angle2,translation){var xRotated=x5*Math.cos(angle2)-y6*Math.sin(angle2),yScaled=(x5*Math.sin(angle2)+y6*Math.cos(angle2))*size4;return{x:xRotated*size4+translation.x,y:yScaled+translation.y}},"transform"),transformPoints3=__name(function(pts2,size4,angle2,translation){for(var retPts=[],i2=0;i2<pts2.length;i2+=2){var x5=pts2[i2],y6=pts2[i2+1];retPts.push(transform8(x5,y6,size4,angle2,translation))}return retPts},"transformPoints"),pointsToArr=__name(function(pts2){for(var ret=[],i2=0;i2<pts2.length;i2++){var p3=pts2[i2];ret.push(p3.x,p3.y)}return ret},"pointsToArr"),standardGap=__name(function(edge){return edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").pfValue*2},"standardGap"),defineArrowShape=__name(function(name,defn){string(defn)&&(defn=arrowShapes[defn]),arrowShapes[name]=extend4({name:name,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:__name(function(x5,y6,size4,angle2,translation,padding2){var points=pointsToArr(transformPoints3(this.points,size4+2*padding2,angle2,translation));return pointInsidePolygonPoints(x5,y6,points)},"collide"),roughCollide:bbCollide,draw:__name(function(context,size4,angle2,translation){var points=transformPoints3(this.points,size4,angle2,translation);renderer10.arrowShapeImpl("polygon")(context,points)},"draw"),spacing:__name(function(edge){return 0},"spacing"),gap:standardGap},defn)},"defineArrowShape");defineArrowShape("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),defineArrowShape("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),defineArrowShape("arrow","triangle"),defineArrowShape("triangle-backcurve",{points:arrowShapes.triangle.points,controlPoint:[0,-.15],roughCollide:bbCollide,draw:__name(function(context,size4,angle2,translation,edgeWidth){var ptsTrans=transformPoints3(this.points,size4,angle2,translation),ctrlPt=this.controlPoint,ctrlPtTrans=transform8(ctrlPt[0],ctrlPt[1],size4,angle2,translation);renderer10.arrowShapeImpl(this.name)(context,ptsTrans,ctrlPtTrans)},"draw"),gap:__name(function(edge){return.8*standardGap(edge)},"gap")}),defineArrowShape("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:__name(function(x5,y6,size4,angle2,translation,edgeWidth,padding2){var triPts=pointsToArr(transformPoints3(this.points,size4+2*padding2,angle2,translation)),teePts=pointsToArr(transformPoints3(this.pointsTee,size4+2*padding2,angle2,translation));return pointInsidePolygonPoints(x5,y6,triPts)||pointInsidePolygonPoints(x5,y6,teePts)},"collide"),draw:__name(function(context,size4,angle2,translation,edgeWidth){var triPts=transformPoints3(this.points,size4,angle2,translation),teePts=transformPoints3(this.pointsTee,size4,angle2,translation);renderer10.arrowShapeImpl(this.name)(context,triPts,teePts)},"draw")}),defineArrowShape("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:__name(function(x5,y6,size4,angle2,translation,edgeWidth,padding2){var t4=translation,circleInside=Math.pow(t4.x-x5,2)+Math.pow(t4.y-y6,2)<=Math.pow((size4+2*padding2)*this.radius,2),triPts=pointsToArr(transformPoints3(this.points,size4+2*padding2,angle2,translation));return pointInsidePolygonPoints(x5,y6,triPts)||circleInside},"collide"),draw:__name(function(context,size4,angle2,translation,edgeWidth){var triPts=transformPoints3(this.pointsTr,size4,angle2,translation);renderer10.arrowShapeImpl(this.name)(context,triPts,translation.x,translation.y,this.radius*size4)},"draw"),spacing:__name(function(edge){return renderer10.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.radius},"spacing")}),defineArrowShape("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:__name(function(size4,edgeWidth){var p3=this.baseCrossLinePts.slice(),shiftFactor=edgeWidth/size4;return p3[3]=p3[3]-shiftFactor,p3[5]=p3[5]-shiftFactor,p3},"crossLinePts"),collide:__name(function(x5,y6,size4,angle2,translation,edgeWidth,padding2){var triPts=pointsToArr(transformPoints3(this.points,size4+2*padding2,angle2,translation)),teePts=pointsToArr(transformPoints3(this.crossLinePts(size4,edgeWidth),size4+2*padding2,angle2,translation));return pointInsidePolygonPoints(x5,y6,triPts)||pointInsidePolygonPoints(x5,y6,teePts)},"collide"),draw:__name(function(context,size4,angle2,translation,edgeWidth){var triPts=transformPoints3(this.points,size4,angle2,translation),crossLinePts=transformPoints3(this.crossLinePts(size4,edgeWidth),size4,angle2,translation);renderer10.arrowShapeImpl(this.name)(context,triPts,crossLinePts)},"draw")}),defineArrowShape("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:__name(function(edge){return.525*standardGap(edge)},"gap")}),defineArrowShape("circle",{radius:.15,collide:__name(function(x5,y6,size4,angle2,translation,edgeWidth,padding2){var t4=translation;return Math.pow(t4.x-x5,2)+Math.pow(t4.y-y6,2)<=Math.pow((size4+2*padding2)*this.radius,2)},"collide"),draw:__name(function(context,size4,angle2,translation,edgeWidth){renderer10.arrowShapeImpl(this.name)(context,translation.x,translation.y,this.radius*size4)},"draw"),spacing:__name(function(edge){return renderer10.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.radius},"spacing")}),defineArrowShape("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:__name(function(edge){return 1},"spacing"),gap:__name(function(edge){return 1},"gap")}),defineArrowShape("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),defineArrowShape("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:__name(function(edge){return edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").value},"gap")}),defineArrowShape("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:__name(function(edge){return.95*edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").value},"gap")})},(BRp$e={}).projectIntoViewport=function(clientX,clientY){var cy=this.cy,offsets=this.findContainerClientCoords(),offsetLeft=offsets[0],offsetTop=offsets[1],scale2=offsets[4],pan2=cy.pan(),zoom2=cy.zoom();return[((clientX-offsetLeft)/scale2-pan2.x)/zoom2,((clientY-offsetTop)/scale2-pan2.y)/zoom2]},BRp$e.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var container2=this.container,rect3=container2.getBoundingClientRect(),style3=this.cy.window().getComputedStyle(container2),styleValue2=__name(function(name){return parseFloat(style3.getPropertyValue(name))},"styleValue"),padding2_left=styleValue2("padding-left"),padding2_right=styleValue2("padding-right"),padding2_top=styleValue2("padding-top"),padding2_bottom=styleValue2("padding-bottom"),border_left=styleValue2("border-left-width"),border_right=styleValue2("border-right-width"),border_top=styleValue2("border-top-width"),clientWidth=(styleValue2("border-bottom-width"),container2.clientWidth),clientHeight=container2.clientHeight,paddingHor=padding2_left+padding2_right,paddingVer=padding2_top+padding2_bottom,borderHor=border_left+border_right,scale2=rect3.width/(clientWidth+borderHor),unscaledW=clientWidth-paddingHor,unscaledH=clientHeight-paddingVer,left3=rect3.left+padding2_left+border_left,top2=rect3.top+padding2_top+border_top;return this.containerBB=[left3,top2,unscaledW,unscaledH,scale2]},BRp$e.invalidateContainerClientCoordsCache=function(){this.containerBB=null},BRp$e.findNearestElement=function(x5,y6,interactiveElementsOnly,isTouch){return this.findNearestElements(x5,y6,interactiveElementsOnly,isTouch)[0]},BRp$e.findNearestElements=function(x5,y6,interactiveElementsOnly,isTouch){var nearEdge,nearNode,self2=this,r2=this,eles=r2.getCachedZSortedEles(),near=[],zoom2=r2.cy.zoom(),hasCompounds=r2.cy.hasCompoundNodes(),edgeThreshold=(isTouch?24:8)/zoom2,nodeThreshold=(isTouch?8:2)/zoom2,labelThreshold=(isTouch?8:2)/zoom2,minSqDist=1/0;function addEle(ele2,sqDist){if(ele2.isNode()){if(nearNode)return;nearNode=ele2,near.push(ele2)}if(ele2.isEdge()&&(null==sqDist||sqDist<minSqDist))if(nearEdge){if(nearEdge.pstyle("z-compound-depth").value===ele2.pstyle("z-compound-depth").value&&nearEdge.pstyle("z-compound-depth").value===ele2.pstyle("z-compound-depth").value)for(var i3=0;i3<near.length;i3++)if(near[i3].isEdge()){near[i3]=ele2,nearEdge=ele2,minSqDist=null!=sqDist?sqDist:minSqDist;break}}else near.push(ele2),nearEdge=ele2,minSqDist=null!=sqDist?sqDist:minSqDist}function checkNode(node2){var width3=node2.outerWidth()+2*nodeThreshold,height2=node2.outerHeight()+2*nodeThreshold,hw=width3/2,hh=height2/2,pos=node2.position(),cornerRadius="auto"===node2.pstyle("corner-radius").value?"auto":node2.pstyle("corner-radius").pfValue,rs=node2._private.rscratch;if(pos.x-hw<=x5&&x5<=pos.x+hw&&pos.y-hh<=y6&&y6<=pos.y+hh&&r2.nodeShapes[self2.getNodeShape(node2)].checkPoint(x5,y6,0,width3,height2,pos.x,pos.y,cornerRadius,rs))return addEle(node2,0),!0}function checkEdge(edge){var sqDist,_p=edge._private,rs=_p.rscratch,styleWidth=edge.pstyle("width").pfValue,scale2=edge.pstyle("arrow-scale").value,width3=styleWidth/2+edgeThreshold,widthSq=width3*width3,width22=2*width3,src=_p.source,tgt=_p.target;if("segments"===rs.edgeType||"straight"===rs.edgeType||"haystack"===rs.edgeType){for(var pts2=rs.allpts,i3=0;i3+3<pts2.length;i3+=2)if(inLineVicinity(x5,y6,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3],width22)&&widthSq>(sqDist=sqdistToFiniteLine(x5,y6,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3])))return addEle(edge,sqDist),!0}else if("bezier"===rs.edgeType||"multibezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType)for(pts2=rs.allpts,i3=0;i3+5<rs.allpts.length;i3+=4)if(inBezierVicinity(x5,y6,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3],pts2[i3+4],pts2[i3+5],width22)&&widthSq>(sqDist=sqdistToQuadraticBezier(x5,y6,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3],pts2[i3+4],pts2[i3+5])))return addEle(edge,sqDist),!0;src=src||_p.source,tgt=tgt||_p.target;var arSize=self2.getArrowWidth(styleWidth,scale2),arrows=[{name:"source",x:rs.arrowStartX,y:rs.arrowStartY,angle:rs.srcArrowAngle},{name:"target",x:rs.arrowEndX,y:rs.arrowEndY,angle:rs.tgtArrowAngle},{name:"mid-source",x:rs.midX,y:rs.midY,angle:rs.midsrcArrowAngle},{name:"mid-target",x:rs.midX,y:rs.midY,angle:rs.midtgtArrowAngle}];for(i3=0;i3<arrows.length;i3++){var ar=arrows[i3],shape=r2.arrowShapes[edge.pstyle(ar.name+"-arrow-shape").value],edgeWidth=edge.pstyle("width").pfValue;if(shape.roughCollide(x5,y6,arSize,ar.angle,{x:ar.x,y:ar.y},edgeWidth,edgeThreshold)&&shape.collide(x5,y6,arSize,ar.angle,{x:ar.x,y:ar.y},edgeWidth,edgeThreshold))return addEle(edge),!0}hasCompounds&&near.length>0&&(checkNode(src),checkNode(tgt))}function preprop(obj,name,pre){return getPrefixedProperty(obj,name,pre)}function checkLabel(ele2,prefix){var prefixDash,_p=ele2._private,th=labelThreshold;prefixDash=prefix?prefix+"-":"",ele2.boundingBox();var bb=_p.labelBounds[prefix||"main"],text4=ele2.pstyle(prefixDash+"label").value;if("yes"===ele2.pstyle("text-events").strValue&&text4){var lx=preprop(_p.rscratch,"labelX",prefix),ly=preprop(_p.rscratch,"labelY",prefix),theta=preprop(_p.rscratch,"labelAngle",prefix),ox=ele2.pstyle(prefixDash+"text-margin-x").pfValue,oy=ele2.pstyle(prefixDash+"text-margin-y").pfValue,lx1=bb.x1-th-ox,lx2=bb.x2+th-ox,ly1=bb.y1-th-oy,ly2=bb.y2+th-oy;if(theta){var cos3=Math.cos(theta),sin3=Math.sin(theta),rotate2=__name(function(x6,y7){return{x:(x6-=lx)*cos3-(y7-=ly)*sin3+lx,y:x6*sin3+y7*cos3+ly}},"rotate"),px1y1=rotate2(lx1,ly1),px1y2=rotate2(lx1,ly2),px2y1=rotate2(lx2,ly1),px2y2=rotate2(lx2,ly2),points=[px1y1.x+ox,px1y1.y+oy,px2y1.x+ox,px2y1.y+oy,px2y2.x+ox,px2y2.y+oy,px1y2.x+ox,px1y2.y+oy];if(pointInsidePolygonPoints(x5,y6,points))return addEle(ele2),!0}else if(inBoundingBox(bb,x5,y6))return addEle(ele2),!0}}interactiveElementsOnly&&(eles=eles.interactive),__name(addEle,"addEle"),__name(checkNode,"checkNode"),__name(checkEdge,"checkEdge"),__name(preprop,"preprop"),__name(checkLabel,"checkLabel");for(var i2=eles.length-1;i2>=0;i2--){var ele=eles[i2];ele.isNode()?checkNode(ele)||checkLabel(ele):checkEdge(ele)||checkLabel(ele)||checkLabel(ele,"source")||checkLabel(ele,"target")}return near},BRp$e.getAllInBox=function(x1,y1,x22,y22){var eles=this.getCachedZSortedEles().interactive,labelThreshold=2/this.cy.zoom(),box=[],x1c=Math.min(x1,x22),x2c=Math.max(x1,x22),y1c=Math.min(y1,y22),y2c=Math.max(y1,y22),boxBb=makeBoundingBox({x1:x1=x1c,y1:y1=y1c,x2:x22=x2c,y2:y22=y2c}),selectionBox=[{x:boxBb.x1,y:boxBb.y1},{x:boxBb.x2,y:boxBb.y1},{x:boxBb.x2,y:boxBb.y2},{x:boxBb.x1,y:boxBb.y2}],boxEdges=[[selectionBox[0],selectionBox[1]],[selectionBox[1],selectionBox[2]],[selectionBox[2],selectionBox[3]],[selectionBox[3],selectionBox[0]]];function preprop(obj,name,pre){return getPrefixedProperty(obj,name,pre)}function getRotatedLabelBox(ele2,prefix){var _p2=ele2._private,th=labelThreshold;ele2.boundingBox();var bb=_p2.labelBounds.main;if(!bb)return null;var lx=preprop(_p2.rscratch,"labelX",prefix),ly=preprop(_p2.rscratch,"labelY",prefix),theta=preprop(_p2.rscratch,"labelAngle",prefix),ox=ele2.pstyle("text-margin-x").pfValue,oy=ele2.pstyle("text-margin-y").pfValue,lx1=bb.x1-th-ox,lx2=bb.x2+th-ox,ly1=bb.y1-th-oy,ly2=bb.y2+th-oy;if(theta){var cos3=Math.cos(theta),sin3=Math.sin(theta),rotate2=__name(function(x5,y6){return{x:(x5-=lx)*cos3-(y6-=ly)*sin3+lx,y:x5*sin3+y6*cos3+ly}},"rotate");return[rotate2(lx1,ly1),rotate2(lx2,ly1),rotate2(lx2,ly2),rotate2(lx1,ly2)]}return[{x:lx1,y:ly1},{x:lx2,y:ly1},{x:lx2,y:ly2},{x:lx1,y:ly2}]}function doLinesIntersect(p1,p22,q1,q22){function ccw(a2,b4,c3){return(c3.y-a2.y)*(b4.x-a2.x)>(b4.y-a2.y)*(c3.x-a2.x)}return __name(ccw,"ccw"),ccw(p1,q1,q22)!==ccw(p22,q1,q22)&&ccw(p1,p22,q1)!==ccw(p1,p22,q22)}__name(preprop,"preprop"),__name(getRotatedLabelBox,"getRotatedLabelBox"),__name(doLinesIntersect,"doLinesIntersect");for(var e3=0;e3<eles.length;e3++){var ele=eles[e3];if(ele.isNode()){var node2=ele,textEvents="yes"===node2.pstyle("text-events").strValue,nodeBoxSelectMode=node2.pstyle("box-selection").strValue,labelBoxSelectEnabled="yes"===node2.pstyle("box-select-labels").strValue;if("none"===nodeBoxSelectMode)continue;var includeLabels=("overlap"===nodeBoxSelectMode||labelBoxSelectEnabled)&&textEvents,nodeBb=node2.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:includeLabels});if("contain"===nodeBoxSelectMode){var selected=!1;if(labelBoxSelectEnabled&&textEvents){var rotatedLabelBox=getRotatedLabelBox(node2);rotatedLabelBox&&satPolygonIntersection(rotatedLabelBox,selectionBox)&&(box.push(node2),selected=!0)}!selected&&boundingBoxInBoundingBox(boxBb,nodeBb)&&box.push(node2)}else if("overlap"===nodeBoxSelectMode&&boundingBoxesIntersect(boxBb,nodeBb)){var nodeBodyBb=node2.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(satPolygonIntersection([{x:nodeBodyBb.x1,y:nodeBodyBb.y1},{x:nodeBodyBb.x2,y:nodeBodyBb.y1},{x:nodeBodyBb.x2,y:nodeBodyBb.y2},{x:nodeBodyBb.x1,y:nodeBodyBb.y2}],selectionBox))box.push(node2);else{var _rotatedLabelBox=getRotatedLabelBox(node2);_rotatedLabelBox&&satPolygonIntersection(_rotatedLabelBox,selectionBox)&&box.push(node2)}}}else{var edge=ele,_p=edge._private,rs=_p.rscratch,edgeBoxSelectMode=edge.pstyle("box-selection").strValue;if("none"===edgeBoxSelectMode)continue;if("contain"===edgeBoxSelectMode){if(null!=rs.startX&&null!=rs.startY&&!inBoundingBox(boxBb,rs.startX,rs.startY))continue;if(null!=rs.endX&&null!=rs.endY&&!inBoundingBox(boxBb,rs.endX,rs.endY))continue;if("bezier"===rs.edgeType||"multibezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType||"segments"===rs.edgeType||"haystack"===rs.edgeType){for(var pts2=_p.rstyle.bezierPts||_p.rstyle.linePts||_p.rstyle.haystackPts,allInside=!0,i2=0;i2<pts2.length;i2++)if(!pointInBoundingBox(boxBb,pts2[i2])){allInside=!1;break}allInside&&box.push(edge)}else"straight"===rs.edgeType&&box.push(edge)}else if("overlap"===edgeBoxSelectMode){var _selected=!1;if(null!=rs.startX&&null!=rs.startY&&null!=rs.endX&&null!=rs.endY&&(inBoundingBox(boxBb,rs.startX,rs.startY)||inBoundingBox(boxBb,rs.endX,rs.endY)))box.push(edge),_selected=!0;else if(!_selected&&"haystack"===rs.edgeType)for(var haystackPts=_p.rstyle.haystackPts,_i=0;_i<haystackPts.length;_i++)if(pointInBoundingBox(boxBb,haystackPts[_i])){box.push(edge),_selected=!0;break}if(!_selected){var _pts=_p.rstyle.bezierPts||_p.rstyle.linePts||_p.rstyle.haystackPts;if((!_pts||_pts.length<2)&&"straight"===rs.edgeType&&null!=rs.startX&&null!=rs.startY&&null!=rs.endX&&null!=rs.endY&&(_pts=[{x:rs.startX,y:rs.startY},{x:rs.endX,y:rs.endY}]),!_pts||_pts.length<2)continue;for(var _i2=0;_i2<_pts.length-1;_i2++){for(var segStart=_pts[_i2],segEnd=_pts[_i2+1],b3=0;b3<boxEdges.length;b3++){var _boxEdges$b=_slicedToArray(boxEdges[b3],2);if(doLinesIntersect(segStart,segEnd,_boxEdges$b[0],_boxEdges$b[1])){box.push(edge),_selected=!0;break}}if(_selected)break}}}}}return box},(BRp$d={}).calculateArrowAngles=function(edge){var dispX,dispY,startX2,startY2,endX,endY,rs=edge._private.rscratch,isHaystack="haystack"===rs.edgeType,isBezier="bezier"===rs.edgeType,isMultibezier="multibezier"===rs.edgeType,isSegments="segments"===rs.edgeType,isCompound="compound"===rs.edgeType,isSelf="self"===rs.edgeType;if(isHaystack?(startX2=rs.haystackPts[0],startY2=rs.haystackPts[1],endX=rs.haystackPts[2],endY=rs.haystackPts[3]):(startX2=rs.arrowStartX,startY2=rs.arrowStartY,endX=rs.arrowEndX,endY=rs.arrowEndY),midX=rs.midX,midY=rs.midY,isSegments)dispX=startX2-rs.segpts[0],dispY=startY2-rs.segpts[1];else if(isMultibezier||isCompound||isSelf||isBezier){var pts2=rs.allpts;dispX=startX2-qbezierAt(pts2[0],pts2[2],pts2[4],.1),dispY=startY2-qbezierAt(pts2[1],pts2[3],pts2[5],.1)}else dispX=startX2-midX,dispY=startY2-midY;rs.srcArrowAngle=getAngleFromDisp(dispX,dispY);var midX=rs.midX,midY=rs.midY;if(isHaystack&&(midX=(startX2+endX)/2,midY=(startY2+endY)/2),dispX=endX-startX2,dispY=endY-startY2,isSegments)if((pts2=rs.allpts).length/2%2==0){var i1=(i2=pts2.length/2)-2;dispX=pts2[i2]-pts2[i1],dispY=pts2[i2+1]-pts2[i1+1]}else if(rs.isRound)dispX=rs.midVector[1],dispY=-rs.midVector[0];else{i1=(i2=pts2.length/2-1)-2;dispX=pts2[i2]-pts2[i1],dispY=pts2[i2+1]-pts2[i1+1]}else if(isMultibezier||isCompound||isSelf){var bp0x,bp0y,bp1x,bp1y,pts2=rs.allpts;if(rs.ctrlpts.length/2%2==0){var p1=(ic=(p0=pts2.length/2-1)+2)+2;bp0x=qbezierAt(pts2[p0],pts2[ic],pts2[p1],0),bp0y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],0),bp1x=qbezierAt(pts2[p0],pts2[ic],pts2[p1],1e-4),bp1y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],1e-4)}else{var ic,p0;p1=(ic=pts2.length/2-1)+2;bp0x=qbezierAt(pts2[p0=ic-2],pts2[ic],pts2[p1],.4999),bp0y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],.4999),bp1x=qbezierAt(pts2[p0],pts2[ic],pts2[p1],.5),bp1y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],.5)}dispX=bp1x-bp0x,dispY=bp1y-bp0y}if(rs.midtgtArrowAngle=getAngleFromDisp(dispX,dispY),rs.midDispX=dispX,rs.midDispY=dispY,dispX*=-1,dispY*=-1,isSegments)if((pts2=rs.allpts).length/2%2==0);else if(!rs.isRound){var i2,i3=(i2=pts2.length/2-1)+2;dispX=-(pts2[i3]-pts2[i2]),dispY=-(pts2[i3+1]-pts2[i2+1])}if(rs.midsrcArrowAngle=getAngleFromDisp(dispX,dispY),isSegments)dispX=endX-rs.segpts[rs.segpts.length-2],dispY=endY-rs.segpts[rs.segpts.length-1];else if(isMultibezier||isCompound||isSelf||isBezier){var l4=(pts2=rs.allpts).length;dispX=endX-qbezierAt(pts2[l4-6],pts2[l4-4],pts2[l4-2],.9),dispY=endY-qbezierAt(pts2[l4-5],pts2[l4-3],pts2[l4-1],.9)}else dispX=endX-midX,dispY=endY-midY;rs.tgtArrowAngle=getAngleFromDisp(dispX,dispY)},BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(edgeWidth,scale2){var cache3=this.arrowWidthCache=this.arrowWidthCache||{},cachedVal=cache3[edgeWidth+", "+scale2];return cachedVal||(cachedVal=Math.max(Math.pow(13.37*edgeWidth,.9),29)*scale2,cache3[edgeWidth+", "+scale2]=cachedVal,cachedVal)},v1={},v22={},asVec=__name(function(p3,pp,v3){v3.x=pp.x-p3.x,v3.y=pp.y-p3.y,v3.len=Math.sqrt(v3.x*v3.x+v3.y*v3.y),v3.nx=v3.x/v3.len,v3.ny=v3.y/v3.len,v3.ang=Math.atan2(v3.ny,v3.nx)},"asVec"),invertVec=__name(function(originalV,invertedV){invertedV.x=-1*originalV.x,invertedV.y=-1*originalV.y,invertedV.nx=-1*originalV.nx,invertedV.ny=-1*originalV.ny,invertedV.ang=originalV.ang>0?-(Math.PI-originalV.ang):Math.PI+originalV.ang},"invertVec"),calcCornerArc=__name(function(previousPoint,currentPoint,nextPoint,radiusMax,isArcRadius){if(previousPoint!==lastPoint?asVec(currentPoint,previousPoint,v1):invertVec(v22,v1),asVec(currentPoint,nextPoint,v22),sinA=v1.nx*v22.ny-v1.ny*v22.nx,sinA90=v1.nx*v22.nx-v1.ny*-v22.ny,angle=Math.asin(Math.max(-1,Math.min(1,sinA))),Math.abs(angle)<1e-6)return x3=currentPoint.x,y4=currentPoint.y,void(cRadius=radius=0);radDirection=1,drawDirection=!1,sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),radius=void 0!==currentPoint.radius?currentPoint.radius:radiusMax,halfAngle=angle/2,limit=Math.min(v1.len/2,v22.len/2),isArcRadius?(lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle)))>limit?(lenOut=limit,cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius:(lenOut=Math.min(limit,radius),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))),stopX=currentPoint.x+v22.nx*lenOut,stopY=currentPoint.y+v22.ny*lenOut,x3=stopX-v22.ny*cRadius*radDirection,y4=stopY+v22.nx*cRadius*radDirection,startX=currentPoint.x+v1.nx*lenOut,startY=currentPoint.y+v1.ny*lenOut,lastPoint=currentPoint},"calcCornerArc"),__name(drawPreparedRoundCorner,"drawPreparedRoundCorner"),__name(getRoundCorner,"getRoundCorner"),AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L=Math.sqrt(.02),(BRp$c={}).findMidptPtsEtc=function(edge,pairInfo){var midptPts,posPts=pairInfo.posPts,intersectionPts=pairInfo.intersectionPts,vectorNormInverse=pairInfo.vectorNormInverse,srcManEndpt=edge.pstyle("source-endpoint"),tgtManEndpt=edge.pstyle("target-endpoint"),haveManualEndPts=null!=srcManEndpt.units&&null!=tgtManEndpt.units,recalcVectorNormInverse=__name(function(x12,y12,x23,y23){var dy=y23-y12,dx=x23-x12,l4=Math.sqrt(dx*dx+dy*dy);return{x:-dy/l4,y:dx/l4}},"recalcVectorNormInverse");switch(edge.pstyle("edge-distances").value){case"node-position":midptPts=posPts;break;case"intersection":midptPts=intersectionPts;break;case"endpoints":if(haveManualEndPts){var _this$manualEndptToPx2=_slicedToArray(this.manualEndptToPx(edge.source()[0],srcManEndpt),2),x1=_this$manualEndptToPx2[0],y1=_this$manualEndptToPx2[1],_this$manualEndptToPx4=_slicedToArray(this.manualEndptToPx(edge.target()[0],tgtManEndpt),2),x22=_this$manualEndptToPx4[0],y22=_this$manualEndptToPx4[1],endPts={x1:x1,y1:y1,x2:x22,y2:y22};vectorNormInverse=recalcVectorNormInverse(x1,y1,x22,y22),midptPts=endPts}else warn("Edge ".concat(edge.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),midptPts=intersectionPts}return{midptPts:midptPts,vectorNormInverse:vectorNormInverse}},BRp$c.findHaystackPoints=function(edges3){for(var i2=0;i2<edges3.length;i2++){var edge=edges3[i2],_p=edge._private,rs=_p.rscratch;if(!rs.haystack){var angle2=2*Math.random()*Math.PI;rs.source={x:Math.cos(angle2),y:Math.sin(angle2)},angle2=2*Math.random()*Math.PI,rs.target={x:Math.cos(angle2),y:Math.sin(angle2)}}var src=_p.source,tgt=_p.target,srcPos=src.position(),tgtPos=tgt.position(),srcW=src.width(),tgtW=tgt.width(),srcH=src.height(),tgtH=tgt.height(),halfRadius=edge.pstyle("haystack-radius").value/2;rs.haystackPts=rs.allpts=[rs.source.x*srcW*halfRadius+srcPos.x,rs.source.y*srcH*halfRadius+srcPos.y,rs.target.x*tgtW*halfRadius+tgtPos.x,rs.target.y*tgtH*halfRadius+tgtPos.y],rs.midX=(rs.allpts[0]+rs.allpts[2])/2,rs.midY=(rs.allpts[1]+rs.allpts[3])/2,rs.edgeType="haystack",rs.haystack=!0,this.storeEdgeProjections(edge),this.calculateArrowAngles(edge),this.recalculateEdgeLabelProjections(edge),this.calculateLabelAngles(edge)}},BRp$c.findSegmentsPoints=function(edge,pairInfo){var rs=edge._private.rscratch,segmentWs=edge.pstyle("segment-weights"),segmentDs=edge.pstyle("segment-distances"),segmentRs=edge.pstyle("segment-radii"),segmentTs=edge.pstyle("radius-type"),segmentsN=Math.min(segmentWs.pfValue.length,segmentDs.pfValue.length),lastRadius=segmentRs.pfValue[segmentRs.pfValue.length-1],lastRadiusType=segmentTs.pfValue[segmentTs.pfValue.length-1];rs.edgeType="segments",rs.segpts=[],rs.radii=[],rs.isArcRadius=[];for(var s2=0;s2<segmentsN;s2++){var w4=segmentWs.pfValue[s2],d3=segmentDs.pfValue[s2],w1=1-w4,w22=w4,_this$findMidptPtsEtc=this.findMidptPtsEtc(edge,pairInfo),midptPts=_this$findMidptPtsEtc.midptPts,vectorNormInverse=_this$findMidptPtsEtc.vectorNormInverse,adjustedMidpt={x:midptPts.x1*w1+midptPts.x2*w22,y:midptPts.y1*w1+midptPts.y2*w22};rs.segpts.push(adjustedMidpt.x+vectorNormInverse.x*d3,adjustedMidpt.y+vectorNormInverse.y*d3),rs.radii.push(void 0!==segmentRs.pfValue[s2]?segmentRs.pfValue[s2]:lastRadius),rs.isArcRadius.push("arc-radius"===(void 0!==segmentTs.pfValue[s2]?segmentTs.pfValue[s2]:lastRadiusType))}},BRp$c.findLoopPoints=function(edge,pairInfo,i2,edgeIsUnbundled){var rs=edge._private.rscratch,dirCounts=pairInfo.dirCounts,srcPos=pairInfo.srcPos,ctrlptDists=edge.pstyle("control-point-distances"),ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,loopDir=edge.pstyle("loop-direction").pfValue,loopSwp=edge.pstyle("loop-sweep").pfValue,stepSize=edge.pstyle("control-point-step-size").pfValue;rs.edgeType="self";var j3=i2,loopDist=stepSize;edgeIsUnbundled&&(j3=0,loopDist=ctrlptDist);var loopAngle=loopDir-Math.PI/2,outAngle=loopAngle-loopSwp/2,inAngle=loopAngle+loopSwp/2,dc=String(loopDir+"_"+loopSwp);j3=void 0===dirCounts[dc]?dirCounts[dc]=0:++dirCounts[dc],rs.ctrlpts=[srcPos.x+1.4*Math.cos(outAngle)*loopDist*(j3/3+1),srcPos.y+1.4*Math.sin(outAngle)*loopDist*(j3/3+1),srcPos.x+1.4*Math.cos(inAngle)*loopDist*(j3/3+1),srcPos.y+1.4*Math.sin(inAngle)*loopDist*(j3/3+1)]},BRp$c.findCompoundLoopPoints=function(edge,pairInfo,i2,edgeIsUnbundled){var rs=edge._private.rscratch;rs.edgeType="compound";var srcPos=pairInfo.srcPos,tgtPos=pairInfo.tgtPos,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,stepSize=edge.pstyle("control-point-step-size").pfValue,ctrlptDists=edge.pstyle("control-point-distances"),ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,j3=i2,loopDist=stepSize;edgeIsUnbundled&&(j3=0,loopDist=ctrlptDist);var loopaPos={x:srcPos.x-srcW/2,y:srcPos.y-srcH/2},loopbPos={x:tgtPos.x-tgtW/2,y:tgtPos.y-tgtH/2},loopPos={x:Math.min(loopaPos.x,loopbPos.x),y:Math.min(loopaPos.y,loopbPos.y)},compoundStretchA=Math.max(.5,Math.log(.01*srcW)),compoundStretchB=Math.max(.5,Math.log(.01*tgtW));rs.ctrlpts=[loopPos.x,loopPos.y-(1+Math.pow(50,1.12)/100)*loopDist*(j3/3+1)*compoundStretchA,loopPos.x-(1+Math.pow(50,1.12)/100)*loopDist*(j3/3+1)*compoundStretchB,loopPos.y]},BRp$c.findStraightEdgePoints=function(edge){edge._private.rscratch.edgeType="straight"},BRp$c.findBezierPoints=function(edge,pairInfo,i2,edgeIsUnbundled,edgeIsSwapped){var rs=edge._private.rscratch,stepSize=edge.pstyle("control-point-step-size").pfValue,ctrlptDists=edge.pstyle("control-point-distances"),ctrlptWs=edge.pstyle("control-point-weights"),bezierN=ctrlptDists&&ctrlptWs?Math.min(ctrlptDists.value.length,ctrlptWs.value.length):1,ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,ctrlptWeight=ctrlptWs.value[0],multi=edgeIsUnbundled;rs.edgeType=multi?"multibezier":"bezier",rs.ctrlpts=[];for(var b3=0;b3<bezierN;b3++){var normctrlptDist=(.5-pairInfo.eles.length/2+i2)*stepSize*(edgeIsSwapped?-1:1),manctrlptDist=void 0,sign2=signum(normctrlptDist);multi&&(ctrlptDist=ctrlptDists?ctrlptDists.pfValue[b3]:stepSize,ctrlptWeight=ctrlptWs.value[b3]);var distanceFromMidpoint=void 0!==(manctrlptDist=edgeIsUnbundled?ctrlptDist:void 0!==ctrlptDist?sign2*ctrlptDist:void 0)?manctrlptDist:normctrlptDist,w1=1-ctrlptWeight,w22=ctrlptWeight,_this$findMidptPtsEtc2=this.findMidptPtsEtc(edge,pairInfo),midptPts=_this$findMidptPtsEtc2.midptPts,vectorNormInverse=_this$findMidptPtsEtc2.vectorNormInverse,adjustedMidpt={x:midptPts.x1*w1+midptPts.x2*w22,y:midptPts.y1*w1+midptPts.y2*w22};rs.ctrlpts.push(adjustedMidpt.x+vectorNormInverse.x*distanceFromMidpoint,adjustedMidpt.y+vectorNormInverse.y*distanceFromMidpoint)}},BRp$c.findTaxiPoints=function(edge,pairInfo){var rs=edge._private.rscratch;rs.edgeType="segments";var posPts=pairInfo.posPts,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,dIncludesNodeBody="node-position"!==edge.pstyle("edge-distances").value,taxiDir=edge.pstyle("taxi-direction").value,rawTaxiDir=taxiDir,taxiTurn=edge.pstyle("taxi-turn"),turnIsPercent="%"===taxiTurn.units,taxiTurnPfVal=taxiTurn.pfValue,turnIsNegative=taxiTurnPfVal<0,minD=edge.pstyle("taxi-turn-min-distance").pfValue,dw=dIncludesNodeBody?(srcW+tgtW)/2:0,dh=dIncludesNodeBody?(srcH+tgtH)/2:0,pdx=posPts.x2-posPts.x1,pdy=posPts.y2-posPts.y1,subDWH=__name(function(dxy,dwh){return dxy>0?Math.max(dxy-dwh,0):Math.min(dxy+dwh,0)},"subDWH"),dx=subDWH(pdx,dw),dy=subDWH(pdy,dh),isExplicitDir=!1;"auto"===rawTaxiDir?taxiDir=Math.abs(dx)>Math.abs(dy)?"horizontal":"vertical":"upward"===rawTaxiDir||"downward"===rawTaxiDir?(taxiDir="vertical",isExplicitDir=!0):"leftward"!==rawTaxiDir&&"rightward"!==rawTaxiDir||(taxiDir="horizontal",isExplicitDir=!0);var d3,isVert="vertical"===taxiDir,l4=isVert?dy:dx,pl=isVert?pdy:pdx,sgnL=signum(pl),forcedDir=!1;(isExplicitDir&&(turnIsPercent||turnIsNegative)||!("downward"===rawTaxiDir&&pl<0||"upward"===rawTaxiDir&&pl>0||"leftward"===rawTaxiDir&&pl>0||"rightward"===rawTaxiDir&&pl<0)||(l4=(sgnL*=-1)*Math.abs(l4),forcedDir=!0),turnIsPercent)?d3=(taxiTurnPfVal<0?1+taxiTurnPfVal:taxiTurnPfVal)*l4:d3=(taxiTurnPfVal<0?l4:0)+taxiTurnPfVal*sgnL;var getIsTooClose=__name(function(d4){return Math.abs(d4)<minD||Math.abs(d4)>=Math.abs(l4)},"getIsTooClose"),isTooCloseSrc=getIsTooClose(d3),isTooCloseTgt=getIsTooClose(Math.abs(l4)-Math.abs(d3));if((isTooCloseSrc||isTooCloseTgt)&&!forcedDir)if(isVert){var lShapeInsideSrc=Math.abs(pl)<=srcH/2,lShapeInsideTgt=Math.abs(pdx)<=tgtW/2;if(lShapeInsideSrc){var x5=(posPts.x1+posPts.x2)/2,y1=posPts.y1,y22=posPts.y2;rs.segpts=[x5,y1,x5,y22]}else if(lShapeInsideTgt){var y6=(posPts.y1+posPts.y2)/2,x1=posPts.x1,x22=posPts.x2;rs.segpts=[x1,y6,x22,y6]}else rs.segpts=[posPts.x1,posPts.y2]}else{var _lShapeInsideSrc=Math.abs(pl)<=srcW/2,_lShapeInsideTgt=Math.abs(pdy)<=tgtH/2;if(_lShapeInsideSrc){var _y=(posPts.y1+posPts.y2)/2,_x=posPts.x1,_x2=posPts.x2;rs.segpts=[_x,_y,_x2,_y]}else if(_lShapeInsideTgt){var _x3=(posPts.x1+posPts.x2)/2,_y2=posPts.y1,_y3=posPts.y2;rs.segpts=[_x3,_y2,_x3,_y3]}else rs.segpts=[posPts.x2,posPts.y1]}else if(isVert){var _y4=posPts.y1+d3+(dIncludesNodeBody?srcH/2*sgnL:0),_x4=posPts.x1,_x5=posPts.x2;rs.segpts=[_x4,_y4,_x5,_y4]}else{var _x6=posPts.x1+d3+(dIncludesNodeBody?srcW/2*sgnL:0),_y5=posPts.y1,_y6=posPts.y2;rs.segpts=[_x6,_y5,_x6,_y6]}if(rs.isRound){var radius2=edge.pstyle("taxi-radius").value,isArcRadius="arc-radius"===edge.pstyle("radius-type").value[0];rs.radii=new Array(rs.segpts.length/2).fill(radius2),rs.isArcRadius=new Array(rs.segpts.length/2).fill(isArcRadius)}},BRp$c.tryToCorrectInvalidPoints=function(edge,pairInfo){var rs=edge._private.rscratch;if("bezier"===rs.edgeType){var srcPos=pairInfo.srcPos,tgtPos=pairInfo.tgtPos,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,srcShape=pairInfo.srcShape,tgtShape=pairInfo.tgtShape,srcCornerRadius=pairInfo.srcCornerRadius,tgtCornerRadius=pairInfo.tgtCornerRadius,srcRs=pairInfo.srcRs,tgtRs=pairInfo.tgtRs,badStart=!number$1(rs.startX)||!number$1(rs.startY),badAStart=!number$1(rs.arrowStartX)||!number$1(rs.arrowStartY),badEnd=!number$1(rs.endX)||!number$1(rs.endY),badAEnd=!number$1(rs.arrowEndX)||!number$1(rs.arrowEndY),minCpADist=3*(this.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.arrowShapeWidth),startACpDist=dist({x:rs.ctrlpts[0],y:rs.ctrlpts[1]},{x:rs.startX,y:rs.startY}),closeStartACp=startACpDist<minCpADist,endACpDist=dist({x:rs.ctrlpts[0],y:rs.ctrlpts[1]},{x:rs.endX,y:rs.endY}),closeEndACp=endACpDist<minCpADist,overlapping=!1;if(badStart||badAStart||closeStartACp){overlapping=!0;var cpD={x:rs.ctrlpts[0]-srcPos.x,y:rs.ctrlpts[1]-srcPos.y},cpL=Math.sqrt(cpD.x*cpD.x+cpD.y*cpD.y),cpM={x:cpD.x/cpL,y:cpD.y/cpL},radius2=Math.max(srcW,srcH),cpProj={x:rs.ctrlpts[0]+2*cpM.x*radius2,y:rs.ctrlpts[1]+2*cpM.y*radius2},srcCtrlPtIntn=srcShape.intersectLine(srcPos.x,srcPos.y,srcW,srcH,cpProj.x,cpProj.y,0,srcCornerRadius,srcRs);closeStartACp?(rs.ctrlpts[0]=rs.ctrlpts[0]+cpM.x*(minCpADist-startACpDist),rs.ctrlpts[1]=rs.ctrlpts[1]+cpM.y*(minCpADist-startACpDist)):(rs.ctrlpts[0]=srcCtrlPtIntn[0]+cpM.x*minCpADist,rs.ctrlpts[1]=srcCtrlPtIntn[1]+cpM.y*minCpADist)}if(badEnd||badAEnd||closeEndACp){overlapping=!0;var _cpD={x:rs.ctrlpts[0]-tgtPos.x,y:rs.ctrlpts[1]-tgtPos.y},_cpL=Math.sqrt(_cpD.x*_cpD.x+_cpD.y*_cpD.y),_cpM={x:_cpD.x/_cpL,y:_cpD.y/_cpL},_radius=Math.max(srcW,srcH),_cpProj={x:rs.ctrlpts[0]+2*_cpM.x*_radius,y:rs.ctrlpts[1]+2*_cpM.y*_radius},tgtCtrlPtIntn=tgtShape.intersectLine(tgtPos.x,tgtPos.y,tgtW,tgtH,_cpProj.x,_cpProj.y,0,tgtCornerRadius,tgtRs);closeEndACp?(rs.ctrlpts[0]=rs.ctrlpts[0]+_cpM.x*(minCpADist-endACpDist),rs.ctrlpts[1]=rs.ctrlpts[1]+_cpM.y*(minCpADist-endACpDist)):(rs.ctrlpts[0]=tgtCtrlPtIntn[0]+_cpM.x*minCpADist,rs.ctrlpts[1]=tgtCtrlPtIntn[1]+_cpM.y*minCpADist)}overlapping&&this.findEndpoints(edge)}},BRp$c.storeAllpts=function(edge){var rs=edge._private.rscratch;if("multibezier"===rs.edgeType||"bezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType){rs.allpts=[],rs.allpts.push(rs.startX,rs.startY);for(var b3=0;b3+1<rs.ctrlpts.length;b3+=2)rs.allpts.push(rs.ctrlpts[b3],rs.ctrlpts[b3+1]),b3+3<rs.ctrlpts.length&&rs.allpts.push((rs.ctrlpts[b3]+rs.ctrlpts[b3+2])/2,(rs.ctrlpts[b3+1]+rs.ctrlpts[b3+3])/2);var m3;rs.allpts.push(rs.endX,rs.endY),rs.ctrlpts.length/2%2==0?(m3=rs.allpts.length/2-1,rs.midX=rs.allpts[m3],rs.midY=rs.allpts[m3+1]):(m3=rs.allpts.length/2-3,rs.midX=qbezierAt(rs.allpts[m3],rs.allpts[m3+2],rs.allpts[m3+4],.5),rs.midY=qbezierAt(rs.allpts[m3+1],rs.allpts[m3+3],rs.allpts[m3+5],.5))}else if("straight"===rs.edgeType)rs.allpts=[rs.startX,rs.startY,rs.endX,rs.endY],rs.midX=(rs.startX+rs.endX+rs.arrowStartX+rs.arrowEndX)/4,rs.midY=(rs.startY+rs.endY+rs.arrowStartY+rs.arrowEndY)/4;else if("segments"===rs.edgeType){if(rs.allpts=[],rs.allpts.push(rs.startX,rs.startY),rs.allpts.push.apply(rs.allpts,rs.segpts),rs.allpts.push(rs.endX,rs.endY),rs.isRound){rs.roundCorners=[];for(var i2=2;i2+3<rs.allpts.length;i2+=2){var radius2=rs.radii[i2/2-1],isArcRadius=rs.isArcRadius[i2/2-1];rs.roundCorners.push(getRoundCorner({x:rs.allpts[i2-2],y:rs.allpts[i2-1]},{x:rs.allpts[i2],y:rs.allpts[i2+1],radius:radius2},{x:rs.allpts[i2+2],y:rs.allpts[i2+3]},radius2,isArcRadius))}}if(rs.segpts.length%4==0){var i22=rs.segpts.length/2,i1=i22-2;rs.midX=(rs.segpts[i1]+rs.segpts[i22])/2,rs.midY=(rs.segpts[i1+1]+rs.segpts[i22+1])/2}else{var _i=rs.segpts.length/2-1;if(rs.isRound){var point8={x:rs.segpts[_i],y:rs.segpts[_i+1]},corner=rs.roundCorners[_i/2];if(0===corner.radius){var nextPoint={x:rs.segpts[_i+2],y:rs.segpts[_i+3]};rs.midX=point8.x,rs.midY=point8.y,rs.midVector=[point8.y-nextPoint.y,nextPoint.x-point8.x]}else{var v3=[point8.x-corner.cx,point8.y-corner.cy],factor=corner.radius/Math.sqrt(Math.pow(v3[0],2)+Math.pow(v3[1],2));v3=v3.map(function(c3){return c3*factor}),rs.midX=corner.cx+v3[0],rs.midY=corner.cy+v3[1],rs.midVector=v3}}else rs.midX=rs.segpts[_i],rs.midY=rs.segpts[_i+1]}}},BRp$c.checkForInvalidEdgeWarning=function(edge){var rs=edge[0]._private.rscratch;rs.nodesOverlap||number$1(rs.startX)&&number$1(rs.startY)&&number$1(rs.endX)&&number$1(rs.endY)?rs.loggedErr=!1:rs.loggedErr||(rs.loggedErr=!0,warn("Edge `"+edge.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},BRp$c.findEdgeControlPoints=function(edges3){var _this=this;if(edges3&&0!==edges3.length){for(var r2=this,hasCompounds=r2.cy.hasCompoundNodes(),hashTable=new Map$1,getKey3=__name(function(pairId2,edgeIsUnbundled2){return[].concat(_toConsumableArray(pairId2),[edgeIsUnbundled2?1:0]).join("-")},"getKey"),pairIds=[],haystackEdges=[],i2=0;i2<edges3.length;i2++){var edge=edges3[i2],_p=edge._private,curveStyle=edge.pstyle("curve-style").value;if(!edge.removed()&&edge.takesUpSpace())if("haystack"!==curveStyle){var edgeIsUnbundled="unbundled-bezier"===curveStyle||endsWith(curveStyle,"segments")||"straight"===curveStyle||"straight-triangle"===curveStyle||endsWith(curveStyle,"taxi"),edgeIsBezier="unbundled-bezier"===curveStyle||"bezier"===curveStyle,src=_p.source,tgt=_p.target,pairId=[src.poolIndex(),tgt.poolIndex()].sort(),key=getKey3(pairId,edgeIsUnbundled),tableEntry=hashTable.get(key);null==tableEntry&&(tableEntry={eles:[]},pairIds.push({pairId:pairId,edgeIsUnbundled:edgeIsUnbundled}),hashTable.set(key,tableEntry)),tableEntry.eles.push(edge),edgeIsUnbundled&&(tableEntry.hasUnbundled=!0),edgeIsBezier&&(tableEntry.hasBezier=!0)}else haystackEdges.push(edge)}for(var _loop=__name(function(){var swappedpairInfo,_pairIds$p=pairIds[p3],pairId2=_pairIds$p.pairId,edgeIsUnbundled2=_pairIds$p.edgeIsUnbundled,key2=getKey3(pairId2,edgeIsUnbundled2),pairInfo=hashTable.get(key2);if(!pairInfo.hasUnbundled){var pllEdges=pairInfo.eles[0].parallelEdges().filter(function(e3){return e3.isBundledBezier()});clearArray(pairInfo.eles),pllEdges.forEach(function(edge2){return pairInfo.eles.push(edge2)}),pairInfo.eles.sort(function(edge1,edge2){return edge1.poolIndex()-edge2.poolIndex()})}var firstEdge=pairInfo.eles[0],src2=firstEdge.source(),tgt2=firstEdge.target();if(src2.poolIndex()>tgt2.poolIndex()){var temp=src2;src2=tgt2,tgt2=temp}var srcPos=pairInfo.srcPos=src2.position(),tgtPos=pairInfo.tgtPos=tgt2.position(),srcW=pairInfo.srcW=src2.outerWidth(),srcH=pairInfo.srcH=src2.outerHeight(),tgtW=pairInfo.tgtW=tgt2.outerWidth(),tgtH=pairInfo.tgtH=tgt2.outerHeight(),srcShape=pairInfo.srcShape=r2.nodeShapes[_this.getNodeShape(src2)],tgtShape=pairInfo.tgtShape=r2.nodeShapes[_this.getNodeShape(tgt2)],srcCornerRadius=pairInfo.srcCornerRadius="auto"===src2.pstyle("corner-radius").value?"auto":src2.pstyle("corner-radius").pfValue,tgtCornerRadius=pairInfo.tgtCornerRadius="auto"===tgt2.pstyle("corner-radius").value?"auto":tgt2.pstyle("corner-radius").pfValue,tgtRs=pairInfo.tgtRs=tgt2._private.rscratch,srcRs=pairInfo.srcRs=src2._private.rscratch;pairInfo.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _i2=0;_i2<pairInfo.eles.length;_i2++){var _edge=pairInfo.eles[_i2],rs=_edge[0]._private.rscratch,_curveStyle=_edge.pstyle("curve-style").value,_edgeIsUnbundled="unbundled-bezier"===_curveStyle||endsWith(_curveStyle,"segments")||endsWith(_curveStyle,"taxi"),edgeIsSwapped=!src2.same(_edge.source());if(!pairInfo.calculatedIntersection&&src2!==tgt2&&(pairInfo.hasBezier||pairInfo.hasUnbundled)){pairInfo.calculatedIntersection=!0;var srcOutside=srcShape.intersectLine(srcPos.x,srcPos.y,srcW,srcH,tgtPos.x,tgtPos.y,0,srcCornerRadius,srcRs),srcIntn=pairInfo.srcIntn=srcOutside,tgtOutside=tgtShape.intersectLine(tgtPos.x,tgtPos.y,tgtW,tgtH,srcPos.x,srcPos.y,0,tgtCornerRadius,tgtRs),tgtIntn=pairInfo.tgtIntn=tgtOutside,intersectionPts=pairInfo.intersectionPts={x1:srcOutside[0],x2:tgtOutside[0],y1:srcOutside[1],y2:tgtOutside[1]},posPts=pairInfo.posPts={x1:srcPos.x,x2:tgtPos.x,y1:srcPos.y,y2:tgtPos.y},dy=tgtOutside[1]-srcOutside[1],dx=tgtOutside[0]-srcOutside[0],l4=Math.sqrt(dx*dx+dy*dy);number$1(l4)&&l4>=AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L||(l4=Math.sqrt(Math.max(dx*dx,.01)+Math.max(dy*dy,.01)));var vector=pairInfo.vector={x:dx,y:dy},vectorNorm=pairInfo.vectorNorm={x:vector.x/l4,y:vector.y/l4},vectorNormInverse={x:-vectorNorm.y,y:vectorNorm.x};pairInfo.nodesOverlap=!number$1(l4)||tgtShape.checkPoint(srcOutside[0],srcOutside[1],0,tgtW,tgtH,tgtPos.x,tgtPos.y,tgtCornerRadius,tgtRs)||srcShape.checkPoint(tgtOutside[0],tgtOutside[1],0,srcW,srcH,srcPos.x,srcPos.y,srcCornerRadius,srcRs),pairInfo.vectorNormInverse=vectorNormInverse,swappedpairInfo={nodesOverlap:pairInfo.nodesOverlap,dirCounts:pairInfo.dirCounts,calculatedIntersection:!0,hasBezier:pairInfo.hasBezier,hasUnbundled:pairInfo.hasUnbundled,eles:pairInfo.eles,srcPos:tgtPos,srcRs:tgtRs,tgtPos:srcPos,tgtRs:srcRs,srcW:tgtW,srcH:tgtH,tgtW:srcW,tgtH:srcH,srcIntn:tgtIntn,tgtIntn:srcIntn,srcShape:tgtShape,tgtShape:srcShape,posPts:{x1:posPts.x2,y1:posPts.y2,x2:posPts.x1,y2:posPts.y1},intersectionPts:{x1:intersectionPts.x2,y1:intersectionPts.y2,x2:intersectionPts.x1,y2:intersectionPts.y1},vector:{x:-vector.x,y:-vector.y},vectorNorm:{x:-vectorNorm.x,y:-vectorNorm.y},vectorNormInverse:{x:-vectorNormInverse.x,y:-vectorNormInverse.y}}}var passedPairInfo=edgeIsSwapped?swappedpairInfo:pairInfo;rs.nodesOverlap=passedPairInfo.nodesOverlap,rs.srcIntn=passedPairInfo.srcIntn,rs.tgtIntn=passedPairInfo.tgtIntn,rs.isRound=_curveStyle.startsWith("round"),hasCompounds&&(src2.isParent()||src2.isChild()||tgt2.isParent()||tgt2.isChild())&&(src2.parents().anySame(tgt2)||tgt2.parents().anySame(src2)||src2.same(tgt2)&&src2.isParent())?_this.findCompoundLoopPoints(_edge,passedPairInfo,_i2,_edgeIsUnbundled):src2===tgt2?_this.findLoopPoints(_edge,passedPairInfo,_i2,_edgeIsUnbundled):_curveStyle.endsWith("segments")?_this.findSegmentsPoints(_edge,passedPairInfo):_curveStyle.endsWith("taxi")?_this.findTaxiPoints(_edge,passedPairInfo):"straight"===_curveStyle||!_edgeIsUnbundled&&pairInfo.eles.length%2==1&&_i2===Math.floor(pairInfo.eles.length/2)?_this.findStraightEdgePoints(_edge):_this.findBezierPoints(_edge,passedPairInfo,_i2,_edgeIsUnbundled,edgeIsSwapped),_this.findEndpoints(_edge),_this.tryToCorrectInvalidPoints(_edge,passedPairInfo),_this.checkForInvalidEdgeWarning(_edge),_this.storeAllpts(_edge),_this.storeEdgeProjections(_edge),_this.calculateArrowAngles(_edge),_this.recalculateEdgeLabelProjections(_edge),_this.calculateLabelAngles(_edge)}},"_loop"),p3=0;p3<pairIds.length;p3++)_loop();this.findHaystackPoints(haystackEdges)}},__name(getPts,"getPts"),BRp$c.getSegmentPoints=function(edge){var rs=edge[0]._private.rscratch;if(this.recalculateRenderedStyle(edge),"segments"===rs.edgeType)return getPts(rs.segpts)},BRp$c.getControlPoints=function(edge){var rs=edge[0]._private.rscratch;this.recalculateRenderedStyle(edge);var type3=rs.edgeType;if("bezier"===type3||"multibezier"===type3||"self"===type3||"compound"===type3)return getPts(rs.ctrlpts)},BRp$c.getEdgeMidpoint=function(edge){var rs=edge[0]._private.rscratch;return this.recalculateRenderedStyle(edge),{x:rs.midX,y:rs.midY}},(BRp$b={}).manualEndptToPx=function(node2,prop){var npos=node2.position(),w4=node2.outerWidth(),h3=node2.outerHeight(),rs=node2._private.rscratch;if(2===prop.value.length){var p3=[prop.pfValue[0],prop.pfValue[1]];return"%"===prop.units[0]&&(p3[0]=p3[0]*w4),"%"===prop.units[1]&&(p3[1]=p3[1]*h3),p3[0]+=npos.x,p3[1]+=npos.y,p3}var angle2=prop.pfValue[0];angle2=-Math.PI/2+angle2;var l4=2*Math.max(w4,h3),_p=[npos.x+Math.cos(angle2)*l4,npos.y+Math.sin(angle2)*l4];return this.nodeShapes[this.getNodeShape(node2)].intersectLine(npos.x,npos.y,w4,h3,_p[0],_p[1],0,"auto"===node2.pstyle("corner-radius").value?"auto":node2.pstyle("corner-radius").pfValue,rs)},BRp$b.findEndpoints=function(edge){var _ref,_tgtManEndpt$pfValue,_ref2,_srcManEndpt$pfValue,intersect3,p1,p22,p1_i,p2_i,r2=this,source=edge.source()[0],target=edge.target()[0],srcPos=source.position(),tgtPos=target.position(),tgtArShape=edge.pstyle("target-arrow-shape").value,srcArShape=edge.pstyle("source-arrow-shape").value,tgtDist=edge.pstyle("target-distance-from-node").pfValue,srcDist=edge.pstyle("source-distance-from-node").pfValue,srcRs=source._private.rscratch,tgtRs=target._private.rscratch,curveStyle=edge.pstyle("curve-style").value,rs=edge._private.rscratch,et2=rs.edgeType,taxi=endsWith(curveStyle,"taxi"),self2="self"===et2||"compound"===et2,bezier="bezier"===et2||"multibezier"===et2||self2,multi="bezier"!==et2,lines="straight"===et2||"segments"===et2,segments="segments"===et2,hasEndpts=bezier||multi||lines,overrideEndpts=self2||taxi,srcManEndpt=edge.pstyle("source-endpoint"),srcManEndptVal=overrideEndpts?"outside-to-node":srcManEndpt.value,srcCornerRadius="auto"===source.pstyle("corner-radius").value?"auto":source.pstyle("corner-radius").pfValue,tgtManEndpt=edge.pstyle("target-endpoint"),tgtManEndptVal=overrideEndpts?"outside-to-node":tgtManEndpt.value,tgtCornerRadius="auto"===target.pstyle("corner-radius").value?"auto":target.pstyle("corner-radius").pfValue;rs.srcManEndpt=srcManEndpt,rs.tgtManEndpt=tgtManEndpt;var tgtManEndptPt=null!==(_ref=2===(null==tgtManEndpt||null===(_tgtManEndpt$pfValue=tgtManEndpt.pfValue)||void 0===_tgtManEndpt$pfValue?void 0:_tgtManEndpt$pfValue.length)?tgtManEndpt.pfValue:null)&&void 0!==_ref?_ref:[0,0],srcManEndptPt=null!==(_ref2=2===(null==srcManEndpt||null===(_srcManEndpt$pfValue=srcManEndpt.pfValue)||void 0===_srcManEndpt$pfValue?void 0:_srcManEndpt$pfValue.length)?srcManEndpt.pfValue:null)&&void 0!==_ref2?_ref2:[0,0];if(bezier){var cpStart=[rs.ctrlpts[0],rs.ctrlpts[1]];p1=multi?[rs.ctrlpts[rs.ctrlpts.length-2],rs.ctrlpts[rs.ctrlpts.length-1]]:cpStart,p22=cpStart}else if(lines){var srcArrowFromPt=segments?rs.segpts.slice(0,2):[tgtPos.x+tgtManEndptPt[0],tgtPos.y+tgtManEndptPt[1]];p1=segments?rs.segpts.slice(rs.segpts.length-2):[srcPos.x+srcManEndptPt[0],srcPos.y+srcManEndptPt[1]],p22=srcArrowFromPt}if("inside-to-node"===tgtManEndptVal)intersect3=[tgtPos.x,tgtPos.y];else if(tgtManEndpt.units)intersect3=this.manualEndptToPx(target,tgtManEndpt);else if("outside-to-line"===tgtManEndptVal)intersect3=rs.tgtIntn;else if("outside-to-node"===tgtManEndptVal||"outside-to-node-or-label"===tgtManEndptVal?p1_i=p1:"outside-to-line"!==tgtManEndptVal&&"outside-to-line-or-label"!==tgtManEndptVal||(p1_i=[srcPos.x,srcPos.y]),intersect3=r2.nodeShapes[this.getNodeShape(target)].intersectLine(tgtPos.x,tgtPos.y,target.outerWidth(),target.outerHeight(),p1_i[0],p1_i[1],0,tgtCornerRadius,tgtRs),"outside-to-node-or-label"===tgtManEndptVal||"outside-to-line-or-label"===tgtManEndptVal){var trs=target._private.rscratch,lw=trs.labelWidth,lh=trs.labelHeight,lx=trs.labelX,ly=trs.labelY,lw2=lw/2,lh2=lh/2,va=target.pstyle("text-valign").value;"top"===va?ly-=lh2:"bottom"===va&&(ly+=lh2);var ha=target.pstyle("text-halign").value;"left"===ha?lx-=lw2:"right"===ha&&(lx+=lw2);var labelIntersect=polygonIntersectLine(p1_i[0],p1_i[1],[lx-lw2,ly-lh2,lx+lw2,ly-lh2,lx+lw2,ly+lh2,lx-lw2,ly+lh2],tgtPos.x,tgtPos.y);if(labelIntersect.length>0){var refPt=srcPos,intSqdist=sqdist(refPt,array2point(intersect3)),labIntSqdist=sqdist(refPt,array2point(labelIntersect)),minSqDist=intSqdist;if(labIntSqdist<intSqdist&&(intersect3=labelIntersect,minSqDist=labIntSqdist),labelIntersect.length>2)sqdist(refPt,{x:labelIntersect[2],y:labelIntersect[3]})<minSqDist&&(intersect3=[labelIntersect[2],labelIntersect[3]])}}var arrowEnd=shortenIntersection(intersect3,p1,r2.arrowShapes[tgtArShape].spacing(edge)+tgtDist),edgeEnd=shortenIntersection(intersect3,p1,r2.arrowShapes[tgtArShape].gap(edge)+tgtDist);if(rs.endX=edgeEnd[0],rs.endY=edgeEnd[1],rs.arrowEndX=arrowEnd[0],rs.arrowEndY=arrowEnd[1],"inside-to-node"===srcManEndptVal)intersect3=[srcPos.x,srcPos.y];else if(srcManEndpt.units)intersect3=this.manualEndptToPx(source,srcManEndpt);else if("outside-to-line"===srcManEndptVal)intersect3=rs.srcIntn;else if("outside-to-node"===srcManEndptVal||"outside-to-node-or-label"===srcManEndptVal?p2_i=p22:"outside-to-line"!==srcManEndptVal&&"outside-to-line-or-label"!==srcManEndptVal||(p2_i=[tgtPos.x,tgtPos.y]),intersect3=r2.nodeShapes[this.getNodeShape(source)].intersectLine(srcPos.x,srcPos.y,source.outerWidth(),source.outerHeight(),p2_i[0],p2_i[1],0,srcCornerRadius,srcRs),"outside-to-node-or-label"===srcManEndptVal||"outside-to-line-or-label"===srcManEndptVal){var srs=source._private.rscratch,_lw=srs.labelWidth,_lh=srs.labelHeight,_lx=srs.labelX,_ly=srs.labelY,_lw2=_lw/2,_lh2=_lh/2,_va=source.pstyle("text-valign").value;"top"===_va?_ly-=_lh2:"bottom"===_va&&(_ly+=_lh2);var _ha=source.pstyle("text-halign").value;"left"===_ha?_lx-=_lw2:"right"===_ha&&(_lx+=_lw2);var _labelIntersect=polygonIntersectLine(p2_i[0],p2_i[1],[_lx-_lw2,_ly-_lh2,_lx+_lw2,_ly-_lh2,_lx+_lw2,_ly+_lh2,_lx-_lw2,_ly+_lh2],srcPos.x,srcPos.y);if(_labelIntersect.length>0){var _refPt=tgtPos,_intSqdist=sqdist(_refPt,array2point(intersect3)),_labIntSqdist=sqdist(_refPt,array2point(_labelIntersect)),_minSqDist=_intSqdist;if(_labIntSqdist<_intSqdist&&(intersect3=[_labelIntersect[0],_labelIntersect[1]],_minSqDist=_labIntSqdist),_labelIntersect.length>2)sqdist(_refPt,{x:_labelIntersect[2],y:_labelIntersect[3]})<_minSqDist&&(intersect3=[_labelIntersect[2],_labelIntersect[3]])}}var arrowStart=shortenIntersection(intersect3,p22,r2.arrowShapes[srcArShape].spacing(edge)+srcDist),edgeStart=shortenIntersection(intersect3,p22,r2.arrowShapes[srcArShape].gap(edge)+srcDist);rs.startX=edgeStart[0],rs.startY=edgeStart[1],rs.arrowStartX=arrowStart[0],rs.arrowStartY=arrowStart[1],hasEndpts&&(number$1(rs.startX)&&number$1(rs.startY)&&number$1(rs.endX)&&number$1(rs.endY)?rs.badLine=!1:rs.badLine=!0)},BRp$b.getSourceEndpoint=function(edge){var rs=edge[0]._private.rscratch;return this.recalculateRenderedStyle(edge),"haystack"===rs.edgeType?{x:rs.haystackPts[0],y:rs.haystackPts[1]}:{x:rs.arrowStartX,y:rs.arrowStartY}},BRp$b.getTargetEndpoint=function(edge){var rs=edge[0]._private.rscratch;return this.recalculateRenderedStyle(edge),"haystack"===rs.edgeType?{x:rs.haystackPts[2],y:rs.haystackPts[3]}:{x:rs.arrowEndX,y:rs.arrowEndY}},BRp$a={},__name(pushBezierPts,"pushBezierPts"),BRp$a.storeEdgeProjections=function(edge){var _p=edge._private,rs=_p.rscratch,et2=rs.edgeType;if(_p.rstyle.bezierPts=null,_p.rstyle.linePts=null,_p.rstyle.haystackPts=null,"multibezier"===et2||"bezier"===et2||"self"===et2||"compound"===et2){_p.rstyle.bezierPts=[];for(var i2=0;i2+5<rs.allpts.length;i2+=4)pushBezierPts(this,edge,rs.allpts.slice(i2,i2+6))}else if("segments"===et2){var lpts=_p.rstyle.linePts=[];for(i2=0;i2+1<rs.allpts.length;i2+=2)lpts.push({x:rs.allpts[i2],y:rs.allpts[i2+1]})}else if("haystack"===et2){var hpts=rs.haystackPts;_p.rstyle.haystackPts=[{x:hpts[0],y:hpts[1]},{x:hpts[2],y:hpts[3]}]}_p.rstyle.arrowWidth=this.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.arrowShapeWidth},BRp$a.recalculateEdgeProjections=function(edges3){this.findEdgeControlPoints(edges3)},(BRp$9={}).recalculateNodeLabelProjection=function(node2){var content=node2.pstyle("label").strValue;if(!emptyString(content)){var textX,textY,_p=node2._private,nodeWidth=node2.width(),nodeHeight=node2.height(),padding2=node2.padding(),nodePos=node2.position(),textHalign=node2.pstyle("text-halign").strValue,textValign=node2.pstyle("text-valign").strValue,rs=_p.rscratch,rstyle=_p.rstyle;switch(textHalign){case"left":textX=nodePos.x-nodeWidth/2-padding2;break;case"right":textX=nodePos.x+nodeWidth/2+padding2;break;default:textX=nodePos.x}switch(textValign){case"top":textY=nodePos.y-nodeHeight/2-padding2;break;case"bottom":textY=nodePos.y+nodeHeight/2+padding2;break;default:textY=nodePos.y}rs.labelX=textX,rs.labelY=textY,rstyle.labelX=textX,rstyle.labelY=textY,this.calculateLabelAngles(node2),this.applyLabelDimensions(node2)}},lineAngleFromDelta=__name(function(dx,dy){var angle2=Math.atan(dy/dx);return 0===dx&&angle2<0&&(angle2*=-1),angle2},"lineAngleFromDelta"),lineAngle=__name(function(p0,p1){var dx=p1.x-p0.x,dy=p1.y-p0.y;return lineAngleFromDelta(dx,dy)},"lineAngle"),bezierAngle=__name(function(p0,p1,p22,t4){var t03=bound(0,t4-.001,1),t13=bound(0,t4+.001,1),lp0=qbezierPtAt(p0,p1,p22,t03),lp1=qbezierPtAt(p0,p1,p22,t13);return lineAngle(lp0,lp1)},"bezierAngle"),BRp$9.recalculateEdgeLabelProjections=function(edge){var p3,_p=edge._private,rs=_p.rscratch,r2=this,content={mid:edge.pstyle("label").strValue,source:edge.pstyle("source-label").strValue,target:edge.pstyle("target-label").strValue};if(content.mid||content.source||content.target){p3={x:rs.midX,y:rs.midY};var setRs=__name(function(propName,prefix,value2){setPrefixedProperty(_p.rscratch,propName,prefix,value2),setPrefixedProperty(_p.rstyle,propName,prefix,value2)},"setRs");setRs("labelX",null,p3.x),setRs("labelY",null,p3.y);var midAngle=lineAngleFromDelta(rs.midDispX,rs.midDispY);setRs("labelAutoAngle",null,midAngle);var _createControlPointInfo=__name(function(){if(_createControlPointInfo.cache)return _createControlPointInfo.cache;for(var ctrlpts=[],i2=0;i2+5<rs.allpts.length;i2+=4){var p0={x:rs.allpts[i2],y:rs.allpts[i2+1]},p1={x:rs.allpts[i2+2],y:rs.allpts[i2+3]},p22={x:rs.allpts[i2+4],y:rs.allpts[i2+5]};ctrlpts.push({p0:p0,p1:p1,p2:p22,startDist:0,length:0,segments:[]})}var bpts=_p.rstyle.bezierPts,nProjs=r2.bezierProjPcts.length;function addSegment(cp2,p02,p12,t03,t13){var length2=dist(p02,p12),prevSegment=cp2.segments[cp2.segments.length-1],segment={p0:p02,p1:p12,t0:t03,t1:t13,startDist:prevSegment?prevSegment.startDist+prevSegment.length:0,length:length2};cp2.segments.push(segment),cp2.length+=length2}__name(addSegment,"addSegment");for(var _i=0;_i<ctrlpts.length;_i++){var cp=ctrlpts[_i],prevCp=ctrlpts[_i-1];prevCp&&(cp.startDist=prevCp.startDist+prevCp.length),addSegment(cp,cp.p0,bpts[_i*nProjs],0,r2.bezierProjPcts[0]);for(var j3=0;j3<nProjs-1;j3++)addSegment(cp,bpts[_i*nProjs+j3],bpts[_i*nProjs+j3+1],r2.bezierProjPcts[j3],r2.bezierProjPcts[j3+1]);addSegment(cp,bpts[_i*nProjs+nProjs-1],cp.p2,r2.bezierProjPcts[nProjs-1],1)}return _createControlPointInfo.cache=ctrlpts},"createControlPointInfo"),calculateEndProjection=__name(function(prefix){var angle2,isSrc="source"===prefix;if(content[prefix]){var offset=edge.pstyle(prefix+"-text-offset").pfValue;switch(rs.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var selected,cps=_createControlPointInfo(),startDist=0,totalDist=0,i2=0;i2<cps.length;i2++){for(var _cp=cps[isSrc?i2:cps.length-1-i2],j3=0;j3<_cp.segments.length;j3++){var _seg=_cp.segments[isSrc?j3:_cp.segments.length-1-j3],lastSeg=i2===cps.length-1&&j3===_cp.segments.length-1;if(startDist=totalDist,(totalDist+=_seg.length)>=offset||lastSeg){selected={cp:_cp,segment:_seg};break}}if(selected)break}var cp=selected.cp,seg=selected.segment,tSegment=(offset-startDist)/seg.length,segDt=seg.t1-seg.t0,t4=isSrc?seg.t0+segDt*tSegment:seg.t1-segDt*tSegment;t4=bound(0,t4,1),p3=qbezierPtAt(cp.p0,cp.p1,cp.p2,t4),angle2=bezierAngle(cp.p0,cp.p1,cp.p2,t4);break;case"straight":case"segments":case"haystack":for(var di,d0,p0,p1,d3=0,l4=rs.allpts.length,_i2=0;_i2+3<l4&&(isSrc?(p0={x:rs.allpts[_i2],y:rs.allpts[_i2+1]},p1={x:rs.allpts[_i2+2],y:rs.allpts[_i2+3]}):(p0={x:rs.allpts[l4-2-_i2],y:rs.allpts[l4-1-_i2]},p1={x:rs.allpts[l4-4-_i2],y:rs.allpts[l4-3-_i2]}),d0=d3,!((d3+=di=dist(p0,p1))>=offset));_i2+=2);var _t=(offset-d0)/di;_t=bound(0,_t,1),p3=lineAt(p0,p1,_t),angle2=lineAngle(p0,p1)}setRs("labelX",prefix,p3.x),setRs("labelY",prefix,p3.y),setRs("labelAutoAngle",prefix,angle2)}},"calculateEndProjection");calculateEndProjection("source"),calculateEndProjection("target"),this.applyLabelDimensions(edge)}},BRp$9.applyLabelDimensions=function(ele){this.applyPrefixedLabelDimensions(ele),ele.isEdge()&&(this.applyPrefixedLabelDimensions(ele,"source"),this.applyPrefixedLabelDimensions(ele,"target"))},BRp$9.applyPrefixedLabelDimensions=function(ele,prefix){var _p=ele._private,text4=this.getLabelText(ele,prefix),cacheKey=hashString(text4,ele._private.labelDimsKey);if(getPrefixedProperty(_p.rscratch,"prefixedLabelDimsKey",prefix)!==cacheKey){setPrefixedProperty(_p.rscratch,"prefixedLabelDimsKey",prefix,cacheKey);var labelDims=this.calculateLabelDimensions(ele,text4),lineHeight=ele.pstyle("line-height").pfValue,textWrap=ele.pstyle("text-wrap").strValue,lines=getPrefixedProperty(_p.rscratch,"labelWrapCachedLines",prefix)||[],numLines="wrap"!==textWrap?1:Math.max(lines.length,1),normPerLineHeight=labelDims.height/numLines,labelLineHeight=normPerLineHeight*lineHeight,width3=labelDims.width,height2=labelDims.height+(numLines-1)*(lineHeight-1)*normPerLineHeight;setPrefixedProperty(_p.rstyle,"labelWidth",prefix,width3),setPrefixedProperty(_p.rscratch,"labelWidth",prefix,width3),setPrefixedProperty(_p.rstyle,"labelHeight",prefix,height2),setPrefixedProperty(_p.rscratch,"labelHeight",prefix,height2),setPrefixedProperty(_p.rscratch,"labelLineHeight",prefix,labelLineHeight)}},BRp$9.getLabelText=function(ele,prefix){var _p=ele._private,pfd=prefix?prefix+"-":"",text4=ele.pstyle(pfd+"label").strValue,textTransform=ele.pstyle("text-transform").value,rscratch=__name(function(propName,value2){return value2?(setPrefixedProperty(_p.rscratch,propName,prefix,value2),value2):getPrefixedProperty(_p.rscratch,propName,prefix)},"rscratch");if(!text4)return"";"none"==textTransform||("uppercase"==textTransform?text4=text4.toUpperCase():"lowercase"==textTransform&&(text4=text4.toLowerCase()));var wrapStyle=ele.pstyle("text-wrap").value;if("wrap"===wrapStyle){var labelKey=rscratch("labelKey");if(null!=labelKey&&rscratch("labelWrapKey")===labelKey)return rscratch("labelWrapCachedText");for(var lines=text4.split("\n"),maxW=ele.pstyle("text-max-width").pfValue,overflowAny="anywhere"===ele.pstyle("text-overflow-wrap").value,wrappedLines=[],separatorRegex=/[\s\u200b]+|$/g,l4=0;l4<lines.length;l4++){var line2=lines[l4],lineW=this.calculateLabelDimensions(ele,line2).width;if(overflowAny){var processedLine=line2.split("").join("​");line2=processedLine}if(lineW>maxW){var _step,subline="",previousIndex=0,_iterator=_createForOfIteratorHelper(line2.matchAll(separatorRegex));try{for(_iterator.s();!(_step=_iterator.n()).done;){var separatorMatch=_step.value,wordSeparator=separatorMatch[0],word=line2.substring(previousIndex,separatorMatch.index);previousIndex=separatorMatch.index+wordSeparator.length;var testLine=0===subline.length?word:subline+word+wordSeparator;this.calculateLabelDimensions(ele,testLine).width<=maxW?subline+=word+wordSeparator:(subline&&wrappedLines.push(subline),subline=word+wordSeparator)}}catch(err){_iterator.e(err)}finally{_iterator.f()}subline.match(/^[\s\u200b]+$/)||wrappedLines.push(subline)}else wrappedLines.push(line2)}rscratch("labelWrapCachedLines",wrappedLines),text4=rscratch("labelWrapCachedText",wrappedLines.join("\n")),rscratch("labelWrapKey",labelKey)}else if("ellipsis"===wrapStyle){var _maxW=ele.pstyle("text-max-width").pfValue,ellipsized="",incLastCh=!1;if(this.calculateLabelDimensions(ele,text4).width<_maxW)return text4;for(var i2=0;i2<text4.length;i2++){if(this.calculateLabelDimensions(ele,ellipsized+text4[i2]+"…").width>_maxW)break;ellipsized+=text4[i2],i2===text4.length-1&&(incLastCh=!0)}return incLastCh||(ellipsized+="…"),ellipsized}return text4},BRp$9.getLabelJustification=function(ele){var justification=ele.pstyle("text-justification").strValue,textHalign=ele.pstyle("text-halign").strValue;if("auto"!==justification)return justification;if(!ele.isNode())return"center";switch(textHalign){case"left":return"right";case"right":return"left";default:return"center"}},BRp$9.calculateLabelDimensions=function(ele,text4){var document2=this.cy.window().document,fStyle=ele.pstyle("font-style").strValue,size4=ele.pstyle("font-size").pfValue,family=ele.pstyle("font-family").strValue,weight8=ele.pstyle("font-weight").strValue,canvas=this.labelCalcCanvas,c2d=this.labelCalcCanvasContext;if(!canvas){canvas=this.labelCalcCanvas=document2.createElement("canvas"),c2d=this.labelCalcCanvasContext=canvas.getContext("2d");var ds=canvas.style;ds.position="absolute",ds.left="-9999px",ds.top="-9999px",ds.zIndex="-1",ds.visibility="hidden",ds.pointerEvents="none"}c2d.font="".concat(fStyle," ").concat(weight8," ").concat(size4,"px ").concat(family);for(var width3=0,height2=0,lines=text4.split("\n"),i2=0;i2<lines.length;i2++){var line2=lines[i2],metrics=c2d.measureText(line2),w4=Math.ceil(metrics.width),h3=size4;width3=Math.max(w4,width3),height2+=h3}return{width:width3+=0,height:height2+=0}},BRp$9.calculateLabelAngle=function(ele,prefix){var rs=ele._private.rscratch,isEdge2=ele.isEdge(),prefixDash=prefix?prefix+"-":"",rot=ele.pstyle(prefixDash+"text-rotation"),rotStr=rot.strValue;return"none"===rotStr?0:isEdge2&&"autorotate"===rotStr?rs.labelAutoAngle:"autorotate"===rotStr?0:rot.pfValue},BRp$9.calculateLabelAngles=function(ele){var isEdge2=ele.isEdge(),rs=ele._private.rscratch;rs.labelAngle=this.calculateLabelAngle(ele),isEdge2&&(rs.sourceLabelAngle=this.calculateLabelAngle(ele,"source"),rs.targetLabelAngle=this.calculateLabelAngle(ele,"target"))},warnedCutRect=!1,(BRp$8={}).getNodeShape=function(node2){var shape=node2.pstyle("shape").value;if("cutrectangle"===shape&&(node2.width()<28||node2.height()<28))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(node2.isParent())return"rectangle"===shape||"roundrectangle"===shape||"round-rectangle"===shape||"cutrectangle"===shape||"cut-rectangle"===shape||"barrel"===shape?shape:"rectangle";if("polygon"===shape){var points=node2.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(points).name}return shape},(BRp$7={}).registerCalculationListeners=function(){var cy=this.cy,elesToUpdate=cy.collection(),r2=this,enqueue=__name(function(eles){var dirtyStyleCaches=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(elesToUpdate.merge(eles),dirtyStyleCaches)for(var i2=0;i2<eles.length;i2++){var rstyle=eles[i2]._private.rstyle;rstyle.clean=!1,rstyle.cleanConnected=!1}},"enqueue");r2.binder(cy).on("bounds.* dirty.*",__name(function(e3){var ele=e3.target;enqueue(ele)},"onDirtyBounds")).on("style.* background.*",__name(function(e3){var ele=e3.target;enqueue(ele,!1)},"onDirtyStyle"));var updateEleCalcs=__name(function(willDraw){if(willDraw){var fns=r2.onUpdateEleCalcsFns;elesToUpdate.cleanStyle();for(var i2=0;i2<elesToUpdate.length;i2++){var ele=elesToUpdate[i2],rstyle=ele._private.rstyle;ele.isNode()&&!rstyle.cleanConnected&&(enqueue(ele.connectedEdges()),rstyle.cleanConnected=!0)}if(fns)for(var _i=0;_i<fns.length;_i++){(0,fns[_i])(willDraw,elesToUpdate)}r2.recalculateRenderedStyle(elesToUpdate),elesToUpdate=cy.collection()}},"updateEleCalcs");r2.flushRenderedStyleQueue=function(){updateEleCalcs(!0)},r2.beforeRender(updateEleCalcs,r2.beforeRenderPriorities.eleCalcs)},BRp$7.onUpdateEleCalcs=function(fn3){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(fn3)},BRp$7.recalculateRenderedStyle=function(eles,useCache){var isCleanConnected=__name(function(ele2){return ele2._private.rstyle.cleanConnected},"isCleanConnected");if(0!==eles.length){var edges3=[],nodes5=[];if(!this.destroyed){void 0===useCache&&(useCache=!0);for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_p=ele._private,rstyle=_p.rstyle;!ele.isEdge()||isCleanConnected(ele.source())&&isCleanConnected(ele.target())||(rstyle.clean=!1),ele.isEdge()&&ele.isBundledBezier()&&ele.parallelEdges().some(function(ele2){return!ele2._private.rstyle.clean&&ele2.isBundledBezier()})&&(rstyle.clean=!1),useCache&&rstyle.clean||ele.removed()||"none"!==ele.pstyle("display").value&&("nodes"===_p.group?nodes5.push(ele):edges3.push(ele),rstyle.clean=!0)}for(var _i2=0;_i2<nodes5.length;_i2++){var _ele=nodes5[_i2],_rstyle=_ele._private.rstyle,pos=_ele.position();this.recalculateNodeLabelProjection(_ele),_rstyle.nodeX=pos.x,_rstyle.nodeY=pos.y,_rstyle.nodeW=_ele.pstyle("width").pfValue,_rstyle.nodeH=_ele.pstyle("height").pfValue}this.recalculateEdgeProjections(edges3);for(var _i3=0;_i3<edges3.length;_i3++){var _p3=edges3[_i3]._private,_rstyle2=_p3.rstyle,rs=_p3.rscratch;_rstyle2.srcX=rs.arrowStartX,_rstyle2.srcY=rs.arrowStartY,_rstyle2.tgtX=rs.arrowEndX,_rstyle2.tgtY=rs.arrowEndY,_rstyle2.midX=rs.midX,_rstyle2.midY=rs.midY,_rstyle2.labelAngle=rs.labelAngle,_rstyle2.sourceLabelAngle=rs.sourceLabelAngle,_rstyle2.targetLabelAngle=rs.targetLabelAngle}}}},(BRp$6={}).updateCachedGrabbedEles=function(){var eles=this.cachedZSortedEles;if(eles){eles.drag=[],eles.nondrag=[];for(var grabTargets=[],i2=0;i2<eles.length;i2++){var rs=(ele=eles[i2])._private.rscratch;ele.grabbed()&&!ele.isParent()?grabTargets.push(ele):rs.inDragLayer?eles.drag.push(ele):eles.nondrag.push(ele)}for(i2=0;i2<grabTargets.length;i2++){var ele=grabTargets[i2];eles.drag.push(ele)}}},BRp$6.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},BRp$6.getCachedZSortedEles=function(forceRecalc){if(forceRecalc||!this.cachedZSortedEles){var eles=this.cy.mutableElements().toArray();eles.sort(zIndexSort),eles.interactive=eles.filter(function(ele){return ele.interactive()}),this.cachedZSortedEles=eles,this.updateCachedGrabbedEles()}else eles=this.cachedZSortedEles;return eles},BRp$5={},[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach(function(props){extend4(BRp$5,props)}),(BRp$4={}).getCachedImage=function(url,crossOrigin,onLoad){var imageCache=this.imageCache=this.imageCache||{},cache3=imageCache[url];if(cache3)return cache3.image.complete||cache3.image.addEventListener("load",onLoad),cache3.image;var image=(cache3=imageCache[url]=imageCache[url]||{}).image=new Image;image.addEventListener("load",onLoad),image.addEventListener("error",function(){image.error=!0});return"data:"===url.substring(0,5).toLowerCase()||(crossOrigin="null"===crossOrigin?null:crossOrigin,image.crossOrigin=crossOrigin),image.src=url,image},(BRp$3={}).registerBinding=function(target,event3,handler,useCapture){var args=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(target)){for(var res=[],i2=0;i2<target.length;i2++){var t4=target[i2];if(void 0!==t4){var b3=this.binder(t4);res.push(b3.on.apply(b3,args))}}return res}return(b3=this.binder(target)).on.apply(b3,args)},BRp$3.binder=function(tgt){var r2=this,containerWindow=r2.cy.window(),tgtIsDom=tgt===containerWindow||tgt===containerWindow.document||tgt===containerWindow.document.body||domElement(tgt);if(null==r2.supportsPassiveEvents){var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:__name(function(){return supportsPassive=!0,!0},"get")});containerWindow.addEventListener("test",null,opts)}catch(err){}r2.supportsPassiveEvents=supportsPassive}var on3=__name(function(event3,handler,useCapture){var args=Array.prototype.slice.call(arguments);return tgtIsDom&&r2.supportsPassiveEvents&&(args[2]={capture:null!=useCapture&&useCapture,passive:!1,once:!1}),r2.bindings.push({target:tgt,args:args}),(tgt.addEventListener||tgt.on).apply(tgt,args),this},"on");return{on:on3,addEventListener:on3,addListener:on3,bind:on3}},BRp$3.nodeIsDraggable=function(node2){return node2&&node2.isNode()&&!node2.locked()&&node2.grabbable()},BRp$3.nodeIsGrabbable=function(node2){return this.nodeIsDraggable(node2)&&node2.interactive()},BRp$3.load=function(){var r2=this,containerWindow=r2.cy.window(),isSelected=__name(function(ele){return ele.selected()},"isSelected"),getShadowRoot=__name(function(element3){var rootNode=element3.getRootNode();if(rootNode&&11===rootNode.nodeType&&void 0!==rootNode.host)return rootNode},"getShadowRoot"),triggerEvents=__name(function(target,names,e3,position5){null==target&&(target=r2.cy);for(var i2=0;i2<names.length;i2++){var name=names[i2];target.emit({originalEvent:e3,type:name,position:position5})}},"triggerEvents"),isMultSelKeyDown=__name(function(e3){return e3.shiftKey||e3.metaKey||e3.ctrlKey},"isMultSelKeyDown"),allowPanningPassthrough=__name(function(down,downs){var allowPassthrough=!0;if(r2.cy.hasCompoundNodes()&&down&&down.pannable())for(var i2=0;downs&&i2<downs.length;i2++){if((down=downs[i2]).isNode()&&down.isParent()&&!down.pannable()){allowPassthrough=!1;break}}else allowPassthrough=!0;return allowPassthrough},"allowPanningPassthrough"),setGrabbed=__name(function(ele){ele[0]._private.grabbed=!0},"setGrabbed"),setFreed=__name(function(ele){ele[0]._private.grabbed=!1},"setFreed"),setInDragLayer=__name(function(ele){ele[0]._private.rscratch.inDragLayer=!0},"setInDragLayer"),setOutDragLayer=__name(function(ele){ele[0]._private.rscratch.inDragLayer=!1},"setOutDragLayer"),setGrabTarget=__name(function(ele){ele[0]._private.rscratch.isGrabTarget=!0},"setGrabTarget"),removeGrabTarget=__name(function(ele){ele[0]._private.rscratch.isGrabTarget=!1},"removeGrabTarget"),addToDragList=__name(function(ele,opts){var list=opts.addToList;list.has(ele)||!ele.grabbable()||ele.locked()||(list.merge(ele),setGrabbed(ele))},"addToDragList"),addDescendantsToDrag=__name(function(node2,opts){if(node2.cy().hasCompoundNodes()&&(null!=opts.inDragLayer||null!=opts.addToList)){var innerNodes=node2.descendants();opts.inDragLayer&&(innerNodes.forEach(setInDragLayer),innerNodes.connectedEdges().forEach(setInDragLayer)),opts.addToList&&addToDragList(innerNodes,opts)}},"addDescendantsToDrag"),addNodesToDrag=__name(function(nodes5,opts){opts=opts||{};var hasCompoundNodes2=nodes5.cy().hasCompoundNodes();opts.inDragLayer&&(nodes5.forEach(setInDragLayer),nodes5.neighborhood().stdFilter(function(ele){return!hasCompoundNodes2||ele.isEdge()}).forEach(setInDragLayer)),opts.addToList&&nodes5.forEach(function(ele){addToDragList(ele,opts)}),addDescendantsToDrag(nodes5,opts),updateAncestorsInDragLayer(nodes5,{inDragLayer:opts.inDragLayer}),r2.updateCachedGrabbedEles()},"addNodesToDrag"),addNodeToDrag=addNodesToDrag,freeDraggedElements=__name(function(grabbedEles){grabbedEles&&(r2.getCachedZSortedEles().forEach(function(ele){setFreed(ele),setOutDragLayer(ele),removeGrabTarget(ele)}),r2.updateCachedGrabbedEles())},"freeDraggedElements"),updateAncestorsInDragLayer=__name(function(node2,opts){if((null!=opts.inDragLayer||null!=opts.addToList)&&node2.cy().hasCompoundNodes()){var parent4=node2.ancestors().orphans();if(!parent4.same(node2)){var nodes5=parent4.descendants().spawnSelf().merge(parent4).unmerge(node2).unmerge(node2.descendants()),edges3=nodes5.connectedEdges();opts.inDragLayer&&(edges3.forEach(setInDragLayer),nodes5.forEach(setInDragLayer)),opts.addToList&&nodes5.forEach(function(ele){addToDragList(ele,opts)})}}},"updateAncestorsInDragLayer"),blurActiveDomElement=__name(function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},"blurActiveDomElement"),haveMutationsApi="undefined"!=typeof MutationObserver,haveResizeObserverApi="undefined"!=typeof ResizeObserver;haveMutationsApi?(r2.removeObserver=new MutationObserver(function(mutns){for(var i2=0;i2<mutns.length;i2++){var rNodes=mutns[i2].removedNodes;if(rNodes)for(var j3=0;j3<rNodes.length;j3++){if(rNodes[j3]===r2.container){r2.destroy();break}}}}),r2.container.parentNode&&r2.removeObserver.observe(r2.container.parentNode,{childList:!0})):r2.registerBinding(r2.container,"DOMNodeRemoved",function(e3){r2.destroy()});var onResize=debounce(function(){r2.cy.resize()},100);haveMutationsApi&&(r2.styleObserver=new MutationObserver(onResize),r2.styleObserver.observe(r2.container,{attributes:!0})),r2.registerBinding(containerWindow,"resize",onResize),haveResizeObserverApi&&(r2.resizeObserver=new ResizeObserver(onResize),r2.resizeObserver.observe(r2.container));var forEachUp=__name(function(domEle,fn3){for(;null!=domEle;)fn3(domEle),domEle=domEle.parentNode},"forEachUp"),invalidateCoords=__name(function(){r2.invalidateContainerClientCoordsCache()},"invalidateCoords");forEachUp(r2.container,function(domEle){r2.registerBinding(domEle,"transitionend",invalidateCoords),r2.registerBinding(domEle,"animationend",invalidateCoords),r2.registerBinding(domEle,"scroll",invalidateCoords)}),r2.registerBinding(r2.container,"contextmenu",function(e3){e3.preventDefault()});var inBoxSelection=__name(function(){return 0!==r2.selection[4]},"inBoxSelection"),eventInContainer=__name(function(e3){for(var containerPageCoords=r2.findContainerClientCoords(),x5=containerPageCoords[0],y6=containerPageCoords[1],width3=containerPageCoords[2],height2=containerPageCoords[3],positions2=e3.touches?e3.touches:[e3],atLeastOnePosInside=!1,i2=0;i2<positions2.length;i2++){var p3=positions2[i2];if(x5<=p3.clientX&&p3.clientX<=x5+width3&&y6<=p3.clientY&&p3.clientY<=y6+height2){atLeastOnePosInside=!0;break}}if(!atLeastOnePosInside)return!1;for(var container2=r2.container,tParent=e3.target.parentNode,containerIsTarget=!1;tParent;){if(tParent===container2){containerIsTarget=!0;break}tParent=tParent.parentNode}return!!containerIsTarget},"eventInContainer");r2.registerBinding(r2.container,"mousedown",__name(function(e3){if(eventInContainer(e3)&&(1!==r2.hoverData.which||1===e3.which)){e3.preventDefault(),blurActiveDomElement(),r2.hoverData.capture=!0,r2.hoverData.which=e3.which;var cy=r2.cy,gpos=[e3.clientX,e3.clientY],pos=r2.projectIntoViewport(gpos[0],gpos[1]),select=r2.selection,nears=r2.findNearestElements(pos[0],pos[1],!0,!1),near=nears[0],draggedElements=r2.dragData.possibleDragElements;r2.hoverData.mdownPos=pos,r2.hoverData.mdownGPos=gpos;var makeEvent=__name(function(type3){return{originalEvent:e3,type:type3,position:{x:pos[0],y:pos[1]}}},"makeEvent"),checkForTaphold=__name(function(){r2.hoverData.tapholdCancelled=!1,clearTimeout(r2.hoverData.tapholdTimeout),r2.hoverData.tapholdTimeout=setTimeout(function(){if(!r2.hoverData.tapholdCancelled){var ele=r2.hoverData.down;ele?ele.emit(makeEvent("taphold")):cy.emit(makeEvent("taphold"))}},r2.tapholdDuration)},"checkForTaphold");if(3==e3.which){r2.hoverData.cxtStarted=!0;var cxtEvt={originalEvent:e3,type:"cxttapstart",position:{x:pos[0],y:pos[1]}};near?(near.activate(),near.emit(cxtEvt),r2.hoverData.down=near):cy.emit(cxtEvt),r2.hoverData.downTime=(new Date).getTime(),r2.hoverData.cxtDragged=!1}else if(1==e3.which){if(near&&near.activate(),null!=near&&r2.nodeIsGrabbable(near)){var triggerGrab=__name(function(ele){ele.emit(makeEvent("grab"))},"triggerGrab");if(setGrabTarget(near),near.selected()){draggedElements=r2.dragData.possibleDragElements=cy.collection();var selectedNodes=cy.$(function(ele){return ele.isNode()&&ele.selected()&&r2.nodeIsGrabbable(ele)});addNodesToDrag(selectedNodes,{addToList:draggedElements}),near.emit(makeEvent("grabon")),selectedNodes.forEach(triggerGrab)}else draggedElements=r2.dragData.possibleDragElements=cy.collection(),addNodeToDrag(near,{addToList:draggedElements}),near.emit(makeEvent("grabon")).emit(makeEvent("grab"));r2.redrawHint("eles",!0),r2.redrawHint("drag",!0)}r2.hoverData.down=near,r2.hoverData.downs=nears,r2.hoverData.downTime=(new Date).getTime(),triggerEvents(near,["mousedown","tapstart","vmousedown"],e3,{x:pos[0],y:pos[1]}),null==near?(select[4]=1,r2.data.bgActivePosistion={x:pos[0],y:pos[1]},r2.redrawHint("select",!0),r2.redraw()):near.pannable()&&(select[4]=1),checkForTaphold()}select[0]=select[2]=pos[0],select[1]=select[3]=pos[1]}},"mousedownHandler"),!1);var clickTimeout,didDoubleClick,prevClickTimeStamp,shadowRoot=getShadowRoot(r2.container);r2.registerBinding([containerWindow,shadowRoot],"mousemove",__name(function(e3){if(r2.hoverData.capture||eventInContainer(e3)){var preventDefault2=!1,cy=r2.cy,zoom2=cy.zoom(),gpos=[e3.clientX,e3.clientY],pos=r2.projectIntoViewport(gpos[0],gpos[1]),mdownPos=r2.hoverData.mdownPos,mdownGPos=r2.hoverData.mdownGPos,select=r2.selection,near=null;r2.hoverData.draggingEles||r2.hoverData.dragging||r2.hoverData.selecting||(near=r2.findNearestElement(pos[0],pos[1],!0,!1));var isOverThresholdDrag,last3=r2.hoverData.last,down=r2.hoverData.down,disp=[pos[0]-select[2],pos[1]-select[3]],draggedElements=r2.dragData.possibleDragElements;if(mdownGPos){var dx=gpos[0]-mdownGPos[0],dx2=dx*dx,dy=gpos[1]-mdownGPos[1],dist22=dx2+dy*dy;r2.hoverData.isOverThresholdDrag=isOverThresholdDrag=dist22>=r2.desktopTapThreshold2}var multSelKeyDown=isMultSelKeyDown(e3);isOverThresholdDrag&&(r2.hoverData.tapholdCancelled=!0);var updateDragDelta=__name(function(){var dragDelta2=r2.hoverData.dragDelta=r2.hoverData.dragDelta||[];0===dragDelta2.length?(dragDelta2.push(disp[0]),dragDelta2.push(disp[1])):(dragDelta2[0]+=disp[0],dragDelta2[1]+=disp[1])},"updateDragDelta");preventDefault2=!0,triggerEvents(near,["mousemove","vmousemove","tapdrag"],e3,{x:pos[0],y:pos[1]});var makeEvent=__name(function(type3){return{originalEvent:e3,type:type3,position:{x:pos[0],y:pos[1]}}},"makeEvent"),goIntoBoxMode=__name(function(){r2.data.bgActivePosistion=void 0,r2.hoverData.selecting||cy.emit(makeEvent("boxstart")),select[4]=1,r2.hoverData.selecting=!0,r2.redrawHint("select",!0),r2.redraw()},"goIntoBoxMode");if(3===r2.hoverData.which){if(isOverThresholdDrag){var cxtEvt=makeEvent("cxtdrag");down?down.emit(cxtEvt):cy.emit(cxtEvt),r2.hoverData.cxtDragged=!0,r2.hoverData.cxtOver&&near===r2.hoverData.cxtOver||(r2.hoverData.cxtOver&&r2.hoverData.cxtOver.emit(makeEvent("cxtdragout")),r2.hoverData.cxtOver=near,near&&near.emit(makeEvent("cxtdragover")))}}else if(r2.hoverData.dragging){if(preventDefault2=!0,cy.panningEnabled()&&cy.userPanningEnabled()){var deltaP;if(r2.hoverData.justStartedPan){var mdPos=r2.hoverData.mdownPos;deltaP={x:(pos[0]-mdPos[0])*zoom2,y:(pos[1]-mdPos[1])*zoom2},r2.hoverData.justStartedPan=!1}else deltaP={x:disp[0]*zoom2,y:disp[1]*zoom2};cy.panBy(deltaP),cy.emit(makeEvent("dragpan")),r2.hoverData.dragged=!0}pos=r2.projectIntoViewport(e3.clientX,e3.clientY)}else if(1!=select[4]||null!=down&&!down.pannable()){if(down&&down.pannable()&&down.active()&&down.unactivate(),down&&down.grabbed()||near==last3||(last3&&triggerEvents(last3,["mouseout","tapdragout"],e3,{x:pos[0],y:pos[1]}),near&&triggerEvents(near,["mouseover","tapdragover"],e3,{x:pos[0],y:pos[1]}),r2.hoverData.last=near),down)if(isOverThresholdDrag){if(cy.boxSelectionEnabled()&&multSelKeyDown)down&&down.grabbed()&&(freeDraggedElements(draggedElements),down.emit(makeEvent("freeon")),draggedElements.emit(makeEvent("free")),r2.dragData.didDrag&&(down.emit(makeEvent("dragfreeon")),draggedElements.emit(makeEvent("dragfree")))),goIntoBoxMode();else if(down&&down.grabbed()&&r2.nodeIsDraggable(down)){var justStartedDrag=!r2.dragData.didDrag;justStartedDrag&&r2.redrawHint("eles",!0),r2.dragData.didDrag=!0,r2.hoverData.draggingEles||addNodesToDrag(draggedElements,{inDragLayer:!0});var totalShift={x:0,y:0};if(number$1(disp[0])&&number$1(disp[1])&&(totalShift.x+=disp[0],totalShift.y+=disp[1],justStartedDrag)){var dragDelta=r2.hoverData.dragDelta;dragDelta&&number$1(dragDelta[0])&&number$1(dragDelta[1])&&(totalShift.x+=dragDelta[0],totalShift.y+=dragDelta[1])}r2.hoverData.draggingEles=!0,draggedElements.silentShift(totalShift).emit(makeEvent("position")).emit(makeEvent("drag")),r2.redrawHint("drag",!0),r2.redraw()}}else updateDragDelta();preventDefault2=!0}else if(isOverThresholdDrag){if(r2.hoverData.dragging||!cy.boxSelectionEnabled()||!multSelKeyDown&&cy.panningEnabled()&&cy.userPanningEnabled()){if(!r2.hoverData.selecting&&cy.panningEnabled()&&cy.userPanningEnabled()){allowPanningPassthrough(down,r2.hoverData.downs)&&(r2.hoverData.dragging=!0,r2.hoverData.justStartedPan=!0,select[4]=0,r2.data.bgActivePosistion=array2point(mdownPos),r2.redrawHint("select",!0),r2.redraw())}}else goIntoBoxMode();down&&down.pannable()&&down.active()&&down.unactivate()}return select[2]=pos[0],select[3]=pos[1],preventDefault2?(e3.stopPropagation&&e3.stopPropagation(),e3.preventDefault&&e3.preventDefault(),!1):void 0}},"mousemoveHandler"),!1),r2.registerBinding(containerWindow,"mouseup",__name(function(e3){if((1!==r2.hoverData.which||1===e3.which||!r2.hoverData.capture)&&r2.hoverData.capture){r2.hoverData.capture=!1;var cy=r2.cy,pos=r2.projectIntoViewport(e3.clientX,e3.clientY),select=r2.selection,near=r2.findNearestElement(pos[0],pos[1],!0,!1),draggedElements=r2.dragData.possibleDragElements,down=r2.hoverData.down,multSelKeyDown=isMultSelKeyDown(e3);r2.data.bgActivePosistion&&(r2.redrawHint("select",!0),r2.redraw()),r2.hoverData.tapholdCancelled=!0,r2.data.bgActivePosistion=void 0,down&&down.unactivate();var makeEvent=__name(function(type3){return{originalEvent:e3,type:type3,position:{x:pos[0],y:pos[1]}}},"makeEvent");if(3===r2.hoverData.which){var cxtEvt=makeEvent("cxttapend");if(down?down.emit(cxtEvt):cy.emit(cxtEvt),!r2.hoverData.cxtDragged){var cxtTap=makeEvent("cxttap");down?down.emit(cxtTap):cy.emit(cxtTap)}r2.hoverData.cxtDragged=!1,r2.hoverData.which=null}else if(1===r2.hoverData.which){if(triggerEvents(near,["mouseup","tapend","vmouseup"],e3,{x:pos[0],y:pos[1]}),r2.dragData.didDrag||r2.hoverData.dragged||r2.hoverData.selecting||r2.hoverData.isOverThresholdDrag||(triggerEvents(down,["click","tap","vclick"],e3,{x:pos[0],y:pos[1]}),didDoubleClick=!1,e3.timeStamp-prevClickTimeStamp<=cy.multiClickDebounceTime()?(clickTimeout&&clearTimeout(clickTimeout),didDoubleClick=!0,prevClickTimeStamp=null,triggerEvents(down,["dblclick","dbltap","vdblclick"],e3,{x:pos[0],y:pos[1]})):(clickTimeout=setTimeout(function(){didDoubleClick||triggerEvents(down,["oneclick","onetap","voneclick"],e3,{x:pos[0],y:pos[1]})},cy.multiClickDebounceTime()),prevClickTimeStamp=e3.timeStamp)),null!=down||r2.dragData.didDrag||r2.hoverData.selecting||r2.hoverData.dragged||isMultSelKeyDown(e3)||(cy.$(isSelected).unselect(["tapunselect"]),draggedElements.length>0&&r2.redrawHint("eles",!0),r2.dragData.possibleDragElements=draggedElements=cy.collection()),near!=down||r2.dragData.didDrag||r2.hoverData.selecting||null!=near&&near._private.selectable&&(r2.hoverData.dragging||("additive"===cy.selectionType()||multSelKeyDown?near.selected()?near.unselect(["tapunselect"]):near.select(["tapselect"]):multSelKeyDown||(cy.$(isSelected).unmerge(near).unselect(["tapunselect"]),near.select(["tapselect"]))),r2.redrawHint("eles",!0)),r2.hoverData.selecting){var box=cy.collection(r2.getAllInBox(select[0],select[1],select[2],select[3]));r2.redrawHint("select",!0),box.length>0&&r2.redrawHint("eles",!0),cy.emit(makeEvent("boxend"));var eleWouldBeSelected=__name(function(ele){return ele.selectable()&&!ele.selected()},"eleWouldBeSelected");"additive"===cy.selectionType()||multSelKeyDown||cy.$(isSelected).unmerge(box).unselect(),box.emit(makeEvent("box")).stdFilter(eleWouldBeSelected).select().emit(makeEvent("boxselect")),r2.redraw()}if(r2.hoverData.dragging&&(r2.hoverData.dragging=!1,r2.redrawHint("select",!0),r2.redrawHint("eles",!0),r2.redraw()),!select[4]){r2.redrawHint("drag",!0),r2.redrawHint("eles",!0);var downWasGrabbed=down&&down.grabbed();freeDraggedElements(draggedElements),downWasGrabbed&&(down.emit(makeEvent("freeon")),draggedElements.emit(makeEvent("free")),r2.dragData.didDrag&&(down.emit(makeEvent("dragfreeon")),draggedElements.emit(makeEvent("dragfree"))))}}select[4]=0,r2.hoverData.down=null,r2.hoverData.cxtStarted=!1,r2.hoverData.draggingEles=!1,r2.hoverData.selecting=!1,r2.hoverData.isOverThresholdDrag=!1,r2.dragData.didDrag=!1,r2.hoverData.dragged=!1,r2.hoverData.dragDelta=[],r2.hoverData.mdownPos=null,r2.hoverData.mdownGPos=null,r2.hoverData.which=null}},"mouseupHandler"),!1);var inaccurateScrollDevice,f1x1,f1y1,f2x1,f2y1,distance1,distance1Sq,center1,modelCenter1,offsetLeft,offsetTop,containerWidth,containerHeight,twoFingersStartInside,wheelDeltas=[],inaccurateScrollFactor=1e5,allAreDivisibleBy=__name(function(list,factor){for(var i2=0;i2<list.length;i2++)if(list[i2]%factor!==0)return!1;return!0},"allAreDivisibleBy"),allAreSameMagnitude=__name(function(list){for(var firstMag=Math.abs(list[0]),i2=1;i2<list.length;i2++)if(Math.abs(list[i2])!==firstMag)return!1;return!0},"allAreSameMagnitude"),wheelHandler=__name(function(e3){var clamp=!1,delta=e3.deltaY;if(null==delta&&(null!=e3.wheelDeltaY?delta=e3.wheelDeltaY/4:null!=e3.wheelDelta&&(delta=e3.wheelDelta/4)),0!==delta){if(null==inaccurateScrollDevice)if(wheelDeltas.length>=4){var wds=wheelDeltas;if(!(inaccurateScrollDevice=allAreDivisibleBy(wds,5))){var firstMag=Math.abs(wds[0]);inaccurateScrollDevice=allAreSameMagnitude(wds)&&firstMag>5}if(inaccurateScrollDevice)for(var i2=0;i2<wds.length;i2++)inaccurateScrollFactor=Math.min(Math.abs(wds[i2]),inaccurateScrollFactor)}else wheelDeltas.push(delta),clamp=!0;else inaccurateScrollDevice&&(inaccurateScrollFactor=Math.min(Math.abs(delta),inaccurateScrollFactor));if(!r2.scrollingPage){var cy=r2.cy,zoom2=cy.zoom(),pan2=cy.pan(),pos=r2.projectIntoViewport(e3.clientX,e3.clientY),rpos=[pos[0]*zoom2+pan2.x,pos[1]*zoom2+pan2.y];if(r2.hoverData.draggingEles||r2.hoverData.dragging||r2.hoverData.cxtStarted||inBoxSelection())e3.preventDefault();else if(cy.panningEnabled()&&cy.userPanningEnabled()&&cy.zoomingEnabled()&&cy.userZoomingEnabled()){var diff2;e3.preventDefault(),r2.data.wheelZooming=!0,clearTimeout(r2.data.wheelTimeout),r2.data.wheelTimeout=setTimeout(function(){r2.data.wheelZooming=!1,r2.redrawHint("eles",!0),r2.redraw()},150),clamp&&Math.abs(delta)>5&&(delta=5*signum(delta)),diff2=delta/-250,inaccurateScrollDevice&&(diff2/=inaccurateScrollFactor,diff2*=3),diff2*=r2.wheelSensitivity,1===e3.deltaMode&&(diff2*=33);var newZoom=cy.zoom()*Math.pow(10,diff2);"gesturechange"===e3.type&&(newZoom=r2.gestureStartZoom*e3.scale),cy.zoom({level:newZoom,renderedPosition:{x:rpos[0],y:rpos[1]}}),cy.emit({type:"gesturechange"===e3.type?"pinchzoom":"scrollzoom",originalEvent:e3,position:{x:pos[0],y:pos[1]}})}}}},"wheelHandler");r2.registerBinding(r2.container,"wheel",wheelHandler,!0),r2.registerBinding(containerWindow,"scroll",__name(function(e3){r2.scrollingPage=!0,clearTimeout(r2.scrollingPageTimeout),r2.scrollingPageTimeout=setTimeout(function(){r2.scrollingPage=!1},250)},"scrollHandler"),!0),r2.registerBinding(r2.container,"gesturestart",__name(function(e3){r2.gestureStartZoom=r2.cy.zoom(),r2.hasTouchStarted||e3.preventDefault()},"gestureStartHandler"),!0),r2.registerBinding(r2.container,"gesturechange",function(e3){r2.hasTouchStarted||wheelHandler(e3)},!0),r2.registerBinding(r2.container,"mouseout",__name(function(e3){var pos=r2.projectIntoViewport(e3.clientX,e3.clientY);r2.cy.emit({originalEvent:e3,type:"mouseout",position:{x:pos[0],y:pos[1]}})},"mouseOutHandler"),!1),r2.registerBinding(r2.container,"mouseover",__name(function(e3){var pos=r2.projectIntoViewport(e3.clientX,e3.clientY);r2.cy.emit({originalEvent:e3,type:"mouseover",position:{x:pos[0],y:pos[1]}})},"mouseOverHandler"),!1);var touchstartHandler,touchmoveHandler,touchcancelHandler,touchendHandler,didDoubleTouch,touchTimeout,prevTouchTimeStamp,distance2=__name(function(x1,y1,x22,y22){return Math.sqrt((x22-x1)*(x22-x1)+(y22-y1)*(y22-y1))},"distance"),distanceSq=__name(function(x1,y1,x22,y22){return(x22-x1)*(x22-x1)+(y22-y1)*(y22-y1)},"distanceSq");if(r2.registerBinding(r2.container,"touchstart",touchstartHandler=__name(function(e3){if(r2.hasTouchStarted=!0,eventInContainer(e3)){blurActiveDomElement(),r2.touchData.capture=!0,r2.data.bgActivePosistion=void 0;var cy=r2.cy,now3=r2.touchData.now,earlier=r2.touchData.earlier;if(e3.touches[0]){var pos=r2.projectIntoViewport(e3.touches[0].clientX,e3.touches[0].clientY);now3[0]=pos[0],now3[1]=pos[1]}if(e3.touches[1]){pos=r2.projectIntoViewport(e3.touches[1].clientX,e3.touches[1].clientY);now3[2]=pos[0],now3[3]=pos[1]}if(e3.touches[2]){pos=r2.projectIntoViewport(e3.touches[2].clientX,e3.touches[2].clientY);now3[4]=pos[0],now3[5]=pos[1]}var makeEvent=__name(function(type3){return{originalEvent:e3,type:type3,position:{x:now3[0],y:now3[1]}}},"makeEvent");if(e3.touches[1]){r2.touchData.singleTouchMoved=!0,freeDraggedElements(r2.dragData.touchDragEles);var offsets=r2.findContainerClientCoords();offsetLeft=offsets[0],offsetTop=offsets[1],containerWidth=offsets[2],containerHeight=offsets[3],f1x1=e3.touches[0].clientX-offsetLeft,f1y1=e3.touches[0].clientY-offsetTop,f2x1=e3.touches[1].clientX-offsetLeft,f2y1=e3.touches[1].clientY-offsetTop,twoFingersStartInside=0<=f1x1&&f1x1<=containerWidth&&0<=f2x1&&f2x1<=containerWidth&&0<=f1y1&&f1y1<=containerHeight&&0<=f2y1&&f2y1<=containerHeight;var pan2=cy.pan(),zoom2=cy.zoom();distance1=distance2(f1x1,f1y1,f2x1,f2y1),distance1Sq=distanceSq(f1x1,f1y1,f2x1,f2y1),modelCenter1=[((center1=[(f1x1+f2x1)/2,(f1y1+f2y1)/2])[0]-pan2.x)/zoom2,(center1[1]-pan2.y)/zoom2];if(distance1Sq<4e4&&!e3.touches[2]){var near1=r2.findNearestElement(now3[0],now3[1],!0,!0),near2=r2.findNearestElement(now3[2],now3[3],!0,!0);return near1&&near1.isNode()?(near1.activate().emit(makeEvent("cxttapstart")),r2.touchData.start=near1):near2&&near2.isNode()?(near2.activate().emit(makeEvent("cxttapstart")),r2.touchData.start=near2):cy.emit(makeEvent("cxttapstart")),r2.touchData.start&&(r2.touchData.start._private.grabbed=!1),r2.touchData.cxt=!0,r2.touchData.cxtDragged=!1,r2.data.bgActivePosistion=void 0,void r2.redraw()}}if(e3.touches[2])cy.boxSelectionEnabled()&&e3.preventDefault();else if(e3.touches[1]);else if(e3.touches[0]){var nears=r2.findNearestElements(now3[0],now3[1],!0,!0),near=nears[0];if(null!=near&&(near.activate(),r2.touchData.start=near,r2.touchData.starts=nears,r2.nodeIsGrabbable(near))){var draggedEles=r2.dragData.touchDragEles=cy.collection(),selectedNodes=null;r2.redrawHint("eles",!0),r2.redrawHint("drag",!0),near.selected()?(selectedNodes=cy.$(function(ele){return ele.selected()&&r2.nodeIsGrabbable(ele)}),addNodesToDrag(selectedNodes,{addToList:draggedEles})):addNodeToDrag(near,{addToList:draggedEles}),setGrabTarget(near),near.emit(makeEvent("grabon")),selectedNodes?selectedNodes.forEach(function(n2){n2.emit(makeEvent("grab"))}):near.emit(makeEvent("grab"))}triggerEvents(near,["touchstart","tapstart","vmousedown"],e3,{x:now3[0],y:now3[1]}),null==near&&(r2.data.bgActivePosistion={x:pos[0],y:pos[1]},r2.redrawHint("select",!0),r2.redraw()),r2.touchData.singleTouchMoved=!1,r2.touchData.singleTouchStartTime=+new Date,clearTimeout(r2.touchData.tapholdTimeout),r2.touchData.tapholdTimeout=setTimeout(function(){!1!==r2.touchData.singleTouchMoved||r2.pinching||r2.touchData.selecting||triggerEvents(r2.touchData.start,["taphold"],e3,{x:now3[0],y:now3[1]})},r2.tapholdDuration)}if(e3.touches.length>=1){for(var sPos=r2.touchData.startPosition=[null,null,null,null,null,null],i2=0;i2<now3.length;i2++)sPos[i2]=earlier[i2]=now3[i2];var touch0=e3.touches[0];r2.touchData.startGPosition=[touch0.clientX,touch0.clientY]}}},"touchstartHandler"),!1),r2.registerBinding(containerWindow,"touchmove",touchmoveHandler=__name(function(e3){var capture=r2.touchData.capture;if(capture||eventInContainer(e3)){var select=r2.selection,cy=r2.cy,now3=r2.touchData.now,earlier=r2.touchData.earlier,zoom2=cy.zoom();if(e3.touches[0]){var pos=r2.projectIntoViewport(e3.touches[0].clientX,e3.touches[0].clientY);now3[0]=pos[0],now3[1]=pos[1]}if(e3.touches[1]){pos=r2.projectIntoViewport(e3.touches[1].clientX,e3.touches[1].clientY);now3[2]=pos[0],now3[3]=pos[1]}if(e3.touches[2]){pos=r2.projectIntoViewport(e3.touches[2].clientX,e3.touches[2].clientY);now3[4]=pos[0],now3[5]=pos[1]}var isOverThresholdDrag,makeEvent=__name(function(type3){return{originalEvent:e3,type:type3,position:{x:now3[0],y:now3[1]}}},"makeEvent"),startGPos=r2.touchData.startGPosition;if(capture&&e3.touches[0]&&startGPos){for(var disp=[],j3=0;j3<now3.length;j3++)disp[j3]=now3[j3]-earlier[j3];var dx=e3.touches[0].clientX-startGPos[0],dx2=dx*dx,dy=e3.touches[0].clientY-startGPos[1];isOverThresholdDrag=dx2+dy*dy>=r2.touchTapThreshold2}if(capture&&r2.touchData.cxt){e3.preventDefault();var f1x2=e3.touches[0].clientX-offsetLeft,f1y2=e3.touches[0].clientY-offsetTop,f2x2=e3.touches[1].clientX-offsetLeft,f2y2=e3.touches[1].clientY-offsetTop,distance2Sq=distanceSq(f1x2,f1y2,f2x2,f2y2);if(distance2Sq/distance1Sq>=2.25||distance2Sq>=22500){r2.touchData.cxt=!1,r2.data.bgActivePosistion=void 0,r2.redrawHint("select",!0);var cxtEvt=makeEvent("cxttapend");r2.touchData.start?(r2.touchData.start.unactivate().emit(cxtEvt),r2.touchData.start=null):cy.emit(cxtEvt)}}if(capture&&r2.touchData.cxt){cxtEvt=makeEvent("cxtdrag");r2.data.bgActivePosistion=void 0,r2.redrawHint("select",!0),r2.touchData.start?r2.touchData.start.emit(cxtEvt):cy.emit(cxtEvt),r2.touchData.start&&(r2.touchData.start._private.grabbed=!1),r2.touchData.cxtDragged=!0;var near=r2.findNearestElement(now3[0],now3[1],!0,!0);r2.touchData.cxtOver&&near===r2.touchData.cxtOver||(r2.touchData.cxtOver&&r2.touchData.cxtOver.emit(makeEvent("cxtdragout")),r2.touchData.cxtOver=near,near&&near.emit(makeEvent("cxtdragover")))}else if(capture&&e3.touches[2]&&cy.boxSelectionEnabled())e3.preventDefault(),r2.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r2.touchData.selecting||cy.emit(makeEvent("boxstart")),r2.touchData.selecting=!0,r2.touchData.didSelect=!0,select[4]=1,select&&0!==select.length&&void 0!==select[0]?(select[2]=(now3[0]+now3[2]+now3[4])/3,select[3]=(now3[1]+now3[3]+now3[5])/3):(select[0]=(now3[0]+now3[2]+now3[4])/3,select[1]=(now3[1]+now3[3]+now3[5])/3,select[2]=(now3[0]+now3[2]+now3[4])/3+1,select[3]=(now3[1]+now3[3]+now3[5])/3+1),r2.redrawHint("select",!0),r2.redraw();else if(capture&&e3.touches[1]&&!r2.touchData.didSelect&&cy.zoomingEnabled()&&cy.panningEnabled()&&cy.userZoomingEnabled()&&cy.userPanningEnabled()){if(e3.preventDefault(),r2.data.bgActivePosistion=void 0,r2.redrawHint("select",!0),draggedEles=r2.dragData.touchDragEles){r2.redrawHint("drag",!0);for(var i2=0;i2<draggedEles.length;i2++){var de_p=draggedEles[i2]._private;de_p.grabbed=!1,de_p.rscratch.inDragLayer=!1}}var _start=r2.touchData.start,distance22=(f1x2=e3.touches[0].clientX-offsetLeft,f1y2=e3.touches[0].clientY-offsetTop,f2x2=e3.touches[1].clientX-offsetLeft,f2y2=e3.touches[1].clientY-offsetTop,distance2(f1x2,f1y2,f2x2,f2y2)),factor=distance22/distance1;if(twoFingersStartInside){var tx=(f1x2-f1x1+(f2x2-f2x1))/2,ty=(f1y2-f1y1+(f2y2-f2y1))/2,zoom1=cy.zoom(),zoom22=zoom1*factor,pan1=cy.pan(),ctrx=modelCenter1[0]*zoom1+pan1.x,ctry=modelCenter1[1]*zoom1+pan1.y,pan2={x:-zoom22/zoom1*(ctrx-pan1.x-tx)+ctrx,y:-zoom22/zoom1*(ctry-pan1.y-ty)+ctry};if(_start&&_start.active()){var draggedEles=r2.dragData.touchDragEles;freeDraggedElements(draggedEles),r2.redrawHint("drag",!0),r2.redrawHint("eles",!0),_start.unactivate().emit(makeEvent("freeon")),draggedEles.emit(makeEvent("free")),r2.dragData.didDrag&&(_start.emit(makeEvent("dragfreeon")),draggedEles.emit(makeEvent("dragfree")))}cy.viewport({zoom:zoom22,pan:pan2,cancelOnFailedZoom:!0}),cy.emit(makeEvent("pinchzoom")),distance1=distance22,f1x1=f1x2,f1y1=f1y2,f2x1=f2x2,f2y1=f2y2,r2.pinching=!0}if(e3.touches[0]){pos=r2.projectIntoViewport(e3.touches[0].clientX,e3.touches[0].clientY);now3[0]=pos[0],now3[1]=pos[1]}if(e3.touches[1]){pos=r2.projectIntoViewport(e3.touches[1].clientX,e3.touches[1].clientY);now3[2]=pos[0],now3[3]=pos[1]}if(e3.touches[2]){pos=r2.projectIntoViewport(e3.touches[2].clientX,e3.touches[2].clientY);now3[4]=pos[0],now3[5]=pos[1]}}else if(e3.touches[0]&&!r2.touchData.didSelect){var start3=r2.touchData.start,last3=r2.touchData.last;if(r2.hoverData.draggingEles||r2.swipePanning||(near=r2.findNearestElement(now3[0],now3[1],!0,!0)),capture&&null!=start3&&e3.preventDefault(),capture&&null!=start3&&r2.nodeIsDraggable(start3))if(isOverThresholdDrag){draggedEles=r2.dragData.touchDragEles;var justStartedDrag=!r2.dragData.didDrag;justStartedDrag&&addNodesToDrag(draggedEles,{inDragLayer:!0}),r2.dragData.didDrag=!0;var totalShift={x:0,y:0};if(number$1(disp[0])&&number$1(disp[1]))if(totalShift.x+=disp[0],totalShift.y+=disp[1],justStartedDrag)r2.redrawHint("eles",!0),(dragDelta=r2.touchData.dragDelta)&&number$1(dragDelta[0])&&number$1(dragDelta[1])&&(totalShift.x+=dragDelta[0],totalShift.y+=dragDelta[1]);r2.hoverData.draggingEles=!0,draggedEles.silentShift(totalShift).emit(makeEvent("position")).emit(makeEvent("drag")),r2.redrawHint("drag",!0),r2.touchData.startPosition[0]==earlier[0]&&r2.touchData.startPosition[1]==earlier[1]&&r2.redrawHint("eles",!0),r2.redraw()}else{var dragDelta;0===(dragDelta=r2.touchData.dragDelta=r2.touchData.dragDelta||[]).length?(dragDelta.push(disp[0]),dragDelta.push(disp[1])):(dragDelta[0]+=disp[0],dragDelta[1]+=disp[1])}if(triggerEvents(start3||near,["touchmove","tapdrag","vmousemove"],e3,{x:now3[0],y:now3[1]}),start3&&start3.grabbed()||near==last3||(last3&&last3.emit(makeEvent("tapdragout")),near&&near.emit(makeEvent("tapdragover"))),r2.touchData.last=near,capture)for(i2=0;i2<now3.length;i2++)now3[i2]&&r2.touchData.startPosition[i2]&&isOverThresholdDrag&&(r2.touchData.singleTouchMoved=!0);if(capture&&(null==start3||start3.pannable())&&cy.panningEnabled()&&cy.userPanningEnabled()){allowPanningPassthrough(start3,r2.touchData.starts)&&(e3.preventDefault(),r2.data.bgActivePosistion||(r2.data.bgActivePosistion=array2point(r2.touchData.startPosition)),r2.swipePanning?(cy.panBy({x:disp[0]*zoom2,y:disp[1]*zoom2}),cy.emit(makeEvent("dragpan"))):isOverThresholdDrag&&(r2.swipePanning=!0,cy.panBy({x:dx*zoom2,y:dy*zoom2}),cy.emit(makeEvent("dragpan")),start3&&(start3.unactivate(),r2.redrawHint("select",!0),r2.touchData.start=null)));pos=r2.projectIntoViewport(e3.touches[0].clientX,e3.touches[0].clientY);now3[0]=pos[0],now3[1]=pos[1]}}for(j3=0;j3<now3.length;j3++)earlier[j3]=now3[j3];capture&&e3.touches.length>0&&!r2.hoverData.draggingEles&&!r2.swipePanning&&null!=r2.data.bgActivePosistion&&(r2.data.bgActivePosistion=void 0,r2.redrawHint("select",!0),r2.redraw())}},"touchmoveHandler"),!1),r2.registerBinding(containerWindow,"touchcancel",touchcancelHandler=__name(function(e3){var start3=r2.touchData.start;r2.touchData.capture=!1,start3&&start3.unactivate()},"touchcancelHandler")),r2.registerBinding(containerWindow,"touchend",touchendHandler=__name(function(e3){var start3=r2.touchData.start;if(r2.touchData.capture){0===e3.touches.length&&(r2.touchData.capture=!1),e3.preventDefault();var select=r2.selection;r2.swipePanning=!1,r2.hoverData.draggingEles=!1;var cy=r2.cy,zoom2=cy.zoom(),now3=r2.touchData.now,earlier=r2.touchData.earlier;if(e3.touches[0]){var pos=r2.projectIntoViewport(e3.touches[0].clientX,e3.touches[0].clientY);now3[0]=pos[0],now3[1]=pos[1]}if(e3.touches[1]){pos=r2.projectIntoViewport(e3.touches[1].clientX,e3.touches[1].clientY);now3[2]=pos[0],now3[3]=pos[1]}if(e3.touches[2]){pos=r2.projectIntoViewport(e3.touches[2].clientX,e3.touches[2].clientY);now3[4]=pos[0],now3[5]=pos[1]}var ctxTapend,makeEvent=__name(function(type3){return{originalEvent:e3,type:type3,position:{x:now3[0],y:now3[1]}}},"makeEvent");if(start3&&start3.unactivate(),r2.touchData.cxt){if(ctxTapend=makeEvent("cxttapend"),start3?start3.emit(ctxTapend):cy.emit(ctxTapend),!r2.touchData.cxtDragged){var ctxTap=makeEvent("cxttap");start3?start3.emit(ctxTap):cy.emit(ctxTap)}return r2.touchData.start&&(r2.touchData.start._private.grabbed=!1),r2.touchData.cxt=!1,r2.touchData.start=null,void r2.redraw()}if(!e3.touches[2]&&cy.boxSelectionEnabled()&&r2.touchData.selecting){r2.touchData.selecting=!1;var box=cy.collection(r2.getAllInBox(select[0],select[1],select[2],select[3]));select[0]=void 0,select[1]=void 0,select[2]=void 0,select[3]=void 0,select[4]=0,r2.redrawHint("select",!0),cy.emit(makeEvent("boxend"));var eleWouldBeSelected=__name(function(ele){return ele.selectable()&&!ele.selected()},"eleWouldBeSelected");box.emit(makeEvent("box")).stdFilter(eleWouldBeSelected).select().emit(makeEvent("boxselect")),box.nonempty()&&r2.redrawHint("eles",!0),r2.redraw()}if(null!=start3&&start3.unactivate(),e3.touches[2])r2.data.bgActivePosistion=void 0,r2.redrawHint("select",!0);else if(e3.touches[1]);else if(e3.touches[0]);else if(!e3.touches[0]){r2.data.bgActivePosistion=void 0,r2.redrawHint("select",!0);var draggedEles=r2.dragData.touchDragEles;if(null!=start3){var startWasGrabbed=start3._private.grabbed;freeDraggedElements(draggedEles),r2.redrawHint("drag",!0),r2.redrawHint("eles",!0),startWasGrabbed&&(start3.emit(makeEvent("freeon")),draggedEles.emit(makeEvent("free")),r2.dragData.didDrag&&(start3.emit(makeEvent("dragfreeon")),draggedEles.emit(makeEvent("dragfree")))),triggerEvents(start3,["touchend","tapend","vmouseup","tapdragout"],e3,{x:now3[0],y:now3[1]}),start3.unactivate(),r2.touchData.start=null}else{var near=r2.findNearestElement(now3[0],now3[1],!0,!0);triggerEvents(near,["touchend","tapend","vmouseup","tapdragout"],e3,{x:now3[0],y:now3[1]})}var dx=r2.touchData.startPosition[0]-now3[0],dx2=dx*dx,dy=r2.touchData.startPosition[1]-now3[1],rdist2=(dx2+dy*dy)*zoom2*zoom2;r2.touchData.singleTouchMoved||(start3||cy.$(":selected").unselect(["tapunselect"]),triggerEvents(start3,["tap","vclick"],e3,{x:now3[0],y:now3[1]}),didDoubleTouch=!1,e3.timeStamp-prevTouchTimeStamp<=cy.multiClickDebounceTime()?(touchTimeout&&clearTimeout(touchTimeout),didDoubleTouch=!0,prevTouchTimeStamp=null,triggerEvents(start3,["dbltap","vdblclick"],e3,{x:now3[0],y:now3[1]})):(touchTimeout=setTimeout(function(){didDoubleTouch||triggerEvents(start3,["onetap","voneclick"],e3,{x:now3[0],y:now3[1]})},cy.multiClickDebounceTime()),prevTouchTimeStamp=e3.timeStamp)),null!=start3&&!r2.dragData.didDrag&&start3._private.selectable&&rdist2<r2.touchTapThreshold2&&!r2.pinching&&("single"===cy.selectionType()?(cy.$(isSelected).unmerge(start3).unselect(["tapunselect"]),start3.select(["tapselect"])):start3.selected()?start3.unselect(["tapunselect"]):start3.select(["tapselect"]),r2.redrawHint("eles",!0)),r2.touchData.singleTouchMoved=!0}for(var j3=0;j3<now3.length;j3++)earlier[j3]=now3[j3];r2.dragData.didDrag=!1,0===e3.touches.length&&(r2.touchData.dragDelta=[],r2.touchData.startPosition=[null,null,null,null,null,null],r2.touchData.startGPosition=null,r2.touchData.didSelect=!1),e3.touches.length<2&&(1===e3.touches.length&&(r2.touchData.startGPosition=[e3.touches[0].clientX,e3.touches[0].clientY]),r2.pinching=!1,r2.redrawHint("eles",!0),r2.redraw())}},"touchendHandler"),!1),"undefined"==typeof TouchEvent){var pointers=[],makeTouch=__name(function(e3){return{clientX:e3.clientX,clientY:e3.clientY,force:1,identifier:e3.pointerId,pageX:e3.pageX,pageY:e3.pageY,radiusX:e3.width/2,radiusY:e3.height/2,screenX:e3.screenX,screenY:e3.screenY,target:e3.target}},"makeTouch"),makePointer=__name(function(e3){return{event:e3,touch:makeTouch(e3)}},"makePointer"),addPointer=__name(function(e3){pointers.push(makePointer(e3))},"addPointer"),removePointer=__name(function(e3){for(var i2=0;i2<pointers.length;i2++){if(pointers[i2].event.pointerId===e3.pointerId)return void pointers.splice(i2,1)}},"removePointer"),updatePointer=__name(function(e3){var p3=pointers.filter(function(p4){return p4.event.pointerId===e3.pointerId})[0];p3.event=e3,p3.touch=makeTouch(e3)},"updatePointer"),addTouchesToEvent=__name(function(e3){e3.touches=pointers.map(function(p3){return p3.touch})},"addTouchesToEvent"),pointerIsMouse=__name(function(e3){return"mouse"===e3.pointerType||4===e3.pointerType},"pointerIsMouse");r2.registerBinding(r2.container,"pointerdown",function(e3){pointerIsMouse(e3)||(e3.preventDefault(),addPointer(e3),addTouchesToEvent(e3),touchstartHandler(e3))}),r2.registerBinding(r2.container,"pointerup",function(e3){pointerIsMouse(e3)||(removePointer(e3),addTouchesToEvent(e3),touchendHandler(e3))}),r2.registerBinding(r2.container,"pointercancel",function(e3){pointerIsMouse(e3)||(removePointer(e3),addTouchesToEvent(e3),touchcancelHandler(e3))}),r2.registerBinding(r2.container,"pointermove",function(e3){pointerIsMouse(e3)||(e3.preventDefault(),updatePointer(e3),addTouchesToEvent(e3),touchmoveHandler(e3))})}},(BRp$2={}).generatePolygon=function(name,points){return this.nodeShapes[name]={renderer:this,name:name,points:points,draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius){this.renderer.nodeShapeImpl("polygon",context,centerX,centerY,width3,height2,this.points)},"draw"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius){return polygonIntersectLine(x5,y6,this.points,nodeX,nodeY,width3/2,height2/2,padding2)},"intersectLine"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius){return pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3,height2,[0,-1],padding2)},"checkPoint"),hasMiterBounds:"rectangle"!==name,miterBounds:__name(function(centerX,centerY,width3,height2,strokeWidth,strokePosition){return miterBox(this.points,centerX,centerY,width3,height2,strokeWidth)},"miterBounds")}},BRp$2.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width3,height2)},"draw"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius){return intersectLineEllipse(x5,y6,nodeX,nodeY,width3/2+padding2,height2/2+padding2)},"intersectLine"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius){return checkInEllipse(x5,y6,width3,height2,centerX,centerY,padding2)},"checkPoint")}},BRp$2.generateRoundPolygon=function(name,points){return this.nodeShapes[name]={renderer:this,name:name,points:points,getOrCreateCorners:__name(function(centerX,centerY,width3,height2,cornerRadius,rs,field){if(void 0!==rs[field]&&rs[field+"-cx"]===centerX&&rs[field+"-cy"]===centerY)return rs[field];rs[field]=new Array(points.length/2),rs[field+"-cx"]=centerX,rs[field+"-cy"]=centerY;var halfW=width3/2,halfH=height2/2;cornerRadius="auto"===cornerRadius?getRoundPolygonRadius(width3,height2):cornerRadius;for(var p3=new Array(points.length/2),_i=0;_i<points.length/2;_i++)p3[_i]={x:centerX+halfW*points[2*_i],y:centerY+halfH*points[2*_i+1]};var i2,p1,p22,p32,len=p3.length;for(p1=p3[len-1],i2=0;i2<len;i2++)p22=p3[i2%len],p32=p3[(i2+1)%len],rs[field][i2]=getRoundCorner(p1,p22,p32,cornerRadius),p1=p22,p22=p32;return rs[field]},"getOrCreateCorners"),draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius,rs){this.renderer.nodeShapeImpl("round-polygon",context,centerX,centerY,width3,height2,this.points,this.getOrCreateCorners(centerX,centerY,width3,height2,cornerRadius,rs,"drawCorners"))},"draw"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius,rs){return roundPolygonIntersectLine(x5,y6,this.points,nodeX,nodeY,width3,height2,padding2,this.getOrCreateCorners(nodeX,nodeY,width3,height2,cornerRadius,rs,"corners"))},"intersectLine"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius,rs){return pointInsideRoundPolygon(x5,y6,this.points,centerX,centerY,width3,height2,this.getOrCreateCorners(centerX,centerY,width3,height2,cornerRadius,rs,"corners"))},"checkPoint")}},BRp$2.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width3,height2,this.points,cornerRadius)},"draw"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius){return roundRectangleIntersectLine(x5,y6,nodeX,nodeY,width3,height2,padding2,cornerRadius)},"intersectLine"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius){var halfWidth=width3/2,halfHeight=height2/2;cornerRadius="auto"===cornerRadius?getRoundRectangleRadius(width3,height2):cornerRadius;var diam=2*(cornerRadius=Math.min(halfWidth,halfHeight,cornerRadius));return!!pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3,height2-diam,[0,-1],padding2)||(!!pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3-diam,height2,[0,-1],padding2)||(!!checkInEllipse(x5,y6,diam,diam,centerX-halfWidth+cornerRadius,centerY-halfHeight+cornerRadius,padding2)||(!!checkInEllipse(x5,y6,diam,diam,centerX+halfWidth-cornerRadius,centerY-halfHeight+cornerRadius,padding2)||(!!checkInEllipse(x5,y6,diam,diam,centerX+halfWidth-cornerRadius,centerY+halfHeight-cornerRadius,padding2)||!!checkInEllipse(x5,y6,diam,diam,centerX-halfWidth+cornerRadius,centerY+halfHeight-cornerRadius,padding2)))))},"checkPoint")}},BRp$2.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width3,height2,null,cornerRadius)},"draw"),generateCutTrianglePts:__name(function(width3,height2,centerX,centerY,cornerRadius){var cl="auto"===cornerRadius?this.cornerLength:cornerRadius,hh=height2/2,hw=width3/2,xBegin=centerX-hw,xEnd=centerX+hw,yBegin=centerY-hh,yEnd=centerY+hh;return{topLeft:[xBegin,yBegin+cl,xBegin+cl,yBegin,xBegin+cl,yBegin+cl],topRight:[xEnd-cl,yBegin,xEnd,yBegin+cl,xEnd-cl,yBegin+cl],bottomRight:[xEnd,yEnd-cl,xEnd-cl,yEnd,xEnd-cl,yEnd-cl],bottomLeft:[xBegin+cl,yEnd,xBegin,yEnd-cl,xBegin+cl,yEnd-cl]}},"generateCutTrianglePts"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius){var cPts=this.generateCutTrianglePts(width3+2*padding2,height2+2*padding2,nodeX,nodeY,cornerRadius),pts2=[].concat.apply([],[cPts.topLeft.splice(0,4),cPts.topRight.splice(0,4),cPts.bottomRight.splice(0,4),cPts.bottomLeft.splice(0,4)]);return polygonIntersectLine(x5,y6,pts2,nodeX,nodeY)},"intersectLine"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius){var cl="auto"===cornerRadius?this.cornerLength:cornerRadius;if(pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3,height2-2*cl,[0,-1],padding2))return!0;if(pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3-2*cl,height2,[0,-1],padding2))return!0;var cutTrianglePts=this.generateCutTrianglePts(width3,height2,centerX,centerY);return pointInsidePolygonPoints(x5,y6,cutTrianglePts.topLeft)||pointInsidePolygonPoints(x5,y6,cutTrianglePts.topRight)||pointInsidePolygonPoints(x5,y6,cutTrianglePts.bottomRight)||pointInsidePolygonPoints(x5,y6,cutTrianglePts.bottomLeft)},"checkPoint")}},BRp$2.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width3,height2)},"draw"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius){var bPts=this.generateBarrelBezierPts(width3+2*padding2,height2+2*padding2,nodeX,nodeY),approximateBarrelCurvePts=__name(function(pts3){var m0=qbezierPtAt({x:pts3[0],y:pts3[1]},{x:pts3[2],y:pts3[3]},{x:pts3[4],y:pts3[5]},.15),m1=qbezierPtAt({x:pts3[0],y:pts3[1]},{x:pts3[2],y:pts3[3]},{x:pts3[4],y:pts3[5]},.5),m22=qbezierPtAt({x:pts3[0],y:pts3[1]},{x:pts3[2],y:pts3[3]},{x:pts3[4],y:pts3[5]},.85);return[pts3[0],pts3[1],m0.x,m0.y,m1.x,m1.y,m22.x,m22.y,pts3[4],pts3[5]]},"approximateBarrelCurvePts"),pts2=[].concat(approximateBarrelCurvePts(bPts.topLeft),approximateBarrelCurvePts(bPts.topRight),approximateBarrelCurvePts(bPts.bottomRight),approximateBarrelCurvePts(bPts.bottomLeft));return polygonIntersectLine(x5,y6,pts2,nodeX,nodeY)},"intersectLine"),generateBarrelBezierPts:__name(function(width3,height2,centerX,centerY){var hh=height2/2,hw=width3/2,xBegin=centerX-hw,xEnd=centerX+hw,yBegin=centerY-hh,yEnd=centerY+hh,curveConstants=getBarrelCurveConstants(width3,height2),hOffset=curveConstants.heightOffset,wOffset=curveConstants.widthOffset,ctrlPtXOffset=curveConstants.ctrlPtOffsetPct*width3,pts2={topLeft:[xBegin,yBegin+hOffset,xBegin+ctrlPtXOffset,yBegin,xBegin+wOffset,yBegin],topRight:[xEnd-wOffset,yBegin,xEnd-ctrlPtXOffset,yBegin,xEnd,yBegin+hOffset],bottomRight:[xEnd,yEnd-hOffset,xEnd-ctrlPtXOffset,yEnd,xEnd-wOffset,yEnd],bottomLeft:[xBegin+wOffset,yEnd,xBegin+ctrlPtXOffset,yEnd,xBegin,yEnd-hOffset]};return pts2.topLeft.isTop=!0,pts2.topRight.isTop=!0,pts2.bottomLeft.isBottom=!0,pts2.bottomRight.isBottom=!0,pts2},"generateBarrelBezierPts"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius){var curveConstants=getBarrelCurveConstants(width3,height2),hOffset=curveConstants.heightOffset,wOffset=curveConstants.widthOffset;if(pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3,height2-2*hOffset,[0,-1],padding2))return!0;if(pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3-2*wOffset,height2,[0,-1],padding2))return!0;for(var barrelCurvePts=this.generateBarrelBezierPts(width3,height2,centerX,centerY),getCurveT=__name(function(x6,y7,curvePts){var x0=curvePts[4],x1=curvePts[2],x22=curvePts[0],y02=curvePts[5],y23=curvePts[1],xMin=Math.min(x0,x22),xMax=Math.max(x0,x22),yMin=Math.min(y02,y23),yMax=Math.max(y02,y23);if(xMin<=x6&&x6<=xMax&&yMin<=y7&&y7<=yMax){var coeff=bezierPtsToQuadCoeff(x0,x1,x22),validRoots=solveQuadratic(coeff[0],coeff[1],coeff[2],x6).filter(function(r2){return 0<=r2&&r2<=1});if(validRoots.length>0)return validRoots[0]}return null},"getCurveT"),curveRegions=Object.keys(barrelCurvePts),i2=0;i2<curveRegions.length;i2++){var cornerPts=barrelCurvePts[curveRegions[i2]],t4=getCurveT(x5,y6,cornerPts);if(null!=t4){var y0=cornerPts[5],y1=cornerPts[3],y22=cornerPts[1],bezY=qbezierAt(y0,y1,y22,t4);if(cornerPts.isTop&&bezY<=y6)return!0;if(cornerPts.isBottom&&y6<=bezY)return!0}}return!1},"checkPoint")}},BRp$2.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:__name(function(context,centerX,centerY,width3,height2,cornerRadius){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width3,height2,this.points,cornerRadius)},"draw"),intersectLine:__name(function(nodeX,nodeY,width3,height2,x5,y6,padding2,cornerRadius){var topStartY=nodeY-(height2/2+padding2),topIntersections=finiteLinesIntersect(x5,y6,nodeX,nodeY,nodeX-(width3/2+padding2),topStartY,nodeX+(width3/2+padding2),topStartY,!1);return topIntersections.length>0?topIntersections:roundRectangleIntersectLine(x5,y6,nodeX,nodeY,width3,height2,padding2,cornerRadius)},"intersectLine"),checkPoint:__name(function(x5,y6,padding2,width3,height2,centerX,centerY,cornerRadius){var diam=2*(cornerRadius="auto"===cornerRadius?getRoundRectangleRadius(width3,height2):cornerRadius);if(pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3,height2-diam,[0,-1],padding2))return!0;if(pointInsidePolygon(x5,y6,this.points,centerX,centerY,width3-diam,height2,[0,-1],padding2))return!0;var outerWidth=width3/2+2*padding2,outerHeight=height2/2+2*padding2;return!!pointInsidePolygonPoints(x5,y6,[centerX-outerWidth,centerY-outerHeight,centerX-outerWidth,centerY,centerX+outerWidth,centerY,centerX+outerWidth,centerY-outerHeight])||(!!checkInEllipse(x5,y6,diam,diam,centerX+width3/2-cornerRadius,centerY+height2/2-cornerRadius,padding2)||!!checkInEllipse(x5,y6,diam,diam,centerX-width3/2+cornerRadius,centerY+height2/2-cornerRadius,padding2))},"checkPoint")}},BRp$2.registerNodeShapes=function(){var nodeShapes=this.nodeShapes={},renderer10=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),nodeShapes.square=nodeShapes.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var diamondPoints=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",diamondPoints),this.generateRoundPolygon("round-diamond",diamondPoints),this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var star5Points=new Array(20),outerPoints=generateUnitNgonPoints(5,0),innerPoints=generateUnitNgonPoints(5,Math.PI/5),innerRadius=.5*(3-Math.sqrt(5));innerRadius*=1.57;for(var i2=0;i2<innerPoints.length/2;i2++)innerPoints[2*i2]*=innerRadius,innerPoints[2*i2+1]*=innerRadius;for(i2=0;i2<5;i2++)star5Points[4*i2]=outerPoints[2*i2],star5Points[4*i2+1]=outerPoints[2*i2+1],star5Points[4*i2+2]=innerPoints[2*i2],star5Points[4*i2+3]=innerPoints[2*i2+1];star5Points=fitPolygonToSquare(star5Points),this.generatePolygon("star",star5Points),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var tagPoints=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",tagPoints),this.generateRoundPolygon("round-tag",tagPoints),nodeShapes.makePolygon=function(points){var shape,name="polygon-"+points.join("$");return(shape=this[name])?shape:renderer10.generatePolygon(name,points)}},(BRp$1={}).timeToRender=function(){return this.redrawTotalTime/this.redrawCount},BRp$1.redraw=function(options2){options2=options2||staticEmptyObject();var r2=this;void 0===r2.averageRedrawTime&&(r2.averageRedrawTime=0),void 0===r2.lastRedrawTime&&(r2.lastRedrawTime=0),void 0===r2.lastDrawTime&&(r2.lastDrawTime=0),r2.requestedFrame=!0,r2.renderOptions=options2},BRp$1.beforeRender=function(fn3,priority3){if(!this.destroyed){null==priority3&&error("Priority is not optional for beforeRender");var cbs=this.beforeRenderCallbacks;cbs.push({fn:fn3,priority:priority3}),cbs.sort(function(a2,b3){return b3.priority-a2.priority})}},beforeRenderCallbacks=__name(function(r2,willDraw,startTime){for(var cbs=r2.beforeRenderCallbacks,i2=0;i2<cbs.length;i2++)cbs[i2].fn(willDraw,startTime)},"beforeRenderCallbacks"),BRp$1.startRenderLoop=function(){var r2=this,cy=r2.cy;if(!r2.renderLoopStarted){r2.renderLoopStarted=!0;var _renderFn=__name(function(requestTime){if(!r2.destroyed){if(cy.batching());else if(r2.requestedFrame&&!r2.skipFrame){beforeRenderCallbacks(r2,!0,requestTime);var startTime=performanceNow();r2.render(r2.renderOptions);var endTime=r2.lastDrawTime=performanceNow();void 0===r2.averageRedrawTime&&(r2.averageRedrawTime=endTime-startTime),void 0===r2.redrawCount&&(r2.redrawCount=0),r2.redrawCount++,void 0===r2.redrawTotalTime&&(r2.redrawTotalTime=0);var duration=endTime-startTime;r2.redrawTotalTime+=duration,r2.lastRedrawTime=duration,r2.averageRedrawTime=r2.averageRedrawTime/2+duration/2,r2.requestedFrame=!1}else beforeRenderCallbacks(r2,!1,requestTime);r2.skipFrame=!1,requestAnimationFrame2(_renderFn)}},"renderFn");requestAnimationFrame2(_renderFn)}},(BRp=(BR=__name(function(options2){this.init(options2)},"BaseRenderer")).prototype).clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],BRp.init=function(options2){var r2=this;r2.options=options2,r2.cy=options2.cy;var ctr=r2.container=options2.cy.container(),containerWindow=r2.cy.window();if(containerWindow){var document2=containerWindow.document,head2=document2.head,className="__________cytoscape_container",stylesheetAlreadyExists=null!=document2.getElementById("__________cytoscape_stylesheet");if(ctr.className.indexOf(className)<0&&(ctr.className=(ctr.className||"")+" "+className),!stylesheetAlreadyExists){var stylesheet3=document2.createElement("style");stylesheet3.id="__________cytoscape_stylesheet",stylesheet3.textContent="."+className+" { position: relative; }",head2.insertBefore(stylesheet3,head2.children[0])}"static"===containerWindow.getComputedStyle(ctr).getPropertyValue("position")&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}r2.selection=[void 0,void 0,void 0,void 0,0],r2.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],r2.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},r2.dragData={possibleDragElements:[]},r2.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},r2.redraws=0,r2.showFps=options2.showFps,r2.debug=options2.debug,r2.webgl=options2.webgl,r2.hideEdgesOnViewport=options2.hideEdgesOnViewport,r2.textureOnViewport=options2.textureOnViewport,r2.wheelSensitivity=options2.wheelSensitivity,r2.motionBlurEnabled=options2.motionBlur,r2.forcedPixelRatio=number$1(options2.pixelRatio)?options2.pixelRatio:null,r2.motionBlur=options2.motionBlur,r2.motionBlurOpacity=options2.motionBlurOpacity,r2.motionBlurTransparency=1-r2.motionBlurOpacity,r2.motionBlurPxRatio=1,r2.mbPxRBlurry=1,r2.minMbLowQualFrames=4,r2.fullQualityMb=!1,r2.clearedForMotionBlur=[],r2.desktopTapThreshold=options2.desktopTapThreshold,r2.desktopTapThreshold2=options2.desktopTapThreshold*options2.desktopTapThreshold,r2.touchTapThreshold=options2.touchTapThreshold,r2.touchTapThreshold2=options2.touchTapThreshold*options2.touchTapThreshold,r2.tapholdDuration=500,r2.bindings=[],r2.beforeRenderCallbacks=[],r2.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},r2.registerNodeShapes(),r2.registerArrowShapes(),r2.registerCalculationListeners()},BRp.notify=function(eventName,eles){var r2=this,cy=r2.cy;this.destroyed||("init"!==eventName?"destroy"!==eventName?(("add"===eventName||"remove"===eventName||"move"===eventName&&cy.hasCompoundNodes()||"load"===eventName||"zorder"===eventName||"mount"===eventName)&&r2.invalidateCachedZSortedEles(),"viewport"===eventName&&r2.redrawHint("select",!0),"gc"===eventName&&r2.redrawHint("gc",!0),"load"!==eventName&&"resize"!==eventName&&"mount"!==eventName||(r2.invalidateContainerClientCoordsCache(),r2.matchCanvasSize(r2.container)),r2.redrawHint("eles",!0),r2.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r2.destroy():r2.load())},BRp.destroy=function(){var r2=this;r2.destroyed=!0,r2.cy.stopAnimationLoop();for(var i2=0;i2<r2.bindings.length;i2++){var b3=r2.bindings[i2],tgt=b3.target;(tgt.off||tgt.removeEventListener).apply(tgt,b3.args)}if(r2.bindings=[],r2.beforeRenderCallbacks=[],r2.onUpdateEleCalcsFns=[],r2.removeObserver&&r2.removeObserver.disconnect(),r2.styleObserver&&r2.styleObserver.disconnect(),r2.resizeObserver&&r2.resizeObserver.disconnect(),r2.labelCalcDiv)try{document.body.removeChild(r2.labelCalcDiv)}catch(e3){}},BRp.isHeadless=function(){return!1},[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach(function(props){extend4(BRp,props)}),fullFpsTime=1e3/60,defs={setupDequeueing:__name(function(opts){return __name(function(){var self2=this,r2=this.renderer;if(!self2.dequeueingSetup){self2.dequeueingSetup=!0;var queueRedraw=debounce(function(){r2.redrawHint("eles",!0),r2.redrawHint("drag",!0),r2.redraw()},opts.deqRedrawThreshold),dequeue=__name(function(willDraw,frameStartTime){var startTime=performanceNow(),avgRenderTime=r2.averageRedrawTime,renderTime=r2.lastRedrawTime,deqd=[],extent2=r2.cy.extent(),pixelRatio=r2.getPixelRatio();for(willDraw||r2.flushRenderedStyleQueue();;){var now3=performanceNow(),duration=now3-startTime,frameDuration=now3-frameStartTime;if(renderTime<fullFpsTime){var timeAvailable=fullFpsTime-(willDraw?avgRenderTime:0);if(frameDuration>=opts.deqFastCost*timeAvailable)break}else if(willDraw){if(duration>=opts.deqCost*renderTime||duration>=opts.deqAvgCost*avgRenderTime)break}else if(frameDuration>=opts.deqNoDrawCost*fullFpsTime)break;var thisDeqd=opts.deq(self2,pixelRatio,extent2);if(!(thisDeqd.length>0))break;for(var i2=0;i2<thisDeqd.length;i2++)deqd.push(thisDeqd[i2])}deqd.length>0&&(opts.onDeqd(self2,deqd),!willDraw&&opts.shouldRedraw(self2,deqd,pixelRatio,extent2)&&queueRedraw())},"dequeue"),priority3=opts.priority||noop$1;r2.beforeRender(dequeue,priority3(self2))}},"setupDequeueingImpl")},"setupDequeueing")},ElementTextureCacheLookup=function(){function ElementTextureCacheLookup2(getKey3){var doesEleInvalidateKey=arguments.length>1&&void 0!==arguments[1]?arguments[1]:falsify;_classCallCheck(this,ElementTextureCacheLookup2),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=getKey3,this.doesEleInvalidateKey=doesEleInvalidateKey}return __name(ElementTextureCacheLookup2,"ElementTextureCacheLookup"),_createClass(ElementTextureCacheLookup2,[{key:"getIdsFor",value:__name(function(key){null==key&&error("Can not get id list for null key");var idsByKey=this.idsByKey,ids=this.idsByKey.get(key);return ids||(ids=new Set$1,idsByKey.set(key,ids)),ids},"getIdsFor")},{key:"addIdForKey",value:__name(function(key,id30){null!=key&&this.getIdsFor(key).add(id30)},"addIdForKey")},{key:"deleteIdForKey",value:__name(function(key,id30){null!=key&&this.getIdsFor(key).delete(id30)},"deleteIdForKey")},{key:"getNumberOfIdsForKey",value:__name(function(key){return null==key?0:this.getIdsFor(key).size},"getNumberOfIdsForKey")},{key:"updateKeyMappingFor",value:__name(function(ele){var id30=ele.id(),prevKey=this.keyForId.get(id30),currKey=this.getKey(ele);this.deleteIdForKey(prevKey,id30),this.addIdForKey(currKey,id30),this.keyForId.set(id30,currKey)},"updateKeyMappingFor")},{key:"deleteKeyMappingFor",value:__name(function(ele){var id30=ele.id(),prevKey=this.keyForId.get(id30);this.deleteIdForKey(prevKey,id30),this.keyForId.delete(id30)},"deleteKeyMappingFor")},{key:"keyHasChangedFor",value:__name(function(ele){var id30=ele.id();return this.keyForId.get(id30)!==this.getKey(ele)},"keyHasChangedFor")},{key:"isInvalid",value:__name(function(ele){return this.keyHasChangedFor(ele)||this.doesEleInvalidateKey(ele)},"isInvalid")},{key:"getCachesAt",value:__name(function(lvl){var cachesByLvl=this.cachesByLvl,lvls=this.lvls,caches=cachesByLvl.get(lvl);return caches||(caches=new Map$1,cachesByLvl.set(lvl,caches),lvls.push(lvl)),caches},"getCachesAt")},{key:"getCache",value:__name(function(key,lvl){return this.getCachesAt(lvl).get(key)},"getCache")},{key:"get",value:__name(function(ele,lvl){var key=this.getKey(ele),cache3=this.getCache(key,lvl);return null!=cache3&&this.updateKeyMappingFor(ele),cache3},"get")},{key:"getForCachedKey",value:__name(function(ele,lvl){var key=this.keyForId.get(ele.id());return this.getCache(key,lvl)},"getForCachedKey")},{key:"hasCache",value:__name(function(key,lvl){return this.getCachesAt(lvl).has(key)},"hasCache")},{key:"has",value:__name(function(ele,lvl){var key=this.getKey(ele);return this.hasCache(key,lvl)},"has")},{key:"setCache",value:__name(function(key,lvl,cache3){cache3.key=key,this.getCachesAt(lvl).set(key,cache3)},"setCache")},{key:"set",value:__name(function(ele,lvl,cache3){var key=this.getKey(ele);this.setCache(key,lvl,cache3),this.updateKeyMappingFor(ele)},"set")},{key:"deleteCache",value:__name(function(key,lvl){this.getCachesAt(lvl).delete(key)},"deleteCache")},{key:"delete",value:__name(function(ele,lvl){var key=this.getKey(ele);this.deleteCache(key,lvl)},"_delete")},{key:"invalidateKey",value:__name(function(key){var _this=this;this.lvls.forEach(function(lvl){return _this.deleteCache(key,lvl)})},"invalidateKey")},{key:"invalidate",value:__name(function(ele){var id30=ele.id(),key=this.keyForId.get(id30);this.deleteKeyMappingFor(ele);var entireKeyInvalidated=this.doesEleInvalidateKey(ele);return entireKeyInvalidated&&this.invalidateKey(key),entireKeyInvalidated||0===this.getNumberOfIdsForKey(key)},"invalidate")}])}(),maxZoom$1=7.99,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),(ETCp=(ElementTextureCache=__name(function(renderer10,initOptions){this.renderer=renderer10,this.onDequeues=[];var opts=initDefaults(initOptions);extend4(this,opts),this.lookup=new ElementTextureCacheLookup(opts.getKey,opts.doesEleInvalidateKey),this.setupDequeueing()},"ElementTextureCache")).prototype).reasons=getTxrReasons,ETCp.getTextureQueue=function(txrH){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[txrH]=this.eleImgCaches[txrH]||[]},ETCp.getRetiredTextureQueue=function(txrH){var rtxtrQs=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return rtxtrQs[txrH]=rtxtrQs[txrH]||[]},ETCp.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Heap(function(a2,b3){return b3.reqs-a2.reqs})},ETCp.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ETCp.getElement=function(ele,bb,pxRatio,lvl,reason){var self2=this,r2=this.renderer,zoom2=r2.cy.zoom(),lookup2=this.lookup;if(!bb||0===bb.w||0===bb.h||isNaN(bb.w)||isNaN(bb.h)||!ele.visible()||ele.removed())return null;if(!self2.allowEdgeTxrCaching&&ele.isEdge()||!self2.allowParentTxrCaching&&ele.isParent())return null;if(null==lvl&&(lvl=Math.ceil(log22(zoom2*pxRatio))),lvl<-4)lvl=-4;else if(zoom2>=maxZoom$1||lvl>3)return null;var scale2=Math.pow(2,lvl),eleScaledH=bb.h*scale2,eleScaledW=bb.w*scale2,scaledLabelShown=r2.eleTextBiggerThanMin(ele,scale2);if(!this.isVisible(ele,scaledLabelShown))return null;var txrH,eleCache=lookup2.get(ele,lvl);if(eleCache&&eleCache.invalidated&&(eleCache.invalidated=!1,eleCache.texture.invalidatedWidth-=eleCache.width),eleCache)return eleCache;if(txrH=eleScaledH<=25?25:eleScaledH<=50?50:50*Math.ceil(eleScaledH/50),eleScaledH>1024||eleScaledW>1024)return null;var txrQ=self2.getTextureQueue(txrH),txr=txrQ[txrQ.length-2],addNewTxr=__name(function(){return self2.recycleTexture(txrH,eleScaledW)||self2.addTexture(txrH,eleScaledW)},"addNewTxr");txr||(txr=txrQ[txrQ.length-1]),txr||(txr=addNewTxr()),txr.width-txr.usedWidth<eleScaledW&&(txr=addNewTxr());for(var higherCache,scalableFrom=__name(function(otherCache){return otherCache&&otherCache.scaledLabelShown===scaledLabelShown},"scalableFrom"),deqing=reason&&reason===getTxrReasons.dequeue,highQualityReq=reason&&reason===getTxrReasons.highQuality,downscaleReq=reason&&reason===getTxrReasons.downscale,l4=lvl+1;l4<=3;l4++){var c3=lookup2.get(ele,l4);if(c3){higherCache=c3;break}}var oneUpCache=higherCache&&higherCache.level===lvl+1?higherCache:null,downscale=__name(function(){txr.context.drawImage(oneUpCache.texture.canvas,oneUpCache.x,0,oneUpCache.width,oneUpCache.height,txr.usedWidth,0,eleScaledW,eleScaledH)},"downscale");if(txr.context.setTransform(1,0,0,1,0,0),txr.context.clearRect(txr.usedWidth,0,eleScaledW,txrH),scalableFrom(oneUpCache))downscale();else if(scalableFrom(higherCache)){if(!highQualityReq)return self2.queueElement(ele,higherCache.level-1),higherCache;for(var _l=higherCache.level;_l>lvl;_l--)oneUpCache=self2.getElement(ele,bb,pxRatio,_l,getTxrReasons.downscale);downscale()}else{var lowerCache;if(!deqing&&!highQualityReq&&!downscaleReq)for(var _l2=lvl-1;_l2>=-4;_l2--){var _c=lookup2.get(ele,_l2);if(_c){lowerCache=_c;break}}if(scalableFrom(lowerCache))return self2.queueElement(ele,lvl),lowerCache;txr.context.translate(txr.usedWidth,0),txr.context.scale(scale2,scale2),this.drawElement(txr.context,ele,bb,scaledLabelShown,!1),txr.context.scale(1/scale2,1/scale2),txr.context.translate(-txr.usedWidth,0)}return eleCache={x:txr.usedWidth,texture:txr,level:lvl,scale:scale2,width:eleScaledW,height:eleScaledH,scaledLabelShown:scaledLabelShown},txr.usedWidth+=Math.ceil(eleScaledW+8),txr.eleCaches.push(eleCache),lookup2.set(ele,lvl,eleCache),self2.checkTextureFullness(txr),eleCache},ETCp.invalidateElements=function(eles){for(var i2=0;i2<eles.length;i2++)this.invalidateElement(eles[i2])},ETCp.invalidateElement=function(ele){var lookup2=this.lookup,caches=[];if(lookup2.isInvalid(ele)){for(var lvl=-4;lvl<=3;lvl++){var cache3=lookup2.getForCachedKey(ele,lvl);cache3&&caches.push(cache3)}if(lookup2.invalidate(ele))for(var i2=0;i2<caches.length;i2++){var _cache=caches[i2],txr=_cache.texture;txr.invalidatedWidth+=_cache.width,_cache.invalidated=!0,this.checkTextureUtility(txr)}this.removeFromQueue(ele)}},ETCp.checkTextureUtility=function(txr){txr.invalidatedWidth>=.2*txr.width&&this.retireTexture(txr)},ETCp.checkTextureFullness=function(txr){var txrQ=this.getTextureQueue(txr.height);txr.usedWidth/txr.width>.8&&txr.fullnessChecks>=10?removeFromArray(txrQ,txr):txr.fullnessChecks++},ETCp.retireTexture=function(txr){var txrH=txr.height,txrQ=this.getTextureQueue(txrH),lookup2=this.lookup;removeFromArray(txrQ,txr),txr.retired=!0;for(var eleCaches=txr.eleCaches,i2=0;i2<eleCaches.length;i2++){var eleCache=eleCaches[i2];lookup2.deleteCache(eleCache.key,eleCache.level)}clearArray(eleCaches),this.getRetiredTextureQueue(txrH).push(txr)},ETCp.addTexture=function(txrH,minW){var txr={};return this.getTextureQueue(txrH).push(txr),txr.eleCaches=[],txr.height=txrH,txr.width=Math.max(1024,minW),txr.usedWidth=0,txr.invalidatedWidth=0,txr.fullnessChecks=0,txr.canvas=this.renderer.makeOffscreenCanvas(txr.width,txr.height),txr.context=txr.canvas.getContext("2d"),txr},ETCp.recycleTexture=function(txrH,minW){for(var txrQ=this.getTextureQueue(txrH),rtxtrQ=this.getRetiredTextureQueue(txrH),i2=0;i2<rtxtrQ.length;i2++){var txr=rtxtrQ[i2];if(txr.width>=minW)return txr.retired=!1,txr.usedWidth=0,txr.invalidatedWidth=0,txr.fullnessChecks=0,clearArray(txr.eleCaches),txr.context.setTransform(1,0,0,1,0,0),txr.context.clearRect(0,0,txr.width,txr.height),removeFromArray(rtxtrQ,txr),txrQ.push(txr),txr}},ETCp.queueElement=function(ele,lvl){var q3=this.getElementQueue(),k2q=this.getElementKeyToQueue(),key=this.getKey(ele),existingReq=k2q[key];if(existingReq)existingReq.level=Math.max(existingReq.level,lvl),existingReq.eles.merge(ele),existingReq.reqs++,q3.updateItem(existingReq);else{var req={eles:ele.spawn().merge(ele),level:lvl,reqs:1,key:key};q3.push(req),k2q[key]=req}},ETCp.dequeue=function(pxRatio){for(var q3=this.getElementQueue(),k2q=this.getElementKeyToQueue(),dequeued=[],lookup2=this.lookup,i2=0;i2<1&&q3.size()>0;i2++){var req=q3.pop(),key=req.key,ele=req.eles[0],cacheExists=lookup2.hasCache(ele,req.level);if(k2q[key]=null,!cacheExists){dequeued.push(req);var bb=this.getBoundingBox(ele);this.getElement(ele,bb,pxRatio,req.level,getTxrReasons.dequeue)}}return dequeued},ETCp.removeFromQueue=function(ele){var q3=this.getElementQueue(),k2q=this.getElementKeyToQueue(),key=this.getKey(ele),req=k2q[key];null!=req&&(1===req.eles.length?(req.reqs=MAX_INT$1,q3.updateItem(req),q3.pop(),k2q[key]=null):req.eles.unmerge(ele))},ETCp.onDequeue=function(fn3){this.onDequeues.push(fn3)},ETCp.offDequeue=function(fn3){removeFromArray(this.onDequeues,fn3)},ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:__name(function(self2,pxRatio,extent2){return self2.dequeue(pxRatio,extent2)},"deq"),onDeqd:__name(function(self2,deqd){for(var i2=0;i2<self2.onDequeues.length;i2++){(0,self2.onDequeues[i2])(deqd)}},"onDeqd"),shouldRedraw:__name(function(self2,deqd,pxRatio,extent2){for(var i2=0;i2<deqd.length;i2++)for(var eles=deqd[i2].eles,j3=0;j3<eles.length;j3++){var bb=eles[j3].boundingBox();if(boundingBoxesIntersect(bb,extent2))return!0}return!1},"shouldRedraw"),priority:__name(function(self2){return self2.renderer.beforeRenderPriorities.eleTxrDeq},"priority")}),LTCp=(LayeredTextureCache=__name(function(renderer10){var self2=this,r2=self2.renderer=renderer10,cy=r2.cy;self2.layersByLevel={},self2.firstGet=!0,self2.lastInvalidationTime=performanceNow()-500,self2.skipping=!1,self2.eleTxrDeqs=cy.collection(),self2.scheduleElementRefinement=debounce(function(){self2.refineElementTextures(self2.eleTxrDeqs),self2.eleTxrDeqs.unmerge(self2.eleTxrDeqs)},50),r2.beforeRender(function(willDraw,now3){now3-self2.lastInvalidationTime<=250?self2.skipping=!0:self2.skipping=!1},r2.beforeRenderPriorities.lyrTxrSkip);var qSort=__name(function(a2,b3){return b3.reqs-a2.reqs},"qSort");self2.layersQueue=new Heap(qSort),self2.setupDequeueing()},"LayeredTextureCache")).prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1,LTCp.makeLayer=function(bb,lvl){var scale2=Math.pow(2,lvl),w4=Math.ceil(bb.w*scale2),h3=Math.ceil(bb.h*scale2),canvas=this.renderer.makeOffscreenCanvas(w4,h3),layer={id:layerIdPool=++layerIdPool%MAX_INT,bb:bb,level:lvl,width:w4,height:h3,canvas:canvas,context:canvas.getContext("2d"),eles:[],elesQueue:[],reqs:0},cxt=layer.context,dx=-layer.bb.x1,dy=-layer.bb.y1;return cxt.scale(scale2,scale2),cxt.translate(dx,dy),layer},LTCp.getLayers=function(eles,pxRatio,lvl){var self2=this,zoom2=self2.renderer.cy.zoom(),firstGet=self2.firstGet;if(self2.firstGet=!1,null==lvl)if((lvl=Math.ceil(log22(zoom2*pxRatio)))<-4)lvl=-4;else if(zoom2>=3.99||lvl>2)return null;self2.validateLayersElesOrdering(lvl,eles);var bb,tmpLayers,layersByLvl=self2.layersByLevel,scale2=Math.pow(2,lvl),layers=layersByLvl[lvl]=layersByLvl[lvl]||[];if(self2.levelIsComplete(lvl,eles))return layers;__name(function(){var canUseAsTmpLvl=__name(function(l4){if(self2.validateLayersElesOrdering(l4,eles),self2.levelIsComplete(l4,eles))return tmpLayers=layersByLvl[l4],!0},"canUseAsTmpLvl"),checkLvls=__name(function(dir2){if(!tmpLayers)for(var l4=lvl+dir2;-4<=l4&&l4<=2&&!canUseAsTmpLvl(l4);l4+=dir2);},"checkLvls");checkLvls(1),checkLvls(-1);for(var i3=layers.length-1;i3>=0;i3--){var layer2=layers[i3];layer2.invalid&&removeFromArray(layers,layer2)}},"checkTempLevels")();var getBb=__name(function(){if(!bb){bb=makeBoundingBox();for(var i3=0;i3<eles.length;i3++)updateBoundingBox(bb,eles[i3].boundingBox())}return bb},"getBb"),makeLayer=__name(function(opts){var after=(opts=opts||{}).after;getBb();var w4=Math.ceil(bb.w*scale2),h3=Math.ceil(bb.h*scale2);if(w4>32767||h3>32767)return null;if(w4*h3>16e6)return null;var layer2=self2.makeLayer(bb,lvl);if(null!=after){var index=layers.indexOf(after)+1;layers.splice(index,0,layer2)}else(void 0===opts.insert||opts.insert)&&layers.unshift(layer2);return layer2},"makeLayer");if(self2.skipping&&!firstGet)return null;for(var layer=null,maxElesPerLayer=eles.length/1,allowLazyQueueing=!firstGet,i2=0;i2<eles.length;i2++){var ele=eles[i2],rs=ele._private.rscratch,caches=rs.imgLayerCaches=rs.imgLayerCaches||{},existingLayer=caches[lvl];if(existingLayer)layer=existingLayer;else{if((!layer||layer.eles.length>=maxElesPerLayer||!boundingBoxInBoundingBox(layer.bb,ele.boundingBox()))&&!(layer=makeLayer({insert:!0,after:layer})))return null;tmpLayers||allowLazyQueueing?self2.queueLayer(layer,ele):self2.drawEleInLayer(layer,ele,lvl,pxRatio),layer.eles.push(ele),caches[lvl]=layer}}return tmpLayers||(allowLazyQueueing?null:layers)},LTCp.getEleLevelForLayerLevel=function(lvl,pxRatio){return lvl},LTCp.drawEleInLayer=function(layer,ele,lvl,pxRatio){var r2=this.renderer,context=layer.context,bb=ele.boundingBox();0!==bb.w&&0!==bb.h&&ele.visible()&&(lvl=this.getEleLevelForLayerLevel(lvl,pxRatio),r2.setImgSmoothing(context,!1),r2.drawCachedElement(context,ele,null,null,lvl,true),r2.setImgSmoothing(context,!0))},LTCp.levelIsComplete=function(lvl,eles){var layers=this.layersByLevel[lvl];if(!layers||0===layers.length)return!1;for(var numElesInLayers=0,i2=0;i2<layers.length;i2++){var layer=layers[i2];if(layer.reqs>0)return!1;if(layer.invalid)return!1;numElesInLayers+=layer.eles.length}return numElesInLayers===eles.length},LTCp.validateLayersElesOrdering=function(lvl,eles){var layers=this.layersByLevel[lvl];if(layers)for(var i2=0;i2<layers.length;i2++){for(var layer=layers[i2],offset=-1,j3=0;j3<eles.length;j3++)if(layer.eles[0]===eles[j3]){offset=j3;break}if(offset<0)this.invalidateLayer(layer);else{var o2=offset;for(j3=0;j3<layer.eles.length;j3++)if(layer.eles[j3]!==eles[o2+j3]){this.invalidateLayer(layer);break}}}},LTCp.updateElementsInLayers=function(eles,update2){for(var isEles=element(eles[0]),i2=0;i2<eles.length;i2++)for(var req=isEles?null:eles[i2],ele=isEles?eles[i2]:eles[i2].ele,rs=ele._private.rscratch,caches=rs.imgLayerCaches=rs.imgLayerCaches||{},l4=-4;l4<=2;l4++){var layer=caches[l4];layer&&(req&&this.getEleLevelForLayerLevel(layer.level)!==req.level||update2(layer,ele,req))}},LTCp.haveLayers=function(){for(var haveLayers=!1,l4=-4;l4<=2;l4++){var layers=this.layersByLevel[l4];if(layers&&layers.length>0){haveLayers=!0;break}}return haveLayers},LTCp.invalidateElements=function(eles){var self2=this;0!==eles.length&&(self2.lastInvalidationTime=performanceNow(),0!==eles.length&&self2.haveLayers()&&self2.updateElementsInLayers(eles,__name(function(layer,ele,req){self2.invalidateLayer(layer)},"invalAssocLayers")))},LTCp.invalidateLayer=function(layer){if(this.lastInvalidationTime=performanceNow(),!layer.invalid){var lvl=layer.level,eles=layer.eles,layers=this.layersByLevel[lvl];removeFromArray(layers,layer),layer.elesQueue=[],layer.invalid=!0,layer.replacement&&(layer.replacement.invalid=!0);for(var i2=0;i2<eles.length;i2++){var caches=eles[i2]._private.rscratch.imgLayerCaches;caches&&(caches[lvl]=null)}}},LTCp.refineElementTextures=function(eles){var self2=this;self2.updateElementsInLayers(eles,__name(function(layer,ele,req){var rLyr=layer.replacement;if(rLyr||((rLyr=layer.replacement=self2.makeLayer(layer.bb,layer.level)).replaces=layer,rLyr.eles=layer.eles),!rLyr.reqs)for(var i2=0;i2<rLyr.eles.length;i2++)self2.queueLayer(rLyr,rLyr.eles[i2])},"refineEachEle"))},LTCp.enqueueElementRefinement=function(ele){this.eleTxrDeqs.merge(ele),this.scheduleElementRefinement()},LTCp.queueLayer=function(layer,ele){var q3=this.layersQueue,elesQ=layer.elesQueue,hasId=elesQ.hasId=elesQ.hasId||{};if(!layer.replacement){if(ele){if(hasId[ele.id()])return;elesQ.push(ele),hasId[ele.id()]=!0}layer.reqs?(layer.reqs++,q3.updateItem(layer)):(layer.reqs=1,q3.push(layer))}},LTCp.dequeue=function(pxRatio){for(var q3=this.layersQueue,deqd=[],eleDeqs=0;eleDeqs<1&&0!==q3.size();){var layer=q3.peek();if(layer.replacement)q3.pop();else if(layer.replaces&&layer!==layer.replaces.replacement)q3.pop();else if(layer.invalid)q3.pop();else{var ele=layer.elesQueue.shift();ele&&(this.drawEleInLayer(layer,ele,layer.level,pxRatio),eleDeqs++),0===deqd.length&&deqd.push(!0),0===layer.elesQueue.length&&(q3.pop(),layer.reqs=0,layer.replaces&&this.applyLayerReplacement(layer),this.requestRedraw())}}return deqd},LTCp.applyLayerReplacement=function(layer){var layersInLevel=this.layersByLevel[layer.level],replaced=layer.replaces,index=layersInLevel.indexOf(replaced);if(!(index<0||replaced.invalid)){layersInLevel[index]=layer;for(var i2=0;i2<layer.eles.length;i2++){var _p=layer.eles[i2]._private,cache3=_p.imgLayerCaches=_p.imgLayerCaches||{};cache3&&(cache3[layer.level]=layer)}this.requestRedraw()}},LTCp.requestRedraw=debounce(function(){var r2=this.renderer;r2.redrawHint("eles",!0),r2.redrawHint("drag",!0),r2.redraw()},100),LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:__name(function(self2,pxRatio){return self2.dequeue(pxRatio)},"deq"),onDeqd:noop$1,shouldRedraw:trueify,priority:__name(function(self2){return self2.renderer.beforeRenderPriorities.lyrTxrDeq},"priority")}),CRp$b={},__name(polygon,"polygon"),__name(triangleBackcurve,"triangleBackcurve"),__name(triangleTee,"triangleTee"),__name(circleTriangle,"circleTriangle"),__name(circle$1,"circle$1"),CRp$b.arrowShapeImpl=function(name){return(impl||(impl={polygon:polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle$1}))[name]},(CRp$a={}).drawElement=function(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity){ele.isNode()?this.drawNode(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity):this.drawEdge(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity)},CRp$a.drawElementOverlay=function(context,ele){ele.isNode()?this.drawNodeOverlay(context,ele):this.drawEdgeOverlay(context,ele)},CRp$a.drawElementUnderlay=function(context,ele){ele.isNode()?this.drawNodeUnderlay(context,ele):this.drawEdgeUnderlay(context,ele)},CRp$a.drawCachedElementPortion=function(context,ele,eleTxrCache,pxRatio,lvl,reason,getRotation,getOpacity3){var r2=this,bb=eleTxrCache.getBoundingBox(ele);if(0!==bb.w&&0!==bb.h){var eleCache=eleTxrCache.getElement(ele,bb,pxRatio,lvl,reason);if(null!=eleCache){var opacity=getOpacity3(r2,ele);if(0===opacity)return;var x5,y6,sx,sy,smooth,oldGlobalAlpha,theta=getRotation(r2,ele),x1=bb.x1,y1=bb.y1,w4=bb.w,h3=bb.h;if(0!==theta){var rotPt=eleTxrCache.getRotationPoint(ele);sx=rotPt.x,sy=rotPt.y,context.translate(sx,sy),context.rotate(theta),(smooth=r2.getImgSmoothing(context))||r2.setImgSmoothing(context,!0);var off=eleTxrCache.getRotationOffset(ele);x5=off.x,y6=off.y}else x5=x1,y6=y1;1!==opacity&&(oldGlobalAlpha=context.globalAlpha,context.globalAlpha=oldGlobalAlpha*opacity),context.drawImage(eleCache.texture.canvas,eleCache.x,0,eleCache.width,eleCache.height,x5,y6,w4,h3),1!==opacity&&(context.globalAlpha=oldGlobalAlpha),0!==theta&&(context.rotate(-theta),context.translate(-sx,-sy),smooth||r2.setImgSmoothing(context,!1))}else eleTxrCache.drawElement(context,ele)}},getZeroRotation=__name(function(){return 0},"getZeroRotation"),getLabelRotation=__name(function(r2,ele){return r2.getTextAngle(ele,null)},"getLabelRotation"),getSourceLabelRotation=__name(function(r2,ele){return r2.getTextAngle(ele,"source")},"getSourceLabelRotation"),getTargetLabelRotation=__name(function(r2,ele){return r2.getTextAngle(ele,"target")},"getTargetLabelRotation"),getOpacity=__name(function(r2,ele){return ele.effectiveOpacity()},"getOpacity"),getTextOpacity=__name(function(e3,ele){return ele.pstyle("text-opacity").pfValue*ele.effectiveOpacity()},"getTextOpacity"),CRp$a.drawCachedElement=function(context,ele,pxRatio,extent2,lvl,requestHighQuality){var r2=this,_r$data=r2.data,eleTxrCache=_r$data.eleTxrCache,lblTxrCache=_r$data.lblTxrCache,slbTxrCache=_r$data.slbTxrCache,tlbTxrCache=_r$data.tlbTxrCache,bb=ele.boundingBox(),reason=!0===requestHighQuality?eleTxrCache.reasons.highQuality:null;if(0!==bb.w&&0!==bb.h&&ele.visible()&&(!extent2||boundingBoxesIntersect(bb,extent2))){var isEdge2=ele.isEdge(),badLine=ele.element()._private.rscratch.badLine;r2.drawElementUnderlay(context,ele),r2.drawCachedElementPortion(context,ele,eleTxrCache,pxRatio,lvl,reason,getZeroRotation,getOpacity),isEdge2&&badLine||r2.drawCachedElementPortion(context,ele,lblTxrCache,pxRatio,lvl,reason,getLabelRotation,getTextOpacity),isEdge2&&!badLine&&(r2.drawCachedElementPortion(context,ele,slbTxrCache,pxRatio,lvl,reason,getSourceLabelRotation,getTextOpacity),r2.drawCachedElementPortion(context,ele,tlbTxrCache,pxRatio,lvl,reason,getTargetLabelRotation,getTextOpacity)),r2.drawElementOverlay(context,ele)}},CRp$a.drawElements=function(context,eles){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];this.drawElement(context,ele)}},CRp$a.drawCachedElements=function(context,eles,pxRatio,extent2){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];this.drawCachedElement(context,ele,pxRatio,extent2)}},CRp$a.drawCachedNodes=function(context,eles,pxRatio,extent2){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];ele.isNode()&&this.drawCachedElement(context,ele,pxRatio,extent2)}},CRp$a.drawLayeredElements=function(context,eles,pxRatio,extent2){var layers=this.data.lyrTxrCache.getLayers(eles,pxRatio);if(layers)for(var i2=0;i2<layers.length;i2++){var layer=layers[i2],bb=layer.bb;0!==bb.w&&0!==bb.h&&context.drawImage(layer.canvas,bb.x1,bb.y1,bb.w,bb.h)}else this.drawCachedElements(context,eles,pxRatio,extent2)},(CRp$9={}).drawEdge=function(context,edge,shiftToOriginWithBb){var drawLabel4=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],shouldDrawOverlay=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],shouldDrawOpacity=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r2=this,rs=edge._private.rscratch;if((!shouldDrawOpacity||edge.visible())&&!rs.badLine&&null!=rs.allpts&&!isNaN(rs.allpts[0])){var bb;shiftToOriginWithBb&&(bb=shiftToOriginWithBb,context.translate(-bb.x1,-bb.y1));var opacity=shouldDrawOpacity?edge.pstyle("opacity").value:1,lineOpacity=shouldDrawOpacity?edge.pstyle("line-opacity").value:1,curveStyle=edge.pstyle("curve-style").value,lineStyle=edge.pstyle("line-style").value,edgeWidth=edge.pstyle("width").pfValue,lineCap=edge.pstyle("line-cap").value,lineOutlineWidth=edge.pstyle("line-outline-width").value,lineOutlineColor=edge.pstyle("line-outline-color").value,effectiveLineOpacity=opacity*lineOpacity,effectiveArrowOpacity=opacity*lineOpacity,drawLine=__name(function(){var strokeOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:effectiveLineOpacity;"straight-triangle"===curveStyle?(r2.eleStrokeStyle(context,edge,strokeOpacity),r2.drawEdgeTrianglePath(edge,context,rs.allpts)):(context.lineWidth=edgeWidth,context.lineCap=lineCap,r2.eleStrokeStyle(context,edge,strokeOpacity),r2.drawEdgePath(edge,context,rs.allpts,lineStyle),context.lineCap="butt")},"drawLine"),drawLineOutline=__name(function(){var strokeOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:effectiveLineOpacity;context.lineWidth=edgeWidth+lineOutlineWidth,context.lineCap=lineCap,lineOutlineWidth>0?(r2.colorStrokeStyle(context,lineOutlineColor[0],lineOutlineColor[1],lineOutlineColor[2],strokeOpacity),"straight-triangle"===curveStyle?r2.drawEdgeTrianglePath(edge,context,rs.allpts):(r2.drawEdgePath(edge,context,rs.allpts,lineStyle),context.lineCap="butt")):context.lineCap="butt"},"drawLineOutline"),drawOverlay=__name(function(){shouldDrawOverlay&&r2.drawEdgeOverlay(context,edge)},"drawOverlay"),drawUnderlay=__name(function(){shouldDrawOverlay&&r2.drawEdgeUnderlay(context,edge)},"drawUnderlay"),drawArrows2=__name(function(){var arrowOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:effectiveArrowOpacity;r2.drawArrowheads(context,edge,arrowOpacity)},"drawArrows"),drawText6=__name(function(){r2.drawElementText(context,edge,null,drawLabel4)},"drawText");if(context.lineJoin="round","yes"===edge.pstyle("ghost").value){var gx=edge.pstyle("ghost-offset-x").pfValue,gy=edge.pstyle("ghost-offset-y").pfValue,ghostOpacity=edge.pstyle("ghost-opacity").value,effectiveGhostOpacity=effectiveLineOpacity*ghostOpacity;context.translate(gx,gy),drawLine(effectiveGhostOpacity),drawArrows2(effectiveGhostOpacity),context.translate(-gx,-gy)}else drawLineOutline();drawUnderlay(),drawLine(),drawArrows2(),drawOverlay(),drawText6(),shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)}},drawEdgeOverlayUnderlay=__name(function(overlayOrUnderlay){if(!["overlay","underlay"].includes(overlayOrUnderlay))throw new Error("Invalid state");return function(context,edge){if(edge.visible()){var opacity=edge.pstyle("".concat(overlayOrUnderlay,"-opacity")).value;if(0!==opacity){var usePaths=this.usePaths(),rs=edge._private.rscratch,width3=2*edge.pstyle("".concat(overlayOrUnderlay,"-padding")).pfValue,color2=edge.pstyle("".concat(overlayOrUnderlay,"-color")).value;context.lineWidth=width3,"self"!==rs.edgeType||usePaths?context.lineCap="round":context.lineCap="butt",this.colorStrokeStyle(context,color2[0],color2[1],color2[2],opacity),this.drawEdgePath(edge,context,rs.allpts,"solid")}}}},"drawEdgeOverlayUnderlay"),CRp$9.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay"),CRp$9.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay"),CRp$9.drawEdgePath=function(edge,context,pts2,type3){var path4,rs=edge._private.rscratch,canvasCxt=context,pathCacheHit=!1,usePaths=this.usePaths(),lineDashPattern=edge.pstyle("line-dash-pattern").pfValue,lineDashOffset=edge.pstyle("line-dash-offset").pfValue;if(usePaths){var pathCacheKey=pts2.join("$");rs.pathCacheKey&&rs.pathCacheKey===pathCacheKey?(path4=context=rs.pathCache,pathCacheHit=!0):(path4=context=new Path2D,rs.pathCacheKey=pathCacheKey,rs.pathCache=path4)}if(canvasCxt.setLineDash)switch(type3){case"dotted":canvasCxt.setLineDash([1,1]);break;case"dashed":canvasCxt.setLineDash(lineDashPattern),canvasCxt.lineDashOffset=lineDashOffset;break;case"solid":canvasCxt.setLineDash([])}if(!pathCacheHit&&!rs.badLine)switch(context.beginPath&&context.beginPath(),context.moveTo(pts2[0],pts2[1]),rs.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var i2=2;i2+3<pts2.length;i2+=4)context.quadraticCurveTo(pts2[i2],pts2[i2+1],pts2[i2+2],pts2[i2+3]);break;case"straight":case"haystack":for(var _i=2;_i+1<pts2.length;_i+=2)context.lineTo(pts2[_i],pts2[_i+1]);break;case"segments":if(rs.isRound){var _step,_iterator=_createForOfIteratorHelper(rs.roundCorners);try{for(_iterator.s();!(_step=_iterator.n()).done;){drawPreparedRoundCorner(context,_step.value)}}catch(err){_iterator.e(err)}finally{_iterator.f()}context.lineTo(pts2[pts2.length-2],pts2[pts2.length-1])}else for(var _i2=2;_i2+1<pts2.length;_i2+=2)context.lineTo(pts2[_i2],pts2[_i2+1])}context=canvasCxt,usePaths?context.stroke(path4):context.stroke(),context.setLineDash&&context.setLineDash([])},CRp$9.drawEdgeTrianglePath=function(edge,context,pts2){context.fillStyle=context.strokeStyle;for(var edgeWidth=edge.pstyle("width").pfValue,i2=0;i2+1<pts2.length;i2+=2){var vector=[pts2[i2+2]-pts2[i2],pts2[i2+3]-pts2[i2+1]],length2=Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]),normal=[vector[1]/length2,-vector[0]/length2],triangleHead=[normal[0]*edgeWidth/2,normal[1]*edgeWidth/2];context.beginPath(),context.moveTo(pts2[i2]-triangleHead[0],pts2[i2+1]-triangleHead[1]),context.lineTo(pts2[i2]+triangleHead[0],pts2[i2+1]+triangleHead[1]),context.lineTo(pts2[i2+2],pts2[i2+3]),context.closePath(),context.fill()}},CRp$9.drawArrowheads=function(context,edge,opacity){var rs=edge._private.rscratch,isHaystack="haystack"===rs.edgeType;isHaystack||this.drawArrowhead(context,edge,"source",rs.arrowStartX,rs.arrowStartY,rs.srcArrowAngle,opacity),this.drawArrowhead(context,edge,"mid-target",rs.midX,rs.midY,rs.midtgtArrowAngle,opacity),this.drawArrowhead(context,edge,"mid-source",rs.midX,rs.midY,rs.midsrcArrowAngle,opacity),isHaystack||this.drawArrowhead(context,edge,"target",rs.arrowEndX,rs.arrowEndY,rs.tgtArrowAngle,opacity)},CRp$9.drawArrowhead=function(context,edge,prefix,x5,y6,angle2,opacity){if(!(isNaN(x5)||null==x5||isNaN(y6)||null==y6||isNaN(angle2)||null==angle2)){var arrowShape=edge.pstyle(prefix+"-arrow-shape").value;if("none"!==arrowShape){var arrowClearFill="hollow"===edge.pstyle(prefix+"-arrow-fill").value?"both":"filled",arrowFill=edge.pstyle(prefix+"-arrow-fill").value,edgeWidth=edge.pstyle("width").pfValue,pArrowWidth=edge.pstyle(prefix+"-arrow-width"),arrowWidth="match-line"===pArrowWidth.value?edgeWidth:pArrowWidth.pfValue;"%"===pArrowWidth.units&&(arrowWidth*=edgeWidth);var edgeOpacity=edge.pstyle("opacity").value;void 0===opacity&&(opacity=edgeOpacity);var gco=context.globalCompositeOperation;1===opacity&&"hollow"!==arrowFill||(context.globalCompositeOperation="destination-out",this.colorFillStyle(context,255,255,255,1),this.colorStrokeStyle(context,255,255,255,1),this.drawArrowShape(edge,context,arrowClearFill,edgeWidth,arrowShape,arrowWidth,x5,y6,angle2),context.globalCompositeOperation=gco);var color2=edge.pstyle(prefix+"-arrow-color").value;this.colorFillStyle(context,color2[0],color2[1],color2[2],opacity),this.colorStrokeStyle(context,color2[0],color2[1],color2[2],opacity),this.drawArrowShape(edge,context,arrowFill,edgeWidth,arrowShape,arrowWidth,x5,y6,angle2)}}},CRp$9.drawArrowShape=function(edge,context,fill,edgeWidth,shape,shapeWidth,x5,y6,angle2){var path4,usePaths=this.usePaths()&&"triangle-cross"!==shape,pathCacheHit=!1,canvasContext=context,translation={x:x5,y:y6},scale2=edge.pstyle("arrow-scale").value,size4=this.getArrowWidth(edgeWidth,scale2),shapeImpl=this.arrowShapes[shape];if(usePaths){var cache3=this.arrowPathCache=this.arrowPathCache||[],key=hashString(shape),cachedPath=cache3[key];null!=cachedPath?(path4=context=cachedPath,pathCacheHit=!0):(path4=context=new Path2D,cache3[key]=path4)}pathCacheHit||(context.beginPath&&context.beginPath(),usePaths?shapeImpl.draw(context,1,0,{x:0,y:0},1):shapeImpl.draw(context,size4,angle2,translation,edgeWidth),context.closePath&&context.closePath()),context=canvasContext,usePaths&&(context.translate(x5,y6),context.rotate(angle2),context.scale(size4,size4)),"filled"!==fill&&"both"!==fill||(usePaths?context.fill(path4):context.fill()),"hollow"!==fill&&"both"!==fill||(context.lineWidth=shapeWidth/(usePaths?size4:1),context.lineJoin="miter",usePaths?context.stroke(path4):context.stroke()),usePaths&&(context.scale(1/size4,1/size4),context.rotate(-angle2),context.translate(-x5,-y6))},(CRp$8={}).safeDrawImage=function(context,img,ix,iy,iw,ih,x5,y6,w4,h3){if(!(iw<=0||ih<=0||w4<=0||h3<=0))try{context.drawImage(img,ix,iy,iw,ih,x5,y6,w4,h3)}catch(e3){warn(e3)}},CRp$8.drawInscribedImage=function(context,img,node2,index,nodeOpacity){var r2=this,pos=node2.position(),nodeX=pos.x,nodeY=pos.y,styleObj=node2.cy().style(),getIndexedStyle=styleObj.getIndexedStyle.bind(styleObj),fit2=getIndexedStyle(node2,"background-fit","value",index),repeat2=getIndexedStyle(node2,"background-repeat","value",index),nodeW=node2.width(),nodeH=node2.height(),paddingX2=2*node2.padding(),nodeTW=nodeW+("inner"===getIndexedStyle(node2,"background-width-relative-to","value",index)?0:paddingX2),nodeTH=nodeH+("inner"===getIndexedStyle(node2,"background-height-relative-to","value",index)?0:paddingX2),rs=node2._private.rscratch,shouldClip="node"===getIndexedStyle(node2,"background-clip","value",index),imgOpacity=getIndexedStyle(node2,"background-image-opacity","value",index)*nodeOpacity,smooth=getIndexedStyle(node2,"background-image-smoothing","value",index),cornerRadius=node2.pstyle("corner-radius").value;"auto"!==cornerRadius&&(cornerRadius=node2.pstyle("corner-radius").pfValue);var imgW=img.width||img.cachedW,imgH=img.height||img.cachedH;null!=imgW&&null!=imgH||(document.body.appendChild(img),imgW=img.cachedW=img.width||img.offsetWidth,imgH=img.cachedH=img.height||img.offsetHeight,document.body.removeChild(img));var w4=imgW,h3=imgH;if("auto"!==getIndexedStyle(node2,"background-width","value",index)&&(w4="%"===getIndexedStyle(node2,"background-width","units",index)?getIndexedStyle(node2,"background-width","pfValue",index)*nodeTW:getIndexedStyle(node2,"background-width","pfValue",index)),"auto"!==getIndexedStyle(node2,"background-height","value",index)&&(h3="%"===getIndexedStyle(node2,"background-height","units",index)?getIndexedStyle(node2,"background-height","pfValue",index)*nodeTH:getIndexedStyle(node2,"background-height","pfValue",index)),0!==w4&&0!==h3){if("contain"===fit2)w4*=scale2=Math.min(nodeTW/w4,nodeTH/h3),h3*=scale2;else if("cover"===fit2){var scale2;w4*=scale2=Math.max(nodeTW/w4,nodeTH/h3),h3*=scale2}var x5=nodeX-nodeTW/2,posXUnits=getIndexedStyle(node2,"background-position-x","units",index),posXPfVal=getIndexedStyle(node2,"background-position-x","pfValue",index);x5+="%"===posXUnits?(nodeTW-w4)*posXPfVal:posXPfVal;var offXUnits=getIndexedStyle(node2,"background-offset-x","units",index),offXPfVal=getIndexedStyle(node2,"background-offset-x","pfValue",index);x5+="%"===offXUnits?(nodeTW-w4)*offXPfVal:offXPfVal;var y6=nodeY-nodeTH/2,posYUnits=getIndexedStyle(node2,"background-position-y","units",index),posYPfVal=getIndexedStyle(node2,"background-position-y","pfValue",index);y6+="%"===posYUnits?(nodeTH-h3)*posYPfVal:posYPfVal;var offYUnits=getIndexedStyle(node2,"background-offset-y","units",index),offYPfVal=getIndexedStyle(node2,"background-offset-y","pfValue",index);y6+="%"===offYUnits?(nodeTH-h3)*offYPfVal:offYPfVal,rs.pathCache&&(x5-=nodeX,y6-=nodeY,nodeX=0,nodeY=0);var gAlpha=context.globalAlpha;context.globalAlpha=imgOpacity;var smoothingEnabled=r2.getImgSmoothing(context),isSmoothingSwitched=!1;if("no"===smooth&&smoothingEnabled?(r2.setImgSmoothing(context,!1),isSmoothingSwitched=!0):"yes"!==smooth||smoothingEnabled||(r2.setImgSmoothing(context,!0),isSmoothingSwitched=!0),"no-repeat"===repeat2)shouldClip&&(context.save(),rs.pathCache?context.clip(rs.pathCache):(r2.nodeShapes[r2.getNodeShape(node2)].draw(context,nodeX,nodeY,nodeTW,nodeTH,cornerRadius,rs),context.clip())),r2.safeDrawImage(context,img,0,0,imgW,imgH,x5,y6,w4,h3),shouldClip&&context.restore();else{var pattern=context.createPattern(img,repeat2);context.fillStyle=pattern,r2.nodeShapes[r2.getNodeShape(node2)].draw(context,nodeX,nodeY,nodeTW,nodeTH,cornerRadius,rs),context.translate(x5,y6),context.fill(),context.translate(-x5,-y6)}context.globalAlpha=gAlpha,isSmoothingSwitched&&r2.setImgSmoothing(context,smoothingEnabled)}},(CRp$7={}).eleTextBiggerThanMin=function(ele,scale2){if(!scale2){var zoom2=ele.cy().zoom(),pxRatio=this.getPixelRatio(),lvl=Math.ceil(log22(zoom2*pxRatio));scale2=Math.pow(2,lvl)}return!(ele.pstyle("font-size").pfValue*scale2<ele.pstyle("min-zoomed-font-size").pfValue)},CRp$7.drawElementText=function(context,ele,shiftToOriginWithBb,force,prefix){var useEleOpacity=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r2=this;if(null==force){if(useEleOpacity&&!r2.eleTextBiggerThanMin(ele))return}else if(!1===force)return;if(ele.isNode()){var label=ele.pstyle("label");if(!label||!label.value)return;var justification=r2.getLabelJustification(ele);context.textAlign=justification,context.textBaseline="bottom"}else{var badLine=ele.element()._private.rscratch.badLine,_label=ele.pstyle("label"),srcLabel=ele.pstyle("source-label"),tgtLabel=ele.pstyle("target-label");if(badLine||(!_label||!_label.value)&&(!srcLabel||!srcLabel.value)&&(!tgtLabel||!tgtLabel.value))return;context.textAlign="center",context.textBaseline="bottom"}var bb,applyRotation=!shiftToOriginWithBb;shiftToOriginWithBb&&(bb=shiftToOriginWithBb,context.translate(-bb.x1,-bb.y1)),null==prefix?(r2.drawText(context,ele,null,applyRotation,useEleOpacity),ele.isEdge()&&(r2.drawText(context,ele,"source",applyRotation,useEleOpacity),r2.drawText(context,ele,"target",applyRotation,useEleOpacity))):r2.drawText(context,ele,prefix,applyRotation,useEleOpacity),shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)},CRp$7.getFontCache=function(context){var cache3;this.fontCaches=this.fontCaches||[];for(var i2=0;i2<this.fontCaches.length;i2++)if((cache3=this.fontCaches[i2]).context===context)return cache3;return cache3={context:context},this.fontCaches.push(cache3),cache3},CRp$7.setupTextStyle=function(context,ele){var useEleOpacity=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],labelStyle=ele.pstyle("font-style").strValue,labelSize=ele.pstyle("font-size").pfValue+"px",labelFamily=ele.pstyle("font-family").strValue,labelWeight=ele.pstyle("font-weight").strValue,opacity=useEleOpacity?ele.effectiveOpacity()*ele.pstyle("text-opacity").value:1,outlineOpacity=ele.pstyle("text-outline-opacity").value*opacity,color2=ele.pstyle("color").value,outlineColor=ele.pstyle("text-outline-color").value;context.font=labelStyle+" "+labelWeight+" "+labelSize+" "+labelFamily,context.lineJoin="round",this.colorFillStyle(context,color2[0],color2[1],color2[2],opacity),this.colorStrokeStyle(context,outlineColor[0],outlineColor[1],outlineColor[2],outlineOpacity)},__name(circle3,"circle"),__name(roundRect,"roundRect"),CRp$7.getTextAngle=function(ele,prefix){var theta,rscratch=ele._private.rscratch,pdash=prefix?prefix+"-":"",rotation=ele.pstyle(pdash+"text-rotation");if("autorotate"===rotation.strValue){var textAngle=getPrefixedProperty(rscratch,"labelAngle",prefix);theta=ele.isEdge()?textAngle:0}else theta="none"===rotation.strValue?0:rotation.pfValue;return theta},CRp$7.drawText=function(context,ele,prefix){var applyRotation=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],useEleOpacity=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],rscratch=ele._private.rscratch,parentOpacity=useEleOpacity?ele.effectiveOpacity():1;if(!useEleOpacity||0!==parentOpacity&&0!==ele.pstyle("text-opacity").value){"main"===prefix&&(prefix=null);var orgTextX,orgTextY,textX=getPrefixedProperty(rscratch,"labelX",prefix),textY=getPrefixedProperty(rscratch,"labelY",prefix),text4=this.getLabelText(ele,prefix);if(null!=text4&&""!==text4&&!isNaN(textX)&&!isNaN(textY)){this.setupTextStyle(context,ele,useEleOpacity);var theta,pdash=prefix?prefix+"-":"",textW=getPrefixedProperty(rscratch,"labelWidth",prefix),textH=getPrefixedProperty(rscratch,"labelHeight",prefix),marginX=ele.pstyle(pdash+"text-margin-x").pfValue,marginY=ele.pstyle(pdash+"text-margin-y").pfValue,isEdge2=ele.isEdge(),halign=ele.pstyle("text-halign").value,valign=ele.pstyle("text-valign").value;switch(isEdge2&&(halign="center",valign="center"),textX+=marginX,textY+=marginY,0!==(theta=applyRotation?this.getTextAngle(ele,prefix):0)&&(orgTextX=textX,orgTextY=textY,context.translate(orgTextX,orgTextY),context.rotate(theta),textX=0,textY=0),valign){case"top":break;case"center":textY+=textH/2;break;case"bottom":textY+=textH}var backgroundOpacity=ele.pstyle("text-background-opacity").value,borderOpacity=ele.pstyle("text-border-opacity").value,textBorderWidth=ele.pstyle("text-border-width").pfValue,backgroundPadding=ele.pstyle("text-background-padding").pfValue,styleShape=ele.pstyle("text-background-shape").strValue,rounded="round-rectangle"===styleShape||"roundrectangle"===styleShape,circled="circle"===styleShape;if(backgroundOpacity>0||textBorderWidth>0&&borderOpacity>0){var textFill=context.fillStyle,textStroke=context.strokeStyle,textLineWidth=context.lineWidth,textBackgroundColor=ele.pstyle("text-background-color").value,textBorderColor=ele.pstyle("text-border-color").value,textBorderStyle=ele.pstyle("text-border-style").value,doFill=backgroundOpacity>0,doStroke=textBorderWidth>0&&borderOpacity>0,bgX=textX-backgroundPadding;switch(halign){case"left":bgX-=textW;break;case"center":bgX-=textW/2}var bgY=textY-textH-backgroundPadding,bgW=textW+2*backgroundPadding,bgH=textH+2*backgroundPadding;if(doFill&&(context.fillStyle="rgba(".concat(textBackgroundColor[0],",").concat(textBackgroundColor[1],",").concat(textBackgroundColor[2],",").concat(backgroundOpacity*parentOpacity,")")),doStroke&&(context.strokeStyle="rgba(".concat(textBorderColor[0],",").concat(textBorderColor[1],",").concat(textBorderColor[2],",").concat(borderOpacity*parentOpacity,")"),context.lineWidth=textBorderWidth,context.setLineDash))switch(textBorderStyle){case"dotted":context.setLineDash([1,1]);break;case"dashed":context.setLineDash([4,2]);break;case"double":context.lineWidth=textBorderWidth/4,context.setLineDash([]);break;default:context.setLineDash([])}if(rounded?(context.beginPath(),roundRect(context,bgX,bgY,bgW,bgH,2)):circled?(context.beginPath(),circle3(context,bgX,bgY,bgW,bgH)):(context.beginPath(),context.rect(bgX,bgY,bgW,bgH)),doFill&&context.fill(),doStroke&&context.stroke(),doStroke&&"double"===textBorderStyle){var whiteWidth=textBorderWidth/2;context.beginPath(),rounded?roundRect(context,bgX+whiteWidth,bgY+whiteWidth,bgW-2*whiteWidth,bgH-2*whiteWidth,2):context.rect(bgX+whiteWidth,bgY+whiteWidth,bgW-2*whiteWidth,bgH-2*whiteWidth),context.stroke()}context.fillStyle=textFill,context.strokeStyle=textStroke,context.lineWidth=textLineWidth,context.setLineDash&&context.setLineDash([])}var lineWidth=2*ele.pstyle("text-outline-width").pfValue;if(lineWidth>0&&(context.lineWidth=lineWidth),"wrap"===ele.pstyle("text-wrap").value){var lines=getPrefixedProperty(rscratch,"labelWrapCachedLines",prefix),lineHeight=getPrefixedProperty(rscratch,"labelLineHeight",prefix),halfTextW=textW/2,justification=this.getLabelJustification(ele);switch("auto"===justification||("left"===halign?"left"===justification?textX+=-textW:"center"===justification&&(textX+=-halfTextW):"center"===halign?"left"===justification?textX+=-halfTextW:"right"===justification&&(textX+=halfTextW):"right"===halign&&("center"===justification?textX+=halfTextW:"right"===justification&&(textX+=textW))),valign){case"top":case"center":case"bottom":textY-=(lines.length-1)*lineHeight}for(var l4=0;l4<lines.length;l4++)lineWidth>0&&context.strokeText(lines[l4],textX,textY),context.fillText(lines[l4],textX,textY),textY+=lineHeight}else lineWidth>0&&context.strokeText(text4,textX,textY),context.fillText(text4,textX,textY);0!==theta&&(context.rotate(-theta),context.translate(-orgTextX,-orgTextY))}}},(CRp$6={}).drawNode=function(context,node2,shiftToOriginWithBb){var nodeWidth,nodeHeight,drawLabel4=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],shouldDrawOverlay=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],shouldDrawOpacity=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r2=this,_p=node2._private,rs=_p.rscratch,pos=node2.position();if(number$1(pos.x)&&number$1(pos.y)&&(!shouldDrawOpacity||node2.visible())){var path4,bb,eleOpacity=shouldDrawOpacity?node2.effectiveOpacity():1,usePaths=r2.usePaths(),pathCacheHit=!1,padding2=node2.padding();nodeWidth=node2.width()+2*padding2,nodeHeight=node2.height()+2*padding2,shiftToOriginWithBb&&(bb=shiftToOriginWithBb,context.translate(-bb.x1,-bb.y1));for(var urls=node2.pstyle("background-image").value,urlDefined=new Array(urls.length),image=new Array(urls.length),numImages=0,i2=0;i2<urls.length;i2++){var url=urls[i2];if(urlDefined[i2]=null!=url&&"none"!==url){var bgImgCrossOrigin=node2.cy().style().getIndexedStyle(node2,"background-image-crossorigin","value",i2);numImages++,image[i2]=r2.getCachedImage(url,bgImgCrossOrigin,function(){_p.backgroundTimestamp=Date.now(),node2.emitAndNotify("background")})}}var darkness=node2.pstyle("background-blacken").value,borderWidth=node2.pstyle("border-width").pfValue,bgOpacity=node2.pstyle("background-opacity").value*eleOpacity,borderColor=node2.pstyle("border-color").value,borderStyle=node2.pstyle("border-style").value,borderJoin=node2.pstyle("border-join").value,borderCap=node2.pstyle("border-cap").value,borderPosition=node2.pstyle("border-position").value,borderPattern=node2.pstyle("border-dash-pattern").pfValue,borderOffset=node2.pstyle("border-dash-offset").pfValue,borderOpacity=node2.pstyle("border-opacity").value*eleOpacity,outlineWidth=node2.pstyle("outline-width").pfValue,outlineColor=node2.pstyle("outline-color").value,outlineStyle=node2.pstyle("outline-style").value,outlineOpacity=node2.pstyle("outline-opacity").value*eleOpacity,outlineOffset=node2.pstyle("outline-offset").value,cornerRadius=node2.pstyle("corner-radius").value;"auto"!==cornerRadius&&(cornerRadius=node2.pstyle("corner-radius").pfValue);var setupShapeColor=__name(function(){var bgOpy=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bgOpacity;r2.eleFillStyle(context,node2,bgOpy)},"setupShapeColor"),setupBorderColor=__name(function(){var bdrOpy=arguments.length>0&&void 0!==arguments[0]?arguments[0]:borderOpacity;r2.colorStrokeStyle(context,borderColor[0],borderColor[1],borderColor[2],bdrOpy)},"setupBorderColor"),setupOutlineColor=__name(function(){var otlnOpy=arguments.length>0&&void 0!==arguments[0]?arguments[0]:outlineOpacity;r2.colorStrokeStyle(context,outlineColor[0],outlineColor[1],outlineColor[2],otlnOpy)},"setupOutlineColor"),getPath=__name(function(width3,height2,shape,points){var path5,pathCache=r2.nodePathCache=r2.nodePathCache||[],key=hashStrings("polygon"===shape?shape+","+points.join(","):shape,""+height2,""+width3,""+cornerRadius),cachedPath=pathCache[key],cacheHit=!1;return null!=cachedPath?(path5=cachedPath,cacheHit=!0,rs.pathCache=path5):(path5=new Path2D,pathCache[key]=rs.pathCache=path5),{path:path5,cacheHit:cacheHit}},"getPath"),styleShape=node2.pstyle("shape").strValue,shapePts=node2.pstyle("shape-polygon-points").pfValue;if(usePaths){context.translate(pos.x,pos.y);var shapePath=getPath(nodeWidth,nodeHeight,styleShape,shapePts);path4=shapePath.path,pathCacheHit=shapePath.cacheHit}var drawShape=__name(function(){if(!pathCacheHit){var npos=pos;usePaths&&(npos={x:0,y:0}),r2.nodeShapes[r2.getNodeShape(node2)].draw(path4||context,npos.x,npos.y,nodeWidth,nodeHeight,cornerRadius,rs)}usePaths?context.fill(path4):context.fill()},"drawShape"),drawImages=__name(function(){for(var nodeOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eleOpacity,inside=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],prevBging=_p.backgrounding,totalCompleted=0,_i=0;_i<image.length;_i++){var bgContainment=node2.cy().style().getIndexedStyle(node2,"background-image-containment","value",_i);inside&&"over"===bgContainment||!inside&&"inside"===bgContainment?totalCompleted++:urlDefined[_i]&&image[_i].complete&&!image[_i].error&&(totalCompleted++,r2.drawInscribedImage(context,image[_i],node2,_i,nodeOpacity))}_p.backgrounding=!(totalCompleted===numImages),prevBging!==_p.backgrounding&&node2.updateStyle(!1)},"drawImages"),drawPie=__name(function(){var redrawShape=arguments.length>0&&void 0!==arguments[0]&&arguments[0],pieOpacity=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eleOpacity;r2.hasPie(node2)&&(r2.drawPie(context,node2,pieOpacity),redrawShape&&(usePaths||r2.nodeShapes[r2.getNodeShape(node2)].draw(context,pos.x,pos.y,nodeWidth,nodeHeight,cornerRadius,rs)))},"drawPie"),drawStripe=__name(function(){var redrawShape=arguments.length>0&&void 0!==arguments[0]&&arguments[0],stripeOpacity=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eleOpacity;r2.hasStripe(node2)&&(context.save(),usePaths?context.clip(rs.pathCache):(r2.nodeShapes[r2.getNodeShape(node2)].draw(context,pos.x,pos.y,nodeWidth,nodeHeight,cornerRadius,rs),context.clip()),r2.drawStripe(context,node2,stripeOpacity),context.restore(),redrawShape&&(usePaths||r2.nodeShapes[r2.getNodeShape(node2)].draw(context,pos.x,pos.y,nodeWidth,nodeHeight,cornerRadius,rs)))},"drawStripe"),darken2=__name(function(){var opacity=(darkness>0?darkness:-darkness)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:eleOpacity),c3=darkness>0?0:255;0!==darkness&&(r2.colorFillStyle(context,c3,c3,c3,opacity),usePaths?context.fill(path4):context.fill())},"darken"),drawBorder=__name(function(){if(borderWidth>0){if(context.lineWidth=borderWidth,context.lineCap=borderCap,context.lineJoin=borderJoin,context.setLineDash)switch(borderStyle){case"dotted":context.setLineDash([1,1]);break;case"dashed":context.setLineDash(borderPattern),context.lineDashOffset=borderOffset;break;case"solid":case"double":context.setLineDash([])}if("center"!==borderPosition){if(context.save(),context.lineWidth*=2,"inside"===borderPosition)usePaths?context.clip(path4):context.clip();else{var region=new Path2D;region.rect(-nodeWidth/2-borderWidth,-nodeHeight/2-borderWidth,nodeWidth+2*borderWidth,nodeHeight+2*borderWidth),region.addPath(path4),context.clip(region,"evenodd")}usePaths?context.stroke(path4):context.stroke(),context.restore()}else usePaths?context.stroke(path4):context.stroke();if("double"===borderStyle){context.lineWidth=borderWidth/3;var gco=context.globalCompositeOperation;context.globalCompositeOperation="destination-out",usePaths?context.stroke(path4):context.stroke(),context.globalCompositeOperation=gco}context.setLineDash&&context.setLineDash([])}},"drawBorder"),drawOutline=__name(function(){if(outlineWidth>0){if(context.lineWidth=outlineWidth,context.lineCap="butt",context.setLineDash)switch(outlineStyle){case"dotted":context.setLineDash([1,1]);break;case"dashed":context.setLineDash([4,2]);break;case"solid":case"double":context.setLineDash([])}var npos=pos;usePaths&&(npos={x:0,y:0});var shape=r2.getNodeShape(node2),bWidth=borderWidth;"inside"===borderPosition&&(bWidth=0),"outside"===borderPosition&&(bWidth*=2);var _path,scaleX=(nodeWidth+bWidth+(outlineWidth+outlineOffset))/nodeWidth,scaleY=(nodeHeight+bWidth+(outlineWidth+outlineOffset))/nodeHeight,sWidth=nodeWidth*scaleX,sHeight=nodeHeight*scaleY,points=r2.nodeShapes[shape].points;if(usePaths)_path=getPath(sWidth,sHeight,shape,points).path;if("ellipse"===shape)r2.drawEllipsePath(_path||context,npos.x,npos.y,sWidth,sHeight);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(shape)){var sMult=0,offsetX=0,offsetY=0;"round-diamond"===shape?sMult=1.4*(bWidth+outlineOffset+outlineWidth):"round-heptagon"===shape?(sMult=1.075*(bWidth+outlineOffset+outlineWidth),offsetY=-(bWidth/2+outlineOffset+outlineWidth)/35):"round-hexagon"===shape?sMult=1.12*(bWidth+outlineOffset+outlineWidth):"round-pentagon"===shape?(sMult=1.13*(bWidth+outlineOffset+outlineWidth),offsetY=-(bWidth/2+outlineOffset+outlineWidth)/15):"round-tag"===shape?(sMult=1.12*(bWidth+outlineOffset+outlineWidth),offsetX=.07*(bWidth/2+outlineWidth+outlineOffset)):"round-triangle"===shape&&(sMult=(bWidth+outlineOffset+outlineWidth)*(Math.PI/2),offsetY=-(bWidth+outlineOffset/2+outlineWidth)/Math.PI),0!==sMult&&(sWidth=nodeWidth*(scaleX=(nodeWidth+sMult)/nodeWidth),["round-hexagon","round-tag"].includes(shape)||(sHeight=nodeHeight*(scaleY=(nodeHeight+sMult)/nodeHeight)));for(var halfW=sWidth/2,halfH=sHeight/2,radius2=(cornerRadius="auto"===cornerRadius?getRoundPolygonRadius(sWidth,sHeight):cornerRadius)+(bWidth+outlineWidth+outlineOffset)/2,p3=new Array(points.length/2),corners=new Array(points.length/2),_i2=0;_i2<points.length/2;_i2++)p3[_i2]={x:npos.x+offsetX+halfW*points[2*_i2],y:npos.y+offsetY+halfH*points[2*_i2+1]};var _i3,p1,p22,p32,len=p3.length;for(p1=p3[len-1],_i3=0;_i3<len;_i3++)p22=p3[_i3%len],p32=p3[(_i3+1)%len],corners[_i3]=getRoundCorner(p1,p22,p32,radius2),p1=p22,p22=p32;r2.drawRoundPolygonPath(_path||context,npos.x+offsetX,npos.y+offsetY,nodeWidth*scaleX,nodeHeight*scaleY,points,corners)}else if(["roundrectangle","round-rectangle"].includes(shape))cornerRadius="auto"===cornerRadius?getRoundRectangleRadius(sWidth,sHeight):cornerRadius,r2.drawRoundRectanglePath(_path||context,npos.x,npos.y,sWidth,sHeight,cornerRadius+(bWidth+outlineWidth+outlineOffset)/2);else if(["cutrectangle","cut-rectangle"].includes(shape))cornerRadius="auto"===cornerRadius?getCutRectangleCornerLength():cornerRadius,r2.drawCutRectanglePath(_path||context,npos.x,npos.y,sWidth,sHeight,null,cornerRadius+(bWidth+outlineWidth+outlineOffset)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(shape))cornerRadius="auto"===cornerRadius?getRoundRectangleRadius(sWidth,sHeight):cornerRadius,r2.drawBottomRoundRectanglePath(_path||context,npos.x,npos.y,sWidth,sHeight,cornerRadius+(bWidth+outlineWidth+outlineOffset)/2);else if("barrel"===shape)r2.drawBarrelPath(_path||context,npos.x,npos.y,sWidth,sHeight);else if(shape.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(shape)){points=joinLines(expandPolygon(points,(bWidth+outlineWidth+outlineOffset)/nodeWidth)),r2.drawPolygonPath(_path||context,npos.x,npos.y,nodeWidth,nodeHeight,points)}else{points=joinLines(expandPolygon(points,-((bWidth+outlineWidth+outlineOffset)/nodeWidth))),r2.drawPolygonPath(_path||context,npos.x,npos.y,nodeWidth,nodeHeight,points)}if(usePaths?context.stroke(_path):context.stroke(),"double"===outlineStyle){context.lineWidth=bWidth/3;var gco=context.globalCompositeOperation;context.globalCompositeOperation="destination-out",usePaths?context.stroke(_path):context.stroke(),context.globalCompositeOperation=gco}context.setLineDash&&context.setLineDash([])}},"drawOutline"),drawOverlay=__name(function(){shouldDrawOverlay&&r2.drawNodeOverlay(context,node2,pos,nodeWidth,nodeHeight)},"drawOverlay"),drawUnderlay=__name(function(){shouldDrawOverlay&&r2.drawNodeUnderlay(context,node2,pos,nodeWidth,nodeHeight)},"drawUnderlay"),drawText6=__name(function(){r2.drawElementText(context,node2,null,drawLabel4)},"drawText");if("yes"===node2.pstyle("ghost").value){var gx=node2.pstyle("ghost-offset-x").pfValue,gy=node2.pstyle("ghost-offset-y").pfValue,ghostOpacity=node2.pstyle("ghost-opacity").value,effGhostOpacity=ghostOpacity*eleOpacity;context.translate(gx,gy),setupOutlineColor(),drawOutline(),setupShapeColor(ghostOpacity*bgOpacity),drawShape(),drawImages(effGhostOpacity,!0),setupBorderColor(ghostOpacity*borderOpacity),drawBorder(),drawPie(0!==darkness||0!==borderWidth),drawStripe(0!==darkness||0!==borderWidth),drawImages(effGhostOpacity,!1),darken2(effGhostOpacity),context.translate(-gx,-gy)}usePaths&&context.translate(-pos.x,-pos.y),drawUnderlay(),usePaths&&context.translate(pos.x,pos.y),setupOutlineColor(),drawOutline(),setupShapeColor(),drawShape(),drawImages(eleOpacity,!0),setupBorderColor(),drawBorder(),drawPie(0!==darkness||0!==borderWidth),drawStripe(0!==darkness||0!==borderWidth),drawImages(eleOpacity,!1),darken2(),usePaths&&context.translate(-pos.x,-pos.y),drawText6(),drawOverlay(),shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)}},drawNodeOverlayUnderlay=__name(function(overlayOrUnderlay){if(!["overlay","underlay"].includes(overlayOrUnderlay))throw new Error("Invalid state");return function(context,node2,pos,nodeWidth,nodeHeight){if(node2.visible()){var padding2=node2.pstyle("".concat(overlayOrUnderlay,"-padding")).pfValue,opacity=node2.pstyle("".concat(overlayOrUnderlay,"-opacity")).value,color2=node2.pstyle("".concat(overlayOrUnderlay,"-color")).value,shape=node2.pstyle("".concat(overlayOrUnderlay,"-shape")).value,radius2=node2.pstyle("".concat(overlayOrUnderlay,"-corner-radius")).value;if(opacity>0){if(pos=pos||node2.position(),null==nodeWidth||null==nodeHeight){var _padding=node2.padding();nodeWidth=node2.width()+2*_padding,nodeHeight=node2.height()+2*_padding}this.colorFillStyle(context,color2[0],color2[1],color2[2],opacity),this.nodeShapes[shape].draw(context,pos.x,pos.y,nodeWidth+2*padding2,nodeHeight+2*padding2,radius2),context.fill()}}}},"drawNodeOverlayUnderlay"),CRp$6.drawNodeOverlay=drawNodeOverlayUnderlay("overlay"),CRp$6.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay"),CRp$6.hasPie=function(node2){return(node2=node2[0])._private.hasPie},CRp$6.hasStripe=function(node2){return(node2=node2[0])._private.hasStripe},CRp$6.drawPie=function(context,node2,nodeOpacity,pos){node2=node2[0],pos=pos||node2.position();var holeRadius,cyStyle=node2.cy().style(),pieSize=node2.pstyle("pie-size"),hole=node2.pstyle("pie-hole"),overallStartAngle=node2.pstyle("pie-start-angle").pfValue,x5=pos.x,y6=pos.y,nodeW=node2.width(),nodeH=node2.height(),radius2=Math.min(nodeW,nodeH)/2,lastPercent=0;if(this.usePaths()&&(x5=0,y6=0),"%"===pieSize.units?radius2*=pieSize.pfValue:void 0!==pieSize.pfValue&&(radius2=pieSize.pfValue/2),"%"===hole.units?holeRadius=radius2*hole.pfValue:void 0!==hole.pfValue&&(holeRadius=hole.pfValue/2),!(holeRadius>=radius2))for(var i2=1;i2<=cyStyle.pieBackgroundN;i2++){var size4=node2.pstyle("pie-"+i2+"-background-size").value,color2=node2.pstyle("pie-"+i2+"-background-color").value,opacity=node2.pstyle("pie-"+i2+"-background-opacity").value*nodeOpacity,percent=size4/100;percent+lastPercent>1&&(percent=1-lastPercent);var angleStart=1.5*Math.PI+2*Math.PI*lastPercent,angleEnd=(angleStart+=overallStartAngle)+2*Math.PI*percent;0===size4||lastPercent>=1||lastPercent+percent>1||(0===holeRadius?(context.beginPath(),context.moveTo(x5,y6),context.arc(x5,y6,radius2,angleStart,angleEnd),context.closePath()):(context.beginPath(),context.arc(x5,y6,radius2,angleStart,angleEnd),context.arc(x5,y6,holeRadius,angleEnd,angleStart,!0),context.closePath()),this.colorFillStyle(context,color2[0],color2[1],color2[2],opacity),context.fill(),lastPercent+=percent)}},CRp$6.drawStripe=function(context,node2,nodeOpacity,pos){node2=node2[0],pos=pos||node2.position();var cyStyle=node2.cy().style(),x5=pos.x,y6=pos.y,nodeW=node2.width(),nodeH=node2.height(),lastPercent=0,usePaths=this.usePaths();context.save();var direction=node2.pstyle("stripe-direction").value,stripeSize=node2.pstyle("stripe-size");switch(direction){case"vertical":break;case"righward":context.rotate(-Math.PI/2)}var stripeW=nodeW,stripeH=nodeH;"%"===stripeSize.units?(stripeW*=stripeSize.pfValue,stripeH*=stripeSize.pfValue):void 0!==stripeSize.pfValue&&(stripeW=stripeSize.pfValue,stripeH=stripeSize.pfValue),usePaths&&(x5=0,y6=0),y6-=stripeW/2,x5-=stripeH/2;for(var i2=1;i2<=cyStyle.stripeBackgroundN;i2++){var size4=node2.pstyle("stripe-"+i2+"-background-size").value,color2=node2.pstyle("stripe-"+i2+"-background-color").value,opacity=node2.pstyle("stripe-"+i2+"-background-opacity").value*nodeOpacity,percent=size4/100;percent+lastPercent>1&&(percent=1-lastPercent),0===size4||lastPercent>=1||lastPercent+percent>1||(context.beginPath(),context.rect(x5,y6+stripeH*lastPercent,stripeW,stripeH*percent),context.closePath(),this.colorFillStyle(context,color2[0],color2[1],color2[2],opacity),context.fill(),lastPercent+=percent)}context.restore()},(CRp$5={}).getPixelRatio=function(){var context=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var containerWindow=this.cy.window(),backingStore=context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;return(containerWindow.devicePixelRatio||1)/backingStore},CRp$5.paintCache=function(context){for(var cache3,caches=this.paintCaches=this.paintCaches||[],needToCreateCache=!0,i2=0;i2<caches.length;i2++)if((cache3=caches[i2]).context===context){needToCreateCache=!1;break}return needToCreateCache&&(cache3={context:context},caches.push(cache3)),cache3},CRp$5.createGradientStyleFor=function(context,shapeStyleName,ele,fill,opacity){var gradientStyle,usePaths=this.usePaths(),colors2=ele.pstyle(shapeStyleName+"-gradient-stop-colors").value,positions2=ele.pstyle(shapeStyleName+"-gradient-stop-positions").pfValue;if("radial-gradient"===fill)if(ele.isEdge()){var start3=ele.sourceEndpoint(),end2=ele.targetEndpoint(),mid=ele.midpoint(),d1=dist(start3,mid),d22=dist(end2,mid);gradientStyle=context.createRadialGradient(mid.x,mid.y,0,mid.x,mid.y,Math.max(d1,d22))}else{var pos=usePaths?{x:0,y:0}:ele.position(),width3=ele.paddedWidth(),height2=ele.paddedHeight();gradientStyle=context.createRadialGradient(pos.x,pos.y,0,pos.x,pos.y,Math.max(width3,height2))}else if(ele.isEdge()){var _start=ele.sourceEndpoint(),_end=ele.targetEndpoint();gradientStyle=context.createLinearGradient(_start.x,_start.y,_end.x,_end.y)}else{var _pos=usePaths?{x:0,y:0}:ele.position(),halfWidth=ele.paddedWidth()/2,halfHeight=ele.paddedHeight()/2;switch(ele.pstyle("background-gradient-direction").value){case"to-bottom":gradientStyle=context.createLinearGradient(_pos.x,_pos.y-halfHeight,_pos.x,_pos.y+halfHeight);break;case"to-top":gradientStyle=context.createLinearGradient(_pos.x,_pos.y+halfHeight,_pos.x,_pos.y-halfHeight);break;case"to-left":gradientStyle=context.createLinearGradient(_pos.x+halfWidth,_pos.y,_pos.x-halfWidth,_pos.y);break;case"to-right":gradientStyle=context.createLinearGradient(_pos.x-halfWidth,_pos.y,_pos.x+halfWidth,_pos.y);break;case"to-bottom-right":case"to-right-bottom":gradientStyle=context.createLinearGradient(_pos.x-halfWidth,_pos.y-halfHeight,_pos.x+halfWidth,_pos.y+halfHeight);break;case"to-top-right":case"to-right-top":gradientStyle=context.createLinearGradient(_pos.x-halfWidth,_pos.y+halfHeight,_pos.x+halfWidth,_pos.y-halfHeight);break;case"to-bottom-left":case"to-left-bottom":gradientStyle=context.createLinearGradient(_pos.x+halfWidth,_pos.y-halfHeight,_pos.x-halfWidth,_pos.y+halfHeight);break;case"to-top-left":case"to-left-top":gradientStyle=context.createLinearGradient(_pos.x+halfWidth,_pos.y+halfHeight,_pos.x-halfWidth,_pos.y-halfHeight)}}if(!gradientStyle)return null;for(var hasPositions=positions2.length===colors2.length,length2=colors2.length,i2=0;i2<length2;i2++)gradientStyle.addColorStop(hasPositions?positions2[i2]:i2/(length2-1),"rgba("+colors2[i2][0]+","+colors2[i2][1]+","+colors2[i2][2]+","+opacity+")");return gradientStyle},CRp$5.gradientFillStyle=function(context,ele,fill,opacity){var gradientStyle=this.createGradientStyleFor(context,"background",ele,fill,opacity);if(!gradientStyle)return null;context.fillStyle=gradientStyle},CRp$5.colorFillStyle=function(context,r2,g2,b3,a2){context.fillStyle="rgba("+r2+","+g2+","+b3+","+a2+")"},CRp$5.eleFillStyle=function(context,ele,opacity){var backgroundFill=ele.pstyle("background-fill").value;if("linear-gradient"===backgroundFill||"radial-gradient"===backgroundFill)this.gradientFillStyle(context,ele,backgroundFill,opacity);else{var backgroundColor=ele.pstyle("background-color").value;this.colorFillStyle(context,backgroundColor[0],backgroundColor[1],backgroundColor[2],opacity)}},CRp$5.gradientStrokeStyle=function(context,ele,fill,opacity){var gradientStyle=this.createGradientStyleFor(context,"line",ele,fill,opacity);if(!gradientStyle)return null;context.strokeStyle=gradientStyle},CRp$5.colorStrokeStyle=function(context,r2,g2,b3,a2){context.strokeStyle="rgba("+r2+","+g2+","+b3+","+a2+")"},CRp$5.eleStrokeStyle=function(context,ele,opacity){var lineFill=ele.pstyle("line-fill").value;if("linear-gradient"===lineFill||"radial-gradient"===lineFill)this.gradientStrokeStyle(context,ele,lineFill,opacity);else{var lineColor=ele.pstyle("line-color").value;this.colorStrokeStyle(context,lineColor[0],lineColor[1],lineColor[2],opacity)}},CRp$5.matchCanvasSize=function(container2){var r2=this,data5=r2.data,bb=r2.findContainerClientCoords(),width3=bb[2],height2=bb[3],pixelRatio=r2.getPixelRatio(),mbPxRatio=r2.motionBlurPxRatio;container2!==r2.data.bufferCanvases[r2.MOTIONBLUR_BUFFER_NODE]&&container2!==r2.data.bufferCanvases[r2.MOTIONBLUR_BUFFER_DRAG]||(pixelRatio=mbPxRatio);var canvas,canvasWidth=width3*pixelRatio,canvasHeight=height2*pixelRatio;if(canvasWidth!==r2.canvasWidth||canvasHeight!==r2.canvasHeight){r2.fontCaches=null;var canvasContainer=data5.canvasContainer;canvasContainer.style.width=width3+"px",canvasContainer.style.height=height2+"px";for(var i2=0;i2<r2.CANVAS_LAYERS;i2++)(canvas=data5.canvases[i2]).width=canvasWidth,canvas.height=canvasHeight,canvas.style.width=width3+"px",canvas.style.height=height2+"px";for(i2=0;i2<r2.BUFFER_COUNT;i2++)(canvas=data5.bufferCanvases[i2]).width=canvasWidth,canvas.height=canvasHeight,canvas.style.width=width3+"px",canvas.style.height=height2+"px";r2.textureMult=1,pixelRatio<=1&&(canvas=data5.bufferCanvases[r2.TEXTURE_BUFFER],r2.textureMult=2,canvas.width=canvasWidth*r2.textureMult,canvas.height=canvasHeight*r2.textureMult),r2.canvasWidth=canvasWidth,r2.canvasHeight=canvasHeight,r2.pixelRatio=pixelRatio}},CRp$5.renderTo=function(cxt,zoom2,pan2,pxRatio){this.render({forcedContext:cxt,forcedZoom:zoom2,forcedPan:pan2,drawAllLayers:!0,forcedPxRatio:pxRatio})},CRp$5.clearCanvas=function(){var r2=this,data5=r2.data;function clear19(context){context.clearRect(0,0,r2.canvasWidth,r2.canvasHeight)}__name(clear19,"clear"),clear19(data5.contexts[r2.NODE]),clear19(data5.contexts[r2.DRAG])},CRp$5.render=function(options2){var r2=this;options2=options2||staticEmptyObject();var cy=r2.cy,forcedContext=options2.forcedContext,drawAllLayers=options2.drawAllLayers,drawOnlyNodeLayer=options2.drawOnlyNodeLayer,forcedZoom=options2.forcedZoom,forcedPan=options2.forcedPan,pixelRatio=void 0===options2.forcedPxRatio?this.getPixelRatio():options2.forcedPxRatio,data5=r2.data,needDraw=data5.canvasNeedsRedraw,textureDraw=r2.textureOnViewport&&!forcedContext&&(r2.pinching||r2.hoverData.dragging||r2.swipePanning||r2.data.wheelZooming),motionBlur=void 0!==options2.motionBlur?options2.motionBlur:r2.motionBlur,mbPxRatio=r2.motionBlurPxRatio,hasCompoundNodes2=cy.hasCompoundNodes(),inNodeDragGesture=r2.hoverData.draggingEles,inBoxSelection=!(!r2.hoverData.selecting&&!r2.touchData.selecting),motionBlurFadeEffect=motionBlur=motionBlur&&!forcedContext&&r2.motionBlurEnabled&&!inBoxSelection;forcedContext||(r2.prevPxRatio!==pixelRatio&&(r2.invalidateContainerClientCoordsCache(),r2.matchCanvasSize(r2.container),r2.redrawHint("eles",!0),r2.redrawHint("drag",!0)),r2.prevPxRatio=pixelRatio),!forcedContext&&r2.motionBlurTimeout&&clearTimeout(r2.motionBlurTimeout),motionBlur&&(null==r2.mbFrames&&(r2.mbFrames=0),r2.mbFrames++,r2.mbFrames<3&&(motionBlurFadeEffect=!1),r2.mbFrames>r2.minMbLowQualFrames&&(r2.motionBlurPxRatio=r2.mbPxRBlurry)),r2.clearingMotionBlur&&(r2.motionBlurPxRatio=1),r2.textureDrawLastFrame&&!textureDraw&&(needDraw[r2.NODE]=!0,needDraw[r2.SELECT_BOX]=!0);var style3=cy.style(),zoom2=cy.zoom(),effectiveZoom=void 0!==forcedZoom?forcedZoom:zoom2,pan2=cy.pan(),effectivePan={x:pan2.x,y:pan2.y},vp={zoom:zoom2,pan:{x:pan2.x,y:pan2.y}},prevVp=r2.prevViewport;void 0===prevVp||vp.zoom!==prevVp.zoom||vp.pan.x!==prevVp.pan.x||vp.pan.y!==prevVp.pan.y||inNodeDragGesture&&!hasCompoundNodes2||(r2.motionBlurPxRatio=1),forcedPan&&(effectivePan=forcedPan),effectiveZoom*=pixelRatio,effectivePan.x*=pixelRatio,effectivePan.y*=pixelRatio;var eles=r2.getCachedZSortedEles();function mbclear(context2,x5,y6,w4,h3){var gco=context2.globalCompositeOperation;context2.globalCompositeOperation="destination-out",r2.colorFillStyle(context2,255,255,255,r2.motionBlurTransparency),context2.fillRect(x5,y6,w4,h3),context2.globalCompositeOperation=gco}function setContextTransform2(context2,clear20){var ePan,eZoom,w4,h3;r2.clearingMotionBlur||context2!==data5.bufferContexts[r2.MOTIONBLUR_BUFFER_NODE]&&context2!==data5.bufferContexts[r2.MOTIONBLUR_BUFFER_DRAG]?(ePan=effectivePan,eZoom=effectiveZoom,w4=r2.canvasWidth,h3=r2.canvasHeight):(ePan={x:pan2.x*mbPxRatio,y:pan2.y*mbPxRatio},eZoom=zoom2*mbPxRatio,w4=r2.canvasWidth*mbPxRatio,h3=r2.canvasHeight*mbPxRatio),context2.setTransform(1,0,0,1,0,0),"motionBlur"===clear20?mbclear(context2,0,0,w4,h3):forcedContext||void 0!==clear20&&!clear20||context2.clearRect(0,0,w4,h3),drawAllLayers||(context2.translate(ePan.x,ePan.y),context2.scale(eZoom,eZoom)),forcedPan&&context2.translate(forcedPan.x,forcedPan.y),forcedZoom&&context2.scale(forcedZoom,forcedZoom)}if(__name(mbclear,"mbclear"),__name(setContextTransform2,"setContextTransform"),textureDraw||(r2.textureDrawLastFrame=!1),textureDraw){if(r2.textureDrawLastFrame=!0,!r2.textureCache){r2.textureCache={},r2.textureCache.bb=cy.mutableElements().boundingBox(),r2.textureCache.texture=r2.data.bufferCanvases[r2.TEXTURE_BUFFER];var cxt=r2.data.bufferContexts[r2.TEXTURE_BUFFER];cxt.setTransform(1,0,0,1,0,0),cxt.clearRect(0,0,r2.canvasWidth*r2.textureMult,r2.canvasHeight*r2.textureMult),r2.render({forcedContext:cxt,drawOnlyNodeLayer:!0,forcedPxRatio:pixelRatio*r2.textureMult}),(vp=r2.textureCache.viewport={zoom:cy.zoom(),pan:cy.pan(),width:r2.canvasWidth,height:r2.canvasHeight}).mpan={x:(0-vp.pan.x)/vp.zoom,y:(0-vp.pan.y)/vp.zoom}}needDraw[r2.DRAG]=!1,needDraw[r2.NODE]=!1;var context=data5.contexts[r2.NODE],texture=r2.textureCache.texture;vp=r2.textureCache.viewport;context.setTransform(1,0,0,1,0,0),motionBlur?mbclear(context,0,0,vp.width,vp.height):context.clearRect(0,0,vp.width,vp.height);var outsideBgColor=style3.core("outside-texture-bg-color").value,outsideBgOpacity=style3.core("outside-texture-bg-opacity").value;r2.colorFillStyle(context,outsideBgColor[0],outsideBgColor[1],outsideBgColor[2],outsideBgOpacity),context.fillRect(0,0,vp.width,vp.height);zoom2=cy.zoom();setContextTransform2(context,!1),context.clearRect(vp.mpan.x,vp.mpan.y,vp.width/vp.zoom/pixelRatio,vp.height/vp.zoom/pixelRatio),context.drawImage(texture,vp.mpan.x,vp.mpan.y,vp.width/vp.zoom/pixelRatio,vp.height/vp.zoom/pixelRatio)}else r2.textureOnViewport&&!forcedContext&&(r2.textureCache=null);var extent2=cy.extent(),vpManip=r2.pinching||r2.hoverData.dragging||r2.swipePanning||r2.data.wheelZooming||r2.hoverData.draggingEles||r2.cy.animated(),hideEdges=r2.hideEdgesOnViewport&&vpManip,needMbClear=[];if(needMbClear[r2.NODE]=!needDraw[r2.NODE]&&motionBlur&&!r2.clearedForMotionBlur[r2.NODE]||r2.clearingMotionBlur,needMbClear[r2.NODE]&&(r2.clearedForMotionBlur[r2.NODE]=!0),needMbClear[r2.DRAG]=!needDraw[r2.DRAG]&&motionBlur&&!r2.clearedForMotionBlur[r2.DRAG]||r2.clearingMotionBlur,needMbClear[r2.DRAG]&&(r2.clearedForMotionBlur[r2.DRAG]=!0),needDraw[r2.NODE]||drawAllLayers||drawOnlyNodeLayer||needMbClear[r2.NODE]){var useBuffer=motionBlur&&!needMbClear[r2.NODE]&&1!==mbPxRatio;setContextTransform2(context=forcedContext||(useBuffer?r2.data.bufferContexts[r2.MOTIONBLUR_BUFFER_NODE]:data5.contexts[r2.NODE]),motionBlur&&!useBuffer?"motionBlur":void 0),hideEdges?r2.drawCachedNodes(context,eles.nondrag,pixelRatio,extent2):r2.drawLayeredElements(context,eles.nondrag,pixelRatio,extent2),r2.debug&&r2.drawDebugPoints(context,eles.nondrag),drawAllLayers||motionBlur||(needDraw[r2.NODE]=!1)}if(!drawOnlyNodeLayer&&(needDraw[r2.DRAG]||drawAllLayers||needMbClear[r2.DRAG])){useBuffer=motionBlur&&!needMbClear[r2.DRAG]&&1!==mbPxRatio;setContextTransform2(context=forcedContext||(useBuffer?r2.data.bufferContexts[r2.MOTIONBLUR_BUFFER_DRAG]:data5.contexts[r2.DRAG]),motionBlur&&!useBuffer?"motionBlur":void 0),hideEdges?r2.drawCachedNodes(context,eles.drag,pixelRatio,extent2):r2.drawCachedElements(context,eles.drag,pixelRatio,extent2),r2.debug&&r2.drawDebugPoints(context,eles.drag),drawAllLayers||motionBlur||(needDraw[r2.DRAG]=!1)}if(this.drawSelectionRectangle(options2,setContextTransform2),motionBlur&&1!==mbPxRatio){var cxtNode=data5.contexts[r2.NODE],txtNode=r2.data.bufferCanvases[r2.MOTIONBLUR_BUFFER_NODE],cxtDrag=data5.contexts[r2.DRAG],txtDrag=r2.data.bufferCanvases[r2.MOTIONBLUR_BUFFER_DRAG],drawMotionBlur=__name(function(cxt2,txt,needClear){cxt2.setTransform(1,0,0,1,0,0),needClear||!motionBlurFadeEffect?cxt2.clearRect(0,0,r2.canvasWidth,r2.canvasHeight):mbclear(cxt2,0,0,r2.canvasWidth,r2.canvasHeight);var pxr=mbPxRatio;cxt2.drawImage(txt,0,0,r2.canvasWidth*pxr,r2.canvasHeight*pxr,0,0,r2.canvasWidth,r2.canvasHeight)},"drawMotionBlur");(needDraw[r2.NODE]||needMbClear[r2.NODE])&&(drawMotionBlur(cxtNode,txtNode,needMbClear[r2.NODE]),needDraw[r2.NODE]=!1),(needDraw[r2.DRAG]||needMbClear[r2.DRAG])&&(drawMotionBlur(cxtDrag,txtDrag,needMbClear[r2.DRAG]),needDraw[r2.DRAG]=!1)}r2.prevViewport=vp,r2.clearingMotionBlur&&(r2.clearingMotionBlur=!1,r2.motionBlurCleared=!0,r2.motionBlur=!0),motionBlur&&(r2.motionBlurTimeout=setTimeout(function(){r2.motionBlurTimeout=null,r2.clearedForMotionBlur[r2.NODE]=!1,r2.clearedForMotionBlur[r2.DRAG]=!1,r2.motionBlur=!1,r2.clearingMotionBlur=!textureDraw,r2.mbFrames=0,needDraw[r2.NODE]=!0,needDraw[r2.DRAG]=!0,r2.redraw()},100)),forcedContext||cy.emit("render")},CRp$5.drawSelectionRectangle=function(options2,setContextTransform2){var r2=this,cy=r2.cy,data5=r2.data,style3=cy.style(),drawOnlyNodeLayer=options2.drawOnlyNodeLayer,drawAllLayers=options2.drawAllLayers,needDraw=data5.canvasNeedsRedraw,forcedContext=options2.forcedContext;if(r2.showFps||!drawOnlyNodeLayer&&needDraw[r2.SELECT_BOX]&&!drawAllLayers){var context=forcedContext||data5.contexts[r2.SELECT_BOX];if(setContextTransform2(context),1==r2.selection[4]&&(r2.hoverData.selecting||r2.touchData.selecting)){var zoom2=r2.cy.zoom(),borderWidth=style3.core("selection-box-border-width").value/zoom2;context.lineWidth=borderWidth,context.fillStyle="rgba("+style3.core("selection-box-color").value[0]+","+style3.core("selection-box-color").value[1]+","+style3.core("selection-box-color").value[2]+","+style3.core("selection-box-opacity").value+")",context.fillRect(r2.selection[0],r2.selection[1],r2.selection[2]-r2.selection[0],r2.selection[3]-r2.selection[1]),borderWidth>0&&(context.strokeStyle="rgba("+style3.core("selection-box-border-color").value[0]+","+style3.core("selection-box-border-color").value[1]+","+style3.core("selection-box-border-color").value[2]+","+style3.core("selection-box-opacity").value+")",context.strokeRect(r2.selection[0],r2.selection[1],r2.selection[2]-r2.selection[0],r2.selection[3]-r2.selection[1]))}if(data5.bgActivePosistion&&!r2.hoverData.selecting){zoom2=r2.cy.zoom();var pos=data5.bgActivePosistion;context.fillStyle="rgba("+style3.core("active-bg-color").value[0]+","+style3.core("active-bg-color").value[1]+","+style3.core("active-bg-color").value[2]+","+style3.core("active-bg-opacity").value+")",context.beginPath(),context.arc(pos.x,pos.y,style3.core("active-bg-size").pfValue/zoom2,0,2*Math.PI),context.fill()}var timeToRender=r2.lastRedrawTime;if(r2.showFps&&timeToRender){timeToRender=Math.round(timeToRender);var fps=Math.round(1e3/timeToRender),text4="1 frame = "+timeToRender+" ms = "+fps+" fps";if(context.setTransform(1,0,0,1,0,0),context.fillStyle="rgba(255, 0, 0, 0.75)",context.strokeStyle="rgba(255, 0, 0, 0.75)",context.font="30px Arial",!fpsHeight){var dims=context.measureText(text4);fpsHeight=dims.actualBoundingBoxAscent}context.fillText(text4,0,fpsHeight);context.strokeRect(0,fpsHeight+10,250,20),context.fillRect(0,fpsHeight+10,250*Math.min(fps/60,1),20)}drawAllLayers||(needDraw[r2.SELECT_BOX]=!1)}},__name(compileShader,"compileShader"),__name(createProgram,"createProgram"),__name(createTextureCanvas,"createTextureCanvas"),__name(getEffectivePanZoom,"getEffectivePanZoom"),__name(getEffectiveZoom,"getEffectiveZoom"),__name(modelToRenderedPosition2,"modelToRenderedPosition"),__name(isSimpleShape,"isSimpleShape"),__name(arrayEqual,"arrayEqual"),__name(toWebGLColor,"toWebGLColor"),__name(indexToVec4,"indexToVec4"),__name(vec4ToIndex,"vec4ToIndex"),__name(createTexture,"createTexture"),__name(getTypeInfo,"getTypeInfo"),__name(createTypedArray,"createTypedArray"),__name(createTypedArrayView,"createTypedArrayView"),__name(createBufferStaticDraw,"createBufferStaticDraw"),__name(createBufferDynamicDraw,"createBufferDynamicDraw"),__name(create3x3MatrixBufferDynamicDraw,"create3x3MatrixBufferDynamicDraw"),__name(createPickingFrameBuffer,"createPickingFrameBuffer"),ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,Math.hypot||(Math.hypot=function(){for(var y6=0,i2=arguments.length;i2--;)y6+=arguments[i2]*arguments[i2];return Math.sqrt(y6)}),__name(create3,"create"),__name(identity6,"identity"),__name(multiply,"multiply"),__name(translate,"translate"),__name(rotate,"rotate"),__name(scale,"scale"),__name(projection,"projection"),Atlas=function(){function Atlas2(r2,texSize,texRows,createTextureCanvas2){_classCallCheck(this,Atlas2),this.debugID=Math.floor(1e4*Math.random()),this.r=r2,this.texSize=texSize,this.texRows=texRows,this.texHeight=Math.floor(texSize/texRows),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=createTextureCanvas2(r2,texSize,texSize),this.scratch=createTextureCanvas2(r2,texSize,this.texHeight,"scratch")}return __name(Atlas2,"Atlas"),_createClass(Atlas2,[{key:"lock",value:__name(function(){this.locked=!0},"lock")},{key:"getKeys",value:__name(function(){return new Set(this.keyToLocation.keys())},"getKeys")},{key:"getScale",value:__name(function(_ref){var w4=_ref.w,h3=_ref.h,texHeight=this.texHeight,maxTexWidth=this.texSize,scale2=texHeight/h3,texW=w4*scale2,texH=h3*scale2;return texW>maxTexWidth&&(texW=w4*(scale2=maxTexWidth/w4),texH=h3*scale2),{scale:scale2,texW:texW,texH:texH}},"getScale")},{key:"draw",value:__name(function(key,bb,doDrawing){var _this=this;if(this.locked)throw new Error("can't draw, atlas is locked");var texSize=this.texSize,texRows=this.texRows,texHeight=this.texHeight,_this$getScale=this.getScale(bb),scale2=_this$getScale.scale,texW=_this$getScale.texW,texH=_this$getScale.texH,drawAt=__name(function(location,canvas){if(doDrawing&&canvas){var context=canvas.context,x5=location.x,row=location.row,xOffset=x5,yOffset=texHeight*row;context.save(),context.translate(xOffset,yOffset),context.scale(scale2,scale2),doDrawing(context,bb),context.restore()}},"drawAt"),locations=[null,null],drawNormal=__name(function(){drawAt(_this.freePointer,_this.canvas),locations[0]={x:_this.freePointer.x,y:_this.freePointer.row*texHeight,w:texW,h:texH},locations[1]={x:_this.freePointer.x+texW,y:_this.freePointer.row*texHeight,w:0,h:texH},_this.freePointer.x+=texW,_this.freePointer.x==texSize&&(_this.freePointer.x=0,_this.freePointer.row++)},"drawNormal"),drawWrapped=__name(function(){var scratch=_this.scratch,canvas=_this.canvas;scratch.clear(),drawAt({x:0,row:0},scratch);var firstTexW=texSize-_this.freePointer.x,secondTexW=texW-firstTexW,h3=texHeight,dx=_this.freePointer.x,dy=_this.freePointer.row*texHeight,w4=firstTexW;canvas.context.drawImage(scratch,0,0,w4,h3,dx,dy,w4,h3),locations[0]={x:dx,y:dy,w:w4,h:texH};var sx=firstTexW,_dy=(_this.freePointer.row+1)*texHeight,_w=secondTexW;canvas&&canvas.context.drawImage(scratch,sx,0,_w,h3,0,_dy,_w,h3),locations[1]={x:0,y:_dy,w:_w,h:texH},_this.freePointer.x=secondTexW,_this.freePointer.row++},"drawWrapped"),moveToStartOfNextRow=__name(function(){_this.freePointer.x=0,_this.freePointer.row++},"moveToStartOfNextRow");if(this.freePointer.x+texW<=texSize)drawNormal();else{if(this.freePointer.row>=texRows-1)return!1;this.freePointer.x===texSize?(moveToStartOfNextRow(),drawNormal()):this.enableWrapping?drawWrapped():(moveToStartOfNextRow(),drawNormal())}return this.keyToLocation.set(key,locations),this.needsBuffer=!0,locations},"draw")},{key:"getOffsets",value:__name(function(key){return this.keyToLocation.get(key)},"getOffsets")},{key:"isEmpty",value:__name(function(){return 0===this.freePointer.x&&0===this.freePointer.row},"isEmpty")},{key:"canFit",value:__name(function(bb){if(this.locked)return!1;var texSize=this.texSize,texRows=this.texRows,texW=this.getScale(bb).texW;return!(this.freePointer.x+texW>texSize)||this.freePointer.row<texRows-1},"canFit")},{key:"bufferIfNeeded",value:__name(function(gl){this.texture||(this.texture=createTexture(gl,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))},"bufferIfNeeded")},{key:"dispose",value:__name(function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0},"dispose")}])}(),AtlasCollection=function(){function AtlasCollection2(r2,texSize,texRows,createTextureCanvas2){_classCallCheck(this,AtlasCollection2),this.r=r2,this.texSize=texSize,this.texRows=texRows,this.createTextureCanvas=createTextureCanvas2,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return __name(AtlasCollection2,"AtlasCollection"),_createClass(AtlasCollection2,[{key:"getKeys",value:__name(function(){return new Set(this.styleKeyToAtlas.keys())},"getKeys")},{key:"_createAtlas",value:__name(function(){var r2=this.r,texSize=this.texSize,texRows=this.texRows,createTextureCanvas2=this.createTextureCanvas;return new Atlas(r2,texSize,texRows,createTextureCanvas2)},"_createAtlas")},{key:"_getScratchCanvas",value:__name(function(){if(!this.scratch){var r2=this.r,texSize=this.texSize,texRows=this.texRows,createTextureCanvas2=this.createTextureCanvas,texHeight=Math.floor(texSize/texRows);this.scratch=createTextureCanvas2(r2,texSize,texHeight,"scratch")}return this.scratch},"_getScratchCanvas")},{key:"draw",value:__name(function(key,bb,doDrawing){var atlas=this.styleKeyToAtlas.get(key);return atlas||((atlas=this.atlases[this.atlases.length-1])&&atlas.canFit(bb)||(atlas&&atlas.lock(),atlas=this._createAtlas(),this.atlases.push(atlas)),atlas.draw(key,bb,doDrawing),this.styleKeyToAtlas.set(key,atlas)),atlas},"draw")},{key:"getAtlas",value:__name(function(key){return this.styleKeyToAtlas.get(key)},"getAtlas")},{key:"hasAtlas",value:__name(function(key){return this.styleKeyToAtlas.has(key)},"hasAtlas")},{key:"markKeyForGC",value:__name(function(key){this.markedKeys.add(key)},"markKeyForGC")},{key:"gc",value:__name(function(){var _this2=this,markedKeys=this.markedKeys;if(0!==markedKeys.size){var _step,newAtlases=[],newStyleKeyToAtlas=new Map,newAtlas=null,_iterator=_createForOfIteratorHelper(this.atlases);try{var _loop=__name(function(){var atlas=_step.value,keys2=atlas.getKeys(),keysToCollect=intersection2(markedKeys,keys2);if(0===keysToCollect.size)return newAtlases.push(atlas),keys2.forEach(function(k2){return newStyleKeyToAtlas.set(k2,atlas)}),1;newAtlas||(newAtlas=_this2._createAtlas(),newAtlases.push(newAtlas));var _step2,_iterator2=_createForOfIteratorHelper(keys2);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;if(!keysToCollect.has(key)){var _atlas$getOffsets2=_slicedToArray(atlas.getOffsets(key),2),s1=_atlas$getOffsets2[0],s2=_atlas$getOffsets2[1];newAtlas.canFit({w:s1.w+s2.w,h:s1.h})||(newAtlas.lock(),newAtlas=_this2._createAtlas(),newAtlases.push(newAtlas)),atlas.canvas&&(_this2._copyTextureToNewAtlas(key,atlas,newAtlas),newStyleKeyToAtlas.set(key,newAtlas))}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}atlas.dispose()},"_loop");for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}this.atlases=newAtlases,this.styleKeyToAtlas=newStyleKeyToAtlas,this.markedKeys=new Set}else console.log("nothing to garbage collect")},"gc")},{key:"_copyTextureToNewAtlas",value:__name(function(key,oldAtlas,newAtlas){var _oldAtlas$getOffsets2=_slicedToArray(oldAtlas.getOffsets(key),2),s1=_oldAtlas$getOffsets2[0],s2=_oldAtlas$getOffsets2[1];if(0===s2.w)newAtlas.draw(key,s1,function(context){context.drawImage(oldAtlas.canvas,s1.x,s1.y,s1.w,s1.h,0,0,s1.w,s1.h)});else{var scratch=this._getScratchCanvas();scratch.clear(),scratch.context.drawImage(oldAtlas.canvas,s1.x,s1.y,s1.w,s1.h,0,0,s1.w,s1.h),scratch.context.drawImage(oldAtlas.canvas,s2.x,s2.y,s2.w,s2.h,s1.w,0,s2.w,s2.h);var w4=s1.w+s2.w,h3=s1.h;newAtlas.draw(key,{w:w4,h:h3},function(context){context.drawImage(scratch,0,0,w4,h3,0,0,w4,h3)})}},"_copyTextureToNewAtlas")},{key:"getCounts",value:__name(function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}},"getCounts")}])}(),__name(intersection2,"intersection"),AtlasManager=function(){function AtlasManager2(r2,globalOptions){_classCallCheck(this,AtlasManager2),this.r=r2,this.globalOptions=globalOptions,this.atlasSize=globalOptions.webglTexSize,this.maxAtlasesPerBatch=globalOptions.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return __name(AtlasManager2,"AtlasManager"),_createClass(AtlasManager2,[{key:"getAtlasSize",value:__name(function(){return this.atlasSize},"getAtlasSize")},{key:"addAtlasCollection",value:__name(function(collectionName,atlasCollectionOptions){var _this$globalOptions=this.globalOptions,webglTexSize=_this$globalOptions.webglTexSize,createTextureCanvas2=_this$globalOptions.createTextureCanvas,texRows=atlasCollectionOptions.texRows,cachedCreateTextureCanvas=this._cacheScratchCanvas(createTextureCanvas2),atlasCollection=new AtlasCollection(this.r,webglTexSize,texRows,cachedCreateTextureCanvas);this.collections.set(collectionName,atlasCollection)},"addAtlasCollection")},{key:"addRenderType",value:__name(function(type3,renderTypeOptions){var collection4=renderTypeOptions.collection;if(!this.collections.has(collection4))throw new Error("invalid atlas collection name '".concat(collection4,"'"));var atlasCollection=this.collections.get(collection4),opts=extend4({type:type3,atlasCollection:atlasCollection},renderTypeOptions);this.renderTypes.set(type3,opts)},"addRenderType")},{key:"getRenderTypeOpts",value:__name(function(type3){return this.renderTypes.get(type3)},"getRenderTypeOpts")},{key:"getAtlasCollection",value:__name(function(name){return this.collections.get(name)},"getAtlasCollection")},{key:"_cacheScratchCanvas",value:__name(function(createTextureCanvas2){var prevW=-1,prevH=-1,scratchCanvas=null;return function(r2,w4,h3,scratch){return scratch?(scratchCanvas&&w4==prevW&&h3==prevH||(prevW=w4,prevH=h3,scratchCanvas=createTextureCanvas2(r2,w4,h3)),scratchCanvas):createTextureCanvas2(r2,w4,h3)}},"_cacheScratchCanvas")},{key:"_key",value:__name(function(renderType,id30){return"".concat(renderType,"-").concat(id30)},"_key")},{key:"invalidate",value:__name(function(eles){var _step3,_this3=this,_ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$forceRedraw=_ref2.forceRedraw,forceRedraw=void 0!==_ref2$forceRedraw&&_ref2$forceRedraw,_ref2$filterEle=_ref2.filterEle,filterEle=void 0===_ref2$filterEle?function(){return!0}:_ref2$filterEle,_ref2$filterType=_ref2.filterType,filterType=void 0===_ref2$filterType?function(){return!0}:_ref2$filterType,needGC=!1,runGCNow=!1,_iterator3=_createForOfIteratorHelper(eles);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var ele=_step3.value;if(filterEle(ele)){var _step4,_iterator4=_createForOfIteratorHelper(this.renderTypes.values());try{var _loop2=__name(function(){var opts=_step4.value,renderType=opts.type;if(filterType(renderType)){var atlasCollection=_this3.collections.get(opts.collection),key=opts.getKey(ele),keyArray=Array.isArray(key)?key:[key];if(forceRedraw)keyArray.forEach(function(key2){return atlasCollection.markKeyForGC(key2)}),runGCNow=!0;else{var id30=opts.getID?opts.getID(ele):ele.id(),mapKey=_this3._key(renderType,id30),oldKeyArray=_this3.typeAndIdToKey.get(mapKey);void 0===oldKeyArray||arrayEqual(keyArray,oldKeyArray)||(needGC=!0,_this3.typeAndIdToKey.delete(mapKey),oldKeyArray.forEach(function(oldKey){return atlasCollection.markKeyForGC(oldKey)}))}}},"_loop2");for(_iterator4.s();!(_step4=_iterator4.n()).done;)_loop2()}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return runGCNow&&(this.gc(),needGC=!1),needGC},"invalidate")},{key:"gc",value:__name(function(){var _step5,_iterator5=_createForOfIteratorHelper(this.collections.values());try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){_step5.value.gc()}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}},"gc")},{key:"getOrCreateAtlas",value:__name(function(ele,type3,bb,styleKey){var opts=this.renderTypes.get(type3),atlasCollection=this.collections.get(opts.collection),drawn=!1,atlas=atlasCollection.draw(styleKey,bb,function(context){opts.drawClipped?(context.save(),context.beginPath(),context.rect(0,0,bb.w,bb.h),context.clip(),opts.drawElement(context,ele,bb,!0,!0),context.restore()):opts.drawElement(context,ele,bb,!0,!0),drawn=!0});if(drawn){var id30=opts.getID?opts.getID(ele):ele.id(),mapKey=this._key(type3,id30);this.typeAndIdToKey.has(mapKey)?this.typeAndIdToKey.get(mapKey).push(styleKey):this.typeAndIdToKey.set(mapKey,[styleKey])}return atlas},"getOrCreateAtlas")},{key:"getAtlasInfo",value:__name(function(ele,type3){var _this4=this,opts=this.renderTypes.get(type3),key=opts.getKey(ele);return(Array.isArray(key)?key:[key]).map(function(styleKey){var bb=opts.getBoundingBox(ele,styleKey),atlas=_this4.getOrCreateAtlas(ele,type3,bb,styleKey),_atlas$getOffsets4=_slicedToArray(atlas.getOffsets(styleKey),2),tex1=_atlas$getOffsets4[0];return{atlas:atlas,tex:tex1,tex1:tex1,tex2:_atlas$getOffsets4[1],bb:bb}})},"getAtlasInfo")},{key:"getDebugInfo",value:__name(function(){var _step6,debugInfo=[],_iterator6=_createForOfIteratorHelper(this.collections);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step6$value=_slicedToArray(_step6.value,2),name=_step6$value[0],_collection$getCounts=_step6$value[1].getCounts(),keyCount=_collection$getCounts.keyCount,atlasCount=_collection$getCounts.atlasCount;debugInfo.push({type:name,keyCount:keyCount,atlasCount:atlasCount})}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return debugInfo},"getDebugInfo")}])}(),AtlasBatchManager=function(){function AtlasBatchManager2(globalOptions){_classCallCheck(this,AtlasBatchManager2),this.globalOptions=globalOptions,this.atlasSize=globalOptions.webglTexSize,this.maxAtlasesPerBatch=globalOptions.webglTexPerBatch,this.batchAtlases=[]}return __name(AtlasBatchManager2,"AtlasBatchManager"),_createClass(AtlasBatchManager2,[{key:"getMaxAtlasesPerBatch",value:__name(function(){return this.maxAtlasesPerBatch},"getMaxAtlasesPerBatch")},{key:"getAtlasSize",value:__name(function(){return this.atlasSize},"getAtlasSize")},{key:"getIndexArray",value:__name(function(){return Array.from({length:this.maxAtlasesPerBatch},function(v3,i2){return i2})},"getIndexArray")},{key:"startBatch",value:__name(function(){this.batchAtlases=[]},"startBatch")},{key:"getAtlasCount",value:__name(function(){return this.batchAtlases.length},"getAtlasCount")},{key:"getAtlases",value:__name(function(){return this.batchAtlases},"getAtlases")},{key:"canAddToCurrentBatch",value:__name(function(atlas){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(atlas)},"canAddToCurrentBatch")},{key:"getAtlasIndexForBatch",value:__name(function(atlas){var atlasID=this.batchAtlases.indexOf(atlas);if(atlasID<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(atlas),atlasID=this.batchAtlases.length-1}return atlasID},"getAtlasIndexForBatch")}])}(),RENDER_TARGET={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},TEX_PICKING_MODE={IGNORE:1,USE_BB:2},ElementDrawingWebGL=function(){function ElementDrawingWebGL2(r2,gl,opts){_classCallCheck(this,ElementDrawingWebGL2),this.r=r2,this.gl=gl,this.maxInstances=opts.webglBatchSize,this.atlasSize=opts.webglTexSize,this.bgColor=opts.bgColor,this.debug=opts.webglDebug,this.batchDebugInfo=[],opts.enableWrapping=!0,opts.createTextureCanvas=createTextureCanvas,this.atlasManager=new AtlasManager(r2,opts),this.batchManager=new AtlasBatchManager(opts),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(RENDER_TARGET.SCREEN),this.pickingProgram=this._createShaderProgram(RENDER_TARGET.PICKING),this.vao=this._createVAO()}return __name(ElementDrawingWebGL2,"ElementDrawingWebGL"),_createClass(ElementDrawingWebGL2,[{key:"addAtlasCollection",value:__name(function(collectionName,opts){this.atlasManager.addAtlasCollection(collectionName,opts)},"addAtlasCollection")},{key:"addTextureAtlasRenderType",value:__name(function(typeName,opts){this.atlasManager.addRenderType(typeName,opts)},"addTextureAtlasRenderType")},{key:"addSimpleShapeRenderType",value:__name(function(typeName,opts){this.simpleShapeOptions.set(typeName,opts)},"addSimpleShapeRenderType")},{key:"invalidate",value:__name(function(eles){var type3=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,atlasManager=this.atlasManager;return type3?atlasManager.invalidate(eles,{filterType:__name(function(t4){return t4===type3},"filterType"),forceRedraw:!0}):atlasManager.invalidate(eles)},"invalidate")},{key:"gc",value:__name(function(){this.atlasManager.gc()},"gc")},{key:"_createShaderProgram",value:__name(function(renderTarget){var gl=this.gl,vertexShaderSource="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),idxs=this.batchManager.getIndexArray(),program=createProgram(gl,vertexShaderSource,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(idxs.map(function(i3){return"uniform sampler2D uTexture".concat(i3,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(idxs.map(function(i3){return"if(vAtlasId == ".concat(i3,") outColor = texture(uTexture").concat(i3,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(renderTarget.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));program.aPosition=gl.getAttribLocation(program,"aPosition"),program.aIndex=gl.getAttribLocation(program,"aIndex"),program.aVertType=gl.getAttribLocation(program,"aVertType"),program.aTransform=gl.getAttribLocation(program,"aTransform"),program.aAtlasId=gl.getAttribLocation(program,"aAtlasId"),program.aTex=gl.getAttribLocation(program,"aTex"),program.aPointAPointB=gl.getAttribLocation(program,"aPointAPointB"),program.aPointCPointD=gl.getAttribLocation(program,"aPointCPointD"),program.aLineWidth=gl.getAttribLocation(program,"aLineWidth"),program.aColor=gl.getAttribLocation(program,"aColor"),program.aCornerRadius=gl.getAttribLocation(program,"aCornerRadius"),program.aBorderColor=gl.getAttribLocation(program,"aBorderColor"),program.uPanZoomMatrix=gl.getUniformLocation(program,"uPanZoomMatrix"),program.uAtlasSize=gl.getUniformLocation(program,"uAtlasSize"),program.uBGColor=gl.getUniformLocation(program,"uBGColor"),program.uZoom=gl.getUniformLocation(program,"uZoom"),program.uTextures=[];for(var i2=0;i2<this.batchManager.getMaxAtlasesPerBatch();i2++)program.uTextures.push(gl.getUniformLocation(program,"uTexture".concat(i2)));return program},"_createShaderProgram")},{key:"_createVAO",value:__name(function(){var unitSquare=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=unitSquare.length/2;var n2=this.maxInstances,gl=this.gl,program=this.program,vao=gl.createVertexArray();return gl.bindVertexArray(vao),createBufferStaticDraw(gl,"vec2",program.aPosition,unitSquare),this.transformBuffer=create3x3MatrixBufferDynamicDraw(gl,n2,program.aTransform),this.indexBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aIndex),this.vertTypeBuffer=createBufferDynamicDraw(gl,n2,"int",program.aVertType),this.atlasIdBuffer=createBufferDynamicDraw(gl,n2,"int",program.aAtlasId),this.texBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aTex),this.pointAPointBBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aPointAPointB),this.pointCPointDBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aPointCPointD),this.lineWidthBuffer=createBufferDynamicDraw(gl,n2,"vec2",program.aLineWidth),this.colorBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aColor),this.cornerRadiusBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aCornerRadius),this.borderColorBuffer=createBufferDynamicDraw(gl,n2,"vec4",program.aBorderColor),gl.bindVertexArray(null),vao},"_createVAO")},{key:"buffers",get:__name(function(){var _this=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(k2){return endsWith(k2,"Buffer")}).map(function(k2){return _this[k2]})),this._buffers},"get")},{key:"startFrame",value:__name(function(panZoomMatrix){var renderTarget=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RENDER_TARGET.SCREEN;this.panZoomMatrix=panZoomMatrix,this.renderTarget=renderTarget,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()},"startFrame")},{key:"startBatch",value:__name(function(){this.instanceCount=0,this.batchManager.startBatch()},"startBatch")},{key:"endFrame",value:__name(function(){this.endBatch()},"endFrame")},{key:"_isVisible",value:__name(function(ele,opts){return!!ele.visible()&&(!opts||!opts.isVisible||opts.isVisible(ele))},"_isVisible")},{key:"drawTexture",value:__name(function(ele,eleIndex,type3){var atlasManager=this.atlasManager,batchManager=this.batchManager,opts=atlasManager.getRenderTypeOpts(type3);if(this._isVisible(ele,opts)&&(!ele.isEdge()||this._isValidEdge(ele))){if(this.renderTarget.picking&&opts.getTexPickingMode){var mode=opts.getTexPickingMode(ele);if(mode===TEX_PICKING_MODE.IGNORE)return;if(mode==TEX_PICKING_MODE.USE_BB)return void this.drawPickingRectangle(ele,eleIndex,type3)}var _step,_iterator=_createForOfIteratorHelper(atlasManager.getAtlasInfo(ele,type3));try{for(_iterator.s();!(_step=_iterator.n()).done;){var atlasInfo=_step.value,atlas=atlasInfo.atlas,tex1=atlasInfo.tex1,tex2=atlasInfo.tex2;batchManager.canAddToCurrentBatch(atlas)||this.endBatch();for(var atlasIndex=batchManager.getAtlasIndexForBatch(atlas),_i=0,_arr=[[tex1,!0],[tex2,!1]];_i<_arr.length;_i++){var _arr$_i=_slicedToArray(_arr[_i],2),tex=_arr$_i[0],first3=_arr$_i[1];if(0!=tex.w){var instance2=this.instanceCount;this.vertTypeBuffer.getView(instance2)[0]=0,indexToVec4(eleIndex,this.indexBuffer.getView(instance2)),this.atlasIdBuffer.getView(instance2)[0]=atlasIndex;var texView=this.texBuffer.getView(instance2);texView[0]=tex.x,texView[1]=tex.y,texView[2]=tex.w,texView[3]=tex.h;var matrixView=this.transformBuffer.getMatrixView(instance2);this.setTransformMatrix(ele,matrixView,opts,atlasInfo,first3),this.instanceCount++,first3||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},"drawTexture")},{key:"setTransformMatrix",value:__name(function(ele,matrix,opts,atlasInfo){var first3=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],padding2=0;if(opts.shapeProps&&opts.shapeProps.padding&&(padding2=ele.pstyle(opts.shapeProps.padding).pfValue),atlasInfo){var bb=atlasInfo.bb,tex1=atlasInfo.tex1,tex2=atlasInfo.tex2,ratio=tex1.w/(tex1.w+tex2.w);first3||(ratio=1-ratio);var adjBB=this._getAdjustedBB(bb,padding2,first3,ratio);this._applyTransformMatrix(matrix,adjBB,opts,ele)}else{var _bb=opts.getBoundingBox(ele),_adjBB=this._getAdjustedBB(_bb,padding2,!0,1);this._applyTransformMatrix(matrix,_adjBB,opts,ele)}},"setTransformMatrix")},{key:"_applyTransformMatrix",value:__name(function(matrix,adjBB,opts,ele){var x5,y6;identity6(matrix);var theta=opts.getRotation?opts.getRotation(ele):0;if(0!==theta){var _opts$getRotationPoin=opts.getRotationPoint(ele);translate(matrix,matrix,[_opts$getRotationPoin.x,_opts$getRotationPoin.y]),rotate(matrix,matrix,theta);var offset=opts.getRotationOffset(ele);x5=offset.x+(adjBB.xOffset||0),y6=offset.y+(adjBB.yOffset||0)}else x5=adjBB.x1,y6=adjBB.y1;translate(matrix,matrix,[x5,y6]),scale(matrix,matrix,[adjBB.w,adjBB.h])},"_applyTransformMatrix")},{key:"_getAdjustedBB",value:__name(function(bb,padding2,first3,ratio){var x1=bb.x1,y1=bb.y1,w4=bb.w,h3=bb.h;padding2&&(x1-=padding2,y1-=padding2,w4+=2*padding2,h3+=2*padding2);var xOffset=0,adjW=w4*ratio;return first3&&ratio<1?w4=adjW:!first3&&ratio<1&&(x1+=xOffset=w4-adjW,w4=adjW),{x1:x1,y1:y1,w:w4,h:h3,xOffset:xOffset,yOffset:bb.yOffset}},"_getAdjustedBB")},{key:"drawPickingRectangle",value:__name(function(ele,eleIndex,type3){var opts=this.atlasManager.getRenderTypeOpts(type3),instance2=this.instanceCount;this.vertTypeBuffer.getView(instance2)[0]=4,indexToVec4(eleIndex,this.indexBuffer.getView(instance2)),toWebGLColor([0,0,0],1,this.colorBuffer.getView(instance2));var matrixView=this.transformBuffer.getMatrixView(instance2);this.setTransformMatrix(ele,matrixView,opts),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()},"drawPickingRectangle")},{key:"drawNode",value:__name(function(node2,eleIndex,type3){var opts=this.simpleShapeOptions.get(type3);if(this._isVisible(node2,opts)){var props=opts.shapeProps,vertType=this._getVertTypeForShape(node2,props.shape);if(void 0===vertType||opts.isSimple&&!opts.isSimple(node2))this.drawTexture(node2,eleIndex,type3);else{var instance2=this.instanceCount;if(this.vertTypeBuffer.getView(instance2)[0]=vertType,5===vertType||6===vertType){var bb=opts.getBoundingBox(node2),radius2=this._getCornerRadius(node2,props.radius,bb),radiusView=this.cornerRadiusBuffer.getView(instance2);radiusView[0]=radius2,radiusView[1]=radius2,radiusView[2]=radius2,radiusView[3]=radius2,6===vertType&&(radiusView[0]=0,radiusView[2]=0)}indexToVec4(eleIndex,this.indexBuffer.getView(instance2)),toWebGLColor(node2.pstyle(props.color).value,node2.pstyle(props.opacity).value,this.colorBuffer.getView(instance2));var lineWidthView=this.lineWidthBuffer.getView(instance2);if(lineWidthView[0]=0,lineWidthView[1]=0,props.border){var borderWidth=node2.pstyle("border-width").value;if(borderWidth>0){toWebGLColor(node2.pstyle("border-color").value,node2.pstyle("border-opacity").value,this.borderColorBuffer.getView(instance2));var borderPos=node2.pstyle("border-position").value;if("inside"===borderPos)lineWidthView[0]=0,lineWidthView[1]=-borderWidth;else if("outside"===borderPos)lineWidthView[0]=borderWidth,lineWidthView[1]=0;else{var halfWidth=borderWidth/2;lineWidthView[0]=halfWidth,lineWidthView[1]=-halfWidth}}}var matrixView=this.transformBuffer.getMatrixView(instance2);this.setTransformMatrix(node2,matrixView,opts),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},"drawNode")},{key:"_getVertTypeForShape",value:__name(function(node2,shapeProp){switch(node2.pstyle(shapeProp).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}},"_getVertTypeForShape")},{key:"_getCornerRadius",value:__name(function(node2,radiusProp,_ref2){var w4=_ref2.w,h3=_ref2.h;if("auto"===node2.pstyle(radiusProp).value)return getRoundRectangleRadius(w4,h3);var radius2=node2.pstyle(radiusProp).pfValue,halfWidth=w4/2,halfHeight=h3/2;return Math.min(radius2,halfHeight,halfWidth)},"_getCornerRadius")},{key:"drawEdgeArrow",value:__name(function(edge,eleIndex,prefix){if(edge.visible()){var x5,y6,angle2,rs=edge._private.rscratch;if("source"===prefix?(x5=rs.arrowStartX,y6=rs.arrowStartY,angle2=rs.srcArrowAngle):(x5=rs.arrowEndX,y6=rs.arrowEndY,angle2=rs.tgtArrowAngle),!(isNaN(x5)||null==x5||isNaN(y6)||null==y6||isNaN(angle2)||null==angle2))if("none"!==edge.pstyle(prefix+"-arrow-shape").value){var color2=edge.pstyle(prefix+"-arrow-color").value,opacity=edge.pstyle("opacity").value*edge.pstyle("line-opacity").value,lineWidth=edge.pstyle("width").pfValue,scale$1=edge.pstyle("arrow-scale").value,size4=this.r.getArrowWidth(lineWidth,scale$1),instance2=this.instanceCount,transform8=this.transformBuffer.getMatrixView(instance2);identity6(transform8),translate(transform8,transform8,[x5,y6]),scale(transform8,transform8,[size4,size4]),rotate(transform8,transform8,angle2),this.vertTypeBuffer.getView(instance2)[0]=3,indexToVec4(eleIndex,this.indexBuffer.getView(instance2)),toWebGLColor(color2,opacity,this.colorBuffer.getView(instance2)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},"drawEdgeArrow")},{key:"drawEdgeLine",value:__name(function(edge,eleIndex){if(edge.visible()){var points=this._getEdgePoints(edge);if(points){var baseOpacity=edge.pstyle("opacity").value,lineOpacity=edge.pstyle("line-opacity").value,width3=edge.pstyle("width").pfValue,color2=edge.pstyle("line-color").value,opacity=baseOpacity*lineOpacity;if(points.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==points.length){var instance2=this.instanceCount;this.vertTypeBuffer.getView(instance2)[0]=1,indexToVec4(eleIndex,this.indexBuffer.getView(instance2)),toWebGLColor(color2,opacity,this.colorBuffer.getView(instance2)),this.lineWidthBuffer.getView(instance2)[0]=width3;var sourceTargetView=this.pointAPointBBuffer.getView(instance2);sourceTargetView[0]=points[0],sourceTargetView[1]=points[1],sourceTargetView[2]=points[2],sourceTargetView[3]=points[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var i2=0;i2<points.length-2;i2+=2){var _instance=this.instanceCount;this.vertTypeBuffer.getView(_instance)[0]=2,indexToVec4(eleIndex,this.indexBuffer.getView(_instance)),toWebGLColor(color2,opacity,this.colorBuffer.getView(_instance)),this.lineWidthBuffer.getView(_instance)[0]=width3;var pAx=points[i2-2],pAy=points[i2-1],pBx=points[i2],pBy=points[i2+1],pCx=points[i2+2],pCy=points[i2+3],pDx=points[i2+4],pDy=points[i2+5];0==i2&&(pAx=2*pBx-pCx+.001,pAy=2*pBy-pCy+.001),i2==points.length-4&&(pDx=2*pCx-pBx+.001,pDy=2*pCy-pBy+.001);var pointABView=this.pointAPointBBuffer.getView(_instance);pointABView[0]=pAx,pointABView[1]=pAy,pointABView[2]=pBx,pointABView[3]=pBy;var pointCDView=this.pointCPointDBuffer.getView(_instance);pointCDView[0]=pCx,pointCDView[1]=pCy,pointCDView[2]=pDx,pointCDView[3]=pDy,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},"drawEdgeLine")},{key:"_isValidEdge",value:__name(function(edge){var rs=edge._private.rscratch;return!rs.badLine&&null!=rs.allpts&&!isNaN(rs.allpts[0])},"_isValidEdge")},{key:"_getEdgePoints",value:__name(function(edge){var rs=edge._private.rscratch;if(this._isValidEdge(edge)){var controlPoints4=rs.allpts;if(4==controlPoints4.length)return controlPoints4;var numSegments=this._getNumSegments(edge);return this._getCurveSegmentPoints(controlPoints4,numSegments)}},"_getEdgePoints")},{key:"_getNumSegments",value:__name(function(edge){return Math.min(Math.max(15,5),this.maxInstances)},"_getNumSegments")},{key:"_getCurveSegmentPoints",value:__name(function(controlPoints4,segments){if(4==controlPoints4.length)return controlPoints4;for(var curvePoints=Array(2*(segments+1)),i2=0;i2<=segments;i2++)if(0==i2)curvePoints[0]=controlPoints4[0],curvePoints[1]=controlPoints4[1];else if(i2==segments)curvePoints[2*i2]=controlPoints4[controlPoints4.length-2],curvePoints[2*i2+1]=controlPoints4[controlPoints4.length-1];else{var t4=i2/segments;this._setCurvePoint(controlPoints4,t4,curvePoints,2*i2)}return curvePoints},"_getCurveSegmentPoints")},{key:"_setCurvePoint",value:__name(function(points,t4,curvePoints,cpi){if(!(points.length<=2)){for(var newpoints=Array(points.length-2),i2=0;i2<newpoints.length;i2+=2){var x5=(1-t4)*points[i2]+t4*points[i2+2],y6=(1-t4)*points[i2+1]+t4*points[i2+3];newpoints[i2]=x5,newpoints[i2+1]=y6}return this._setCurvePoint(newpoints,t4,curvePoints,cpi)}curvePoints[cpi]=points[0],curvePoints[cpi+1]=points[1]},"_setCurvePoint")},{key:"endBatch",value:__name(function(){var gl=this.gl,vao=this.vao,vertexCount=this.vertexCount,count2=this.instanceCount;if(0!==count2){var program=this.renderTarget.picking?this.pickingProgram:this.program;gl.useProgram(program),gl.bindVertexArray(vao);var _step2,_iterator2=_createForOfIteratorHelper(this.buffers);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value.bufferSubData(count2)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}for(var atlases=this.batchManager.getAtlases(),i2=0;i2<atlases.length;i2++)atlases[i2].bufferIfNeeded(gl);for(var _i2=0;_i2<atlases.length;_i2++)gl.activeTexture(gl.TEXTURE0+_i2),gl.bindTexture(gl.TEXTURE_2D,atlases[_i2].texture),gl.uniform1i(program.uTextures[_i2],_i2);gl.uniform1f(program.uZoom,getEffectiveZoom(this.r)),gl.uniformMatrix3fv(program.uPanZoomMatrix,!1,this.panZoomMatrix),gl.uniform1i(program.uAtlasSize,this.batchManager.getAtlasSize());var webglBgColor=toWebGLColor(this.bgColor,1);gl.uniform4fv(program.uBGColor,webglBgColor),gl.drawArraysInstanced(gl.TRIANGLES,0,vertexCount,count2),gl.bindVertexArray(null),gl.bindTexture(gl.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:count2,atlasCount:atlases.length}),this.startBatch()}},"endBatch")},{key:"getDebugInfo",value:__name(function(){var atlasInfo=this.atlasManager.getDebugInfo(),totalAtlases=atlasInfo.reduce(function(count2,info2){return count2+info2.atlasCount},0),batchInfo=this.batchDebugInfo,totalInstances=batchInfo.reduce(function(count2,info2){return count2+info2.count},0);return{atlasInfo:atlasInfo,totalAtlases:totalAtlases,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:batchInfo.length,batchInfo:batchInfo,totalInstances:totalInstances}},"getDebugInfo")}])}(),(CRp$4={}).initWebgl=function(opts,fns){var r2=this,gl=r2.data.contexts[r2.WEBGL];opts.bgColor=getBGColor(r2),opts.webglTexSize=Math.min(opts.webglTexSize,gl.getParameter(gl.MAX_TEXTURE_SIZE)),opts.webglTexRows=Math.min(opts.webglTexRows,54),opts.webglTexRowsNodes=Math.min(opts.webglTexRowsNodes,54),opts.webglBatchSize=Math.min(opts.webglBatchSize,16384),opts.webglTexPerBatch=Math.min(opts.webglTexPerBatch,gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)),r2.webglDebug=opts.webglDebug,r2.webglDebugShowAtlases=opts.webglDebugShowAtlases,r2.pickingFrameBuffer=createPickingFrameBuffer(gl),r2.pickingFrameBuffer.needsDraw=!0,r2.drawing=new ElementDrawingWebGL(r2,gl,opts);var getLabelRotation3=__name(function(prop){return function(ele){return r2.getTextAngle(ele,prop)}},"getLabelRotation"),isLabelVisible=__name(function(prop){return function(ele){var label=ele.pstyle(prop);return label&&label.value}},"isLabelVisible"),isLayerVisible=__name(function(prefix){return function(node2){return node2.pstyle("".concat(prefix,"-opacity")).value>0}},"isLayerVisible"),getTexPickingMode=__name(function(ele){return"yes"===ele.pstyle("text-events").strValue?TEX_PICKING_MODE.USE_BB:TEX_PICKING_MODE.IGNORE},"getTexPickingMode"),getBBForSimpleShape=__name(function(node2){var _node$position=node2.position(),x5=_node$position.x,y6=_node$position.y,w4=node2.outerWidth(),h3=node2.outerHeight();return{w:w4,h:h3,x1:x5-w4/2,y1:y6-h3/2}},"getBBForSimpleShape");r2.drawing.addAtlasCollection("node",{texRows:opts.webglTexRowsNodes}),r2.drawing.addAtlasCollection("label",{texRows:opts.webglTexRows}),r2.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:fns.getStyleKey,getBoundingBox:fns.getElementBox,drawElement:fns.drawElement}),r2.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:getBBForSimpleShape,isSimple:isSimpleShape,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r2.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:getBBForSimpleShape,isVisible:isLayerVisible("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r2.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:getBBForSimpleShape,isVisible:isLayerVisible("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r2.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:getTexPickingMode,getKey:getStyleKeysForLabel(fns.getLabelKey,null),getBoundingBox:getBoundingBoxForLabel(fns.getLabelBox,null),drawClipped:!0,drawElement:fns.drawLabel,getRotation:getLabelRotation3(null),getRotationPoint:fns.getLabelRotationPoint,getRotationOffset:fns.getLabelRotationOffset,isVisible:isLabelVisible("label")}),r2.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:getTexPickingMode,getKey:getStyleKeysForLabel(fns.getSourceLabelKey,"source"),getBoundingBox:getBoundingBoxForLabel(fns.getSourceLabelBox,"source"),drawClipped:!0,drawElement:fns.drawSourceLabel,getRotation:getLabelRotation3("source"),getRotationPoint:fns.getSourceLabelRotationPoint,getRotationOffset:fns.getSourceLabelRotationOffset,isVisible:isLabelVisible("source-label")}),r2.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:getTexPickingMode,getKey:getStyleKeysForLabel(fns.getTargetLabelKey,"target"),getBoundingBox:getBoundingBoxForLabel(fns.getTargetLabelBox,"target"),drawClipped:!0,drawElement:fns.drawTargetLabel,getRotation:getLabelRotation3("target"),getRotationPoint:fns.getTargetLabelRotationPoint,getRotationOffset:fns.getTargetLabelRotationOffset,isVisible:isLabelVisible("target-label")});var setGCFlag=debounce(function(){console.log("garbage collect flag set"),r2.data.gc=!0},1e4);r2.onUpdateEleCalcs(function(willDraw,eles){var gcNeeded=!1;eles&&eles.length>0&&(gcNeeded|=r2.drawing.invalidate(eles)),gcNeeded&&setGCFlag()}),overrideCanvasRendererFunctions(r2)},__name(getBGColor,"getBGColor"),__name(getLabelLines,"getLabelLines"),getStyleKeysForLabel=__name(function(getKey3,prefix){return function(ele){var key=getKey3(ele),lines=getLabelLines(ele,prefix);return lines.length>1?lines.map(function(line2,index){return"".concat(key,"_").concat(index)}):key}},"getStyleKeysForLabel"),getBoundingBoxForLabel=__name(function(getBoundingBox,prefix){return function(ele,styleKey){var bb=getBoundingBox(ele);if("string"==typeof styleKey){var ui=styleKey.indexOf("_");if(ui>0){var lineIndex=Number(styleKey.substring(ui+1)),lines=getLabelLines(ele,prefix),h3=bb.h/lines.length,yOffset=h3*lineIndex,y1=bb.y1+yOffset;return{x1:bb.x1,w:bb.w,y1:y1,h:h3,yOffset:yOffset}}}return bb}},"getBoundingBoxForLabel"),__name(overrideCanvasRendererFunctions,"overrideCanvasRendererFunctions"),__name(clearWebgl,"clearWebgl"),__name(clearCanvas,"clearCanvas"),__name(createPanZoomMatrix,"createPanZoomMatrix"),__name(setContextTransform,"setContextTransform"),__name(drawSelectionRectangle,"drawSelectionRectangle"),__name(drawAxes,"drawAxes"),__name(drawAtlases,"drawAtlases"),__name(getPickingIndexes,"getPickingIndexes"),__name(findNearestElementsWebgl,"findNearestElementsWebgl"),__name(drawEle,"drawEle"),__name(renderWebgl,"renderWebgl"),(CRp$3={}).drawPolygonPath=function(context,x5,y6,width3,height2,points){var halfW=width3/2,halfH=height2/2;context.beginPath&&context.beginPath(),context.moveTo(x5+halfW*points[0],y6+halfH*points[1]);for(var i2=1;i2<points.length/2;i2++)context.lineTo(x5+halfW*points[2*i2],y6+halfH*points[2*i2+1]);context.closePath()},CRp$3.drawRoundPolygonPath=function(context,x5,y6,width3,height2,points,corners){corners.forEach(function(corner){return drawPreparedRoundCorner(context,corner)}),context.closePath()},CRp$3.drawRoundRectanglePath=function(context,x5,y6,width3,height2,radius2){var halfWidth=width3/2,halfHeight=height2/2,cornerRadius="auto"===radius2?getRoundRectangleRadius(width3,height2):Math.min(radius2,halfHeight,halfWidth);context.beginPath&&context.beginPath(),context.moveTo(x5,y6-halfHeight),context.arcTo(x5+halfWidth,y6-halfHeight,x5+halfWidth,y6,cornerRadius),context.arcTo(x5+halfWidth,y6+halfHeight,x5,y6+halfHeight,cornerRadius),context.arcTo(x5-halfWidth,y6+halfHeight,x5-halfWidth,y6,cornerRadius),context.arcTo(x5-halfWidth,y6-halfHeight,x5,y6-halfHeight,cornerRadius),context.lineTo(x5,y6-halfHeight),context.closePath()},CRp$3.drawBottomRoundRectanglePath=function(context,x5,y6,width3,height2,radius2){var halfWidth=width3/2,halfHeight=height2/2,cornerRadius="auto"===radius2?getRoundRectangleRadius(width3,height2):radius2;context.beginPath&&context.beginPath(),context.moveTo(x5,y6-halfHeight),context.lineTo(x5+halfWidth,y6-halfHeight),context.lineTo(x5+halfWidth,y6),context.arcTo(x5+halfWidth,y6+halfHeight,x5,y6+halfHeight,cornerRadius),context.arcTo(x5-halfWidth,y6+halfHeight,x5-halfWidth,y6,cornerRadius),context.lineTo(x5-halfWidth,y6-halfHeight),context.lineTo(x5,y6-halfHeight),context.closePath()},CRp$3.drawCutRectanglePath=function(context,x5,y6,width3,height2,points,corners){var halfWidth=width3/2,halfHeight=height2/2,cornerLength="auto"===corners?getCutRectangleCornerLength():corners;context.beginPath&&context.beginPath(),context.moveTo(x5-halfWidth+cornerLength,y6-halfHeight),context.lineTo(x5+halfWidth-cornerLength,y6-halfHeight),context.lineTo(x5+halfWidth,y6-halfHeight+cornerLength),context.lineTo(x5+halfWidth,y6+halfHeight-cornerLength),context.lineTo(x5+halfWidth-cornerLength,y6+halfHeight),context.lineTo(x5-halfWidth+cornerLength,y6+halfHeight),context.lineTo(x5-halfWidth,y6+halfHeight-cornerLength),context.lineTo(x5-halfWidth,y6-halfHeight+cornerLength),context.closePath()},CRp$3.drawBarrelPath=function(context,x5,y6,width3,height2){var halfWidth=width3/2,halfHeight=height2/2,xBegin=x5-halfWidth,xEnd=x5+halfWidth,yBegin=y6-halfHeight,yEnd=y6+halfHeight,barrelCurveConstants=getBarrelCurveConstants(width3,height2),wOffset=barrelCurveConstants.widthOffset,hOffset=barrelCurveConstants.heightOffset,ctrlPtXOffset=barrelCurveConstants.ctrlPtOffsetPct*wOffset;context.beginPath&&context.beginPath(),context.moveTo(xBegin,yBegin+hOffset),context.lineTo(xBegin,yEnd-hOffset),context.quadraticCurveTo(xBegin+ctrlPtXOffset,yEnd,xBegin+wOffset,yEnd),context.lineTo(xEnd-wOffset,yEnd),context.quadraticCurveTo(xEnd-ctrlPtXOffset,yEnd,xEnd,yEnd-hOffset),context.lineTo(xEnd,yBegin+hOffset),context.quadraticCurveTo(xEnd-ctrlPtXOffset,yBegin,xEnd-wOffset,yBegin),context.lineTo(xBegin+wOffset,yBegin),context.quadraticCurveTo(xBegin+ctrlPtXOffset,yBegin,xBegin,yBegin+hOffset),context.closePath()},sin0=Math.sin(0),cos0=Math.cos(0),sin2={},cos2={},ellipseStepSize=Math.PI/40,i2=0*Math.PI;i2<2*Math.PI;i2+=ellipseStepSize)sin2[i2]=Math.sin(i2),cos2[i2]=Math.cos(i2);CRp$3.drawEllipsePath=function(context,centerX,centerY,width3,height2){if(context.beginPath&&context.beginPath(),context.ellipse)context.ellipse(centerX,centerY,width3/2,height2/2,0,0,2*Math.PI);else for(var xPos,yPos,rw=width3/2,rh=height2/2,i2=0*Math.PI;i2<2*Math.PI;i2+=ellipseStepSize)xPos=centerX-rw*sin2[i2]*sin0+rw*cos2[i2]*cos0,yPos=centerY+rh*cos2[i2]*sin0+rh*sin2[i2]*cos0,0===i2?context.moveTo(xPos,yPos):context.lineTo(xPos,yPos);context.closePath()},(CRp$2={}).createBuffer=function(w4,h3){var buffer=document.createElement("canvas");return buffer.width=w4,buffer.height=h3,[buffer,buffer.getContext("2d")]},CRp$2.bufferCanvasImage=function(options2){var cy=this.cy,bb=cy.mutableElements().boundingBox(),ctrRect=this.findContainerClientCoords(),width3=options2.full?Math.ceil(bb.w):ctrRect[2],height2=options2.full?Math.ceil(bb.h):ctrRect[3],specdMaxDims=number$1(options2.maxWidth)||number$1(options2.maxHeight),pxRatio=this.getPixelRatio(),scale2=1;if(void 0!==options2.scale)width3*=options2.scale,height2*=options2.scale,scale2=options2.scale;else if(specdMaxDims){var maxScaleW=1/0,maxScaleH=1/0;number$1(options2.maxWidth)&&(maxScaleW=scale2*options2.maxWidth/width3),number$1(options2.maxHeight)&&(maxScaleH=scale2*options2.maxHeight/height2),width3*=scale2=Math.min(maxScaleW,maxScaleH),height2*=scale2}specdMaxDims||(width3*=pxRatio,height2*=pxRatio,scale2*=pxRatio);var buffCanvas=document.createElement("canvas");buffCanvas.width=width3,buffCanvas.height=height2,buffCanvas.style.width=width3+"px",buffCanvas.style.height=height2+"px";var buffCxt=buffCanvas.getContext("2d");if(width3>0&&height2>0){buffCxt.clearRect(0,0,width3,height2),buffCxt.globalCompositeOperation="source-over";var zsortedEles=this.getCachedZSortedEles();if(options2.full)buffCxt.translate(-bb.x1*scale2,-bb.y1*scale2),buffCxt.scale(scale2,scale2),this.drawElements(buffCxt,zsortedEles),buffCxt.scale(1/scale2,1/scale2),buffCxt.translate(bb.x1*scale2,bb.y1*scale2);else{var pan2=cy.pan(),translation={x:pan2.x*scale2,y:pan2.y*scale2};scale2*=cy.zoom(),buffCxt.translate(translation.x,translation.y),buffCxt.scale(scale2,scale2),this.drawElements(buffCxt,zsortedEles),buffCxt.scale(1/scale2,1/scale2),buffCxt.translate(-translation.x,-translation.y)}options2.bg&&(buffCxt.globalCompositeOperation="destination-over",buffCxt.fillStyle=options2.bg,buffCxt.rect(0,0,width3,height2),buffCxt.fill())}return buffCanvas},__name(b64ToBlob,"b64ToBlob"),__name(b64UriToB64,"b64UriToB64"),__name(output,"output"),CRp$2.png=function(options2){return output(options2,this.bufferCanvasImage(options2),"image/png")},CRp$2.jpg=function(options2){return output(options2,this.bufferCanvasImage(options2),"image/jpeg")},(CRp$1={}).nodeShapeImpl=function(name,context,centerX,centerY,width3,height2,points,corners){switch(name){case"ellipse":return this.drawEllipsePath(context,centerX,centerY,width3,height2);case"polygon":return this.drawPolygonPath(context,centerX,centerY,width3,height2,points);case"round-polygon":return this.drawRoundPolygonPath(context,centerX,centerY,width3,height2,points,corners);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(context,centerX,centerY,width3,height2,corners);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(context,centerX,centerY,width3,height2,points,corners);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(context,centerX,centerY,width3,height2,corners);case"barrel":return this.drawBarrelPath(context,centerX,centerY,width3,height2)}},CR=CanvasRenderer,(CRp=CanvasRenderer.prototype).CANVAS_LAYERS=3,CRp.SELECT_BOX=0,CRp.DRAG=1,CRp.NODE=2,CRp.WEBGL=3,CRp.CANVAS_TYPES=["2d","2d","2d","webgl2"],CRp.BUFFER_COUNT=3,CRp.TEXTURE_BUFFER=0,CRp.MOTIONBLUR_BUFFER_NODE=1,CRp.MOTIONBLUR_BUFFER_DRAG=2,__name(CanvasRenderer,"CanvasRenderer"),CRp.redrawHint=function(group2,bool2){switch(group2){case"eles":this.data.canvasNeedsRedraw[CRp.NODE]=bool2;break;case"drag":this.data.canvasNeedsRedraw[CRp.DRAG]=bool2;break;case"select":this.data.canvasNeedsRedraw[CRp.SELECT_BOX]=bool2;break;case"gc":this.data.gc=!0}},pathsImpld="undefined"!=typeof Path2D,CRp.path2dEnabled=function(on3){if(void 0===on3)return this.pathsEnabled;this.pathsEnabled=!!on3},CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled},CRp.setImgSmoothing=function(context,bool2){null!=context.imageSmoothingEnabled?context.imageSmoothingEnabled=bool2:(context.webkitImageSmoothingEnabled=bool2,context.mozImageSmoothingEnabled=bool2,context.msImageSmoothingEnabled=bool2)},CRp.getImgSmoothing=function(context){return null!=context.imageSmoothingEnabled?context.imageSmoothingEnabled:context.webkitImageSmoothingEnabled||context.mozImageSmoothingEnabled||context.msImageSmoothingEnabled},CRp.makeOffscreenCanvas=function(width3,height2){var canvas;"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas))?canvas=new OffscreenCanvas(width3,height2):((canvas=this.cy.window().document.createElement("canvas")).width=width3,canvas.height=height2);return canvas},[CRp$b,CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach(function(props){extend4(CRp,props)}),incExts=[{type:"layout",extensions:layout4},{type:"renderer",extensions:[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}]}],extensions={},modules={},__name(setExtension,"setExtension"),__name(getExtension,"getExtension"),__name(setModule,"setModule"),__name(getModule,"getModule"),extension2=__name(function(){return 2===arguments.length?getExtension.apply(null,arguments):3===arguments.length?setExtension.apply(null,arguments):4===arguments.length?getModule.apply(null,arguments):5===arguments.length?setModule.apply(null,arguments):void error("Invalid extension access syntax")},"extension"),Core.prototype.extension=extension2,incExts.forEach(function(group2){group2.extensions.forEach(function(ext){setExtension(group2.type,ext.name,ext.impl)})}),(sheetfn=(_Stylesheet=__name(function(){if(!(this instanceof _Stylesheet))return new _Stylesheet;this.length=0},"Stylesheet")).prototype).instanceString=function(){return"stylesheet"},sheetfn.selector=function(selector){return this[this.length++]={selector:selector,properties:[]},this},sheetfn.css=function(name,value2){var i2=this.length-1;if(string(name))this[i2].properties.push({name:name,value:value2});else if(plainObject(name))for(var map5=name,propNames=Object.keys(map5),j3=0;j3<propNames.length;j3++){var key=propNames[j3],mapVal=map5[key];if(null!=mapVal){var prop=_Style.properties[key]||_Style.properties[dash2camel(key)];if(null!=prop){var _name=prop.name,_value=mapVal;this[i2].properties.push({name:_name,value:_value})}}}return this},sheetfn.style=sheetfn.css,sheetfn.generateStyle=function(cy){var style3=new _Style(cy);return this.appendToStyle(style3)},sheetfn.appendToStyle=function(style3){for(var i2=0;i2<this.length;i2++){var context=this[i2],selector=context.selector,props=context.properties;style3.selector(selector);for(var j3=0;j3<props.length;j3++){var prop=props[j3];style3.css(prop.name,prop.value)}}return style3},cytoscape2=__name(function(options2){return void 0===options2&&(options2={}),plainObject(options2)?new Core(options2):string(options2)?extension2.apply(extension2,arguments):void 0},"cytoscape"),cytoscape2.use=function(ext){var args=Array.prototype.slice.call(arguments,1);return args.unshift(cytoscape2),ext.apply(null,args),this},cytoscape2.warnings=function(bool2){return warnings(bool2)},cytoscape2.version="3.33.1",cytoscape2.stylesheet=cytoscape2.Stylesheet=_Stylesheet}}),require_layout_base=__commonJS({"../../node_modules/.pnpm/layout-base@1.0.2/node_modules/layout-base/layout-base.js"(exports2,module2){__name(function(root3,factory){"object"==typeof exports2&&"object"==typeof module2?module2.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports2?exports2.layoutBase=factory():root3.layoutBase=factory()},"webpackUniversalModuleDefinition")(exports2,function(){return function(modules2){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module3=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules2[moduleId].call(module3.exports,module3,module3.exports,__webpack_require__),module3.l=!0,module3.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=modules2,__webpack_require__.c=installedModules,__webpack_require__.i=function(value2){return value2},__webpack_require__.d=function(exports3,name,getter){__webpack_require__.o(exports3,name)||Object.defineProperty(exports3,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module3){var getter=module3&&module3.__esModule?__name(function(){return module3.default},"getDefault"):__name(function(){return module3},"getModuleExports");return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object3,property2){return Object.prototype.hasOwnProperty.call(object3,property2)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=26)}([function(module3,exports3,__webpack_require__){function LayoutConstants(){}__name(LayoutConstants,"LayoutConstants"),LayoutConstants.QUALITY=1,LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,LayoutConstants.DEFAULT_INCREMENTAL=!1,LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT=!0,LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT=!1,LayoutConstants.DEFAULT_ANIMATION_PERIOD=50,LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,LayoutConstants.DEFAULT_GRAPH_MARGIN=15,LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=!1,LayoutConstants.SIMPLE_NODE_SIZE=40,LayoutConstants.SIMPLE_NODE_HALF_SIZE=LayoutConstants.SIMPLE_NODE_SIZE/2,LayoutConstants.EMPTY_COMPOUND_NODE_SIZE=40,LayoutConstants.MIN_EDGE_LENGTH=1,LayoutConstants.WORLD_BOUNDARY=1e6,LayoutConstants.INITIAL_WORLD_BOUNDARY=LayoutConstants.WORLD_BOUNDARY/1e3,LayoutConstants.WORLD_CENTER_X=1200,LayoutConstants.WORLD_CENTER_Y=900,module3.exports=LayoutConstants},function(module3,exports3,__webpack_require__){var LGraphObject=__webpack_require__(2),IGeometry=__webpack_require__(8),IMath=__webpack_require__(9);function LEdge(source,target,vEdge){LGraphObject.call(this,vEdge),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=vEdge,this.bendpoints=[],this.source=source,this.target=target}for(var prop in __name(LEdge,"LEdge"),LEdge.prototype=Object.create(LGraphObject.prototype),LGraphObject)LEdge[prop]=LGraphObject[prop];LEdge.prototype.getSource=function(){return this.source},LEdge.prototype.getTarget=function(){return this.target},LEdge.prototype.isInterGraph=function(){return this.isInterGraph},LEdge.prototype.getLength=function(){return this.length},LEdge.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},LEdge.prototype.getBendpoints=function(){return this.bendpoints},LEdge.prototype.getLca=function(){return this.lca},LEdge.prototype.getSourceInLca=function(){return this.sourceInLca},LEdge.prototype.getTargetInLca=function(){return this.targetInLca},LEdge.prototype.getOtherEnd=function(node2){if(this.source===node2)return this.target;if(this.target===node2)return this.source;throw"Node is not incident with this edge"},LEdge.prototype.getOtherEndInGraph=function(node2,graph){for(var otherEnd=this.getOtherEnd(node2),root3=graph.getGraphManager().getRoot();;){if(otherEnd.getOwner()==graph)return otherEnd;if(otherEnd.getOwner()==root3)break;otherEnd=otherEnd.getOwner().getParent()}return null},LEdge.prototype.updateLength=function(){var clipPointCoordinates=new Array(4);this.isOverlapingSourceAndTarget=IGeometry.getIntersection(this.target.getRect(),this.source.getRect(),clipPointCoordinates),this.isOverlapingSourceAndTarget||(this.lengthX=clipPointCoordinates[0]-clipPointCoordinates[2],this.lengthY=clipPointCoordinates[1]-clipPointCoordinates[3],Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},LEdge.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},module3.exports=LEdge},function(module3,exports3,__webpack_require__){function LGraphObject(vGraphObject){this.vGraphObject=vGraphObject}__name(LGraphObject,"LGraphObject"),module3.exports=LGraphObject},function(module3,exports3,__webpack_require__){var LGraphObject=__webpack_require__(2),Integer=__webpack_require__(10),RectangleD=__webpack_require__(13),LayoutConstants=__webpack_require__(0),RandomSeed=__webpack_require__(16),PointD=__webpack_require__(4);function LNode(gm,loc,size4,vNode){null==size4&&null==vNode&&(vNode=loc),LGraphObject.call(this,vNode),null!=gm.graphManager&&(gm=gm.graphManager),this.estimatedSize=Integer.MIN_VALUE,this.inclusionTreeDepth=Integer.MAX_VALUE,this.vGraphObject=vNode,this.edges=[],this.graphManager=gm,this.rect=null!=size4&&null!=loc?new RectangleD(loc.x,loc.y,size4.width,size4.height):new RectangleD}for(var prop in __name(LNode,"LNode"),LNode.prototype=Object.create(LGraphObject.prototype),LGraphObject)LNode[prop]=LGraphObject[prop];LNode.prototype.getEdges=function(){return this.edges},LNode.prototype.getChild=function(){return this.child},LNode.prototype.getOwner=function(){return this.owner},LNode.prototype.getWidth=function(){return this.rect.width},LNode.prototype.setWidth=function(width3){this.rect.width=width3},LNode.prototype.getHeight=function(){return this.rect.height},LNode.prototype.setHeight=function(height2){this.rect.height=height2},LNode.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},LNode.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},LNode.prototype.getCenter=function(){return new PointD(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},LNode.prototype.getLocation=function(){return new PointD(this.rect.x,this.rect.y)},LNode.prototype.getRect=function(){return this.rect},LNode.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},LNode.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},LNode.prototype.setRect=function(upperLeft,dimension){this.rect.x=upperLeft.x,this.rect.y=upperLeft.y,this.rect.width=dimension.width,this.rect.height=dimension.height},LNode.prototype.setCenter=function(cx,cy){this.rect.x=cx-this.rect.width/2,this.rect.y=cy-this.rect.height/2},LNode.prototype.setLocation=function(x5,y6){this.rect.x=x5,this.rect.y=y6},LNode.prototype.moveBy=function(dx,dy){this.rect.x+=dx,this.rect.y+=dy},LNode.prototype.getEdgeListToNode=function(to){var edgeList2=[],self2=this;return self2.edges.forEach(function(edge2){if(edge2.target==to){if(edge2.source!=self2)throw"Incorrect edge source!";edgeList2.push(edge2)}}),edgeList2},LNode.prototype.getEdgesBetween=function(other){var edgeList2=[],self2=this;return self2.edges.forEach(function(edge2){if(edge2.source!=self2&&edge2.target!=self2)throw"Incorrect edge source and/or target";edge2.target!=other&&edge2.source!=other||edgeList2.push(edge2)}),edgeList2},LNode.prototype.getNeighborsList=function(){var neighbors=new Set,self2=this;return self2.edges.forEach(function(edge){if(edge.source==self2)neighbors.add(edge.target);else{if(edge.target!=self2)throw"Incorrect incidency!";neighbors.add(edge.source)}}),neighbors},LNode.prototype.withChildren=function(){var withNeighborsList=new Set;if(withNeighborsList.add(this),null!=this.child)for(var nodes5=this.child.getNodes(),i2=0;i2<nodes5.length;i2++)nodes5[i2].withChildren().forEach(function(node2){withNeighborsList.add(node2)});return withNeighborsList},LNode.prototype.getNoOfChildren=function(){var noOfChildren=0;if(null==this.child)noOfChildren=1;else for(var nodes5=this.child.getNodes(),i2=0;i2<nodes5.length;i2++)noOfChildren+=nodes5[i2].getNoOfChildren();return 0==noOfChildren&&(noOfChildren=1),noOfChildren},LNode.prototype.getEstimatedSize=function(){if(this.estimatedSize==Integer.MIN_VALUE)throw"assert failed";return this.estimatedSize},LNode.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},LNode.prototype.scatter=function(){var randomCenterX,randomCenterY,minX=-LayoutConstants.INITIAL_WORLD_BOUNDARY,maxX=LayoutConstants.INITIAL_WORLD_BOUNDARY;randomCenterX=LayoutConstants.WORLD_CENTER_X+RandomSeed.nextDouble()*(maxX-minX)+minX;var minY=-LayoutConstants.INITIAL_WORLD_BOUNDARY,maxY=LayoutConstants.INITIAL_WORLD_BOUNDARY;randomCenterY=LayoutConstants.WORLD_CENTER_Y+RandomSeed.nextDouble()*(maxY-minY)+minY,this.rect.x=randomCenterX,this.rect.y=randomCenterY},LNode.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var childGraph=this.getChild();if(childGraph.updateBounds(!0),this.rect.x=childGraph.getLeft(),this.rect.y=childGraph.getTop(),this.setWidth(childGraph.getRight()-childGraph.getLeft()),this.setHeight(childGraph.getBottom()-childGraph.getTop()),LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS){var width3=childGraph.getRight()-childGraph.getLeft(),height2=childGraph.getBottom()-childGraph.getTop();this.labelWidth>width3&&(this.rect.x-=(this.labelWidth-width3)/2,this.setWidth(this.labelWidth)),this.labelHeight>height2&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-height2)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-height2),this.setHeight(this.labelHeight))}}},LNode.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==Integer.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},LNode.prototype.transform=function(trans){var left3=this.rect.x;left3>LayoutConstants.WORLD_BOUNDARY?left3=LayoutConstants.WORLD_BOUNDARY:left3<-LayoutConstants.WORLD_BOUNDARY&&(left3=-LayoutConstants.WORLD_BOUNDARY);var top2=this.rect.y;top2>LayoutConstants.WORLD_BOUNDARY?top2=LayoutConstants.WORLD_BOUNDARY:top2<-LayoutConstants.WORLD_BOUNDARY&&(top2=-LayoutConstants.WORLD_BOUNDARY);var leftTop=new PointD(left3,top2),vLeftTop=trans.inverseTransformPoint(leftTop);this.setLocation(vLeftTop.x,vLeftTop.y)},LNode.prototype.getLeft=function(){return this.rect.x},LNode.prototype.getRight=function(){return this.rect.x+this.rect.width},LNode.prototype.getTop=function(){return this.rect.y},LNode.prototype.getBottom=function(){return this.rect.y+this.rect.height},LNode.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},module3.exports=LNode},function(module3,exports3,__webpack_require__){function PointD(x5,y6){null==x5&&null==y6?(this.x=0,this.y=0):(this.x=x5,this.y=y6)}__name(PointD,"PointD"),PointD.prototype.getX=function(){return this.x},PointD.prototype.getY=function(){return this.y},PointD.prototype.setX=function(x5){this.x=x5},PointD.prototype.setY=function(y6){this.y=y6},PointD.prototype.getDifference=function(pt){return new DimensionD(this.x-pt.x,this.y-pt.y)},PointD.prototype.getCopy=function(){return new PointD(this.x,this.y)},PointD.prototype.translate=function(dim){return this.x+=dim.width,this.y+=dim.height,this},module3.exports=PointD},function(module3,exports3,__webpack_require__){var LGraphObject=__webpack_require__(2),Integer=__webpack_require__(10),LayoutConstants=__webpack_require__(0),LGraphManager=__webpack_require__(6),LNode=__webpack_require__(3),LEdge=__webpack_require__(1),RectangleD=__webpack_require__(13),Point3=__webpack_require__(12),LinkedList=__webpack_require__(11);function LGraph(parent4,obj2,vGraph){LGraphObject.call(this,vGraph),this.estimatedSize=Integer.MIN_VALUE,this.margin=LayoutConstants.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=parent4,null!=obj2&&obj2 instanceof LGraphManager?this.graphManager=obj2:null!=obj2&&obj2 instanceof Layout&&(this.graphManager=obj2.graphManager)}for(var prop in __name(LGraph,"LGraph"),LGraph.prototype=Object.create(LGraphObject.prototype),LGraphObject)LGraph[prop]=LGraphObject[prop];LGraph.prototype.getNodes=function(){return this.nodes},LGraph.prototype.getEdges=function(){return this.edges},LGraph.prototype.getGraphManager=function(){return this.graphManager},LGraph.prototype.getParent=function(){return this.parent},LGraph.prototype.getLeft=function(){return this.left},LGraph.prototype.getRight=function(){return this.right},LGraph.prototype.getTop=function(){return this.top},LGraph.prototype.getBottom=function(){return this.bottom},LGraph.prototype.isConnected=function(){return this.isConnected},LGraph.prototype.add=function(obj1,sourceNode,targetNode){if(null==sourceNode&&null==targetNode){var newNode=obj1;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(newNode)>-1)throw"Node already in graph!";return newNode.owner=this,this.getNodes().push(newNode),newNode}var newEdge=obj1;if(!(this.getNodes().indexOf(sourceNode)>-1&&this.getNodes().indexOf(targetNode)>-1))throw"Source or target not in graph!";if(sourceNode.owner!=targetNode.owner||sourceNode.owner!=this)throw"Both owners must be this graph!";return sourceNode.owner!=targetNode.owner?null:(newEdge.source=sourceNode,newEdge.target=targetNode,newEdge.isInterGraph=!1,this.getEdges().push(newEdge),sourceNode.edges.push(newEdge),targetNode!=sourceNode&&targetNode.edges.push(newEdge),newEdge)},LGraph.prototype.remove=function(obj){var node2=obj;if(obj instanceof LNode){if(null==node2)throw"Node is null!";if(null==node2.owner||node2.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var edgesToBeRemoved=node2.edges.slice(),s2=edgesToBeRemoved.length,i2=0;i2<s2;i2++)(edge=edgesToBeRemoved[i2]).isInterGraph?this.graphManager.remove(edge):edge.source.owner.remove(edge);if(-1==(index=this.nodes.indexOf(node2)))throw"Node not in owner node list!";this.nodes.splice(index,1)}else if(obj instanceof LEdge){var edge;if(null==(edge=obj))throw"Edge is null!";if(null==edge.source||null==edge.target)throw"Source and/or target is null!";if(null==edge.source.owner||null==edge.target.owner||edge.source.owner!=this||edge.target.owner!=this)throw"Source and/or target owner is invalid!";var index,sourceIndex=edge.source.edges.indexOf(edge),targetIndex=edge.target.edges.indexOf(edge);if(!(sourceIndex>-1&&targetIndex>-1))throw"Source and/or target doesn't know this edge!";if(edge.source.edges.splice(sourceIndex,1),edge.target!=edge.source&&edge.target.edges.splice(targetIndex,1),-1==(index=edge.source.owner.getEdges().indexOf(edge)))throw"Not in owner's edge list!";edge.source.owner.getEdges().splice(index,1)}},LGraph.prototype.updateLeftTop=function(){for(var nodeTop,nodeLeft,margin,top2=Integer.MAX_VALUE,left3=Integer.MAX_VALUE,nodes5=this.getNodes(),s2=nodes5.length,i2=0;i2<s2;i2++){var lNode=nodes5[i2];top2>(nodeTop=lNode.getTop())&&(top2=nodeTop),left3>(nodeLeft=lNode.getLeft())&&(left3=nodeLeft)}return top2==Integer.MAX_VALUE?null:(margin=null!=nodes5[0].getParent().paddingLeft?nodes5[0].getParent().paddingLeft:this.margin,this.left=left3-margin,this.top=top2-margin,new Point3(this.left,this.top))},LGraph.prototype.updateBounds=function(recursive){for(var nodeLeft,nodeRight,nodeTop,nodeBottom,margin,left3=Integer.MAX_VALUE,right3=-Integer.MAX_VALUE,top2=Integer.MAX_VALUE,bottom2=-Integer.MAX_VALUE,nodes5=this.nodes,s2=nodes5.length,i2=0;i2<s2;i2++){var lNode=nodes5[i2];recursive&&null!=lNode.child&&lNode.updateBounds(),left3>(nodeLeft=lNode.getLeft())&&(left3=nodeLeft),right3<(nodeRight=lNode.getRight())&&(right3=nodeRight),top2>(nodeTop=lNode.getTop())&&(top2=nodeTop),bottom2<(nodeBottom=lNode.getBottom())&&(bottom2=nodeBottom)}var boundingRect=new RectangleD(left3,top2,right3-left3,bottom2-top2);left3==Integer.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),margin=null!=nodes5[0].getParent().paddingLeft?nodes5[0].getParent().paddingLeft:this.margin,this.left=boundingRect.x-margin,this.right=boundingRect.x+boundingRect.width+margin,this.top=boundingRect.y-margin,this.bottom=boundingRect.y+boundingRect.height+margin},LGraph.calculateBounds=function(nodes5){for(var nodeLeft,nodeRight,nodeTop,nodeBottom,left3=Integer.MAX_VALUE,right3=-Integer.MAX_VALUE,top2=Integer.MAX_VALUE,bottom2=-Integer.MAX_VALUE,s2=nodes5.length,i2=0;i2<s2;i2++){var lNode=nodes5[i2];left3>(nodeLeft=lNode.getLeft())&&(left3=nodeLeft),right3<(nodeRight=lNode.getRight())&&(right3=nodeRight),top2>(nodeTop=lNode.getTop())&&(top2=nodeTop),bottom2<(nodeBottom=lNode.getBottom())&&(bottom2=nodeBottom)}return new RectangleD(left3,top2,right3-left3,bottom2-top2)},LGraph.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},LGraph.prototype.getEstimatedSize=function(){if(this.estimatedSize==Integer.MIN_VALUE)throw"assert failed";return this.estimatedSize},LGraph.prototype.calcEstimatedSize=function(){for(var size4=0,nodes5=this.nodes,s2=nodes5.length,i2=0;i2<s2;i2++){size4+=nodes5[i2].calcEstimatedSize()}return this.estimatedSize=0==size4?LayoutConstants.EMPTY_COMPOUND_NODE_SIZE:size4/Math.sqrt(this.nodes.length),this.estimatedSize},LGraph.prototype.updateConnected=function(){var self2=this;if(0!=this.nodes.length){var neighborEdges,currentNeighbor,queue=new LinkedList,visited=new Set,currentNode=this.nodes[0];for(currentNode.withChildren().forEach(function(node2){queue.push(node2),visited.add(node2)});0!==queue.length;)for(var size4=(neighborEdges=(currentNode=queue.shift()).getEdges()).length,i2=0;i2<size4;i2++){if(null!=(currentNeighbor=neighborEdges[i2].getOtherEndInGraph(currentNode,this))&&!visited.has(currentNeighbor))currentNeighbor.withChildren().forEach(function(node2){queue.push(node2),visited.add(node2)})}if(this.isConnected=!1,visited.size>=this.nodes.length){var noOfVisitedInThisGraph=0;visited.forEach(function(visitedNode){visitedNode.owner==self2&&noOfVisitedInThisGraph++}),noOfVisitedInThisGraph==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},module3.exports=LGraph},function(module3,exports3,__webpack_require__){var LGraph,LEdge=__webpack_require__(1);function LGraphManager(layout6){LGraph=__webpack_require__(5),this.layout=layout6,this.graphs=[],this.edges=[]}__name(LGraphManager,"LGraphManager"),LGraphManager.prototype.addRoot=function(){var ngraph=this.layout.newGraph(),nnode=this.layout.newNode(null),root3=this.add(ngraph,nnode);return this.setRootGraph(root3),this.rootGraph},LGraphManager.prototype.add=function(newGraph,parentNode,newEdge,sourceNode,targetNode){if(null==newEdge&&null==sourceNode&&null==targetNode){if(null==newGraph)throw"Graph is null!";if(null==parentNode)throw"Parent node is null!";if(this.graphs.indexOf(newGraph)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(newGraph),null!=newGraph.parent)throw"Already has a parent!";if(null!=parentNode.child)throw"Already has a child!";return newGraph.parent=parentNode,parentNode.child=newGraph,newGraph}targetNode=newEdge,newEdge=newGraph;var sourceGraph=(sourceNode=parentNode).getOwner(),targetGraph=targetNode.getOwner();if(null==sourceGraph||sourceGraph.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==targetGraph||targetGraph.getGraphManager()!=this)throw"Target not in this graph mgr!";if(sourceGraph==targetGraph)return newEdge.isInterGraph=!1,sourceGraph.add(newEdge,sourceNode,targetNode);if(newEdge.isInterGraph=!0,newEdge.source=sourceNode,newEdge.target=targetNode,this.edges.indexOf(newEdge)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(newEdge),null==newEdge.source||null==newEdge.target)throw"Edge source and/or target is null!";if(-1!=newEdge.source.edges.indexOf(newEdge)||-1!=newEdge.target.edges.indexOf(newEdge))throw"Edge already in source and/or target incidency list!";return newEdge.source.edges.push(newEdge),newEdge.target.edges.push(newEdge),newEdge},LGraphManager.prototype.remove=function(lObj){if(lObj instanceof LGraph){var graph=lObj;if(graph.getGraphManager()!=this)throw"Graph not in this graph mgr";if(graph!=this.rootGraph&&(null==graph.parent||graph.parent.graphManager!=this))throw"Invalid parent node!";for(var edge,edgesToBeRemoved=[],s2=(edgesToBeRemoved=edgesToBeRemoved.concat(graph.getEdges())).length,i2=0;i2<s2;i2++)edge=edgesToBeRemoved[i2],graph.remove(edge);var node2,nodesToBeRemoved=[];s2=(nodesToBeRemoved=nodesToBeRemoved.concat(graph.getNodes())).length;for(i2=0;i2<s2;i2++)node2=nodesToBeRemoved[i2],graph.remove(node2);graph==this.rootGraph&&this.setRootGraph(null);var index=this.graphs.indexOf(graph);this.graphs.splice(index,1),graph.parent=null}else if(lObj instanceof LEdge){if(null==(edge=lObj))throw"Edge is null!";if(!edge.isInterGraph)throw"Not an inter-graph edge!";if(null==edge.source||null==edge.target)throw"Source and/or target is null!";if(-1==edge.source.edges.indexOf(edge)||-1==edge.target.edges.indexOf(edge))throw"Source and/or target doesn't know this edge!";index=edge.source.edges.indexOf(edge);if(edge.source.edges.splice(index,1),index=edge.target.edges.indexOf(edge),edge.target.edges.splice(index,1),null==edge.source.owner||null==edge.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==edge.source.owner.getGraphManager().edges.indexOf(edge))throw"Not in owner graph manager's edge list!";index=edge.source.owner.getGraphManager().edges.indexOf(edge);edge.source.owner.getGraphManager().edges.splice(index,1)}},LGraphManager.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},LGraphManager.prototype.getGraphs=function(){return this.graphs},LGraphManager.prototype.getAllNodes=function(){if(null==this.allNodes){for(var nodeList=[],graphs=this.getGraphs(),s2=graphs.length,i2=0;i2<s2;i2++)nodeList=nodeList.concat(graphs[i2].getNodes());this.allNodes=nodeList}return this.allNodes},LGraphManager.prototype.resetAllNodes=function(){this.allNodes=null},LGraphManager.prototype.resetAllEdges=function(){this.allEdges=null},LGraphManager.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},LGraphManager.prototype.getAllEdges=function(){if(null==this.allEdges){for(var edgeList2=[],graphs=this.getGraphs(),i2=(graphs.length,0);i2<graphs.length;i2++)edgeList2=edgeList2.concat(graphs[i2].getEdges());edgeList2=edgeList2.concat(this.edges),this.allEdges=edgeList2}return this.allEdges},LGraphManager.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},LGraphManager.prototype.setAllNodesToApplyGravitation=function(nodeList){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=nodeList},LGraphManager.prototype.getRoot=function(){return this.rootGraph},LGraphManager.prototype.setRootGraph=function(graph){if(graph.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=graph,null==graph.parent&&(graph.parent=this.layout.newNode("Root node"))},LGraphManager.prototype.getLayout=function(){return this.layout},LGraphManager.prototype.isOneAncestorOfOther=function(firstNode,secondNode){if(null==firstNode||null==secondNode)throw"assert failed";if(firstNode==secondNode)return!0;for(var parentNode,ownerGraph=firstNode.getOwner();;){if(null==(parentNode=ownerGraph.getParent()))break;if(parentNode==secondNode)return!0;if(null==(ownerGraph=parentNode.getOwner()))break}for(ownerGraph=secondNode.getOwner();;){if(null==(parentNode=ownerGraph.getParent()))break;if(parentNode==firstNode)return!0;if(null==(ownerGraph=parentNode.getOwner()))break}return!1},LGraphManager.prototype.calcLowestCommonAncestors=function(){for(var edge,sourceNode,targetNode,sourceAncestorGraph,targetAncestorGraph,edges3=this.getAllEdges(),s2=edges3.length,i2=0;i2<s2;i2++)if(sourceNode=(edge=edges3[i2]).source,targetNode=edge.target,edge.lca=null,edge.sourceInLca=sourceNode,edge.targetInLca=targetNode,sourceNode!=targetNode){for(sourceAncestorGraph=sourceNode.getOwner();null==edge.lca;){for(edge.targetInLca=targetNode,targetAncestorGraph=targetNode.getOwner();null==edge.lca;){if(targetAncestorGraph==sourceAncestorGraph){edge.lca=targetAncestorGraph;break}if(targetAncestorGraph==this.rootGraph)break;if(null!=edge.lca)throw"assert failed";edge.targetInLca=targetAncestorGraph.getParent(),targetAncestorGraph=edge.targetInLca.getOwner()}if(sourceAncestorGraph==this.rootGraph)break;null==edge.lca&&(edge.sourceInLca=sourceAncestorGraph.getParent(),sourceAncestorGraph=edge.sourceInLca.getOwner())}if(null==edge.lca)throw"assert failed"}else edge.lca=sourceNode.getOwner()},LGraphManager.prototype.calcLowestCommonAncestor=function(firstNode,secondNode){if(firstNode==secondNode)return firstNode.getOwner();for(var firstOwnerGraph=firstNode.getOwner();;){if(null==firstOwnerGraph)break;for(var secondOwnerGraph=secondNode.getOwner();;){if(null==secondOwnerGraph)break;if(secondOwnerGraph==firstOwnerGraph)return secondOwnerGraph;secondOwnerGraph=secondOwnerGraph.getParent().getOwner()}firstOwnerGraph=firstOwnerGraph.getParent().getOwner()}return firstOwnerGraph},LGraphManager.prototype.calcInclusionTreeDepths=function(graph,depth){var node2;null==graph&&null==depth&&(graph=this.rootGraph,depth=1);for(var nodes5=graph.getNodes(),s2=nodes5.length,i2=0;i2<s2;i2++)(node2=nodes5[i2]).inclusionTreeDepth=depth,null!=node2.child&&this.calcInclusionTreeDepths(node2.child,depth+1)},LGraphManager.prototype.includesInvalidEdge=function(){for(var edge,s2=this.edges.length,i2=0;i2<s2;i2++)if(edge=this.edges[i2],this.isOneAncestorOfOther(edge.source,edge.target))return!0;return!1},module3.exports=LGraphManager},function(module3,exports3,__webpack_require__){var LayoutConstants=__webpack_require__(0);function FDLayoutConstants(){}for(var prop in __name(FDLayoutConstants,"FDLayoutConstants"),LayoutConstants)FDLayoutConstants[prop]=LayoutConstants[prop];FDLayoutConstants.MAX_ITERATIONS=2500,FDLayoutConstants.DEFAULT_EDGE_LENGTH=50,FDLayoutConstants.DEFAULT_SPRING_STRENGTH=.45,FDLayoutConstants.DEFAULT_REPULSION_STRENGTH=4500,FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=.4,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,FDLayoutConstants.COOLING_ADAPTATION_FACTOR=.33,FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT=1e3,FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT=5e3,FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,FDLayoutConstants.MAX_NODE_DISPLACEMENT=3*FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL,FDLayoutConstants.MIN_REPULSION_DIST=FDLayoutConstants.DEFAULT_EDGE_LENGTH/10,FDLayoutConstants.CONVERGENCE_CHECK_PERIOD=100,FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,FDLayoutConstants.MIN_EDGE_LENGTH=1,FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD=10,module3.exports=FDLayoutConstants},function(module3,exports3,__webpack_require__){var Point3=__webpack_require__(12);function IGeometry(){}__name(IGeometry,"IGeometry"),IGeometry.calcSeparationAmount=function(rectA,rectB,overlapAmount,separationBuffer){if(!rectA.intersects(rectB))throw"assert failed";var directions=new Array(2);this.decideDirectionsForOverlappingNodes(rectA,rectB,directions),overlapAmount[0]=Math.min(rectA.getRight(),rectB.getRight())-Math.max(rectA.x,rectB.x),overlapAmount[1]=Math.min(rectA.getBottom(),rectB.getBottom())-Math.max(rectA.y,rectB.y),rectA.getX()<=rectB.getX()&&rectA.getRight()>=rectB.getRight()?overlapAmount[0]+=Math.min(rectB.getX()-rectA.getX(),rectA.getRight()-rectB.getRight()):rectB.getX()<=rectA.getX()&&rectB.getRight()>=rectA.getRight()&&(overlapAmount[0]+=Math.min(rectA.getX()-rectB.getX(),rectB.getRight()-rectA.getRight())),rectA.getY()<=rectB.getY()&&rectA.getBottom()>=rectB.getBottom()?overlapAmount[1]+=Math.min(rectB.getY()-rectA.getY(),rectA.getBottom()-rectB.getBottom()):rectB.getY()<=rectA.getY()&&rectB.getBottom()>=rectA.getBottom()&&(overlapAmount[1]+=Math.min(rectA.getY()-rectB.getY(),rectB.getBottom()-rectA.getBottom()));var slope=Math.abs((rectB.getCenterY()-rectA.getCenterY())/(rectB.getCenterX()-rectA.getCenterX()));rectB.getCenterY()===rectA.getCenterY()&&rectB.getCenterX()===rectA.getCenterX()&&(slope=1);var moveByY=slope*overlapAmount[0],moveByX=overlapAmount[1]/slope;overlapAmount[0]<moveByX?moveByX=overlapAmount[0]:moveByY=overlapAmount[1],overlapAmount[0]=-1*directions[0]*(moveByX/2+separationBuffer),overlapAmount[1]=-1*directions[1]*(moveByY/2+separationBuffer)},IGeometry.decideDirectionsForOverlappingNodes=function(rectA,rectB,directions){rectA.getCenterX()<rectB.getCenterX()?directions[0]=-1:directions[0]=1,rectA.getCenterY()<rectB.getCenterY()?directions[1]=-1:directions[1]=1},IGeometry.getIntersection2=function(rectA,rectB,result){var p1x=rectA.getCenterX(),p1y=rectA.getCenterY(),p2x=rectB.getCenterX(),p2y=rectB.getCenterY();if(rectA.intersects(rectB))return result[0]=p1x,result[1]=p1y,result[2]=p2x,result[3]=p2y,!0;var topLeftAx=rectA.getX(),topLeftAy=rectA.getY(),topRightAx=rectA.getRight(),bottomLeftAx=rectA.getX(),bottomLeftAy=rectA.getBottom(),bottomRightAx=rectA.getRight(),halfWidthA=rectA.getWidthHalf(),halfHeightA=rectA.getHeightHalf(),topLeftBx=rectB.getX(),topLeftBy=rectB.getY(),topRightBx=rectB.getRight(),bottomLeftBx=rectB.getX(),bottomLeftBy=rectB.getBottom(),bottomRightBx=rectB.getRight(),halfWidthB=rectB.getWidthHalf(),halfHeightB=rectB.getHeightHalf(),clipPointAFound=!1,clipPointBFound=!1;if(p1x===p2x){if(p1y>p2y)return result[0]=p1x,result[1]=topLeftAy,result[2]=p2x,result[3]=bottomLeftBy,!1;if(p1y<p2y)return result[0]=p1x,result[1]=bottomLeftAy,result[2]=p2x,result[3]=topLeftBy,!1}else if(p1y===p2y){if(p1x>p2x)return result[0]=topLeftAx,result[1]=p1y,result[2]=topRightBx,result[3]=p2y,!1;if(p1x<p2x)return result[0]=topRightAx,result[1]=p1y,result[2]=topLeftBx,result[3]=p2y,!1}else{var slopeA=rectA.height/rectA.width,slopeB=rectB.height/rectB.width,slopePrime=(p2y-p1y)/(p2x-p1x),cardinalDirectionA=void 0,cardinalDirectionB=void 0,tempPointAx=void 0,tempPointAy=void 0,tempPointBx=void 0,tempPointBy=void 0;if(-slopeA===slopePrime?p1x>p2x?(result[0]=bottomLeftAx,result[1]=bottomLeftAy,clipPointAFound=!0):(result[0]=topRightAx,result[1]=topLeftAy,clipPointAFound=!0):slopeA===slopePrime&&(p1x>p2x?(result[0]=topLeftAx,result[1]=topLeftAy,clipPointAFound=!0):(result[0]=bottomRightAx,result[1]=bottomLeftAy,clipPointAFound=!0)),-slopeB===slopePrime?p2x>p1x?(result[2]=bottomLeftBx,result[3]=bottomLeftBy,clipPointBFound=!0):(result[2]=topRightBx,result[3]=topLeftBy,clipPointBFound=!0):slopeB===slopePrime&&(p2x>p1x?(result[2]=topLeftBx,result[3]=topLeftBy,clipPointBFound=!0):(result[2]=bottomRightBx,result[3]=bottomLeftBy,clipPointBFound=!0)),clipPointAFound&&clipPointBFound)return!1;if(p1x>p2x?p1y>p2y?(cardinalDirectionA=this.getCardinalDirection(slopeA,slopePrime,4),cardinalDirectionB=this.getCardinalDirection(slopeB,slopePrime,2)):(cardinalDirectionA=this.getCardinalDirection(-slopeA,slopePrime,3),cardinalDirectionB=this.getCardinalDirection(-slopeB,slopePrime,1)):p1y>p2y?(cardinalDirectionA=this.getCardinalDirection(-slopeA,slopePrime,1),cardinalDirectionB=this.getCardinalDirection(-slopeB,slopePrime,3)):(cardinalDirectionA=this.getCardinalDirection(slopeA,slopePrime,2),cardinalDirectionB=this.getCardinalDirection(slopeB,slopePrime,4)),!clipPointAFound)switch(cardinalDirectionA){case 1:tempPointAy=topLeftAy,tempPointAx=p1x+-halfHeightA/slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 2:tempPointAx=bottomRightAx,tempPointAy=p1y+halfWidthA*slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 3:tempPointAy=bottomLeftAy,tempPointAx=p1x+halfHeightA/slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 4:tempPointAx=bottomLeftAx,tempPointAy=p1y+-halfWidthA*slopePrime,result[0]=tempPointAx,result[1]=tempPointAy}if(!clipPointBFound)switch(cardinalDirectionB){case 1:tempPointBy=topLeftBy,tempPointBx=p2x+-halfHeightB/slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 2:tempPointBx=bottomRightBx,tempPointBy=p2y+halfWidthB*slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 3:tempPointBy=bottomLeftBy,tempPointBx=p2x+halfHeightB/slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 4:tempPointBx=bottomLeftBx,tempPointBy=p2y+-halfWidthB*slopePrime,result[2]=tempPointBx,result[3]=tempPointBy}}return!1},IGeometry.getCardinalDirection=function(slope,slopePrime,line2){return slope>slopePrime?line2:1+line2%4},IGeometry.getIntersection=function(s1,s2,f1,f2){if(null==f2)return this.getIntersection2(s1,s2,f1);var a1,a2,b1,b22,c1,c22,denom,x1=s1.x,y1=s1.y,x22=s2.x,y22=s2.y,x32=f1.x,y32=f1.y,x42=f2.x,y42=f2.y;return 0===(denom=(a1=y22-y1)*(b22=x32-x42)-(a2=y42-y32)*(b1=x1-x22))?null:new Point3((b1*(c22=x42*y32-x32*y42)-b22*(c1=x22*y1-x1*y22))/denom,(a2*c1-a1*c22)/denom)},IGeometry.angleOfVector=function(Cx,Cy,Nx,Ny){var C_angle=void 0;return Cx!==Nx?(C_angle=Math.atan((Ny-Cy)/(Nx-Cx)),Nx<Cx?C_angle+=Math.PI:Ny<Cy&&(C_angle+=this.TWO_PI)):C_angle=Ny<Cy?this.ONE_AND_HALF_PI:this.HALF_PI,C_angle},IGeometry.doIntersect=function(p1,p22,p3,p4){var a2=p1.x,b3=p1.y,c3=p22.x,d3=p22.y,p5=p3.x,q3=p3.y,r2=p4.x,s2=p4.y,det=(c3-a2)*(s2-q3)-(r2-p5)*(d3-b3);if(0===det)return!1;var lambda=((s2-q3)*(r2-a2)+(p5-r2)*(s2-b3))/det,gamma2=((b3-d3)*(r2-a2)+(c3-a2)*(s2-b3))/det;return 0<lambda&&lambda<1&&0<gamma2&&gamma2<1},IGeometry.HALF_PI=.5*Math.PI,IGeometry.ONE_AND_HALF_PI=1.5*Math.PI,IGeometry.TWO_PI=2*Math.PI,IGeometry.THREE_PI=3*Math.PI,module3.exports=IGeometry},function(module3,exports3,__webpack_require__){function IMath(){}__name(IMath,"IMath"),IMath.sign=function(value2){return value2>0?1:value2<0?-1:0},IMath.floor=function(value2){return value2<0?Math.ceil(value2):Math.floor(value2)},IMath.ceil=function(value2){return value2<0?Math.floor(value2):Math.ceil(value2)},module3.exports=IMath},function(module3,exports3,__webpack_require__){function Integer(){}__name(Integer,"Integer"),Integer.MAX_VALUE=2147483647,Integer.MIN_VALUE=-2147483648,module3.exports=Integer},function(module3,exports3,__webpack_require__){var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var nodeFrom=__name(function(value2){return{value:value2,next:null,prev:null}},"nodeFrom"),add3=__name(function(prev2,node2,next3,list){return null!==prev2?prev2.next=node2:list.head=node2,null!==next3?next3.prev=node2:list.tail=node2,node2.prev=prev2,node2.next=next3,list.length++,node2},"add"),_remove=__name(function(node2,list){var prev2=node2.prev,next3=node2.next;return null!==prev2?prev2.next=next3:list.head=next3,null!==next3?next3.prev=prev2:list.tail=prev2,node2.prev=node2.next=null,list.length--,node2},"_remove"),LinkedList=function(){function LinkedList2(vals){var _this=this;_classCallCheck2(this,LinkedList2),this.length=0,this.head=null,this.tail=null,null!=vals&&vals.forEach(function(v3){return _this.push(v3)})}return __name(LinkedList2,"LinkedList"),_createClass2(LinkedList2,[{key:"size",value:__name(function(){return this.length},"size")},{key:"insertBefore",value:__name(function(val,otherNode){return add3(otherNode.prev,nodeFrom(val),otherNode,this)},"insertBefore")},{key:"insertAfter",value:__name(function(val,otherNode){return add3(otherNode,nodeFrom(val),otherNode.next,this)},"insertAfter")},{key:"insertNodeBefore",value:__name(function(newNode,otherNode){return add3(otherNode.prev,newNode,otherNode,this)},"insertNodeBefore")},{key:"insertNodeAfter",value:__name(function(newNode,otherNode){return add3(otherNode,newNode,otherNode.next,this)},"insertNodeAfter")},{key:"push",value:__name(function(val){return add3(this.tail,nodeFrom(val),null,this)},"push")},{key:"unshift",value:__name(function(val){return add3(null,nodeFrom(val),this.head,this)},"unshift")},{key:"remove",value:__name(function(node2){return _remove(node2,this)},"remove")},{key:"pop",value:__name(function(){return _remove(this.tail,this).value},"pop")},{key:"popNode",value:__name(function(){return _remove(this.tail,this)},"popNode")},{key:"shift",value:__name(function(){return _remove(this.head,this).value},"shift")},{key:"shiftNode",value:__name(function(){return _remove(this.head,this)},"shiftNode")},{key:"get_object_at",value:__name(function(index){if(index<=this.length()){for(var i2=1,current=this.head;i2<index;)current=current.next,i2++;return current.value}},"get_object_at")},{key:"set_object_at",value:__name(function(index,value2){if(index<=this.length()){for(var i2=1,current=this.head;i2<index;)current=current.next,i2++;current.value=value2}},"set_object_at")}]),LinkedList2}();module3.exports=LinkedList},function(module3,exports3,__webpack_require__){function Point3(x5,y6,p3){this.x=null,this.y=null,null==x5&&null==y6&&null==p3?(this.x=0,this.y=0):"number"==typeof x5&&"number"==typeof y6&&null==p3?(this.x=x5,this.y=y6):"Point"==x5.constructor.name&&null==y6&&null==p3&&(p3=x5,this.x=p3.x,this.y=p3.y)}__name(Point3,"Point"),Point3.prototype.getX=function(){return this.x},Point3.prototype.getY=function(){return this.y},Point3.prototype.getLocation=function(){return new Point3(this.x,this.y)},Point3.prototype.setLocation=function(x5,y6,p3){"Point"==x5.constructor.name&&null==y6&&null==p3?(p3=x5,this.setLocation(p3.x,p3.y)):"number"==typeof x5&&"number"==typeof y6&&null==p3&&(parseInt(x5)==x5&&parseInt(y6)==y6?this.move(x5,y6):(this.x=Math.floor(x5+.5),this.y=Math.floor(y6+.5)))},Point3.prototype.move=function(x5,y6){this.x=x5,this.y=y6},Point3.prototype.translate=function(dx,dy){this.x+=dx,this.y+=dy},Point3.prototype.equals=function(obj){if("Point"==obj.constructor.name){var pt=obj;return this.x==pt.x&&this.y==pt.y}return this==obj},Point3.prototype.toString=function(){return(new Point3).constructor.name+"[x="+this.x+",y="+this.y+"]"},module3.exports=Point3},function(module3,exports3,__webpack_require__){function RectangleD(x5,y6,width3,height2){this.x=0,this.y=0,this.width=0,this.height=0,null!=x5&&null!=y6&&null!=width3&&null!=height2&&(this.x=x5,this.y=y6,this.width=width3,this.height=height2)}__name(RectangleD,"RectangleD"),RectangleD.prototype.getX=function(){return this.x},RectangleD.prototype.setX=function(x5){this.x=x5},RectangleD.prototype.getY=function(){return this.y},RectangleD.prototype.setY=function(y6){this.y=y6},RectangleD.prototype.getWidth=function(){return this.width},RectangleD.prototype.setWidth=function(width3){this.width=width3},RectangleD.prototype.getHeight=function(){return this.height},RectangleD.prototype.setHeight=function(height2){this.height=height2},RectangleD.prototype.getRight=function(){return this.x+this.width},RectangleD.prototype.getBottom=function(){return this.y+this.height},RectangleD.prototype.intersects=function(a2){return!(this.getRight()<a2.x)&&(!(this.getBottom()<a2.y)&&(!(a2.getRight()<this.x)&&!(a2.getBottom()<this.y)))},RectangleD.prototype.getCenterX=function(){return this.x+this.width/2},RectangleD.prototype.getMinX=function(){return this.getX()},RectangleD.prototype.getMaxX=function(){return this.getX()+this.width},RectangleD.prototype.getCenterY=function(){return this.y+this.height/2},RectangleD.prototype.getMinY=function(){return this.getY()},RectangleD.prototype.getMaxY=function(){return this.getY()+this.height},RectangleD.prototype.getWidthHalf=function(){return this.width/2},RectangleD.prototype.getHeightHalf=function(){return this.height/2},module3.exports=RectangleD},function(module3,exports3,__webpack_require__){var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function UniqueIDGeneretor(){}__name(UniqueIDGeneretor,"UniqueIDGeneretor"),UniqueIDGeneretor.lastID=0,UniqueIDGeneretor.createID=function(obj){return UniqueIDGeneretor.isPrimitive(obj)?obj:(null!=obj.uniqueID||(obj.uniqueID=UniqueIDGeneretor.getString(),UniqueIDGeneretor.lastID++),obj.uniqueID)},UniqueIDGeneretor.getString=function(id30){return null==id30&&(id30=UniqueIDGeneretor.lastID),"Object#"+id30},UniqueIDGeneretor.isPrimitive=function(arg){var type3=void 0===arg?"undefined":_typeof2(arg);return null==arg||"object"!=type3&&"function"!=type3},module3.exports=UniqueIDGeneretor},function(module3,exports3,__webpack_require__){function _toConsumableArray2(arr){if(Array.isArray(arr)){for(var i2=0,arr2=Array(arr.length);i2<arr.length;i2++)arr2[i2]=arr[i2];return arr2}return Array.from(arr)}__name(_toConsumableArray2,"_toConsumableArray");var LayoutConstants=__webpack_require__(0),LGraphManager=__webpack_require__(6),LNode=__webpack_require__(3),LEdge=__webpack_require__(1),LGraph=__webpack_require__(5),PointD=__webpack_require__(4),Transform2=__webpack_require__(17),Emitter4=__webpack_require__(27);function Layout2(isRemoteUse){Emitter4.call(this),this.layoutQuality=LayoutConstants.QUALITY,this.createBendsAsNeeded=LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=LayoutConstants.DEFAULT_INCREMENTAL,this.animationOnLayout=LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=LayoutConstants.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new LGraphManager(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=isRemoteUse&&(this.isRemoteUse=isRemoteUse)}__name(Layout2,"Layout"),Layout2.RANDOM_SEED=1,Layout2.prototype=Object.create(Emitter4.prototype),Layout2.prototype.getGraphManager=function(){return this.graphManager},Layout2.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},Layout2.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},Layout2.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},Layout2.prototype.newGraphManager=function(){var gm=new LGraphManager(this);return this.graphManager=gm,gm},Layout2.prototype.newGraph=function(vGraph){return new LGraph(null,this.graphManager,vGraph)},Layout2.prototype.newNode=function(vNode){return new LNode(this.graphManager,vNode)},Layout2.prototype.newEdge=function(vEdge){return new LEdge(null,null,vEdge)},Layout2.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},Layout2.prototype.runLayout=function(){var isLayoutSuccessfull;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),isLayoutSuccessfull=!this.checkLayoutSuccess()&&this.layout(),"during"!==LayoutConstants.ANIMATE&&(isLayoutSuccessfull&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,isLayoutSuccessfull)},Layout2.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},Layout2.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var allEdges=this.graphManager.getAllEdges(),i2=0;i2<allEdges.length;i2++)allEdges[i2];var nodes5=this.graphManager.getRoot().getNodes();for(i2=0;i2<nodes5.length;i2++)nodes5[i2];this.update(this.graphManager.getRoot())}},Layout2.prototype.update=function(obj){if(null==obj)this.update2();else if(obj instanceof LNode){var node2=obj;if(null!=node2.getChild())for(var nodes5=node2.getChild().getNodes(),i2=0;i2<nodes5.length;i2++)update(nodes5[i2]);if(null!=node2.vGraphObject)node2.vGraphObject.update(node2)}else if(obj instanceof LEdge){var edge=obj;if(null!=edge.vGraphObject)edge.vGraphObject.update(edge)}else if(obj instanceof LGraph){var graph=obj;if(null!=graph.vGraphObject)graph.vGraphObject.update(graph)}},Layout2.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=LayoutConstants.QUALITY,this.animationDuringLayout=LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=LayoutConstants.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=LayoutConstants.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},Layout2.prototype.transform=function(newLeftTop){if(null==newLeftTop)this.transform(new PointD(0,0));else{var trans=new Transform2,leftTop=this.graphManager.getRoot().updateLeftTop();if(null!=leftTop){trans.setWorldOrgX(newLeftTop.x),trans.setWorldOrgY(newLeftTop.y),trans.setDeviceOrgX(leftTop.x),trans.setDeviceOrgY(leftTop.y);for(var nodes5=this.getAllNodes(),i2=0;i2<nodes5.length;i2++)nodes5[i2].transform(trans)}}},Layout2.prototype.positionNodesRandomly=function(graph){if(null==graph)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var lNode,childGraph,nodes5=graph.getNodes(),i2=0;i2<nodes5.length;i2++)null==(childGraph=(lNode=nodes5[i2]).getChild())||0==childGraph.getNodes().length?lNode.scatter():(this.positionNodesRandomly(childGraph),lNode.updateBounds())},Layout2.prototype.getFlatForest=function(){for(var flatForest=[],isForest=!0,allNodes=this.graphManager.getRoot().getNodes(),isFlat=!0,i2=0;i2<allNodes.length;i2++)null!=allNodes[i2].getChild()&&(isFlat=!1);if(!isFlat)return flatForest;var visited=new Set,toBeVisited=[],parents3=new Map,unProcessedNodes=[];for(unProcessedNodes=unProcessedNodes.concat(allNodes);unProcessedNodes.length>0&&isForest;){for(toBeVisited.push(unProcessedNodes[0]);toBeVisited.length>0&&isForest;){var currentNode=toBeVisited[0];toBeVisited.splice(0,1),visited.add(currentNode);var neighborEdges=currentNode.getEdges();for(i2=0;i2<neighborEdges.length;i2++){var currentNeighbor=neighborEdges[i2].getOtherEnd(currentNode);if(parents3.get(currentNode)!=currentNeighbor){if(visited.has(currentNeighbor)){isForest=!1;break}toBeVisited.push(currentNeighbor),parents3.set(currentNeighbor,currentNode)}}}if(isForest){var temp=[].concat(_toConsumableArray2(visited));flatForest.push(temp);for(i2=0;i2<temp.length;i2++){var value2=temp[i2],index=unProcessedNodes.indexOf(value2);index>-1&&unProcessedNodes.splice(index,1)}visited=new Set,parents3=new Map}else flatForest=[]}return flatForest},Layout2.prototype.createDummyNodesForBendpoints=function(edge){for(var dummyNodes=[],prev2=edge.source,graph=this.graphManager.calcLowestCommonAncestor(edge.source,edge.target),i2=0;i2<edge.bendpoints.length;i2++){var dummyNode=this.newNode(null);dummyNode.setRect(new Point(0,0),new Dimension(1,1)),graph.add(dummyNode);var dummyEdge=this.newEdge(null);this.graphManager.add(dummyEdge,prev2,dummyNode),dummyNodes.add(dummyNode),prev2=dummyNode}dummyEdge=this.newEdge(null);return this.graphManager.add(dummyEdge,prev2,edge.target),this.edgeToDummyNodes.set(edge,dummyNodes),edge.isInterGraph()?this.graphManager.remove(edge):graph.remove(edge),dummyNodes},Layout2.prototype.createBendpointsFromDummyNodes=function(){var edges3=[];edges3=edges3.concat(this.graphManager.getAllEdges()),edges3=[].concat(_toConsumableArray2(this.edgeToDummyNodes.keys())).concat(edges3);for(var k2=0;k2<edges3.length;k2++){var lEdge=edges3[k2];if(lEdge.bendpoints.length>0){for(var path4=this.edgeToDummyNodes.get(lEdge),i2=0;i2<path4.length;i2++){var dummyNode=path4[i2],p3=new PointD(dummyNode.getCenterX(),dummyNode.getCenterY()),ebp=lEdge.bendpoints.get(i2);ebp.x=p3.x,ebp.y=p3.y,dummyNode.getOwner().remove(dummyNode)}this.graphManager.add(lEdge,lEdge.source,lEdge.target)}}},Layout2.transform=function(sliderValue,defaultValue,minDiv,maxMul){if(null!=minDiv&&null!=maxMul){var value2=defaultValue;if(sliderValue<=50)value2-=(defaultValue-defaultValue/minDiv)/50*(50-sliderValue);else value2+=(defaultValue*maxMul-defaultValue)/50*(sliderValue-50);return value2}var a2,b3;return sliderValue<=50?(a2=9*defaultValue/500,b3=defaultValue/10):(a2=9*defaultValue/50,b3=-8*defaultValue),a2*sliderValue+b3},Layout2.findCenterOfTree=function(nodes5){var list=[];list=list.concat(nodes5);var removedNodes=[],remainingDegrees=new Map,foundCenter=!1,centerNode=null;1!=list.length&&2!=list.length||(foundCenter=!0,centerNode=list[0]);for(var i2=0;i2<list.length;i2++){var degree=(node2=list[i2]).getNeighborsList().size;remainingDegrees.set(node2,node2.getNeighborsList().size),1==degree&&removedNodes.push(node2)}var tempList=[];for(tempList=tempList.concat(removedNodes);!foundCenter;){var tempList2=[];tempList2=tempList2.concat(tempList),tempList=[];for(i2=0;i2<list.length;i2++){var node2=list[i2],index=list.indexOf(node2);index>=0&&list.splice(index,1),node2.getNeighborsList().forEach(function(neighbour){if(removedNodes.indexOf(neighbour)<0){var newDegree=remainingDegrees.get(neighbour)-1;1==newDegree&&tempList.push(neighbour),remainingDegrees.set(neighbour,newDegree)}})}removedNodes=removedNodes.concat(tempList),1!=list.length&&2!=list.length||(foundCenter=!0,centerNode=list[0])}return centerNode},Layout2.prototype.setGraphManager=function(gm){this.graphManager=gm},module3.exports=Layout2},function(module3,exports3,__webpack_require__){function RandomSeed(){}__name(RandomSeed,"RandomSeed"),RandomSeed.seed=1,RandomSeed.x=0,RandomSeed.nextDouble=function(){return RandomSeed.x=1e4*Math.sin(RandomSeed.seed++),RandomSeed.x-Math.floor(RandomSeed.x)},module3.exports=RandomSeed},function(module3,exports3,__webpack_require__){var PointD=__webpack_require__(4);function Transform2(x5,y6){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}__name(Transform2,"Transform"),Transform2.prototype.getWorldOrgX=function(){return this.lworldOrgX},Transform2.prototype.setWorldOrgX=function(wox){this.lworldOrgX=wox},Transform2.prototype.getWorldOrgY=function(){return this.lworldOrgY},Transform2.prototype.setWorldOrgY=function(woy){this.lworldOrgY=woy},Transform2.prototype.getWorldExtX=function(){return this.lworldExtX},Transform2.prototype.setWorldExtX=function(wex){this.lworldExtX=wex},Transform2.prototype.getWorldExtY=function(){return this.lworldExtY},Transform2.prototype.setWorldExtY=function(wey){this.lworldExtY=wey},Transform2.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},Transform2.prototype.setDeviceOrgX=function(dox){this.ldeviceOrgX=dox},Transform2.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},Transform2.prototype.setDeviceOrgY=function(doy){this.ldeviceOrgY=doy},Transform2.prototype.getDeviceExtX=function(){return this.ldeviceExtX},Transform2.prototype.setDeviceExtX=function(dex){this.ldeviceExtX=dex},Transform2.prototype.getDeviceExtY=function(){return this.ldeviceExtY},Transform2.prototype.setDeviceExtY=function(dey){this.ldeviceExtY=dey},Transform2.prototype.transformX=function(x5){var xDevice=0,worldExtX=this.lworldExtX;return 0!=worldExtX&&(xDevice=this.ldeviceOrgX+(x5-this.lworldOrgX)*this.ldeviceExtX/worldExtX),xDevice},Transform2.prototype.transformY=function(y6){var yDevice=0,worldExtY=this.lworldExtY;return 0!=worldExtY&&(yDevice=this.ldeviceOrgY+(y6-this.lworldOrgY)*this.ldeviceExtY/worldExtY),yDevice},Transform2.prototype.inverseTransformX=function(x5){var xWorld=0,deviceExtX=this.ldeviceExtX;return 0!=deviceExtX&&(xWorld=this.lworldOrgX+(x5-this.ldeviceOrgX)*this.lworldExtX/deviceExtX),xWorld},Transform2.prototype.inverseTransformY=function(y6){var yWorld=0,deviceExtY=this.ldeviceExtY;return 0!=deviceExtY&&(yWorld=this.lworldOrgY+(y6-this.ldeviceOrgY)*this.lworldExtY/deviceExtY),yWorld},Transform2.prototype.inverseTransformPoint=function(inPoint){return new PointD(this.inverseTransformX(inPoint.x),this.inverseTransformY(inPoint.y))},module3.exports=Transform2},function(module3,exports3,__webpack_require__){function _toConsumableArray2(arr){if(Array.isArray(arr)){for(var i2=0,arr2=Array(arr.length);i2<arr.length;i2++)arr2[i2]=arr[i2];return arr2}return Array.from(arr)}__name(_toConsumableArray2,"_toConsumableArray");var Layout2=__webpack_require__(15),FDLayoutConstants=__webpack_require__(7),LayoutConstants=__webpack_require__(0),IGeometry=__webpack_require__(8),IMath=__webpack_require__(9);function FDLayout(){Layout2.call(this),this.useSmartIdealEdgeLengthCalculation=FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=FDLayoutConstants.DEFAULT_EDGE_LENGTH,this.springConstant=FDLayoutConstants.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*FDLayoutConstants.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=FDLayoutConstants.MAX_ITERATIONS}for(var prop in __name(FDLayout,"FDLayout"),FDLayout.prototype=Object.create(Layout2.prototype),Layout2)FDLayout[prop]=Layout2[prop];FDLayout.prototype.initParameters=function(){Layout2.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},FDLayout.prototype.calcIdealEdgeLengths=function(){for(var edge,lcaDepth,source,target,sizeOfSourceInLca,sizeOfTargetInLca,allEdges=this.getGraphManager().getAllEdges(),i2=0;i2<allEdges.length;i2++)(edge=allEdges[i2]).idealLength=this.idealEdgeLength,edge.isInterGraph&&(source=edge.getSource(),target=edge.getTarget(),sizeOfSourceInLca=edge.getSourceInLca().getEstimatedSize(),sizeOfTargetInLca=edge.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(edge.idealLength+=sizeOfSourceInLca+sizeOfTargetInLca-2*LayoutConstants.SIMPLE_NODE_SIZE),lcaDepth=edge.getLca().getInclusionTreeDepth(),edge.idealLength+=FDLayoutConstants.DEFAULT_EDGE_LENGTH*FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(source.getInclusionTreeDepth()+target.getInclusionTreeDepth()-2*lcaDepth))},FDLayout.prototype.initSpringEmbedder=function(){var s2=this.getAllNodes().length;this.incremental?(s2>FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*FDLayoutConstants.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(s2-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)/(FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-FDLayoutConstants.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL):(s2>FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(FDLayoutConstants.COOLING_ADAPTATION_FACTOR,1-(s2-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)/(FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)*(1-FDLayoutConstants.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=FDLayoutConstants.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},FDLayout.prototype.calcSpringForces=function(){for(var edge,lEdges=this.getAllEdges(),i2=0;i2<lEdges.length;i2++)edge=lEdges[i2],this.calcSpringForce(edge,edge.idealLength)},FDLayout.prototype.calcRepulsionForces=function(){var i2,j3,nodeA,nodeB,processedNodeSet,gridUpdateAllowed=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],forceToNodeSurroundingUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lNodes=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD==1&&gridUpdateAllowed&&this.updateGrid(),processedNodeSet=new Set,i2=0;i2<lNodes.length;i2++)nodeA=lNodes[i2],this.calculateRepulsionForceOfANode(nodeA,processedNodeSet,gridUpdateAllowed,forceToNodeSurroundingUpdate),processedNodeSet.add(nodeA);else for(i2=0;i2<lNodes.length;i2++)for(nodeA=lNodes[i2],j3=i2+1;j3<lNodes.length;j3++)nodeB=lNodes[j3],nodeA.getOwner()==nodeB.getOwner()&&this.calcRepulsionForce(nodeA,nodeB)},FDLayout.prototype.calcGravitationalForces=function(){for(var node2,lNodes=this.getAllNodesToApplyGravitation(),i2=0;i2<lNodes.length;i2++)node2=lNodes[i2],this.calcGravitationalForce(node2)},FDLayout.prototype.moveNodes=function(){for(var lNodes=this.getAllNodes(),i2=0;i2<lNodes.length;i2++)lNodes[i2].move()},FDLayout.prototype.calcSpringForce=function(edge,idealLength){var length2,springForce,springForceX,springForceY,sourceNode=edge.getSource(),targetNode=edge.getTarget();if(this.uniformLeafNodeSizes&&null==sourceNode.getChild()&&null==targetNode.getChild())edge.updateLengthSimple();else if(edge.updateLength(),edge.isOverlapingSourceAndTarget)return;0!=(length2=edge.getLength())&&(springForceX=(springForce=this.springConstant*(length2-idealLength))*(edge.lengthX/length2),springForceY=springForce*(edge.lengthY/length2),sourceNode.springForceX+=springForceX,sourceNode.springForceY+=springForceY,targetNode.springForceX-=springForceX,targetNode.springForceY-=springForceY)},FDLayout.prototype.calcRepulsionForce=function(nodeA,nodeB){var distanceX,distanceY,distanceSquared,distance2,repulsionForce,repulsionForceX,repulsionForceY,rectA=nodeA.getRect(),rectB=nodeB.getRect(),overlapAmount=new Array(2),clipPoints=new Array(4);if(rectA.intersects(rectB)){IGeometry.calcSeparationAmount(rectA,rectB,overlapAmount,FDLayoutConstants.DEFAULT_EDGE_LENGTH/2),repulsionForceX=2*overlapAmount[0],repulsionForceY=2*overlapAmount[1];var childrenConstant=nodeA.noOfChildren*nodeB.noOfChildren/(nodeA.noOfChildren+nodeB.noOfChildren);nodeA.repulsionForceX-=childrenConstant*repulsionForceX,nodeA.repulsionForceY-=childrenConstant*repulsionForceY,nodeB.repulsionForceX+=childrenConstant*repulsionForceX,nodeB.repulsionForceY+=childrenConstant*repulsionForceY}else this.uniformLeafNodeSizes&&null==nodeA.getChild()&&null==nodeB.getChild()?(distanceX=rectB.getCenterX()-rectA.getCenterX(),distanceY=rectB.getCenterY()-rectA.getCenterY()):(IGeometry.getIntersection(rectA,rectB,clipPoints),distanceX=clipPoints[2]-clipPoints[0],distanceY=clipPoints[3]-clipPoints[1]),Math.abs(distanceX)<FDLayoutConstants.MIN_REPULSION_DIST&&(distanceX=IMath.sign(distanceX)*FDLayoutConstants.MIN_REPULSION_DIST),Math.abs(distanceY)<FDLayoutConstants.MIN_REPULSION_DIST&&(distanceY=IMath.sign(distanceY)*FDLayoutConstants.MIN_REPULSION_DIST),distanceSquared=distanceX*distanceX+distanceY*distanceY,distance2=Math.sqrt(distanceSquared),repulsionForceX=(repulsionForce=this.repulsionConstant*nodeA.noOfChildren*nodeB.noOfChildren/distanceSquared)*distanceX/distance2,repulsionForceY=repulsionForce*distanceY/distance2,nodeA.repulsionForceX-=repulsionForceX,nodeA.repulsionForceY-=repulsionForceY,nodeB.repulsionForceX+=repulsionForceX,nodeB.repulsionForceY+=repulsionForceY},FDLayout.prototype.calcGravitationalForce=function(node2){var ownerGraph,ownerCenterX,ownerCenterY,distanceX,distanceY,absDistanceX,absDistanceY,estimatedSize;ownerCenterX=((ownerGraph=node2.getOwner()).getRight()+ownerGraph.getLeft())/2,ownerCenterY=(ownerGraph.getTop()+ownerGraph.getBottom())/2,distanceX=node2.getCenterX()-ownerCenterX,distanceY=node2.getCenterY()-ownerCenterY,absDistanceX=Math.abs(distanceX)+node2.getWidth()/2,absDistanceY=Math.abs(distanceY)+node2.getHeight()/2,node2.getOwner()==this.graphManager.getRoot()?(absDistanceX>(estimatedSize=ownerGraph.getEstimatedSize()*this.gravityRangeFactor)||absDistanceY>estimatedSize)&&(node2.gravitationForceX=-this.gravityConstant*distanceX,node2.gravitationForceY=-this.gravityConstant*distanceY):(absDistanceX>(estimatedSize=ownerGraph.getEstimatedSize()*this.compoundGravityRangeFactor)||absDistanceY>estimatedSize)&&(node2.gravitationForceX=-this.gravityConstant*distanceX*this.compoundGravityConstant,node2.gravitationForceY=-this.gravityConstant*distanceY*this.compoundGravityConstant)},FDLayout.prototype.isConverged=function(){var converged,oscilating=!1;return this.totalIterations>this.maxIterations/3&&(oscilating=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),converged=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,converged||oscilating},FDLayout.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},FDLayout.prototype.calcNoOfChildrenForAllNodes=function(){for(var node2,allNodes=this.graphManager.getAllNodes(),i2=0;i2<allNodes.length;i2++)(node2=allNodes[i2]).noOfChildren=node2.getNoOfChildren()},FDLayout.prototype.calcGrid=function(graph){var sizeX,sizeY;sizeX=parseInt(Math.ceil((graph.getRight()-graph.getLeft())/this.repulsionRange)),sizeY=parseInt(Math.ceil((graph.getBottom()-graph.getTop())/this.repulsionRange));for(var grid=new Array(sizeX),i2=0;i2<sizeX;i2++)grid[i2]=new Array(sizeY);for(i2=0;i2<sizeX;i2++)for(var j3=0;j3<sizeY;j3++)grid[i2][j3]=new Array;return grid},FDLayout.prototype.addNodeToGrid=function(v3,left3,top2){var startX2,finishX,startY2,finishY;startX2=parseInt(Math.floor((v3.getRect().x-left3)/this.repulsionRange)),finishX=parseInt(Math.floor((v3.getRect().width+v3.getRect().x-left3)/this.repulsionRange)),startY2=parseInt(Math.floor((v3.getRect().y-top2)/this.repulsionRange)),finishY=parseInt(Math.floor((v3.getRect().height+v3.getRect().y-top2)/this.repulsionRange));for(var i2=startX2;i2<=finishX;i2++)for(var j3=startY2;j3<=finishY;j3++)this.grid[i2][j3].push(v3),v3.setGridCoordinates(startX2,finishX,startY2,finishY)},FDLayout.prototype.updateGrid=function(){var i2,nodeA,lNodes=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),i2=0;i2<lNodes.length;i2++)nodeA=lNodes[i2],this.addNodeToGrid(nodeA,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},FDLayout.prototype.calculateRepulsionForceOfANode=function(nodeA,processedNodeSet,gridUpdateAllowed,forceToNodeSurroundingUpdate){if(this.totalIterations%FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD==1&&gridUpdateAllowed||forceToNodeSurroundingUpdate){var nodeB,surrounding=new Set;nodeA.surrounding=new Array;for(var grid=this.grid,i2=nodeA.startX-1;i2<nodeA.finishX+2;i2++)for(var j3=nodeA.startY-1;j3<nodeA.finishY+2;j3++)if(!(i2<0||j3<0||i2>=grid.length||j3>=grid[0].length))for(var k2=0;k2<grid[i2][j3].length;k2++)if(nodeB=grid[i2][j3][k2],nodeA.getOwner()==nodeB.getOwner()&&nodeA!=nodeB&&!processedNodeSet.has(nodeB)&&!surrounding.has(nodeB)){var distanceX=Math.abs(nodeA.getCenterX()-nodeB.getCenterX())-(nodeA.getWidth()/2+nodeB.getWidth()/2),distanceY=Math.abs(nodeA.getCenterY()-nodeB.getCenterY())-(nodeA.getHeight()/2+nodeB.getHeight()/2);distanceX<=this.repulsionRange&&distanceY<=this.repulsionRange&&surrounding.add(nodeB)}nodeA.surrounding=[].concat(_toConsumableArray2(surrounding))}for(i2=0;i2<nodeA.surrounding.length;i2++)this.calcRepulsionForce(nodeA,nodeA.surrounding[i2])},FDLayout.prototype.calcRepulsionRange=function(){return 0},module3.exports=FDLayout},function(module3,exports3,__webpack_require__){var LEdge=__webpack_require__(1),FDLayoutConstants=__webpack_require__(7);function FDLayoutEdge(source,target,vEdge){LEdge.call(this,source,target,vEdge),this.idealLength=FDLayoutConstants.DEFAULT_EDGE_LENGTH}for(var prop in __name(FDLayoutEdge,"FDLayoutEdge"),FDLayoutEdge.prototype=Object.create(LEdge.prototype),LEdge)FDLayoutEdge[prop]=LEdge[prop];module3.exports=FDLayoutEdge},function(module3,exports3,__webpack_require__){var LNode=__webpack_require__(3);function FDLayoutNode(gm,loc,size4,vNode){LNode.call(this,gm,loc,size4,vNode),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var prop in __name(FDLayoutNode,"FDLayoutNode"),FDLayoutNode.prototype=Object.create(LNode.prototype),LNode)FDLayoutNode[prop]=LNode[prop];FDLayoutNode.prototype.setGridCoordinates=function(_startX,_finishX,_startY,_finishY){this.startX=_startX,this.finishX=_finishX,this.startY=_startY,this.finishY=_finishY},module3.exports=FDLayoutNode},function(module3,exports3,__webpack_require__){function DimensionD2(width3,height2){this.width=0,this.height=0,null!==width3&&null!==height2&&(this.height=height2,this.width=width3)}__name(DimensionD2,"DimensionD"),DimensionD2.prototype.getWidth=function(){return this.width},DimensionD2.prototype.setWidth=function(width3){this.width=width3},DimensionD2.prototype.getHeight=function(){return this.height},DimensionD2.prototype.setHeight=function(height2){this.height=height2},module3.exports=DimensionD2},function(module3,exports3,__webpack_require__){var UniqueIDGeneretor=__webpack_require__(14);function HashMap(){this.map={},this.keys=[]}__name(HashMap,"HashMap"),HashMap.prototype.put=function(key,value2){var theId=UniqueIDGeneretor.createID(key);this.contains(theId)||(this.map[theId]=value2,this.keys.push(key))},HashMap.prototype.contains=function(key){UniqueIDGeneretor.createID(key);return null!=this.map[key]},HashMap.prototype.get=function(key){var theId=UniqueIDGeneretor.createID(key);return this.map[theId]},HashMap.prototype.keySet=function(){return this.keys},module3.exports=HashMap},function(module3,exports3,__webpack_require__){var UniqueIDGeneretor=__webpack_require__(14);function HashSet(){this.set={}}__name(HashSet,"HashSet"),HashSet.prototype.add=function(obj){var theId=UniqueIDGeneretor.createID(obj);this.contains(theId)||(this.set[theId]=obj)},HashSet.prototype.remove=function(obj){delete this.set[UniqueIDGeneretor.createID(obj)]},HashSet.prototype.clear=function(){this.set={}},HashSet.prototype.contains=function(obj){return this.set[UniqueIDGeneretor.createID(obj)]==obj},HashSet.prototype.isEmpty=function(){return 0===this.size()},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAllTo=function(list){for(var keys2=Object.keys(this.set),length2=keys2.length,i2=0;i2<length2;i2++)list.push(this.set[keys2[i2]])},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAll=function(list){for(var s2=list.length,i2=0;i2<s2;i2++){var v3=list[i2];this.add(v3)}},module3.exports=HashSet},function(module3,exports3,__webpack_require__){var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var LinkedList=__webpack_require__(11),Quicksort=function(){function Quicksort2(A2,compareFunction){_classCallCheck2(this,Quicksort2),null===compareFunction&&void 0===compareFunction||(this.compareFunction=this._defaultCompareFunction);var length2=void 0;length2=A2 instanceof LinkedList?A2.size():A2.length,this._quicksort(A2,0,length2-1)}return __name(Quicksort2,"Quicksort"),_createClass2(Quicksort2,[{key:"_quicksort",value:__name(function(A2,p3,r2){if(p3<r2){var q3=this._partition(A2,p3,r2);this._quicksort(A2,p3,q3),this._quicksort(A2,q3+1,r2)}},"_quicksort")},{key:"_partition",value:__name(function(A2,p3,r2){for(var x5=this._get(A2,p3),i2=p3,j3=r2;;){for(;this.compareFunction(x5,this._get(A2,j3));)j3--;for(;this.compareFunction(this._get(A2,i2),x5);)i2++;if(!(i2<j3))return j3;this._swap(A2,i2,j3),i2++,j3--}},"_partition")},{key:"_get",value:__name(function(object3,index){return object3 instanceof LinkedList?object3.get_object_at(index):object3[index]},"_get")},{key:"_set",value:__name(function(object3,index,value2){object3 instanceof LinkedList?object3.set_object_at(index,value2):object3[index]=value2},"_set")},{key:"_swap",value:__name(function(A2,i2,j3){var temp=this._get(A2,i2);this._set(A2,i2,this._get(A2,j3)),this._set(A2,j3,temp)},"_swap")},{key:"_defaultCompareFunction",value:__name(function(a2,b3){return b3>a2},"_defaultCompareFunction")}]),Quicksort2}();module3.exports=Quicksort},function(module3,exports3,__webpack_require__){var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var NeedlemanWunsch=function(){function NeedlemanWunsch2(sequence1,sequence2){var match_score=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,mismatch_penalty=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,gap_penalty=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;_classCallCheck2(this,NeedlemanWunsch2),this.sequence1=sequence1,this.sequence2=sequence2,this.match_score=match_score,this.mismatch_penalty=mismatch_penalty,this.gap_penalty=gap_penalty,this.iMax=sequence1.length+1,this.jMax=sequence2.length+1,this.grid=new Array(this.iMax);for(var i2=0;i2<this.iMax;i2++){this.grid[i2]=new Array(this.jMax);for(var j3=0;j3<this.jMax;j3++)this.grid[i2][j3]=0}this.tracebackGrid=new Array(this.iMax);for(var _i=0;_i<this.iMax;_i++){this.tracebackGrid[_i]=new Array(this.jMax);for(var _j=0;_j<this.jMax;_j++)this.tracebackGrid[_i][_j]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return __name(NeedlemanWunsch2,"NeedlemanWunsch"),_createClass2(NeedlemanWunsch2,[{key:"getScore",value:__name(function(){return this.score},"getScore")},{key:"getAlignments",value:__name(function(){return this.alignments},"getAlignments")},{key:"computeGrids",value:__name(function(){for(var j3=1;j3<this.jMax;j3++)this.grid[0][j3]=this.grid[0][j3-1]+this.gap_penalty,this.tracebackGrid[0][j3]=[!1,!1,!0];for(var i2=1;i2<this.iMax;i2++)this.grid[i2][0]=this.grid[i2-1][0]+this.gap_penalty,this.tracebackGrid[i2][0]=[!1,!0,!1];for(var _i2=1;_i2<this.iMax;_i2++)for(var _j2=1;_j2<this.jMax;_j2++){var maxOf=[this.sequence1[_i2-1]===this.sequence2[_j2-1]?this.grid[_i2-1][_j2-1]+this.match_score:this.grid[_i2-1][_j2-1]+this.mismatch_penalty,this.grid[_i2-1][_j2]+this.gap_penalty,this.grid[_i2][_j2-1]+this.gap_penalty],indices=this.arrayAllMaxIndexes(maxOf);this.grid[_i2][_j2]=maxOf[indices[0]],this.tracebackGrid[_i2][_j2]=[indices.includes(0),indices.includes(1),indices.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]},"computeGrids")},{key:"alignmentTraceback",value:__name(function(){var inProcessAlignments=[];for(inProcessAlignments.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});inProcessAlignments[0];){var current=inProcessAlignments[0],directions=this.tracebackGrid[current.pos[0]][current.pos[1]];directions[0]&&inProcessAlignments.push({pos:[current.pos[0]-1,current.pos[1]-1],seq1:this.sequence1[current.pos[0]-1]+current.seq1,seq2:this.sequence2[current.pos[1]-1]+current.seq2}),directions[1]&&inProcessAlignments.push({pos:[current.pos[0]-1,current.pos[1]],seq1:this.sequence1[current.pos[0]-1]+current.seq1,seq2:"-"+current.seq2}),directions[2]&&inProcessAlignments.push({pos:[current.pos[0],current.pos[1]-1],seq1:"-"+current.seq1,seq2:this.sequence2[current.pos[1]-1]+current.seq2}),0===current.pos[0]&&0===current.pos[1]&&this.alignments.push({sequence1:current.seq1,sequence2:current.seq2}),inProcessAlignments.shift()}return this.alignments},"alignmentTraceback")},{key:"getAllIndexes",value:__name(function(arr,val){for(var indexes=[],i2=-1;-1!==(i2=arr.indexOf(val,i2+1));)indexes.push(i2);return indexes},"getAllIndexes")},{key:"arrayAllMaxIndexes",value:__name(function(array4){return this.getAllIndexes(array4,Math.max.apply(null,array4))},"arrayAllMaxIndexes")}]),NeedlemanWunsch2}();module3.exports=NeedlemanWunsch},function(module3,exports3,__webpack_require__){var layoutBase=__name(function(){},"layoutBase");layoutBase.FDLayout=__webpack_require__(18),layoutBase.FDLayoutConstants=__webpack_require__(7),layoutBase.FDLayoutEdge=__webpack_require__(19),layoutBase.FDLayoutNode=__webpack_require__(20),layoutBase.DimensionD=__webpack_require__(21),layoutBase.HashMap=__webpack_require__(22),layoutBase.HashSet=__webpack_require__(23),layoutBase.IGeometry=__webpack_require__(8),layoutBase.IMath=__webpack_require__(9),layoutBase.Integer=__webpack_require__(10),layoutBase.Point=__webpack_require__(12),layoutBase.PointD=__webpack_require__(4),layoutBase.RandomSeed=__webpack_require__(16),layoutBase.RectangleD=__webpack_require__(13),layoutBase.Transform=__webpack_require__(17),layoutBase.UniqueIDGeneretor=__webpack_require__(14),layoutBase.Quicksort=__webpack_require__(24),layoutBase.LinkedList=__webpack_require__(11),layoutBase.LGraphObject=__webpack_require__(2),layoutBase.LGraph=__webpack_require__(5),layoutBase.LEdge=__webpack_require__(1),layoutBase.LGraphManager=__webpack_require__(6),layoutBase.LNode=__webpack_require__(3),layoutBase.Layout=__webpack_require__(15),layoutBase.LayoutConstants=__webpack_require__(0),layoutBase.NeedlemanWunsch=__webpack_require__(25),module3.exports=layoutBase},function(module3,exports3,__webpack_require__){function Emitter4(){this.listeners=[]}__name(Emitter4,"Emitter");var p3=Emitter4.prototype;p3.addListener=function(event3,callback){this.listeners.push({event:event3,callback:callback})},p3.removeListener=function(event3,callback){for(var i2=this.listeners.length;i2>=0;i2--){var l4=this.listeners[i2];l4.event===event3&&l4.callback===callback&&this.listeners.splice(i2,1)}},p3.emit=function(event3,data5){for(var i2=0;i2<this.listeners.length;i2++){var l4=this.listeners[i2];event3===l4.event&&l4.callback(data5)}},module3.exports=Emitter4}])})}}),require_cose_base=__commonJS({"../../node_modules/.pnpm/cose-base@1.0.3/node_modules/cose-base/cose-base.js"(exports2,module2){__name(function(root3,factory){"object"==typeof exports2&&"object"==typeof module2?module2.exports=factory(require_layout_base()):"function"==typeof define&&define.amd?define(["layout-base"],factory):"object"==typeof exports2?exports2.coseBase=factory(require_layout_base()):root3.coseBase=factory(root3.layoutBase)},"webpackUniversalModuleDefinition")(exports2,function(__WEBPACK_EXTERNAL_MODULE_0__){return function(modules2){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module3=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules2[moduleId].call(module3.exports,module3,module3.exports,__webpack_require__),module3.l=!0,module3.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=modules2,__webpack_require__.c=installedModules,__webpack_require__.i=function(value2){return value2},__webpack_require__.d=function(exports3,name,getter){__webpack_require__.o(exports3,name)||Object.defineProperty(exports3,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module3){var getter=module3&&module3.__esModule?__name(function(){return module3.default},"getDefault"):__name(function(){return module3},"getModuleExports");return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object3,property2){return Object.prototype.hasOwnProperty.call(object3,property2)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=7)}([function(module3,exports3){module3.exports=__WEBPACK_EXTERNAL_MODULE_0__},function(module3,exports3,__webpack_require__){var FDLayoutConstants=__webpack_require__(0).FDLayoutConstants;function CoSEConstants(){}for(var prop in __name(CoSEConstants,"CoSEConstants"),FDLayoutConstants)CoSEConstants[prop]=FDLayoutConstants[prop];CoSEConstants.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,CoSEConstants.DEFAULT_RADIAL_SEPARATION=FDLayoutConstants.DEFAULT_EDGE_LENGTH,CoSEConstants.DEFAULT_COMPONENT_SEPERATION=60,CoSEConstants.TILE=!0,CoSEConstants.TILING_PADDING_VERTICAL=10,CoSEConstants.TILING_PADDING_HORIZONTAL=10,CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL=!1,module3.exports=CoSEConstants},function(module3,exports3,__webpack_require__){var FDLayoutEdge=__webpack_require__(0).FDLayoutEdge;function CoSEEdge(source,target,vEdge){FDLayoutEdge.call(this,source,target,vEdge)}for(var prop in __name(CoSEEdge,"CoSEEdge"),CoSEEdge.prototype=Object.create(FDLayoutEdge.prototype),FDLayoutEdge)CoSEEdge[prop]=FDLayoutEdge[prop];module3.exports=CoSEEdge},function(module3,exports3,__webpack_require__){var LGraph=__webpack_require__(0).LGraph;function CoSEGraph(parent4,graphMgr,vGraph){LGraph.call(this,parent4,graphMgr,vGraph)}for(var prop in __name(CoSEGraph,"CoSEGraph"),CoSEGraph.prototype=Object.create(LGraph.prototype),LGraph)CoSEGraph[prop]=LGraph[prop];module3.exports=CoSEGraph},function(module3,exports3,__webpack_require__){var LGraphManager=__webpack_require__(0).LGraphManager;function CoSEGraphManager(layout6){LGraphManager.call(this,layout6)}for(var prop in __name(CoSEGraphManager,"CoSEGraphManager"),CoSEGraphManager.prototype=Object.create(LGraphManager.prototype),LGraphManager)CoSEGraphManager[prop]=LGraphManager[prop];module3.exports=CoSEGraphManager},function(module3,exports3,__webpack_require__){var FDLayoutNode=__webpack_require__(0).FDLayoutNode,IMath=__webpack_require__(0).IMath;function CoSENode(gm,loc,size4,vNode){FDLayoutNode.call(this,gm,loc,size4,vNode)}for(var prop in __name(CoSENode,"CoSENode"),CoSENode.prototype=Object.create(FDLayoutNode.prototype),FDLayoutNode)CoSENode[prop]=FDLayoutNode[prop];CoSENode.prototype.move=function(){var layout6=this.graphManager.getLayout();this.displacementX=layout6.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=layout6.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>layout6.coolingFactor*layout6.maxNodeDisplacement&&(this.displacementX=layout6.coolingFactor*layout6.maxNodeDisplacement*IMath.sign(this.displacementX)),Math.abs(this.displacementY)>layout6.coolingFactor*layout6.maxNodeDisplacement&&(this.displacementY=layout6.coolingFactor*layout6.maxNodeDisplacement*IMath.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),layout6.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},CoSENode.prototype.propogateDisplacementToChildren=function(dX,dY){for(var node2,nodes5=this.getChild().getNodes(),i2=0;i2<nodes5.length;i2++)null==(node2=nodes5[i2]).getChild()?(node2.moveBy(dX,dY),node2.displacementX+=dX,node2.displacementY+=dY):node2.propogateDisplacementToChildren(dX,dY)},CoSENode.prototype.setPred1=function(pred12){this.pred1=pred12},CoSENode.prototype.getPred1=function(){return pred1},CoSENode.prototype.getPred2=function(){return pred2},CoSENode.prototype.setNext=function(next3){this.next=next3},CoSENode.prototype.getNext=function(){return next},CoSENode.prototype.setProcessed=function(processed2){this.processed=processed2},CoSENode.prototype.isProcessed=function(){return processed},module3.exports=CoSENode},function(module3,exports3,__webpack_require__){var FDLayout=__webpack_require__(0).FDLayout,CoSEGraphManager=__webpack_require__(4),CoSEGraph=__webpack_require__(3),CoSENode=__webpack_require__(5),CoSEEdge=__webpack_require__(2),CoSEConstants=__webpack_require__(1),FDLayoutConstants=__webpack_require__(0).FDLayoutConstants,LayoutConstants=__webpack_require__(0).LayoutConstants,Point3=__webpack_require__(0).Point,PointD=__webpack_require__(0).PointD,Layout2=__webpack_require__(0).Layout,Integer=__webpack_require__(0).Integer,IGeometry=__webpack_require__(0).IGeometry,LGraph=__webpack_require__(0).LGraph,Transform2=__webpack_require__(0).Transform;function CoSELayout(){FDLayout.call(this),this.toBeTiled={}}for(var prop in __name(CoSELayout,"CoSELayout"),CoSELayout.prototype=Object.create(FDLayout.prototype),FDLayout)CoSELayout[prop]=FDLayout[prop];CoSELayout.prototype.newGraphManager=function(){var gm=new CoSEGraphManager(this);return this.graphManager=gm,gm},CoSELayout.prototype.newGraph=function(vGraph){return new CoSEGraph(null,this.graphManager,vGraph)},CoSELayout.prototype.newNode=function(vNode){return new CoSENode(this.graphManager,vNode)},CoSELayout.prototype.newEdge=function(vEdge){return new CoSEEdge(null,null,vEdge)},CoSELayout.prototype.initParameters=function(){FDLayout.prototype.initParameters.call(this,arguments),this.isSubLayout||(CoSEConstants.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=CoSEConstants.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=CoSEConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=FDLayoutConstants.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/FDLayoutConstants.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=FDLayoutConstants.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},CoSELayout.prototype.layout=function(){return LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},CoSELayout.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();allNodes=new Set(this.getAllNodes()),intersection4=this.nodesWithGravity.filter(function(x5){return allNodes.has(x5)});this.graphManager.setAllNodesToApplyGravitation(intersection4)}}else{var forest=this.getFlatForest();if(forest.length>0)this.positionNodesRadially(forest);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var allNodes=new Set(this.getAllNodes()),intersection4=this.nodesWithGravity.filter(function(x5){return allNodes.has(x5)});this.graphManager.setAllNodesToApplyGravitation(intersection4),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},CoSELayout.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%FDLayoutConstants.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var allNodes=new Set(this.getAllNodes()),intersection4=this.nodesWithGravity.filter(function(x5){return allNodes.has(x5)});this.graphManager.setAllNodesToApplyGravitation(intersection4),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var gridUpdateAllowed=!this.isTreeGrowing&&!this.isGrowthFinished,forceToNodeSurroundingUpdate=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(gridUpdateAllowed,forceToNodeSurroundingUpdate),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},CoSELayout.prototype.getPositionsData=function(){for(var allNodes=this.graphManager.getAllNodes(),pData={},i2=0;i2<allNodes.length;i2++){var rect3=allNodes[i2].rect,id30=allNodes[i2].id;pData[id30]={id:id30,x:rect3.getCenterX(),y:rect3.getCenterY(),w:rect3.width,h:rect3.height}}return pData},CoSELayout.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var layoutEnded=!1;if("during"===FDLayoutConstants.ANIMATE)this.emit("layoutstarted");else{for(;!layoutEnded;)layoutEnded=this.tick();this.graphManager.updateBounds()}},CoSELayout.prototype.calculateNodesToApplyGravitationTo=function(){var graph,i2,nodeList=[],graphs=this.graphManager.getGraphs(),size4=graphs.length;for(i2=0;i2<size4;i2++)(graph=graphs[i2]).updateConnected(),graph.isConnected||(nodeList=nodeList.concat(graph.getNodes()));return nodeList},CoSELayout.prototype.createBendpoints=function(){var edges3=[];edges3=edges3.concat(this.graphManager.getAllEdges());var i2,visited=new Set;for(i2=0;i2<edges3.length;i2++){var edge=edges3[i2];if(!visited.has(edge)){var source=edge.getSource(),target=edge.getTarget();if(source==target)edge.getBendpoints().push(new PointD),edge.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(edge),visited.add(edge);else{var edgeList2=[];if(edgeList2=(edgeList2=edgeList2.concat(source.getEdgeListToNode(target))).concat(target.getEdgeListToNode(source)),!visited.has(edgeList2[0])){var k2;if(edgeList2.length>1)for(k2=0;k2<edgeList2.length;k2++){var multiEdge=edgeList2[k2];multiEdge.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(multiEdge)}edgeList2.forEach(function(edge2){visited.add(edge2)})}}}if(visited.size==edges3.length)break}},CoSELayout.prototype.positionNodesRadially=function(forest){for(var currentStartingPoint=new Point3(0,0),numberOfColumns=Math.ceil(Math.sqrt(forest.length)),height2=0,currentY=0,currentX=0,point8=new PointD(0,0),i2=0;i2<forest.length;i2++){i2%numberOfColumns==0&&(currentX=0,currentY=height2,0!=i2&&(currentY+=CoSEConstants.DEFAULT_COMPONENT_SEPERATION),height2=0);var tree=forest[i2],centerNode=Layout2.findCenterOfTree(tree);currentStartingPoint.x=currentX,currentStartingPoint.y=currentY,(point8=CoSELayout.radialLayout(tree,centerNode,currentStartingPoint)).y>height2&&(height2=Math.floor(point8.y)),currentX=Math.floor(point8.x+CoSEConstants.DEFAULT_COMPONENT_SEPERATION)}this.transform(new PointD(LayoutConstants.WORLD_CENTER_X-point8.x/2,LayoutConstants.WORLD_CENTER_Y-point8.y/2))},CoSELayout.radialLayout=function(tree,centerNode,startingPoint){var radialSep=Math.max(this.maxDiagonalInTree(tree),CoSEConstants.DEFAULT_RADIAL_SEPARATION);CoSELayout.branchRadialLayout(centerNode,null,0,359,0,radialSep);var bounds4=LGraph.calculateBounds(tree),transform8=new Transform2;transform8.setDeviceOrgX(bounds4.getMinX()),transform8.setDeviceOrgY(bounds4.getMinY()),transform8.setWorldOrgX(startingPoint.x),transform8.setWorldOrgY(startingPoint.y);for(var i2=0;i2<tree.length;i2++){tree[i2].transform(transform8)}var bottomRight=new PointD(bounds4.getMaxX(),bounds4.getMaxY());return transform8.inverseTransformPoint(bottomRight)},CoSELayout.branchRadialLayout=function(node2,parentOfNode,startAngle,endAngle,distance2,radialSeparation){var halfInterval=(endAngle-startAngle+1)/2;halfInterval<0&&(halfInterval+=180);var teta=(halfInterval+startAngle)%360*IGeometry.TWO_PI/360,x_=(Math.cos(teta),distance2*Math.cos(teta)),y_=distance2*Math.sin(teta);node2.setCenter(x_,y_);var neighborEdges=[],childCount=(neighborEdges=neighborEdges.concat(node2.getEdges())).length;null!=parentOfNode&&childCount--;for(var startIndex,branchCount=0,incEdgesCount=neighborEdges.length,edges3=node2.getEdgesBetween(parentOfNode);edges3.length>1;){var temp=edges3[0];edges3.splice(0,1);var index=neighborEdges.indexOf(temp);index>=0&&neighborEdges.splice(index,1),incEdgesCount--,childCount--}startIndex=null!=parentOfNode?(neighborEdges.indexOf(edges3[0])+1)%incEdgesCount:0;for(var stepAngle=Math.abs(endAngle-startAngle)/childCount,i2=startIndex;branchCount!=childCount;i2=++i2%incEdgesCount){var currentNeighbor=neighborEdges[i2].getOtherEnd(node2);if(currentNeighbor!=parentOfNode){var childStartAngle=(startAngle+branchCount*stepAngle)%360,childEndAngle=(childStartAngle+stepAngle)%360;CoSELayout.branchRadialLayout(currentNeighbor,node2,childStartAngle,childEndAngle,distance2+radialSeparation,radialSeparation),branchCount++}}},CoSELayout.maxDiagonalInTree=function(tree){for(var maxDiagonal=Integer.MIN_VALUE,i2=0;i2<tree.length;i2++){var diagonal=tree[i2].getDiagonal();diagonal>maxDiagonal&&(maxDiagonal=diagonal)}return maxDiagonal},CoSELayout.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},CoSELayout.prototype.groupZeroDegreeMembers=function(){var self2=this,tempMemberGroups={};this.memberGroups={},this.idToDummyNode={};for(var zeroDegree=[],allNodes=this.graphManager.getAllNodes(),i2=0;i2<allNodes.length;i2++){var parent4=(node2=allNodes[i2]).getParent();0!==this.getNodeDegreeWithChildren(node2)||null!=parent4.id&&this.getToBeTiled(parent4)||zeroDegree.push(node2)}for(i2=0;i2<zeroDegree.length;i2++){var node2,p_id=(node2=zeroDegree[i2]).getParent().id;void 0===tempMemberGroups[p_id]&&(tempMemberGroups[p_id]=[]),tempMemberGroups[p_id]=tempMemberGroups[p_id].concat(node2)}Object.keys(tempMemberGroups).forEach(function(p_id2){if(tempMemberGroups[p_id2].length>1){var dummyCompoundId="DummyCompound_"+p_id2;self2.memberGroups[dummyCompoundId]=tempMemberGroups[p_id2];var parent5=tempMemberGroups[p_id2][0].getParent(),dummyCompound=new CoSENode(self2.graphManager);dummyCompound.id=dummyCompoundId,dummyCompound.paddingLeft=parent5.paddingLeft||0,dummyCompound.paddingRight=parent5.paddingRight||0,dummyCompound.paddingBottom=parent5.paddingBottom||0,dummyCompound.paddingTop=parent5.paddingTop||0,self2.idToDummyNode[dummyCompoundId]=dummyCompound;var dummyParentGraph=self2.getGraphManager().add(self2.newGraph(),dummyCompound),parentGraph=parent5.getChild();parentGraph.add(dummyCompound);for(var i3=0;i3<tempMemberGroups[p_id2].length;i3++){var node3=tempMemberGroups[p_id2][i3];parentGraph.remove(node3),dummyParentGraph.add(node3)}}})},CoSELayout.prototype.clearCompounds=function(){var childGraphMap={},idToNode={};this.performDFSOnCompounds();for(var i2=0;i2<this.compoundOrder.length;i2++)idToNode[this.compoundOrder[i2].id]=this.compoundOrder[i2],childGraphMap[this.compoundOrder[i2].id]=[].concat(this.compoundOrder[i2].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[i2].getChild()),this.compoundOrder[i2].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(childGraphMap,idToNode)},CoSELayout.prototype.clearZeroDegreeMembers=function(){var self2=this,tiledZeroDegreePack=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(id30){var compoundNode=self2.idToDummyNode[id30];tiledZeroDegreePack[id30]=self2.tileNodes(self2.memberGroups[id30],compoundNode.paddingLeft+compoundNode.paddingRight),compoundNode.rect.width=tiledZeroDegreePack[id30].width,compoundNode.rect.height=tiledZeroDegreePack[id30].height})},CoSELayout.prototype.repopulateCompounds=function(){for(var i2=this.compoundOrder.length-1;i2>=0;i2--){var lCompoundNode=this.compoundOrder[i2],id30=lCompoundNode.id,horizontalMargin=lCompoundNode.paddingLeft,verticalMargin=lCompoundNode.paddingTop;this.adjustLocations(this.tiledMemberPack[id30],lCompoundNode.rect.x,lCompoundNode.rect.y,horizontalMargin,verticalMargin)}},CoSELayout.prototype.repopulateZeroDegreeMembers=function(){var self2=this,tiledPack=this.tiledZeroDegreePack;Object.keys(tiledPack).forEach(function(id30){var compoundNode=self2.idToDummyNode[id30],horizontalMargin=compoundNode.paddingLeft,verticalMargin=compoundNode.paddingTop;self2.adjustLocations(tiledPack[id30],compoundNode.rect.x,compoundNode.rect.y,horizontalMargin,verticalMargin)})},CoSELayout.prototype.getToBeTiled=function(node2){var id30=node2.id;if(null!=this.toBeTiled[id30])return this.toBeTiled[id30];var childGraph=node2.getChild();if(null==childGraph)return this.toBeTiled[id30]=!1,!1;for(var children2=childGraph.getNodes(),i2=0;i2<children2.length;i2++){var theChild=children2[i2];if(this.getNodeDegree(theChild)>0)return this.toBeTiled[id30]=!1,!1;if(null!=theChild.getChild()){if(!this.getToBeTiled(theChild))return this.toBeTiled[id30]=!1,!1}else this.toBeTiled[theChild.id]=!1}return this.toBeTiled[id30]=!0,!0},CoSELayout.prototype.getNodeDegree=function(node2){node2.id;for(var edges3=node2.getEdges(),degree=0,i2=0;i2<edges3.length;i2++){var edge=edges3[i2];edge.getSource().id!==edge.getTarget().id&&(degree+=1)}return degree},CoSELayout.prototype.getNodeDegreeWithChildren=function(node2){var degree=this.getNodeDegree(node2);if(null==node2.getChild())return degree;for(var children2=node2.getChild().getNodes(),i2=0;i2<children2.length;i2++){var child=children2[i2];degree+=this.getNodeDegreeWithChildren(child)}return degree},CoSELayout.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},CoSELayout.prototype.fillCompexOrderByDFS=function(children2){for(var i2=0;i2<children2.length;i2++){var child=children2[i2];null!=child.getChild()&&this.fillCompexOrderByDFS(child.getChild().getNodes()),this.getToBeTiled(child)&&this.compoundOrder.push(child)}},CoSELayout.prototype.adjustLocations=function(organization,x5,y6,compoundHorizontalMargin,compoundVerticalMargin){y6+=compoundVerticalMargin;for(var left3=x5+=compoundHorizontalMargin,i2=0;i2<organization.rows.length;i2++){var row=organization.rows[i2];x5=left3;for(var maxHeight=0,j3=0;j3<row.length;j3++){var lnode=row[j3];lnode.rect.x=x5,lnode.rect.y=y6,x5+=lnode.rect.width+organization.horizontalPadding,lnode.rect.height>maxHeight&&(maxHeight=lnode.rect.height)}y6+=maxHeight+organization.verticalPadding}},CoSELayout.prototype.tileCompoundMembers=function(childGraphMap,idToNode){var self2=this;this.tiledMemberPack=[],Object.keys(childGraphMap).forEach(function(id30){var compoundNode=idToNode[id30];self2.tiledMemberPack[id30]=self2.tileNodes(childGraphMap[id30],compoundNode.paddingLeft+compoundNode.paddingRight),compoundNode.rect.width=self2.tiledMemberPack[id30].width,compoundNode.rect.height=self2.tiledMemberPack[id30].height})},CoSELayout.prototype.tileNodes=function(nodes5,minWidth){var organization={rows:[],rowWidth:[],rowHeight:[],width:0,height:minWidth,verticalPadding:CoSEConstants.TILING_PADDING_VERTICAL,horizontalPadding:CoSEConstants.TILING_PADDING_HORIZONTAL};nodes5.sort(function(n1,n2){return n1.rect.width*n1.rect.height>n2.rect.width*n2.rect.height?-1:n1.rect.width*n1.rect.height<n2.rect.width*n2.rect.height?1:0});for(var i2=0;i2<nodes5.length;i2++){var lNode=nodes5[i2];0==organization.rows.length?this.insertNodeToRow(organization,lNode,0,minWidth):this.canAddHorizontal(organization,lNode.rect.width,lNode.rect.height)?this.insertNodeToRow(organization,lNode,this.getShortestRowIndex(organization),minWidth):this.insertNodeToRow(organization,lNode,organization.rows.length,minWidth),this.shiftToLastRow(organization)}return organization},CoSELayout.prototype.insertNodeToRow=function(organization,node2,rowIndex,minWidth){var minCompoundSize=minWidth;if(rowIndex==organization.rows.length){organization.rows.push([]),organization.rowWidth.push(minCompoundSize),organization.rowHeight.push(0)}var w4=organization.rowWidth[rowIndex]+node2.rect.width;organization.rows[rowIndex].length>0&&(w4+=organization.horizontalPadding),organization.rowWidth[rowIndex]=w4,organization.width<w4&&(organization.width=w4);var h3=node2.rect.height;rowIndex>0&&(h3+=organization.verticalPadding);var extraHeight=0;h3>organization.rowHeight[rowIndex]&&(extraHeight=organization.rowHeight[rowIndex],organization.rowHeight[rowIndex]=h3,extraHeight=organization.rowHeight[rowIndex]-extraHeight),organization.height+=extraHeight,organization.rows[rowIndex].push(node2)},CoSELayout.prototype.getShortestRowIndex=function(organization){for(var r2=-1,min9=Number.MAX_VALUE,i2=0;i2<organization.rows.length;i2++)organization.rowWidth[i2]<min9&&(r2=i2,min9=organization.rowWidth[i2]);return r2},CoSELayout.prototype.getLongestRowIndex=function(organization){for(var r2=-1,max10=Number.MIN_VALUE,i2=0;i2<organization.rows.length;i2++)organization.rowWidth[i2]>max10&&(r2=i2,max10=organization.rowWidth[i2]);return r2},CoSELayout.prototype.canAddHorizontal=function(organization,extraWidth,extraHeight){var sri=this.getShortestRowIndex(organization);if(sri<0)return!0;var min9=organization.rowWidth[sri];if(min9+organization.horizontalPadding+extraWidth<=organization.width)return!0;var add_to_row_ratio,add_new_row_ratio,hDiff=0;return organization.rowHeight[sri]<extraHeight&&sri>0&&(hDiff=extraHeight+organization.verticalPadding-organization.rowHeight[sri]),add_to_row_ratio=organization.width-min9>=extraWidth+organization.horizontalPadding?(organization.height+hDiff)/(min9+extraWidth+organization.horizontalPadding):(organization.height+hDiff)/organization.width,hDiff=extraHeight+organization.verticalPadding,(add_new_row_ratio=organization.width<extraWidth?(organization.height+hDiff)/extraWidth:(organization.height+hDiff)/organization.width)<1&&(add_new_row_ratio=1/add_new_row_ratio),add_to_row_ratio<1&&(add_to_row_ratio=1/add_to_row_ratio),add_to_row_ratio<add_new_row_ratio},CoSELayout.prototype.shiftToLastRow=function(organization){var longest=this.getLongestRowIndex(organization),last3=organization.rowWidth.length-1,row=organization.rows[longest],node2=row[row.length-1],diff2=node2.width+organization.horizontalPadding;if(organization.width-organization.rowWidth[last3]>diff2&&longest!=last3){row.splice(-1,1),organization.rows[last3].push(node2),organization.rowWidth[longest]=organization.rowWidth[longest]-diff2,organization.rowWidth[last3]=organization.rowWidth[last3]+diff2,organization.width=organization.rowWidth[instance.getLongestRowIndex(organization)];for(var maxHeight=Number.MIN_VALUE,i2=0;i2<row.length;i2++)row[i2].height>maxHeight&&(maxHeight=row[i2].height);longest>0&&(maxHeight+=organization.verticalPadding);var prevTotal=organization.rowHeight[longest]+organization.rowHeight[last3];organization.rowHeight[longest]=maxHeight,organization.rowHeight[last3]<node2.height+organization.verticalPadding&&(organization.rowHeight[last3]=node2.height+organization.verticalPadding);var finalTotal=organization.rowHeight[longest]+organization.rowHeight[last3];organization.height+=finalTotal-prevTotal,this.shiftToLastRow(organization)}},CoSELayout.prototype.tilingPreLayout=function(){CoSEConstants.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},CoSELayout.prototype.tilingPostLayout=function(){CoSEConstants.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},CoSELayout.prototype.reduceTrees=function(){for(var node2,prunedNodesAll=[],containsLeaf=!0;containsLeaf;){var allNodes=this.graphManager.getAllNodes(),prunedNodesInStepTemp=[];containsLeaf=!1;for(var i2=0;i2<allNodes.length;i2++)1!=(node2=allNodes[i2]).getEdges().length||node2.getEdges()[0].isInterGraph||null!=node2.getChild()||(prunedNodesInStepTemp.push([node2,node2.getEdges()[0],node2.getOwner()]),containsLeaf=!0);if(1==containsLeaf){for(var prunedNodesInStep=[],j3=0;j3<prunedNodesInStepTemp.length;j3++)1==prunedNodesInStepTemp[j3][0].getEdges().length&&(prunedNodesInStep.push(prunedNodesInStepTemp[j3]),prunedNodesInStepTemp[j3][0].getOwner().remove(prunedNodesInStepTemp[j3][0]));prunedNodesAll.push(prunedNodesInStep),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=prunedNodesAll},CoSELayout.prototype.growTree=function(prunedNodesAll){for(var nodeData2,prunedNodesInStep=prunedNodesAll[prunedNodesAll.length-1],i2=0;i2<prunedNodesInStep.length;i2++)nodeData2=prunedNodesInStep[i2],this.findPlaceforPrunedNode(nodeData2),nodeData2[2].add(nodeData2[0]),nodeData2[2].add(nodeData2[1],nodeData2[1].source,nodeData2[1].target);prunedNodesAll.splice(prunedNodesAll.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},CoSELayout.prototype.findPlaceforPrunedNode=function(nodeData2){var gridForPrunedNode,nodeToConnect,prunedNode=nodeData2[0],startGridX=(nodeToConnect=prunedNode==nodeData2[1].source?nodeData2[1].target:nodeData2[1].source).startX,finishGridX=nodeToConnect.finishX,startGridY=nodeToConnect.startY,finishGridY=nodeToConnect.finishY,controlRegions=[0,0,0,0];if(startGridY>0)for(var i2=startGridX;i2<=finishGridX;i2++)controlRegions[0]+=this.grid[i2][startGridY-1].length+this.grid[i2][startGridY].length-1;if(finishGridX<this.grid.length-1)for(i2=startGridY;i2<=finishGridY;i2++)controlRegions[1]+=this.grid[finishGridX+1][i2].length+this.grid[finishGridX][i2].length-1;if(finishGridY<this.grid[0].length-1)for(i2=startGridX;i2<=finishGridX;i2++)controlRegions[2]+=this.grid[i2][finishGridY+1].length+this.grid[i2][finishGridY].length-1;if(startGridX>0)for(i2=startGridY;i2<=finishGridY;i2++)controlRegions[3]+=this.grid[startGridX-1][i2].length+this.grid[startGridX][i2].length-1;for(var minCount,minIndex,min9=Integer.MAX_VALUE,j3=0;j3<controlRegions.length;j3++)controlRegions[j3]<min9?(min9=controlRegions[j3],minCount=1,minIndex=j3):controlRegions[j3]==min9&&minCount++;if(3==minCount&&0==min9)0==controlRegions[0]&&0==controlRegions[1]&&0==controlRegions[2]?gridForPrunedNode=1:0==controlRegions[0]&&0==controlRegions[1]&&0==controlRegions[3]?gridForPrunedNode=0:0==controlRegions[0]&&0==controlRegions[2]&&0==controlRegions[3]?gridForPrunedNode=3:0==controlRegions[1]&&0==controlRegions[2]&&0==controlRegions[3]&&(gridForPrunedNode=2);else if(2==minCount&&0==min9){var random2=Math.floor(2*Math.random());gridForPrunedNode=0==controlRegions[0]&&0==controlRegions[1]?0==random2?0:1:0==controlRegions[0]&&0==controlRegions[2]?0==random2?0:2:0==controlRegions[0]&&0==controlRegions[3]?0==random2?0:3:0==controlRegions[1]&&0==controlRegions[2]?0==random2?1:2:0==controlRegions[1]&&0==controlRegions[3]?0==random2?1:3:0==random2?2:3}else if(4==minCount&&0==min9){gridForPrunedNode=random2=Math.floor(4*Math.random())}else gridForPrunedNode=minIndex;0==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX(),nodeToConnect.getCenterY()-nodeToConnect.getHeight()/2-FDLayoutConstants.DEFAULT_EDGE_LENGTH-prunedNode.getHeight()/2):1==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX()+nodeToConnect.getWidth()/2+FDLayoutConstants.DEFAULT_EDGE_LENGTH+prunedNode.getWidth()/2,nodeToConnect.getCenterY()):2==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX(),nodeToConnect.getCenterY()+nodeToConnect.getHeight()/2+FDLayoutConstants.DEFAULT_EDGE_LENGTH+prunedNode.getHeight()/2):prunedNode.setCenter(nodeToConnect.getCenterX()-nodeToConnect.getWidth()/2-FDLayoutConstants.DEFAULT_EDGE_LENGTH-prunedNode.getWidth()/2,nodeToConnect.getCenterY())},module3.exports=CoSELayout},function(module3,exports3,__webpack_require__){var coseBase={};coseBase.layoutBase=__webpack_require__(0),coseBase.CoSEConstants=__webpack_require__(1),coseBase.CoSEEdge=__webpack_require__(2),coseBase.CoSEGraph=__webpack_require__(3),coseBase.CoSEGraphManager=__webpack_require__(4),coseBase.CoSELayout=__webpack_require__(6),coseBase.CoSENode=__webpack_require__(5),module3.exports=coseBase}])})}}),require_cytoscape_cose_bilkent=__commonJS({"../../node_modules/.pnpm/cytoscape-cose-bilkent@4.1.0_cytoscape@3.33.1/node_modules/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"(exports2,module2){__name(function(root3,factory){"object"==typeof exports2&&"object"==typeof module2?module2.exports=factory(require_cose_base()):"function"==typeof define&&define.amd?define(["cose-base"],factory):"object"==typeof exports2?exports2.cytoscapeCoseBilkent=factory(require_cose_base()):root3.cytoscapeCoseBilkent=factory(root3.coseBase)},"webpackUniversalModuleDefinition")(exports2,function(__WEBPACK_EXTERNAL_MODULE_0__){return function(modules2){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module3=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules2[moduleId].call(module3.exports,module3,module3.exports,__webpack_require__),module3.l=!0,module3.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=modules2,__webpack_require__.c=installedModules,__webpack_require__.i=function(value2){return value2},__webpack_require__.d=function(exports3,name,getter){__webpack_require__.o(exports3,name)||Object.defineProperty(exports3,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module3){var getter=module3&&module3.__esModule?__name(function(){return module3.default},"getDefault"):__name(function(){return module3},"getModuleExports");return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object3,property2){return Object.prototype.hasOwnProperty.call(object3,property2)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(module3,exports3){module3.exports=__WEBPACK_EXTERNAL_MODULE_0__},function(module3,exports3,__webpack_require__){var LayoutConstants=__webpack_require__(0).layoutBase.LayoutConstants,FDLayoutConstants=__webpack_require__(0).layoutBase.FDLayoutConstants,CoSEConstants=__webpack_require__(0).CoSEConstants,CoSELayout=__webpack_require__(0).CoSELayout,CoSENode=__webpack_require__(0).CoSENode,PointD=__webpack_require__(0).layoutBase.PointD,DimensionD2=__webpack_require__(0).layoutBase.DimensionD,defaults4={ready:__name(function(){},"ready"),stop:__name(function(){},"stop"),quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function extend5(defaults5,options2){var obj={};for(var i2 in defaults5)obj[i2]=defaults5[i2];for(var i2 in options2)obj[i2]=options2[i2];return obj}function _CoSELayout(_options){this.options=extend5(defaults4,_options),getUserOptions(this.options)}__name(extend5,"extend"),__name(_CoSELayout,"_CoSELayout");var getUserOptions=__name(function(options2){null!=options2.nodeRepulsion&&(CoSEConstants.DEFAULT_REPULSION_STRENGTH=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH=options2.nodeRepulsion),null!=options2.idealEdgeLength&&(CoSEConstants.DEFAULT_EDGE_LENGTH=FDLayoutConstants.DEFAULT_EDGE_LENGTH=options2.idealEdgeLength),null!=options2.edgeElasticity&&(CoSEConstants.DEFAULT_SPRING_STRENGTH=FDLayoutConstants.DEFAULT_SPRING_STRENGTH=options2.edgeElasticity),null!=options2.nestingFactor&&(CoSEConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=options2.nestingFactor),null!=options2.gravity&&(CoSEConstants.DEFAULT_GRAVITY_STRENGTH=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=options2.gravity),null!=options2.numIter&&(CoSEConstants.MAX_ITERATIONS=FDLayoutConstants.MAX_ITERATIONS=options2.numIter),null!=options2.gravityRange&&(CoSEConstants.DEFAULT_GRAVITY_RANGE_FACTOR=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=options2.gravityRange),null!=options2.gravityCompound&&(CoSEConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=options2.gravityCompound),null!=options2.gravityRangeCompound&&(CoSEConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=options2.gravityRangeCompound),null!=options2.initialEnergyOnIncremental&&(CoSEConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=options2.initialEnergyOnIncremental),"draft"==options2.quality?LayoutConstants.QUALITY=0:"proof"==options2.quality?LayoutConstants.QUALITY=2:LayoutConstants.QUALITY=1,CoSEConstants.NODE_DIMENSIONS_INCLUDE_LABELS=FDLayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=options2.nodeDimensionsIncludeLabels,CoSEConstants.DEFAULT_INCREMENTAL=FDLayoutConstants.DEFAULT_INCREMENTAL=LayoutConstants.DEFAULT_INCREMENTAL=!options2.randomize,CoSEConstants.ANIMATE=FDLayoutConstants.ANIMATE=LayoutConstants.ANIMATE=options2.animate,CoSEConstants.TILE=options2.tile,CoSEConstants.TILING_PADDING_VERTICAL="function"==typeof options2.tilingPaddingVertical?options2.tilingPaddingVertical.call():options2.tilingPaddingVertical,CoSEConstants.TILING_PADDING_HORIZONTAL="function"==typeof options2.tilingPaddingHorizontal?options2.tilingPaddingHorizontal.call():options2.tilingPaddingHorizontal},"getUserOptions");_CoSELayout.prototype.run=function(){var ready4,frameId,options2=this.options,layout6=(this.idToLNode={},this.layout=new CoSELayout),self2=this;self2.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var gm=layout6.newGraphManager();this.gm=gm;var nodes5=this.options.eles.nodes(),edges3=this.options.eles.edges();this.root=gm.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(nodes5),layout6);for(var i2=0;i2<edges3.length;i2++){var edge=edges3[i2],sourceNode=this.idToLNode[edge.data("source")],targetNode=this.idToLNode[edge.data("target")];if(sourceNode!==targetNode&&0==sourceNode.getEdgesBetween(targetNode).length)gm.add(layout6.newEdge(),sourceNode,targetNode).id=edge.id()}var getPositions=__name(function(ele,i3){"number"==typeof ele&&(ele=i3);var theId=ele.data("id"),lNode=self2.idToLNode[theId];return{x:lNode.getRect().getCenterX(),y:lNode.getRect().getCenterY()}},"getPositions"),iterateAnimated=__name(function iterateAnimated2(){for(var isDone,afterReposition=__name(function(){options2.fit&&options2.cy.fit(options2.eles,options2.padding),ready4||(ready4=!0,self2.cy.one("layoutready",options2.ready),self2.cy.trigger({type:"layoutready",layout:self2}))},"afterReposition"),ticksPerFrame=self2.options.refresh,i3=0;i3<ticksPerFrame&&!isDone;i3++)isDone=self2.stopped||self2.layout.tick();if(isDone)return layout6.checkLayoutSuccess()&&!layout6.isSubLayout&&layout6.doPostLayout(),layout6.tilingPostLayout&&layout6.tilingPostLayout(),layout6.isLayoutFinished=!0,self2.options.eles.nodes().positions(getPositions),afterReposition(),self2.cy.one("layoutstop",self2.options.stop),self2.cy.trigger({type:"layoutstop",layout:self2}),frameId&&cancelAnimationFrame(frameId),void(ready4=!1);var animationData=self2.layout.getPositionsData();options2.eles.nodes().positions(function(ele,i4){if("number"==typeof ele&&(ele=i4),!ele.isParent()){for(var theId=ele.id(),pNode=animationData[theId],temp=ele;null==pNode&&(pNode=animationData[temp.data("parent")]||animationData["DummyCompound_"+temp.data("parent")],animationData[theId]=pNode,null!=(temp=temp.parent()[0])););return null!=pNode?{x:pNode.x,y:pNode.y}:{x:ele.position("x"),y:ele.position("y")}}}),afterReposition(),frameId=requestAnimationFrame(iterateAnimated2)},"iterateAnimated");return layout6.addListener("layoutstarted",function(){"during"===self2.options.animate&&(frameId=requestAnimationFrame(iterateAnimated))}),layout6.runLayout(),"during"!==this.options.animate&&(self2.options.eles.nodes().not(":parent").layoutPositions(self2,self2.options,getPositions),ready4=!1),this},_CoSELayout.prototype.getTopMostNodes=function(nodes5){for(var nodesMap2={},i2=0;i2<nodes5.length;i2++)nodesMap2[nodes5[i2].id()]=!0;return nodes5.filter(function(ele,i3){"number"==typeof ele&&(ele=i3);for(var parent4=ele.parent()[0];null!=parent4;){if(nodesMap2[parent4.id()])return!1;parent4=parent4.parent()[0]}return!0})},_CoSELayout.prototype.processChildrenList=function(parent4,children2,layout6){for(var size4=children2.length,i2=0;i2<size4;i2++){var theNode,theNewGraph,theChild=children2[i2],children_of_children=theChild.children(),dimensions2=theChild.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((theNode=null!=theChild.outerWidth()&&null!=theChild.outerHeight()?parent4.add(new CoSENode(layout6.graphManager,new PointD(theChild.position("x")-dimensions2.w/2,theChild.position("y")-dimensions2.h/2),new DimensionD2(parseFloat(dimensions2.w),parseFloat(dimensions2.h)))):parent4.add(new CoSENode(this.graphManager))).id=theChild.data("id"),theNode.paddingLeft=parseInt(theChild.css("padding")),theNode.paddingTop=parseInt(theChild.css("padding")),theNode.paddingRight=parseInt(theChild.css("padding")),theNode.paddingBottom=parseInt(theChild.css("padding")),this.options.nodeDimensionsIncludeLabels&&theChild.isParent()){var labelWidth=theChild.boundingBox({includeLabels:!0,includeNodes:!1}).w,labelHeight=theChild.boundingBox({includeLabels:!0,includeNodes:!1}).h,labelPos=theChild.css("text-halign");theNode.labelWidth=labelWidth,theNode.labelHeight=labelHeight,theNode.labelPos=labelPos}if(this.idToLNode[theChild.data("id")]=theNode,isNaN(theNode.rect.x)&&(theNode.rect.x=0),isNaN(theNode.rect.y)&&(theNode.rect.y=0),null!=children_of_children&&children_of_children.length>0)theNewGraph=layout6.getGraphManager().add(layout6.newGraph(),theNode),this.processChildrenList(theNewGraph,children_of_children,layout6)}},_CoSELayout.prototype.stop=function(){return this.stopped=!0,this};var register=__name(function(cytoscape4){cytoscape4("layout","cose-bilkent",_CoSELayout)},"register");"undefined"!=typeof cytoscape&&register(cytoscape),module3.exports=register}])})}});function addNodes(nodes5,cy){nodes5.forEach(node2=>{const nodeData2={id:node2.id,labelText:node2.label,height:node2.height,width:node2.width,padding:node2.padding??0};Object.keys(node2).forEach(key=>{["id","label","height","width","padding","x","y"].includes(key)||(nodeData2[key]=node2[key])}),cy.add({group:"nodes",data:nodeData2,position:{x:node2.x??0,y:node2.y??0}})})}function addEdges(edges3,cy){edges3.forEach(edge=>{const edgeData2={id:edge.id,source:edge.start,target:edge.end};Object.keys(edge).forEach(key=>{["id","start","end"].includes(key)||(edgeData2[key]=edge[key])}),cy.add({group:"edges",data:edgeData2})})}function createCytoscapeInstance(data5){return new Promise(resolve2=>{const renderEl=select_default2("body").append("div").attr("id","cy").attr("style","display:none"),cy=cytoscape2({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});renderEl.remove(),addNodes(data5.nodes,cy),addEdges(data5.edges,cy),cy.nodes().forEach(function(n2){n2.layoutDimensions=()=>{const nodeData2=n2.data();return{w:nodeData2.width,h:nodeData2.height}}});cy.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),cy.ready(e3=>{log.info("Cytoscape ready",e3),resolve2(cy)})})}function extractPositionedNodes(cy){return cy.nodes().map(node2=>{const data5=node2.data(),position5=node2.position(),positionedNode={id:data5.id,x:position5.x,y:position5.y};return Object.keys(data5).forEach(key=>{"id"!==key&&(positionedNode[key]=data5[key])}),positionedNode})}function extractPositionedEdges(cy){return cy.edges().map(edge=>{const data5=edge.data(),rscratch=edge._private.rscratch,positionedEdge={id:data5.id,source:data5.source,target:data5.target,startX:rscratch.startX,startY:rscratch.startY,midX:rscratch.midX,midY:rscratch.midY,endX:rscratch.endX,endY:rscratch.endY};return Object.keys(data5).forEach(key=>{["id","source","target"].includes(key)||(positionedEdge[key]=data5[key])}),positionedEdge})}var init_cytoscape_setup=__esm({"src/rendering-util/layout-algorithms/cose-bilkent/cytoscape-setup.ts"(){init_cytoscape_esm(),import_cytoscape_cose_bilkent=__toESM(require_cytoscape_cose_bilkent(),1),init_src32(),init_logger(),cytoscape2.use(import_cytoscape_cose_bilkent.default),__name(addNodes,"addNodes"),__name(addEdges,"addEdges"),__name(createCytoscapeInstance,"createCytoscapeInstance"),__name(extractPositionedNodes,"extractPositionedNodes"),__name(extractPositionedEdges,"extractPositionedEdges")}});async function executeCoseBilkentLayout(data5,_config){log.debug("Starting cose-bilkent layout algorithm");try{validateLayoutData(data5);const cy=await createCytoscapeInstance(data5),positionedNodes=extractPositionedNodes(cy),positionedEdges=extractPositionedEdges(cy);return log.debug(`Layout completed: ${positionedNodes.length} nodes, ${positionedEdges.length} edges`),{nodes:positionedNodes,edges:positionedEdges}}catch(error3){throw log.error("Error in cose-bilkent layout algorithm:",error3),error3}}function validateLayoutData(data5){if(!data5)throw new Error("Layout data is required");if(!data5.config)throw new Error("Configuration is required in layout data");if(!data5.rootNode)throw new Error("Root node is required");if(!data5.nodes||!Array.isArray(data5.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(data5.edges))throw new Error("Edges array is required in layout data");return!0}var render4,render5,init_layout2=__esm({"src/rendering-util/layout-algorithms/cose-bilkent/layout.ts"(){init_logger(),init_cytoscape_setup(),__name(executeCoseBilkentLayout,"executeCoseBilkentLayout"),__name(validateLayoutData,"validateLayoutData")}}),init_render=__esm({"src/rendering-util/layout-algorithms/cose-bilkent/render.ts"(){init_layout2(),render4=__name(async(data4Layout,svg2,{insertCluster:insertCluster2,insertEdge:insertEdge3,insertEdgeLabel:insertEdgeLabel3,insertMarkers:insertMarkers4,insertNode:insertNode3,log:log3,positionEdgeLabel:positionEdgeLabel3},{algorithm:_algorithm})=>{const nodeDb2={},clusterDb2={},element3=svg2.select("g");insertMarkers4(element3,data4Layout.markers,data4Layout.type,data4Layout.diagramId);const subGraphsEl=element3.insert("g").attr("class","subgraphs"),edgePaths=element3.insert("g").attr("class","edgePaths"),edgeLabels3=element3.insert("g").attr("class","edgeLabels"),nodes5=element3.insert("g").attr("class","nodes");log3.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(data4Layout.nodes.map(async node2=>{if(node2.isGroup){const clusterNode={...node2};clusterDb2[node2.id]=clusterNode,nodeDb2[node2.id]=clusterNode,await insertCluster2(subGraphsEl,node2)}else{const nodeWithPosition={...node2};nodeDb2[node2.id]=nodeWithPosition;const nodeEl=await insertNode3(nodes5,node2,{config:data4Layout.config,dir:data4Layout.direction||"TB"}),boundingBox3=nodeEl.node().getBBox();nodeWithPosition.width=boundingBox3.width,nodeWithPosition.height=boundingBox3.height,nodeWithPosition.domId=nodeEl,log3.debug(`Node ${node2.id} dimensions: ${boundingBox3.width}x${boundingBox3.height}`)}})),log3.debug("Running cose-bilkent layout algorithm");const updatedLayoutData={...data4Layout,nodes:data4Layout.nodes.map(node2=>{const nodeWithDimensions=nodeDb2[node2.id];return{...node2,width:nodeWithDimensions.width,height:nodeWithDimensions.height}})},layoutResult=await executeCoseBilkentLayout(updatedLayoutData,data4Layout.config);log3.debug("Positioning nodes based on layout results"),layoutResult.nodes.forEach(positionedNode=>{const node2=nodeDb2[positionedNode.id];node2?.domId&&(node2.domId.attr("transform",`translate(${positionedNode.x}, ${positionedNode.y})`),node2.x=positionedNode.x,node2.y=positionedNode.y,log3.debug(`Positioned node ${node2.id} at center (${positionedNode.x}, ${positionedNode.y})`))}),layoutResult.edges.forEach(positionedEdge=>{const edge=data4Layout.edges.find(e3=>e3.id===positionedEdge.id);edge&&(edge.points=[{x:positionedEdge.startX,y:positionedEdge.startY},{x:positionedEdge.midX,y:positionedEdge.midY},{x:positionedEdge.endX,y:positionedEdge.endY}])}),log3.debug("Inserting and positioning edges"),await Promise.all(data4Layout.edges.map(async edge=>{await insertEdgeLabel3(edgeLabels3,edge);const startNode=nodeDb2[edge.start??""],endNode=nodeDb2[edge.end??""];if(startNode&&endNode){const positionedEdge=layoutResult.edges.find(e3=>e3.id===edge.id);if(positionedEdge){log3.debug("APA01 positionedEdge",positionedEdge);const edgeWithPath={...edge},paths=insertEdge3(edgePaths,edgeWithPath,clusterDb2,data4Layout.type,startNode,endNode,data4Layout.diagramId);positionEdgeLabel3(edgeWithPath,paths)}else{const edgeWithPath={...edge,points:[{x:startNode.x||0,y:startNode.y||0},{x:endNode.x||0,y:endNode.y||0}]},paths=insertEdge3(edgePaths,edgeWithPath,clusterDb2,data4Layout.type,startNode,endNode,data4Layout.diagramId);positionEdgeLabel3(edgeWithPath,paths)}}})),log3.debug("Cose-bilkent rendering completed")},"render")}}),cose_bilkent_exports={};__export(cose_bilkent_exports,{render:()=>render5});var layoutAlgorithms,registerLayoutLoaders,render6,getRegisteredLayoutAlgorithm,setupViewPortForSVG,calculateDimensionsWithPadding,createViewBox,flowRenderer_v3_unified_default,parser2,flow_default,newParser,flowParser_default,getIconStyles,fade,styles_default3,diagram2,init_cose_bilkent=__esm({"src/rendering-util/layout-algorithms/cose-bilkent/index.ts"(){init_render(),render5=render4}}),init_render2=__esm({"src/rendering-util/render.ts"(){init_internals(),init_logger(),layoutAlgorithms={},registerLayoutLoaders=__name(loaders=>{for(const loader29 of loaders)layoutAlgorithms[loader29.name]=loader29},"registerLayoutLoaders"),__name(()=>{registerLayoutLoaders([{name:"dagre",loader:__name(async()=>await Promise.resolve().then(()=>(init_dagre2(),dagre_exports)),"loader")},{name:"cose-bilkent",loader:__name(async()=>await Promise.resolve().then(()=>(init_cose_bilkent(),cose_bilkent_exports)),"loader")}])},"registerDefaultLayoutLoaders")(),render6=__name(async(data4Layout,svg2)=>{if(!(data4Layout.layoutAlgorithm in layoutAlgorithms))throw new Error(`Unknown layout algorithm: ${data4Layout.layoutAlgorithm}`);const layoutDefinition=layoutAlgorithms[data4Layout.layoutAlgorithm];return(await layoutDefinition.loader()).render(data4Layout,svg2,internalHelpers,{algorithm:layoutDefinition.algorithm})},"render"),getRegisteredLayoutAlgorithm=__name((algorithm="",{fallback:fallback="dagre"}={})=>{if(algorithm in layoutAlgorithms)return algorithm;if(fallback in layoutAlgorithms)return log.warn(`Layout algorithm ${algorithm} is not registered. Using ${fallback} as fallback.`),fallback;throw new Error(`Both layout algorithms ${algorithm} and ${fallback} are not registered.`)},"getRegisteredLayoutAlgorithm")}}),init_setupViewPortForSVG=__esm({"src/rendering-util/setupViewPortForSVG.ts"(){init_setupGraphViewbox(),init_logger(),setupViewPortForSVG=__name((svg2,padding2,cssDiagram,useMaxWidth)=>{svg2.attr("class",cssDiagram);const{width:width3,height:height2,x:x5,y:y6}=calculateDimensionsWithPadding(svg2,padding2);configureSvgSize(svg2,height2,width3,useMaxWidth);const viewBox=createViewBox(x5,y6,width3,height2,padding2);svg2.attr("viewBox",viewBox),log.debug(`viewBox configured: ${viewBox} with padding: ${padding2}`)},"setupViewPortForSVG"),calculateDimensionsWithPadding=__name((svg2,padding2)=>{const bounds4=svg2.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:bounds4.width+2*padding2,height:bounds4.height+2*padding2,x:bounds4.x,y:bounds4.y}},"calculateDimensionsWithPadding"),createViewBox=__name((x5,y6,width3,height2,padding2)=>`${x5-padding2} ${y6-padding2} ${width3} ${height2}`,"createViewBox")}}),init_flowRenderer_v3_unified=__esm({"src/diagrams/flowchart/flowRenderer-v3-unified.ts"(){init_src32(),init_diagramAPI(),init_logger(),init_insertElementsForSize(),init_render2(),init_setupViewPortForSVG(),init_utils2(),flowRenderer_v3_unified_default={getClasses:__name(function(text4,diagramObj){return diagramObj.db.getClasses()},"getClasses"),draw:__name(async function(text4,id30,_version,diag){log.info("REF0:"),log.info("Drawing state diagram (v2)",id30);const{securityLevel:securityLevel,flowchart:conf5,layout:layout6}=getConfig2();let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const doc="sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument:document;log.debug("Before getData: ");const data4Layout=diag.db.getData();log.debug("Data: ",data4Layout);const svg2=getDiagramElement(id30,securityLevel),direction=diag.db.getDirection();data4Layout.type=diag.type,data4Layout.layoutAlgorithm=getRegisteredLayoutAlgorithm(layout6),"dagre"===data4Layout.layoutAlgorithm&&"elk"===layout6&&log.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),data4Layout.direction=direction,data4Layout.nodeSpacing=conf5?.nodeSpacing||50,data4Layout.rankSpacing=conf5?.rankSpacing||50,data4Layout.markers=["point","circle","cross"],data4Layout.diagramId=id30,log.debug("REF1:",data4Layout),await render6(data4Layout,svg2);const padding2=data4Layout.config.flowchart?.diagramPadding??8;utils_default2.insertTitle(svg2,"flowchartTitleText",conf5?.titleTopMargin||0,diag.db.getDiagramTitle()),setupViewPortForSVG(svg2,padding2,"flowchart",conf5?.useMaxWidth||!1);for(const vertex of data4Layout.nodes){const node2=select_default2(`#${id30} [id="${vertex.id}"]`);if(!node2||!vertex.link)continue;const link2=doc.createElementNS("http://www.w3.org/2000/svg","a");link2.setAttributeNS("http://www.w3.org/2000/svg","class",vertex.cssClasses),link2.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===securityLevel?link2.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):vertex.linkTarget&&link2.setAttributeNS("http://www.w3.org/2000/svg","target",vertex.linkTarget);const linkNode=node2.insert(function(){return link2},":first-child"),shape=node2.select(".label-container");shape&&linkNode.append(function(){return shape.node()});const label=node2.select(".label");label&&linkNode.append(function(){return label.node()})}},"draw")}}}),init_flow=__esm({"src/diagrams/flowchart/parser/flow.jison"(){parser2=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,4],$V1=[1,3],$V2=[1,5],$V3=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],$V4=[2,2],$V5=[1,13],$V6=[1,14],$V7=[1,15],$V8=[1,16],$V9=[1,23],$Va=[1,25],$Vb=[1,26],$Vc=[1,27],$Vd=[1,49],$Ve=[1,48],$Vf=[1,29],$Vg=[1,30],$Vh=[1,31],$Vi=[1,32],$Vj=[1,33],$Vk=[1,44],$Vl=[1,46],$Vm=[1,42],$Vn=[1,47],$Vo=[1,43],$Vp=[1,50],$Vq=[1,45],$Vr=[1,51],$Vs=[1,52],$Vt=[1,34],$Vu=[1,35],$Vv=[1,36],$Vw=[1,37],$Vx=[1,57],$Vy=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],$Vz=[1,61],$VA=[1,60],$VB=[1,62],$VC=[8,9,11,75,77,78],$VD=[1,78],$VE=[1,91],$VF=[1,96],$VG=[1,95],$VH=[1,92],$VI=[1,88],$VJ=[1,94],$VK=[1,90],$VL=[1,97],$VM=[1,93],$VN=[1,98],$VO=[1,89],$VP=[8,9,10,11,40,75,77,78],$VQ=[8,9,10,11,40,46,75,77,78],$VR=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],$VS=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],$VT=[44,60,89,102,105,106,109,111,114,115,116],$VU=[1,121],$VV=[1,122],$VW=[1,124],$VX=[1,123],$VY=[44,60,62,74,89,102,105,106,109,111,114,115,116],$VZ=[1,133],$V_=[1,147],$V$=[1,148],$V01=[1,149],$V11=[1,150],$V21=[1,135],$V31=[1,137],$V41=[1,141],$V51=[1,142],$V61=[1,143],$V71=[1,144],$V81=[1,145],$V91=[1,146],$Va1=[1,151],$Vb1=[1,152],$Vc1=[1,131],$Vd1=[1,132],$Ve1=[1,139],$Vf1=[1,134],$Vg1=[1,138],$Vh1=[1,136],$Vi1=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],$Vj1=[1,154],$Vk1=[1,156],$Vl1=[8,9,11],$Vm1=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],$Vn1=[1,176],$Vo1=[1,172],$Vp1=[1,173],$Vq1=[1,177],$Vr1=[1,174],$Vs1=[1,175],$Vt1=[77,116,119],$Vu1=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],$Vv1=[10,106],$Vw1=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],$Vx1=[1,247],$Vy1=[1,245],$Vz1=[1,249],$VA1=[1,243],$VB1=[1,244],$VC1=[1,246],$VD1=[1,248],$VE1=[1,250],$VF1=[1,268],$VG1=[8,9,11,106],$VH1=[8,9,10,11,60,84,105,106,109,110,111,112],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 2:case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 3:(!Array.isArray($$[$0])||$$[$0].length>0)&&$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 4:case 183:case 44:case 54:case 76:case 181:this.$=$$[$0];break;case 11:yy.setDirection("TB"),this.$="TB";break;case 12:yy.setDirection($$[$0-1]),this.$=$$[$0-1];break;case 27:this.$=$$[$0-1].nodes;break;case 33:this.$=yy.addSubGraph($$[$0-6],$$[$0-1],$$[$0-4]);break;case 34:this.$=yy.addSubGraph($$[$0-3],$$[$0-1],$$[$0-3]);break;case 35:this.$=yy.addSubGraph(void 0,$$[$0-1],void 0);break;case 37:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 38:case 39:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 43:case 133:this.$=$$[$0-1]+$$[$0];break;case 45:yy.addVertex($$[$0-1][$$[$0-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,$$[$0]),yy.addLink($$[$0-3].stmt,$$[$0-1],$$[$0-2]),this.$={stmt:$$[$0-1],nodes:$$[$0-1].concat($$[$0-3].nodes)};break;case 46:yy.addLink($$[$0-2].stmt,$$[$0],$$[$0-1]),this.$={stmt:$$[$0],nodes:$$[$0].concat($$[$0-2].nodes)};break;case 47:yy.addLink($$[$0-3].stmt,$$[$0-1],$$[$0-2]),this.$={stmt:$$[$0-1],nodes:$$[$0-1].concat($$[$0-3].nodes)};break;case 48:this.$={stmt:$$[$0-1],nodes:$$[$0-1]};break;case 49:yy.addVertex($$[$0-1][$$[$0-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,$$[$0]),this.$={stmt:$$[$0-1],nodes:$$[$0-1],shapeData:$$[$0]};break;case 50:this.$={stmt:$$[$0],nodes:$$[$0]};break;case 51:case 128:case 130:this.$=[$$[$0]];break;case 52:yy.addVertex($$[$0-5][$$[$0-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,$$[$0-4]),this.$=$$[$0-5].concat($$[$0]);break;case 53:this.$=$$[$0-4].concat($$[$0]);break;case 55:this.$=$$[$0-2],yy.setClass($$[$0-2],$$[$0]);break;case 56:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"square");break;case 57:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"doublecircle");break;case 58:this.$=$$[$0-5],yy.addVertex($$[$0-5],$$[$0-2],"circle");break;case 59:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"ellipse");break;case 60:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"stadium");break;case 61:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"subroutine");break;case 62:this.$=$$[$0-7],yy.addVertex($$[$0-7],$$[$0-1],"rect",void 0,void 0,void 0,Object.fromEntries([[$$[$0-5],$$[$0-3]]]));break;case 63:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"cylinder");break;case 64:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"round");break;case 65:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"diamond");break;case 66:this.$=$$[$0-5],yy.addVertex($$[$0-5],$$[$0-2],"hexagon");break;case 67:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"odd");break;case 68:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"trapezoid");break;case 69:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"inv_trapezoid");break;case 70:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"lean_right");break;case 71:this.$=$$[$0-3],yy.addVertex($$[$0-3],$$[$0-1],"lean_left");break;case 72:this.$=$$[$0],yy.addVertex($$[$0]);break;case 73:$$[$0-1].text=$$[$0],this.$=$$[$0-1];break;case 74:case 75:$$[$0-2].text=$$[$0-1],this.$=$$[$0-2];break;case 77:var inf=yy.destructLink($$[$0],$$[$0-2]);this.$={type:inf.type,stroke:inf.stroke,length:inf.length,text:$$[$0-1]};break;case 78:inf=yy.destructLink($$[$0],$$[$0-2]);this.$={type:inf.type,stroke:inf.stroke,length:inf.length,text:$$[$0-1],id:$$[$0-3]};break;case 79:case 86:case 101:case 103:this.$={text:$$[$0],type:"text"};break;case 80:case 87:case 102:this.$={text:$$[$0-1].text+""+$$[$0],type:$$[$0-1].type};break;case 81:case 88:this.$={text:$$[$0],type:"string"};break;case 82:case 89:case 104:this.$={text:$$[$0],type:"markdown"};break;case 83:inf=yy.destructLink($$[$0]);this.$={type:inf.type,stroke:inf.stroke,length:inf.length};break;case 84:inf=yy.destructLink($$[$0]);this.$={type:inf.type,stroke:inf.stroke,length:inf.length,id:$$[$0-1]};break;case 85:this.$=$$[$0-1];break;case 105:this.$=$$[$0-4],yy.addClass($$[$0-2],$$[$0]);break;case 106:this.$=$$[$0-4],yy.setClass($$[$0-2],$$[$0]);break;case 107:case 115:this.$=$$[$0-1],yy.setClickEvent($$[$0-1],$$[$0]);break;case 108:case 116:this.$=$$[$0-3],yy.setClickEvent($$[$0-3],$$[$0-2]),yy.setTooltip($$[$0-3],$$[$0]);break;case 109:this.$=$$[$0-2],yy.setClickEvent($$[$0-2],$$[$0-1],$$[$0]);break;case 110:this.$=$$[$0-4],yy.setClickEvent($$[$0-4],$$[$0-3],$$[$0-2]),yy.setTooltip($$[$0-4],$$[$0]);break;case 111:this.$=$$[$0-2],yy.setLink($$[$0-2],$$[$0]);break;case 112:this.$=$$[$0-4],yy.setLink($$[$0-4],$$[$0-2]),yy.setTooltip($$[$0-4],$$[$0]);break;case 113:this.$=$$[$0-4],yy.setLink($$[$0-4],$$[$0-2],$$[$0]);break;case 114:this.$=$$[$0-6],yy.setLink($$[$0-6],$$[$0-4],$$[$0]),yy.setTooltip($$[$0-6],$$[$0-2]);break;case 117:this.$=$$[$0-1],yy.setLink($$[$0-1],$$[$0]);break;case 118:this.$=$$[$0-3],yy.setLink($$[$0-3],$$[$0-2]),yy.setTooltip($$[$0-3],$$[$0]);break;case 119:this.$=$$[$0-3],yy.setLink($$[$0-3],$$[$0-2],$$[$0]);break;case 120:this.$=$$[$0-5],yy.setLink($$[$0-5],$$[$0-4],$$[$0]),yy.setTooltip($$[$0-5],$$[$0-2]);break;case 121:this.$=$$[$0-4],yy.addVertex($$[$0-2],void 0,void 0,$$[$0]);break;case 122:this.$=$$[$0-4],yy.updateLink([$$[$0-2]],$$[$0]);break;case 123:this.$=$$[$0-4],yy.updateLink($$[$0-2],$$[$0]);break;case 124:this.$=$$[$0-8],yy.updateLinkInterpolate([$$[$0-6]],$$[$0-2]),yy.updateLink([$$[$0-6]],$$[$0]);break;case 125:this.$=$$[$0-8],yy.updateLinkInterpolate($$[$0-6],$$[$0-2]),yy.updateLink($$[$0-6],$$[$0]);break;case 126:this.$=$$[$0-6],yy.updateLinkInterpolate([$$[$0-4]],$$[$0]);break;case 127:this.$=$$[$0-6],yy.updateLinkInterpolate($$[$0-4],$$[$0]);break;case 129:case 131:$$[$0-2].push($$[$0]),this.$=$$[$0-2];break;case 182:case 184:this.$=$$[$0-1]+""+$$[$0];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"}}},"anonymous"),table:[{3:1,4:2,9:$V0,10:$V1,12:$V2},{1:[3]},o2($V3,$V4,{5:6}),{4:7,9:$V0,10:$V1,12:$V2},{4:8,9:$V0,10:$V1,12:$V2},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:$V5,9:$V6,10:$V7,11:$V8,20:17,22:18,23:19,24:20,25:21,26:22,27:$V9,33:24,34:$Va,36:$Vb,38:$Vc,42:28,43:38,44:$Vd,45:39,47:40,60:$Ve,84:$Vf,85:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs,121:$Vt,122:$Vu,123:$Vv,124:$Vw},o2($V3,[2,9]),o2($V3,[2,10]),o2($V3,[2,11]),{8:[1,54],9:[1,55],10:$Vx,15:53,18:56},o2($Vy,[2,3]),o2($Vy,[2,4]),o2($Vy,[2,5]),o2($Vy,[2,6]),o2($Vy,[2,7]),o2($Vy,[2,8]),{8:$Vz,9:$VA,11:$VB,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:$Vz,9:$VA,11:$VB,21:67},{8:$Vz,9:$VA,11:$VB,21:68},{8:$Vz,9:$VA,11:$VB,21:69},{8:$Vz,9:$VA,11:$VB,21:70},{8:$Vz,9:$VA,11:$VB,21:71},{8:$Vz,9:$VA,10:[1,72],11:$VB,21:73},o2($Vy,[2,36]),{35:[1,74]},{37:[1,75]},o2($Vy,[2,39]),o2($VC,[2,50],{18:76,39:77,10:$Vx,40:$VD}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:$VE,44:$VF,60:$VG,80:[1,86],89:$VH,95:[1,83],97:[1,84],101:85,105:$VI,106:$VJ,109:$VK,111:$VL,114:$VM,115:$VN,116:$VO,120:87},o2($Vy,[2,185]),o2($Vy,[2,186]),o2($Vy,[2,187]),o2($Vy,[2,188]),o2($VP,[2,51]),o2($VP,[2,54],{46:[1,99]}),o2($VQ,[2,72],{113:112,29:[1,100],44:$Vd,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:$Ve,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,114:$Vq,115:$Vr,116:$Vs}),o2($VR,[2,181]),o2($VR,[2,142]),o2($VR,[2,143]),o2($VR,[2,144]),o2($VR,[2,145]),o2($VR,[2,146]),o2($VR,[2,147]),o2($VR,[2,148]),o2($VR,[2,149]),o2($VR,[2,150]),o2($VR,[2,151]),o2($VR,[2,152]),o2($V3,[2,12]),o2($V3,[2,18]),o2($V3,[2,19]),{9:[1,113]},o2($VS,[2,26],{18:114,10:$Vx}),o2($Vy,[2,27]),{42:115,43:38,44:$Vd,45:39,47:40,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},o2($Vy,[2,40]),o2($Vy,[2,41]),o2($Vy,[2,42]),o2($VT,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:$VU,81:$VV,116:$VW,119:$VX},{75:[1,125],77:[1,126]},o2($VY,[2,83]),o2($Vy,[2,28]),o2($Vy,[2,29]),o2($Vy,[2,30]),o2($Vy,[2,31]),o2($Vy,[2,32]),{10:$VZ,12:$V_,14:$V$,27:$V01,28:127,32:$V11,44:$V21,60:$V31,75:$V41,80:[1,129],81:[1,130],83:140,84:$V51,85:$V61,86:$V71,87:$V81,88:$V91,89:$Va1,90:$Vb1,91:128,105:$Vc1,109:$Vd1,111:$Ve1,114:$Vf1,115:$Vg1,116:$Vh1},o2($Vi1,$V4,{5:153}),o2($Vy,[2,37]),o2($Vy,[2,38]),o2($VC,[2,48],{44:$Vj1}),o2($VC,[2,49],{18:155,10:$Vx,40:$Vk1}),o2($VP,[2,44]),{44:$Vd,47:157,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},{102:[1,158],103:159,105:[1,160]},{44:$Vd,47:161,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},{44:$Vd,47:162,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},o2($Vl1,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},o2($Vl1,[2,115],{120:167,10:[1,166],14:$VE,44:$VF,60:$VG,89:$VH,105:$VI,106:$VJ,109:$VK,111:$VL,114:$VM,115:$VN,116:$VO}),o2($Vl1,[2,117],{10:[1,168]}),o2($Vm1,[2,183]),o2($Vm1,[2,170]),o2($Vm1,[2,171]),o2($Vm1,[2,172]),o2($Vm1,[2,173]),o2($Vm1,[2,174]),o2($Vm1,[2,175]),o2($Vm1,[2,176]),o2($Vm1,[2,177]),o2($Vm1,[2,178]),o2($Vm1,[2,179]),o2($Vm1,[2,180]),{44:$Vd,47:169,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},{30:170,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:178,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:180,50:[1,179],67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:181,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:182,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:183,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{109:[1,184]},{30:185,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:186,65:[1,187],67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:188,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:189,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{30:190,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},o2($VR,[2,182]),o2($V3,[2,20]),o2($VS,[2,25]),o2($VC,[2,46],{39:191,18:192,10:$Vx,40:$VD}),o2($VT,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{77:[1,196],79:197,116:$VW,119:$VX},o2($Vt1,[2,79]),o2($Vt1,[2,81]),o2($Vt1,[2,82]),o2($Vt1,[2,168]),o2($Vt1,[2,169]),{76:198,79:120,80:$VU,81:$VV,116:$VW,119:$VX},o2($VY,[2,84]),{8:$Vz,9:$VA,10:$VZ,11:$VB,12:$V_,14:$V$,21:200,27:$V01,29:[1,199],32:$V11,44:$V21,60:$V31,75:$V41,83:140,84:$V51,85:$V61,86:$V71,87:$V81,88:$V91,89:$Va1,90:$Vb1,91:201,105:$Vc1,109:$Vd1,111:$Ve1,114:$Vf1,115:$Vg1,116:$Vh1},o2($Vu1,[2,101]),o2($Vu1,[2,103]),o2($Vu1,[2,104]),o2($Vu1,[2,157]),o2($Vu1,[2,158]),o2($Vu1,[2,159]),o2($Vu1,[2,160]),o2($Vu1,[2,161]),o2($Vu1,[2,162]),o2($Vu1,[2,163]),o2($Vu1,[2,164]),o2($Vu1,[2,165]),o2($Vu1,[2,166]),o2($Vu1,[2,167]),o2($Vu1,[2,90]),o2($Vu1,[2,91]),o2($Vu1,[2,92]),o2($Vu1,[2,93]),o2($Vu1,[2,94]),o2($Vu1,[2,95]),o2($Vu1,[2,96]),o2($Vu1,[2,97]),o2($Vu1,[2,98]),o2($Vu1,[2,99]),o2($Vu1,[2,100]),{6:11,7:12,8:$V5,9:$V6,10:$V7,11:$V8,20:17,22:18,23:19,24:20,25:21,26:22,27:$V9,32:[1,202],33:24,34:$Va,36:$Vb,38:$Vc,42:28,43:38,44:$Vd,45:39,47:40,60:$Ve,84:$Vf,85:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs,121:$Vt,122:$Vu,123:$Vv,124:$Vw},{10:$Vx,18:203},{44:[1,204]},o2($VP,[2,43]),{10:[1,205],44:$Vd,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:112,114:$Vq,115:$Vr,116:$Vs},{10:[1,206]},{10:[1,207],106:[1,208]},o2($Vv1,[2,128]),{10:[1,209],44:$Vd,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:112,114:$Vq,115:$Vr,116:$Vs},{10:[1,210],44:$Vd,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:112,114:$Vq,115:$Vr,116:$Vs},{80:[1,211]},o2($Vl1,[2,109],{10:[1,212]}),o2($Vl1,[2,111],{10:[1,213]}),{80:[1,214]},o2($Vm1,[2,184]),{80:[1,215],98:[1,216]},o2($VP,[2,55],{113:112,44:$Vd,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,114:$Vq,115:$Vr,116:$Vs}),{31:[1,217],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},o2($Vw1,[2,86]),o2($Vw1,[2,88]),o2($Vw1,[2,89]),o2($Vw1,[2,153]),o2($Vw1,[2,154]),o2($Vw1,[2,155]),o2($Vw1,[2,156]),{49:[1,219],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{30:220,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{51:[1,221],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{53:[1,222],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{55:[1,223],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{57:[1,224],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{60:[1,225]},{64:[1,226],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{66:[1,227],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{30:228,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},{31:[1,229],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{67:$Vn1,69:[1,230],71:[1,231],82:218,116:$Vq1,117:$Vr1,118:$Vs1},{67:$Vn1,69:[1,233],71:[1,232],82:218,116:$Vq1,117:$Vr1,118:$Vs1},o2($VC,[2,45],{18:155,10:$Vx,40:$Vk1}),o2($VC,[2,47],{44:$Vj1}),o2($VT,[2,75]),o2($VT,[2,74]),{62:[1,234],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},o2($VT,[2,77]),o2($Vt1,[2,80]),{77:[1,235],79:197,116:$VW,119:$VX},{30:236,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},o2($Vi1,$V4,{5:237}),o2($Vu1,[2,102]),o2($Vy,[2,35]),{43:238,44:$Vd,45:39,47:40,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},{10:$Vx,18:239},{10:$Vx1,60:$Vy1,84:$Vz1,92:240,105:$VA1,107:241,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},{10:$Vx1,60:$Vy1,84:$Vz1,92:251,104:[1,252],105:$VA1,107:241,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},{10:$Vx1,60:$Vy1,84:$Vz1,92:253,104:[1,254],105:$VA1,107:241,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},{105:[1,255]},{10:$Vx1,60:$Vy1,84:$Vz1,92:256,105:$VA1,107:241,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},{44:$Vd,47:257,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},o2($Vl1,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},o2($Vl1,[2,116]),o2($Vl1,[2,118],{10:[1,261]}),o2($Vl1,[2,119]),o2($VQ,[2,56]),o2($Vw1,[2,87]),o2($VQ,[2,57]),{51:[1,262],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},o2($VQ,[2,64]),o2($VQ,[2,59]),o2($VQ,[2,60]),o2($VQ,[2,61]),{109:[1,263]},o2($VQ,[2,63]),o2($VQ,[2,65]),{66:[1,264],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},o2($VQ,[2,67]),o2($VQ,[2,68]),o2($VQ,[2,70]),o2($VQ,[2,69]),o2($VQ,[2,71]),o2([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),o2($VT,[2,78]),{31:[1,265],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{6:11,7:12,8:$V5,9:$V6,10:$V7,11:$V8,20:17,22:18,23:19,24:20,25:21,26:22,27:$V9,32:[1,266],33:24,34:$Va,36:$Vb,38:$Vc,42:28,43:38,44:$Vd,45:39,47:40,60:$Ve,84:$Vf,85:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs,121:$Vt,122:$Vu,123:$Vv,124:$Vw},o2($VP,[2,53]),{43:267,44:$Vd,45:39,47:40,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs},o2($Vl1,[2,121],{106:$VF1}),o2($VG1,[2,130],{108:269,10:$Vx1,60:$Vy1,84:$Vz1,105:$VA1,109:$VB1,110:$VC1,111:$VD1,112:$VE1}),o2($VH1,[2,132]),o2($VH1,[2,134]),o2($VH1,[2,135]),o2($VH1,[2,136]),o2($VH1,[2,137]),o2($VH1,[2,138]),o2($VH1,[2,139]),o2($VH1,[2,140]),o2($VH1,[2,141]),o2($Vl1,[2,122],{106:$VF1}),{10:[1,270]},o2($Vl1,[2,123],{106:$VF1}),{10:[1,271]},o2($Vv1,[2,129]),o2($Vl1,[2,105],{106:$VF1}),o2($Vl1,[2,106],{113:112,44:$Vd,60:$Ve,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,114:$Vq,115:$Vr,116:$Vs}),o2($Vl1,[2,110]),o2($Vl1,[2,112],{10:[1,272]}),o2($Vl1,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:$Vz,9:$VA,11:$VB,21:277},o2($Vy,[2,34]),o2($VP,[2,52]),{10:$Vx1,60:$Vy1,84:$Vz1,105:$VA1,107:278,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},o2($VH1,[2,133]),{14:$VE,44:$VF,60:$VG,89:$VH,101:279,105:$VI,106:$VJ,109:$VK,111:$VL,114:$VM,115:$VN,116:$VO,120:87},{14:$VE,44:$VF,60:$VG,89:$VH,101:280,105:$VI,106:$VJ,109:$VK,111:$VL,114:$VM,115:$VN,116:$VO,120:87},{98:[1,281]},o2($Vl1,[2,120]),o2($VQ,[2,58]),{30:282,67:$Vn1,80:$Vo1,81:$Vp1,82:171,116:$Vq1,117:$Vr1,118:$Vs1},o2($VQ,[2,66]),o2($Vi1,$V4,{5:283}),o2($VG1,[2,131],{108:269,10:$Vx1,60:$Vy1,84:$Vz1,105:$VA1,109:$VB1,110:$VC1,111:$VD1,112:$VE1}),o2($Vl1,[2,126],{120:167,10:[1,284],14:$VE,44:$VF,60:$VG,89:$VH,105:$VI,106:$VJ,109:$VK,111:$VL,114:$VM,115:$VN,116:$VO}),o2($Vl1,[2,127],{120:167,10:[1,285],14:$VE,44:$VF,60:$VG,89:$VH,105:$VI,106:$VJ,109:$VK,111:$VL,114:$VM,115:$VN,116:$VO}),o2($Vl1,[2,114]),{31:[1,286],67:$Vn1,82:218,116:$Vq1,117:$Vr1,118:$Vs1},{6:11,7:12,8:$V5,9:$V6,10:$V7,11:$V8,20:17,22:18,23:19,24:20,25:21,26:22,27:$V9,32:[1,287],33:24,34:$Va,36:$Vb,38:$Vc,42:28,43:38,44:$Vd,45:39,47:40,60:$Ve,84:$Vf,85:$Vg,86:$Vh,87:$Vi,88:$Vj,89:$Vk,102:$Vl,105:$Vm,106:$Vn,109:$Vo,111:$Vp,113:41,114:$Vq,115:$Vr,116:$Vs,121:$Vt,122:$Vu,123:$Vv,124:$Vw},{10:$Vx1,60:$Vy1,84:$Vz1,92:288,105:$VA1,107:241,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},{10:$Vx1,60:$Vy1,84:$Vz1,92:289,105:$VA1,107:241,108:242,109:$VB1,110:$VC1,111:$VD1,112:$VE1},o2($VQ,[2,62]),o2($Vy,[2,33]),o2($Vl1,[2,124],{106:$VF1}),o2($Vl1,[2,125],{106:$VF1})],defaultActions:{},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:case 12:case 14:case 17:case 20:case 23:case 33:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),yy_.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:const re3=/\n\s*/g;return yy_.yytext=yy_.yytext.replace(re3,"<br/>"),40;case 11:return 40;case 13:this.begin("callbackname");break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 18:return 96;case 19:return"MD_STR";case 21:this.begin("md_string");break;case 22:return"STR";case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 34:return 88;case 35:case 36:case 37:return yy.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:case 41:case 42:case 43:return 98;case 44:return this.popState(),13;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:case 102:return 111;case 62:return 46;case 63:return 60;case 64:case 103:return 44;case 65:return 8;case 66:return 106;case 67:case 101:return 115;case 68:case 71:case 74:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:case 73:case 76:return 119;case 72:return this.pushState("thickEdgeText"),75;case 75:return this.pushState("dottedEdgeText"),75;case 77:return 77;case 78:return this.popState(),53;case 79:case 115:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser2.parser=parser2,flow_default=parser2}}),init_flowParser=__esm({"src/diagrams/flowchart/parser/flowParser.ts"(){init_flow(),(newParser=Object.assign({},flow_default)).parse=src=>{const newSrc=src.replace(/}\s*\n/g,"}\n");return flow_default.parse(newSrc)},flowParser_default=newParser}}),init_globalStyles=__esm({"src/diagrams/globalStyles.ts"(){getIconStyles=__name(()=>"\n  /* Font Awesome icon styling - consolidated */\n  .label-icon {\n    display: inline-block;\n    height: 1em;\n    overflow: visible;\n    vertical-align: -0.125em;\n  }\n  \n  .node .label-icon path {\n    fill: currentColor;\n    stroke: revert;\n    stroke-width: revert;\n  }\n","getIconStyles")}}),init_styles3=__esm({"src/diagrams/flowchart/styles.ts"(){init_dist(),init_globalStyles(),fade=__name((color2,opacity)=>{const channel2=channel_default2,r2=channel2(color2,"r"),g2=channel2(color2,"g"),b3=channel2(color2,"b");return rgba_default(r2,g2,b3,opacity)},"fade"),styles_default3=__name(options2=>`.label {\n    font-family: ${options2.fontFamily};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n  .cluster-label text {\n    fill: ${options2.titleColor};\n  }\n  .cluster-label span {\n    color: ${options2.titleColor};\n  }\n  .cluster-label span p {\n    background-color: transparent;\n  }\n\n  .label text,span {\n    fill: ${options2.nodeTextColor||options2.textColor};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options2.mainBkg};\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1px;\n  }\n  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .katex path {\n    fill: #000;\n    stroke: #000;\n    stroke-width: 1px;\n  }\n\n  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n\n  .root .anchor path {\n    fill: ${options2.lineColor} !important;\n    stroke-width: 0;\n    stroke: ${options2.lineColor};\n  }\n\n  .arrowheadPath {\n    fill: ${options2.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options2.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${options2.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options2.edgeLabelBackground};\n    p {\n      background-color: ${options2.edgeLabelBackground};\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${options2.edgeLabelBackground};\n      fill: ${options2.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${fade(options2.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .cluster rect {\n    fill: ${options2.clusterBkg};\n    stroke: ${options2.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${options2.titleColor};\n  }\n\n  .cluster span {\n    color: ${options2.titleColor};\n  }\n  /* .cluster div {\n    color: ${options2.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${options2.fontFamily};\n    font-size: 12px;\n    background: ${options2.tertiaryColor};\n    border: 1px solid ${options2.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options2.textColor};\n  }\n\n  rect.text {\n    fill: none;\n    stroke-width: 0;\n  }\n\n  .icon-shape, .image-shape {\n    background-color: ${options2.edgeLabelBackground};\n    p {\n      background-color: ${options2.edgeLabelBackground};\n      padding: 2px;\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${options2.edgeLabelBackground};\n      fill: ${options2.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n  ${getIconStyles()}\n`,"getStyles")}}),flowDiagram_exports={};__export(flowDiagram_exports,{diagram:()=>diagram2});var parser3,erDiagram_default,ErDB,draw3,init_flowDiagram=__esm({"src/diagrams/flowchart/flowDiagram.ts"(){init_diagramAPI(),init_flowDb(),init_flowRenderer_v3_unified(),init_flowParser(),init_styles3(),diagram2={parser:flowParser_default,get db(){return new FlowDB},renderer:flowRenderer_v3_unified_default,styles:styles_default3,init:__name(cnf=>{cnf.flowchart||(cnf.flowchart={}),cnf.layout&&setConfig2({layout:cnf.layout}),cnf.flowchart.arrowMarkerAbsolute=cnf.arrowMarkerAbsolute,setConfig2({flowchart:{arrowMarkerAbsolute:cnf.arrowMarkerAbsolute}})},"init")}}}),init_erDiagram=__esm({"src/diagrams/er/parser/erDiagram.jison"(){parser3=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],$V1=[1,10],$V2=[1,11],$V3=[1,12],$V4=[1,13],$V5=[1,20],$V6=[1,21],$V7=[1,22],$V8=[1,23],$V9=[1,24],$Va=[1,19],$Vb=[1,25],$Vc=[1,26],$Vd=[1,18],$Ve=[1,33],$Vf=[1,34],$Vg=[1,35],$Vh=[1,36],$Vi=[1,37],$Vj=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],$Vk=[1,42],$Vl=[1,43],$Vm=[1,52],$Vn=[40,50,68,69],$Vo=[1,63],$Vp=[1,61],$Vq=[1,58],$Vr=[1,62],$Vs=[1,64],$Vt=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],$Vu=[63,64,65,66,67],$Vv=[1,81],$Vw=[1,80],$Vx=[1,78],$Vy=[1,79],$Vz=[6,10,42,47],$VA=[6,10,13,41,42,47,48,49],$VB=[1,89],$VC=[1,88],$VD=[1,87],$VE=[19,56],$VF=[1,98],$VG=[1,97],$VH=[19,56,58,60],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:break;case 2:case 6:case 7:this.$=[];break;case 3:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 4:case 5:case 55:case 78:case 62:case 63:case 66:this.$=$$[$0];break;case 8:yy.addEntity($$[$0-4]),yy.addEntity($$[$0-2]),yy.addRelationship($$[$0-4],$$[$0],$$[$0-2],$$[$0-3]);break;case 9:yy.addEntity($$[$0-8]),yy.addEntity($$[$0-4]),yy.addRelationship($$[$0-8],$$[$0],$$[$0-4],$$[$0-5]),yy.setClass([$$[$0-8]],$$[$0-6]),yy.setClass([$$[$0-4]],$$[$0-2]);break;case 10:yy.addEntity($$[$0-6]),yy.addEntity($$[$0-2]),yy.addRelationship($$[$0-6],$$[$0],$$[$0-2],$$[$0-3]),yy.setClass([$$[$0-6]],$$[$0-4]);break;case 11:yy.addEntity($$[$0-6]),yy.addEntity($$[$0-4]),yy.addRelationship($$[$0-6],$$[$0],$$[$0-4],$$[$0-5]),yy.setClass([$$[$0-4]],$$[$0-2]);break;case 12:yy.addEntity($$[$0-3]),yy.addAttributes($$[$0-3],$$[$0-1]);break;case 13:yy.addEntity($$[$0-5]),yy.addAttributes($$[$0-5],$$[$0-1]),yy.setClass([$$[$0-5]],$$[$0-3]);break;case 14:yy.addEntity($$[$0-2]);break;case 15:yy.addEntity($$[$0-4]),yy.setClass([$$[$0-4]],$$[$0-2]);break;case 16:yy.addEntity($$[$0]);break;case 17:yy.addEntity($$[$0-2]),yy.setClass([$$[$0-2]],$$[$0]);break;case 18:yy.addEntity($$[$0-6],$$[$0-4]),yy.addAttributes($$[$0-6],$$[$0-1]);break;case 19:yy.addEntity($$[$0-8],$$[$0-6]),yy.addAttributes($$[$0-8],$$[$0-1]),yy.setClass([$$[$0-8]],$$[$0-3]);break;case 20:yy.addEntity($$[$0-5],$$[$0-3]);break;case 21:yy.addEntity($$[$0-7],$$[$0-5]),yy.setClass([$$[$0-7]],$$[$0-2]);break;case 22:yy.addEntity($$[$0-3],$$[$0-1]);break;case 23:yy.addEntity($$[$0-5],$$[$0-3]),yy.setClass([$$[$0-5]],$$[$0]);break;case 24:case 25:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 26:case 27:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 32:yy.setDirection("TB");break;case 33:yy.setDirection("BT");break;case 34:yy.setDirection("RL");break;case 35:yy.setDirection("LR");break;case 36:this.$=$$[$0-3],yy.addClass($$[$0-2],$$[$0-1]);break;case 37:case 38:case 56:case 64:case 43:this.$=[$$[$0]];break;case 39:case 40:this.$=$$[$0-2].concat([$$[$0]]);break;case 41:this.$=$$[$0-2],yy.setClass($$[$0-1],$$[$0]);break;case 42:this.$=$$[$0-3],yy.addCssStyles($$[$0-2],$$[$0-1]);break;case 44:case 65:$$[$0-2].push($$[$0]),this.$=$$[$0-2];break;case 46:this.$=$$[$0-1]+$$[$0];break;case 54:case 76:case 77:case 67:this.$=$$[$0].replace(/"/g,"");break;case 57:$$[$0].push($$[$0-1]),this.$=$$[$0];break;case 58:this.$={type:$$[$0-1],name:$$[$0]};break;case 59:this.$={type:$$[$0-2],name:$$[$0-1],keys:$$[$0]};break;case 60:this.$={type:$$[$0-2],name:$$[$0-1],comment:$$[$0]};break;case 61:this.$={type:$$[$0-3],name:$$[$0-2],keys:$$[$0-1],comment:$$[$0]};break;case 68:this.$={cardA:$$[$0],relType:$$[$0-1],cardB:$$[$0-2]};break;case 69:this.$=yy.Cardinality.ZERO_OR_ONE;break;case 70:this.$=yy.Cardinality.ZERO_OR_MORE;break;case 71:this.$=yy.Cardinality.ONE_OR_MORE;break;case 72:this.$=yy.Cardinality.ONLY_ONE;break;case 73:this.$=yy.Cardinality.MD_PARENT;break;case 74:this.$=yy.Identification.NON_IDENTIFYING;break;case 75:this.$=yy.Identification.IDENTIFYING}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},o2($V0,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:$V1,24:$V2,26:$V3,28:$V4,29:14,30:15,31:16,32:17,33:$V5,34:$V6,35:$V7,36:$V8,37:$V9,40:$Va,43:$Vb,44:$Vc,50:$Vd},o2($V0,[2,7],{1:[2,1]}),o2($V0,[2,3]),{9:27,11:9,22:$V1,24:$V2,26:$V3,28:$V4,29:14,30:15,31:16,32:17,33:$V5,34:$V6,35:$V7,36:$V8,37:$V9,40:$Va,43:$Vb,44:$Vc,50:$Vd},o2($V0,[2,5]),o2($V0,[2,6]),o2($V0,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:$Ve,64:$Vf,65:$Vg,66:$Vh,67:$Vi}),{23:[1,38]},{25:[1,39]},{27:[1,40]},o2($V0,[2,27]),o2($V0,[2,28]),o2($V0,[2,29]),o2($V0,[2,30]),o2($V0,[2,31]),o2($Vj,[2,54]),o2($Vj,[2,55]),o2($V0,[2,32]),o2($V0,[2,33]),o2($V0,[2,34]),o2($V0,[2,35]),{16:41,40:$Vk,41:$Vl},{16:44,40:$Vk,41:$Vl},{16:45,40:$Vk,41:$Vl},o2($V0,[2,4]),{11:46,40:$Va,50:$Vd},{16:47,40:$Vk,41:$Vl},{18:48,19:[1,49],51:50,52:51,56:$Vm},{11:53,40:$Va,50:$Vd},{62:54,68:[1,55],69:[1,56]},o2($Vn,[2,69]),o2($Vn,[2,70]),o2($Vn,[2,71]),o2($Vn,[2,72]),o2($Vn,[2,73]),o2($V0,[2,24]),o2($V0,[2,25]),o2($V0,[2,26]),{13:$Vo,38:57,41:$Vp,42:$Vq,45:59,46:60,48:$Vr,49:$Vs},o2($Vt,[2,37]),o2($Vt,[2,38]),{16:65,40:$Vk,41:$Vl,42:$Vq},{13:$Vo,38:66,41:$Vp,42:$Vq,45:59,46:60,48:$Vr,49:$Vs},{13:[1,67],15:[1,68]},o2($V0,[2,17],{61:32,12:69,17:[1,70],42:$Vq,63:$Ve,64:$Vf,65:$Vg,66:$Vh,67:$Vi}),{19:[1,71]},o2($V0,[2,14]),{18:72,19:[2,56],51:50,52:51,56:$Vm},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:$Ve,64:$Vf,65:$Vg,66:$Vh,67:$Vi},o2($Vu,[2,74]),o2($Vu,[2,75]),{6:$Vv,10:$Vw,39:77,42:$Vx,47:$Vy},{40:[1,82],41:[1,83]},o2($Vz,[2,43],{46:84,13:$Vo,41:$Vp,48:$Vr,49:$Vs}),o2($VA,[2,45]),o2($VA,[2,50]),o2($VA,[2,51]),o2($VA,[2,52]),o2($VA,[2,53]),o2($V0,[2,41],{42:$Vq}),{6:$Vv,10:$Vw,39:85,42:$Vx,47:$Vy},{14:86,40:$VB,50:$VC,70:$VD},{16:90,40:$Vk,41:$Vl},{11:91,40:$Va,50:$Vd},{18:92,19:[1,93],51:50,52:51,56:$Vm},o2($V0,[2,12]),{19:[2,57]},o2($VE,[2,58],{54:94,55:95,57:96,59:$VF,60:$VG}),o2([19,56,59,60],[2,63]),o2($V0,[2,22],{15:[1,100],17:[1,99]}),o2([40,50],[2,68]),o2($V0,[2,36]),{13:$Vo,41:$Vp,45:101,46:60,48:$Vr,49:$Vs},o2($V0,[2,47]),o2($V0,[2,48]),o2($V0,[2,49]),o2($Vt,[2,39]),o2($Vt,[2,40]),o2($VA,[2,46]),o2($V0,[2,42]),o2($V0,[2,8]),o2($V0,[2,76]),o2($V0,[2,77]),o2($V0,[2,78]),{13:[1,102],42:$Vq},{13:[1,104],15:[1,103]},{19:[1,105]},o2($V0,[2,15]),o2($VE,[2,59],{55:106,58:[1,107],60:$VG}),o2($VE,[2,60]),o2($VH,[2,64]),o2($VE,[2,67]),o2($VH,[2,66]),{18:108,19:[1,109],51:50,52:51,56:$Vm},{16:110,40:$Vk,41:$Vl},o2($Vz,[2,44],{46:84,13:$Vo,41:$Vp,48:$Vr,49:$Vs}),{14:111,40:$VB,50:$VC,70:$VD},{16:112,40:$Vk,41:$Vl},{14:113,40:$VB,50:$VC,70:$VD},o2($V0,[2,13]),o2($VE,[2,61]),{57:114,59:$VF},{19:[1,115]},o2($V0,[2,20]),o2($V0,[2,23],{17:[1,116],42:$Vq}),o2($V0,[2,11]),{13:[1,117],42:$Vq},o2($V0,[2,10]),o2($VH,[2,65]),o2($V0,[2,18]),{18:118,19:[1,119],51:50,52:51,56:$Vm},{14:120,40:$VB,50:$VC,70:$VD},{19:[1,121]},o2($V0,[2,21]),o2($V0,[2,9]),o2($V0,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:case 23:case 28:case 35:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:case 19:case 38:return 49;case 20:case 37:return 42;case 21:return 15;case 22:case 36:return 13;case 24:return 59;case 25:case 26:return 56;case 27:return 60;case 29:return this.popState(),19;case 30:case 73:return yy_.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 39:return this.begin("style"),37;case 40:return 43;case 41:case 45:case 46:case 59:return 63;case 42:case 43:case 44:case 52:case 54:case 61:return 65;case 47:case 48:case 49:case 50:case 51:case 53:case 60:return 64;case 55:case 56:case 57:case 58:return 66;case 62:return 67;case 63:case 66:case 67:case 68:return 68;case 64:case 65:return 69;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser3.parser=parser3,erDiagram_default=parser3}}),init_erDb=__esm({"src/diagrams/er/erDb.ts"(){init_logger(),init_diagramAPI(),init_commonDb(),init_utils2(),ErDB=class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=setAccTitle,this.getAccTitle=getAccTitle,this.setAccDescription=setAccDescription,this.getAccDescription=getAccDescription,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.getConfig=__name(()=>getConfig2().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}static{__name(this,"ErDB")}addEntity(name,alias=""){return this.entities.has(name)?!this.entities.get(name)?.alias&&alias&&(this.entities.get(name).alias=alias,log.info(`Add alias '${alias}' to entity '${name}'`)):(this.entities.set(name,{id:`entity-${name}-${this.entities.size}`,label:name,attributes:[],alias:alias,shape:"erBox",look:getConfig2().look??"default",cssClasses:"default",cssStyles:[]}),log.info("Added new entity :",name)),this.entities.get(name)}getEntity(name){return this.entities.get(name)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(entityName,attribs){const entity=this.addEntity(entityName);let i2;for(i2=attribs.length-1;i2>=0;i2--)attribs[i2].keys||(attribs[i2].keys=[]),attribs[i2].comment||(attribs[i2].comment=""),entity.attributes.push(attribs[i2]),log.debug("Added attribute ",attribs[i2].name)}addRelationship(entA,rolA,entB,rSpec){const entityA=this.entities.get(entA),entityB=this.entities.get(entB);if(!entityA||!entityB)return;const rel2={entityA:entityA.id,roleA:rolA,entityB:entityB.id,relSpec:rSpec};this.relationships.push(rel2),log.debug("Added new relationship :",rel2)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(dir2){this.direction=dir2}getCompiledStyles(classDefs){let compiledStyles=[];for(const customClass of classDefs){const cssClass=this.classes.get(customClass);cssClass?.styles&&(compiledStyles=[...compiledStyles,...cssClass.styles??[]].map(s2=>s2.trim())),cssClass?.textStyles&&(compiledStyles=[...compiledStyles,...cssClass.textStyles??[]].map(s2=>s2.trim()))}return compiledStyles}addCssStyles(ids,styles4){for(const id30 of ids){const entity=this.entities.get(id30);if(!styles4||!entity)return;for(const style3 of styles4)entity.cssStyles.push(style3)}}addClass(ids,style3){ids.forEach(id30=>{let classNode=this.classes.get(id30);void 0===classNode&&(classNode={id:id30,styles:[],textStyles:[]},this.classes.set(id30,classNode)),style3&&style3.forEach(function(s2){if(/color/.exec(s2)){const newStyle=s2.replace("fill","bgFill");classNode.textStyles.push(newStyle)}classNode.styles.push(s2)})})}setClass(ids,classNames){for(const id30 of ids){const entity=this.entities.get(id30);if(entity)for(const className of classNames)entity.cssClasses+=" "+className}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],clear()}getData(){const nodes5=[],edges3=[],config5=getConfig2();for(const entityKey of this.entities.keys()){const entityNode=this.entities.get(entityKey);entityNode&&(entityNode.cssCompiledStyles=this.getCompiledStyles(entityNode.cssClasses.split(" ")),nodes5.push(entityNode))}let count2=0;for(const relationship of this.relationships){const edge={id:getEdgeId(relationship.entityA,relationship.entityB,{prefix:"id",counter:count2++}),type:"normal",curve:"basis",start:relationship.entityA,end:relationship.entityB,label:relationship.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:relationship.relSpec.cardB.toLowerCase(),arrowTypeEnd:relationship.relSpec.cardA.toLowerCase(),pattern:"IDENTIFYING"==relationship.relSpec.relType?"solid":"dashed",look:config5.look};edges3.push(edge)}return{nodes:nodes5,edges:edges3,other:{},config:config5,direction:"TB"}}}}}),erRenderer_unified_exports={};__export(erRenderer_unified_exports,{draw:()=>draw3});var fade2,styles_default4,diagram3,init_erRenderer_unified=__esm({"src/diagrams/er/erRenderer-unified.ts"(){init_diagramAPI(),init_logger(),init_insertElementsForSize(),init_render2(),init_setupViewPortForSVG(),init_utils2(),init_src32(),draw3=__name(async function(text4,id30,_version,diag){log.info("REF0:"),log.info("Drawing er diagram (unified)",id30);const{securityLevel:securityLevel,er:conf5,layout:layout6}=getConfig2(),data4Layout=diag.db.getData(),svg2=getDiagramElement(id30,securityLevel);data4Layout.type=diag.type,data4Layout.layoutAlgorithm=getRegisteredLayoutAlgorithm(layout6),data4Layout.config.flowchart.nodeSpacing=conf5?.nodeSpacing||140,data4Layout.config.flowchart.rankSpacing=conf5?.rankSpacing||80,data4Layout.direction=diag.db.getDirection(),data4Layout.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],data4Layout.diagramId=id30,await render6(data4Layout,svg2),"elk"===data4Layout.layoutAlgorithm&&svg2.select(".edges").lower();const backgroundNodes=svg2.selectAll('[id*="-background"]');Array.from(backgroundNodes).length>0&&backgroundNodes.each(function(){const backgroundNode=select_default2(this),nonBackgroundId=backgroundNode.attr("id").replace("-background",""),nonBackgroundNode=svg2.select(`#${CSS.escape(nonBackgroundId)}`);if(!nonBackgroundNode.empty()){const transform8=nonBackgroundNode.attr("transform");backgroundNode.attr("transform",transform8)}});utils_default2.insertTitle(svg2,"erDiagramTitleText",conf5?.titleTopMargin??25,diag.db.getDiagramTitle()),setupViewPortForSVG(svg2,8,"erDiagram",conf5?.useMaxWidth??!0)},"draw")}}),init_styles4=__esm({"src/diagrams/er/styles.ts"(){init_dist(),fade2=__name((color2,opacity)=>{const channel2=channel_default2,r2=channel2(color2,"r"),g2=channel2(color2,"g"),b3=channel2(color2,"b");return rgba_default(r2,g2,b3,opacity)},"fade"),styles_default4=__name(options2=>`\n  .entityBox {\n    fill: ${options2.mainBkg};\n    stroke: ${options2.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${options2.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${options2.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n  .labelBkg {\n    background-color: ${fade2(options2.tertiaryColor,.5)};\n  }\n\n  .edgeLabel .label {\n    fill: ${options2.nodeBorder};\n    font-size: 14px;\n  }\n\n  .label {\n    font-family: ${options2.fontFamily};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n\n  .edge-pattern-dashed {\n    stroke-dasharray: 8,8;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon\n  {\n    fill: ${options2.mainBkg};\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .relationshipLine {\n    stroke: ${options2.lineColor};\n    stroke-width: 1;\n    fill: none;\n  }\n\n  .marker {\n    fill: none !important;\n    stroke: ${options2.lineColor} !important;\n    stroke-width: 1;\n  }\n`,"getStyles")}}),erDiagram_exports={};__export(erDiagram_exports,{diagram:()=>diagram3});var AbstractAstReflection,init_erDiagram2=__esm({"src/diagrams/er/erDiagram.ts"(){init_erDiagram(),init_erDb(),init_erRenderer_unified(),init_styles4(),diagram3={parser:erDiagram_default,get db(){return new ErDB},renderer:erRenderer_unified_exports,styles:styles_default4}}});function isAstNode(obj){return"object"==typeof obj&&null!==obj&&"string"==typeof obj.$type}function isReference(obj){return"object"==typeof obj&&null!==obj&&"string"==typeof obj.$refText}function isAstNodeDescription(obj){return"object"==typeof obj&&null!==obj&&"string"==typeof obj.name&&"string"==typeof obj.type&&"string"==typeof obj.path}function isLinkingError(obj){return"object"==typeof obj&&null!==obj&&isAstNode(obj.container)&&isReference(obj.reference)&&"string"==typeof obj.message}function isCompositeCstNode(node2){return"object"==typeof node2&&null!==node2&&Array.isArray(node2.content)}function isLeafCstNode(node2){return"object"==typeof node2&&null!==node2&&"object"==typeof node2.tokenType}function isRootCstNode(node2){return isCompositeCstNode(node2)&&"string"==typeof node2.fullText}var StreamImpl,EMPTY_STREAM,DONE_RESULT,TreeStreamImpl,Reduction,init_syntax_tree=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/syntax-tree.js"(){__name(isAstNode,"isAstNode"),__name(isReference,"isReference"),__name(isAstNodeDescription,"isAstNodeDescription"),__name(isLinkingError,"isLinkingError"),AbstractAstReflection=class{static{__name(this,"AbstractAstReflection")}constructor(){this.subtypes={},this.allSubtypes={}}isInstance(node2,type3){return isAstNode(node2)&&this.isSubtype(node2.$type,type3)}isSubtype(subtype,supertype){if(subtype===supertype)return!0;let nested=this.subtypes[subtype];nested||(nested=this.subtypes[subtype]={});const existing=nested[supertype];if(void 0!==existing)return existing;{const result=this.computeIsSubtype(subtype,supertype);return nested[supertype]=result,result}}getAllSubTypes(type3){const existing=this.allSubtypes[type3];if(existing)return existing;{const allTypes=this.getAllTypes(),types=[];for(const possibleSubType of allTypes)this.isSubtype(possibleSubType,type3)&&types.push(possibleSubType);return this.allSubtypes[type3]=types,types}}},__name(isCompositeCstNode,"isCompositeCstNode"),__name(isLeafCstNode,"isLeafCstNode"),__name(isRootCstNode,"isRootCstNode")}});function toString5(item){return"string"==typeof item?item:void 0===item?"undefined":"function"==typeof item.toString?item.toString():Object.prototype.toString.call(item)}function isIterable(obj){return!!obj&&"function"==typeof obj[Symbol.iterator]}function stream(...collections){if(1===collections.length){const collection4=collections[0];if(collection4 instanceof StreamImpl)return collection4;if(isIterable(collection4))return new StreamImpl(()=>collection4[Symbol.iterator](),iterator=>iterator.next());if("number"==typeof collection4.length)return new StreamImpl(()=>({index:0}),state3=>state3.index<collection4.length?{done:!1,value:collection4[state3.index++]}:DONE_RESULT)}return collections.length>1?new StreamImpl(()=>({collIndex:0,arrIndex:0}),state3=>{do{if(state3.iterator){const next3=state3.iterator.next();if(!next3.done)return next3;state3.iterator=void 0}if(state3.array){if(state3.arrIndex<state3.array.length)return{done:!1,value:state3.array[state3.arrIndex++]};state3.array=void 0,state3.arrIndex=0}if(state3.collIndex<collections.length){const collection4=collections[state3.collIndex++];isIterable(collection4)?state3.iterator=collection4[Symbol.iterator]():collection4&&"number"==typeof collection4.length&&(state3.array=collection4)}}while(state3.iterator||state3.array||state3.collIndex<collections.length);return DONE_RESULT}):EMPTY_STREAM}var RangeComparison,DefaultNameRegexp,init_stream=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/stream.js"(){StreamImpl=class _StreamImpl{static{__name(this,"StreamImpl")}constructor(startFn,nextFn){this.startFn=startFn,this.nextFn=nextFn}iterator(){const iterator={state:this.startFn(),next:__name(()=>this.nextFn(iterator.state),"next"),[Symbol.iterator]:()=>iterator};return iterator}[Symbol.iterator](){return this.iterator()}isEmpty(){const iterator=this.iterator();return Boolean(iterator.next().done)}count(){const iterator=this.iterator();let count2=0,next3=iterator.next();for(;!next3.done;)count2++,next3=iterator.next();return count2}toArray(){const result=[],iterator=this.iterator();let next3;do{next3=iterator.next(),void 0!==next3.value&&result.push(next3.value)}while(!next3.done);return result}toSet(){return new Set(this)}toMap(keyFn,valueFn){const entryStream=this.map(element3=>[keyFn?keyFn(element3):element3,valueFn?valueFn(element3):element3]);return new Map(entryStream)}toString(){return this.join()}concat(other){return new _StreamImpl(()=>({first:this.startFn(),firstDone:!1,iterator:other[Symbol.iterator]()}),state3=>{let result;if(!state3.firstDone){do{if(result=this.nextFn(state3.first),!result.done)return result}while(!result.done);state3.firstDone=!0}do{if(result=state3.iterator.next(),!result.done)return result}while(!result.done);return DONE_RESULT})}join(separator=","){const iterator=this.iterator();let result,value2="",addSeparator=!1;do{result=iterator.next(),result.done||(addSeparator&&(value2+=separator),value2+=toString5(result.value)),addSeparator=!0}while(!result.done);return value2}indexOf(searchElement,fromIndex=0){const iterator=this.iterator();let index=0,next3=iterator.next();for(;!next3.done;){if(index>=fromIndex&&next3.value===searchElement)return index;next3=iterator.next(),index++}return-1}every(predicate){const iterator=this.iterator();let next3=iterator.next();for(;!next3.done;){if(!predicate(next3.value))return!1;next3=iterator.next()}return!0}some(predicate){const iterator=this.iterator();let next3=iterator.next();for(;!next3.done;){if(predicate(next3.value))return!0;next3=iterator.next()}return!1}forEach(callbackfn){const iterator=this.iterator();let index=0,next3=iterator.next();for(;!next3.done;)callbackfn(next3.value,index),next3=iterator.next(),index++}map(callbackfn){return new _StreamImpl(this.startFn,state3=>{const{done:done,value:value2}=this.nextFn(state3);return done?DONE_RESULT:{done:!1,value:callbackfn(value2)}})}filter(predicate){return new _StreamImpl(this.startFn,state3=>{let result;do{if(result=this.nextFn(state3),!result.done&&predicate(result.value))return result}while(!result.done);return DONE_RESULT})}nonNullable(){return this.filter(e3=>null!=e3)}reduce(callbackfn,initialValue){const iterator=this.iterator();let previousValue=initialValue,next3=iterator.next();for(;!next3.done;)previousValue=void 0===previousValue?next3.value:callbackfn(previousValue,next3.value),next3=iterator.next();return previousValue}reduceRight(callbackfn,initialValue){return this.recursiveReduce(this.iterator(),callbackfn,initialValue)}recursiveReduce(iterator,callbackfn,initialValue){const next3=iterator.next();if(next3.done)return initialValue;const previousValue=this.recursiveReduce(iterator,callbackfn,initialValue);return void 0===previousValue?next3.value:callbackfn(previousValue,next3.value)}find(predicate){const iterator=this.iterator();let next3=iterator.next();for(;!next3.done;){if(predicate(next3.value))return next3.value;next3=iterator.next()}}findIndex(predicate){const iterator=this.iterator();let index=0,next3=iterator.next();for(;!next3.done;){if(predicate(next3.value))return index;next3=iterator.next(),index++}return-1}includes(searchElement){const iterator=this.iterator();let next3=iterator.next();for(;!next3.done;){if(next3.value===searchElement)return!0;next3=iterator.next()}return!1}flatMap(callbackfn){return new _StreamImpl(()=>({this:this.startFn()}),state3=>{do{if(state3.iterator){const next3=state3.iterator.next();if(!next3.done)return next3;state3.iterator=void 0}const{done:done,value:value2}=this.nextFn(state3.this);if(!done){const mapped=callbackfn(value2);if(!isIterable(mapped))return{done:!1,value:mapped};state3.iterator=mapped[Symbol.iterator]()}}while(state3.iterator);return DONE_RESULT})}flat(depth){if(void 0===depth&&(depth=1),depth<=0)return this;const stream2=depth>1?this.flat(depth-1):this;return new _StreamImpl(()=>({this:stream2.startFn()}),state3=>{do{if(state3.iterator){const next3=state3.iterator.next();if(!next3.done)return next3;state3.iterator=void 0}const{done:done,value:value2}=stream2.nextFn(state3.this);if(!done){if(!isIterable(value2))return{done:!1,value:value2};state3.iterator=value2[Symbol.iterator]()}}while(state3.iterator);return DONE_RESULT})}head(){const result=this.iterator().next();if(!result.done)return result.value}tail(skipCount=1){return new _StreamImpl(()=>{const state3=this.startFn();for(let i2=0;i2<skipCount;i2++){if(this.nextFn(state3).done)return state3}return state3},this.nextFn)}limit(maxSize){return new _StreamImpl(()=>({size:0,state:this.startFn()}),state3=>(state3.size++,state3.size>maxSize?DONE_RESULT:this.nextFn(state3.state)))}distinct(by){return new _StreamImpl(()=>({set:new Set,internalState:this.startFn()}),state3=>{let result;do{if(result=this.nextFn(state3.internalState),!result.done){const value2=by?by(result.value):result.value;if(!state3.set.has(value2))return state3.set.add(value2),result}}while(!result.done);return DONE_RESULT})}exclude(other,key){const otherKeySet=new Set;for(const item of other){const value2=key?key(item):item;otherKeySet.add(value2)}return this.filter(e3=>{const ownKey=key?key(e3):e3;return!otherKeySet.has(ownKey)})}},__name(toString5,"toString"),__name(isIterable,"isIterable"),EMPTY_STREAM=new StreamImpl(()=>{},()=>DONE_RESULT),DONE_RESULT=Object.freeze({done:!0,value:void 0}),__name(stream,"stream"),TreeStreamImpl=class extends StreamImpl{static{__name(this,"TreeStreamImpl")}constructor(root3,children2,options2){super(()=>({iterators:(null==options2?void 0:options2.includeRoot)?[[root3][Symbol.iterator]()]:[children2(root3)[Symbol.iterator]()],pruned:!1}),state3=>{for(state3.pruned&&(state3.iterators.pop(),state3.pruned=!1);state3.iterators.length>0;){const next3=state3.iterators[state3.iterators.length-1].next();if(!next3.done)return state3.iterators.push(children2(next3.value)[Symbol.iterator]()),next3;state3.iterators.pop()}return DONE_RESULT})}iterator(){const iterator={state:this.startFn(),next:__name(()=>this.nextFn(iterator.state),"next"),prune:__name(()=>{iterator.state.pruned=!0},"prune"),[Symbol.iterator]:()=>iterator};return iterator}},function(Reduction2){function sum2(stream2){return stream2.reduce((a2,b3)=>a2+b3,0)}function product(stream2){return stream2.reduce((a2,b3)=>a2*b3,0)}function min9(stream2){return stream2.reduce((a2,b3)=>Math.min(a2,b3))}function max10(stream2){return stream2.reduce((a2,b3)=>Math.max(a2,b3))}__name(sum2,"sum"),Reduction2.sum=sum2,__name(product,"product"),Reduction2.product=product,__name(min9,"min"),Reduction2.min=min9,__name(max10,"max"),Reduction2.max=max10}(Reduction||(Reduction={}))}}),cst_utils_exports={};function streamCst(node2){return new TreeStreamImpl(node2,element3=>isCompositeCstNode(element3)?element3.content:[],{includeRoot:!0})}function flattenCst(node2){return streamCst(node2).filter(isLeafCstNode)}function isChildNode(child,parent4){for(;child.container;)if((child=child.container)===parent4)return!0;return!1}function tokenToRange(token2){return{start:{character:token2.startColumn-1,line:token2.startLine-1},end:{character:token2.endColumn,line:token2.endLine-1}}}function toDocumentSegment(node2){if(!node2)return;const{offset:offset,end:end2,range:range3}=node2;return{range:range3,offset:offset,end:end2,length:end2-offset}}function compareRange(range3,to){if(range3.end.line<to.start.line||range3.end.line===to.start.line&&range3.end.character<=to.start.character)return RangeComparison.Before;if(range3.start.line>to.end.line||range3.start.line===to.end.line&&range3.start.character>=to.end.character)return RangeComparison.After;const startInside=range3.start.line>to.start.line||range3.start.line===to.start.line&&range3.start.character>=to.start.character,endInside=range3.end.line<to.end.line||range3.end.line===to.end.line&&range3.end.character<=to.end.character;return startInside&&endInside?RangeComparison.Inside:startInside?RangeComparison.OverlapBack:endInside?RangeComparison.OverlapFront:RangeComparison.Outside}function inRange(range3,to){return compareRange(range3,to)>RangeComparison.After}function findDeclarationNodeAtOffset(cstNode,offset,nameRegexp=DefaultNameRegexp){if(cstNode){if(offset>0){const localOffset=offset-cstNode.offset,textAtOffset=cstNode.text.charAt(localOffset);nameRegexp.test(textAtOffset)||offset--}return findLeafNodeAtOffset(cstNode,offset)}}function findCommentNode(cstNode,commentNames){if(cstNode){const previous=getPreviousNode(cstNode,!0);if(previous&&isCommentNode(previous,commentNames))return previous;if(isRootCstNode(cstNode)){for(let i2=cstNode.content.findIndex(e3=>!e3.hidden)-1;i2>=0;i2--){const child=cstNode.content[i2];if(isCommentNode(child,commentNames))return child}}}}function isCommentNode(cstNode,commentNames){return isLeafCstNode(cstNode)&&commentNames.includes(cstNode.tokenType.name)}function findLeafNodeAtOffset(node2,offset){if(isLeafCstNode(node2))return node2;if(isCompositeCstNode(node2)){const searchResult=binarySearch(node2,offset,!1);if(searchResult)return findLeafNodeAtOffset(searchResult,offset)}}function findLeafNodeBeforeOffset(node2,offset){if(isLeafCstNode(node2))return node2;if(isCompositeCstNode(node2)){const searchResult=binarySearch(node2,offset,!0);if(searchResult)return findLeafNodeBeforeOffset(searchResult,offset)}}function binarySearch(node2,offset,closest){let closestNode,left3=0,right3=node2.content.length-1;for(;left3<=right3;){const middle=Math.floor((left3+right3)/2),middleNode=node2.content[middle];if(middleNode.offset<=offset&&middleNode.end>offset)return middleNode;middleNode.end<=offset?(closestNode=closest?middleNode:void 0,left3=middle+1):right3=middle-1}return closestNode}function getPreviousNode(node2,hidden=!0){for(;node2.container;){const parent4=node2.container;let index=parent4.content.indexOf(node2);for(;index>0;){index--;const previous=parent4.content[index];if(hidden||!previous.hidden)return previous}node2=parent4}}function getNextNode(node2,hidden=!0){for(;node2.container;){const parent4=node2.container;let index=parent4.content.indexOf(node2);const last3=parent4.content.length-1;for(;index<last3;){index++;const next3=parent4.content[index];if(hidden||!next3.hidden)return next3}node2=parent4}}function getStartlineNode(node2){if(0===node2.range.start.character)return node2;const line2=node2.range.start.line;let index,last3=node2;for(;node2.container;){const parent4=node2.container,selfIndex=null!=index?index:parent4.content.indexOf(node2);if(0===selfIndex?(node2=parent4,index=void 0):(index=selfIndex-1,node2=parent4.content[index]),node2.range.start.line!==line2)break;last3=node2}return last3}function getInteriorNodes(start3,end2){const commonParent=getCommonParent(start3,end2);return commonParent?commonParent.parent.content.slice(commonParent.a+1,commonParent.b):[]}function getCommonParent(a2,b3){const aParents=getParentChain(a2),bParents=getParentChain(b3);let current;for(let i2=0;i2<aParents.length&&i2<bParents.length;i2++){const aParent=aParents[i2],bParent=bParents[i2];if(aParent.parent!==bParent.parent)break;current={parent:aParent.parent,a:aParent.index,b:bParent.index}}return current}function getParentChain(node2){const chain=[];for(;node2.container;){const parent4=node2.container,index=parent4.content.indexOf(node2);chain.push({parent:parent4,index:index}),node2=parent4}return chain.reverse()}__export(cst_utils_exports,{DefaultNameRegexp:()=>DefaultNameRegexp,RangeComparison:()=>RangeComparison,compareRange:()=>compareRange,findCommentNode:()=>findCommentNode,findDeclarationNodeAtOffset:()=>findDeclarationNodeAtOffset,findLeafNodeAtOffset:()=>findLeafNodeAtOffset,findLeafNodeBeforeOffset:()=>findLeafNodeBeforeOffset,flattenCst:()=>flattenCst,getInteriorNodes:()=>getInteriorNodes,getNextNode:()=>getNextNode,getPreviousNode:()=>getPreviousNode,getStartlineNode:()=>getStartlineNode,inRange:()=>inRange,isChildNode:()=>isChildNode,isCommentNode:()=>isCommentNode,streamCst:()=>streamCst,toDocumentSegment:()=>toDocumentSegment,tokenToRange:()=>tokenToRange});var ErrorWithLocation,init_cst_utils=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/cst-utils.js"(){var RangeComparison2;init_syntax_tree(),init_stream(),__name(streamCst,"streamCst"),__name(flattenCst,"flattenCst"),__name(isChildNode,"isChildNode"),__name(tokenToRange,"tokenToRange"),__name(toDocumentSegment,"toDocumentSegment"),(RangeComparison2=RangeComparison||(RangeComparison={}))[RangeComparison2.Before=0]="Before",RangeComparison2[RangeComparison2.After=1]="After",RangeComparison2[RangeComparison2.OverlapFront=2]="OverlapFront",RangeComparison2[RangeComparison2.OverlapBack=3]="OverlapBack",RangeComparison2[RangeComparison2.Inside=4]="Inside",RangeComparison2[RangeComparison2.Outside=5]="Outside",__name(compareRange,"compareRange"),__name(inRange,"inRange"),DefaultNameRegexp=/^[\w\p{L}]$/u,__name(findDeclarationNodeAtOffset,"findDeclarationNodeAtOffset"),__name(findCommentNode,"findCommentNode"),__name(isCommentNode,"isCommentNode"),__name(findLeafNodeAtOffset,"findLeafNodeAtOffset"),__name(findLeafNodeBeforeOffset,"findLeafNodeBeforeOffset"),__name(binarySearch,"binarySearch"),__name(getPreviousNode,"getPreviousNode"),__name(getNextNode,"getNextNode"),__name(getStartlineNode,"getStartlineNode"),__name(getInteriorNodes,"getInteriorNodes"),__name(getCommonParent,"getCommonParent"),__name(getParentChain,"getParentChain")}});function assertUnreachable(_3){throw new Error("Error! The input value was not handled.")}var LangiumGrammarTerminals,AbstractRule,AbstractType,Condition,TypeDefinition,ValueLiteral,AbstractElement,ArrayLiteral,ArrayType,BooleanLiteral,Conjunction,Disjunction,Grammar,GrammarImport,InferredType,Interface,NamedArgument,Negation,NumberLiteral,Parameter,ParameterReference,ParserRule,ReferenceType,ReturnType,SimpleType,StringLiteral,TerminalRule,Type3,TypeAttribute,UnionType,Action,Alternatives,Assignment,CharacterRange,CrossReference,EndOfFile,Group,Keyword2,NegatedToken,RegexToken,RuleCall,TerminalAlternatives,TerminalGroup,TerminalRuleCall,UnorderedGroup,UntilToken,Wildcard,LangiumGrammarAstReflection,reflection,init_errors2=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/errors.js"(){ErrorWithLocation=class extends Error{static{__name(this,"ErrorWithLocation")}constructor(node2,message){super(node2?`${message} at ${node2.range.start.line}:${node2.range.start.character}`:message)}},__name(assertUnreachable,"assertUnreachable")}}),ast_exports={};function isAbstractRule(item){return reflection.isInstance(item,AbstractRule)}function isAbstractType(item){return reflection.isInstance(item,AbstractType)}function isCondition(item){return reflection.isInstance(item,Condition)}function isFeatureName(item){return isPrimitiveType(item)||"current"===item||"entry"===item||"extends"===item||"false"===item||"fragment"===item||"grammar"===item||"hidden"===item||"import"===item||"interface"===item||"returns"===item||"terminal"===item||"true"===item||"type"===item||"infer"===item||"infers"===item||"with"===item||"string"==typeof item&&/\^?[_a-zA-Z][\w_]*/.test(item)}function isPrimitiveType(item){return"string"===item||"number"===item||"boolean"===item||"Date"===item||"bigint"===item}function isTypeDefinition(item){return reflection.isInstance(item,TypeDefinition)}function isValueLiteral(item){return reflection.isInstance(item,ValueLiteral)}function isAbstractElement(item){return reflection.isInstance(item,AbstractElement)}function isArrayLiteral(item){return reflection.isInstance(item,ArrayLiteral)}function isArrayType(item){return reflection.isInstance(item,ArrayType)}function isBooleanLiteral(item){return reflection.isInstance(item,BooleanLiteral)}function isConjunction(item){return reflection.isInstance(item,Conjunction)}function isDisjunction(item){return reflection.isInstance(item,Disjunction)}function isGrammar(item){return reflection.isInstance(item,Grammar)}function isGrammarImport(item){return reflection.isInstance(item,GrammarImport)}function isInferredType(item){return reflection.isInstance(item,InferredType)}function isInterface(item){return reflection.isInstance(item,Interface)}function isNamedArgument(item){return reflection.isInstance(item,NamedArgument)}function isNegation(item){return reflection.isInstance(item,Negation)}function isNumberLiteral(item){return reflection.isInstance(item,NumberLiteral)}function isParameter(item){return reflection.isInstance(item,Parameter)}function isParameterReference(item){return reflection.isInstance(item,ParameterReference)}function isParserRule(item){return reflection.isInstance(item,ParserRule)}function isReferenceType(item){return reflection.isInstance(item,ReferenceType)}function isReturnType(item){return reflection.isInstance(item,ReturnType)}function isSimpleType(item){return reflection.isInstance(item,SimpleType)}function isStringLiteral(item){return reflection.isInstance(item,StringLiteral)}function isTerminalRule(item){return reflection.isInstance(item,TerminalRule)}function isType(item){return reflection.isInstance(item,Type3)}function isTypeAttribute(item){return reflection.isInstance(item,TypeAttribute)}function isUnionType(item){return reflection.isInstance(item,UnionType)}function isAction(item){return reflection.isInstance(item,Action)}function isAlternatives(item){return reflection.isInstance(item,Alternatives)}function isAssignment(item){return reflection.isInstance(item,Assignment)}function isCharacterRange(item){return reflection.isInstance(item,CharacterRange)}function isCrossReference(item){return reflection.isInstance(item,CrossReference)}function isEndOfFile(item){return reflection.isInstance(item,EndOfFile)}function isGroup(item){return reflection.isInstance(item,Group)}function isKeyword(item){return reflection.isInstance(item,Keyword2)}function isNegatedToken(item){return reflection.isInstance(item,NegatedToken)}function isRegexToken(item){return reflection.isInstance(item,RegexToken)}function isRuleCall(item){return reflection.isInstance(item,RuleCall)}function isTerminalAlternatives(item){return reflection.isInstance(item,TerminalAlternatives)}function isTerminalGroup(item){return reflection.isInstance(item,TerminalGroup)}function isTerminalRuleCall(item){return reflection.isInstance(item,TerminalRuleCall)}function isUnorderedGroup(item){return reflection.isInstance(item,UnorderedGroup)}function isUntilToken(item){return reflection.isInstance(item,UntilToken)}function isWildcard(item){return reflection.isInstance(item,Wildcard)}__export(ast_exports,{AbstractElement:()=>AbstractElement,AbstractRule:()=>AbstractRule,AbstractType:()=>AbstractType,Action:()=>Action,Alternatives:()=>Alternatives,ArrayLiteral:()=>ArrayLiteral,ArrayType:()=>ArrayType,Assignment:()=>Assignment,BooleanLiteral:()=>BooleanLiteral,CharacterRange:()=>CharacterRange,Condition:()=>Condition,Conjunction:()=>Conjunction,CrossReference:()=>CrossReference,Disjunction:()=>Disjunction,EndOfFile:()=>EndOfFile,Grammar:()=>Grammar,GrammarImport:()=>GrammarImport,Group:()=>Group,InferredType:()=>InferredType,Interface:()=>Interface,Keyword:()=>Keyword2,LangiumGrammarAstReflection:()=>LangiumGrammarAstReflection,LangiumGrammarTerminals:()=>LangiumGrammarTerminals,NamedArgument:()=>NamedArgument,NegatedToken:()=>NegatedToken,Negation:()=>Negation,NumberLiteral:()=>NumberLiteral,Parameter:()=>Parameter,ParameterReference:()=>ParameterReference,ParserRule:()=>ParserRule,ReferenceType:()=>ReferenceType,RegexToken:()=>RegexToken,ReturnType:()=>ReturnType,RuleCall:()=>RuleCall,SimpleType:()=>SimpleType,StringLiteral:()=>StringLiteral,TerminalAlternatives:()=>TerminalAlternatives,TerminalGroup:()=>TerminalGroup,TerminalRule:()=>TerminalRule,TerminalRuleCall:()=>TerminalRuleCall,Type:()=>Type3,TypeAttribute:()=>TypeAttribute,TypeDefinition:()=>TypeDefinition,UnionType:()=>UnionType,UnorderedGroup:()=>UnorderedGroup,UntilToken:()=>UntilToken,ValueLiteral:()=>ValueLiteral,Wildcard:()=>Wildcard,isAbstractElement:()=>isAbstractElement,isAbstractRule:()=>isAbstractRule,isAbstractType:()=>isAbstractType,isAction:()=>isAction,isAlternatives:()=>isAlternatives,isArrayLiteral:()=>isArrayLiteral,isArrayType:()=>isArrayType,isAssignment:()=>isAssignment,isBooleanLiteral:()=>isBooleanLiteral,isCharacterRange:()=>isCharacterRange,isCondition:()=>isCondition,isConjunction:()=>isConjunction,isCrossReference:()=>isCrossReference,isDisjunction:()=>isDisjunction,isEndOfFile:()=>isEndOfFile,isFeatureName:()=>isFeatureName,isGrammar:()=>isGrammar,isGrammarImport:()=>isGrammarImport,isGroup:()=>isGroup,isInferredType:()=>isInferredType,isInterface:()=>isInterface,isKeyword:()=>isKeyword,isNamedArgument:()=>isNamedArgument,isNegatedToken:()=>isNegatedToken,isNegation:()=>isNegation,isNumberLiteral:()=>isNumberLiteral,isParameter:()=>isParameter,isParameterReference:()=>isParameterReference,isParserRule:()=>isParserRule,isPrimitiveType:()=>isPrimitiveType,isReferenceType:()=>isReferenceType,isRegexToken:()=>isRegexToken,isReturnType:()=>isReturnType,isRuleCall:()=>isRuleCall,isSimpleType:()=>isSimpleType,isStringLiteral:()=>isStringLiteral,isTerminalAlternatives:()=>isTerminalAlternatives,isTerminalGroup:()=>isTerminalGroup,isTerminalRule:()=>isTerminalRule,isTerminalRuleCall:()=>isTerminalRuleCall,isType:()=>isType,isTypeAttribute:()=>isTypeAttribute,isTypeDefinition:()=>isTypeDefinition,isUnionType:()=>isUnionType,isUnorderedGroup:()=>isUnorderedGroup,isUntilToken:()=>isUntilToken,isValueLiteral:()=>isValueLiteral,isWildcard:()=>isWildcard,reflection:()=>reflection});var init_ast=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/languages/generated/ast.js"(){init_syntax_tree(),LangiumGrammarTerminals={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},AbstractRule="AbstractRule",__name(isAbstractRule,"isAbstractRule"),AbstractType="AbstractType",__name(isAbstractType,"isAbstractType"),Condition="Condition",__name(isCondition,"isCondition"),__name(isFeatureName,"isFeatureName"),__name(isPrimitiveType,"isPrimitiveType"),TypeDefinition="TypeDefinition",__name(isTypeDefinition,"isTypeDefinition"),ValueLiteral="ValueLiteral",__name(isValueLiteral,"isValueLiteral"),AbstractElement="AbstractElement",__name(isAbstractElement,"isAbstractElement"),ArrayLiteral="ArrayLiteral",__name(isArrayLiteral,"isArrayLiteral"),ArrayType="ArrayType",__name(isArrayType,"isArrayType"),BooleanLiteral="BooleanLiteral",__name(isBooleanLiteral,"isBooleanLiteral"),Conjunction="Conjunction",__name(isConjunction,"isConjunction"),Disjunction="Disjunction",__name(isDisjunction,"isDisjunction"),Grammar="Grammar",__name(isGrammar,"isGrammar"),GrammarImport="GrammarImport",__name(isGrammarImport,"isGrammarImport"),InferredType="InferredType",__name(isInferredType,"isInferredType"),Interface="Interface",__name(isInterface,"isInterface"),NamedArgument="NamedArgument",__name(isNamedArgument,"isNamedArgument"),Negation="Negation",__name(isNegation,"isNegation"),NumberLiteral="NumberLiteral",__name(isNumberLiteral,"isNumberLiteral"),Parameter="Parameter",__name(isParameter,"isParameter"),ParameterReference="ParameterReference",__name(isParameterReference,"isParameterReference"),ParserRule="ParserRule",__name(isParserRule,"isParserRule"),ReferenceType="ReferenceType",__name(isReferenceType,"isReferenceType"),ReturnType="ReturnType",__name(isReturnType,"isReturnType"),SimpleType="SimpleType",__name(isSimpleType,"isSimpleType"),StringLiteral="StringLiteral",__name(isStringLiteral,"isStringLiteral"),TerminalRule="TerminalRule",__name(isTerminalRule,"isTerminalRule"),Type3="Type",__name(isType,"isType"),TypeAttribute="TypeAttribute",__name(isTypeAttribute,"isTypeAttribute"),UnionType="UnionType",__name(isUnionType,"isUnionType"),Action="Action",__name(isAction,"isAction"),Alternatives="Alternatives",__name(isAlternatives,"isAlternatives"),Assignment="Assignment",__name(isAssignment,"isAssignment"),CharacterRange="CharacterRange",__name(isCharacterRange,"isCharacterRange"),CrossReference="CrossReference",__name(isCrossReference,"isCrossReference"),EndOfFile="EndOfFile",__name(isEndOfFile,"isEndOfFile"),Group="Group",__name(isGroup,"isGroup"),Keyword2="Keyword",__name(isKeyword,"isKeyword"),NegatedToken="NegatedToken",__name(isNegatedToken,"isNegatedToken"),RegexToken="RegexToken",__name(isRegexToken,"isRegexToken"),RuleCall="RuleCall",__name(isRuleCall,"isRuleCall"),TerminalAlternatives="TerminalAlternatives",__name(isTerminalAlternatives,"isTerminalAlternatives"),TerminalGroup="TerminalGroup",__name(isTerminalGroup,"isTerminalGroup"),TerminalRuleCall="TerminalRuleCall",__name(isTerminalRuleCall,"isTerminalRuleCall"),UnorderedGroup="UnorderedGroup",__name(isUnorderedGroup,"isUnorderedGroup"),UntilToken="UntilToken",__name(isUntilToken,"isUntilToken"),Wildcard="Wildcard",__name(isWildcard,"isWildcard"),LangiumGrammarAstReflection=class extends AbstractAstReflection{static{__name(this,"LangiumGrammarAstReflection")}getAllTypes(){return[AbstractElement,AbstractRule,AbstractType,Action,Alternatives,ArrayLiteral,ArrayType,Assignment,BooleanLiteral,CharacterRange,Condition,Conjunction,CrossReference,Disjunction,EndOfFile,Grammar,GrammarImport,Group,InferredType,Interface,Keyword2,NamedArgument,NegatedToken,Negation,NumberLiteral,Parameter,ParameterReference,ParserRule,ReferenceType,RegexToken,ReturnType,RuleCall,SimpleType,StringLiteral,TerminalAlternatives,TerminalGroup,TerminalRule,TerminalRuleCall,Type3,TypeAttribute,TypeDefinition,UnionType,UnorderedGroup,UntilToken,ValueLiteral,Wildcard]}computeIsSubtype(subtype,supertype){switch(subtype){case Action:case Alternatives:case Assignment:case CharacterRange:case CrossReference:case EndOfFile:case Group:case Keyword2:case NegatedToken:case RegexToken:case RuleCall:case TerminalAlternatives:case TerminalGroup:case TerminalRuleCall:case UnorderedGroup:case UntilToken:case Wildcard:return this.isSubtype(AbstractElement,supertype);case ArrayLiteral:case NumberLiteral:case StringLiteral:return this.isSubtype(ValueLiteral,supertype);case ArrayType:case ReferenceType:case SimpleType:case UnionType:return this.isSubtype(TypeDefinition,supertype);case BooleanLiteral:return this.isSubtype(Condition,supertype)||this.isSubtype(ValueLiteral,supertype);case Conjunction:case Disjunction:case Negation:case ParameterReference:return this.isSubtype(Condition,supertype);case InferredType:case Interface:case Type3:return this.isSubtype(AbstractType,supertype);case ParserRule:return this.isSubtype(AbstractRule,supertype)||this.isSubtype(AbstractType,supertype);case TerminalRule:return this.isSubtype(AbstractRule,supertype);default:return!1}}getReferenceType(refInfo){const referenceId=`${refInfo.container.$type}:${refInfo.property}`;switch(referenceId){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return AbstractType;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return AbstractRule;case"Grammar:usedGrammars":return Grammar;case"NamedArgument:parameter":case"ParameterReference:parameter":return Parameter;case"TerminalRuleCall:rule":return TerminalRule;default:throw new Error(`${referenceId} is not a valid reference id.`)}}getTypeMetaData(type3){switch(type3){case AbstractElement:return{name:AbstractElement,properties:[{name:"cardinality"},{name:"lookahead"}]};case ArrayLiteral:return{name:ArrayLiteral,properties:[{name:"elements",defaultValue:[]}]};case ArrayType:return{name:ArrayType,properties:[{name:"elementType"}]};case BooleanLiteral:return{name:BooleanLiteral,properties:[{name:"true",defaultValue:!1}]};case Conjunction:return{name:Conjunction,properties:[{name:"left"},{name:"right"}]};case Disjunction:return{name:Disjunction,properties:[{name:"left"},{name:"right"}]};case Grammar:return{name:Grammar,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case GrammarImport:return{name:GrammarImport,properties:[{name:"path"}]};case InferredType:return{name:InferredType,properties:[{name:"name"}]};case Interface:return{name:Interface,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case NamedArgument:return{name:NamedArgument,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case Negation:return{name:Negation,properties:[{name:"value"}]};case NumberLiteral:return{name:NumberLiteral,properties:[{name:"value"}]};case Parameter:return{name:Parameter,properties:[{name:"name"}]};case ParameterReference:return{name:ParameterReference,properties:[{name:"parameter"}]};case ParserRule:return{name:ParserRule,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case ReferenceType:return{name:ReferenceType,properties:[{name:"referenceType"}]};case ReturnType:return{name:ReturnType,properties:[{name:"name"}]};case SimpleType:return{name:SimpleType,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case StringLiteral:return{name:StringLiteral,properties:[{name:"value"}]};case TerminalRule:return{name:TerminalRule,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case Type3:return{name:Type3,properties:[{name:"name"},{name:"type"}]};case TypeAttribute:return{name:TypeAttribute,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case UnionType:return{name:UnionType,properties:[{name:"types",defaultValue:[]}]};case Action:return{name:Action,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case Alternatives:return{name:Alternatives,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Assignment:return{name:Assignment,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case CharacterRange:return{name:CharacterRange,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case CrossReference:return{name:CrossReference,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case EndOfFile:return{name:EndOfFile,properties:[{name:"cardinality"},{name:"lookahead"}]};case Group:return{name:Group,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case Keyword2:return{name:Keyword2,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case NegatedToken:return{name:NegatedToken,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case RegexToken:return{name:RegexToken,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case RuleCall:return{name:RuleCall,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case TerminalAlternatives:return{name:TerminalAlternatives,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case TerminalGroup:return{name:TerminalGroup,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case TerminalRuleCall:return{name:TerminalRuleCall,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case UnorderedGroup:return{name:UnorderedGroup,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case UntilToken:return{name:UntilToken,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Wildcard:return{name:Wildcard,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:type3,properties:[]}}}},reflection=new LangiumGrammarAstReflection}}),ast_utils_exports={};function linkContentToContainer(node2){for(const[name,value2]of Object.entries(node2))name.startsWith("$")||(Array.isArray(value2)?value2.forEach((item,index)=>{isAstNode(item)&&(item.$container=node2,item.$containerProperty=name,item.$containerIndex=index)}):isAstNode(value2)&&(value2.$container=node2,value2.$containerProperty=name))}function getContainerOfType(node2,typePredicate){let item=node2;for(;item;){if(typePredicate(item))return item;item=item.$container}}function hasContainerOfType(node2,predicate){let item=node2;for(;item;){if(predicate(item))return!0;item=item.$container}return!1}function getDocument(node2){const result=findRootNode(node2).$document;if(!result)throw new Error("AST node has no document.");return result}function findRootNode(node2){for(;node2.$container;)node2=node2.$container;return node2}function streamContents(node2,options2){if(!node2)throw new Error("Node must be an AstNode.");const range3=null==options2?void 0:options2.range;return new StreamImpl(()=>({keys:Object.keys(node2),keyIndex:0,arrayIndex:0}),state3=>{for(;state3.keyIndex<state3.keys.length;){const property2=state3.keys[state3.keyIndex];if(!property2.startsWith("$")){const value2=node2[property2];if(isAstNode(value2)){if(state3.keyIndex++,isAstNodeInRange(value2,range3))return{done:!1,value:value2}}else if(Array.isArray(value2)){for(;state3.arrayIndex<value2.length;){const element3=value2[state3.arrayIndex++];if(isAstNode(element3)&&isAstNodeInRange(element3,range3))return{done:!1,value:element3}}state3.arrayIndex=0}}state3.keyIndex++}return DONE_RESULT})}function streamAllContents(root3,options2){if(!root3)throw new Error("Root node must be an AstNode.");return new TreeStreamImpl(root3,node2=>streamContents(node2,options2))}function streamAst(root3,options2){if(!root3)throw new Error("Root node must be an AstNode.");return(null==options2?void 0:options2.range)&&!isAstNodeInRange(root3,options2.range)?new TreeStreamImpl(root3,()=>[]):new TreeStreamImpl(root3,node2=>streamContents(node2,options2),{includeRoot:!0})}function isAstNodeInRange(astNode,range3){var _a;if(!range3)return!0;const nodeRange=null===(_a=astNode.$cstNode)||void 0===_a?void 0:_a.range;return!!nodeRange&&inRange(nodeRange,range3)}function streamReferences(node2){return new StreamImpl(()=>({keys:Object.keys(node2),keyIndex:0,arrayIndex:0}),state3=>{for(;state3.keyIndex<state3.keys.length;){const property2=state3.keys[state3.keyIndex];if(!property2.startsWith("$")){const value2=node2[property2];if(isReference(value2))return state3.keyIndex++,{done:!1,value:{reference:value2,container:node2,property:property2}};if(Array.isArray(value2)){for(;state3.arrayIndex<value2.length;){const index=state3.arrayIndex++,element3=value2[index];if(isReference(element3))return{done:!1,value:{reference:element3,container:node2,property:property2,index:index}}}state3.arrayIndex=0}}state3.keyIndex++}return DONE_RESULT})}function findLocalReferences(targetNode,lookup2=getDocument(targetNode).parseResult.value){const refs=[];return streamAst(lookup2).forEach(node2=>{streamReferences(node2).forEach(refInfo=>{refInfo.reference.ref===targetNode&&refs.push(refInfo.reference)})}),stream(refs)}function assignMandatoryProperties(reflection3,node2){const typeMetaData=reflection3.getTypeMetaData(node2.$type),genericNode=node2;for(const property2 of typeMetaData.properties)void 0!==property2.defaultValue&&void 0===genericNode[property2.name]&&(genericNode[property2.name]=copyDefaultValue(property2.defaultValue))}function copyDefaultValue(propertyType){return Array.isArray(propertyType)?[...propertyType.map(copyDefaultValue)]:propertyType}function copyAstNode(node2,buildReference){const copy5={$type:node2.$type};for(const[name,value2]of Object.entries(node2))if(!name.startsWith("$"))if(isAstNode(value2))copy5[name]=copyAstNode(value2,buildReference);else if(isReference(value2))copy5[name]=buildReference(copy5,name,value2.$refNode,value2.$refText);else if(Array.isArray(value2)){const copiedArray=[];for(const element3 of value2)isAstNode(element3)?copiedArray.push(copyAstNode(element3,buildReference)):isReference(element3)?copiedArray.push(buildReference(copy5,name,element3.$refNode,element3.$refText)):copiedArray.push(element3);copy5[name]=copiedArray}else copy5[name]=value2;return linkContentToContainer(copy5),copy5}__export(ast_utils_exports,{assignMandatoryProperties:()=>assignMandatoryProperties,copyAstNode:()=>copyAstNode,findLocalReferences:()=>findLocalReferences,findRootNode:()=>findRootNode,getContainerOfType:()=>getContainerOfType,getDocument:()=>getDocument,hasContainerOfType:()=>hasContainerOfType,linkContentToContainer:()=>linkContentToContainer,streamAllContents:()=>streamAllContents,streamAst:()=>streamAst,streamContents:()=>streamContents,streamReferences:()=>streamReferences});var init_ast_utils=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/ast-utils.js"(){init_syntax_tree(),init_stream(),init_cst_utils(),__name(linkContentToContainer,"linkContentToContainer"),__name(getContainerOfType,"getContainerOfType"),__name(hasContainerOfType,"hasContainerOfType"),__name(getDocument,"getDocument"),__name(findRootNode,"findRootNode"),__name(streamContents,"streamContents"),__name(streamAllContents,"streamAllContents"),__name(streamAst,"streamAst"),__name(isAstNodeInRange,"isAstNodeInRange"),__name(streamReferences,"streamReferences"),__name(findLocalReferences,"findLocalReferences"),__name(assignMandatoryProperties,"assignMandatoryProperties"),__name(copyDefaultValue,"copyDefaultValue"),__name(copyAstNode,"copyAstNode")}});function cc(char2){return char2.charCodeAt(0)}function insertToSet(item,set5){Array.isArray(item)?item.forEach(function(subItem){set5.push(subItem)}):set5.push(item)}function addFlag(flagObj,flagKey){if(!0===flagObj[flagKey])throw"duplicate flag "+flagKey;flagObj[flagKey];flagObj[flagKey]=!0}function ASSERT_EXISTS(obj){if(void 0===obj)throw Error("Internal Error - Should never get here!");return!0}function ASSERT_NEVER_REACH_HERE(){throw Error("Internal Error - Should never get here!")}function isCharacter(obj){return"Character"===obj.type}var digitsCharCodes,wordCharCodes,whitespaceCodes,hexDigitPattern,decimalPattern,decimalPatternNoZero,RegExpParser,BaseRegExpVisitor,NEWLINE_REGEXP,regexpParser,TerminalRegExpVisitor,visitor,whitespaceCharacters,init_utils3=__esm({"../../node_modules/.pnpm/@chevrotain+regexp-to-ast@11.0.3/node_modules/@chevrotain/regexp-to-ast/lib/src/utils.js"(){__name(cc,"cc"),__name(insertToSet,"insertToSet"),__name(addFlag,"addFlag"),__name(ASSERT_EXISTS,"ASSERT_EXISTS"),__name(ASSERT_NEVER_REACH_HERE,"ASSERT_NEVER_REACH_HERE"),__name(isCharacter,"isCharacter")}}),init_character_classes=__esm({"../../node_modules/.pnpm/@chevrotain+regexp-to-ast@11.0.3/node_modules/@chevrotain/regexp-to-ast/lib/src/character-classes.js"(){init_utils3(),digitsCharCodes=[];for(let i2=cc("0");i2<=cc("9");i2++)digitsCharCodes.push(i2);wordCharCodes=[cc("_")].concat(digitsCharCodes);for(let i2=cc("a");i2<=cc("z");i2++)wordCharCodes.push(i2);for(let i2=cc("A");i2<=cc("Z");i2++)wordCharCodes.push(i2);whitespaceCodes=[cc(" "),cc("\f"),cc("\n"),cc("\r"),cc("\t"),cc("\v"),cc("\t"),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc(" "),cc("\u2028"),cc("\u2029"),cc(" "),cc(" "),cc("　"),cc("\ufeff")]}}),init_regexp_parser=__esm({"../../node_modules/.pnpm/@chevrotain+regexp-to-ast@11.0.3/node_modules/@chevrotain/regexp-to-ast/lib/src/regexp-parser.js"(){init_utils3(),init_character_classes(),hexDigitPattern=/[0-9a-fA-F]/,decimalPattern=/[0-9]/,decimalPatternNoZero=/[1-9]/,RegExpParser=class{static{__name(this,"RegExpParser")}constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(newState2){this.idx=newState2.idx,this.input=newState2.input,this.groupIdx=newState2.groupIdx}pattern(input){this.idx=0,this.input=input,this.groupIdx=0,this.consumeChar("/");const value2=this.disjunction();this.consumeChar("/");const flags={type:"Flags",loc:{begin:this.idx,end:input.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":addFlag(flags,"global");break;case"i":addFlag(flags,"ignoreCase");break;case"m":addFlag(flags,"multiLine");break;case"u":addFlag(flags,"unicode");break;case"y":addFlag(flags,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:flags,value:value2,loc:this.loc(0)}}disjunction(){const alts=[],begin=this.idx;for(alts.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),alts.push(this.alternative());return{type:"Disjunction",value:alts,loc:this.loc(begin)}}alternative(){const terms=[],begin=this.idx;for(;this.isTerm();)terms.push(this.term());return{type:"Alternative",value:terms,loc:this.loc(begin)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const begin=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(begin)};case"$":return{type:"EndAnchor",loc:this.loc(begin)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(begin)};case"B":return{type:"NonWordBoundary",loc:this.loc(begin)}}throw Error("Invalid Assertion Escape");case"(":let type3;switch(this.consumeChar("?"),this.popChar()){case"=":type3="Lookahead";break;case"!":type3="NegativeLookahead"}ASSERT_EXISTS(type3);const disjunction=this.disjunction();return this.consumeChar(")"),{type:type3,value:disjunction,loc:this.loc(begin)}}return ASSERT_NEVER_REACH_HERE()}quantifier(isBacktracking=!1){let range3;const begin=this.idx;switch(this.popChar()){case"*":range3={atLeast:0,atMost:1/0};break;case"+":range3={atLeast:1,atMost:1/0};break;case"?":range3={atLeast:0,atMost:1};break;case"{":const atLeast=this.integerIncludingZero();switch(this.popChar()){case"}":range3={atLeast:atLeast,atMost:atLeast};break;case",":let atMost;this.isDigit()?(atMost=this.integerIncludingZero(),range3={atLeast:atLeast,atMost:atMost}):range3={atLeast:atLeast,atMost:1/0},this.consumeChar("}")}if(!0===isBacktracking&&void 0===range3)return;ASSERT_EXISTS(range3)}if(!0!==isBacktracking||void 0!==range3)return ASSERT_EXISTS(range3)?("?"===this.peekChar(0)?(this.consumeChar("?"),range3.greedy=!1):range3.greedy=!0,range3.type="Quantifier",range3.loc=this.loc(begin),range3):void 0}atom(){let atom2;const begin=this.idx;switch(this.peekChar()){case".":atom2=this.dotAll();break;case"\\":atom2=this.atomEscape();break;case"[":atom2=this.characterClass();break;case"(":atom2=this.group()}return void 0===atom2&&this.isPatternCharacter()&&(atom2=this.patternCharacter()),ASSERT_EXISTS(atom2)?(atom2.loc=this.loc(begin),this.isQuantifier()&&(atom2.quantifier=this.quantifier()),atom2):ASSERT_NEVER_REACH_HERE()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[cc("\n"),cc("\r"),cc("\u2028"),cc("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let set5,complement=!1;switch(this.popChar()){case"d":set5=digitsCharCodes;break;case"D":set5=digitsCharCodes,complement=!0;break;case"s":set5=whitespaceCodes;break;case"S":set5=whitespaceCodes,complement=!0;break;case"w":set5=wordCharCodes;break;case"W":set5=wordCharCodes,complement=!0}return ASSERT_EXISTS(set5)?{type:"Set",value:set5,complement:complement}:ASSERT_NEVER_REACH_HERE()}controlEscapeAtom(){let escapeCode;switch(this.popChar()){case"f":escapeCode=cc("\f");break;case"n":escapeCode=cc("\n");break;case"r":escapeCode=cc("\r");break;case"t":escapeCode=cc("\t");break;case"v":escapeCode=cc("\v")}return ASSERT_EXISTS(escapeCode)?{type:"Character",value:escapeCode}:ASSERT_NEVER_REACH_HERE()}controlLetterEscapeAtom(){this.consumeChar("c");const letter=this.popChar();if(!1===/[a-zA-Z]/.test(letter))throw Error("Invalid ");return{type:"Character",value:letter.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:cc("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:cc(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:cc(this.popChar())}}}characterClass(){const set5=[];let complement=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),complement=!0);this.isClassAtom();){const from2=this.classAtom();from2.type;if(isCharacter(from2)&&this.isRangeDash()){this.consumeChar("-");const to=this.classAtom();to.type;if(isCharacter(to)){if(to.value<from2.value)throw Error("Range out of order in character class");set5.push({from:from2.value,to:to.value})}else insertToSet(from2.value,set5),set5.push(cc("-")),insertToSet(to.value,set5)}else insertToSet(from2.value,set5)}return this.consumeChar("]"),{type:"Set",complement:complement,value:set5}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:cc("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let capturing=!0;if(this.consumeChar("("),"?"===this.peekChar(0))this.consumeChar("?"),this.consumeChar(":"),capturing=!1;else this.groupIdx++;const value2=this.disjunction();this.consumeChar(")");const groupAst={type:"Group",capturing:capturing,value:value2};return capturing&&(groupAst.idx=this.groupIdx),groupAst}positiveInteger(){let number7=this.popChar();if(!1===decimalPatternNoZero.test(number7))throw Error("Expecting a positive integer");for(;decimalPattern.test(this.peekChar(0));)number7+=this.popChar();return parseInt(number7,10)}integerIncludingZero(){let number7=this.popChar();if(!1===decimalPattern.test(number7))throw Error("Expecting an integer");for(;decimalPattern.test(this.peekChar(0));)number7+=this.popChar();return parseInt(number7,10)}patternCharacter(){const nextChar=this.popChar();switch(nextChar){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:cc(nextChar)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return decimalPattern.test(this.peekChar(0))}isClassAtom(howMuch=0){switch(this.peekChar(howMuch)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){const prevState=this.saveState();try{return void 0!==this.quantifier(!0)}catch(e3){return!1}finally{this.restoreState(prevState)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(howMany){let hexString="";for(let i2=0;i2<howMany;i2++){const hexChar=this.popChar();if(!1===hexDigitPattern.test(hexChar))throw Error("Expecting a HexDecimal digits");hexString+=hexChar}return{type:"Character",value:parseInt(hexString,16)}}peekChar(howMuch=0){return this.input[this.idx+howMuch]}popChar(){const nextChar=this.peekChar(0);return this.consumeChar(void 0),nextChar}consumeChar(char2){if(void 0!==char2&&this.input[this.idx]!==char2)throw Error("Expected: '"+char2+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(begin){return{begin:begin,end:this.idx}}}}}),init_base_regexp_visitor=__esm({"../../node_modules/.pnpm/@chevrotain+regexp-to-ast@11.0.3/node_modules/@chevrotain/regexp-to-ast/lib/src/base-regexp-visitor.js"(){BaseRegExpVisitor=class{static{__name(this,"BaseRegExpVisitor")}visitChildren(node2){for(const key in node2){const child=node2[key];node2.hasOwnProperty(key)&&(void 0!==child.type?this.visit(child):Array.isArray(child)&&child.forEach(subChild=>{this.visit(subChild)},this))}}visit(node2){switch(node2.type){case"Pattern":this.visitPattern(node2);break;case"Flags":this.visitFlags(node2);break;case"Disjunction":this.visitDisjunction(node2);break;case"Alternative":this.visitAlternative(node2);break;case"StartAnchor":this.visitStartAnchor(node2);break;case"EndAnchor":this.visitEndAnchor(node2);break;case"WordBoundary":this.visitWordBoundary(node2);break;case"NonWordBoundary":this.visitNonWordBoundary(node2);break;case"Lookahead":this.visitLookahead(node2);break;case"NegativeLookahead":this.visitNegativeLookahead(node2);break;case"Character":this.visitCharacter(node2);break;case"Set":this.visitSet(node2);break;case"Group":this.visitGroup(node2);break;case"GroupBackReference":this.visitGroupBackReference(node2);break;case"Quantifier":this.visitQuantifier(node2)}this.visitChildren(node2)}visitPattern(node2){}visitFlags(node2){}visitDisjunction(node2){}visitAlternative(node2){}visitStartAnchor(node2){}visitEndAnchor(node2){}visitWordBoundary(node2){}visitNonWordBoundary(node2){}visitLookahead(node2){}visitNegativeLookahead(node2){}visitCharacter(node2){}visitSet(node2){}visitGroup(node2){}visitGroupBackReference(node2){}visitQuantifier(node2){}}}}),init_api=__esm({"../../node_modules/.pnpm/@chevrotain+regexp-to-ast@11.0.3/node_modules/@chevrotain/regexp-to-ast/lib/src/api.js"(){init_regexp_parser(),init_base_regexp_visitor()}}),regexp_utils_exports={};function getTerminalParts(regexp){try{"string"!=typeof regexp&&(regexp=regexp.source),regexp=`/${regexp}/`;const pattern=regexpParser.pattern(regexp),parts=[];for(const alternative of pattern.value.value)visitor.reset(regexp),visitor.visit(alternative),parts.push({start:visitor.startRegexp,end:visitor.endRegex});return parts}catch(_a){return[]}}function isMultilineComment(regexp){try{return"string"==typeof regexp&&(regexp=new RegExp(regexp)),regexp=regexp.toString(),visitor.reset(regexp),visitor.visit(regexpParser.pattern(regexp)),visitor.multiline}catch(_a){return!1}}function isWhitespace2(value2){const regexp="string"==typeof value2?new RegExp(value2):value2;return whitespaceCharacters.some(ws=>regexp.test(ws))}function escapeRegExp(value2){return value2.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function getCaseInsensitivePattern(keyword){return Array.prototype.map.call(keyword,letter=>/\w/.test(letter)?`[${letter.toLowerCase()}${letter.toUpperCase()}]`:escapeRegExp(letter)).join("")}function partialMatches(regex2,input){const partial=partialRegExp(regex2),match2=input.match(partial);return!!match2&&match2[0].length>0}function partialRegExp(regex2){"string"==typeof regex2&&(regex2=new RegExp(regex2));const re3=regex2,source=regex2.source;let i2=0;function process2(){let tmp,result="";function appendRaw(nbChars){result+=source.substr(i2,nbChars),i2+=nbChars}function appendOptional(nbChars){result+="(?:"+source.substr(i2,nbChars)+"|$)",i2+=nbChars}for(__name(appendRaw,"appendRaw"),__name(appendOptional,"appendOptional");i2<source.length;)switch(source[i2]){case"\\":switch(source[i2+1]){case"c":appendOptional(3);break;case"x":appendOptional(4);break;case"u":re3.unicode?"{"===source[i2+2]?appendOptional(source.indexOf("}",i2)-i2+1):appendOptional(6):appendOptional(2);break;case"p":case"P":re3.unicode?appendOptional(source.indexOf("}",i2)-i2+1):appendOptional(2);break;case"k":appendOptional(source.indexOf(">",i2)-i2+1);break;default:appendOptional(2)}break;case"[":tmp=/\[(?:\\.|.)*?\]/g,tmp.lastIndex=i2,tmp=tmp.exec(source)||[],appendOptional(tmp[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":appendRaw(1);break;case"{":tmp=/\{\d+,?\d*\}/g,tmp.lastIndex=i2,tmp=tmp.exec(source),tmp?appendRaw(tmp[0].length):appendOptional(1);break;case"(":if("?"===source[i2+1])switch(source[i2+2]){case":":result+="(?:",i2+=3,result+=process2()+"|$)";break;case"=":result+="(?=",i2+=3,result+=process2()+")";break;case"!":tmp=i2,i2+=3,process2(),result+=source.substr(tmp,i2-tmp);break;case"<":switch(source[i2+3]){case"=":case"!":tmp=i2,i2+=4,process2(),result+=source.substr(tmp,i2-tmp);break;default:appendRaw(source.indexOf(">",i2)-i2+1),result+=process2()+"|$)"}}else appendRaw(1),result+=process2()+"|$)";break;case")":return++i2,result;default:appendOptional(1)}return result}return __name(process2,"process"),new RegExp(process2(),regex2.flags)}__export(regexp_utils_exports,{NEWLINE_REGEXP:()=>NEWLINE_REGEXP,escapeRegExp:()=>escapeRegExp,getCaseInsensitivePattern:()=>getCaseInsensitivePattern,getTerminalParts:()=>getTerminalParts,isMultilineComment:()=>isMultilineComment,isWhitespace:()=>isWhitespace2,partialMatches:()=>partialMatches,partialRegExp:()=>partialRegExp,whitespaceCharacters:()=>whitespaceCharacters});var WILDCARD,init_regexp_utils=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/regexp-utils.js"(){init_api(),NEWLINE_REGEXP=/\r?\n/gm,regexpParser=new RegExpParser,TerminalRegExpVisitor=class extends BaseRegExpVisitor{static{__name(this,"TerminalRegExpVisitor")}constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(regex2){this.multiline=!1,this.regex=regex2,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(node2){node2.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(node2){const char2=String.fromCharCode(node2.value);if(this.multiline||"\n"!==char2||(this.multiline=!0),node2.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const escapedChar=escapeRegExp(char2);this.endRegexpStack.push(escapedChar),this.isStarting&&(this.startRegexp+=escapedChar)}}visitSet(node2){if(!this.multiline){const set5=this.regex.substring(node2.loc.begin,node2.loc.end),regex2=new RegExp(set5);this.multiline=Boolean("\n".match(regex2))}if(node2.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const set5=this.regex.substring(node2.loc.begin,node2.loc.end);this.endRegexpStack.push(set5),this.isStarting&&(this.startRegexp+=set5)}}visitChildren(node2){if("Group"===node2.type){if(node2.quantifier)return}super.visitChildren(node2)}},visitor=new TerminalRegExpVisitor,__name(getTerminalParts,"getTerminalParts"),__name(isMultilineComment,"isMultilineComment"),whitespaceCharacters="\f\n\r\t\v              \u2028\u2029  　\ufeff".split(""),__name(isWhitespace2,"isWhitespace"),__name(escapeRegExp,"escapeRegExp"),__name(getCaseInsensitivePattern,"getCaseInsensitivePattern"),__name(partialMatches,"partialMatches"),__name(partialRegExp,"partialRegExp")}}),grammar_utils_exports={};function getEntryRule(grammar){return grammar.rules.find(e3=>isParserRule(e3)&&e3.entry)}function getHiddenRules(grammar){return grammar.rules.filter(e3=>isTerminalRule(e3)&&e3.hidden)}function getAllReachableRules(grammar,allTerminals){const ruleNames=new Set,entryRule=getEntryRule(grammar);if(!entryRule)return new Set(grammar.rules);const topMostRules=[entryRule].concat(getHiddenRules(grammar));for(const rule of topMostRules)ruleDfs(rule,ruleNames,allTerminals);const rules=new Set;for(const rule of grammar.rules)(ruleNames.has(rule.name)||isTerminalRule(rule)&&rule.hidden)&&rules.add(rule);return rules}function ruleDfs(rule,visitedSet,allTerminals){visitedSet.add(rule.name),streamAllContents(rule).forEach(node2=>{if(isRuleCall(node2)||allTerminals&&isTerminalRuleCall(node2)){const refRule=node2.rule.ref;refRule&&!visitedSet.has(refRule.name)&&ruleDfs(refRule,visitedSet,allTerminals)}})}function getCrossReferenceTerminal(crossRef){if(crossRef.terminal)return crossRef.terminal;if(crossRef.type.ref){const nameAssigment=findNameAssignment(crossRef.type.ref);return null==nameAssigment?void 0:nameAssigment.terminal}}function isCommentTerminal(terminalRule){return terminalRule.hidden&&!isWhitespace2(terminalRegex(terminalRule))}function findNodesForProperty(node2,property2){return node2&&property2?findNodesForPropertyInternal(node2,property2,node2.astNode,!0):[]}function findNodeForProperty(node2,property2,index){if(!node2||!property2)return;const nodes5=findNodesForPropertyInternal(node2,property2,node2.astNode,!0);return 0!==nodes5.length?nodes5[index=void 0!==index?Math.max(0,Math.min(index,nodes5.length-1)):0]:void 0}function findNodesForPropertyInternal(node2,property2,element3,first3){if(!first3){const nodeFeature=getContainerOfType(node2.grammarSource,isAssignment);if(nodeFeature&&nodeFeature.feature===property2)return[node2]}return isCompositeCstNode(node2)&&node2.astNode===element3?node2.content.flatMap(e3=>findNodesForPropertyInternal(e3,property2,element3,!1)):[]}function findNodesForKeyword(node2,keyword){return node2?findNodesForKeywordInternal(node2,keyword,null==node2?void 0:node2.astNode):[]}function findNodeForKeyword(node2,keyword,index){if(!node2)return;const nodes5=findNodesForKeywordInternal(node2,keyword,null==node2?void 0:node2.astNode);return 0!==nodes5.length?nodes5[index=void 0!==index?Math.max(0,Math.min(index,nodes5.length-1)):0]:void 0}function findNodesForKeywordInternal(node2,keyword,element3){if(node2.astNode!==element3)return[];if(isKeyword(node2.grammarSource)&&node2.grammarSource.value===keyword)return[node2];const treeIterator=streamCst(node2).iterator();let result;const keywordNodes=[];do{if(result=treeIterator.next(),!result.done){const childNode=result.value;childNode.astNode===element3?isKeyword(childNode.grammarSource)&&childNode.grammarSource.value===keyword&&keywordNodes.push(childNode):treeIterator.prune()}}while(!result.done);return keywordNodes}function findAssignment(cstNode){var _a;const astNode=cstNode.astNode;for(;astNode===(null===(_a=cstNode.container)||void 0===_a?void 0:_a.astNode);){const assignment=getContainerOfType(cstNode.grammarSource,isAssignment);if(assignment)return assignment;cstNode=cstNode.container}}function findNameAssignment(type3){let startNode=type3;return isInferredType(startNode)&&(isAction(startNode.$container)?startNode=startNode.$container.$container:isParserRule(startNode.$container)?startNode=startNode.$container:assertUnreachable(startNode.$container)),findNameAssignmentInternal(type3,startNode,new Map)}function findNameAssignmentInternal(type3,startNode,cache3){var _a;function go(node2,refType){let childAssignment;return getContainerOfType(node2,isAssignment)||(childAssignment=findNameAssignmentInternal(refType,refType,cache3)),cache3.set(type3,childAssignment),childAssignment}if(__name(go,"go"),cache3.has(type3))return cache3.get(type3);cache3.set(type3,void 0);for(const node2 of streamAllContents(startNode)){if(isAssignment(node2)&&"name"===node2.feature.toLowerCase())return cache3.set(type3,node2),node2;if(isRuleCall(node2)&&isParserRule(node2.rule.ref))return go(node2,node2.rule.ref);if(isSimpleType(node2)&&(null===(_a=node2.typeRef)||void 0===_a?void 0:_a.ref))return go(node2,node2.typeRef.ref)}}function getActionAtElement(element3){const parent4=element3.$container;if(isGroup(parent4)){const elements2=parent4.elements;for(let i2=elements2.indexOf(element3)-1;i2>=0;i2--){const item=elements2[i2];if(isAction(item))return item;{const action=streamAllContents(elements2[i2]).find(isAction);if(action)return action}}}return isAbstractElement(parent4)?getActionAtElement(parent4):void 0}function isOptionalCardinality(cardinality,element3){return"?"===cardinality||"*"===cardinality||isGroup(element3)&&Boolean(element3.guardCondition)}function isArrayCardinality(cardinality){return"*"===cardinality||"+"===cardinality}function isArrayOperator(operator){return"+="===operator}function isDataTypeRule(rule){return isDataTypeRuleInternal(rule,new Set)}function isDataTypeRuleInternal(rule,visited){if(visited.has(rule))return!0;visited.add(rule);for(const node2 of streamAllContents(rule))if(isRuleCall(node2)){if(!node2.rule.ref)return!1;if(isParserRule(node2.rule.ref)&&!isDataTypeRuleInternal(node2.rule.ref,visited))return!1}else{if(isAssignment(node2))return!1;if(isAction(node2))return!1}return Boolean(rule.definition)}function isDataType(type3){return isDataTypeInternal(type3.type,new Set)}function isDataTypeInternal(type3,visited){if(visited.has(type3))return!0;if(visited.add(type3),isArrayType(type3))return!1;if(isReferenceType(type3))return!1;if(isUnionType(type3))return type3.types.every(e3=>isDataTypeInternal(e3,visited));if(isSimpleType(type3)){if(void 0!==type3.primitiveType)return!0;if(void 0!==type3.stringType)return!0;if(void 0!==type3.typeRef){const ref=type3.typeRef.ref;return!!isType(ref)&&isDataTypeInternal(ref.type,visited)}return!1}return!1}function getExplicitRuleType(rule){if(rule.inferredType)return rule.inferredType.name;if(rule.dataType)return rule.dataType;if(rule.returnType){const refType=rule.returnType.ref;if(refType){if(isParserRule(refType))return refType.name;if(isInterface(refType)||isType(refType))return refType.name}}}function getTypeName(type3){var _a;if(isParserRule(type3))return isDataTypeRule(type3)?type3.name:null!==(_a=getExplicitRuleType(type3))&&void 0!==_a?_a:type3.name;if(isInterface(type3)||isType(type3)||isReturnType(type3))return type3.name;if(isAction(type3)){const actionType=getActionType(type3);if(actionType)return actionType}else if(isInferredType(type3))return type3.name;throw new Error("Cannot get name of Unknown Type")}function getActionType(action){var _a;return action.inferredType?action.inferredType.name:(null===(_a=action.type)||void 0===_a?void 0:_a.ref)?getTypeName(action.type.ref):void 0}function getRuleTypeName(rule){var _a,_b,_c;return isTerminalRule(rule)?null!==(_b=null===(_a=rule.type)||void 0===_a?void 0:_a.name)&&void 0!==_b?_b:"string":isDataTypeRule(rule)?rule.name:null!==(_c=getExplicitRuleType(rule))&&void 0!==_c?_c:rule.name}function getRuleType(rule){var _a,_b,_c;return isTerminalRule(rule)?null!==(_b=null===(_a=rule.type)||void 0===_a?void 0:_a.name)&&void 0!==_b?_b:"string":null!==(_c=getExplicitRuleType(rule))&&void 0!==_c?_c:rule.name}function terminalRegex(terminalRule){const flags={s:!1,i:!1,u:!1},source=abstractElementToRegex(terminalRule.definition,flags),flagText=Object.entries(flags).filter(([,value2])=>value2).map(([name])=>name).join("");return new RegExp(source,flagText)}function abstractElementToRegex(element3,flags){if(isTerminalAlternatives(element3))return terminalAlternativesToRegex(element3);if(isTerminalGroup(element3))return terminalGroupToRegex(element3);if(isCharacterRange(element3))return characterRangeToRegex(element3);if(isTerminalRuleCall(element3)){const rule=element3.rule.ref;if(!rule)throw new Error("Missing rule reference.");return withCardinality(abstractElementToRegex(rule.definition),{cardinality:element3.cardinality,lookahead:element3.lookahead})}if(isNegatedToken(element3))return negateTokenToRegex(element3);if(isUntilToken(element3))return untilTokenToRegex(element3);if(isRegexToken(element3)){const lastSlash=element3.regex.lastIndexOf("/"),source=element3.regex.substring(1,lastSlash),regexFlags=element3.regex.substring(lastSlash+1);return flags&&(flags.i=regexFlags.includes("i"),flags.s=regexFlags.includes("s"),flags.u=regexFlags.includes("u")),withCardinality(source,{cardinality:element3.cardinality,lookahead:element3.lookahead,wrap:!1})}if(isWildcard(element3))return withCardinality(WILDCARD,{cardinality:element3.cardinality,lookahead:element3.lookahead});throw new Error(`Invalid terminal element: ${null==element3?void 0:element3.$type}`)}function terminalAlternativesToRegex(alternatives){return withCardinality(alternatives.elements.map(e3=>abstractElementToRegex(e3)).join("|"),{cardinality:alternatives.cardinality,lookahead:alternatives.lookahead})}function terminalGroupToRegex(group2){return withCardinality(group2.elements.map(e3=>abstractElementToRegex(e3)).join(""),{cardinality:group2.cardinality,lookahead:group2.lookahead})}function untilTokenToRegex(until){return withCardinality(`${WILDCARD}*?${abstractElementToRegex(until.terminal)}`,{cardinality:until.cardinality,lookahead:until.lookahead})}function negateTokenToRegex(negate2){return withCardinality(`(?!${abstractElementToRegex(negate2.terminal)})${WILDCARD}*?`,{cardinality:negate2.cardinality,lookahead:negate2.lookahead})}function characterRangeToRegex(range3){return range3.right?withCardinality(`[${keywordToRegex(range3.left)}-${keywordToRegex(range3.right)}]`,{cardinality:range3.cardinality,lookahead:range3.lookahead,wrap:!1}):withCardinality(keywordToRegex(range3.left),{cardinality:range3.cardinality,lookahead:range3.lookahead,wrap:!1})}function keywordToRegex(keyword){return escapeRegExp(keyword.value)}function withCardinality(regex2,options2){var _a;return(!1!==options2.wrap||options2.lookahead)&&(regex2=`(${null!==(_a=options2.lookahead)&&void 0!==_a?_a:""}${regex2})`),options2.cardinality?`${regex2}${options2.cardinality}`:regex2}__export(grammar_utils_exports,{findAssignment:()=>findAssignment,findNameAssignment:()=>findNameAssignment,findNodeForKeyword:()=>findNodeForKeyword,findNodeForProperty:()=>findNodeForProperty,findNodesForKeyword:()=>findNodesForKeyword,findNodesForKeywordInternal:()=>findNodesForKeywordInternal,findNodesForProperty:()=>findNodesForProperty,getActionAtElement:()=>getActionAtElement,getActionType:()=>getActionType,getAllReachableRules:()=>getAllReachableRules,getCrossReferenceTerminal:()=>getCrossReferenceTerminal,getEntryRule:()=>getEntryRule,getExplicitRuleType:()=>getExplicitRuleType,getHiddenRules:()=>getHiddenRules,getRuleType:()=>getRuleType,getRuleTypeName:()=>getRuleTypeName,getTypeName:()=>getTypeName,isArrayCardinality:()=>isArrayCardinality,isArrayOperator:()=>isArrayOperator,isCommentTerminal:()=>isCommentTerminal,isDataType:()=>isDataType,isDataTypeRule:()=>isDataTypeRule,isOptionalCardinality:()=>isOptionalCardinality,terminalRegex:()=>terminalRegex});var init_grammar_utils=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/grammar-utils.js"(){init_errors2(),init_ast(),init_syntax_tree(),init_ast_utils(),init_cst_utils(),init_regexp_utils(),__name(getEntryRule,"getEntryRule"),__name(getHiddenRules,"getHiddenRules"),__name(getAllReachableRules,"getAllReachableRules"),__name(ruleDfs,"ruleDfs"),__name(getCrossReferenceTerminal,"getCrossReferenceTerminal"),__name(isCommentTerminal,"isCommentTerminal"),__name(findNodesForProperty,"findNodesForProperty"),__name(findNodeForProperty,"findNodeForProperty"),__name(findNodesForPropertyInternal,"findNodesForPropertyInternal"),__name(findNodesForKeyword,"findNodesForKeyword"),__name(findNodeForKeyword,"findNodeForKeyword"),__name(findNodesForKeywordInternal,"findNodesForKeywordInternal"),__name(findAssignment,"findAssignment"),__name(findNameAssignment,"findNameAssignment"),__name(findNameAssignmentInternal,"findNameAssignmentInternal"),__name(getActionAtElement,"getActionAtElement"),__name(isOptionalCardinality,"isOptionalCardinality"),__name(isArrayCardinality,"isArrayCardinality"),__name(isArrayOperator,"isArrayOperator"),__name(isDataTypeRule,"isDataTypeRule"),__name(isDataTypeRuleInternal,"isDataTypeRuleInternal"),__name(isDataType,"isDataType"),__name(isDataTypeInternal,"isDataTypeInternal"),__name(getExplicitRuleType,"getExplicitRuleType"),__name(getTypeName,"getTypeName"),__name(getActionType,"getActionType"),__name(getRuleTypeName,"getRuleTypeName"),__name(getRuleType,"getRuleType"),__name(terminalRegex,"terminalRegex"),WILDCARD=/[\s\S]/.source,__name(abstractElementToRegex,"abstractElementToRegex"),__name(terminalAlternativesToRegex,"terminalAlternativesToRegex"),__name(terminalGroupToRegex,"terminalGroupToRegex"),__name(untilTokenToRegex,"untilTokenToRegex"),__name(negateTokenToRegex,"negateTokenToRegex"),__name(characterRangeToRegex,"characterRangeToRegex"),__name(keywordToRegex,"keywordToRegex"),__name(withCardinality,"withCardinality")}});function createGrammarConfig(services){const rules=[],grammar=services.Grammar;for(const rule of grammar.rules)isTerminalRule(rule)&&isCommentTerminal(rule)&&isMultilineComment(terminalRegex(rule))&&rules.push(rule.name);return{multilineCommentRules:rules,nameRegexp:DefaultNameRegexp}}var init_grammar_config=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/languages/grammar-config.js"(){init_cst_utils(),init_grammar_utils(),init_regexp_utils(),init_ast(),__name(createGrammarConfig,"createGrammarConfig")}}),init_version=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/version.js"(){}});function PRINT_ERROR(msg){console&&console.error&&console.error(`Error: ${msg}`)}function PRINT_WARNING(msg){console&&console.warn&&console.warn(`Warning: ${msg}`)}var init_print=__esm({"../../node_modules/.pnpm/@chevrotain+utils@11.0.3/node_modules/@chevrotain/utils/lib/src/print.js"(){__name(PRINT_ERROR,"PRINT_ERROR"),__name(PRINT_WARNING,"PRINT_WARNING")}});function timer2(func){const start3=(new Date).getTime(),val=func();return{time:(new Date).getTime()-start3,value:val}}var init_timer2=__esm({"../../node_modules/.pnpm/@chevrotain+utils@11.0.3/node_modules/@chevrotain/utils/lib/src/timer.js"(){__name(timer2,"timer")}});function toFastProperties(toBecomeFast){function FakeConstructor(){}__name(FakeConstructor,"FakeConstructor"),FakeConstructor.prototype=toBecomeFast;const fakeInstance=new FakeConstructor;function fakeAccess(){return typeof fakeInstance.bar}return __name(fakeAccess,"fakeAccess"),fakeAccess(),fakeAccess(),toBecomeFast}var AbstractProduction,NonTerminal,Rule,Alternative,Option2,RepetitionMandatory,RepetitionMandatoryWithSeparator,Repetition,RepetitionWithSeparator,Alternation,Terminal,init_to_fast_properties=__esm({"../../node_modules/.pnpm/@chevrotain+utils@11.0.3/node_modules/@chevrotain/utils/lib/src/to-fast-properties.js"(){__name(toFastProperties,"toFastProperties")}}),init_api2=__esm({"../../node_modules/.pnpm/@chevrotain+utils@11.0.3/node_modules/@chevrotain/utils/lib/src/api.js"(){init_print(),init_timer2(),init_to_fast_properties()}});function tokenLabel(tokType){return hasTokenLabel(tokType)?tokType.LABEL:tokType.name}function hasTokenLabel(obj){return isString_default(obj.LABEL)&&""!==obj.LABEL}function serializeGrammar(topRules){return map_default(topRules,serializeProduction)}function serializeProduction(node2){function convertDefinition(definition){return map_default(definition,serializeProduction)}if(__name(convertDefinition,"convertDefinition"),node2 instanceof NonTerminal){const serializedNonTerminal={type:"NonTerminal",name:node2.nonTerminalName,idx:node2.idx};return isString_default(node2.label)&&(serializedNonTerminal.label=node2.label),serializedNonTerminal}if(node2 instanceof Alternative)return{type:"Alternative",definition:convertDefinition(node2.definition)};if(node2 instanceof Option2)return{type:"Option",idx:node2.idx,definition:convertDefinition(node2.definition)};if(node2 instanceof RepetitionMandatory)return{type:"RepetitionMandatory",idx:node2.idx,definition:convertDefinition(node2.definition)};if(node2 instanceof RepetitionMandatoryWithSeparator)return{type:"RepetitionMandatoryWithSeparator",idx:node2.idx,separator:serializeProduction(new Terminal({terminalType:node2.separator})),definition:convertDefinition(node2.definition)};if(node2 instanceof RepetitionWithSeparator)return{type:"RepetitionWithSeparator",idx:node2.idx,separator:serializeProduction(new Terminal({terminalType:node2.separator})),definition:convertDefinition(node2.definition)};if(node2 instanceof Repetition)return{type:"Repetition",idx:node2.idx,definition:convertDefinition(node2.definition)};if(node2 instanceof Alternation)return{type:"Alternation",idx:node2.idx,definition:convertDefinition(node2.definition)};if(node2 instanceof Terminal){const serializedTerminal={type:"Terminal",name:node2.terminalType.name,label:tokenLabel(node2.terminalType),idx:node2.idx};isString_default(node2.label)&&(serializedTerminal.terminalLabel=node2.label);const pattern=node2.terminalType.PATTERN;return node2.terminalType.PATTERN&&(serializedTerminal.pattern=isRegExp_default(pattern)?pattern.source:pattern),serializedTerminal}if(node2 instanceof Rule)return{type:"Rule",name:node2.name,orgText:node2.orgText,definition:convertDefinition(node2.definition)};throw Error("non exhaustive match")}var GAstVisitor,init_model=__esm({"../../node_modules/.pnpm/@chevrotain+gast@11.0.3/node_modules/@chevrotain/gast/lib/src/model.js"(){init_lodash(),__name(tokenLabel,"tokenLabel"),__name(hasTokenLabel,"hasTokenLabel"),AbstractProduction=class{static{__name(this,"AbstractProduction")}get definition(){return this._definition}set definition(value2){this._definition=value2}constructor(_definition){this._definition=_definition}accept(visitor2){visitor2.visit(this),forEach_default(this.definition,prod=>{prod.accept(visitor2)})}},NonTerminal=class extends AbstractProduction{static{__name(this,"NonTerminal")}constructor(options2){super([]),this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}set definition(definition){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(visitor2){visitor2.visit(this)}},Rule=class extends AbstractProduction{static{__name(this,"Rule")}constructor(options2){super(options2.definition),this.orgText="",assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},Alternative=class extends AbstractProduction{static{__name(this,"Alternative")}constructor(options2){super(options2.definition),this.ignoreAmbiguities=!1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},Option2=class extends AbstractProduction{static{__name(this,"Option")}constructor(options2){super(options2.definition),this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},RepetitionMandatory=class extends AbstractProduction{static{__name(this,"RepetitionMandatory")}constructor(options2){super(options2.definition),this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},RepetitionMandatoryWithSeparator=class extends AbstractProduction{static{__name(this,"RepetitionMandatoryWithSeparator")}constructor(options2){super(options2.definition),this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},Repetition=class extends AbstractProduction{static{__name(this,"Repetition")}constructor(options2){super(options2.definition),this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},RepetitionWithSeparator=class extends AbstractProduction{static{__name(this,"RepetitionWithSeparator")}constructor(options2){super(options2.definition),this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},Alternation=class extends AbstractProduction{static{__name(this,"Alternation")}get definition(){return this._definition}set definition(value2){this._definition=value2}constructor(options2){super(options2.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}},Terminal=class{static{__name(this,"Terminal")}constructor(options2){this.idx=1,assign_default(this,pickBy_default(options2,v3=>void 0!==v3))}accept(visitor2){visitor2.visit(this)}},__name(serializeGrammar,"serializeGrammar"),__name(serializeProduction,"serializeProduction")}}),init_visitor=__esm({"../../node_modules/.pnpm/@chevrotain+gast@11.0.3/node_modules/@chevrotain/gast/lib/src/visitor.js"(){init_model(),GAstVisitor=class{static{__name(this,"GAstVisitor")}visit(node2){const nodeAny=node2;switch(nodeAny.constructor){case NonTerminal:return this.visitNonTerminal(nodeAny);case Alternative:return this.visitAlternative(nodeAny);case Option2:return this.visitOption(nodeAny);case RepetitionMandatory:return this.visitRepetitionMandatory(nodeAny);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(nodeAny);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(nodeAny);case Repetition:return this.visitRepetition(nodeAny);case Alternation:return this.visitAlternation(nodeAny);case Terminal:return this.visitTerminal(nodeAny);case Rule:return this.visitRule(nodeAny);default:throw Error("non exhaustive match")}}visitNonTerminal(node2){}visitAlternative(node2){}visitOption(node2){}visitRepetition(node2){}visitRepetitionMandatory(node2){}visitRepetitionMandatoryWithSeparator(node2){}visitRepetitionWithSeparator(node2){}visitAlternation(node2){}visitTerminal(node2){}visitRule(node2){}}}});function isSequenceProd(prod){return prod instanceof Alternative||prod instanceof Option2||prod instanceof Repetition||prod instanceof RepetitionMandatory||prod instanceof RepetitionMandatoryWithSeparator||prod instanceof RepetitionWithSeparator||prod instanceof Terminal||prod instanceof Rule}function isOptionalProd(prod,alreadyVisited=[]){return!!(prod instanceof Option2||prod instanceof Repetition||prod instanceof RepetitionWithSeparator)||(prod instanceof Alternation?some_default(prod.definition,subProd=>isOptionalProd(subProd,alreadyVisited)):!(prod instanceof NonTerminal&&includes_default(alreadyVisited,prod))&&(prod instanceof AbstractProduction&&(prod instanceof NonTerminal&&alreadyVisited.push(prod),every_default(prod.definition,subProd=>isOptionalProd(subProd,alreadyVisited)))))}function isBranchingProd(prod){return prod instanceof Alternation}function getProductionDslName(prod){if(prod instanceof NonTerminal)return"SUBRULE";if(prod instanceof Option2)return"OPTION";if(prod instanceof Alternation)return"OR";if(prod instanceof RepetitionMandatory)return"AT_LEAST_ONE";if(prod instanceof RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(prod instanceof RepetitionWithSeparator)return"MANY_SEP";if(prod instanceof Repetition)return"MANY";if(prod instanceof Terminal)return"CONSUME";throw Error("non exhaustive match")}var RestWalker,init_helpers=__esm({"../../node_modules/.pnpm/@chevrotain+gast@11.0.3/node_modules/@chevrotain/gast/lib/src/helpers.js"(){init_lodash(),init_model(),__name(isSequenceProd,"isSequenceProd"),__name(isOptionalProd,"isOptionalProd"),__name(isBranchingProd,"isBranchingProd"),__name(getProductionDslName,"getProductionDslName")}}),init_api3=__esm({"../../node_modules/.pnpm/@chevrotain+gast@11.0.3/node_modules/@chevrotain/gast/lib/src/api.js"(){init_model(),init_visitor(),init_helpers()}});function restForRepetitionWithSeparator(repSepProd,currRest,prevRest){return[new Option2({definition:[new Terminal({terminalType:repSepProd.separator})].concat(repSepProd.definition)})].concat(currRest,prevRest)}var init_rest=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/rest.js"(){init_lodash(),init_api3(),RestWalker=class{static{__name(this,"RestWalker")}walk(prod,prevRest=[]){forEach_default(prod.definition,(subProd,index)=>{const currRest=drop_default(prod.definition,index+1);if(subProd instanceof NonTerminal)this.walkProdRef(subProd,currRest,prevRest);else if(subProd instanceof Terminal)this.walkTerminal(subProd,currRest,prevRest);else if(subProd instanceof Alternative)this.walkFlat(subProd,currRest,prevRest);else if(subProd instanceof Option2)this.walkOption(subProd,currRest,prevRest);else if(subProd instanceof RepetitionMandatory)this.walkAtLeastOne(subProd,currRest,prevRest);else if(subProd instanceof RepetitionMandatoryWithSeparator)this.walkAtLeastOneSep(subProd,currRest,prevRest);else if(subProd instanceof RepetitionWithSeparator)this.walkManySep(subProd,currRest,prevRest);else if(subProd instanceof Repetition)this.walkMany(subProd,currRest,prevRest);else{if(!(subProd instanceof Alternation))throw Error("non exhaustive match");this.walkOr(subProd,currRest,prevRest)}})}walkTerminal(terminal,currRest,prevRest){}walkProdRef(refProd,currRest,prevRest){}walkFlat(flatProd,currRest,prevRest){const fullOrRest=currRest.concat(prevRest);this.walk(flatProd,fullOrRest)}walkOption(optionProd,currRest,prevRest){const fullOrRest=currRest.concat(prevRest);this.walk(optionProd,fullOrRest)}walkAtLeastOne(atLeastOneProd,currRest,prevRest){const fullAtLeastOneRest=[new Option2({definition:atLeastOneProd.definition})].concat(currRest,prevRest);this.walk(atLeastOneProd,fullAtLeastOneRest)}walkAtLeastOneSep(atLeastOneSepProd,currRest,prevRest){const fullAtLeastOneSepRest=restForRepetitionWithSeparator(atLeastOneSepProd,currRest,prevRest);this.walk(atLeastOneSepProd,fullAtLeastOneSepRest)}walkMany(manyProd,currRest,prevRest){const fullManyRest=[new Option2({definition:manyProd.definition})].concat(currRest,prevRest);this.walk(manyProd,fullManyRest)}walkManySep(manySepProd,currRest,prevRest){const fullManySepRest=restForRepetitionWithSeparator(manySepProd,currRest,prevRest);this.walk(manySepProd,fullManySepRest)}walkOr(orProd,currRest,prevRest){const fullOrRest=currRest.concat(prevRest);forEach_default(orProd.definition,alt=>{const prodWrapper=new Alternative({definition:[alt]});this.walk(prodWrapper,fullOrRest)})}},__name(restForRepetitionWithSeparator,"restForRepetitionWithSeparator")}});function first2(prod){if(prod instanceof NonTerminal)return first2(prod.referencedRule);if(prod instanceof Terminal)return firstForTerminal(prod);if(isSequenceProd(prod))return firstForSequence(prod);if(isBranchingProd(prod))return firstForBranching(prod);throw Error("non exhaustive match")}function firstForSequence(prod){let firstSet=[];const seq2=prod.definition;let currSubProd,nextSubProdIdx=0,hasInnerProdsRemaining=seq2.length>nextSubProdIdx,isLastInnerProdOptional=!0;for(;hasInnerProdsRemaining&&isLastInnerProdOptional;)currSubProd=seq2[nextSubProdIdx],isLastInnerProdOptional=isOptionalProd(currSubProd),firstSet=firstSet.concat(first2(currSubProd)),nextSubProdIdx+=1,hasInnerProdsRemaining=seq2.length>nextSubProdIdx;return uniq_default(firstSet)}function firstForBranching(prod){const allAlternativesFirsts=map_default(prod.definition,innerProd=>first2(innerProd));return uniq_default(flatten_default(allAlternativesFirsts))}function firstForTerminal(terminal){return[terminal.terminalType]}var IN,ResyncFollowsWalker,init_first2=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/first.js"(){init_lodash(),init_api3(),__name(first2,"first"),__name(firstForSequence,"firstForSequence"),__name(firstForBranching,"firstForBranching"),__name(firstForTerminal,"firstForTerminal")}}),init_constants2=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/constants.js"(){IN="_~IN~_"}});function computeAllProdsFollows(topProductions){const reSyncFollows={};return forEach_default(topProductions,topProd=>{const currRefsFollow=new ResyncFollowsWalker(topProd).startWalking();assign_default(reSyncFollows,currRefsFollow)}),reSyncFollows}function buildBetweenProdsFollowPrefix(inner2,occurenceInParent){return inner2.name+occurenceInParent+IN}var regExpAstCache,regExpParser,init_follow=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/follow.js"(){init_rest(),init_first2(),init_lodash(),init_constants2(),init_api3(),ResyncFollowsWalker=class extends RestWalker{static{__name(this,"ResyncFollowsWalker")}constructor(topProd){super(),this.topProd=topProd,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(terminal,currRest,prevRest){}walkProdRef(refProd,currRest,prevRest){const followName=buildBetweenProdsFollowPrefix(refProd.referencedRule,refProd.idx)+this.topProd.name,fullRest=currRest.concat(prevRest),t_in_topProd_follows=first2(new Alternative({definition:fullRest}));this.follows[followName]=t_in_topProd_follows}},__name(computeAllProdsFollows,"computeAllProdsFollows"),__name(buildBetweenProdsFollowPrefix,"buildBetweenProdsFollowPrefix")}});function getRegExpAst(regExp){const regExpStr=regExp.toString();if(regExpAstCache.hasOwnProperty(regExpStr))return regExpAstCache[regExpStr];{const regExpAst=regExpParser.pattern(regExpStr);return regExpAstCache[regExpStr]=regExpAst,regExpAst}}function clearRegExpParserCache(){regExpAstCache={}}var complementErrorMessage,failedOptimizationPrefixMsg,CharCodeFinder,init_reg_exp_parser=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/reg_exp_parser.js"(){init_api(),regExpAstCache={},regExpParser=new RegExpParser,__name(getRegExpAst,"getRegExpAst"),__name(clearRegExpParserCache,"clearRegExpParserCache")}});function getOptimizedStartCodesIndices(regExp,ensureOptimizations=!1){try{const ast=getRegExpAst(regExp);return firstCharOptimizedIndices(ast.value,{},ast.flags.ignoreCase)}catch(e3){if(e3.message===complementErrorMessage)ensureOptimizations&&PRINT_WARNING(`${failedOptimizationPrefixMsg}\tUnable to optimize: < ${regExp.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let msgSuffix="";ensureOptimizations&&(msgSuffix="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),PRINT_ERROR(`${failedOptimizationPrefixMsg}\n\tFailed parsing: < ${regExp.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+msgSuffix)}}return[]}function firstCharOptimizedIndices(ast,result,ignoreCase){switch(ast.type){case"Disjunction":for(let i2=0;i2<ast.value.length;i2++)firstCharOptimizedIndices(ast.value[i2],result,ignoreCase);break;case"Alternative":const terms=ast.value;for(let i2=0;i2<terms.length;i2++){const term=terms[i2];switch(term.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const atom2=term;switch(atom2.type){case"Character":addOptimizedIdxToResult(atom2.value,result,ignoreCase);break;case"Set":if(!0===atom2.complement)throw Error(complementErrorMessage);forEach_default(atom2.value,code=>{if("number"==typeof code)addOptimizedIdxToResult(code,result,ignoreCase);else{const range3=code;if(!0===ignoreCase)for(let rangeCode=range3.from;rangeCode<=range3.to;rangeCode++)addOptimizedIdxToResult(rangeCode,result,ignoreCase);else{for(let rangeCode=range3.from;rangeCode<=range3.to&&rangeCode<minOptimizationVal;rangeCode++)addOptimizedIdxToResult(rangeCode,result,ignoreCase);if(range3.to>=minOptimizationVal){const minUnOptVal=range3.from>=minOptimizationVal?range3.from:minOptimizationVal,maxUnOptVal=range3.to,minOptIdx=charCodeToOptimizedIndex(minUnOptVal),maxOptIdx=charCodeToOptimizedIndex(maxUnOptVal);for(let currOptIdx=minOptIdx;currOptIdx<=maxOptIdx;currOptIdx++)result[currOptIdx]=currOptIdx}}}});break;case"Group":firstCharOptimizedIndices(atom2.value,result,ignoreCase);break;default:throw Error("Non Exhaustive Match")}const isOptionalQuantifier=void 0!==atom2.quantifier&&0===atom2.quantifier.atLeast;if("Group"===atom2.type&&!1===isWholeOptional(atom2)||"Group"!==atom2.type&&!1===isOptionalQuantifier)break}break;default:throw Error("non exhaustive match!")}return values_default(result)}function addOptimizedIdxToResult(code,result,ignoreCase){const optimizedCharIdx=charCodeToOptimizedIndex(code);result[optimizedCharIdx]=optimizedCharIdx,!0===ignoreCase&&handleIgnoreCase(code,result)}function handleIgnoreCase(code,result){const char2=String.fromCharCode(code),upperChar=char2.toUpperCase();if(upperChar!==char2){const optimizedCharIdx=charCodeToOptimizedIndex(upperChar.charCodeAt(0));result[optimizedCharIdx]=optimizedCharIdx}else{const lowerChar=char2.toLowerCase();if(lowerChar!==char2){const optimizedCharIdx=charCodeToOptimizedIndex(lowerChar.charCodeAt(0));result[optimizedCharIdx]=optimizedCharIdx}}}function findCode(setNode,targetCharCodes){return find_default2(setNode.value,codeOrRange=>{if("number"==typeof codeOrRange)return includes_default(targetCharCodes,codeOrRange);{const range3=codeOrRange;return void 0!==find_default2(targetCharCodes,targetCode=>range3.from<=targetCode&&targetCode<=range3.to)}})}function isWholeOptional(ast){const quantifier=ast.quantifier;return!(!quantifier||0!==quantifier.atLeast)||!!ast.value&&(isArray_default(ast.value)?every_default(ast.value,isWholeOptional):isWholeOptional(ast.value))}function canMatchCharCode(charCodes,pattern){if(pattern instanceof RegExp){const ast=getRegExpAst(pattern),charCodeFinder=new CharCodeFinder(charCodes);return charCodeFinder.visit(ast),charCodeFinder.found}return void 0!==find_default2(pattern,char2=>includes_default(charCodes,char2.charCodeAt(0)))}var PATTERN,DEFAULT_MODE,MODES,SUPPORT_STICKY,end_of_input,start_of_input,LineTerminatorOptimizedTester,minOptimizationVal,charCodeToOptimizedIdxMap,init_reg_exp=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/reg_exp.js"(){init_api(),init_lodash(),init_api2(),init_reg_exp_parser(),init_lexer(),complementErrorMessage="Complement Sets are not supported for first char optimization",failedOptimizationPrefixMsg='Unable to use "first char" lexer optimizations:\n',__name(getOptimizedStartCodesIndices,"getOptimizedStartCodesIndices"),__name(firstCharOptimizedIndices,"firstCharOptimizedIndices"),__name(addOptimizedIdxToResult,"addOptimizedIdxToResult"),__name(handleIgnoreCase,"handleIgnoreCase"),__name(findCode,"findCode"),__name(isWholeOptional,"isWholeOptional"),CharCodeFinder=class extends BaseRegExpVisitor{static{__name(this,"CharCodeFinder")}constructor(targetCharCodes){super(),this.targetCharCodes=targetCharCodes,this.found=!1}visitChildren(node2){if(!0!==this.found){switch(node2.type){case"Lookahead":return void this.visitLookahead(node2);case"NegativeLookahead":return void this.visitNegativeLookahead(node2)}super.visitChildren(node2)}}visitCharacter(node2){includes_default(this.targetCharCodes,node2.value)&&(this.found=!0)}visitSet(node2){node2.complement?void 0===findCode(node2,this.targetCharCodes)&&(this.found=!0):void 0!==findCode(node2,this.targetCharCodes)&&(this.found=!0)}},__name(canMatchCharCode,"canMatchCharCode")}});function analyzeTokenTypes(tokenTypes,options2){const tracer=(options2=defaults_default(options2,{useSticky:SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:__name((msg,action)=>action(),"tracer")})).tracer;let onlyRelevantTypes;tracer("initCharCodeToOptimizedIndexMap",()=>{initCharCodeToOptimizedIndexMap()}),tracer("Reject Lexer.NA",()=>{onlyRelevantTypes=reject_default(tokenTypes,currType=>currType[PATTERN]===Lexer2.NA)});let allTransformedPatterns,patternIdxToType,patternIdxToGroup,patternIdxToLongerAltIdxArr,patternIdxToPushMode,patternIdxToPopMode,patternIdxToCanLineTerminator,patternIdxToIsCustom,patternIdxToShort,emptyGroups,patternIdxToConfig,hasCustom=!1;tracer("Transform Patterns",()=>{hasCustom=!1,allTransformedPatterns=map_default(onlyRelevantTypes,currType=>{const currPattern=currType[PATTERN];if(isRegExp_default(currPattern)){const regExpSource=currPattern.source;return 1!==regExpSource.length||"^"===regExpSource||"$"===regExpSource||"."===regExpSource||currPattern.ignoreCase?2!==regExpSource.length||"\\"!==regExpSource[0]||includes_default(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],regExpSource[1])?options2.useSticky?addStickyFlag(currPattern):addStartOfInput(currPattern):regExpSource[1]:regExpSource}if(isFunction_default(currPattern))return hasCustom=!0,{exec:currPattern};if("object"==typeof currPattern)return hasCustom=!0,currPattern;if("string"==typeof currPattern){if(1===currPattern.length)return currPattern;{const escapedRegExpString=currPattern.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),wrappedRegExp=new RegExp(escapedRegExpString);return options2.useSticky?addStickyFlag(wrappedRegExp):addStartOfInput(wrappedRegExp)}}throw Error("non exhaustive match")})}),tracer("misc mapping",()=>{patternIdxToType=map_default(onlyRelevantTypes,currType=>currType.tokenTypeIdx),patternIdxToGroup=map_default(onlyRelevantTypes,clazz=>{const groupName=clazz.GROUP;if(groupName!==Lexer2.SKIPPED){if(isString_default(groupName))return groupName;if(isUndefined_default(groupName))return!1;throw Error("non exhaustive match")}}),patternIdxToLongerAltIdxArr=map_default(onlyRelevantTypes,clazz=>{const longerAltType=clazz.LONGER_ALT;if(longerAltType){return isArray_default(longerAltType)?map_default(longerAltType,type3=>indexOf_default(onlyRelevantTypes,type3)):[indexOf_default(onlyRelevantTypes,longerAltType)]}}),patternIdxToPushMode=map_default(onlyRelevantTypes,clazz=>clazz.PUSH_MODE),patternIdxToPopMode=map_default(onlyRelevantTypes,clazz=>has_default(clazz,"POP_MODE"))}),tracer("Line Terminator Handling",()=>{const lineTerminatorCharCodes=getCharCodes(options2.lineTerminatorCharacters);patternIdxToCanLineTerminator=map_default(onlyRelevantTypes,tokType=>!1),"onlyOffset"!==options2.positionTracking&&(patternIdxToCanLineTerminator=map_default(onlyRelevantTypes,tokType=>has_default(tokType,"LINE_BREAKS")?!!tokType.LINE_BREAKS:!1===checkLineBreaksIssues(tokType,lineTerminatorCharCodes)&&canMatchCharCode(lineTerminatorCharCodes,tokType.PATTERN)))}),tracer("Misc Mapping #2",()=>{patternIdxToIsCustom=map_default(onlyRelevantTypes,isCustomPattern),patternIdxToShort=map_default(allTransformedPatterns,isShortPattern),emptyGroups=reduce_default(onlyRelevantTypes,(acc,clazz)=>{const groupName=clazz.GROUP;return isString_default(groupName)&&groupName!==Lexer2.SKIPPED&&(acc[groupName]=[]),acc},{}),patternIdxToConfig=map_default(allTransformedPatterns,(x5,idx)=>({pattern:allTransformedPatterns[idx],longerAlt:patternIdxToLongerAltIdxArr[idx],canLineTerminator:patternIdxToCanLineTerminator[idx],isCustom:patternIdxToIsCustom[idx],short:patternIdxToShort[idx],group:patternIdxToGroup[idx],push:patternIdxToPushMode[idx],pop:patternIdxToPopMode[idx],tokenTypeIdx:patternIdxToType[idx],tokenType:onlyRelevantTypes[idx]}))});let canBeOptimized=!0,charCodeToPatternIdxToConfig=[];return options2.safeMode||tracer("First Char Optimization",()=>{charCodeToPatternIdxToConfig=reduce_default(onlyRelevantTypes,(result,currTokType,idx)=>{if("string"==typeof currTokType.PATTERN){const optimizedIdx=charCodeToOptimizedIndex(currTokType.PATTERN.charCodeAt(0));addToMapOfArrays(result,optimizedIdx,patternIdxToConfig[idx])}else if(isArray_default(currTokType.START_CHARS_HINT)){let lastOptimizedIdx;forEach_default(currTokType.START_CHARS_HINT,charOrInt=>{const currOptimizedIdx=charCodeToOptimizedIndex("string"==typeof charOrInt?charOrInt.charCodeAt(0):charOrInt);lastOptimizedIdx!==currOptimizedIdx&&(lastOptimizedIdx=currOptimizedIdx,addToMapOfArrays(result,currOptimizedIdx,patternIdxToConfig[idx]))})}else if(isRegExp_default(currTokType.PATTERN))if(currTokType.PATTERN.unicode)canBeOptimized=!1,options2.ensureOptimizations&&PRINT_ERROR(`${failedOptimizationPrefixMsg}\tUnable to analyze < ${currTokType.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const optimizedCodes=getOptimizedStartCodesIndices(currTokType.PATTERN,options2.ensureOptimizations);isEmpty_default(optimizedCodes)&&(canBeOptimized=!1),forEach_default(optimizedCodes,code=>{addToMapOfArrays(result,code,patternIdxToConfig[idx])})}else options2.ensureOptimizations&&PRINT_ERROR(`${failedOptimizationPrefixMsg}\tTokenType: <${currTokType.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),canBeOptimized=!1;return result},[])}),{emptyGroups:emptyGroups,patternIdxToConfig:patternIdxToConfig,charCodeToPatternIdxToConfig:charCodeToPatternIdxToConfig,hasCustom:hasCustom,canBeOptimized:canBeOptimized}}function validatePatterns(tokenTypes,validModesNames){let errors=[];const missingResult=findMissingPatterns(tokenTypes);errors=errors.concat(missingResult.errors);const invalidResult=findInvalidPatterns(missingResult.valid),validTokenTypes=invalidResult.valid;return errors=errors.concat(invalidResult.errors),errors=errors.concat(validateRegExpPattern(validTokenTypes)),errors=errors.concat(findInvalidGroupType(validTokenTypes)),errors=errors.concat(findModesThatDoNotExist(validTokenTypes,validModesNames)),errors=errors.concat(findUnreachablePatterns(validTokenTypes)),errors}function validateRegExpPattern(tokenTypes){let errors=[];const withRegExpPatterns=filter_default3(tokenTypes,currTokType=>isRegExp_default(currTokType[PATTERN]));return errors=errors.concat(findEndOfInputAnchor(withRegExpPatterns)),errors=errors.concat(findStartOfInputAnchor(withRegExpPatterns)),errors=errors.concat(findUnsupportedFlags(withRegExpPatterns)),errors=errors.concat(findDuplicatePatterns(withRegExpPatterns)),errors=errors.concat(findEmptyMatchRegExps(withRegExpPatterns)),errors}function findMissingPatterns(tokenTypes){const tokenTypesWithMissingPattern=filter_default3(tokenTypes,currType=>!has_default(currType,PATTERN));return{errors:map_default(tokenTypesWithMissingPattern,currType=>({message:"Token Type: ->"+currType.name+"<- missing static 'PATTERN' property",type:LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[currType]})),valid:difference_default(tokenTypes,tokenTypesWithMissingPattern)}}function findInvalidPatterns(tokenTypes){const tokenTypesWithInvalidPattern=filter_default3(tokenTypes,currType=>{const pattern=currType[PATTERN];return!(isRegExp_default(pattern)||isFunction_default(pattern)||has_default(pattern,"exec")||isString_default(pattern))});return{errors:map_default(tokenTypesWithInvalidPattern,currType=>({message:"Token Type: ->"+currType.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[currType]})),valid:difference_default(tokenTypes,tokenTypesWithInvalidPattern)}}function findEndOfInputAnchor(tokenTypes){class EndAnchorFinder extends BaseRegExpVisitor{static{__name(this,"EndAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitEndAnchor(node2){this.found=!0}}const invalidRegex=filter_default3(tokenTypes,currType=>{const pattern=currType.PATTERN;try{const regexpAst=getRegExpAst(pattern),endAnchorVisitor=new EndAnchorFinder;return endAnchorVisitor.visit(regexpAst),endAnchorVisitor.found}catch(e3){return end_of_input.test(pattern.source)}});return map_default(invalidRegex,currType=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+currType.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[currType]}))}function findEmptyMatchRegExps(tokenTypes){const matchesEmptyString=filter_default3(tokenTypes,currType=>currType.PATTERN.test(""));return map_default(matchesEmptyString,currType=>({message:"Token Type: ->"+currType.name+"<- static 'PATTERN' must not match an empty string",type:LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[currType]}))}function findStartOfInputAnchor(tokenTypes){class StartAnchorFinder extends BaseRegExpVisitor{static{__name(this,"StartAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitStartAnchor(node2){this.found=!0}}const invalidRegex=filter_default3(tokenTypes,currType=>{const pattern=currType.PATTERN;try{const regexpAst=getRegExpAst(pattern),startAnchorVisitor=new StartAnchorFinder;return startAnchorVisitor.visit(regexpAst),startAnchorVisitor.found}catch(e3){return start_of_input.test(pattern.source)}});return map_default(invalidRegex,currType=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+currType.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[currType]}))}function findUnsupportedFlags(tokenTypes){const invalidFlags=filter_default3(tokenTypes,currType=>{const pattern=currType[PATTERN];return pattern instanceof RegExp&&(pattern.multiline||pattern.global)});return map_default(invalidFlags,currType=>({message:"Token Type: ->"+currType.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[currType]}))}function findDuplicatePatterns(tokenTypes){const found=[];let identicalPatterns=map_default(tokenTypes,outerType=>reduce_default(tokenTypes,(result,innerType)=>(outerType.PATTERN.source!==innerType.PATTERN.source||includes_default(found,innerType)||innerType.PATTERN===Lexer2.NA||(found.push(innerType),result.push(innerType)),result),[]));identicalPatterns=compact_default(identicalPatterns);const duplicatePatterns=filter_default3(identicalPatterns,currIdenticalSet=>currIdenticalSet.length>1);return map_default(duplicatePatterns,setOfIdentical=>{const tokenTypeNames=map_default(setOfIdentical,currType=>currType.name);return{message:`The same RegExp pattern ->${head_default(setOfIdentical).PATTERN}<-has been used in all of the following Token Types: ${tokenTypeNames.join(", ")} <-`,type:LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:setOfIdentical}})}function findInvalidGroupType(tokenTypes){const invalidTypes=filter_default3(tokenTypes,clazz=>{if(!has_default(clazz,"GROUP"))return!1;const group2=clazz.GROUP;return group2!==Lexer2.SKIPPED&&group2!==Lexer2.NA&&!isString_default(group2)});return map_default(invalidTypes,currType=>({message:"Token Type: ->"+currType.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[currType]}))}function findModesThatDoNotExist(tokenTypes,validModes){const invalidModes=filter_default3(tokenTypes,clazz=>void 0!==clazz.PUSH_MODE&&!includes_default(validModes,clazz.PUSH_MODE));return map_default(invalidModes,tokType=>({message:`Token Type: ->${tokType.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${tokType.PUSH_MODE}<-which does not exist`,type:LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[tokType]}))}function findUnreachablePatterns(tokenTypes){const errors=[],canBeTested=reduce_default(tokenTypes,(result,tokType,idx)=>{const pattern=tokType.PATTERN;return pattern===Lexer2.NA||(isString_default(pattern)?result.push({str:pattern,idx:idx,tokenType:tokType}):isRegExp_default(pattern)&&noMetaChar(pattern)&&result.push({str:pattern.source,idx:idx,tokenType:tokType})),result},[]);return forEach_default(tokenTypes,(tokType,testIdx)=>{forEach_default(canBeTested,({str:str2,idx:idx,tokenType:tokenType})=>{if(testIdx<idx&&testTokenType(str2,tokType.PATTERN)){const msg=`Token: ->${tokenType.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${tokType.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;errors.push({message:msg,type:LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[tokType,tokenType]})}})}),errors}function testTokenType(str2,pattern){if(isRegExp_default(pattern)){const regExpArray=pattern.exec(str2);return null!==regExpArray&&0===regExpArray.index}if(isFunction_default(pattern))return pattern(str2,0,[],{});if(has_default(pattern,"exec"))return pattern.exec(str2,0,[],{});if("string"==typeof pattern)return pattern===str2;throw Error("non exhaustive match")}function noMetaChar(regExp){return void 0===find_default2([".","\\","[","]","|","^","$","(",")","?","*","+","{"],char2=>-1!==regExp.source.indexOf(char2))}function addStartOfInput(pattern){const flags=pattern.ignoreCase?"i":"";return new RegExp(`^(?:${pattern.source})`,flags)}function addStickyFlag(pattern){const flags=pattern.ignoreCase?"iy":"y";return new RegExp(`${pattern.source}`,flags)}function performRuntimeChecks(lexerDefinition,trackLines,lineTerminatorCharacters){const errors=[];return has_default(lexerDefinition,DEFAULT_MODE)||errors.push({message:"A MultiMode Lexer cannot be initialized without a <"+DEFAULT_MODE+"> property in its definition\n",type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),has_default(lexerDefinition,MODES)||errors.push({message:"A MultiMode Lexer cannot be initialized without a <"+MODES+"> property in its definition\n",type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),has_default(lexerDefinition,MODES)&&has_default(lexerDefinition,DEFAULT_MODE)&&!has_default(lexerDefinition.modes,lexerDefinition.defaultMode)&&errors.push({message:`A MultiMode Lexer cannot be initialized with a ${DEFAULT_MODE}: <${lexerDefinition.defaultMode}>which does not exist\n`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),has_default(lexerDefinition,MODES)&&forEach_default(lexerDefinition.modes,(currModeValue,currModeName)=>{forEach_default(currModeValue,(currTokType,currIdx)=>{if(isUndefined_default(currTokType))errors.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${currModeName}> at index: <${currIdx}>\n`,type:LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(has_default(currTokType,"LONGER_ALT")){const longerAlt=isArray_default(currTokType.LONGER_ALT)?currTokType.LONGER_ALT:[currTokType.LONGER_ALT];forEach_default(longerAlt,currLongerAlt=>{isUndefined_default(currLongerAlt)||includes_default(currModeValue,currLongerAlt)||errors.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${currLongerAlt.name}> on token <${currTokType.name}> outside of mode <${currModeName}>\n`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),errors}function performWarningRuntimeChecks(lexerDefinition,trackLines,lineTerminatorCharacters){const warnings3=[];let hasAnyLineBreak=!1;const allTokenTypes=compact_default(flatten_default(values_default(lexerDefinition.modes))),concreteTokenTypes=reject_default(allTokenTypes,currType=>currType[PATTERN]===Lexer2.NA),terminatorCharCodes=getCharCodes(lineTerminatorCharacters);return trackLines&&forEach_default(concreteTokenTypes,tokType=>{const currIssue=checkLineBreaksIssues(tokType,terminatorCharCodes);if(!1!==currIssue){const warningDescriptor={message:buildLineBreakIssueMessage(tokType,currIssue),type:currIssue.issue,tokenType:tokType};warnings3.push(warningDescriptor)}else has_default(tokType,"LINE_BREAKS")?!0===tokType.LINE_BREAKS&&(hasAnyLineBreak=!0):canMatchCharCode(terminatorCharCodes,tokType.PATTERN)&&(hasAnyLineBreak=!0)}),trackLines&&!hasAnyLineBreak&&warnings3.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),warnings3}function cloneEmptyGroups(emptyGroups){const clonedResult={},groupKeys=keys_default(emptyGroups);return forEach_default(groupKeys,currKey=>{const currGroupValue=emptyGroups[currKey];if(!isArray_default(currGroupValue))throw Error("non exhaustive match");clonedResult[currKey]=[]}),clonedResult}function isCustomPattern(tokenType){const pattern=tokenType.PATTERN;if(isRegExp_default(pattern))return!1;if(isFunction_default(pattern))return!0;if(has_default(pattern,"exec"))return!0;if(isString_default(pattern))return!1;throw Error("non exhaustive match")}function isShortPattern(pattern){return!(!isString_default(pattern)||1!==pattern.length)&&pattern.charCodeAt(0)}function checkLineBreaksIssues(tokType,lineTerminatorCharCodes){if(has_default(tokType,"LINE_BREAKS"))return!1;if(isRegExp_default(tokType.PATTERN)){try{canMatchCharCode(lineTerminatorCharCodes,tokType.PATTERN)}catch(e3){return{issue:LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:e3.message}}return!1}if(isString_default(tokType.PATTERN))return!1;if(isCustomPattern(tokType))return{issue:LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function buildLineBreakIssueMessage(tokType,details){if(details.issue===LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${tokType.name}> Token Type\n\t Root cause: ${details.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(details.issue===LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${tokType.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function getCharCodes(charsOrCodes){return map_default(charsOrCodes,numOrString=>isString_default(numOrString)?numOrString.charCodeAt(0):numOrString)}function addToMapOfArrays(map5,key,value2){void 0===map5[key]?map5[key]=[value2]:map5[key].push(value2)}function charCodeToOptimizedIndex(charCode){return charCode<minOptimizationVal?charCode:charCodeToOptimizedIdxMap[charCode]}function initCharCodeToOptimizedIndexMap(){if(isEmpty_default(charCodeToOptimizedIdxMap)){charCodeToOptimizedIdxMap=new Array(65536);for(let i2=0;i2<65536;i2++)charCodeToOptimizedIdxMap[i2]=i2>255?255+~~(i2/255):i2}}var tokenShortNameIdx,tokenIdxToClass,init_lexer=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/lexer.js"(){init_api(),init_lexer_public(),init_lodash(),init_api2(),init_reg_exp(),init_reg_exp_parser(),PATTERN="PATTERN",DEFAULT_MODE="defaultMode",MODES="modes",SUPPORT_STICKY="boolean"==typeof new RegExp("(?:)").sticky,__name(analyzeTokenTypes,"analyzeTokenTypes"),__name(validatePatterns,"validatePatterns"),__name(validateRegExpPattern,"validateRegExpPattern"),__name(findMissingPatterns,"findMissingPatterns"),__name(findInvalidPatterns,"findInvalidPatterns"),end_of_input=/[^\\][$]/,__name(findEndOfInputAnchor,"findEndOfInputAnchor"),__name(findEmptyMatchRegExps,"findEmptyMatchRegExps"),start_of_input=/[^\\[][\^]|^\^/,__name(findStartOfInputAnchor,"findStartOfInputAnchor"),__name(findUnsupportedFlags,"findUnsupportedFlags"),__name(findDuplicatePatterns,"findDuplicatePatterns"),__name(findInvalidGroupType,"findInvalidGroupType"),__name(findModesThatDoNotExist,"findModesThatDoNotExist"),__name(findUnreachablePatterns,"findUnreachablePatterns"),__name(testTokenType,"testTokenType"),__name(noMetaChar,"noMetaChar"),__name(addStartOfInput,"addStartOfInput"),__name(addStickyFlag,"addStickyFlag"),__name(performRuntimeChecks,"performRuntimeChecks"),__name(performWarningRuntimeChecks,"performWarningRuntimeChecks"),__name(cloneEmptyGroups,"cloneEmptyGroups"),__name(isCustomPattern,"isCustomPattern"),__name(isShortPattern,"isShortPattern"),LineTerminatorOptimizedTester={test:__name(function(text4){const len=text4.length;for(let i2=this.lastIndex;i2<len;i2++){const c3=text4.charCodeAt(i2);if(10===c3)return this.lastIndex=i2+1,!0;if(13===c3)return 10===text4.charCodeAt(i2+1)?this.lastIndex=i2+2:this.lastIndex=i2+1,!0}return!1},"test"),lastIndex:0},__name(checkLineBreaksIssues,"checkLineBreaksIssues"),__name(buildLineBreakIssueMessage,"buildLineBreakIssueMessage"),__name(getCharCodes,"getCharCodes"),__name(addToMapOfArrays,"addToMapOfArrays"),minOptimizationVal=256,charCodeToOptimizedIdxMap=[],__name(charCodeToOptimizedIndex,"charCodeToOptimizedIndex"),__name(initCharCodeToOptimizedIndexMap,"initCharCodeToOptimizedIndexMap")}});function tokenStructuredMatcher(tokInstance,tokConstructor){const instanceType=tokInstance.tokenTypeIdx;return instanceType===tokConstructor.tokenTypeIdx||!0===tokConstructor.isParent&&!0===tokConstructor.categoryMatchesMap[instanceType]}function tokenStructuredMatcherNoCategories(token2,tokType){return token2.tokenTypeIdx===tokType.tokenTypeIdx}function augmentTokenTypes(tokenTypes){const tokenTypesAndParents=expandCategories(tokenTypes);assignTokenDefaultProps(tokenTypesAndParents),assignCategoriesMapProp(tokenTypesAndParents),assignCategoriesTokensProp(tokenTypesAndParents),forEach_default(tokenTypesAndParents,tokType=>{tokType.isParent=tokType.categoryMatches.length>0})}function expandCategories(tokenTypes){let result=clone_default2(tokenTypes),categories=tokenTypes,searching=!0;for(;searching;){categories=compact_default(flatten_default(map_default(categories,currTokType=>currTokType.CATEGORIES)));const newCategories=difference_default(categories,result);result=result.concat(newCategories),isEmpty_default(newCategories)?searching=!1:categories=newCategories}return result}function assignTokenDefaultProps(tokenTypes){forEach_default(tokenTypes,currTokType=>{hasShortKeyProperty(currTokType)||(tokenIdxToClass[tokenShortNameIdx]=currTokType,currTokType.tokenTypeIdx=tokenShortNameIdx++),hasCategoriesProperty(currTokType)&&!isArray_default(currTokType.CATEGORIES)&&(currTokType.CATEGORIES=[currTokType.CATEGORIES]),hasCategoriesProperty(currTokType)||(currTokType.CATEGORIES=[]),hasExtendingTokensTypesProperty(currTokType)||(currTokType.categoryMatches=[]),hasExtendingTokensTypesMapProperty(currTokType)||(currTokType.categoryMatchesMap={})})}function assignCategoriesTokensProp(tokenTypes){forEach_default(tokenTypes,currTokType=>{currTokType.categoryMatches=[],forEach_default(currTokType.categoryMatchesMap,(val,key)=>{currTokType.categoryMatches.push(tokenIdxToClass[key].tokenTypeIdx)})})}function assignCategoriesMapProp(tokenTypes){forEach_default(tokenTypes,currTokType=>{singleAssignCategoriesToksMap([],currTokType)})}function singleAssignCategoriesToksMap(path4,nextNode){forEach_default(path4,pathNode=>{nextNode.categoryMatchesMap[pathNode.tokenTypeIdx]=!0}),forEach_default(nextNode.CATEGORIES,nextCategory=>{const newPath=path4.concat(nextNode);includes_default(newPath,nextCategory)||singleAssignCategoriesToksMap(newPath,nextCategory)})}function hasShortKeyProperty(tokType){return has_default(tokType,"tokenTypeIdx")}function hasCategoriesProperty(tokType){return has_default(tokType,"CATEGORIES")}function hasExtendingTokensTypesProperty(tokType){return has_default(tokType,"categoryMatches")}function hasExtendingTokensTypesMapProperty(tokType){return has_default(tokType,"categoryMatchesMap")}function isTokenType(tokType){return has_default(tokType,"tokenTypeIdx")}var defaultLexerErrorProvider,LexerDefinitionErrorType,DEFAULT_LEXER_CONFIG,Lexer2,PARENT,CATEGORIES,LABEL,GROUP,PUSH_MODE,POP_MODE,LONGER_ALT,LINE_BREAKS,START_CHARS_HINT,EOF,init_tokens=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/tokens.js"(){init_lodash(),__name(tokenStructuredMatcher,"tokenStructuredMatcher"),__name(tokenStructuredMatcherNoCategories,"tokenStructuredMatcherNoCategories"),tokenShortNameIdx=1,tokenIdxToClass={},__name(augmentTokenTypes,"augmentTokenTypes"),__name(expandCategories,"expandCategories"),__name(assignTokenDefaultProps,"assignTokenDefaultProps"),__name(assignCategoriesTokensProp,"assignCategoriesTokensProp"),__name(assignCategoriesMapProp,"assignCategoriesMapProp"),__name(singleAssignCategoriesToksMap,"singleAssignCategoriesToksMap"),__name(hasShortKeyProperty,"hasShortKeyProperty"),__name(hasCategoriesProperty,"hasCategoriesProperty"),__name(hasExtendingTokensTypesProperty,"hasExtendingTokensTypesProperty"),__name(hasExtendingTokensTypesMapProperty,"hasExtendingTokensTypesMapProperty"),__name(isTokenType,"isTokenType")}}),init_lexer_errors_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/lexer_errors_public.js"(){defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:token2=>`Unable to pop Lexer Mode after encountering Token ->${token2.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(fullText,startOffset,length2,line2,column2)=>`unexpected character: ->${fullText.charAt(startOffset)}<- at offset: ${startOffset}, skipped ${length2} characters.`}}}),init_lexer_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/lexer_public.js"(){var LexerDefinitionErrorType2;init_lexer(),init_lodash(),init_api2(),init_tokens(),init_lexer_errors_public(),init_reg_exp_parser(),(LexerDefinitionErrorType2=LexerDefinitionErrorType||(LexerDefinitionErrorType={}))[LexerDefinitionErrorType2.MISSING_PATTERN=0]="MISSING_PATTERN",LexerDefinitionErrorType2[LexerDefinitionErrorType2.INVALID_PATTERN=1]="INVALID_PATTERN",LexerDefinitionErrorType2[LexerDefinitionErrorType2.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",LexerDefinitionErrorType2[LexerDefinitionErrorType2.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",LexerDefinitionErrorType2[LexerDefinitionErrorType2.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",LexerDefinitionErrorType2[LexerDefinitionErrorType2.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",LexerDefinitionErrorType2[LexerDefinitionErrorType2.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",LexerDefinitionErrorType2[LexerDefinitionErrorType2.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",LexerDefinitionErrorType2[LexerDefinitionErrorType2.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",LexerDefinitionErrorType2[LexerDefinitionErrorType2.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",LexerDefinitionErrorType2[LexerDefinitionErrorType2.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",LexerDefinitionErrorType2[LexerDefinitionErrorType2.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",LexerDefinitionErrorType2[LexerDefinitionErrorType2.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",LexerDefinitionErrorType2[LexerDefinitionErrorType2.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",LexerDefinitionErrorType2[LexerDefinitionErrorType2.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",LexerDefinitionErrorType2[LexerDefinitionErrorType2.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",LexerDefinitionErrorType2[LexerDefinitionErrorType2.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",LexerDefinitionErrorType2[LexerDefinitionErrorType2.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE",DEFAULT_LEXER_CONFIG={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0},Object.freeze(DEFAULT_LEXER_CONFIG),Lexer2=class{static{__name(this,"Lexer")}constructor(lexerDefinition,config5=DEFAULT_LEXER_CONFIG){if(this.lexerDefinition=lexerDefinition,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(phaseDesc,phaseImpl)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;const indent=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${indent}--\x3e <${phaseDesc}>`);const{time:time4,value:value2}=timer2(phaseImpl),traceMethod=time4>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&traceMethod(`${indent}<-- <${phaseDesc}> time: ${time4}ms`),this.traceInitIndent--,value2}return phaseImpl()},"boolean"==typeof config5)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=assign_default({},DEFAULT_LEXER_CONFIG,config5);const traceInitVal=this.config.traceInitPerf;!0===traceInitVal?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof traceInitVal&&(this.traceInitMaxIdent=traceInitVal,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let actualDefinition,hasOnlySingleMode=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===DEFAULT_LEXER_CONFIG.lineTerminatorsPattern)this.config.lineTerminatorsPattern=LineTerminatorOptimizedTester;else if(this.config.lineTerminatorCharacters===DEFAULT_LEXER_CONFIG.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(config5.safeMode&&config5.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),isArray_default(lexerDefinition)?actualDefinition={modes:{defaultMode:clone_default2(lexerDefinition)},defaultMode:DEFAULT_MODE}:(hasOnlySingleMode=!1,actualDefinition=clone_default2(lexerDefinition))}),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(performRuntimeChecks(actualDefinition,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(performWarningRuntimeChecks(actualDefinition,this.trackStartLines,this.config.lineTerminatorCharacters))})),actualDefinition.modes=actualDefinition.modes?actualDefinition.modes:{},forEach_default(actualDefinition.modes,(currModeValue,currModeName)=>{actualDefinition.modes[currModeName]=reject_default(currModeValue,currTokType=>isUndefined_default(currTokType))});const allModeNames=keys_default(actualDefinition.modes);if(forEach_default(actualDefinition.modes,(currModDef,currModName)=>{this.TRACE_INIT(`Mode: <${currModName}> processing`,()=>{if(this.modes.push(currModName),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(validatePatterns(currModDef,allModeNames))}),isEmpty_default(this.lexerDefinitionErrors)){let currAnalyzeResult;augmentTokenTypes(currModDef),this.TRACE_INIT("analyzeTokenTypes",()=>{currAnalyzeResult=analyzeTokenTypes(currModDef,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:config5.positionTracking,ensureOptimizations:config5.ensureOptimizations,safeMode:config5.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[currModName]=currAnalyzeResult.patternIdxToConfig,this.charCodeToPatternIdxToConfig[currModName]=currAnalyzeResult.charCodeToPatternIdxToConfig,this.emptyGroups=assign_default({},this.emptyGroups,currAnalyzeResult.emptyGroups),this.hasCustom=currAnalyzeResult.hasCustom||this.hasCustom,this.canModeBeOptimized[currModName]=currAnalyzeResult.canBeOptimized}})}),this.defaultMode=actualDefinition.defaultMode,!isEmpty_default(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const allErrMessagesString=map_default(this.lexerDefinitionErrors,error3=>error3.message).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+allErrMessagesString)}forEach_default(this.lexerDefinitionWarning,warningDescriptor=>{PRINT_WARNING(warningDescriptor.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(SUPPORT_STICKY?(this.chopInput=identity_default4,this.match=this.matchWithTest):(this.updateLastIndex=noop_default2,this.match=this.matchWithExec),hasOnlySingleMode&&(this.handleModes=noop_default2),!1===this.trackStartLines&&(this.computeNewColumn=identity_default4),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=noop_default2),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const unOptimizedModes=reduce_default(this.canModeBeOptimized,(cannotBeOptimized,canBeOptimized,modeName)=>(!1===canBeOptimized&&cannotBeOptimized.push(modeName),cannotBeOptimized),[]);if(config5.ensureOptimizations&&!isEmpty_default(unOptimizedModes))throw Error(`Lexer Modes: < ${unOptimizedModes.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{clearRegExpParserCache()}),this.TRACE_INIT("toFastProperties",()=>{toFastProperties(this)})})}tokenize(text4,initialMode=this.defaultMode){if(!isEmpty_default(this.lexerDefinitionErrors)){const allErrMessagesString=map_default(this.lexerDefinitionErrors,error3=>error3.message).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+allErrMessagesString)}return this.tokenizeInternal(text4,initialMode)}tokenizeInternal(text4,initialMode){let i2,j3,k2,matchAltImage,longerAlt,matchedImage,payload,altPayload,imageLength,group2,tokType,newToken,errLength,msg,match2;const orgText=text4,orgLength=orgText.length;let offset=0,matchedTokensIndex=0;const guessedNumberOfTokens=this.hasCustom?0:Math.floor(text4.length/10),matchedTokens=new Array(guessedNumberOfTokens),errors=[];let line2=this.trackStartLines?1:void 0,column2=this.trackStartLines?1:void 0;const groups=cloneEmptyGroups(this.emptyGroups),trackLines=this.trackStartLines,lineTerminatorPattern=this.config.lineTerminatorsPattern;let currModePatternsLength=0,patternIdxToConfig=[],currCharCodeToPatternIdxToConfig=[];const modeStack=[],emptyArray=[];let getPossiblePatterns;function getPossiblePatternsSlow(){return patternIdxToConfig}function getPossiblePatternsOptimized(charCode){const optimizedCharIdx=charCodeToOptimizedIndex(charCode),possiblePatterns=currCharCodeToPatternIdxToConfig[optimizedCharIdx];return void 0===possiblePatterns?emptyArray:possiblePatterns}Object.freeze(emptyArray),__name(getPossiblePatternsSlow,"getPossiblePatternsSlow"),__name(getPossiblePatternsOptimized,"getPossiblePatternsOptimized");const pop_mode=__name(popToken=>{if(1===modeStack.length&&void 0===popToken.tokenType.PUSH_MODE){const msg2=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(popToken);errors.push({offset:popToken.startOffset,line:popToken.startLine,column:popToken.startColumn,length:popToken.image.length,message:msg2})}else{modeStack.pop();const newMode=last_default(modeStack);patternIdxToConfig=this.patternIdxToConfig[newMode],currCharCodeToPatternIdxToConfig=this.charCodeToPatternIdxToConfig[newMode],currModePatternsLength=patternIdxToConfig.length;const modeCanBeOptimized=this.canModeBeOptimized[newMode]&&!1===this.config.safeMode;getPossiblePatterns=currCharCodeToPatternIdxToConfig&&modeCanBeOptimized?getPossiblePatternsOptimized:getPossiblePatternsSlow}},"pop_mode");function push_mode(newMode){modeStack.push(newMode),currCharCodeToPatternIdxToConfig=this.charCodeToPatternIdxToConfig[newMode],patternIdxToConfig=this.patternIdxToConfig[newMode],currModePatternsLength=patternIdxToConfig.length,currModePatternsLength=patternIdxToConfig.length;const modeCanBeOptimized=this.canModeBeOptimized[newMode]&&!1===this.config.safeMode;getPossiblePatterns=currCharCodeToPatternIdxToConfig&&modeCanBeOptimized?getPossiblePatternsOptimized:getPossiblePatternsSlow}let currConfig;__name(push_mode,"push_mode"),push_mode.call(this,initialMode);const recoveryEnabled=this.config.recoveryEnabled;for(;offset<orgLength;){matchedImage=null;const nextCharCode=orgText.charCodeAt(offset),chosenPatternIdxToConfig=getPossiblePatterns(nextCharCode),chosenPatternsLength=chosenPatternIdxToConfig.length;for(i2=0;i2<chosenPatternsLength;i2++){currConfig=chosenPatternIdxToConfig[i2];const currPattern=currConfig.pattern;payload=null;const singleCharCode=currConfig.short;if(!1!==singleCharCode?nextCharCode===singleCharCode&&(matchedImage=currPattern):!0===currConfig.isCustom?(match2=currPattern.exec(orgText,offset,matchedTokens,groups),null!==match2?(matchedImage=match2[0],void 0!==match2.payload&&(payload=match2.payload)):matchedImage=null):(this.updateLastIndex(currPattern,offset),matchedImage=this.match(currPattern,text4,offset)),null!==matchedImage){if(longerAlt=currConfig.longerAlt,void 0!==longerAlt){const longerAltLength=longerAlt.length;for(k2=0;k2<longerAltLength;k2++){const longerAltConfig=patternIdxToConfig[longerAlt[k2]],longerAltPattern=longerAltConfig.pattern;if(altPayload=null,!0===longerAltConfig.isCustom?(match2=longerAltPattern.exec(orgText,offset,matchedTokens,groups),null!==match2?(matchAltImage=match2[0],void 0!==match2.payload&&(altPayload=match2.payload)):matchAltImage=null):(this.updateLastIndex(longerAltPattern,offset),matchAltImage=this.match(longerAltPattern,text4,offset)),matchAltImage&&matchAltImage.length>matchedImage.length){matchedImage=matchAltImage,payload=altPayload,currConfig=longerAltConfig;break}}}break}}if(null!==matchedImage){if(imageLength=matchedImage.length,group2=currConfig.group,void 0!==group2&&(tokType=currConfig.tokenTypeIdx,newToken=this.createTokenInstance(matchedImage,offset,tokType,currConfig.tokenType,line2,column2,imageLength),this.handlePayload(newToken,payload),!1===group2?matchedTokensIndex=this.addToken(matchedTokens,matchedTokensIndex,newToken):groups[group2].push(newToken)),text4=this.chopInput(text4,imageLength),offset+=imageLength,column2=this.computeNewColumn(column2,imageLength),!0===trackLines&&!0===currConfig.canLineTerminator){let foundTerminator,lastLTEndOffset,numOfLTsInMatch=0;lineTerminatorPattern.lastIndex=0;do{foundTerminator=lineTerminatorPattern.test(matchedImage),!0===foundTerminator&&(lastLTEndOffset=lineTerminatorPattern.lastIndex-1,numOfLTsInMatch++)}while(!0===foundTerminator);0!==numOfLTsInMatch&&(line2+=numOfLTsInMatch,column2=imageLength-lastLTEndOffset,this.updateTokenEndLineColumnLocation(newToken,group2,lastLTEndOffset,numOfLTsInMatch,line2,column2,imageLength))}this.handleModes(currConfig,pop_mode,push_mode,newToken)}else{const errorStartOffset=offset,errorLine=line2,errorColumn=column2;let foundResyncPoint=!1===recoveryEnabled;for(;!1===foundResyncPoint&&offset<orgLength;)for(text4=this.chopInput(text4,1),offset++,j3=0;j3<currModePatternsLength;j3++){const currConfig2=patternIdxToConfig[j3],currPattern=currConfig2.pattern,singleCharCode=currConfig2.short;if(!1!==singleCharCode?orgText.charCodeAt(offset)===singleCharCode&&(foundResyncPoint=!0):!0===currConfig2.isCustom?foundResyncPoint=null!==currPattern.exec(orgText,offset,matchedTokens,groups):(this.updateLastIndex(currPattern,offset),foundResyncPoint=null!==currPattern.exec(text4)),!0===foundResyncPoint)break}if(errLength=offset-errorStartOffset,column2=this.computeNewColumn(column2,errLength),msg=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(orgText,errorStartOffset,errLength,errorLine,errorColumn),errors.push({offset:errorStartOffset,line:errorLine,column:errorColumn,length:errLength,message:msg}),!1===recoveryEnabled)break}}return this.hasCustom||(matchedTokens.length=matchedTokensIndex),{tokens:matchedTokens,groups:groups,errors:errors}}handleModes(config5,pop_mode,push_mode,newToken){if(!0===config5.pop){const pushMode=config5.push;pop_mode(newToken),void 0!==pushMode&&push_mode.call(this,pushMode)}else void 0!==config5.push&&push_mode.call(this,config5.push)}chopInput(text4,length2){return text4.substring(length2)}updateLastIndex(regExp,newLastIndex){regExp.lastIndex=newLastIndex}updateTokenEndLineColumnLocation(newToken,group2,lastLTIdx,numOfLTsInMatch,line2,column2,imageLength){let lastCharIsLT,fixForEndingInLT;void 0!==group2&&(lastCharIsLT=lastLTIdx===imageLength-1,fixForEndingInLT=lastCharIsLT?-1:0,1===numOfLTsInMatch&&!0===lastCharIsLT||(newToken.endLine=line2+fixForEndingInLT,newToken.endColumn=column2-1-fixForEndingInLT))}computeNewColumn(oldColumn,imageLength){return oldColumn+imageLength}createOffsetOnlyToken(image,startOffset,tokenTypeIdx,tokenType){return{image:image,startOffset:startOffset,tokenTypeIdx:tokenTypeIdx,tokenType:tokenType}}createStartOnlyToken(image,startOffset,tokenTypeIdx,tokenType,startLine,startColumn){return{image:image,startOffset:startOffset,startLine:startLine,startColumn:startColumn,tokenTypeIdx:tokenTypeIdx,tokenType:tokenType}}createFullToken(image,startOffset,tokenTypeIdx,tokenType,startLine,startColumn,imageLength){return{image:image,startOffset:startOffset,endOffset:startOffset+imageLength-1,startLine:startLine,endLine:startLine,startColumn:startColumn,endColumn:startColumn+imageLength-1,tokenTypeIdx:tokenTypeIdx,tokenType:tokenType}}addTokenUsingPush(tokenVector,index,tokenToAdd){return tokenVector.push(tokenToAdd),index}addTokenUsingMemberAccess(tokenVector,index,tokenToAdd){return tokenVector[index]=tokenToAdd,++index}handlePayloadNoCustom(token2,payload){}handlePayloadWithCustom(token2,payload){null!==payload&&(token2.payload=payload)}matchWithTest(pattern,text4,offset){return!0===pattern.test(text4)?text4.substring(offset,pattern.lastIndex):null}matchWithExec(pattern,text4){const regExpArray=pattern.exec(text4);return null!==regExpArray?regExpArray[0]:null}},Lexer2.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Lexer2.NA=/NOT_APPLICABLE/}});function tokenLabel2(tokType){return hasTokenLabel2(tokType)?tokType.LABEL:tokType.name}function hasTokenLabel2(obj){return isString_default(obj.LABEL)&&""!==obj.LABEL}function createToken(config5){return createTokenInternal(config5)}function createTokenInternal(config5){const pattern=config5.pattern,tokenType={};if(tokenType.name=config5.name,isUndefined_default(pattern)||(tokenType.PATTERN=pattern),has_default(config5,PARENT))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return has_default(config5,CATEGORIES)&&(tokenType.CATEGORIES=config5[CATEGORIES]),augmentTokenTypes([tokenType]),has_default(config5,LABEL)&&(tokenType.LABEL=config5[LABEL]),has_default(config5,GROUP)&&(tokenType.GROUP=config5[GROUP]),has_default(config5,POP_MODE)&&(tokenType.POP_MODE=config5[POP_MODE]),has_default(config5,PUSH_MODE)&&(tokenType.PUSH_MODE=config5[PUSH_MODE]),has_default(config5,LONGER_ALT)&&(tokenType.LONGER_ALT=config5[LONGER_ALT]),has_default(config5,LINE_BREAKS)&&(tokenType.LINE_BREAKS=config5[LINE_BREAKS]),has_default(config5,START_CHARS_HINT)&&(tokenType.START_CHARS_HINT=config5[START_CHARS_HINT]),tokenType}function createTokenInstance(tokType,image,startOffset,endOffset,startLine,endLine,startColumn,endColumn){return{image:image,startOffset:startOffset,endOffset:endOffset,startLine:startLine,endLine:endLine,startColumn:startColumn,endColumn:endColumn,tokenTypeIdx:tokType.tokenTypeIdx,tokenType:tokType}}function tokenMatcher(token2,tokType){return tokenStructuredMatcher(token2,tokType)}var defaultParserErrorProvider,defaultGrammarResolverErrorProvider,defaultGrammarValidatorErrorProvider,GastRefResolverVisitor,init_tokens_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/scan/tokens_public.js"(){init_lodash(),init_lexer_public(),init_tokens(),__name(tokenLabel2,"tokenLabel"),__name(hasTokenLabel2,"hasTokenLabel"),PARENT="parent",CATEGORIES="categories",LABEL="label",GROUP="group",PUSH_MODE="push_mode",POP_MODE="pop_mode",LONGER_ALT="longer_alt",LINE_BREAKS="line_breaks",START_CHARS_HINT="start_chars_hint",__name(createToken,"createToken"),__name(createTokenInternal,"createTokenInternal"),augmentTokenTypes([EOF=createToken({name:"EOF",pattern:Lexer2.NA})]),__name(createTokenInstance,"createTokenInstance"),__name(tokenMatcher,"tokenMatcher")}}),init_errors_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/errors_public.js"(){init_tokens_public(),init_lodash(),init_api3(),defaultParserErrorProvider={buildMismatchTokenMessage:({expected:expected,actual:actual,previous:previous,ruleName:ruleName})=>`Expecting ${hasTokenLabel2(expected)?`--\x3e ${tokenLabel2(expected)} <--`:`token of type --\x3e ${expected.name} <--`} but found --\x3e '${actual.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:firstRedundant,ruleName:ruleName})=>"Redundant input, expecting EOF but found: "+firstRedundant.image,buildNoViableAltMessage({expectedPathsPerAlt:expectedPathsPerAlt,actual:actual,previous:previous,customUserDescription:customUserDescription,ruleName:ruleName}){const errSuffix="\nbut found: '"+head_default(actual).image+"'";if(customUserDescription)return"Expecting: "+customUserDescription+errSuffix;{const allLookAheadPaths=reduce_default(expectedPathsPerAlt,(result,currAltPaths)=>result.concat(currAltPaths),[]),nextValidTokenSequences=map_default(allLookAheadPaths,currPath=>`[${map_default(currPath,currTokenType=>tokenLabel2(currTokenType)).join(", ")}]`);return"Expecting: "+`one of these possible Token sequences:\n${map_default(nextValidTokenSequences,(itemMsg,idx)=>`  ${idx+1}. ${itemMsg}`).join("\n")}`+errSuffix}},buildEarlyExitMessage({expectedIterationPaths:expectedIterationPaths,actual:actual,customUserDescription:customUserDescription,ruleName:ruleName}){const errSuffix="\nbut found: '"+head_default(actual).image+"'";if(customUserDescription)return"Expecting: "+customUserDescription+errSuffix;return"Expecting: "+`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${map_default(expectedIterationPaths,currPath=>`[${map_default(currPath,currTokenType=>tokenLabel2(currTokenType)).join(",")}]`).join(" ,")}>`+errSuffix}},Object.freeze(defaultParserErrorProvider),defaultGrammarResolverErrorProvider={buildRuleNotFoundError:(topLevelRule,undefinedRule)=>"Invalid grammar, reference to a rule which is not defined: ->"+undefinedRule.nonTerminalName+"<-\ninside top level rule: ->"+topLevelRule.name+"<-"},defaultGrammarValidatorErrorProvider={buildDuplicateFoundError(topLevelRule,duplicateProds){function getExtraProductionArgument2(prod){return prod instanceof Terminal?prod.terminalType.name:prod instanceof NonTerminal?prod.nonTerminalName:""}__name(getExtraProductionArgument2,"getExtraProductionArgument");const topLevelName=topLevelRule.name,duplicateProd=head_default(duplicateProds),index=duplicateProd.idx,dslName=getProductionDslName(duplicateProd),extraArgument=getExtraProductionArgument2(duplicateProd);let msg=`->${dslName}${index>0?index:""}<- ${extraArgument?`with argument: ->${extraArgument}<-`:""}\n                  appears more than once (${duplicateProds.length} times) in the top level rule: ->${topLevelName}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return msg=msg.replace(/[ \t]+/g," "),msg=msg.replace(/\s\s+/g,"\n"),msg},buildNamespaceConflictError:rule=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${rule.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(options2){const pathMsg=map_default(options2.prefixPath,currTok=>tokenLabel2(currTok)).join(", "),occurrence=0===options2.alternation.idx?"":options2.alternation.idx;return`Ambiguous alternatives: <${options2.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${occurrence}> inside <${options2.topLevelRule.name}> Rule,\n<${pathMsg}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(options2){const pathMsg=map_default(options2.prefixPath,currtok=>tokenLabel2(currtok)).join(", "),occurrence=0===options2.alternation.idx?"":options2.alternation.idx;let currMessage=`Ambiguous Alternatives Detected: <${options2.ambiguityIndices.join(" ,")}> in <OR${occurrence}> inside <${options2.topLevelRule.name}> Rule,\n<${pathMsg}> may appears as a prefix path in all these alternatives.\n`;return currMessage+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",currMessage},buildEmptyRepetitionError(options2){let dslName=getProductionDslName(options2.repetition);0!==options2.repetition.idx&&(dslName+=options2.repetition.idx);return`The repetition <${dslName}> within Rule <${options2.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:options2=>"deprecated",buildEmptyAlternationError:options2=>`Ambiguous empty alternative: <${options2.emptyChoiceIdx+1}> in <OR${options2.alternation.idx}> inside <${options2.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:options2=>`An Alternation cannot have more than 256 alternatives:\n<OR${options2.alternation.idx}> inside <${options2.topLevelRule.name}> Rule.\n has ${options2.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(options2){const ruleName=options2.topLevelRule.name;return`Left Recursion found in grammar.\nrule: <${ruleName}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${`${ruleName} --\x3e ${map_default(options2.leftRecursionPath,currRule=>currRule.name).concat([ruleName]).join(" --\x3e ")}`}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:options2=>"deprecated",buildDuplicateRuleNameError(options2){let ruleName;ruleName=options2.topLevelRule instanceof Rule?options2.topLevelRule.name:options2.topLevelRule;return`Duplicate definition, rule: ->${ruleName}<- is already defined in the grammar: ->${options2.grammarName}<-`}}}});function resolveGrammar(topLevels,errMsgProvider){const refResolver=new GastRefResolverVisitor(topLevels,errMsgProvider);return refResolver.resolveRefs(),refResolver.errors}var AbstractNextPossibleTokensWalker,NextAfterTokenWalker,AbstractNextTerminalAfterProductionWalker,NextTerminalAfterManyWalker,NextTerminalAfterManySepWalker,NextTerminalAfterAtLeastOneWalker,NextTerminalAfterAtLeastOneSepWalker,init_resolver=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/resolver.js"(){init_parser(),init_lodash(),init_api3(),__name(resolveGrammar,"resolveGrammar"),GastRefResolverVisitor=class extends GAstVisitor{static{__name(this,"GastRefResolverVisitor")}constructor(nameToTopRule,errMsgProvider){super(),this.nameToTopRule=nameToTopRule,this.errMsgProvider=errMsgProvider,this.errors=[]}resolveRefs(){forEach_default(values_default(this.nameToTopRule),prod=>{this.currTopLevel=prod,prod.accept(this)})}visitNonTerminal(node2){const ref=this.nameToTopRule[node2.nonTerminalName];if(ref)node2.referencedRule=ref;else{const msg=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,node2);this.errors.push({message:msg,type:ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:node2.nonTerminalName})}}}}});function possiblePathsFrom(targetDef,maxLength,currPath=[]){currPath=clone_default2(currPath);let result=[],i2=0;function remainingPathWith(nextDef){return nextDef.concat(drop_default(targetDef,i2+1))}function getAlternativesForProd(definition){const alternatives=possiblePathsFrom(remainingPathWith(definition),maxLength,currPath);return result.concat(alternatives)}for(__name(remainingPathWith,"remainingPathWith"),__name(getAlternativesForProd,"getAlternativesForProd");currPath.length<maxLength&&i2<targetDef.length;){const prod=targetDef[i2];if(prod instanceof Alternative)return getAlternativesForProd(prod.definition);if(prod instanceof NonTerminal)return getAlternativesForProd(prod.definition);if(prod instanceof Option2)result=getAlternativesForProd(prod.definition);else{if(prod instanceof RepetitionMandatory){return getAlternativesForProd(prod.definition.concat([new Repetition({definition:prod.definition})]))}if(prod instanceof RepetitionMandatoryWithSeparator){return getAlternativesForProd([new Alternative({definition:prod.definition}),new Repetition({definition:[new Terminal({terminalType:prod.separator})].concat(prod.definition)})])}if(prod instanceof RepetitionWithSeparator){const newDef=prod.definition.concat([new Repetition({definition:[new Terminal({terminalType:prod.separator})].concat(prod.definition)})]);result=getAlternativesForProd(newDef)}else if(prod instanceof Repetition){const newDef=prod.definition.concat([new Repetition({definition:prod.definition})]);result=getAlternativesForProd(newDef)}else{if(prod instanceof Alternation)return forEach_default(prod.definition,currAlt=>{!1===isEmpty_default(currAlt.definition)&&(result=getAlternativesForProd(currAlt.definition))}),result;if(!(prod instanceof Terminal))throw Error("non exhaustive match");currPath.push(prod.terminalType)}}i2++}return result.push({partialPath:currPath,suffixDef:drop_default(targetDef,i2)}),result}function nextPossibleTokensAfter(initialDef,tokenVector,tokMatcher,maxLookAhead){const EXIT_NON_TERMINAL_ARR=["EXIT_NONE_TERMINAL"];let foundCompletePath=!1;const tokenVectorLength=tokenVector.length,minimalAlternativesIndex=tokenVectorLength-maxLookAhead-1,result=[],possiblePaths=[];for(possiblePaths.push({idx:-1,def:initialDef,ruleStack:[],occurrenceStack:[]});!isEmpty_default(possiblePaths);){const currPath=possiblePaths.pop();if("EXIT_ALTERNATIVE"===currPath){foundCompletePath&&last_default(possiblePaths).idx<=minimalAlternativesIndex&&possiblePaths.pop();continue}const currDef=currPath.def,currIdx=currPath.idx,currRuleStack=currPath.ruleStack,currOccurrenceStack=currPath.occurrenceStack;if(isEmpty_default(currDef))continue;const prod=currDef[0];if("EXIT_NONE_TERMINAL"===prod){const nextPath={idx:currIdx,def:drop_default(currDef),ruleStack:dropRight_default(currRuleStack),occurrenceStack:dropRight_default(currOccurrenceStack)};possiblePaths.push(nextPath)}else if(prod instanceof Terminal)if(currIdx<tokenVectorLength-1){const nextIdx=currIdx+1;if(tokMatcher(tokenVector[nextIdx],prod.terminalType)){const nextPath={idx:nextIdx,def:drop_default(currDef),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPath)}}else{if(currIdx!==tokenVectorLength-1)throw Error("non exhaustive match");result.push({nextTokenType:prod.terminalType,nextTokenOccurrence:prod.idx,ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack}),foundCompletePath=!0}else if(prod instanceof NonTerminal){const newRuleStack=clone_default2(currRuleStack);newRuleStack.push(prod.nonTerminalName);const newOccurrenceStack=clone_default2(currOccurrenceStack);newOccurrenceStack.push(prod.idx);const nextPath={idx:currIdx,def:prod.definition.concat(EXIT_NON_TERMINAL_ARR,drop_default(currDef)),ruleStack:newRuleStack,occurrenceStack:newOccurrenceStack};possiblePaths.push(nextPath)}else if(prod instanceof Option2){const nextPathWithout={idx:currIdx,def:drop_default(currDef),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPathWithout),possiblePaths.push("EXIT_ALTERNATIVE");const nextPathWith={idx:currIdx,def:prod.definition.concat(drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPathWith)}else if(prod instanceof RepetitionMandatory){const secondIteration=new Repetition({definition:prod.definition,idx:prod.idx}),nextPath={idx:currIdx,def:prod.definition.concat([secondIteration],drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPath)}else if(prod instanceof RepetitionMandatoryWithSeparator){const separatorGast=new Terminal({terminalType:prod.separator}),secondIteration=new Repetition({definition:[separatorGast].concat(prod.definition),idx:prod.idx}),nextPath={idx:currIdx,def:prod.definition.concat([secondIteration],drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPath)}else if(prod instanceof RepetitionWithSeparator){const nextPathWithout={idx:currIdx,def:drop_default(currDef),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPathWithout),possiblePaths.push("EXIT_ALTERNATIVE");const separatorGast=new Terminal({terminalType:prod.separator}),nthRepetition=new Repetition({definition:[separatorGast].concat(prod.definition),idx:prod.idx}),nextPathWith={idx:currIdx,def:prod.definition.concat([nthRepetition],drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPathWith)}else if(prod instanceof Repetition){const nextPathWithout={idx:currIdx,def:drop_default(currDef),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPathWithout),possiblePaths.push("EXIT_ALTERNATIVE");const nthRepetition=new Repetition({definition:prod.definition,idx:prod.idx}),nextPathWith={idx:currIdx,def:prod.definition.concat([nthRepetition],drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(nextPathWith)}else if(prod instanceof Alternation)for(let i2=prod.definition.length-1;i2>=0;i2--){const currAltPath={idx:currIdx,def:prod.definition[i2].definition.concat(drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack};possiblePaths.push(currAltPath),possiblePaths.push("EXIT_ALTERNATIVE")}else if(prod instanceof Alternative)possiblePaths.push({idx:currIdx,def:prod.definition.concat(drop_default(currDef)),ruleStack:currRuleStack,occurrenceStack:currOccurrenceStack});else{if(!(prod instanceof Rule))throw Error("non exhaustive match");possiblePaths.push(expandTopLevelRule(prod,currIdx,currRuleStack,currOccurrenceStack))}}return result}function expandTopLevelRule(topRule,currIdx,currRuleStack,currOccurrenceStack){const newRuleStack=clone_default2(currRuleStack);newRuleStack.push(topRule.name);const newCurrOccurrenceStack=clone_default2(currOccurrenceStack);return newCurrOccurrenceStack.push(1),{idx:currIdx,def:topRule.definition,ruleStack:newRuleStack,occurrenceStack:newCurrOccurrenceStack}}var PROD_TYPE,RestDefinitionFinderWalker,InsideDefinitionFinderVisitor,init_interpreter=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/interpreter.js"(){init_lodash(),init_first2(),init_rest(),init_api3(),AbstractNextPossibleTokensWalker=class extends RestWalker{static{__name(this,"AbstractNextPossibleTokensWalker")}constructor(topProd,path4){super(),this.topProd=topProd,this.path=path4,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=clone_default2(this.path.ruleStack).reverse(),this.occurrenceStack=clone_default2(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(prod,prevRest=[]){this.found||super.walk(prod,prevRest)}walkProdRef(refProd,currRest,prevRest){if(refProd.referencedRule.name===this.nextProductionName&&refProd.idx===this.nextProductionOccurrence){const fullRest=currRest.concat(prevRest);this.updateExpectedNext(),this.walk(refProd.referencedRule,fullRest)}}updateExpectedNext(){isEmpty_default(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},NextAfterTokenWalker=class extends AbstractNextPossibleTokensWalker{static{__name(this,"NextAfterTokenWalker")}constructor(topProd,path4){super(topProd,path4),this.path=path4,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(terminal,currRest,prevRest){if(this.isAtEndOfPath&&terminal.terminalType.name===this.nextTerminalName&&terminal.idx===this.nextTerminalOccurrence&&!this.found){const fullRest=currRest.concat(prevRest),restProd=new Alternative({definition:fullRest});this.possibleTokTypes=first2(restProd),this.found=!0}}},AbstractNextTerminalAfterProductionWalker=class extends RestWalker{static{__name(this,"AbstractNextTerminalAfterProductionWalker")}constructor(topRule,occurrence){super(),this.topRule=topRule,this.occurrence=occurrence,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},NextTerminalAfterManyWalker=class extends AbstractNextTerminalAfterProductionWalker{static{__name(this,"NextTerminalAfterManyWalker")}walkMany(manyProd,currRest,prevRest){if(manyProd.idx===this.occurrence){const firstAfterMany=head_default(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterMany,firstAfterMany instanceof Terminal&&(this.result.token=firstAfterMany.terminalType,this.result.occurrence=firstAfterMany.idx)}else super.walkMany(manyProd,currRest,prevRest)}},NextTerminalAfterManySepWalker=class extends AbstractNextTerminalAfterProductionWalker{static{__name(this,"NextTerminalAfterManySepWalker")}walkManySep(manySepProd,currRest,prevRest){if(manySepProd.idx===this.occurrence){const firstAfterManySep=head_default(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterManySep,firstAfterManySep instanceof Terminal&&(this.result.token=firstAfterManySep.terminalType,this.result.occurrence=firstAfterManySep.idx)}else super.walkManySep(manySepProd,currRest,prevRest)}},NextTerminalAfterAtLeastOneWalker=class extends AbstractNextTerminalAfterProductionWalker{static{__name(this,"NextTerminalAfterAtLeastOneWalker")}walkAtLeastOne(atLeastOneProd,currRest,prevRest){if(atLeastOneProd.idx===this.occurrence){const firstAfterAtLeastOne=head_default(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterAtLeastOne,firstAfterAtLeastOne instanceof Terminal&&(this.result.token=firstAfterAtLeastOne.terminalType,this.result.occurrence=firstAfterAtLeastOne.idx)}else super.walkAtLeastOne(atLeastOneProd,currRest,prevRest)}},NextTerminalAfterAtLeastOneSepWalker=class extends AbstractNextTerminalAfterProductionWalker{static{__name(this,"NextTerminalAfterAtLeastOneSepWalker")}walkAtLeastOneSep(atleastOneSepProd,currRest,prevRest){if(atleastOneSepProd.idx===this.occurrence){const firstAfterfirstAfterAtLeastOneSep=head_default(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterfirstAfterAtLeastOneSep,firstAfterfirstAfterAtLeastOneSep instanceof Terminal&&(this.result.token=firstAfterfirstAfterAtLeastOneSep.terminalType,this.result.occurrence=firstAfterfirstAfterAtLeastOneSep.idx)}else super.walkAtLeastOneSep(atleastOneSepProd,currRest,prevRest)}},__name(possiblePathsFrom,"possiblePathsFrom"),__name(nextPossibleTokensAfter,"nextPossibleTokensAfter"),__name(expandTopLevelRule,"expandTopLevelRule")}});function getProdType(prod){if(prod instanceof Option2||"Option"===prod)return PROD_TYPE.OPTION;if(prod instanceof Repetition||"Repetition"===prod)return PROD_TYPE.REPETITION;if(prod instanceof RepetitionMandatory||"RepetitionMandatory"===prod)return PROD_TYPE.REPETITION_MANDATORY;if(prod instanceof RepetitionMandatoryWithSeparator||"RepetitionMandatoryWithSeparator"===prod)return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;if(prod instanceof RepetitionWithSeparator||"RepetitionWithSeparator"===prod)return PROD_TYPE.REPETITION_WITH_SEPARATOR;if(prod instanceof Alternation||"Alternation"===prod)return PROD_TYPE.ALTERNATION;throw Error("non exhaustive match")}function getLookaheadPaths(options2){const{occurrence:occurrence,rule:rule,prodType:prodType,maxLookahead:maxLookahead}=options2,type3=getProdType(prodType);return type3===PROD_TYPE.ALTERNATION?getLookaheadPathsForOr(occurrence,rule,maxLookahead):getLookaheadPathsForOptionalProd(occurrence,rule,type3,maxLookahead)}function buildLookaheadFuncForOr(occurrence,ruleGrammar,maxLookahead,hasPredicates,dynamicTokensEnabled,laFuncBuilder){const lookAheadPaths=getLookaheadPathsForOr(occurrence,ruleGrammar,maxLookahead);return laFuncBuilder(lookAheadPaths,hasPredicates,areTokenCategoriesNotUsed(lookAheadPaths)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher,dynamicTokensEnabled)}function buildLookaheadFuncForOptionalProd(occurrence,ruleGrammar,k2,dynamicTokensEnabled,prodType,lookaheadBuilder){const lookAheadPaths=getLookaheadPathsForOptionalProd(occurrence,ruleGrammar,prodType,k2),tokenMatcher2=areTokenCategoriesNotUsed(lookAheadPaths)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return lookaheadBuilder(lookAheadPaths[0],tokenMatcher2,dynamicTokensEnabled)}function buildAlternativesLookAheadFunc(alts,hasPredicates,tokenMatcher2,dynamicTokensEnabled){const numOfAlts=alts.length,areAllOneTokenLookahead=every_default(alts,currAlt=>every_default(currAlt,currPath=>1===currPath.length));if(hasPredicates)return function(orAlts){const predicates=map_default(orAlts,currAlt=>currAlt.GATE);for(let t4=0;t4<numOfAlts;t4++){const currAlt=alts[t4],currNumOfPaths=currAlt.length,currPredicate=predicates[t4];if(void 0===currPredicate||!1!==currPredicate.call(this))nextPath:for(let j3=0;j3<currNumOfPaths;j3++){const currPath=currAlt[j3],currPathLength=currPath.length;for(let i2=0;i2<currPathLength;i2++){const nextToken=this.LA(i2+1);if(!1===tokenMatcher2(nextToken,currPath[i2]))continue nextPath}return t4}}};if(areAllOneTokenLookahead&&!dynamicTokensEnabled){const singleTokenAlts=map_default(alts,currAlt=>flatten_default(currAlt)),choiceToAlt=reduce_default(singleTokenAlts,(result,currAlt,idx)=>(forEach_default(currAlt,currTokType=>{has_default(result,currTokType.tokenTypeIdx)||(result[currTokType.tokenTypeIdx]=idx),forEach_default(currTokType.categoryMatches,currExtendingType=>{has_default(result,currExtendingType)||(result[currExtendingType]=idx)})}),result),{});return function(){const nextToken=this.LA(1);return choiceToAlt[nextToken.tokenTypeIdx]}}return function(){for(let t4=0;t4<numOfAlts;t4++){const currAlt=alts[t4],currNumOfPaths=currAlt.length;nextPath:for(let j3=0;j3<currNumOfPaths;j3++){const currPath=currAlt[j3],currPathLength=currPath.length;for(let i2=0;i2<currPathLength;i2++){const nextToken=this.LA(i2+1);if(!1===tokenMatcher2(nextToken,currPath[i2]))continue nextPath}return t4}}}}function buildSingleAlternativeLookaheadFunction(alt,tokenMatcher2,dynamicTokensEnabled){const areAllOneTokenLookahead=every_default(alt,currPath=>1===currPath.length),numOfPaths=alt.length;if(areAllOneTokenLookahead&&!dynamicTokensEnabled){const singleTokensTypes=flatten_default(alt);if(1===singleTokensTypes.length&&isEmpty_default(singleTokensTypes[0].categoryMatches)){const expectedTokenUniqueKey=singleTokensTypes[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===expectedTokenUniqueKey}}{const choiceToAlt=reduce_default(singleTokensTypes,(result,currTokType,idx)=>(result[currTokType.tokenTypeIdx]=!0,forEach_default(currTokType.categoryMatches,currExtendingType=>{result[currExtendingType]=!0}),result),[]);return function(){const nextToken=this.LA(1);return!0===choiceToAlt[nextToken.tokenTypeIdx]}}}return function(){nextPath:for(let j3=0;j3<numOfPaths;j3++){const currPath=alt[j3],currPathLength=currPath.length;for(let i2=0;i2<currPathLength;i2++){const nextToken=this.LA(i2+1);if(!1===tokenMatcher2(nextToken,currPath[i2]))continue nextPath}return!0}return!1}}function initializeArrayOfArrays(size4){const result=new Array(size4);for(let i2=0;i2<size4;i2++)result[i2]=[];return result}function pathToHashKeys(path4){let keys2=[""];for(let i2=0;i2<path4.length;i2++){const tokType=path4[i2],longerKeys=[];for(let j3=0;j3<keys2.length;j3++){const currShorterKey=keys2[j3];longerKeys.push(currShorterKey+"_"+tokType.tokenTypeIdx);for(let t4=0;t4<tokType.categoryMatches.length;t4++){const categoriesKeySuffix="_"+tokType.categoryMatches[t4];longerKeys.push(currShorterKey+categoriesKeySuffix)}}keys2=longerKeys}return keys2}function isUniquePrefixHash(altKnownPathsKeys,searchPathKeys,idx){for(let currAltIdx=0;currAltIdx<altKnownPathsKeys.length;currAltIdx++){if(currAltIdx===idx)continue;const otherAltKnownPathsKeys=altKnownPathsKeys[currAltIdx];for(let searchIdx=0;searchIdx<searchPathKeys.length;searchIdx++){if(!0===otherAltKnownPathsKeys[searchPathKeys[searchIdx]])return!1}}return!0}function lookAheadSequenceFromAlternatives(altsDefs,k2){const partialAlts=map_default(altsDefs,currAlt=>possiblePathsFrom([currAlt],1)),finalResult=initializeArrayOfArrays(partialAlts.length),altsHashes=map_default(partialAlts,currAltPaths=>{const dict={};return forEach_default(currAltPaths,item=>{const keys2=pathToHashKeys(item.partialPath);forEach_default(keys2,currKey=>{dict[currKey]=!0})}),dict});let newData=partialAlts;for(let pathLength=1;pathLength<=k2;pathLength++){const currDataset=newData;newData=initializeArrayOfArrays(currDataset.length);for(let altIdx=0;altIdx<currDataset.length;altIdx++){const currAltPathsAndSuffixes=currDataset[altIdx];for(let currPathIdx=0;currPathIdx<currAltPathsAndSuffixes.length;currPathIdx++){const currPathPrefix=currAltPathsAndSuffixes[currPathIdx].partialPath,suffixDef=currAltPathsAndSuffixes[currPathIdx].suffixDef,prefixKeys=pathToHashKeys(currPathPrefix);if(isUniquePrefixHash(altsHashes,prefixKeys,altIdx)||isEmpty_default(suffixDef)||currPathPrefix.length===k2){const currAltResult=finalResult[altIdx];if(!1===containsPath(currAltResult,currPathPrefix)){currAltResult.push(currPathPrefix);for(let j3=0;j3<prefixKeys.length;j3++){const currKey=prefixKeys[j3];altsHashes[altIdx][currKey]=!0}}}else{const newPartialPathsAndSuffixes=possiblePathsFrom(suffixDef,pathLength+1,currPathPrefix);newData[altIdx]=newData[altIdx].concat(newPartialPathsAndSuffixes),forEach_default(newPartialPathsAndSuffixes,item=>{const prefixKeys2=pathToHashKeys(item.partialPath);forEach_default(prefixKeys2,key=>{altsHashes[altIdx][key]=!0})})}}}}return finalResult}function getLookaheadPathsForOr(occurrence,ruleGrammar,k2,orProd){const visitor2=new InsideDefinitionFinderVisitor(occurrence,PROD_TYPE.ALTERNATION,orProd);return ruleGrammar.accept(visitor2),lookAheadSequenceFromAlternatives(visitor2.result,k2)}function getLookaheadPathsForOptionalProd(occurrence,ruleGrammar,prodType,k2){const insideDefVisitor=new InsideDefinitionFinderVisitor(occurrence,prodType);ruleGrammar.accept(insideDefVisitor);const insideDef=insideDefVisitor.result,afterDef=new RestDefinitionFinderWalker(ruleGrammar,occurrence,prodType).startWalking();return lookAheadSequenceFromAlternatives([new Alternative({definition:insideDef}),new Alternative({definition:afterDef})],k2)}function containsPath(alternative,searchPath){compareOtherPath:for(let i2=0;i2<alternative.length;i2++){const otherPath=alternative[i2];if(otherPath.length===searchPath.length){for(let j3=0;j3<otherPath.length;j3++){const searchTok=searchPath[j3],otherTok=otherPath[j3];if(!1===(searchTok===otherTok||void 0!==otherTok.categoryMatchesMap[searchTok.tokenTypeIdx]))continue compareOtherPath}return!0}}return!1}function isStrictPrefixOfPath(prefix,other){return prefix.length<other.length&&every_default(prefix,(tokType,idx)=>{const otherTokType=other[idx];return tokType===otherTokType||otherTokType.categoryMatchesMap[tokType.tokenTypeIdx]})}function areTokenCategoriesNotUsed(lookAheadPaths){return every_default(lookAheadPaths,singleAltPaths=>every_default(singleAltPaths,singlePath=>every_default(singlePath,token2=>isEmpty_default(token2.categoryMatches))))}var OccurrenceValidationCollector,OrCollector,RepetitionCollector,init_lookahead=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/lookahead.js"(){var PROD_TYPE2;init_lodash(),init_interpreter(),init_rest(),init_tokens(),init_api3(),(PROD_TYPE2=PROD_TYPE||(PROD_TYPE={}))[PROD_TYPE2.OPTION=0]="OPTION",PROD_TYPE2[PROD_TYPE2.REPETITION=1]="REPETITION",PROD_TYPE2[PROD_TYPE2.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",PROD_TYPE2[PROD_TYPE2.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",PROD_TYPE2[PROD_TYPE2.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",PROD_TYPE2[PROD_TYPE2.ALTERNATION=5]="ALTERNATION",__name(getProdType,"getProdType"),__name(getLookaheadPaths,"getLookaheadPaths"),__name(buildLookaheadFuncForOr,"buildLookaheadFuncForOr"),__name(buildLookaheadFuncForOptionalProd,"buildLookaheadFuncForOptionalProd"),__name(buildAlternativesLookAheadFunc,"buildAlternativesLookAheadFunc"),__name(buildSingleAlternativeLookaheadFunction,"buildSingleAlternativeLookaheadFunction"),RestDefinitionFinderWalker=class extends RestWalker{static{__name(this,"RestDefinitionFinderWalker")}constructor(topProd,targetOccurrence,targetProdType){super(),this.topProd=topProd,this.targetOccurrence=targetOccurrence,this.targetProdType=targetProdType}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(node2,expectedProdType,currRest,prevRest){return node2.idx===this.targetOccurrence&&this.targetProdType===expectedProdType&&(this.restDef=currRest.concat(prevRest),!0)}walkOption(optionProd,currRest,prevRest){this.checkIsTarget(optionProd,PROD_TYPE.OPTION,currRest,prevRest)||super.walkOption(optionProd,currRest,prevRest)}walkAtLeastOne(atLeastOneProd,currRest,prevRest){this.checkIsTarget(atLeastOneProd,PROD_TYPE.REPETITION_MANDATORY,currRest,prevRest)||super.walkOption(atLeastOneProd,currRest,prevRest)}walkAtLeastOneSep(atLeastOneSepProd,currRest,prevRest){this.checkIsTarget(atLeastOneSepProd,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,currRest,prevRest)||super.walkOption(atLeastOneSepProd,currRest,prevRest)}walkMany(manyProd,currRest,prevRest){this.checkIsTarget(manyProd,PROD_TYPE.REPETITION,currRest,prevRest)||super.walkOption(manyProd,currRest,prevRest)}walkManySep(manySepProd,currRest,prevRest){this.checkIsTarget(manySepProd,PROD_TYPE.REPETITION_WITH_SEPARATOR,currRest,prevRest)||super.walkOption(manySepProd,currRest,prevRest)}},InsideDefinitionFinderVisitor=class extends GAstVisitor{static{__name(this,"InsideDefinitionFinderVisitor")}constructor(targetOccurrence,targetProdType,targetRef){super(),this.targetOccurrence=targetOccurrence,this.targetProdType=targetProdType,this.targetRef=targetRef,this.result=[]}checkIsTarget(node2,expectedProdName){node2.idx!==this.targetOccurrence||this.targetProdType!==expectedProdName||void 0!==this.targetRef&&node2!==this.targetRef||(this.result=node2.definition)}visitOption(node2){this.checkIsTarget(node2,PROD_TYPE.OPTION)}visitRepetition(node2){this.checkIsTarget(node2,PROD_TYPE.REPETITION)}visitRepetitionMandatory(node2){this.checkIsTarget(node2,PROD_TYPE.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(node2){this.checkIsTarget(node2,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(node2){this.checkIsTarget(node2,PROD_TYPE.REPETITION_WITH_SEPARATOR)}visitAlternation(node2){this.checkIsTarget(node2,PROD_TYPE.ALTERNATION)}},__name(initializeArrayOfArrays,"initializeArrayOfArrays"),__name(pathToHashKeys,"pathToHashKeys"),__name(isUniquePrefixHash,"isUniquePrefixHash"),__name(lookAheadSequenceFromAlternatives,"lookAheadSequenceFromAlternatives"),__name(getLookaheadPathsForOr,"getLookaheadPathsForOr"),__name(getLookaheadPathsForOptionalProd,"getLookaheadPathsForOptionalProd"),__name(containsPath,"containsPath"),__name(isStrictPrefixOfPath,"isStrictPrefixOfPath"),__name(areTokenCategoriesNotUsed,"areTokenCategoriesNotUsed")}});function validateLookahead(options2){const lookaheadValidationErrorMessages=options2.lookaheadStrategy.validate({rules:options2.rules,tokenTypes:options2.tokenTypes,grammarName:options2.grammarName});return map_default(lookaheadValidationErrorMessages,errorMessage=>Object.assign({type:ParserDefinitionErrorType.CUSTOM_LOOKAHEAD_VALIDATION},errorMessage))}function validateGrammar(topLevels,tokenTypes,errMsgProvider,grammarName){const duplicateErrors=flatMap_default(topLevels,currTopLevel=>validateDuplicateProductions(currTopLevel,errMsgProvider)),termsNamespaceConflictErrors=checkTerminalAndNoneTerminalsNameSpace(topLevels,tokenTypes,errMsgProvider),tooManyAltsErrors=flatMap_default(topLevels,curRule=>validateTooManyAlts(curRule,errMsgProvider)),duplicateRulesError=flatMap_default(topLevels,curRule=>validateRuleDoesNotAlreadyExist(curRule,topLevels,grammarName,errMsgProvider));return duplicateErrors.concat(termsNamespaceConflictErrors,tooManyAltsErrors,duplicateRulesError)}function validateDuplicateProductions(topLevelRule,errMsgProvider){const collectorVisitor2=new OccurrenceValidationCollector;topLevelRule.accept(collectorVisitor2);const allRuleProductions=collectorVisitor2.allProductions,productionGroups=groupBy_default(allRuleProductions,identifyProductionForDuplicates),duplicates=pickBy_default(productionGroups,currGroup=>currGroup.length>1);return map_default(values_default(duplicates),currDuplicates=>{const firstProd=head_default(currDuplicates),msg=errMsgProvider.buildDuplicateFoundError(topLevelRule,currDuplicates),dslName=getProductionDslName(firstProd),defError={message:msg,type:ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:topLevelRule.name,dslName:dslName,occurrence:firstProd.idx},param=getExtraProductionArgument(firstProd);return param&&(defError.parameter=param),defError})}function identifyProductionForDuplicates(prod){return`${getProductionDslName(prod)}_#_${prod.idx}_#_${getExtraProductionArgument(prod)}`}function getExtraProductionArgument(prod){return prod instanceof Terminal?prod.terminalType.name:prod instanceof NonTerminal?prod.nonTerminalName:""}function validateRuleDoesNotAlreadyExist(rule,allRules,className,errMsgProvider){const errors=[];if(reduce_default(allRules,(result,curRule)=>curRule.name===rule.name?result+1:result,0)>1){const errMsg=errMsgProvider.buildDuplicateRuleNameError({topLevelRule:rule,grammarName:className});errors.push({message:errMsg,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:rule.name})}return errors}function validateRuleIsOverridden(ruleName,definedRulesNames,className){const errors=[];let errMsg;return includes_default(definedRulesNames,ruleName)||(errMsg=`Invalid rule override, rule: ->${ruleName}<- cannot be overridden in the grammar: ->${className}<-as it is not defined in any of the super grammars `,errors.push({message:errMsg,type:ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:ruleName})),errors}function validateNoLeftRecursion(topRule,currRule,errMsgProvider,path4=[]){const errors=[],nextNonTerminals=getFirstNoneTerminal(currRule.definition);if(isEmpty_default(nextNonTerminals))return[];{const ruleName=topRule.name;includes_default(nextNonTerminals,topRule)&&errors.push({message:errMsgProvider.buildLeftRecursionError({topLevelRule:topRule,leftRecursionPath:path4}),type:ParserDefinitionErrorType.LEFT_RECURSION,ruleName:ruleName});const validNextSteps=difference_default(nextNonTerminals,path4.concat([topRule])),errorsFromNextSteps=flatMap_default(validNextSteps,currRefRule=>{const newPath=clone_default2(path4);return newPath.push(currRefRule),validateNoLeftRecursion(topRule,currRefRule,errMsgProvider,newPath)});return errors.concat(errorsFromNextSteps)}}function getFirstNoneTerminal(definition){let result=[];if(isEmpty_default(definition))return result;const firstProd=head_default(definition);if(firstProd instanceof NonTerminal)result.push(firstProd.referencedRule);else if(firstProd instanceof Alternative||firstProd instanceof Option2||firstProd instanceof RepetitionMandatory||firstProd instanceof RepetitionMandatoryWithSeparator||firstProd instanceof RepetitionWithSeparator||firstProd instanceof Repetition)result=result.concat(getFirstNoneTerminal(firstProd.definition));else if(firstProd instanceof Alternation)result=flatten_default(map_default(firstProd.definition,currSubDef=>getFirstNoneTerminal(currSubDef.definition)));else if(!(firstProd instanceof Terminal))throw Error("non exhaustive match");const isFirstOptional=isOptionalProd(firstProd),hasMore=definition.length>1;if(isFirstOptional&&hasMore){const rest=drop_default(definition);return result.concat(getFirstNoneTerminal(rest))}return result}function validateEmptyOrAlternative(topLevelRule,errMsgProvider){const orCollector=new OrCollector;topLevelRule.accept(orCollector);const ors=orCollector.alternations;return flatMap_default(ors,currOr=>{const exceptLast=dropRight_default(currOr.definition);return flatMap_default(exceptLast,(currAlternative,currAltIdx)=>{const possibleFirstInAlt=nextPossibleTokensAfter([currAlternative],[],tokenStructuredMatcher,1);return isEmpty_default(possibleFirstInAlt)?[{message:errMsgProvider.buildEmptyAlternationError({topLevelRule:topLevelRule,alternation:currOr,emptyChoiceIdx:currAltIdx}),type:ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:topLevelRule.name,occurrence:currOr.idx,alternative:currAltIdx+1}]:[]})})}function validateAmbiguousAlternationAlternatives(topLevelRule,globalMaxLookahead,errMsgProvider){const orCollector=new OrCollector;topLevelRule.accept(orCollector);let ors=orCollector.alternations;ors=reject_default(ors,currOr=>!0===currOr.ignoreAmbiguities);return flatMap_default(ors,currOr=>{const currOccurrence=currOr.idx,actualMaxLookahead=currOr.maxLookahead||globalMaxLookahead,alternatives=getLookaheadPathsForOr(currOccurrence,topLevelRule,actualMaxLookahead,currOr),altsAmbiguityErrors=checkAlternativesAmbiguities(alternatives,currOr,topLevelRule,errMsgProvider),altsPrefixAmbiguityErrors=checkPrefixAlternativesAmbiguities(alternatives,currOr,topLevelRule,errMsgProvider);return altsAmbiguityErrors.concat(altsPrefixAmbiguityErrors)})}function validateTooManyAlts(topLevelRule,errMsgProvider){const orCollector=new OrCollector;topLevelRule.accept(orCollector);const ors=orCollector.alternations;return flatMap_default(ors,currOr=>currOr.definition.length>255?[{message:errMsgProvider.buildTooManyAlternativesError({topLevelRule:topLevelRule,alternation:currOr}),type:ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:topLevelRule.name,occurrence:currOr.idx}]:[])}function validateSomeNonEmptyLookaheadPath(topLevelRules,maxLookahead,errMsgProvider){const errors=[];return forEach_default(topLevelRules,currTopRule=>{const collectorVisitor2=new RepetitionCollector;currTopRule.accept(collectorVisitor2);const allRuleProductions=collectorVisitor2.allProductions;forEach_default(allRuleProductions,currProd=>{const prodType=getProdType(currProd),actualMaxLookahead=currProd.maxLookahead||maxLookahead,pathsInsideProduction=getLookaheadPathsForOptionalProd(currProd.idx,currTopRule,prodType,actualMaxLookahead)[0];if(isEmpty_default(flatten_default(pathsInsideProduction))){const errMsg=errMsgProvider.buildEmptyRepetitionError({topLevelRule:currTopRule,repetition:currProd});errors.push({message:errMsg,type:ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:currTopRule.name})}})}),errors}function checkAlternativesAmbiguities(alternatives,alternation2,rule,errMsgProvider){const foundAmbiguousPaths=[],identicalAmbiguities=reduce_default(alternatives,(result,currAlt,currAltIdx)=>(!0===alternation2.definition[currAltIdx].ignoreAmbiguities||forEach_default(currAlt,currPath=>{const altsCurrPathAppearsIn=[currAltIdx];forEach_default(alternatives,(currOtherAlt,currOtherAltIdx)=>{currAltIdx!==currOtherAltIdx&&containsPath(currOtherAlt,currPath)&&!0!==alternation2.definition[currOtherAltIdx].ignoreAmbiguities&&altsCurrPathAppearsIn.push(currOtherAltIdx)}),altsCurrPathAppearsIn.length>1&&!containsPath(foundAmbiguousPaths,currPath)&&(foundAmbiguousPaths.push(currPath),result.push({alts:altsCurrPathAppearsIn,path:currPath}))}),result),[]);return map_default(identicalAmbiguities,currAmbDescriptor=>{const ambgIndices=map_default(currAmbDescriptor.alts,currAltIdx=>currAltIdx+1);return{message:errMsgProvider.buildAlternationAmbiguityError({topLevelRule:rule,alternation:alternation2,ambiguityIndices:ambgIndices,prefixPath:currAmbDescriptor.path}),type:ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:rule.name,occurrence:alternation2.idx,alternatives:currAmbDescriptor.alts}})}function checkPrefixAlternativesAmbiguities(alternatives,alternation2,rule,errMsgProvider){const pathsAndIndices=reduce_default(alternatives,(result,currAlt,idx)=>{const currPathsAndIdx=map_default(currAlt,currPath=>({idx:idx,path:currPath}));return result.concat(currPathsAndIdx)},[]);return compact_default(flatMap_default(pathsAndIndices,currPathAndIdx=>{if(!0===alternation2.definition[currPathAndIdx.idx].ignoreAmbiguities)return[];const targetIdx=currPathAndIdx.idx,targetPath=currPathAndIdx.path,prefixAmbiguitiesPathsAndIndices=filter_default3(pathsAndIndices,searchPathAndIdx=>!0!==alternation2.definition[searchPathAndIdx.idx].ignoreAmbiguities&&searchPathAndIdx.idx<targetIdx&&isStrictPrefixOfPath(searchPathAndIdx.path,targetPath));return map_default(prefixAmbiguitiesPathsAndIndices,currAmbPathAndIdx=>{const ambgIndices=[currAmbPathAndIdx.idx+1,targetIdx+1],occurrence=0===alternation2.idx?"":alternation2.idx;return{message:errMsgProvider.buildAlternationPrefixAmbiguityError({topLevelRule:rule,alternation:alternation2,ambiguityIndices:ambgIndices,prefixPath:currAmbPathAndIdx.path}),type:ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:rule.name,occurrence:occurrence,alternatives:ambgIndices}})}))}function checkTerminalAndNoneTerminalsNameSpace(topLevels,tokenTypes,errMsgProvider){const errors=[],tokenNames=map_default(tokenTypes,currToken=>currToken.name);return forEach_default(topLevels,currRule=>{const currRuleName=currRule.name;if(includes_default(tokenNames,currRuleName)){const errMsg=errMsgProvider.buildNamespaceConflictError(currRule);errors.push({message:errMsg,type:ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:currRuleName})}}),errors}var init_checks=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/checks.js"(){init_lodash(),init_parser(),init_api3(),init_lookahead(),init_interpreter(),init_tokens(),__name(validateLookahead,"validateLookahead"),__name(validateGrammar,"validateGrammar"),__name(validateDuplicateProductions,"validateDuplicateProductions"),__name(identifyProductionForDuplicates,"identifyProductionForDuplicates"),__name(getExtraProductionArgument,"getExtraProductionArgument"),OccurrenceValidationCollector=class extends GAstVisitor{static{__name(this,"OccurrenceValidationCollector")}constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(subrule){this.allProductions.push(subrule)}visitOption(option2){this.allProductions.push(option2)}visitRepetitionWithSeparator(manySep){this.allProductions.push(manySep)}visitRepetitionMandatory(atLeastOne){this.allProductions.push(atLeastOne)}visitRepetitionMandatoryWithSeparator(atLeastOneSep){this.allProductions.push(atLeastOneSep)}visitRepetition(many){this.allProductions.push(many)}visitAlternation(or){this.allProductions.push(or)}visitTerminal(terminal){this.allProductions.push(terminal)}},__name(validateRuleDoesNotAlreadyExist,"validateRuleDoesNotAlreadyExist"),__name(validateRuleIsOverridden,"validateRuleIsOverridden"),__name(validateNoLeftRecursion,"validateNoLeftRecursion"),__name(getFirstNoneTerminal,"getFirstNoneTerminal"),OrCollector=class extends GAstVisitor{static{__name(this,"OrCollector")}constructor(){super(...arguments),this.alternations=[]}visitAlternation(node2){this.alternations.push(node2)}},__name(validateEmptyOrAlternative,"validateEmptyOrAlternative"),__name(validateAmbiguousAlternationAlternatives,"validateAmbiguousAlternationAlternatives"),RepetitionCollector=class extends GAstVisitor{static{__name(this,"RepetitionCollector")}constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(manySep){this.allProductions.push(manySep)}visitRepetitionMandatory(atLeastOne){this.allProductions.push(atLeastOne)}visitRepetitionMandatoryWithSeparator(atLeastOneSep){this.allProductions.push(atLeastOneSep)}visitRepetition(many){this.allProductions.push(many)}},__name(validateTooManyAlts,"validateTooManyAlts"),__name(validateSomeNonEmptyLookaheadPath,"validateSomeNonEmptyLookaheadPath"),__name(checkAlternativesAmbiguities,"checkAlternativesAmbiguities"),__name(checkPrefixAlternativesAmbiguities,"checkPrefixAlternativesAmbiguities"),__name(checkTerminalAndNoneTerminalsNameSpace,"checkTerminalAndNoneTerminalsNameSpace")}});function resolveGrammar2(options2){const actualOptions=defaults_default(options2,{errMsgProvider:defaultGrammarResolverErrorProvider}),topRulesTable={};return forEach_default(options2.rules,rule=>{topRulesTable[rule.name]=rule}),resolveGrammar(topRulesTable,actualOptions.errMsgProvider)}function validateGrammar2(options2){return validateGrammar((options2=defaults_default(options2,{errMsgProvider:defaultGrammarValidatorErrorProvider})).rules,options2.tokenTypes,options2.errMsgProvider,options2.grammarName)}var RECOGNITION_EXCEPTION_NAMES,RecognitionException,MismatchedTokenException,NoViableAltException,NotAllInputParsedException,EarlyExitException,init_gast_resolver_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/gast/gast_resolver_public.js"(){init_lodash(),init_resolver(),init_checks(),init_errors_public(),__name(resolveGrammar2,"resolveGrammar"),__name(validateGrammar2,"validateGrammar")}});function isRecognitionException(error3){return includes_default(RECOGNITION_EXCEPTION_NAMES,error3.name)}var EOF_FOLLOW_KEY,IN_RULE_RECOVERY_EXCEPTION,InRuleRecoveryException,Recoverable,init_exceptions_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/exceptions_public.js"(){init_lodash(),RECOGNITION_EXCEPTION_NAMES=["MismatchedTokenException","NoViableAltException","EarlyExitException","NotAllInputParsedException"],Object.freeze(RECOGNITION_EXCEPTION_NAMES),__name(isRecognitionException,"isRecognitionException"),RecognitionException=class extends Error{static{__name(this,"RecognitionException")}constructor(message,token2){super(message),this.token=token2,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},MismatchedTokenException=class extends RecognitionException{static{__name(this,"MismatchedTokenException")}constructor(message,token2,previousToken){super(message,token2),this.previousToken=previousToken,this.name="MismatchedTokenException"}},NoViableAltException=class extends RecognitionException{static{__name(this,"NoViableAltException")}constructor(message,token2,previousToken){super(message,token2),this.previousToken=previousToken,this.name="NoViableAltException"}},NotAllInputParsedException=class extends RecognitionException{static{__name(this,"NotAllInputParsedException")}constructor(message,token2){super(message,token2),this.name="NotAllInputParsedException"}},EarlyExitException=class extends RecognitionException{static{__name(this,"EarlyExitException")}constructor(message,token2,previousToken){super(message,token2),this.previousToken=previousToken,this.name="EarlyExitException"}}}});function attemptInRepetitionRecovery(prodFunc,args,lookaheadFunc,dslMethodIdx,prodOccurrence,nextToksWalker,notStuck){const key=this.getKeyForAutomaticLookahead(dslMethodIdx,prodOccurrence);let firstAfterRepInfo=this.firstAfterRepMap[key];if(void 0===firstAfterRepInfo){const currRuleName=this.getCurrRuleFullName();firstAfterRepInfo=new nextToksWalker(this.getGAstProductions()[currRuleName],prodOccurrence).startWalking(),this.firstAfterRepMap[key]=firstAfterRepInfo}let expectTokAfterLastMatch=firstAfterRepInfo.token,nextTokIdx=firstAfterRepInfo.occurrence;const isEndOfRule=firstAfterRepInfo.isEndOfRule;1===this.RULE_STACK.length&&isEndOfRule&&void 0===expectTokAfterLastMatch&&(expectTokAfterLastMatch=EOF,nextTokIdx=1),void 0!==expectTokAfterLastMatch&&void 0!==nextTokIdx&&this.shouldInRepetitionRecoveryBeTried(expectTokAfterLastMatch,nextTokIdx,notStuck)&&this.tryInRepetitionRecovery(prodFunc,args,lookaheadFunc,expectTokAfterLastMatch)}var BITS_FOR_METHOD_TYPE,BITS_FOR_OCCURRENCE_IDX,OR_IDX,OPTION_IDX,MANY_IDX,AT_LEAST_ONE_IDX,MANY_SEP_IDX,AT_LEAST_ONE_SEP_IDX,init_recoverable=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/recoverable.js"(){init_tokens_public(),init_lodash(),init_exceptions_public(),init_constants2(),init_parser(),EOF_FOLLOW_KEY={},IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException",InRuleRecoveryException=class extends Error{static{__name(this,"InRuleRecoveryException")}constructor(message){super(message),this.name=IN_RULE_RECOVERY_EXCEPTION}},Recoverable=class{static{__name(this,"Recoverable")}initRecoverable(config5){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=has_default(config5,"recoveryEnabled")?config5.recoveryEnabled:DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)}getTokenToInsert(tokType){const tokToInsert=createTokenInstance(tokType,"",NaN,NaN,NaN,NaN,NaN,NaN);return tokToInsert.isInsertedInRecovery=!0,tokToInsert}canTokenTypeBeInsertedInRecovery(tokType){return!0}canTokenTypeBeDeletedInRecovery(tokType){return!0}tryInRepetitionRecovery(grammarRule,grammarRuleArgs,lookAheadFunc,expectedTokType){const reSyncTokType=this.findReSyncTokenType(),savedLexerState=this.exportLexerState(),resyncedTokens=[];let passedResyncPoint=!1;const nextTokenWithoutResync=this.LA(1);let currToken=this.LA(1);const generateErrorMessage=__name(()=>{const previousToken=this.LA(0),msg=this.errorMessageProvider.buildMismatchTokenMessage({expected:expectedTokType,actual:nextTokenWithoutResync,previous:previousToken,ruleName:this.getCurrRuleFullName()}),error3=new MismatchedTokenException(msg,nextTokenWithoutResync,this.LA(0));error3.resyncedTokens=dropRight_default(resyncedTokens),this.SAVE_ERROR(error3)},"generateErrorMessage");for(;!passedResyncPoint;){if(this.tokenMatcher(currToken,expectedTokType))return void generateErrorMessage();if(lookAheadFunc.call(this))return generateErrorMessage(),void grammarRule.apply(this,grammarRuleArgs);this.tokenMatcher(currToken,reSyncTokType)?passedResyncPoint=!0:(currToken=this.SKIP_TOKEN(),this.addToResyncTokens(currToken,resyncedTokens))}this.importLexerState(savedLexerState)}shouldInRepetitionRecoveryBeTried(expectTokAfterLastMatch,nextTokIdx,notStuck){return!1!==notStuck&&(!this.tokenMatcher(this.LA(1),expectTokAfterLastMatch)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(expectTokAfterLastMatch,this.getFollowsForInRuleRecovery(expectTokAfterLastMatch,nextTokIdx))))}getFollowsForInRuleRecovery(tokType,tokIdxInRule){const grammarPath=this.getCurrentGrammarPath(tokType,tokIdxInRule);return this.getNextPossibleTokenTypes(grammarPath)}tryInRuleRecovery(expectedTokType,follows){if(this.canRecoverWithSingleTokenInsertion(expectedTokType,follows)){return this.getTokenToInsert(expectedTokType)}if(this.canRecoverWithSingleTokenDeletion(expectedTokType)){const nextTok=this.SKIP_TOKEN();return this.consumeToken(),nextTok}throw new InRuleRecoveryException("sad sad panda")}canPerformInRuleRecovery(expectedToken,follows){return this.canRecoverWithSingleTokenInsertion(expectedToken,follows)||this.canRecoverWithSingleTokenDeletion(expectedToken)}canRecoverWithSingleTokenInsertion(expectedTokType,follows){if(!this.canTokenTypeBeInsertedInRecovery(expectedTokType))return!1;if(isEmpty_default(follows))return!1;const mismatchedTok=this.LA(1);return void 0!==find_default2(follows,possibleFollowsTokType=>this.tokenMatcher(mismatchedTok,possibleFollowsTokType))}canRecoverWithSingleTokenDeletion(expectedTokType){if(!this.canTokenTypeBeDeletedInRecovery(expectedTokType))return!1;return this.tokenMatcher(this.LA(2),expectedTokType)}isInCurrentRuleReSyncSet(tokenTypeIdx){const followKey=this.getCurrFollowKey(),currentRuleReSyncSet=this.getFollowSetFromFollowKey(followKey);return includes_default(currentRuleReSyncSet,tokenTypeIdx)}findReSyncTokenType(){const allPossibleReSyncTokTypes=this.flattenFollowSet();let nextToken=this.LA(1),k2=2;for(;;){const foundMatch=find_default2(allPossibleReSyncTokTypes,resyncTokType=>tokenMatcher(nextToken,resyncTokType));if(void 0!==foundMatch)return foundMatch;nextToken=this.LA(k2),k2++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return EOF_FOLLOW_KEY;const currRuleShortName=this.getLastExplicitRuleShortName(),currRuleIdx=this.getLastExplicitRuleOccurrenceIndex(),prevRuleShortName=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(currRuleShortName),idxInCallingRule:currRuleIdx,inRule:this.shortRuleNameToFullName(prevRuleShortName)}}buildFullFollowKeyStack(){const explicitRuleStack=this.RULE_STACK,explicitOccurrenceStack=this.RULE_OCCURRENCE_STACK;return map_default(explicitRuleStack,(ruleName,idx)=>0===idx?EOF_FOLLOW_KEY:{ruleName:this.shortRuleNameToFullName(ruleName),idxInCallingRule:explicitOccurrenceStack[idx],inRule:this.shortRuleNameToFullName(explicitRuleStack[idx-1])})}flattenFollowSet(){const followStack=map_default(this.buildFullFollowKeyStack(),currKey=>this.getFollowSetFromFollowKey(currKey));return flatten_default(followStack)}getFollowSetFromFollowKey(followKey){if(followKey===EOF_FOLLOW_KEY)return[EOF];const followName=followKey.ruleName+followKey.idxInCallingRule+IN+followKey.inRule;return this.resyncFollows[followName]}addToResyncTokens(token2,resyncTokens){return this.tokenMatcher(token2,EOF)||resyncTokens.push(token2),resyncTokens}reSyncTo(tokType){const resyncedTokens=[];let nextTok=this.LA(1);for(;!1===this.tokenMatcher(nextTok,tokType);)nextTok=this.SKIP_TOKEN(),this.addToResyncTokens(nextTok,resyncedTokens);return dropRight_default(resyncedTokens)}attemptInRepetitionRecovery(prodFunc,args,lookaheadFunc,dslMethodIdx,prodOccurrence,nextToksWalker,notStuck){}getCurrentGrammarPath(tokType,tokIdxInRule){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:clone_default2(this.RULE_OCCURRENCE_STACK),lastTok:tokType,lastTokOccurrence:tokIdxInRule}}getHumanReadableRuleStack(){return map_default(this.RULE_STACK,currShortName=>this.shortRuleNameToFullName(currShortName))}},__name(attemptInRepetitionRecovery,"attemptInRepetitionRecovery")}});function getKeyForAutomaticLookahead(ruleIdx,dslMethodIdx,occurrence){return occurrence|dslMethodIdx|ruleIdx}var LLkLookaheadStrategy,LooksAhead,DslMethodsCollectorVisitor,collectorVisitor,init_keys2=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/keys.js"(){BITS_FOR_METHOD_TYPE=4,OR_IDX=1<<(BITS_FOR_OCCURRENCE_IDX=8),OPTION_IDX=2<<BITS_FOR_OCCURRENCE_IDX,MANY_IDX=3<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_IDX=4<<BITS_FOR_OCCURRENCE_IDX,MANY_SEP_IDX=5<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_SEP_IDX=6<<BITS_FOR_OCCURRENCE_IDX,__name(getKeyForAutomaticLookahead,"getKeyForAutomaticLookahead")}}),init_llk_lookahead=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/grammar/llk_lookahead.js"(){init_lodash(),init_errors_public(),init_parser(),init_checks(),init_lookahead(),LLkLookaheadStrategy=class{static{__name(this,"LLkLookaheadStrategy")}constructor(options2){var _a;this.maxLookahead=null!==(_a=null==options2?void 0:options2.maxLookahead)&&void 0!==_a?_a:DEFAULT_PARSER_CONFIG.maxLookahead}validate(options2){const leftRecursionErrors=this.validateNoLeftRecursion(options2.rules);if(isEmpty_default(leftRecursionErrors)){const emptyAltErrors=this.validateEmptyOrAlternatives(options2.rules),ambiguousAltsErrors=this.validateAmbiguousAlternationAlternatives(options2.rules,this.maxLookahead),emptyRepetitionErrors=this.validateSomeNonEmptyLookaheadPath(options2.rules,this.maxLookahead);return[...leftRecursionErrors,...emptyAltErrors,...ambiguousAltsErrors,...emptyRepetitionErrors]}return leftRecursionErrors}validateNoLeftRecursion(rules){return flatMap_default(rules,currTopRule=>validateNoLeftRecursion(currTopRule,currTopRule,defaultGrammarValidatorErrorProvider))}validateEmptyOrAlternatives(rules){return flatMap_default(rules,currTopRule=>validateEmptyOrAlternative(currTopRule,defaultGrammarValidatorErrorProvider))}validateAmbiguousAlternationAlternatives(rules,maxLookahead){return flatMap_default(rules,currTopRule=>validateAmbiguousAlternationAlternatives(currTopRule,maxLookahead,defaultGrammarValidatorErrorProvider))}validateSomeNonEmptyLookaheadPath(rules,maxLookahead){return validateSomeNonEmptyLookaheadPath(rules,maxLookahead,defaultGrammarValidatorErrorProvider)}buildLookaheadForAlternation(options2){return buildLookaheadFuncForOr(options2.prodOccurrence,options2.rule,options2.maxLookahead,options2.hasPredicates,options2.dynamicTokensEnabled,buildAlternativesLookAheadFunc)}buildLookaheadForOptional(options2){return buildLookaheadFuncForOptionalProd(options2.prodOccurrence,options2.rule,options2.maxLookahead,options2.dynamicTokensEnabled,getProdType(options2.prodType),buildSingleAlternativeLookaheadFunction)}}}});function collectMethods(rule){collectorVisitor.reset(),rule.accept(collectorVisitor);const dslMethods=collectorVisitor.dslMethods;return collectorVisitor.reset(),dslMethods}var init_looksahead=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/looksahead.js"(){init_lodash(),init_parser(),init_keys2(),init_api3(),init_llk_lookahead(),LooksAhead=class{static{__name(this,"LooksAhead")}initLooksAhead(config5){this.dynamicTokensEnabled=has_default(config5,"dynamicTokensEnabled")?config5.dynamicTokensEnabled:DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=has_default(config5,"maxLookahead")?config5.maxLookahead:DEFAULT_PARSER_CONFIG.maxLookahead,this.lookaheadStrategy=has_default(config5,"lookaheadStrategy")?config5.lookaheadStrategy:new LLkLookaheadStrategy({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(rules){forEach_default(rules,currRule=>{this.TRACE_INIT(`${currRule.name} Rule Lookahead`,()=>{const{alternation:alternation2,repetition:repetition2,option:option2,repetitionMandatory:repetitionMandatory2,repetitionMandatoryWithSeparator:repetitionMandatoryWithSeparator,repetitionWithSeparator:repetitionWithSeparator}=collectMethods(currRule);forEach_default(alternation2,currProd=>{const prodIdx=0===currProd.idx?"":currProd.idx;this.TRACE_INIT(`${getProductionDslName(currProd)}${prodIdx}`,()=>{const laFunc=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:currProd.idx,rule:currRule,maxLookahead:currProd.maxLookahead||this.maxLookahead,hasPredicates:currProd.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),key=getKeyForAutomaticLookahead(this.fullRuleNameToShort[currRule.name],OR_IDX,currProd.idx);this.setLaFuncCache(key,laFunc)})}),forEach_default(repetition2,currProd=>{this.computeLookaheadFunc(currRule,currProd.idx,MANY_IDX,"Repetition",currProd.maxLookahead,getProductionDslName(currProd))}),forEach_default(option2,currProd=>{this.computeLookaheadFunc(currRule,currProd.idx,OPTION_IDX,"Option",currProd.maxLookahead,getProductionDslName(currProd))}),forEach_default(repetitionMandatory2,currProd=>{this.computeLookaheadFunc(currRule,currProd.idx,AT_LEAST_ONE_IDX,"RepetitionMandatory",currProd.maxLookahead,getProductionDslName(currProd))}),forEach_default(repetitionMandatoryWithSeparator,currProd=>{this.computeLookaheadFunc(currRule,currProd.idx,AT_LEAST_ONE_SEP_IDX,"RepetitionMandatoryWithSeparator",currProd.maxLookahead,getProductionDslName(currProd))}),forEach_default(repetitionWithSeparator,currProd=>{this.computeLookaheadFunc(currRule,currProd.idx,MANY_SEP_IDX,"RepetitionWithSeparator",currProd.maxLookahead,getProductionDslName(currProd))})})})}computeLookaheadFunc(rule,prodOccurrence,prodKey,prodType,prodMaxLookahead,dslMethodName){this.TRACE_INIT(`${dslMethodName}${0===prodOccurrence?"":prodOccurrence}`,()=>{const laFunc=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:prodOccurrence,rule:rule,maxLookahead:prodMaxLookahead||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:prodType}),key=getKeyForAutomaticLookahead(this.fullRuleNameToShort[rule.name],prodKey,prodOccurrence);this.setLaFuncCache(key,laFunc)})}getKeyForAutomaticLookahead(dslMethodIdx,occurrence){return getKeyForAutomaticLookahead(this.getLastExplicitRuleShortName(),dslMethodIdx,occurrence)}getLaFuncFromCache(key){return this.lookAheadFuncsCache.get(key)}setLaFuncCache(key,value2){this.lookAheadFuncsCache.set(key,value2)}},DslMethodsCollectorVisitor=class extends GAstVisitor{static{__name(this,"DslMethodsCollectorVisitor")}constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(option2){this.dslMethods.option.push(option2)}visitRepetitionWithSeparator(manySep){this.dslMethods.repetitionWithSeparator.push(manySep)}visitRepetitionMandatory(atLeastOne){this.dslMethods.repetitionMandatory.push(atLeastOne)}visitRepetitionMandatoryWithSeparator(atLeastOneSep){this.dslMethods.repetitionMandatoryWithSeparator.push(atLeastOneSep)}visitRepetition(many){this.dslMethods.repetition.push(many)}visitAlternation(or){this.dslMethods.alternation.push(or)}},collectorVisitor=new DslMethodsCollectorVisitor,__name(collectMethods,"collectMethods")}});function setNodeLocationOnlyOffset(currNodeLocation,newLocationInfo){!0===isNaN(currNodeLocation.startOffset)?(currNodeLocation.startOffset=newLocationInfo.startOffset,currNodeLocation.endOffset=newLocationInfo.endOffset):currNodeLocation.endOffset<newLocationInfo.endOffset==!0&&(currNodeLocation.endOffset=newLocationInfo.endOffset)}function setNodeLocationFull(currNodeLocation,newLocationInfo){!0===isNaN(currNodeLocation.startOffset)?(currNodeLocation.startOffset=newLocationInfo.startOffset,currNodeLocation.startColumn=newLocationInfo.startColumn,currNodeLocation.startLine=newLocationInfo.startLine,currNodeLocation.endOffset=newLocationInfo.endOffset,currNodeLocation.endColumn=newLocationInfo.endColumn,currNodeLocation.endLine=newLocationInfo.endLine):currNodeLocation.endOffset<newLocationInfo.endOffset==!0&&(currNodeLocation.endOffset=newLocationInfo.endOffset,currNodeLocation.endColumn=newLocationInfo.endColumn,currNodeLocation.endLine=newLocationInfo.endLine)}function addTerminalToCst(node2,token2,tokenTypeName){void 0===node2.children[tokenTypeName]?node2.children[tokenTypeName]=[token2]:node2.children[tokenTypeName].push(token2)}function addNoneTerminalToCst(node2,ruleName,ruleResult){void 0===node2.children[ruleName]?node2.children[ruleName]=[ruleResult]:node2.children[ruleName].push(ruleResult)}var NAME,init_cst=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/cst/cst.js"(){__name(setNodeLocationOnlyOffset,"setNodeLocationOnlyOffset"),__name(setNodeLocationFull,"setNodeLocationFull"),__name(addTerminalToCst,"addTerminalToCst"),__name(addNoneTerminalToCst,"addNoneTerminalToCst")}});function defineNameProp(obj,nameValue){Object.defineProperty(obj,NAME,{enumerable:!1,configurable:!0,writable:!1,value:nameValue})}var CstVisitorDefinitionError,init_lang_extensions=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/lang/lang_extensions.js"(){NAME="name",__name(defineNameProp,"defineNameProp")}});function defaultVisit(ctx,param){const childrenNames=keys_default(ctx),childrenNamesLength=childrenNames.length;for(let i2=0;i2<childrenNamesLength;i2++){const currChildArray=ctx[childrenNames[i2]],currChildArrayLength=currChildArray.length;for(let j3=0;j3<currChildArrayLength;j3++){const currChild=currChildArray[j3];void 0===currChild.tokenTypeIdx&&this[currChild.name](currChild.children,param)}}}function createBaseSemanticVisitorConstructor(grammarName,ruleNames){const derivedConstructor=__name(function(){},"derivedConstructor");defineNameProp(derivedConstructor,grammarName+"BaseSemantics");const semanticProto={visit:__name(function(cstNode,param){if(isArray_default(cstNode)&&(cstNode=cstNode[0]),!isUndefined_default(cstNode))return this[cstNode.name](cstNode.children,param)},"visit"),validateVisitor:__name(function(){const semanticDefinitionErrors=validateVisitor(this,ruleNames);if(!isEmpty_default(semanticDefinitionErrors)){const errorMessages=map_default(semanticDefinitionErrors,currDefError=>currDefError.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${errorMessages.join("\n\n").replace(/\n/g,"\n\t")}`)}},"validateVisitor")};return derivedConstructor.prototype=semanticProto,derivedConstructor.prototype.constructor=derivedConstructor,derivedConstructor._RULE_NAMES=ruleNames,derivedConstructor}function createBaseVisitorConstructorWithDefaults(grammarName,ruleNames,baseConstructor){const derivedConstructor=__name(function(){},"derivedConstructor");defineNameProp(derivedConstructor,grammarName+"BaseSemanticsWithDefaults");const withDefaultsProto=Object.create(baseConstructor.prototype);return forEach_default(ruleNames,ruleName=>{withDefaultsProto[ruleName]=defaultVisit}),derivedConstructor.prototype=withDefaultsProto,derivedConstructor.prototype.constructor=derivedConstructor,derivedConstructor}function validateVisitor(visitorInstance,ruleNames){return validateMissingCstMethods(visitorInstance,ruleNames)}function validateMissingCstMethods(visitorInstance,ruleNames){const missingRuleNames=filter_default3(ruleNames,currRuleName=>!1===isFunction_default(visitorInstance[currRuleName])),errors=map_default(missingRuleNames,currRuleName=>({msg:`Missing visitor method: <${currRuleName}> on ${visitorInstance.constructor.name} CST Visitor.`,type:CstVisitorDefinitionError.MISSING_METHOD,methodName:currRuleName}));return compact_default(errors)}var TreeBuilder,LexerAdapter,RecognizerApi,RecognizerEngine,ErrorHandler,ContentAssist,RECORDING_NULL_OBJECT,MAX_METHOD_IDX,RFT,RECORDING_PHASE_TOKEN,RECORDING_PHASE_CSTNODE,GastRecorder,init_cst_visitor=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/cst/cst_visitor.js"(){var CstVisitorDefinitionError2;init_lodash(),init_lang_extensions(),__name(defaultVisit,"defaultVisit"),__name(createBaseSemanticVisitorConstructor,"createBaseSemanticVisitorConstructor"),__name(createBaseVisitorConstructorWithDefaults,"createBaseVisitorConstructorWithDefaults"),(CstVisitorDefinitionError2=CstVisitorDefinitionError||(CstVisitorDefinitionError={}))[CstVisitorDefinitionError2.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",CstVisitorDefinitionError2[CstVisitorDefinitionError2.MISSING_METHOD=1]="MISSING_METHOD",__name(validateVisitor,"validateVisitor"),__name(validateMissingCstMethods,"validateMissingCstMethods")}}),init_tree_builder=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/tree_builder.js"(){init_cst(),init_lodash(),init_cst_visitor(),init_parser(),TreeBuilder=class{static{__name(this,"TreeBuilder")}initTreeBuilder(config5){if(this.CST_STACK=[],this.outputCst=config5.outputCst,this.nodeLocationTracking=has_default(config5,"nodeLocationTracking")?config5.nodeLocationTracking:DEFAULT_PARSER_CONFIG.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationFull,this.setNodeLocationFromNode=setNodeLocationFull,this.cstPostRule=noop_default2,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=noop_default2,this.setNodeLocationFromNode=noop_default2,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationOnlyOffset,this.setNodeLocationFromNode=setNodeLocationOnlyOffset,this.cstPostRule=noop_default2,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=noop_default2,this.setNodeLocationFromNode=noop_default2,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${config5.nodeLocationTracking}"`);this.setNodeLocationFromToken=noop_default2,this.setNodeLocationFromNode=noop_default2,this.cstPostRule=noop_default2,this.setInitialNodeLocation=noop_default2}else this.cstInvocationStateUpdate=noop_default2,this.cstFinallyStateUpdate=noop_default2,this.cstPostTerminal=noop_default2,this.cstPostNonTerminal=noop_default2,this.cstPostRule=noop_default2}setInitialNodeLocationOnlyOffsetRecovery(cstNode){cstNode.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(cstNode){cstNode.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(cstNode){cstNode.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(cstNode){const nextToken=this.LA(1);cstNode.location={startOffset:nextToken.startOffset,startLine:nextToken.startLine,startColumn:nextToken.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(fullRuleName){const cstNode={name:fullRuleName,children:Object.create(null)};this.setInitialNodeLocation(cstNode),this.CST_STACK.push(cstNode)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(ruleCstNode){const prevToken=this.LA(0),loc=ruleCstNode.location;loc.startOffset<=prevToken.startOffset==!0?(loc.endOffset=prevToken.endOffset,loc.endLine=prevToken.endLine,loc.endColumn=prevToken.endColumn):(loc.startOffset=NaN,loc.startLine=NaN,loc.startColumn=NaN)}cstPostRuleOnlyOffset(ruleCstNode){const prevToken=this.LA(0),loc=ruleCstNode.location;loc.startOffset<=prevToken.startOffset==!0?loc.endOffset=prevToken.endOffset:loc.startOffset=NaN}cstPostTerminal(key,consumedToken){const rootCst=this.CST_STACK[this.CST_STACK.length-1];addTerminalToCst(rootCst,consumedToken,key),this.setNodeLocationFromToken(rootCst.location,consumedToken)}cstPostNonTerminal(ruleCstResult,ruleName){const preCstNode=this.CST_STACK[this.CST_STACK.length-1];addNoneTerminalToCst(preCstNode,ruleName,ruleCstResult),this.setNodeLocationFromNode(preCstNode.location,ruleCstResult.location)}getBaseCstVisitorConstructor(){if(isUndefined_default(this.baseCstVisitorConstructor)){const newBaseCstVisitorConstructor=createBaseSemanticVisitorConstructor(this.className,keys_default(this.gastProductionsCache));return this.baseCstVisitorConstructor=newBaseCstVisitorConstructor,newBaseCstVisitorConstructor}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(isUndefined_default(this.baseCstVisitorWithDefaultsConstructor)){const newConstructor=createBaseVisitorConstructorWithDefaults(this.className,keys_default(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=newConstructor,newConstructor}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const ruleStack=this.RULE_STACK;return ruleStack[ruleStack.length-1]}getPreviousExplicitRuleShortName(){const ruleStack=this.RULE_STACK;return ruleStack[ruleStack.length-2]}getLastExplicitRuleOccurrenceIndex(){const occurrenceStack=this.RULE_OCCURRENCE_STACK;return occurrenceStack[occurrenceStack.length-1]}}}}),init_lexer_adapter=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/lexer_adapter.js"(){init_parser(),LexerAdapter=class{static{__name(this,"LexerAdapter")}initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(newInput){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=newInput,this.tokVectorLength=newInput.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):END_OF_FILE}LA(howMuch){const soughtIdx=this.currIdx+howMuch;return soughtIdx<0||this.tokVectorLength<=soughtIdx?END_OF_FILE:this.tokVector[soughtIdx]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(newState2){this.currIdx=newState2}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}}}),init_recognizer_api=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/recognizer_api.js"(){init_lodash(),init_exceptions_public(),init_parser(),init_errors_public(),init_checks(),init_api3(),RecognizerApi=class{static{__name(this,"RecognizerApi")}ACTION(impl2){return impl2.call(this)}consume(idx,tokType,options2){return this.consumeInternal(tokType,idx,options2)}subrule(idx,ruleToCall,options2){return this.subruleInternal(ruleToCall,idx,options2)}option(idx,actionORMethodDef){return this.optionInternal(actionORMethodDef,idx)}or(idx,altsOrOpts){return this.orInternal(altsOrOpts,idx)}many(idx,actionORMethodDef){return this.manyInternal(idx,actionORMethodDef)}atLeastOne(idx,actionORMethodDef){return this.atLeastOneInternal(idx,actionORMethodDef)}CONSUME(tokType,options2){return this.consumeInternal(tokType,0,options2)}CONSUME1(tokType,options2){return this.consumeInternal(tokType,1,options2)}CONSUME2(tokType,options2){return this.consumeInternal(tokType,2,options2)}CONSUME3(tokType,options2){return this.consumeInternal(tokType,3,options2)}CONSUME4(tokType,options2){return this.consumeInternal(tokType,4,options2)}CONSUME5(tokType,options2){return this.consumeInternal(tokType,5,options2)}CONSUME6(tokType,options2){return this.consumeInternal(tokType,6,options2)}CONSUME7(tokType,options2){return this.consumeInternal(tokType,7,options2)}CONSUME8(tokType,options2){return this.consumeInternal(tokType,8,options2)}CONSUME9(tokType,options2){return this.consumeInternal(tokType,9,options2)}SUBRULE(ruleToCall,options2){return this.subruleInternal(ruleToCall,0,options2)}SUBRULE1(ruleToCall,options2){return this.subruleInternal(ruleToCall,1,options2)}SUBRULE2(ruleToCall,options2){return this.subruleInternal(ruleToCall,2,options2)}SUBRULE3(ruleToCall,options2){return this.subruleInternal(ruleToCall,3,options2)}SUBRULE4(ruleToCall,options2){return this.subruleInternal(ruleToCall,4,options2)}SUBRULE5(ruleToCall,options2){return this.subruleInternal(ruleToCall,5,options2)}SUBRULE6(ruleToCall,options2){return this.subruleInternal(ruleToCall,6,options2)}SUBRULE7(ruleToCall,options2){return this.subruleInternal(ruleToCall,7,options2)}SUBRULE8(ruleToCall,options2){return this.subruleInternal(ruleToCall,8,options2)}SUBRULE9(ruleToCall,options2){return this.subruleInternal(ruleToCall,9,options2)}OPTION(actionORMethodDef){return this.optionInternal(actionORMethodDef,0)}OPTION1(actionORMethodDef){return this.optionInternal(actionORMethodDef,1)}OPTION2(actionORMethodDef){return this.optionInternal(actionORMethodDef,2)}OPTION3(actionORMethodDef){return this.optionInternal(actionORMethodDef,3)}OPTION4(actionORMethodDef){return this.optionInternal(actionORMethodDef,4)}OPTION5(actionORMethodDef){return this.optionInternal(actionORMethodDef,5)}OPTION6(actionORMethodDef){return this.optionInternal(actionORMethodDef,6)}OPTION7(actionORMethodDef){return this.optionInternal(actionORMethodDef,7)}OPTION8(actionORMethodDef){return this.optionInternal(actionORMethodDef,8)}OPTION9(actionORMethodDef){return this.optionInternal(actionORMethodDef,9)}OR(altsOrOpts){return this.orInternal(altsOrOpts,0)}OR1(altsOrOpts){return this.orInternal(altsOrOpts,1)}OR2(altsOrOpts){return this.orInternal(altsOrOpts,2)}OR3(altsOrOpts){return this.orInternal(altsOrOpts,3)}OR4(altsOrOpts){return this.orInternal(altsOrOpts,4)}OR5(altsOrOpts){return this.orInternal(altsOrOpts,5)}OR6(altsOrOpts){return this.orInternal(altsOrOpts,6)}OR7(altsOrOpts){return this.orInternal(altsOrOpts,7)}OR8(altsOrOpts){return this.orInternal(altsOrOpts,8)}OR9(altsOrOpts){return this.orInternal(altsOrOpts,9)}MANY(actionORMethodDef){this.manyInternal(0,actionORMethodDef)}MANY1(actionORMethodDef){this.manyInternal(1,actionORMethodDef)}MANY2(actionORMethodDef){this.manyInternal(2,actionORMethodDef)}MANY3(actionORMethodDef){this.manyInternal(3,actionORMethodDef)}MANY4(actionORMethodDef){this.manyInternal(4,actionORMethodDef)}MANY5(actionORMethodDef){this.manyInternal(5,actionORMethodDef)}MANY6(actionORMethodDef){this.manyInternal(6,actionORMethodDef)}MANY7(actionORMethodDef){this.manyInternal(7,actionORMethodDef)}MANY8(actionORMethodDef){this.manyInternal(8,actionORMethodDef)}MANY9(actionORMethodDef){this.manyInternal(9,actionORMethodDef)}MANY_SEP(options2){this.manySepFirstInternal(0,options2)}MANY_SEP1(options2){this.manySepFirstInternal(1,options2)}MANY_SEP2(options2){this.manySepFirstInternal(2,options2)}MANY_SEP3(options2){this.manySepFirstInternal(3,options2)}MANY_SEP4(options2){this.manySepFirstInternal(4,options2)}MANY_SEP5(options2){this.manySepFirstInternal(5,options2)}MANY_SEP6(options2){this.manySepFirstInternal(6,options2)}MANY_SEP7(options2){this.manySepFirstInternal(7,options2)}MANY_SEP8(options2){this.manySepFirstInternal(8,options2)}MANY_SEP9(options2){this.manySepFirstInternal(9,options2)}AT_LEAST_ONE(actionORMethodDef){this.atLeastOneInternal(0,actionORMethodDef)}AT_LEAST_ONE1(actionORMethodDef){return this.atLeastOneInternal(1,actionORMethodDef)}AT_LEAST_ONE2(actionORMethodDef){this.atLeastOneInternal(2,actionORMethodDef)}AT_LEAST_ONE3(actionORMethodDef){this.atLeastOneInternal(3,actionORMethodDef)}AT_LEAST_ONE4(actionORMethodDef){this.atLeastOneInternal(4,actionORMethodDef)}AT_LEAST_ONE5(actionORMethodDef){this.atLeastOneInternal(5,actionORMethodDef)}AT_LEAST_ONE6(actionORMethodDef){this.atLeastOneInternal(6,actionORMethodDef)}AT_LEAST_ONE7(actionORMethodDef){this.atLeastOneInternal(7,actionORMethodDef)}AT_LEAST_ONE8(actionORMethodDef){this.atLeastOneInternal(8,actionORMethodDef)}AT_LEAST_ONE9(actionORMethodDef){this.atLeastOneInternal(9,actionORMethodDef)}AT_LEAST_ONE_SEP(options2){this.atLeastOneSepFirstInternal(0,options2)}AT_LEAST_ONE_SEP1(options2){this.atLeastOneSepFirstInternal(1,options2)}AT_LEAST_ONE_SEP2(options2){this.atLeastOneSepFirstInternal(2,options2)}AT_LEAST_ONE_SEP3(options2){this.atLeastOneSepFirstInternal(3,options2)}AT_LEAST_ONE_SEP4(options2){this.atLeastOneSepFirstInternal(4,options2)}AT_LEAST_ONE_SEP5(options2){this.atLeastOneSepFirstInternal(5,options2)}AT_LEAST_ONE_SEP6(options2){this.atLeastOneSepFirstInternal(6,options2)}AT_LEAST_ONE_SEP7(options2){this.atLeastOneSepFirstInternal(7,options2)}AT_LEAST_ONE_SEP8(options2){this.atLeastOneSepFirstInternal(8,options2)}AT_LEAST_ONE_SEP9(options2){this.atLeastOneSepFirstInternal(9,options2)}RULE(name,implementation,config5=DEFAULT_RULE_CONFIG){if(includes_default(this.definedRulesNames,name)){const error3={message:defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:name,grammarName:this.className}),type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:name};this.definitionErrors.push(error3)}this.definedRulesNames.push(name);const ruleImplementation=this.defineRule(name,implementation,config5);return this[name]=ruleImplementation,ruleImplementation}OVERRIDE_RULE(name,impl2,config5=DEFAULT_RULE_CONFIG){const ruleErrors=validateRuleIsOverridden(name,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(ruleErrors);const ruleImplementation=this.defineRule(name,impl2,config5);return this[name]=ruleImplementation,ruleImplementation}BACKTRACK(grammarRule,args){return function(){this.isBackTrackingStack.push(1);const orgState=this.saveRecogState();try{return grammarRule.apply(this,args),!0}catch(e3){if(isRecognitionException(e3))return!1;throw e3}finally{this.reloadRecogState(orgState),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return serializeGrammar(values_default(this.gastProductionsCache))}}}}),init_recognizer_engine=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/recognizer_engine.js"(){init_lodash(),init_keys2(),init_exceptions_public(),init_lookahead(),init_interpreter(),init_parser(),init_recoverable(),init_tokens_public(),init_tokens(),RecognizerEngine=class{static{__name(this,"RecognizerEngine")}initRecognizerEngine(tokenVocabulary,config5){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=tokenStructuredMatcherNoCategories,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},has_default(config5,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(isArray_default(tokenVocabulary)){if(isEmpty_default(tokenVocabulary))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof tokenVocabulary[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(isArray_default(tokenVocabulary))this.tokensMap=reduce_default(tokenVocabulary,(acc,tokType)=>(acc[tokType.name]=tokType,acc),{});else if(has_default(tokenVocabulary,"modes")&&every_default(flatten_default(values_default(tokenVocabulary.modes)),isTokenType)){const allTokenTypes2=flatten_default(values_default(tokenVocabulary.modes)),uniqueTokens=uniq_default(allTokenTypes2);this.tokensMap=reduce_default(uniqueTokens,(acc,tokType)=>(acc[tokType.name]=tokType,acc),{})}else{if(!isObject_default(tokenVocabulary))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=clone_default2(tokenVocabulary)}this.tokensMap.EOF=EOF;const allTokenTypes=has_default(tokenVocabulary,"modes")?flatten_default(values_default(tokenVocabulary.modes)):values_default(tokenVocabulary),noTokenCategoriesUsed=every_default(allTokenTypes,tokenConstructor=>isEmpty_default(tokenConstructor.categoryMatches));this.tokenMatcher=noTokenCategoriesUsed?tokenStructuredMatcherNoCategories:tokenStructuredMatcher,augmentTokenTypes(values_default(this.tokensMap))}defineRule(ruleName,impl2,config5){if(this.selfAnalysisDone)throw Error(`Grammar rule <${ruleName}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const resyncEnabled=has_default(config5,"resyncEnabled")?config5.resyncEnabled:DEFAULT_RULE_CONFIG.resyncEnabled,recoveryValueFunc=has_default(config5,"recoveryValueFunc")?config5.recoveryValueFunc:DEFAULT_RULE_CONFIG.recoveryValueFunc,shortName=this.ruleShortNameIdx<<BITS_FOR_METHOD_TYPE+BITS_FOR_OCCURRENCE_IDX;let invokeRuleWithTry;this.ruleShortNameIdx++,this.shortRuleNameToFull[shortName]=ruleName,this.fullRuleNameToShort[ruleName]=shortName,invokeRuleWithTry=!0===this.outputCst?__name(function(...args){try{this.ruleInvocationStateUpdate(shortName,ruleName,this.subruleIdx),impl2.apply(this,args);const cst=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(cst),cst}catch(e3){return this.invokeRuleCatch(e3,resyncEnabled,recoveryValueFunc)}finally{this.ruleFinallyStateUpdate()}},"invokeRuleWithTry"):__name(function(...args){try{return this.ruleInvocationStateUpdate(shortName,ruleName,this.subruleIdx),impl2.apply(this,args)}catch(e3){return this.invokeRuleCatch(e3,resyncEnabled,recoveryValueFunc)}finally{this.ruleFinallyStateUpdate()}},"invokeRuleWithTryCst");return Object.assign(invokeRuleWithTry,{ruleName:ruleName,originalGrammarAction:impl2})}invokeRuleCatch(e3,resyncEnabledConfig,recoveryValueFunc){const isFirstInvokedRule=1===this.RULE_STACK.length,reSyncEnabled=resyncEnabledConfig&&!this.isBackTracking()&&this.recoveryEnabled;if(isRecognitionException(e3)){const recogError=e3;if(reSyncEnabled){const reSyncTokType=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(reSyncTokType)){if(recogError.resyncedTokens=this.reSyncTo(reSyncTokType),this.outputCst){const partialCstResult=this.CST_STACK[this.CST_STACK.length-1];return partialCstResult.recoveredNode=!0,partialCstResult}return recoveryValueFunc(e3)}if(this.outputCst){const partialCstResult=this.CST_STACK[this.CST_STACK.length-1];partialCstResult.recoveredNode=!0,recogError.partialCstResult=partialCstResult}throw recogError}if(isFirstInvokedRule)return this.moveToTerminatedState(),recoveryValueFunc(e3);throw recogError}throw e3}optionInternal(actionORMethodDef,occurrence){const key=this.getKeyForAutomaticLookahead(OPTION_IDX,occurrence);return this.optionInternalLogic(actionORMethodDef,occurrence,key)}optionInternalLogic(actionORMethodDef,occurrence,key){let action,lookAheadFunc=this.getLaFuncFromCache(key);if("function"!=typeof actionORMethodDef){action=actionORMethodDef.DEF;const predicate=actionORMethodDef.GATE;if(void 0!==predicate){const orgLookaheadFunction=lookAheadFunc;lookAheadFunc=__name(()=>predicate.call(this)&&orgLookaheadFunction.call(this),"lookAheadFunc")}}else action=actionORMethodDef;if(!0===lookAheadFunc.call(this))return action.call(this)}atLeastOneInternal(prodOccurrence,actionORMethodDef){const laKey=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_IDX,prodOccurrence);return this.atLeastOneInternalLogic(prodOccurrence,actionORMethodDef,laKey)}atLeastOneInternalLogic(prodOccurrence,actionORMethodDef,key){let action,lookAheadFunc=this.getLaFuncFromCache(key);if("function"!=typeof actionORMethodDef){action=actionORMethodDef.DEF;const predicate=actionORMethodDef.GATE;if(void 0!==predicate){const orgLookaheadFunction=lookAheadFunc;lookAheadFunc=__name(()=>predicate.call(this)&&orgLookaheadFunction.call(this),"lookAheadFunc")}}else action=actionORMethodDef;if(!0!==lookAheadFunc.call(this))throw this.raiseEarlyExitException(prodOccurrence,PROD_TYPE.REPETITION_MANDATORY,actionORMethodDef.ERR_MSG);{let notStuck=this.doSingleRepetition(action);for(;!0===lookAheadFunc.call(this)&&!0===notStuck;)notStuck=this.doSingleRepetition(action)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[prodOccurrence,actionORMethodDef],lookAheadFunc,AT_LEAST_ONE_IDX,prodOccurrence,NextTerminalAfterAtLeastOneWalker)}atLeastOneSepFirstInternal(prodOccurrence,options2){const laKey=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_SEP_IDX,prodOccurrence);this.atLeastOneSepFirstInternalLogic(prodOccurrence,options2,laKey)}atLeastOneSepFirstInternalLogic(prodOccurrence,options2,key){const action=options2.DEF,separator=options2.SEP;if(!0!==this.getLaFuncFromCache(key).call(this))throw this.raiseEarlyExitException(prodOccurrence,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,options2.ERR_MSG);{action.call(this);const separatorLookAheadFunc=__name(()=>this.tokenMatcher(this.LA(1),separator),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),separator);)this.CONSUME(separator),action.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[prodOccurrence,separator,separatorLookAheadFunc,action,NextTerminalAfterAtLeastOneSepWalker],separatorLookAheadFunc,AT_LEAST_ONE_SEP_IDX,prodOccurrence,NextTerminalAfterAtLeastOneSepWalker)}}manyInternal(prodOccurrence,actionORMethodDef){const laKey=this.getKeyForAutomaticLookahead(MANY_IDX,prodOccurrence);return this.manyInternalLogic(prodOccurrence,actionORMethodDef,laKey)}manyInternalLogic(prodOccurrence,actionORMethodDef,key){let action,lookaheadFunction=this.getLaFuncFromCache(key);if("function"!=typeof actionORMethodDef){action=actionORMethodDef.DEF;const predicate=actionORMethodDef.GATE;if(void 0!==predicate){const orgLookaheadFunction=lookaheadFunction;lookaheadFunction=__name(()=>predicate.call(this)&&orgLookaheadFunction.call(this),"lookaheadFunction")}}else action=actionORMethodDef;let notStuck=!0;for(;!0===lookaheadFunction.call(this)&&!0===notStuck;)notStuck=this.doSingleRepetition(action);this.attemptInRepetitionRecovery(this.manyInternal,[prodOccurrence,actionORMethodDef],lookaheadFunction,MANY_IDX,prodOccurrence,NextTerminalAfterManyWalker,notStuck)}manySepFirstInternal(prodOccurrence,options2){const laKey=this.getKeyForAutomaticLookahead(MANY_SEP_IDX,prodOccurrence);this.manySepFirstInternalLogic(prodOccurrence,options2,laKey)}manySepFirstInternalLogic(prodOccurrence,options2,key){const action=options2.DEF,separator=options2.SEP;if(!0===this.getLaFuncFromCache(key).call(this)){action.call(this);const separatorLookAheadFunc=__name(()=>this.tokenMatcher(this.LA(1),separator),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),separator);)this.CONSUME(separator),action.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[prodOccurrence,separator,separatorLookAheadFunc,action,NextTerminalAfterManySepWalker],separatorLookAheadFunc,MANY_SEP_IDX,prodOccurrence,NextTerminalAfterManySepWalker)}}repetitionSepSecondInternal(prodOccurrence,separator,separatorLookAheadFunc,action,nextTerminalAfterWalker){for(;separatorLookAheadFunc();)this.CONSUME(separator),action.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[prodOccurrence,separator,separatorLookAheadFunc,action,nextTerminalAfterWalker],separatorLookAheadFunc,AT_LEAST_ONE_SEP_IDX,prodOccurrence,nextTerminalAfterWalker)}doSingleRepetition(action){const beforeIteration=this.getLexerPosition();action.call(this);return this.getLexerPosition()>beforeIteration}orInternal(altsOrOpts,occurrence){const laKey=this.getKeyForAutomaticLookahead(OR_IDX,occurrence),alts=isArray_default(altsOrOpts)?altsOrOpts:altsOrOpts.DEF,altIdxToTake=this.getLaFuncFromCache(laKey).call(this,alts);if(void 0!==altIdxToTake){return alts[altIdxToTake].ALT.call(this)}this.raiseNoAltException(occurrence,altsOrOpts.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){const firstRedundantTok=this.LA(1),errMsg=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:firstRedundantTok,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException(errMsg,firstRedundantTok))}}subruleInternal(ruleToCall,idx,options2){let ruleResult;try{const args=void 0!==options2?options2.ARGS:void 0;return this.subruleIdx=idx,ruleResult=ruleToCall.apply(this,args),this.cstPostNonTerminal(ruleResult,void 0!==options2&&void 0!==options2.LABEL?options2.LABEL:ruleToCall.ruleName),ruleResult}catch(e3){throw this.subruleInternalError(e3,options2,ruleToCall.ruleName)}}subruleInternalError(e3,options2,ruleName){throw isRecognitionException(e3)&&void 0!==e3.partialCstResult&&(this.cstPostNonTerminal(e3.partialCstResult,void 0!==options2&&void 0!==options2.LABEL?options2.LABEL:ruleName),delete e3.partialCstResult),e3}consumeInternal(tokType,idx,options2){let consumedToken;try{const nextToken=this.LA(1);!0===this.tokenMatcher(nextToken,tokType)?(this.consumeToken(),consumedToken=nextToken):this.consumeInternalError(tokType,nextToken,options2)}catch(eFromConsumption){consumedToken=this.consumeInternalRecovery(tokType,idx,eFromConsumption)}return this.cstPostTerminal(void 0!==options2&&void 0!==options2.LABEL?options2.LABEL:tokType.name,consumedToken),consumedToken}consumeInternalError(tokType,nextToken,options2){let msg;const previousToken=this.LA(0);throw msg=void 0!==options2&&options2.ERR_MSG?options2.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:tokType,actual:nextToken,previous:previousToken,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new MismatchedTokenException(msg,nextToken,previousToken))}consumeInternalRecovery(tokType,idx,eFromConsumption){if(!this.recoveryEnabled||"MismatchedTokenException"!==eFromConsumption.name||this.isBackTracking())throw eFromConsumption;{const follows=this.getFollowsForInRuleRecovery(tokType,idx);try{return this.tryInRuleRecovery(tokType,follows)}catch(eFromInRuleRecovery){throw eFromInRuleRecovery.name===IN_RULE_RECOVERY_EXCEPTION?eFromConsumption:eFromInRuleRecovery}}}saveRecogState(){const savedErrors=this.errors,savedRuleStack=clone_default2(this.RULE_STACK);return{errors:savedErrors,lexerState:this.exportLexerState(),RULE_STACK:savedRuleStack,CST_STACK:this.CST_STACK}}reloadRecogState(newState2){this.errors=newState2.errors,this.importLexerState(newState2.lexerState),this.RULE_STACK=newState2.RULE_STACK}ruleInvocationStateUpdate(shortName,fullName,idxInCallingRule){this.RULE_OCCURRENCE_STACK.push(idxInCallingRule),this.RULE_STACK.push(shortName),this.cstInvocationStateUpdate(fullName)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){const shortName=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[shortName]}shortRuleNameToFullName(shortName){return this.shortRuleNameToFull[shortName]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),EOF)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}}}),init_error_handler=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/error_handler.js"(){init_exceptions_public(),init_lodash(),init_lookahead(),init_parser(),ErrorHandler=class{static{__name(this,"ErrorHandler")}initErrorHandler(config5){this._errors=[],this.errorMessageProvider=has_default(config5,"errorMessageProvider")?config5.errorMessageProvider:DEFAULT_PARSER_CONFIG.errorMessageProvider}SAVE_ERROR(error3){if(isRecognitionException(error3))return error3.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:clone_default2(this.RULE_OCCURRENCE_STACK)},this._errors.push(error3),error3;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return clone_default2(this._errors)}set errors(newErrors){this._errors=newErrors}raiseEarlyExitException(occurrence,prodType,userDefinedErrMsg){const ruleName=this.getCurrRuleFullName(),insideProdPaths=getLookaheadPathsForOptionalProd(occurrence,this.getGAstProductions()[ruleName],prodType,this.maxLookahead)[0],actualTokens=[];for(let i2=1;i2<=this.maxLookahead;i2++)actualTokens.push(this.LA(i2));const msg=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:insideProdPaths,actual:actualTokens,previous:this.LA(0),customUserDescription:userDefinedErrMsg,ruleName:ruleName});throw this.SAVE_ERROR(new EarlyExitException(msg,this.LA(1),this.LA(0)))}raiseNoAltException(occurrence,errMsgTypes){const ruleName=this.getCurrRuleFullName(),lookAheadPathsPerAlternative=getLookaheadPathsForOr(occurrence,this.getGAstProductions()[ruleName],this.maxLookahead),actualTokens=[];for(let i2=1;i2<=this.maxLookahead;i2++)actualTokens.push(this.LA(i2));const previousToken=this.LA(0),errMsg=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:lookAheadPathsPerAlternative,actual:actualTokens,previous:previousToken,customUserDescription:errMsgTypes,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(errMsg,this.LA(1),previousToken))}}}}),init_context_assist=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/context_assist.js"(){init_interpreter(),init_lodash(),ContentAssist=class{static{__name(this,"ContentAssist")}initContentAssist(){}computeContentAssist(startRuleName,precedingInput){const startRuleGast=this.gastProductionsCache[startRuleName];if(isUndefined_default(startRuleGast))throw Error(`Rule ->${startRuleName}<- does not exist in this grammar.`);return nextPossibleTokensAfter([startRuleGast],precedingInput,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(grammarPath){const topRuleName=head_default(grammarPath.ruleStack),topProduction=this.getGAstProductions()[topRuleName];return new NextAfterTokenWalker(topProduction,grammarPath).startWalking()}}}});function recordProd(prodConstructor,mainProdArg,occurrence,handleSep=!1){assertMethodIdxIsValid(occurrence);const prevProd=last_default(this.recordingProdStack),grammarAction=isFunction_default(mainProdArg)?mainProdArg:mainProdArg.DEF,newProd=new prodConstructor({definition:[],idx:occurrence});return handleSep&&(newProd.separator=mainProdArg.SEP),has_default(mainProdArg,"MAX_LOOKAHEAD")&&(newProd.maxLookahead=mainProdArg.MAX_LOOKAHEAD),this.recordingProdStack.push(newProd),grammarAction.call(this),prevProd.definition.push(newProd),this.recordingProdStack.pop(),RECORDING_NULL_OBJECT}function recordOrProd(mainProdArg,occurrence){assertMethodIdxIsValid(occurrence);const prevProd=last_default(this.recordingProdStack),hasOptions=!1===isArray_default(mainProdArg),alts=!1===hasOptions?mainProdArg:mainProdArg.DEF,newOrProd=new Alternation({definition:[],idx:occurrence,ignoreAmbiguities:hasOptions&&!0===mainProdArg.IGNORE_AMBIGUITIES});has_default(mainProdArg,"MAX_LOOKAHEAD")&&(newOrProd.maxLookahead=mainProdArg.MAX_LOOKAHEAD);const hasPredicates=some_default(alts,currAlt=>isFunction_default(currAlt.GATE));return newOrProd.hasPredicates=hasPredicates,prevProd.definition.push(newOrProd),forEach_default(alts,currAlt=>{const currAltFlat=new Alternative({definition:[]});newOrProd.definition.push(currAltFlat),has_default(currAlt,"IGNORE_AMBIGUITIES")?currAltFlat.ignoreAmbiguities=currAlt.IGNORE_AMBIGUITIES:has_default(currAlt,"GATE")&&(currAltFlat.ignoreAmbiguities=!0),this.recordingProdStack.push(currAltFlat),currAlt.ALT.call(this),this.recordingProdStack.pop()}),RECORDING_NULL_OBJECT}function getIdxSuffix(idx){return 0===idx?"":`${idx}`}function assertMethodIdxIsValid(idx){if(idx<0||idx>MAX_METHOD_IDX){const error3=new Error(`Invalid DSL Method idx value: <${idx}>\n\tIdx value must be a none negative value smaller than ${MAX_METHOD_IDX+1}`);throw error3.KNOWN_RECORDER_ERROR=!0,error3}}var PerformanceTracer,init_gast_recorder=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/gast_recorder.js"(){init_lodash(),init_api3(),init_lexer_public(),init_tokens(),init_tokens_public(),init_parser(),init_keys2(),RECORDING_NULL_OBJECT={description:"This Object indicates the Parser is during Recording Phase"},Object.freeze(RECORDING_NULL_OBJECT),MAX_METHOD_IDX=Math.pow(2,BITS_FOR_OCCURRENCE_IDX)-1,augmentTokenTypes([RFT=createToken({name:"RECORDING_PHASE_TOKEN",pattern:Lexer2.NA})]),RECORDING_PHASE_TOKEN=createTokenInstance(RFT,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1),Object.freeze(RECORDING_PHASE_TOKEN),RECORDING_PHASE_CSTNODE={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},GastRecorder=class{static{__name(this,"GastRecorder")}initGastRecorder(config5){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let i2=0;i2<10;i2++){const idx=i2>0?i2:"";this[`CONSUME${idx}`]=function(arg1,arg2){return this.consumeInternalRecord(arg1,i2,arg2)},this[`SUBRULE${idx}`]=function(arg1,arg2){return this.subruleInternalRecord(arg1,i2,arg2)},this[`OPTION${idx}`]=function(arg1){return this.optionInternalRecord(arg1,i2)},this[`OR${idx}`]=function(arg1){return this.orInternalRecord(arg1,i2)},this[`MANY${idx}`]=function(arg1){this.manyInternalRecord(i2,arg1)},this[`MANY_SEP${idx}`]=function(arg1){this.manySepFirstInternalRecord(i2,arg1)},this[`AT_LEAST_ONE${idx}`]=function(arg1){this.atLeastOneInternalRecord(i2,arg1)},this[`AT_LEAST_ONE_SEP${idx}`]=function(arg1){this.atLeastOneSepFirstInternalRecord(i2,arg1)}}this.consume=function(idx,arg1,arg2){return this.consumeInternalRecord(arg1,idx,arg2)},this.subrule=function(idx,arg1,arg2){return this.subruleInternalRecord(arg1,idx,arg2)},this.option=function(idx,arg1){return this.optionInternalRecord(arg1,idx)},this.or=function(idx,arg1){return this.orInternalRecord(arg1,idx)},this.many=function(idx,arg1){this.manyInternalRecord(idx,arg1)},this.atLeastOne=function(idx,arg1){this.atLeastOneInternalRecord(idx,arg1)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const that=this;for(let i2=0;i2<10;i2++){const idx=i2>0?i2:"";delete that[`CONSUME${idx}`],delete that[`SUBRULE${idx}`],delete that[`OPTION${idx}`],delete that[`OR${idx}`],delete that[`MANY${idx}`],delete that[`MANY_SEP${idx}`],delete that[`AT_LEAST_ONE${idx}`],delete that[`AT_LEAST_ONE_SEP${idx}`]}delete that.consume,delete that.subrule,delete that.option,delete that.or,delete that.many,delete that.atLeastOne,delete that.ACTION,delete that.BACKTRACK,delete that.LA})}ACTION_RECORD(impl2){}BACKTRACK_RECORD(grammarRule,args){return()=>!0}LA_RECORD(howMuch){return END_OF_FILE}topLevelRuleRecord(name,def){try{const newTopLevelRule=new Rule({definition:[],name:name});return newTopLevelRule.name=name,this.recordingProdStack.push(newTopLevelRule),def.call(this),this.recordingProdStack.pop(),newTopLevelRule}catch(originalError){if(!0!==originalError.KNOWN_RECORDER_ERROR)try{originalError.message=originalError.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(mutabilityError){throw originalError}throw originalError}}optionInternalRecord(actionORMethodDef,occurrence){return recordProd.call(this,Option2,actionORMethodDef,occurrence)}atLeastOneInternalRecord(occurrence,actionORMethodDef){recordProd.call(this,RepetitionMandatory,actionORMethodDef,occurrence)}atLeastOneSepFirstInternalRecord(occurrence,options2){recordProd.call(this,RepetitionMandatoryWithSeparator,options2,occurrence,true)}manyInternalRecord(occurrence,actionORMethodDef){recordProd.call(this,Repetition,actionORMethodDef,occurrence)}manySepFirstInternalRecord(occurrence,options2){recordProd.call(this,RepetitionWithSeparator,options2,occurrence,true)}orInternalRecord(altsOrOpts,occurrence){return recordOrProd.call(this,altsOrOpts,occurrence)}subruleInternalRecord(ruleToCall,occurrence,options2){if(assertMethodIdxIsValid(occurrence),!ruleToCall||!1===has_default(ruleToCall,"ruleName")){const error3=new Error(`<SUBRULE${getIdxSuffix(occurrence)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(ruleToCall)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw error3.KNOWN_RECORDER_ERROR=!0,error3}const prevProd=last_default(this.recordingProdStack),ruleName=ruleToCall.ruleName,newNoneTerminal=new NonTerminal({idx:occurrence,nonTerminalName:ruleName,label:null==options2?void 0:options2.LABEL,referencedRule:void 0});return prevProd.definition.push(newNoneTerminal),this.outputCst?RECORDING_PHASE_CSTNODE:RECORDING_NULL_OBJECT}consumeInternalRecord(tokType,occurrence,options2){if(assertMethodIdxIsValid(occurrence),!hasShortKeyProperty(tokType)){const error3=new Error(`<CONSUME${getIdxSuffix(occurrence)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(tokType)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw error3.KNOWN_RECORDER_ERROR=!0,error3}const prevProd=last_default(this.recordingProdStack),newNoneTerminal=new Terminal({idx:occurrence,terminalType:tokType,label:null==options2?void 0:options2.LABEL});return prevProd.definition.push(newNoneTerminal),RECORDING_PHASE_TOKEN}},__name(recordProd,"recordProd"),__name(recordOrProd,"recordOrProd"),__name(getIdxSuffix,"getIdxSuffix"),__name(assertMethodIdxIsValid,"assertMethodIdxIsValid")}}),init_perf_tracer=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/traits/perf_tracer.js"(){init_lodash(),init_api2(),init_parser(),PerformanceTracer=class{static{__name(this,"PerformanceTracer")}initPerformanceTracer(config5){if(has_default(config5,"traceInitPerf")){const userTraceInitPerf=config5.traceInitPerf,traceIsNumber="number"==typeof userTraceInitPerf;this.traceInitMaxIdent=traceIsNumber?userTraceInitPerf:1/0,this.traceInitPerf=traceIsNumber?userTraceInitPerf>0:userTraceInitPerf}else this.traceInitMaxIdent=0,this.traceInitPerf=DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(phaseDesc,phaseImpl){if(!0===this.traceInitPerf){this.traceInitIndent++;const indent=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${indent}--\x3e <${phaseDesc}>`);const{time:time4,value:value2}=timer2(phaseImpl),traceMethod=time4>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&traceMethod(`${indent}<-- <${phaseDesc}> time: ${time4}ms`),this.traceInitIndent--,value2}return phaseImpl()}}}});function applyMixins(derivedCtor,baseCtors){baseCtors.forEach(baseCtor=>{const baseProto=baseCtor.prototype;Object.getOwnPropertyNames(baseProto).forEach(propName=>{if("constructor"===propName)return;const basePropDescriptor=Object.getOwnPropertyDescriptor(baseProto,propName);basePropDescriptor&&(basePropDescriptor.get||basePropDescriptor.set)?Object.defineProperty(derivedCtor.prototype,propName,basePropDescriptor):derivedCtor.prototype[propName]=baseCtor.prototype[propName]})})}var END_OF_FILE,DEFAULT_PARSER_CONFIG,DEFAULT_RULE_CONFIG,ParserDefinitionErrorType,Parser2,EmbeddedActionsParser,init_apply_mixins=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/utils/apply_mixins.js"(){__name(applyMixins,"applyMixins")}});function EMPTY_ALT(value2=void 0){return function(){return value2}}var ATN_BASIC,ATN_RULE_START,ATN_PLUS_BLOCK_START,ATN_STAR_BLOCK_START,ATN_RULE_STOP,ATN_BLOCK_END,ATN_STAR_LOOP_BACK,ATN_STAR_LOOP_ENTRY,ATN_PLUS_LOOP_BACK,ATN_LOOP_END,AbstractTransition,AtomTransition,EpsilonTransition,RuleTransition,init_parser=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/parse/parser/parser.js"(){var ParserDefinitionErrorType2;init_lodash(),init_api2(),init_follow(),init_tokens_public(),init_errors_public(),init_gast_resolver_public(),init_recoverable(),init_looksahead(),init_tree_builder(),init_lexer_adapter(),init_recognizer_api(),init_recognizer_engine(),init_error_handler(),init_context_assist(),init_gast_recorder(),init_perf_tracer(),init_apply_mixins(),init_checks(),END_OF_FILE=createTokenInstance(EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(END_OF_FILE),DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:__name(()=>{},"recoveryValueFunc"),resyncEnabled:!0}),(ParserDefinitionErrorType2=ParserDefinitionErrorType||(ParserDefinitionErrorType={}))[ParserDefinitionErrorType2.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",ParserDefinitionErrorType2[ParserDefinitionErrorType2.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",ParserDefinitionErrorType2[ParserDefinitionErrorType2.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",ParserDefinitionErrorType2[ParserDefinitionErrorType2.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",ParserDefinitionErrorType2[ParserDefinitionErrorType2.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",ParserDefinitionErrorType2[ParserDefinitionErrorType2.LEFT_RECURSION=5]="LEFT_RECURSION",ParserDefinitionErrorType2[ParserDefinitionErrorType2.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",ParserDefinitionErrorType2[ParserDefinitionErrorType2.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",ParserDefinitionErrorType2[ParserDefinitionErrorType2.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",ParserDefinitionErrorType2[ParserDefinitionErrorType2.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",ParserDefinitionErrorType2[ParserDefinitionErrorType2.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",ParserDefinitionErrorType2[ParserDefinitionErrorType2.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",ParserDefinitionErrorType2[ParserDefinitionErrorType2.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",ParserDefinitionErrorType2[ParserDefinitionErrorType2.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION",__name(EMPTY_ALT,"EMPTY_ALT"),(Parser2=class _Parser{static{__name(this,"Parser")}static performSelfAnalysis(parserInstance){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let defErrorsMsgs;this.selfAnalysisDone=!0;const className=this.className;this.TRACE_INIT("toFastProps",()=>{toFastProperties(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),forEach_default(this.definedRulesNames,currRuleName=>{const originalGrammarAction=this[currRuleName].originalGrammarAction;let recordedRuleGast;this.TRACE_INIT(`${currRuleName} Rule`,()=>{recordedRuleGast=this.topLevelRuleRecord(currRuleName,originalGrammarAction)}),this.gastProductionsCache[currRuleName]=recordedRuleGast})}finally{this.disableRecording()}});let resolverErrors=[];if(this.TRACE_INIT("Grammar Resolving",()=>{resolverErrors=resolveGrammar2({rules:values_default(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(resolverErrors)}),this.TRACE_INIT("Grammar Validations",()=>{if(isEmpty_default(resolverErrors)&&!1===this.skipValidations){const validationErrors=validateGrammar2({rules:values_default(this.gastProductionsCache),tokenTypes:values_default(this.tokensMap),errMsgProvider:defaultGrammarValidatorErrorProvider,grammarName:className}),lookaheadValidationErrors=validateLookahead({lookaheadStrategy:this.lookaheadStrategy,rules:values_default(this.gastProductionsCache),tokenTypes:values_default(this.tokensMap),grammarName:className});this.definitionErrors=this.definitionErrors.concat(validationErrors,lookaheadValidationErrors)}}),isEmpty_default(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const allFollows=computeAllProdsFollows(values_default(this.gastProductionsCache));this.resyncFollows=allFollows}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var _a,_b;null===(_b=(_a=this.lookaheadStrategy).initialize)||void 0===_b||_b.call(_a,{rules:values_default(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(values_default(this.gastProductionsCache))})),!_Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!isEmpty_default(this.definitionErrors))throw defErrorsMsgs=map_default(this.definitionErrors,defError=>defError.message),new Error(`Parser Definition Errors detected:\n ${defErrorsMsgs.join("\n-------------------------------\n")}`)})}constructor(tokenVocabulary,config5){this.definitionErrors=[],this.selfAnalysisDone=!1;if(this.initErrorHandler(config5),this.initLexerAdapter(),this.initLooksAhead(config5),this.initRecognizerEngine(tokenVocabulary,config5),this.initRecoverable(config5),this.initTreeBuilder(config5),this.initContentAssist(),this.initGastRecorder(config5),this.initPerformanceTracer(config5),has_default(config5,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=has_default(config5,"skipValidations")?config5.skipValidations:DEFAULT_PARSER_CONFIG.skipValidations}}).DEFER_DEFINITION_ERRORS_HANDLING=!1,applyMixins(Parser2,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]),EmbeddedActionsParser=class extends Parser2{static{__name(this,"EmbeddedActionsParser")}constructor(tokenVocabulary,config5=DEFAULT_PARSER_CONFIG){const configClone=clone_default2(config5);configClone.outputCst=!1,super(tokenVocabulary,configClone)}}}}),init_model2=__esm({"../../node_modules/.pnpm/@chevrotain+cst-dts-gen@11.0.3/node_modules/@chevrotain/cst-dts-gen/lib/src/model.js"(){init_api3()}}),init_generate=__esm({"../../node_modules/.pnpm/@chevrotain+cst-dts-gen@11.0.3/node_modules/@chevrotain/cst-dts-gen/lib/src/generate.js"(){}}),init_api4=__esm({"../../node_modules/.pnpm/@chevrotain+cst-dts-gen@11.0.3/node_modules/@chevrotain/cst-dts-gen/lib/src/api.js"(){init_model2(),init_generate()}}),init_render_public=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/diagrams/render_public.js"(){init_version()}}),init_api5=__esm({"../../node_modules/.pnpm/chevrotain@11.0.3/node_modules/chevrotain/lib/src/api.js"(){init_version(),init_parser(),init_lexer_public(),init_tokens_public(),init_lookahead(),init_llk_lookahead(),init_errors_public(),init_exceptions_public(),init_lexer_errors_public(),init_api3(),init_api3(),init_api4(),init_render_public()}});function buildATNKey(rule,type3,occurrence){return`${rule.name}_${type3}_${occurrence}`}function createATN(rules){const atn={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};createRuleStartAndStopATNStates(atn,rules);const ruleLength=rules.length;for(let i2=0;i2<ruleLength;i2++){const rule=rules[i2],ruleBlock=block(atn,rule,rule);void 0!==ruleBlock&&buildRuleHandle(atn,rule,ruleBlock)}return atn}function createRuleStartAndStopATNStates(atn,rules){const ruleLength=rules.length;for(let i2=0;i2<ruleLength;i2++){const rule=rules[i2],start3=newState(atn,rule,void 0,{type:ATN_RULE_START}),stop5=newState(atn,rule,void 0,{type:ATN_RULE_STOP});start3.stop=stop5,atn.ruleToStartState.set(rule,start3),atn.ruleToStopState.set(rule,stop5)}}function atom(atn,rule,production){return production instanceof Terminal?tokenRef(atn,rule,production.terminalType,production):production instanceof NonTerminal?ruleRef(atn,rule,production):production instanceof Alternation?alternation(atn,rule,production):production instanceof Option2?option(atn,rule,production):production instanceof Repetition?repetition(atn,rule,production):production instanceof RepetitionWithSeparator?repetitionSep(atn,rule,production):production instanceof RepetitionMandatory?repetitionMandatory(atn,rule,production):production instanceof RepetitionMandatoryWithSeparator?repetitionMandatorySep(atn,rule,production):block(atn,rule,production)}function repetition(atn,rule,repetition2){const starState=newState(atn,rule,repetition2,{type:ATN_STAR_BLOCK_START});defineDecisionState(atn,starState);return star(atn,rule,repetition2,makeAlts(atn,rule,starState,repetition2,block(atn,rule,repetition2)))}function repetitionSep(atn,rule,repetition2){const starState=newState(atn,rule,repetition2,{type:ATN_STAR_BLOCK_START});defineDecisionState(atn,starState);return star(atn,rule,repetition2,makeAlts(atn,rule,starState,repetition2,block(atn,rule,repetition2)),tokenRef(atn,rule,repetition2.separator,repetition2))}function repetitionMandatory(atn,rule,repetition2){const plusState=newState(atn,rule,repetition2,{type:ATN_PLUS_BLOCK_START});defineDecisionState(atn,plusState);return plus(atn,rule,repetition2,makeAlts(atn,rule,plusState,repetition2,block(atn,rule,repetition2)))}function repetitionMandatorySep(atn,rule,repetition2){const plusState=newState(atn,rule,repetition2,{type:ATN_PLUS_BLOCK_START});defineDecisionState(atn,plusState);return plus(atn,rule,repetition2,makeAlts(atn,rule,plusState,repetition2,block(atn,rule,repetition2)),tokenRef(atn,rule,repetition2.separator,repetition2))}function alternation(atn,rule,alternation2){const start3=newState(atn,rule,alternation2,{type:ATN_BASIC});defineDecisionState(atn,start3);const alts=map_default(alternation2.definition,e3=>atom(atn,rule,e3));return makeAlts(atn,rule,start3,alternation2,...alts)}function option(atn,rule,option2){const start3=newState(atn,rule,option2,{type:ATN_BASIC});defineDecisionState(atn,start3);return optional(atn,rule,option2,makeAlts(atn,rule,start3,option2,block(atn,rule,option2)))}function block(atn,rule,block2){const handles=filter_default3(map_default(block2.definition,e3=>atom(atn,rule,e3)),e3=>void 0!==e3);return 1===handles.length?handles[0]:0===handles.length?void 0:makeBlock(atn,handles)}function plus(atn,rule,plus2,handle,sep2){const blkStart=handle.left,blkEnd=handle.right,loop=newState(atn,rule,plus2,{type:ATN_PLUS_LOOP_BACK});defineDecisionState(atn,loop);const end2=newState(atn,rule,plus2,{type:ATN_LOOP_END});return blkStart.loopback=loop,end2.loopback=loop,atn.decisionMap[buildATNKey(rule,sep2?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",plus2.idx)]=loop,epsilon4(blkEnd,loop),void 0===sep2?(epsilon4(loop,blkStart),epsilon4(loop,end2)):(epsilon4(loop,end2),epsilon4(loop,sep2.left),epsilon4(sep2.right,blkStart)),{left:blkStart,right:end2}}function star(atn,rule,star2,handle,sep2){const start3=handle.left,end2=handle.right,entry=newState(atn,rule,star2,{type:ATN_STAR_LOOP_ENTRY});defineDecisionState(atn,entry);const loopEnd=newState(atn,rule,star2,{type:ATN_LOOP_END}),loop=newState(atn,rule,star2,{type:ATN_STAR_LOOP_BACK});return entry.loopback=loop,loopEnd.loopback=loop,epsilon4(entry,start3),epsilon4(entry,loopEnd),epsilon4(end2,loop),void 0!==sep2?(epsilon4(loop,loopEnd),epsilon4(loop,sep2.left),epsilon4(sep2.right,start3)):epsilon4(loop,entry),atn.decisionMap[buildATNKey(rule,sep2?"RepetitionWithSeparator":"Repetition",star2.idx)]=entry,{left:entry,right:loopEnd}}function optional(atn,rule,optional2,handle){const start3=handle.left;return epsilon4(start3,handle.right),atn.decisionMap[buildATNKey(rule,"Option",optional2.idx)]=start3,handle}function defineDecisionState(atn,state3){return atn.decisionStates.push(state3),state3.decision=atn.decisionStates.length-1,state3.decision}function makeAlts(atn,rule,start3,production,...alts){const end2=newState(atn,rule,production,{type:ATN_BLOCK_END,start:start3});start3.end=end2;for(const alt of alts)void 0!==alt?(epsilon4(start3,alt.left),epsilon4(alt.right,end2)):epsilon4(start3,end2);const handle={left:start3,right:end2};return atn.decisionMap[buildATNKey(rule,getProdType2(production),production.idx)]=start3,handle}function getProdType2(production){if(production instanceof Alternation)return"Alternation";if(production instanceof Option2)return"Option";if(production instanceof Repetition)return"Repetition";if(production instanceof RepetitionWithSeparator)return"RepetitionWithSeparator";if(production instanceof RepetitionMandatory)return"RepetitionMandatory";if(production instanceof RepetitionMandatoryWithSeparator)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function makeBlock(atn,alts){const altsLength=alts.length;for(let i2=0;i2<altsLength-1;i2++){const handle=alts[i2];let transition2;1===handle.left.transitions.length&&(transition2=handle.left.transitions[0]);const isRuleTransition=transition2 instanceof RuleTransition,ruleTransition=transition2,next3=alts[i2+1].left;handle.left.type===ATN_BASIC&&handle.right.type===ATN_BASIC&&void 0!==transition2&&(isRuleTransition&&ruleTransition.followState===handle.right||transition2.target===handle.right)?(isRuleTransition?ruleTransition.followState=next3:transition2.target=next3,removeState(atn,handle.right)):epsilon4(handle.right,next3)}const first3=alts[0],last3=alts[altsLength-1];return{left:first3.left,right:last3.right}}function tokenRef(atn,rule,tokenType,production){const left3=newState(atn,rule,production,{type:ATN_BASIC}),right3=newState(atn,rule,production,{type:ATN_BASIC});return addTransition(left3,new AtomTransition(right3,tokenType)),{left:left3,right:right3}}function ruleRef(atn,currentRule,nonTerminal){const rule=nonTerminal.referencedRule,start3=atn.ruleToStartState.get(rule),left3=newState(atn,currentRule,nonTerminal,{type:ATN_BASIC}),right3=newState(atn,currentRule,nonTerminal,{type:ATN_BASIC});return addTransition(left3,new RuleTransition(start3,rule,right3)),{left:left3,right:right3}}function buildRuleHandle(atn,rule,block2){const start3=atn.ruleToStartState.get(rule);epsilon4(start3,block2.left);const stop5=atn.ruleToStopState.get(rule);epsilon4(block2.right,stop5);return{left:start3,right:stop5}}function epsilon4(a2,b3){addTransition(a2,new EpsilonTransition(b3))}function newState(atn,rule,production,partial){const t4=Object.assign({atn:atn,production:production,epsilonOnlyTransitions:!1,rule:rule,transitions:[],nextTokenWithinRule:[],stateNumber:atn.states.length},partial);return atn.states.push(t4),t4}function addTransition(state3,transition2){0===state3.transitions.length&&(state3.epsilonOnlyTransitions=transition2.isEpsilon()),state3.transitions.push(transition2)}function removeState(atn,state3){atn.states.splice(atn.states.indexOf(state3),1)}var DFA_ERROR,ATNConfigSet,init_atn=__esm({"../../node_modules/.pnpm/chevrotain-allstar@0.3.1_chevrotain@11.0.3/node_modules/chevrotain-allstar/lib/atn.js"(){init_map(),init_filter3(),init_api5(),__name(buildATNKey,"buildATNKey"),ATN_BASIC=1,ATN_RULE_START=2,ATN_PLUS_BLOCK_START=4,ATN_STAR_BLOCK_START=5,ATN_RULE_STOP=7,ATN_BLOCK_END=8,ATN_STAR_LOOP_BACK=9,ATN_STAR_LOOP_ENTRY=10,ATN_PLUS_LOOP_BACK=11,ATN_LOOP_END=12,AbstractTransition=class{static{__name(this,"AbstractTransition")}constructor(target){this.target=target}isEpsilon(){return!1}},AtomTransition=class extends AbstractTransition{static{__name(this,"AtomTransition")}constructor(target,tokenType){super(target),this.tokenType=tokenType}},EpsilonTransition=class extends AbstractTransition{static{__name(this,"EpsilonTransition")}constructor(target){super(target)}isEpsilon(){return!0}},RuleTransition=class extends AbstractTransition{static{__name(this,"RuleTransition")}constructor(ruleStart,rule,followState){super(ruleStart),this.rule=rule,this.followState=followState}isEpsilon(){return!0}},__name(createATN,"createATN"),__name(createRuleStartAndStopATNStates,"createRuleStartAndStopATNStates"),__name(atom,"atom"),__name(repetition,"repetition"),__name(repetitionSep,"repetitionSep"),__name(repetitionMandatory,"repetitionMandatory"),__name(repetitionMandatorySep,"repetitionMandatorySep"),__name(alternation,"alternation"),__name(option,"option"),__name(block,"block"),__name(plus,"plus"),__name(star,"star"),__name(optional,"optional"),__name(defineDecisionState,"defineDecisionState"),__name(makeAlts,"makeAlts"),__name(getProdType2,"getProdType"),__name(makeBlock,"makeBlock"),__name(tokenRef,"tokenRef"),__name(ruleRef,"ruleRef"),__name(buildRuleHandle,"buildRuleHandle"),__name(epsilon4,"epsilon"),__name(newState,"newState"),__name(addTransition,"addTransition"),__name(removeState,"removeState")}});function getATNConfigKey(config5,alt=!0){return`${alt?`a${config5.alt}`:""}s${config5.state.stateNumber}:${config5.stack.map(e3=>e3.stateNumber.toString()).join("_")}`}var PredicateSet,EMPTY_PREDICATES,LLStarLookaheadStrategy,init_dfa=__esm({"../../node_modules/.pnpm/chevrotain-allstar@0.3.1_chevrotain@11.0.3/node_modules/chevrotain-allstar/lib/dfa.js"(){init_map(),DFA_ERROR={},ATNConfigSet=class{static{__name(this,"ATNConfigSet")}constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(config5){const key=getATNConfigKey(config5);key in this.map||(this.map[key]=this.configs.length,this.configs.push(config5))}get elements(){return this.configs}get alts(){return map_default(this.configs,e3=>e3.alt)}get key(){let value2="";for(const k2 in this.map)value2+=k2+":";return value2}},__name(getATNConfigKey,"getATNConfigKey")}});function createDFACache(startState,decision){const map5={};return predicateSet=>{const key=predicateSet.toString();let existing=map5[key];return void 0!==existing||(existing={atnStartState:startState,decision:decision,states:{}},map5[key]=existing),existing}}function isLL1Sequence(sequences,allowEmpty=!0){const fullSet=new Set;for(const alt of sequences){const altSet=new Set;for(const tokType of alt){if(void 0===tokType){if(allowEmpty)break;return!1}const indices=[tokType.tokenTypeIdx].concat(tokType.categoryMatches);for(const index of indices)if(fullSet.has(index)){if(!altSet.has(index))return!1}else fullSet.add(index),altSet.add(index)}}return!0}function initATNSimulator(atn){const decisionLength=atn.decisionStates.length,decisionToDFA=Array(decisionLength);for(let i2=0;i2<decisionLength;i2++)decisionToDFA[i2]=createDFACache(atn.decisionStates[i2],i2);return decisionToDFA}function adaptivePredict(dfaCaches,decision,predicateSet,logging){const dfa=dfaCaches[decision](predicateSet);let start3=dfa.start;if(void 0===start3){start3=addDFAState(dfa,newDFAState(computeStartState(dfa.atnStartState))),dfa.start=start3}return performLookahead.apply(this,[dfa,start3,predicateSet,logging])}function performLookahead(dfa,s0,predicateSet,logging){let previousD=s0,i2=1;const path4=[];let t4=this.LA(i2++);for(;;){let d3=getExistingTargetState(previousD,t4);if(void 0===d3&&(d3=computeLookaheadTarget.apply(this,[dfa,previousD,t4,i2,predicateSet,logging])),d3===DFA_ERROR)return buildAdaptivePredictError(path4,previousD,t4);if(!0===d3.isAcceptState)return d3.prediction;previousD=d3,path4.push(t4),t4=this.LA(i2++)}}function computeLookaheadTarget(dfa,previousD,token2,lookahead,predicateSet,logging){const reach=computeReachSet(previousD.configs,token2,predicateSet);if(0===reach.size)return addDFAEdge(dfa,previousD,token2,DFA_ERROR),DFA_ERROR;let newState2=newDFAState(reach);const predictedAlt=getUniqueAlt(reach,predicateSet);if(void 0!==predictedAlt)newState2.isAcceptState=!0,newState2.prediction=predictedAlt,newState2.configs.uniqueAlt=predictedAlt;else if(hasConflictTerminatingPrediction(reach)){const prediction=min_default(reach.alts);newState2.isAcceptState=!0,newState2.prediction=prediction,newState2.configs.uniqueAlt=prediction,reportLookaheadAmbiguity.apply(this,[dfa,lookahead,reach.alts,logging])}return newState2=addDFAEdge(dfa,previousD,token2,newState2),newState2}function reportLookaheadAmbiguity(dfa,lookahead,ambiguityIndices,logging){const prefixPath=[];for(let i2=1;i2<=lookahead;i2++)prefixPath.push(this.LA(i2).tokenType);const atnState=dfa.atnStartState;logging(buildAmbiguityError({topLevelRule:atnState.rule,ambiguityIndices:ambiguityIndices,production:atnState.production,prefixPath:prefixPath}))}function buildAmbiguityError(options2){const pathMsg=map_default(options2.prefixPath,currtok=>tokenLabel2(currtok)).join(", "),occurrence=0===options2.production.idx?"":options2.production.idx;let currMessage=`Ambiguous Alternatives Detected: <${options2.ambiguityIndices.join(", ")}> in <${getProductionDslName2(options2.production)}${occurrence}> inside <${options2.topLevelRule.name}> Rule,\n<${pathMsg}> may appears as a prefix path in all these alternatives.\n`;return currMessage+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",currMessage}function getProductionDslName2(prod){if(prod instanceof NonTerminal)return"SUBRULE";if(prod instanceof Option2)return"OPTION";if(prod instanceof Alternation)return"OR";if(prod instanceof RepetitionMandatory)return"AT_LEAST_ONE";if(prod instanceof RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(prod instanceof RepetitionWithSeparator)return"MANY_SEP";if(prod instanceof Repetition)return"MANY";if(prod instanceof Terminal)return"CONSUME";throw Error("non exhaustive match")}function buildAdaptivePredictError(path4,previous,current){const nextTransitions=flatMap_default(previous.configs.elements,e3=>e3.state.transitions);return{actualToken:current,possibleTokenTypes:uniqBy_default(nextTransitions.filter(e3=>e3 instanceof AtomTransition).map(e3=>e3.tokenType),e3=>e3.tokenTypeIdx),tokenPath:path4}}function getExistingTargetState(state3,token2){return state3.edges[token2.tokenTypeIdx]}function computeReachSet(configs,token2,predicateSet){const intermediate=new ATNConfigSet,skippedStopStates=[];for(const c3 of configs.elements){if(!1===predicateSet.is(c3.alt))continue;if(c3.state.type===ATN_RULE_STOP){skippedStopStates.push(c3);continue}const transitionLength=c3.state.transitions.length;for(let i2=0;i2<transitionLength;i2++){const target=getReachableTarget(c3.state.transitions[i2],token2);void 0!==target&&intermediate.add({state:target,alt:c3.alt,stack:c3.stack})}}let reach;if(0===skippedStopStates.length&&1===intermediate.size&&(reach=intermediate),void 0===reach){reach=new ATNConfigSet;for(const c3 of intermediate.elements)closure(c3,reach)}if(skippedStopStates.length>0&&!hasConfigInRuleStopState(reach))for(const c3 of skippedStopStates)reach.add(c3);return reach}function getReachableTarget(transition2,token2){if(transition2 instanceof AtomTransition&&tokenMatcher(token2,transition2.tokenType))return transition2.target}function getUniqueAlt(configs,predicateSet){let alt;for(const c3 of configs.elements)if(!0===predicateSet.is(c3.alt))if(void 0===alt)alt=c3.alt;else if(alt!==c3.alt)return;return alt}function newDFAState(closure2){return{configs:closure2,edges:{},isAcceptState:!1,prediction:-1}}function addDFAEdge(dfa,from2,token2,to){return to=addDFAState(dfa,to),from2.edges[token2.tokenTypeIdx]=to,to}function addDFAState(dfa,state3){if(state3===DFA_ERROR)return state3;const mapKey=state3.configs.key,existing=dfa.states[mapKey];return void 0!==existing?existing:(state3.configs.finalize(),dfa.states[mapKey]=state3,state3)}function computeStartState(atnState){const configs=new ATNConfigSet,numberOfTransitions=atnState.transitions.length;for(let i2=0;i2<numberOfTransitions;i2++){closure({state:atnState.transitions[i2].target,alt:i2,stack:[]},configs)}return configs}function closure(config5,configs){const p3=config5.state;if(p3.type===ATN_RULE_STOP){if(config5.stack.length>0){const atnStack=[...config5.stack];closure({state:atnStack.pop(),alt:config5.alt,stack:atnStack},configs)}else configs.add(config5);return}p3.epsilonOnlyTransitions||configs.add(config5);const transitionLength=p3.transitions.length;for(let i2=0;i2<transitionLength;i2++){const c3=getEpsilonTarget(config5,p3.transitions[i2]);void 0!==c3&&closure(c3,configs)}}function getEpsilonTarget(config5,transition2){if(transition2 instanceof EpsilonTransition)return{state:transition2.target,alt:config5.alt,stack:config5.stack};if(transition2 instanceof RuleTransition){const stack=[...config5.stack,transition2.followState];return{state:transition2.target,alt:config5.alt,stack:stack}}}function hasConfigInRuleStopState(configs){for(const c3 of configs.elements)if(c3.state.type===ATN_RULE_STOP)return!0;return!1}function allConfigsInRuleStopStates(configs){for(const c3 of configs.elements)if(c3.state.type!==ATN_RULE_STOP)return!1;return!0}function hasConflictTerminatingPrediction(configs){if(allConfigsInRuleStopStates(configs))return!0;const altSets=getConflictingAltSets(configs.elements);return hasConflictingAltSet(altSets)&&!hasStateAssociatedWithOneAlt(altSets)}function getConflictingAltSets(configs){const configToAlts=new Map;for(const c3 of configs){const key=getATNConfigKey(c3,!1);let alts=configToAlts.get(key);void 0===alts&&(alts={},configToAlts.set(key,alts)),alts[c3.alt]=!0}return configToAlts}function hasConflictingAltSet(altSets){for(const value2 of Array.from(altSets.values()))if(Object.keys(value2).length>1)return!0;return!1}function hasStateAssociatedWithOneAlt(altSets){for(const value2 of Array.from(altSets.values()))if(1===Object.keys(value2).length)return!0;return!1}var DocumentUri,URI,integer3,uinteger,Position,Range,Location,LocationLink,Color3,ColorInformation,ColorPresentation,FoldingRangeKind,FoldingRange,DiagnosticRelatedInformation,DiagnosticSeverity,DiagnosticTag,CodeDescription,Diagnostic,Command,TextEdit,ChangeAnnotation,ChangeAnnotationIdentifier,AnnotatedTextEdit,TextDocumentEdit,CreateFile,RenameFile,DeleteFile,WorkspaceEdit,TextDocumentIdentifier,VersionedTextDocumentIdentifier,OptionalVersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,MarkupContent,CompletionItemKind,InsertTextFormat,CompletionItemTag,InsertReplaceEdit,InsertTextMode,CompletionItemLabelDetails,CompletionItem,CompletionList,MarkedString,Hover,ParameterInformation,SignatureInformation,DocumentHighlightKind,DocumentHighlight,SymbolKind,SymbolTag,SymbolInformation,WorkspaceSymbol,DocumentSymbol,CodeActionKind,CodeActionTriggerKind,CodeActionContext,CodeAction,CodeLens,FormattingOptions,DocumentLink,SelectionRange,SemanticTokenTypes,SemanticTokenModifiers,SemanticTokens,InlineValueText,InlineValueVariableLookup,InlineValueEvaluatableExpression,InlineValueContext,InlayHintKind,InlayHintLabelPart,InlayHint,StringValue,InlineCompletionItem,InlineCompletionList,InlineCompletionTriggerKind,SelectedCompletionInfo,InlineCompletionContext,WorkspaceFolder,TextDocument,FullTextDocument,Is,CstNodeBuilder,AbstractCstNode,LeafCstNodeImpl,CompositeCstNodeImpl,CstNodeContainer,RootCstNodeImpl,DatatypeSymbol,withRuleSuffix,AbstractLangiumParser,LangiumParser,AbstractParserErrorMessageProvider,LangiumParserErrorMessageProvider,LangiumCompletionParser,defaultConfig3,ChevrotainWrapper,init_all_star_lookahead=__esm({"../../node_modules/.pnpm/chevrotain-allstar@0.3.1_chevrotain@11.0.3/node_modules/chevrotain-allstar/lib/all-star-lookahead.js"(){init_api5(),init_atn(),init_dfa(),init_min2(),init_flatMap(),init_uniqBy(),init_map(),init_flatten(),init_forEach(),init_isEmpty(),init_reduce(),__name(createDFACache,"createDFACache"),PredicateSet=class{static{__name(this,"PredicateSet")}constructor(){this.predicates=[]}is(index){return index>=this.predicates.length||this.predicates[index]}set(index,value2){this.predicates[index]=value2}toString(){let value2="";const size4=this.predicates.length;for(let i2=0;i2<size4;i2++)value2+=!0===this.predicates[i2]?"1":"0";return value2}},EMPTY_PREDICATES=new PredicateSet,LLStarLookaheadStrategy=class extends LLkLookaheadStrategy{static{__name(this,"LLStarLookaheadStrategy")}constructor(options2){var _a;super(),this.logging=null!==(_a=null==options2?void 0:options2.logging)&&void 0!==_a?_a:message=>console.log(message)}initialize(options2){this.atn=createATN(options2.rules),this.dfas=initATNSimulator(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(options2){const{prodOccurrence:prodOccurrence,rule:rule,hasPredicates:hasPredicates,dynamicTokensEnabled:dynamicTokensEnabled}=options2,dfas=this.dfas,logging=this.logging,key=buildATNKey(rule,"Alternation",prodOccurrence),decisionIndex=this.atn.decisionMap[key].decision,partialAlts=map_default(getLookaheadPaths({maxLookahead:1,occurrence:prodOccurrence,prodType:"Alternation",rule:rule}),currAlt=>map_default(currAlt,path4=>path4[0]));if(isLL1Sequence(partialAlts,!1)&&!dynamicTokensEnabled){const choiceToAlt=reduce_default(partialAlts,(result,currAlt,idx)=>(forEach_default(currAlt,currTokType=>{currTokType&&(result[currTokType.tokenTypeIdx]=idx,forEach_default(currTokType.categoryMatches,currExtendingType=>{result[currExtendingType]=idx}))}),result),{});return hasPredicates?function(orAlts){var _a;const nextToken=this.LA(1),prediction=choiceToAlt[nextToken.tokenTypeIdx];if(void 0!==orAlts&&void 0!==prediction){const gate=null===(_a=orAlts[prediction])||void 0===_a?void 0:_a.GATE;if(void 0!==gate&&!1===gate.call(this))return}return prediction}:function(){const nextToken=this.LA(1);return choiceToAlt[nextToken.tokenTypeIdx]}}return hasPredicates?function(orAlts){const predicates=new PredicateSet,length2=void 0===orAlts?0:orAlts.length;for(let i2=0;i2<length2;i2++){const gate=null==orAlts?void 0:orAlts[i2].GATE;predicates.set(i2,void 0===gate||gate.call(this))}const result=adaptivePredict.call(this,dfas,decisionIndex,predicates,logging);return"number"==typeof result?result:void 0}:function(){const result=adaptivePredict.call(this,dfas,decisionIndex,EMPTY_PREDICATES,logging);return"number"==typeof result?result:void 0}}buildLookaheadForOptional(options2){const{prodOccurrence:prodOccurrence,rule:rule,prodType:prodType,dynamicTokensEnabled:dynamicTokensEnabled}=options2,dfas=this.dfas,logging=this.logging,key=buildATNKey(rule,prodType,prodOccurrence),decisionIndex=this.atn.decisionMap[key].decision,alts=map_default(getLookaheadPaths({maxLookahead:1,occurrence:prodOccurrence,prodType:prodType,rule:rule}),e3=>map_default(e3,g2=>g2[0]));if(isLL1Sequence(alts)&&alts[0][0]&&!dynamicTokensEnabled){const alt=alts[0],singleTokensTypes=flatten_default(alt);if(1===singleTokensTypes.length&&isEmpty_default(singleTokensTypes[0].categoryMatches)){const expectedTokenUniqueKey=singleTokensTypes[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===expectedTokenUniqueKey}}{const choiceToAlt=reduce_default(singleTokensTypes,(result,currTokType)=>(void 0!==currTokType&&(result[currTokType.tokenTypeIdx]=!0,forEach_default(currTokType.categoryMatches,currExtendingType=>{result[currExtendingType]=!0})),result),{});return function(){const nextToken=this.LA(1);return!0===choiceToAlt[nextToken.tokenTypeIdx]}}}return function(){const result=adaptivePredict.call(this,dfas,decisionIndex,EMPTY_PREDICATES,logging);return"object"!=typeof result&&0===result}}},__name(isLL1Sequence,"isLL1Sequence"),__name(initATNSimulator,"initATNSimulator"),__name(adaptivePredict,"adaptivePredict"),__name(performLookahead,"performLookahead"),__name(computeLookaheadTarget,"computeLookaheadTarget"),__name(reportLookaheadAmbiguity,"reportLookaheadAmbiguity"),__name(buildAmbiguityError,"buildAmbiguityError"),__name(getProductionDslName2,"getProductionDslName"),__name(buildAdaptivePredictError,"buildAdaptivePredictError"),__name(getExistingTargetState,"getExistingTargetState"),__name(computeReachSet,"computeReachSet"),__name(getReachableTarget,"getReachableTarget"),__name(getUniqueAlt,"getUniqueAlt"),__name(newDFAState,"newDFAState"),__name(addDFAEdge,"addDFAEdge"),__name(addDFAState,"addDFAState"),__name(computeStartState,"computeStartState"),__name(closure,"closure"),__name(getEpsilonTarget,"getEpsilonTarget"),__name(hasConfigInRuleStopState,"hasConfigInRuleStopState"),__name(allConfigsInRuleStopStates,"allConfigsInRuleStopStates"),__name(hasConflictTerminatingPrediction,"hasConflictTerminatingPrediction"),__name(getConflictingAltSets,"getConflictingAltSets"),__name(hasConflictingAltSet,"hasConflictingAltSet"),__name(hasStateAssociatedWithOneAlt,"hasStateAssociatedWithOneAlt")}}),init_lib2=__esm({"../../node_modules/.pnpm/chevrotain-allstar@0.3.1_chevrotain@11.0.3/node_modules/chevrotain-allstar/lib/index.js"(){init_all_star_lookahead()}}),init_main=__esm({"../../node_modules/.pnpm/vscode-languageserver-types@3.17.5/node_modules/vscode-languageserver-types/lib/esm/main.js"(){var FoldingRangeKind2,DiagnosticSeverity2,DiagnosticTag2,CompletionItemKind2,InsertTextFormat2,InsertTextMode2,DocumentHighlightKind2,SymbolKind2,CodeActionKind2,CodeActionTriggerKind2,SemanticTokenTypes2,SemanticTokenModifiers2,InlineCompletionTriggerKind2;!function(DocumentUri2){function is2(value2){return"string"==typeof value2}__name(is2,"is"),DocumentUri2.is=is2}(DocumentUri||(DocumentUri={})),function(URI3){function is2(value2){return"string"==typeof value2}__name(is2,"is"),URI3.is=is2}(URI||(URI={})),function(integer4){function is2(value2){return"number"==typeof value2&&integer4.MIN_VALUE<=value2&&value2<=integer4.MAX_VALUE}integer4.MIN_VALUE=-2147483648,integer4.MAX_VALUE=2147483647,__name(is2,"is"),integer4.is=is2}(integer3||(integer3={})),function(uinteger2){function is2(value2){return"number"==typeof value2&&uinteger2.MIN_VALUE<=value2&&value2<=uinteger2.MAX_VALUE}uinteger2.MIN_VALUE=0,uinteger2.MAX_VALUE=2147483647,__name(is2,"is"),uinteger2.is=is2}(uinteger||(uinteger={})),function(Position2){function create4(line2,character2){return line2===Number.MAX_VALUE&&(line2=uinteger.MAX_VALUE),character2===Number.MAX_VALUE&&(character2=uinteger.MAX_VALUE),{line:line2,character:character2}}function is2(value2){let candidate=value2;return Is.objectLiteral(candidate)&&Is.uinteger(candidate.line)&&Is.uinteger(candidate.character)}__name(create4,"create"),Position2.create=create4,__name(is2,"is"),Position2.is=is2}(Position||(Position={})),function(Range2){function create4(one4,two,three,four){if(Is.uinteger(one4)&&Is.uinteger(two)&&Is.uinteger(three)&&Is.uinteger(four))return{start:Position.create(one4,two),end:Position.create(three,four)};if(Position.is(one4)&&Position.is(two))return{start:one4,end:two};throw new Error(`Range#create called with invalid arguments[${one4}, ${two}, ${three}, ${four}]`)}function is2(value2){let candidate=value2;return Is.objectLiteral(candidate)&&Position.is(candidate.start)&&Position.is(candidate.end)}__name(create4,"create"),Range2.create=create4,__name(is2,"is"),Range2.is=is2}(Range||(Range={})),function(Location2){function create4(uri,range3){return{uri:uri,range:range3}}function is2(value2){let candidate=value2;return Is.objectLiteral(candidate)&&Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}__name(create4,"create"),Location2.create=create4,__name(is2,"is"),Location2.is=is2}(Location||(Location={})),function(LocationLink2){function create4(targetUri,targetRange,targetSelectionRange,originSelectionRange){return{targetUri:targetUri,targetRange:targetRange,targetSelectionRange:targetSelectionRange,originSelectionRange:originSelectionRange}}function is2(value2){let candidate=value2;return Is.objectLiteral(candidate)&&Range.is(candidate.targetRange)&&Is.string(candidate.targetUri)&&Range.is(candidate.targetSelectionRange)&&(Range.is(candidate.originSelectionRange)||Is.undefined(candidate.originSelectionRange))}__name(create4,"create"),LocationLink2.create=create4,__name(is2,"is"),LocationLink2.is=is2}(LocationLink||(LocationLink={})),function(Color4){function create4(red,green,blue,alpha){return{red:red,green:green,blue:blue,alpha:alpha}}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Is.numberRange(candidate.red,0,1)&&Is.numberRange(candidate.green,0,1)&&Is.numberRange(candidate.blue,0,1)&&Is.numberRange(candidate.alpha,0,1)}__name(create4,"create"),Color4.create=create4,__name(is2,"is"),Color4.is=is2}(Color3||(Color3={})),function(ColorInformation2){function create4(range3,color2){return{range:range3,color:color2}}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Range.is(candidate.range)&&Color3.is(candidate.color)}__name(create4,"create"),ColorInformation2.create=create4,__name(is2,"is"),ColorInformation2.is=is2}(ColorInformation||(ColorInformation={})),function(ColorPresentation2){function create4(label,textEdit,additionalTextEdits){return{label:label,textEdit:textEdit,additionalTextEdits:additionalTextEdits}}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Is.string(candidate.label)&&(Is.undefined(candidate.textEdit)||TextEdit.is(candidate))&&(Is.undefined(candidate.additionalTextEdits)||Is.typedArray(candidate.additionalTextEdits,TextEdit.is))}__name(create4,"create"),ColorPresentation2.create=create4,__name(is2,"is"),ColorPresentation2.is=is2}(ColorPresentation||(ColorPresentation={})),(FoldingRangeKind2=FoldingRangeKind||(FoldingRangeKind={})).Comment="comment",FoldingRangeKind2.Imports="imports",FoldingRangeKind2.Region="region",function(FoldingRange2){function create4(startLine,endLine,startCharacter,endCharacter,kind,collapsedText){const result={startLine:startLine,endLine:endLine};return Is.defined(startCharacter)&&(result.startCharacter=startCharacter),Is.defined(endCharacter)&&(result.endCharacter=endCharacter),Is.defined(kind)&&(result.kind=kind),Is.defined(collapsedText)&&(result.collapsedText=collapsedText),result}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Is.uinteger(candidate.startLine)&&Is.uinteger(candidate.startLine)&&(Is.undefined(candidate.startCharacter)||Is.uinteger(candidate.startCharacter))&&(Is.undefined(candidate.endCharacter)||Is.uinteger(candidate.endCharacter))&&(Is.undefined(candidate.kind)||Is.string(candidate.kind))}__name(create4,"create"),FoldingRange2.create=create4,__name(is2,"is"),FoldingRange2.is=is2}(FoldingRange||(FoldingRange={})),function(DiagnosticRelatedInformation2){function create4(location,message){return{location:location,message:message}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Location.is(candidate.location)&&Is.string(candidate.message)}__name(create4,"create"),DiagnosticRelatedInformation2.create=create4,__name(is2,"is"),DiagnosticRelatedInformation2.is=is2}(DiagnosticRelatedInformation||(DiagnosticRelatedInformation={})),(DiagnosticSeverity2=DiagnosticSeverity||(DiagnosticSeverity={})).Error=1,DiagnosticSeverity2.Warning=2,DiagnosticSeverity2.Information=3,DiagnosticSeverity2.Hint=4,(DiagnosticTag2=DiagnosticTag||(DiagnosticTag={})).Unnecessary=1,DiagnosticTag2.Deprecated=2,function(CodeDescription2){function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Is.string(candidate.href)}__name(is2,"is"),CodeDescription2.is=is2}(CodeDescription||(CodeDescription={})),function(Diagnostic2){function create4(range3,message,severity,code,source,relatedInformation){let result={range:range3,message:message};return Is.defined(severity)&&(result.severity=severity),Is.defined(code)&&(result.code=code),Is.defined(source)&&(result.source=source),Is.defined(relatedInformation)&&(result.relatedInformation=relatedInformation),result}function is2(value2){var _a;let candidate=value2;return Is.defined(candidate)&&Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.integer(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.undefined(candidate.codeDescription)||Is.string(null===(_a=candidate.codeDescription)||void 0===_a?void 0:_a.href))&&(Is.string(candidate.source)||Is.undefined(candidate.source))&&(Is.undefined(candidate.relatedInformation)||Is.typedArray(candidate.relatedInformation,DiagnosticRelatedInformation.is))}__name(create4,"create"),Diagnostic2.create=create4,__name(is2,"is"),Diagnostic2.is=is2}(Diagnostic||(Diagnostic={})),function(Command2){function create4(title2,command,...args){let result={title:title2,command:command};return Is.defined(args)&&args.length>0&&(result.arguments=args),result}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.command)}__name(create4,"create"),Command2.create=create4,__name(is2,"is"),Command2.is=is2}(Command||(Command={})),function(TextEdit2){function replace2(range3,newText){return{range:range3,newText:newText}}function insert(position5,newText){return{range:{start:position5,end:position5},newText:newText}}function del(range3){return{range:range3,newText:""}}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Is.string(candidate.newText)&&Range.is(candidate.range)}__name(replace2,"replace"),TextEdit2.replace=replace2,__name(insert,"insert"),TextEdit2.insert=insert,__name(del,"del"),TextEdit2.del=del,__name(is2,"is"),TextEdit2.is=is2}(TextEdit||(TextEdit={})),function(ChangeAnnotation2){function create4(label,needsConfirmation,description){const result={label:label};return void 0!==needsConfirmation&&(result.needsConfirmation=needsConfirmation),void 0!==description&&(result.description=description),result}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Is.string(candidate.label)&&(Is.boolean(candidate.needsConfirmation)||void 0===candidate.needsConfirmation)&&(Is.string(candidate.description)||void 0===candidate.description)}__name(create4,"create"),ChangeAnnotation2.create=create4,__name(is2,"is"),ChangeAnnotation2.is=is2}(ChangeAnnotation||(ChangeAnnotation={})),function(ChangeAnnotationIdentifier2){function is2(value2){const candidate=value2;return Is.string(candidate)}__name(is2,"is"),ChangeAnnotationIdentifier2.is=is2}(ChangeAnnotationIdentifier||(ChangeAnnotationIdentifier={})),function(AnnotatedTextEdit2){function replace2(range3,newText,annotation){return{range:range3,newText:newText,annotationId:annotation}}function insert(position5,newText,annotation){return{range:{start:position5,end:position5},newText:newText,annotationId:annotation}}function del(range3,annotation){return{range:range3,newText:"",annotationId:annotation}}function is2(value2){const candidate=value2;return TextEdit.is(candidate)&&(ChangeAnnotation.is(candidate.annotationId)||ChangeAnnotationIdentifier.is(candidate.annotationId))}__name(replace2,"replace"),AnnotatedTextEdit2.replace=replace2,__name(insert,"insert"),AnnotatedTextEdit2.insert=insert,__name(del,"del"),AnnotatedTextEdit2.del=del,__name(is2,"is"),AnnotatedTextEdit2.is=is2}(AnnotatedTextEdit||(AnnotatedTextEdit={})),function(TextDocumentEdit2){function create4(textDocument,edits){return{textDocument:textDocument,edits:edits}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}__name(create4,"create"),TextDocumentEdit2.create=create4,__name(is2,"is"),TextDocumentEdit2.is=is2}(TextDocumentEdit||(TextDocumentEdit={})),function(CreateFile2){function create4(uri,options2,annotation){let result={kind:"create",uri:uri};return void 0===options2||void 0===options2.overwrite&&void 0===options2.ignoreIfExists||(result.options=options2),void 0!==annotation&&(result.annotationId=annotation),result}function is2(value2){let candidate=value2;return candidate&&"create"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))&&(void 0===candidate.annotationId||ChangeAnnotationIdentifier.is(candidate.annotationId))}__name(create4,"create"),CreateFile2.create=create4,__name(is2,"is"),CreateFile2.is=is2}(CreateFile||(CreateFile={})),function(RenameFile2){function create4(oldUri,newUri,options2,annotation){let result={kind:"rename",oldUri:oldUri,newUri:newUri};return void 0===options2||void 0===options2.overwrite&&void 0===options2.ignoreIfExists||(result.options=options2),void 0!==annotation&&(result.annotationId=annotation),result}function is2(value2){let candidate=value2;return candidate&&"rename"===candidate.kind&&Is.string(candidate.oldUri)&&Is.string(candidate.newUri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))&&(void 0===candidate.annotationId||ChangeAnnotationIdentifier.is(candidate.annotationId))}__name(create4,"create"),RenameFile2.create=create4,__name(is2,"is"),RenameFile2.is=is2}(RenameFile||(RenameFile={})),function(DeleteFile2){function create4(uri,options2,annotation){let result={kind:"delete",uri:uri};return void 0===options2||void 0===options2.recursive&&void 0===options2.ignoreIfNotExists||(result.options=options2),void 0!==annotation&&(result.annotationId=annotation),result}function is2(value2){let candidate=value2;return candidate&&"delete"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.recursive||Is.boolean(candidate.options.recursive))&&(void 0===candidate.options.ignoreIfNotExists||Is.boolean(candidate.options.ignoreIfNotExists)))&&(void 0===candidate.annotationId||ChangeAnnotationIdentifier.is(candidate.annotationId))}__name(create4,"create"),DeleteFile2.create=create4,__name(is2,"is"),DeleteFile2.is=is2}(DeleteFile||(DeleteFile={})),function(WorkspaceEdit2){function is2(value2){let candidate=value2;return candidate&&(void 0!==candidate.changes||void 0!==candidate.documentChanges)&&(void 0===candidate.documentChanges||candidate.documentChanges.every(change2=>Is.string(change2.kind)?CreateFile.is(change2)||RenameFile.is(change2)||DeleteFile.is(change2):TextDocumentEdit.is(change2)))}__name(is2,"is"),WorkspaceEdit2.is=is2}(WorkspaceEdit||(WorkspaceEdit={})),function(TextDocumentIdentifier2){function create4(uri){return{uri:uri}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.string(candidate.uri)}__name(create4,"create"),TextDocumentIdentifier2.create=create4,__name(is2,"is"),TextDocumentIdentifier2.is=is2}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(VersionedTextDocumentIdentifier2){function create4(uri,version3){return{uri:uri,version:version3}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.integer(candidate.version)}__name(create4,"create"),VersionedTextDocumentIdentifier2.create=create4,__name(is2,"is"),VersionedTextDocumentIdentifier2.is=is2}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(OptionalVersionedTextDocumentIdentifier2){function create4(uri,version3){return{uri:uri,version:version3}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.string(candidate.uri)&&(null===candidate.version||Is.integer(candidate.version))}__name(create4,"create"),OptionalVersionedTextDocumentIdentifier2.create=create4,__name(is2,"is"),OptionalVersionedTextDocumentIdentifier2.is=is2}(OptionalVersionedTextDocumentIdentifier||(OptionalVersionedTextDocumentIdentifier={})),function(TextDocumentItem2){function create4(uri,languageId,version3,text4){return{uri:uri,languageId:languageId,version:version3,text:text4}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.integer(candidate.version)&&Is.string(candidate.text)}__name(create4,"create"),TextDocumentItem2.create=create4,__name(is2,"is"),TextDocumentItem2.is=is2}(TextDocumentItem||(TextDocumentItem={})),function(MarkupKind2){function is2(value2){const candidate=value2;return candidate===MarkupKind2.PlainText||candidate===MarkupKind2.Markdown}MarkupKind2.PlainText="plaintext",MarkupKind2.Markdown="markdown",__name(is2,"is"),MarkupKind2.is=is2}(MarkupKind||(MarkupKind={})),function(MarkupContent2){function is2(value2){const candidate=value2;return Is.objectLiteral(value2)&&MarkupKind.is(candidate.kind)&&Is.string(candidate.value)}__name(is2,"is"),MarkupContent2.is=is2}(MarkupContent||(MarkupContent={})),(CompletionItemKind2=CompletionItemKind||(CompletionItemKind={})).Text=1,CompletionItemKind2.Method=2,CompletionItemKind2.Function=3,CompletionItemKind2.Constructor=4,CompletionItemKind2.Field=5,CompletionItemKind2.Variable=6,CompletionItemKind2.Class=7,CompletionItemKind2.Interface=8,CompletionItemKind2.Module=9,CompletionItemKind2.Property=10,CompletionItemKind2.Unit=11,CompletionItemKind2.Value=12,CompletionItemKind2.Enum=13,CompletionItemKind2.Keyword=14,CompletionItemKind2.Snippet=15,CompletionItemKind2.Color=16,CompletionItemKind2.File=17,CompletionItemKind2.Reference=18,CompletionItemKind2.Folder=19,CompletionItemKind2.EnumMember=20,CompletionItemKind2.Constant=21,CompletionItemKind2.Struct=22,CompletionItemKind2.Event=23,CompletionItemKind2.Operator=24,CompletionItemKind2.TypeParameter=25,(InsertTextFormat2=InsertTextFormat||(InsertTextFormat={})).PlainText=1,InsertTextFormat2.Snippet=2,(CompletionItemTag||(CompletionItemTag={})).Deprecated=1,function(InsertReplaceEdit2){function create4(newText,insert,replace2){return{newText:newText,insert:insert,replace:replace2}}function is2(value2){const candidate=value2;return candidate&&Is.string(candidate.newText)&&Range.is(candidate.insert)&&Range.is(candidate.replace)}__name(create4,"create"),InsertReplaceEdit2.create=create4,__name(is2,"is"),InsertReplaceEdit2.is=is2}(InsertReplaceEdit||(InsertReplaceEdit={})),(InsertTextMode2=InsertTextMode||(InsertTextMode={})).asIs=1,InsertTextMode2.adjustIndentation=2,function(CompletionItemLabelDetails2){function is2(value2){const candidate=value2;return candidate&&(Is.string(candidate.detail)||void 0===candidate.detail)&&(Is.string(candidate.description)||void 0===candidate.description)}__name(is2,"is"),CompletionItemLabelDetails2.is=is2}(CompletionItemLabelDetails||(CompletionItemLabelDetails={})),function(CompletionItem2){function create4(label){return{label:label}}__name(create4,"create"),CompletionItem2.create=create4}(CompletionItem||(CompletionItem={})),function(CompletionList2){function create4(items,isIncomplete){return{items:items||[],isIncomplete:!!isIncomplete}}__name(create4,"create"),CompletionList2.create=create4}(CompletionList||(CompletionList={})),function(MarkedString2){function fromPlainText(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function is2(value2){const candidate=value2;return Is.string(candidate)||Is.objectLiteral(candidate)&&Is.string(candidate.language)&&Is.string(candidate.value)}__name(fromPlainText,"fromPlainText"),MarkedString2.fromPlainText=fromPlainText,__name(is2,"is"),MarkedString2.is=is2}(MarkedString||(MarkedString={})),function(Hover2){function is2(value2){let candidate=value2;return!!candidate&&Is.objectLiteral(candidate)&&(MarkupContent.is(candidate.contents)||MarkedString.is(candidate.contents)||Is.typedArray(candidate.contents,MarkedString.is))&&(void 0===value2.range||Range.is(value2.range))}__name(is2,"is"),Hover2.is=is2}(Hover||(Hover={})),function(ParameterInformation2){function create4(label,documentation){return documentation?{label:label,documentation:documentation}:{label:label}}__name(create4,"create"),ParameterInformation2.create=create4}(ParameterInformation||(ParameterInformation={})),function(SignatureInformation2){function create4(label,documentation,...parameters){let result={label:label};return Is.defined(documentation)&&(result.documentation=documentation),Is.defined(parameters)?result.parameters=parameters:result.parameters=[],result}__name(create4,"create"),SignatureInformation2.create=create4}(SignatureInformation||(SignatureInformation={})),(DocumentHighlightKind2=DocumentHighlightKind||(DocumentHighlightKind={})).Text=1,DocumentHighlightKind2.Read=2,DocumentHighlightKind2.Write=3,function(DocumentHighlight2){function create4(range3,kind){let result={range:range3};return Is.number(kind)&&(result.kind=kind),result}__name(create4,"create"),DocumentHighlight2.create=create4}(DocumentHighlight||(DocumentHighlight={})),(SymbolKind2=SymbolKind||(SymbolKind={})).File=1,SymbolKind2.Module=2,SymbolKind2.Namespace=3,SymbolKind2.Package=4,SymbolKind2.Class=5,SymbolKind2.Method=6,SymbolKind2.Property=7,SymbolKind2.Field=8,SymbolKind2.Constructor=9,SymbolKind2.Enum=10,SymbolKind2.Interface=11,SymbolKind2.Function=12,SymbolKind2.Variable=13,SymbolKind2.Constant=14,SymbolKind2.String=15,SymbolKind2.Number=16,SymbolKind2.Boolean=17,SymbolKind2.Array=18,SymbolKind2.Object=19,SymbolKind2.Key=20,SymbolKind2.Null=21,SymbolKind2.EnumMember=22,SymbolKind2.Struct=23,SymbolKind2.Event=24,SymbolKind2.Operator=25,SymbolKind2.TypeParameter=26,(SymbolTag||(SymbolTag={})).Deprecated=1,function(SymbolInformation2){function create4(name,kind,range3,uri,containerName){let result={name:name,kind:kind,location:{uri:uri,range:range3}};return containerName&&(result.containerName=containerName),result}__name(create4,"create"),SymbolInformation2.create=create4}(SymbolInformation||(SymbolInformation={})),function(WorkspaceSymbol2){function create4(name,kind,uri,range3){return void 0!==range3?{name:name,kind:kind,location:{uri:uri,range:range3}}:{name:name,kind:kind,location:{uri:uri}}}__name(create4,"create"),WorkspaceSymbol2.create=create4}(WorkspaceSymbol||(WorkspaceSymbol={})),function(DocumentSymbol2){function create4(name,detail,kind,range3,selectionRange,children2){let result={name:name,detail:detail,kind:kind,range:range3,selectionRange:selectionRange};return void 0!==children2&&(result.children=children2),result}function is2(value2){let candidate=value2;return candidate&&Is.string(candidate.name)&&Is.number(candidate.kind)&&Range.is(candidate.range)&&Range.is(candidate.selectionRange)&&(void 0===candidate.detail||Is.string(candidate.detail))&&(void 0===candidate.deprecated||Is.boolean(candidate.deprecated))&&(void 0===candidate.children||Array.isArray(candidate.children))&&(void 0===candidate.tags||Array.isArray(candidate.tags))}__name(create4,"create"),DocumentSymbol2.create=create4,__name(is2,"is"),DocumentSymbol2.is=is2}(DocumentSymbol||(DocumentSymbol={})),(CodeActionKind2=CodeActionKind||(CodeActionKind={})).Empty="",CodeActionKind2.QuickFix="quickfix",CodeActionKind2.Refactor="refactor",CodeActionKind2.RefactorExtract="refactor.extract",CodeActionKind2.RefactorInline="refactor.inline",CodeActionKind2.RefactorRewrite="refactor.rewrite",CodeActionKind2.Source="source",CodeActionKind2.SourceOrganizeImports="source.organizeImports",CodeActionKind2.SourceFixAll="source.fixAll",(CodeActionTriggerKind2=CodeActionTriggerKind||(CodeActionTriggerKind={})).Invoked=1,CodeActionTriggerKind2.Automatic=2,function(CodeActionContext2){function create4(diagnostics,only,triggerKind){let result={diagnostics:diagnostics};return null!=only&&(result.only=only),null!=triggerKind&&(result.triggerKind=triggerKind),result}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)&&(void 0===candidate.only||Is.typedArray(candidate.only,Is.string))&&(void 0===candidate.triggerKind||candidate.triggerKind===CodeActionTriggerKind.Invoked||candidate.triggerKind===CodeActionTriggerKind.Automatic)}__name(create4,"create"),CodeActionContext2.create=create4,__name(is2,"is"),CodeActionContext2.is=is2}(CodeActionContext||(CodeActionContext={})),function(CodeAction2){function create4(title2,kindOrCommandOrEdit,kind){let result={title:title2},checkKind=!0;return"string"==typeof kindOrCommandOrEdit?(checkKind=!1,result.kind=kindOrCommandOrEdit):Command.is(kindOrCommandOrEdit)?result.command=kindOrCommandOrEdit:result.edit=kindOrCommandOrEdit,checkKind&&void 0!==kind&&(result.kind=kind),result}function is2(value2){let candidate=value2;return candidate&&Is.string(candidate.title)&&(void 0===candidate.diagnostics||Is.typedArray(candidate.diagnostics,Diagnostic.is))&&(void 0===candidate.kind||Is.string(candidate.kind))&&(void 0!==candidate.edit||void 0!==candidate.command)&&(void 0===candidate.command||Command.is(candidate.command))&&(void 0===candidate.isPreferred||Is.boolean(candidate.isPreferred))&&(void 0===candidate.edit||WorkspaceEdit.is(candidate.edit))}__name(create4,"create"),CodeAction2.create=create4,__name(is2,"is"),CodeAction2.is=is2}(CodeAction||(CodeAction={})),function(CodeLens2){function create4(range3,data5){let result={range:range3};return Is.defined(data5)&&(result.data=data5),result}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}__name(create4,"create"),CodeLens2.create=create4,__name(is2,"is"),CodeLens2.is=is2}(CodeLens||(CodeLens={})),function(FormattingOptions2){function create4(tabSize,insertSpaces){return{tabSize:tabSize,insertSpaces:insertSpaces}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Is.uinteger(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}__name(create4,"create"),FormattingOptions2.create=create4,__name(is2,"is"),FormattingOptions2.is=is2}(FormattingOptions||(FormattingOptions={})),function(DocumentLink2){function create4(range3,target,data5){return{range:range3,target:target,data:data5}}function is2(value2){let candidate=value2;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}__name(create4,"create"),DocumentLink2.create=create4,__name(is2,"is"),DocumentLink2.is=is2}(DocumentLink||(DocumentLink={})),function(SelectionRange2){function create4(range3,parent4){return{range:range3,parent:parent4}}function is2(value2){let candidate=value2;return Is.objectLiteral(candidate)&&Range.is(candidate.range)&&(void 0===candidate.parent||SelectionRange2.is(candidate.parent))}__name(create4,"create"),SelectionRange2.create=create4,__name(is2,"is"),SelectionRange2.is=is2}(SelectionRange||(SelectionRange={})),(SemanticTokenTypes2=SemanticTokenTypes||(SemanticTokenTypes={})).namespace="namespace",SemanticTokenTypes2.type="type",SemanticTokenTypes2.class="class",SemanticTokenTypes2.enum="enum",SemanticTokenTypes2.interface="interface",SemanticTokenTypes2.struct="struct",SemanticTokenTypes2.typeParameter="typeParameter",SemanticTokenTypes2.parameter="parameter",SemanticTokenTypes2.variable="variable",SemanticTokenTypes2.property="property",SemanticTokenTypes2.enumMember="enumMember",SemanticTokenTypes2.event="event",SemanticTokenTypes2.function="function",SemanticTokenTypes2.method="method",SemanticTokenTypes2.macro="macro",SemanticTokenTypes2.keyword="keyword",SemanticTokenTypes2.modifier="modifier",SemanticTokenTypes2.comment="comment",SemanticTokenTypes2.string="string",SemanticTokenTypes2.number="number",SemanticTokenTypes2.regexp="regexp",SemanticTokenTypes2.operator="operator",SemanticTokenTypes2.decorator="decorator",(SemanticTokenModifiers2=SemanticTokenModifiers||(SemanticTokenModifiers={})).declaration="declaration",SemanticTokenModifiers2.definition="definition",SemanticTokenModifiers2.readonly="readonly",SemanticTokenModifiers2.static="static",SemanticTokenModifiers2.deprecated="deprecated",SemanticTokenModifiers2.abstract="abstract",SemanticTokenModifiers2.async="async",SemanticTokenModifiers2.modification="modification",SemanticTokenModifiers2.documentation="documentation",SemanticTokenModifiers2.defaultLibrary="defaultLibrary",function(SemanticTokens2){function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&(void 0===candidate.resultId||"string"==typeof candidate.resultId)&&Array.isArray(candidate.data)&&(0===candidate.data.length||"number"==typeof candidate.data[0])}__name(is2,"is"),SemanticTokens2.is=is2}(SemanticTokens||(SemanticTokens={})),function(InlineValueText2){function create4(range3,text4){return{range:range3,text:text4}}function is2(value2){const candidate=value2;return null!=candidate&&Range.is(candidate.range)&&Is.string(candidate.text)}__name(create4,"create"),InlineValueText2.create=create4,__name(is2,"is"),InlineValueText2.is=is2}(InlineValueText||(InlineValueText={})),function(InlineValueVariableLookup2){function create4(range3,variableName,caseSensitiveLookup){return{range:range3,variableName:variableName,caseSensitiveLookup:caseSensitiveLookup}}function is2(value2){const candidate=value2;return null!=candidate&&Range.is(candidate.range)&&Is.boolean(candidate.caseSensitiveLookup)&&(Is.string(candidate.variableName)||void 0===candidate.variableName)}__name(create4,"create"),InlineValueVariableLookup2.create=create4,__name(is2,"is"),InlineValueVariableLookup2.is=is2}(InlineValueVariableLookup||(InlineValueVariableLookup={})),function(InlineValueEvaluatableExpression2){function create4(range3,expression){return{range:range3,expression:expression}}function is2(value2){const candidate=value2;return null!=candidate&&Range.is(candidate.range)&&(Is.string(candidate.expression)||void 0===candidate.expression)}__name(create4,"create"),InlineValueEvaluatableExpression2.create=create4,__name(is2,"is"),InlineValueEvaluatableExpression2.is=is2}(InlineValueEvaluatableExpression||(InlineValueEvaluatableExpression={})),function(InlineValueContext2){function create4(frameId,stoppedLocation){return{frameId:frameId,stoppedLocation:stoppedLocation}}function is2(value2){const candidate=value2;return Is.defined(candidate)&&Range.is(value2.stoppedLocation)}__name(create4,"create"),InlineValueContext2.create=create4,__name(is2,"is"),InlineValueContext2.is=is2}(InlineValueContext||(InlineValueContext={})),function(InlayHintKind2){function is2(value2){return 1===value2||2===value2}InlayHintKind2.Type=1,InlayHintKind2.Parameter=2,__name(is2,"is"),InlayHintKind2.is=is2}(InlayHintKind||(InlayHintKind={})),function(InlayHintLabelPart2){function create4(value2){return{value:value2}}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&(void 0===candidate.tooltip||Is.string(candidate.tooltip)||MarkupContent.is(candidate.tooltip))&&(void 0===candidate.location||Location.is(candidate.location))&&(void 0===candidate.command||Command.is(candidate.command))}__name(create4,"create"),InlayHintLabelPart2.create=create4,__name(is2,"is"),InlayHintLabelPart2.is=is2}(InlayHintLabelPart||(InlayHintLabelPart={})),function(InlayHint2){function create4(position5,label,kind){const result={position:position5,label:label};return void 0!==kind&&(result.kind=kind),result}function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&Position.is(candidate.position)&&(Is.string(candidate.label)||Is.typedArray(candidate.label,InlayHintLabelPart.is))&&(void 0===candidate.kind||InlayHintKind.is(candidate.kind))&&void 0===candidate.textEdits||Is.typedArray(candidate.textEdits,TextEdit.is)&&(void 0===candidate.tooltip||Is.string(candidate.tooltip)||MarkupContent.is(candidate.tooltip))&&(void 0===candidate.paddingLeft||Is.boolean(candidate.paddingLeft))&&(void 0===candidate.paddingRight||Is.boolean(candidate.paddingRight))}__name(create4,"create"),InlayHint2.create=create4,__name(is2,"is"),InlayHint2.is=is2}(InlayHint||(InlayHint={})),function(StringValue2){function createSnippet(value2){return{kind:"snippet",value:value2}}__name(createSnippet,"createSnippet"),StringValue2.createSnippet=createSnippet}(StringValue||(StringValue={})),function(InlineCompletionItem2){function create4(insertText,filterText,range3,command){return{insertText:insertText,filterText:filterText,range:range3,command:command}}__name(create4,"create"),InlineCompletionItem2.create=create4}(InlineCompletionItem||(InlineCompletionItem={})),function(InlineCompletionList2){function create4(items){return{items:items}}__name(create4,"create"),InlineCompletionList2.create=create4}(InlineCompletionList||(InlineCompletionList={})),(InlineCompletionTriggerKind2=InlineCompletionTriggerKind||(InlineCompletionTriggerKind={})).Invoked=0,InlineCompletionTriggerKind2.Automatic=1,function(SelectedCompletionInfo2){function create4(range3,text4){return{range:range3,text:text4}}__name(create4,"create"),SelectedCompletionInfo2.create=create4}(SelectedCompletionInfo||(SelectedCompletionInfo={})),function(InlineCompletionContext2){function create4(triggerKind,selectedCompletionInfo){return{triggerKind:triggerKind,selectedCompletionInfo:selectedCompletionInfo}}__name(create4,"create"),InlineCompletionContext2.create=create4}(InlineCompletionContext||(InlineCompletionContext={})),function(WorkspaceFolder2){function is2(value2){const candidate=value2;return Is.objectLiteral(candidate)&&URI.is(candidate.uri)&&Is.string(candidate.name)}__name(is2,"is"),WorkspaceFolder2.is=is2}(WorkspaceFolder||(WorkspaceFolder={})),function(TextDocument3){function create4(uri,languageId,version3,content){return new FullTextDocument(uri,languageId,version3,content)}function is2(value2){let candidate=value2;return!!(Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.uinteger(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt))}function applyEdits(document2,edits){let text4=document2.getText(),sortedEdits=mergeSort2(edits,(a2,b3)=>{let diff2=a2.range.start.line-b3.range.start.line;return 0===diff2?a2.range.start.character-b3.range.start.character:diff2}),lastModifiedOffset=text4.length;for(let i2=sortedEdits.length-1;i2>=0;i2--){let e3=sortedEdits[i2],startOffset=document2.offsetAt(e3.range.start),endOffset=document2.offsetAt(e3.range.end);if(!(endOffset<=lastModifiedOffset))throw new Error("Overlapping edit");text4=text4.substring(0,startOffset)+e3.newText+text4.substring(endOffset,text4.length),lastModifiedOffset=startOffset}return text4}function mergeSort2(data5,compare){if(data5.length<=1)return data5;const p3=data5.length/2|0,left3=data5.slice(0,p3),right3=data5.slice(p3);mergeSort2(left3,compare),mergeSort2(right3,compare);let leftIdx=0,rightIdx=0,i2=0;for(;leftIdx<left3.length&&rightIdx<right3.length;){let ret=compare(left3[leftIdx],right3[rightIdx]);data5[i2++]=ret<=0?left3[leftIdx++]:right3[rightIdx++]}for(;leftIdx<left3.length;)data5[i2++]=left3[leftIdx++];for(;rightIdx<right3.length;)data5[i2++]=right3[rightIdx++];return data5}__name(create4,"create"),TextDocument3.create=create4,__name(is2,"is"),TextDocument3.is=is2,__name(applyEdits,"applyEdits"),TextDocument3.applyEdits=applyEdits,__name(mergeSort2,"mergeSort")}(TextDocument||(TextDocument={})),FullTextDocument=class{static{__name(this,"FullTextDocument")}constructor(uri,languageId,version3,content){this._uri=uri,this._languageId=languageId,this._version=version3,this._content=content,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(range3){if(range3){let start3=this.offsetAt(range3.start),end2=this.offsetAt(range3.end);return this._content.substring(start3,end2)}return this._content}update(event3,version3){this._content=event3.text,this._version=version3,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let lineOffsets=[],text4=this._content,isLineStart=!0;for(let i2=0;i2<text4.length;i2++){isLineStart&&(lineOffsets.push(i2),isLineStart=!1);let ch=text4.charAt(i2);isLineStart="\r"===ch||"\n"===ch,"\r"===ch&&i2+1<text4.length&&"\n"===text4.charAt(i2+1)&&i2++}isLineStart&&text4.length>0&&lineOffsets.push(text4.length),this._lineOffsets=lineOffsets}return this._lineOffsets}positionAt(offset){offset=Math.max(Math.min(offset,this._content.length),0);let lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return Position.create(0,offset);for(;low<high;){let mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}let line2=low-1;return Position.create(line2,offset-lineOffsets[line2])}offsetAt(position5){let lineOffsets=this.getLineOffsets();if(position5.line>=lineOffsets.length)return this._content.length;if(position5.line<0)return 0;let lineOffset=lineOffsets[position5.line],nextLineOffset=position5.line+1<lineOffsets.length?lineOffsets[position5.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position5.character,nextLineOffset),lineOffset)}get lineCount(){return this.getLineOffsets().length}},function(Is2){const toString6=Object.prototype.toString;function defined(value2){return void 0!==value2}function undefined2(value2){return void 0===value2}function boolean(value2){return!0===value2||!1===value2}function string3(value2){return"[object String]"===toString6.call(value2)}function number7(value2){return"[object Number]"===toString6.call(value2)}function numberRange(value2,min9,max10){return"[object Number]"===toString6.call(value2)&&min9<=value2&&value2<=max10}function integer4(value2){return"[object Number]"===toString6.call(value2)&&-2147483648<=value2&&value2<=2147483647}function uinteger2(value2){return"[object Number]"===toString6.call(value2)&&0<=value2&&value2<=2147483647}function func(value2){return"[object Function]"===toString6.call(value2)}function objectLiteral(value2){return null!==value2&&"object"==typeof value2}function typedArray(value2,check){return Array.isArray(value2)&&value2.every(check)}__name(defined,"defined"),Is2.defined=defined,__name(undefined2,"undefined"),Is2.undefined=undefined2,__name(boolean,"boolean"),Is2.boolean=boolean,__name(string3,"string"),Is2.string=string3,__name(number7,"number"),Is2.number=number7,__name(numberRange,"numberRange"),Is2.numberRange=numberRange,__name(integer4,"integer"),Is2.integer=integer4,__name(uinteger2,"uinteger"),Is2.uinteger=uinteger2,__name(func,"func"),Is2.func=func,__name(objectLiteral,"objectLiteral"),Is2.objectLiteral=objectLiteral,__name(typedArray,"typedArray"),Is2.typedArray=typedArray}(Is||(Is={}))}}),init_cst_node_builder=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/cst-node-builder.js"(){init_main(),init_cst_utils(),CstNodeBuilder=class{static{__name(this,"CstNodeBuilder")}constructor(){this.nodeStack=[]}get current(){var _a;return null!==(_a=this.nodeStack[this.nodeStack.length-1])&&void 0!==_a?_a:this.rootNode}buildRootNode(input){return this.rootNode=new RootCstNodeImpl(input),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(feature){const compositeNode=new CompositeCstNodeImpl;return compositeNode.grammarSource=feature,compositeNode.root=this.rootNode,this.current.content.push(compositeNode),this.nodeStack.push(compositeNode),compositeNode}buildLeafNode(token2,feature){const leafNode=new LeafCstNodeImpl(token2.startOffset,token2.image.length,tokenToRange(token2),token2.tokenType,!feature);return leafNode.grammarSource=feature,leafNode.root=this.rootNode,this.current.content.push(leafNode),leafNode}removeNode(node2){const parent4=node2.container;if(parent4){const index=parent4.content.indexOf(node2);index>=0&&parent4.content.splice(index,1)}}addHiddenNodes(tokens2){const nodes5=[];for(const token2 of tokens2){const leafNode=new LeafCstNodeImpl(token2.startOffset,token2.image.length,tokenToRange(token2),token2.tokenType,!0);leafNode.root=this.rootNode,nodes5.push(leafNode)}let current=this.current,added=!1;if(current.content.length>0)current.content.push(...nodes5);else{for(;current.container;){const index=current.container.content.indexOf(current);if(index>0){current.container.content.splice(index,0,...nodes5),added=!0;break}current=current.container}added||this.rootNode.content.unshift(...nodes5)}}construct(item){const current=this.current;"string"==typeof item.$type&&(this.current.astNode=item),item.$cstNode=current;const node2=this.nodeStack.pop();0===(null==node2?void 0:node2.content.length)&&this.removeNode(node2)}},AbstractCstNode=class{static{__name(this,"AbstractCstNode")}get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var _a,_b;const node2="string"==typeof(null===(_a=this._astNode)||void 0===_a?void 0:_a.$type)?this._astNode:null===(_b=this.container)||void 0===_b?void 0:_b.astNode;if(!node2)throw new Error("This node has no associated AST element");return node2}set astNode(value2){this._astNode=value2}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},LeafCstNodeImpl=class extends AbstractCstNode{static{__name(this,"LeafCstNodeImpl")}get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(offset,length2,range3,tokenType,hidden=!1){super(),this._hidden=hidden,this._offset=offset,this._tokenType=tokenType,this._length=length2,this._range=range3}},CompositeCstNodeImpl=class extends AbstractCstNode{static{__name(this,"CompositeCstNodeImpl")}constructor(){super(...arguments),this.content=new CstNodeContainer(this)}get children(){return this.content}get offset(){var _a,_b;return null!==(_b=null===(_a=this.firstNonHiddenNode)||void 0===_a?void 0:_a.offset)&&void 0!==_b?_b:0}get length(){return this.end-this.offset}get end(){var _a,_b;return null!==(_b=null===(_a=this.lastNonHiddenNode)||void 0===_a?void 0:_a.end)&&void 0!==_b?_b:0}get range(){const firstNode=this.firstNonHiddenNode,lastNode=this.lastNonHiddenNode;if(firstNode&&lastNode){if(void 0===this._rangeCache){const{range:firstRange}=firstNode,{range:lastRange}=lastNode;this._rangeCache={start:firstRange.start,end:lastRange.end.line<firstRange.start.line?firstRange.start:lastRange.end}}return this._rangeCache}return{start:Position.create(0,0),end:Position.create(0,0)}}get firstNonHiddenNode(){for(const child of this.content)if(!child.hidden)return child;return this.content[0]}get lastNonHiddenNode(){for(let i2=this.content.length-1;i2>=0;i2--){const child=this.content[i2];if(!child.hidden)return child}return this.content[this.content.length-1]}},CstNodeContainer=class _CstNodeContainer extends Array{static{__name(this,"CstNodeContainer")}constructor(parent4){super(),this.parent=parent4,Object.setPrototypeOf(this,_CstNodeContainer.prototype)}push(...items){return this.addParents(items),super.push(...items)}unshift(...items){return this.addParents(items),super.unshift(...items)}splice(start3,count2,...items){return this.addParents(items),super.splice(start3,count2,...items)}addParents(items){for(const item of items)item.container=this.parent}},RootCstNodeImpl=class extends CompositeCstNodeImpl{static{__name(this,"RootCstNodeImpl")}get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(input){super(),this._text="",this._text=null!=input?input:""}}}});function isDataTypeNode(node2){return node2.$type===DatatypeSymbol}var init_langium_parser=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/langium-parser.js"(){init_api5(),init_lib2(),init_ast(),init_grammar_utils(),init_ast_utils(),init_cst_node_builder(),DatatypeSymbol=Symbol("Datatype"),__name(isDataTypeNode,"isDataTypeNode"),withRuleSuffix=__name(name=>name.endsWith("​")?name:name+"​","withRuleSuffix"),AbstractLangiumParser=class{static{__name(this,"AbstractLangiumParser")}constructor(services){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=services.parser.Lexer;const tokens2=this.lexer.definition,production="production"===services.LanguageMetaData.mode;this.wrapper=new ChevrotainWrapper(tokens2,Object.assign(Object.assign({},services.parser.ParserConfig),{skipValidations:production,errorMessageProvider:services.parser.ParserErrorMessageProvider}))}alternatives(idx,choices){this.wrapper.wrapOr(idx,choices)}optional(idx,callback){this.wrapper.wrapOption(idx,callback)}many(idx,callback){this.wrapper.wrapMany(idx,callback)}atLeastOne(idx,callback){this.wrapper.wrapAtLeastOne(idx,callback)}getRule(name){return this.allRules.get(name)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},LangiumParser=class extends AbstractLangiumParser{static{__name(this,"LangiumParser")}get current(){return this.stack[this.stack.length-1]}constructor(services){super(services),this.nodeBuilder=new CstNodeBuilder,this.stack=[],this.assignmentMap=new Map,this.linker=services.references.Linker,this.converter=services.parser.ValueConverter,this.astReflection=services.shared.AstReflection}rule(rule,impl2){const type3=this.computeRuleType(rule),ruleMethod=this.wrapper.DEFINE_RULE(withRuleSuffix(rule.name),this.startImplementation(type3,impl2).bind(this));return this.allRules.set(rule.name,ruleMethod),rule.entry&&(this.mainRule=ruleMethod),ruleMethod}computeRuleType(rule){if(!rule.fragment){if(isDataTypeRule(rule))return DatatypeSymbol;{const explicit=getExplicitRuleType(rule);return null!=explicit?explicit:rule.name}}}parse(input,options2={}){this.nodeBuilder.buildRootNode(input);const lexerResult=this.lexerResult=this.lexer.tokenize(input);this.wrapper.input=lexerResult.tokens;const ruleMethod=options2.rule?this.allRules.get(options2.rule):this.mainRule;if(!ruleMethod)throw new Error(options2.rule?`No rule found with name '${options2.rule}'`:"No main rule available.");const result=ruleMethod.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(lexerResult.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:result,lexerErrors:lexerResult.errors,lexerReport:lexerResult.report,parserErrors:this.wrapper.errors}}startImplementation($type,implementation){return args=>{const createNode=!this.isRecording()&&void 0!==$type;if(createNode){const node2={$type:$type};this.stack.push(node2),$type===DatatypeSymbol&&(node2.value="")}let result;try{result=implementation(args)}catch(err){result=void 0}return void 0===result&&createNode&&(result=this.construct()),result}}extractHiddenTokens(token2){const hiddenTokens=this.lexerResult.hidden;if(!hiddenTokens.length)return[];const offset=token2.startOffset;for(let i2=0;i2<hiddenTokens.length;i2++){if(hiddenTokens[i2].startOffset>offset)return hiddenTokens.splice(0,i2)}return hiddenTokens.splice(0,hiddenTokens.length)}consume(idx,tokenType,feature){const token2=this.wrapper.wrapConsume(idx,tokenType);if(!this.isRecording()&&this.isValidToken(token2)){const hiddenTokens=this.extractHiddenTokens(token2);this.nodeBuilder.addHiddenNodes(hiddenTokens);const leafNode=this.nodeBuilder.buildLeafNode(token2,feature),{assignment:assignment,isCrossRef:isCrossRef}=this.getAssignment(feature),current=this.current;if(assignment){const convertedValue=isKeyword(feature)?token2.image:this.converter.convert(token2.image,leafNode);this.assign(assignment.operator,assignment.feature,convertedValue,leafNode,isCrossRef)}else if(isDataTypeNode(current)){let text4=token2.image;isKeyword(feature)||(text4=this.converter.convert(text4,leafNode).toString()),current.value+=text4}}}isValidToken(token2){return!token2.isInsertedInRecovery&&!isNaN(token2.startOffset)&&"number"==typeof token2.endOffset&&!isNaN(token2.endOffset)}subrule(idx,rule,fragment,feature,args){let cstNode;this.isRecording()||fragment||(cstNode=this.nodeBuilder.buildCompositeNode(feature));const subruleResult=this.wrapper.wrapSubrule(idx,rule,args);!this.isRecording()&&cstNode&&cstNode.length>0&&this.performSubruleAssignment(subruleResult,feature,cstNode)}performSubruleAssignment(result,feature,cstNode){const{assignment:assignment,isCrossRef:isCrossRef}=this.getAssignment(feature);if(assignment)this.assign(assignment.operator,assignment.feature,result,cstNode,isCrossRef);else if(!assignment){const current=this.current;if(isDataTypeNode(current))current.value+=result.toString();else if("object"==typeof result&&result){const newItem=this.assignWithoutOverride(result,current);this.stack.pop(),this.stack.push(newItem)}}}action($type,action){if(!this.isRecording()){let last3=this.current;if(action.feature&&action.operator){last3=this.construct(),this.nodeBuilder.removeNode(last3.$cstNode);this.nodeBuilder.buildCompositeNode(action).content.push(last3.$cstNode);const newItem={$type:$type};this.stack.push(newItem),this.assign(action.operator,action.feature,last3,last3.$cstNode,!1)}else last3.$type=$type}}construct(){if(this.isRecording())return;const obj=this.current;return linkContentToContainer(obj),this.nodeBuilder.construct(obj),this.stack.pop(),isDataTypeNode(obj)?this.converter.convert(obj.value,obj.$cstNode):(assignMandatoryProperties(this.astReflection,obj),obj)}getAssignment(feature){if(!this.assignmentMap.has(feature)){const assignment=getContainerOfType(feature,isAssignment);this.assignmentMap.set(feature,{assignment:assignment,isCrossRef:!!assignment&&isCrossReference(assignment.terminal)})}return this.assignmentMap.get(feature)}assign(operator,feature,value2,cstNode,isCrossRef){const obj=this.current;let item;switch(item=isCrossRef&&"string"==typeof value2?this.linker.buildReference(obj,feature,cstNode,value2):value2,operator){case"=":obj[feature]=item;break;case"?=":obj[feature]=!0;break;case"+=":Array.isArray(obj[feature])||(obj[feature]=[]),obj[feature].push(item)}}assignWithoutOverride(target,source){for(const[name,existingValue]of Object.entries(source)){const newValue=target[name];void 0===newValue?target[name]=existingValue:Array.isArray(newValue)&&Array.isArray(existingValue)&&(existingValue.push(...newValue),target[name]=existingValue)}const targetCstNode=target.$cstNode;return targetCstNode&&(targetCstNode.astNode=void 0,target.$cstNode=void 0),target}get definitionErrors(){return this.wrapper.definitionErrors}},AbstractParserErrorMessageProvider=class{static{__name(this,"AbstractParserErrorMessageProvider")}buildMismatchTokenMessage(options2){return defaultParserErrorProvider.buildMismatchTokenMessage(options2)}buildNotAllInputParsedMessage(options2){return defaultParserErrorProvider.buildNotAllInputParsedMessage(options2)}buildNoViableAltMessage(options2){return defaultParserErrorProvider.buildNoViableAltMessage(options2)}buildEarlyExitMessage(options2){return defaultParserErrorProvider.buildEarlyExitMessage(options2)}},LangiumParserErrorMessageProvider=class extends AbstractParserErrorMessageProvider{static{__name(this,"LangiumParserErrorMessageProvider")}buildMismatchTokenMessage({expected:expected,actual:actual}){return`Expecting ${expected.LABEL?"`"+expected.LABEL+"`":expected.name.endsWith(":KW")?`keyword '${expected.name.substring(0,expected.name.length-3)}'`:`token of type '${expected.name}'`} but found \`${actual.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:firstRedundant}){return`Expecting end of file but found \`${firstRedundant.image}\`.`}},LangiumCompletionParser=class extends AbstractLangiumParser{static{__name(this,"LangiumCompletionParser")}constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(input){this.resetState();const tokens2=this.lexer.tokenize(input,{mode:"partial"});return this.tokens=tokens2.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(rule,impl2){const ruleMethod=this.wrapper.DEFINE_RULE(withRuleSuffix(rule.name),this.startImplementation(impl2).bind(this));return this.allRules.set(rule.name,ruleMethod),rule.entry&&(this.mainRule=ruleMethod),ruleMethod}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(implementation){return args=>{const size4=this.keepStackSize();try{implementation(args)}finally{this.resetStackSize(size4)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const size4=this.elementStack.length;return this.stackSize=size4,size4}resetStackSize(size4){this.removeUnexpectedElements(),this.stackSize=size4}consume(idx,tokenType,feature){this.wrapper.wrapConsume(idx,tokenType),this.isRecording()||(this.lastElementStack=[...this.elementStack,feature],this.nextTokenIndex=this.currIdx+1)}subrule(idx,rule,fragment,feature,args){this.before(feature),this.wrapper.wrapSubrule(idx,rule,args),this.after(feature)}before(element3){this.isRecording()||this.elementStack.push(element3)}after(element3){if(!this.isRecording()){const index=this.elementStack.lastIndexOf(element3);index>=0&&this.elementStack.splice(index)}}get currIdx(){return this.wrapper.currIdx}},defaultConfig3={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new LangiumParserErrorMessageProvider},ChevrotainWrapper=class extends EmbeddedActionsParser{static{__name(this,"ChevrotainWrapper")}constructor(tokens2,config5){const useDefaultLookahead=config5&&"maxLookahead"in config5;super(tokens2,Object.assign(Object.assign(Object.assign({},defaultConfig3),{lookaheadStrategy:useDefaultLookahead?new LLkLookaheadStrategy({maxLookahead:config5.maxLookahead}):new LLStarLookaheadStrategy({logging:config5.skipValidations?()=>{}:void 0})}),config5))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(name,impl2){return this.RULE(name,impl2)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(idx,tokenType){return this.consume(idx,tokenType)}wrapSubrule(idx,rule,args){return this.subrule(idx,rule,{ARGS:[args]})}wrapOr(idx,choices){this.or(idx,choices)}wrapOption(idx,callback){this.option(idx,callback)}wrapMany(idx,callback){this.many(idx,callback)}wrapAtLeastOne(idx,callback){this.atLeastOne(idx,callback)}}}});function createParser(grammar,parser24,tokens2){return buildRules({parser:parser24,tokens:tokens2,ruleNames:new Map},grammar),parser24}function buildRules(parserContext,grammar){const reachable=getAllReachableRules(grammar,!1),parserRules=stream(grammar.rules).filter(isParserRule).filter(rule=>reachable.has(rule));for(const rule of parserRules){const ctx=Object.assign(Object.assign({},parserContext),{consume:1,optional:1,subrule:1,many:1,or:1});parserContext.parser.rule(rule,buildElement(ctx,rule.definition))}}function buildElement(ctx,element3,ignoreGuard=!1){let method;if(isKeyword(element3))method=buildKeyword(ctx,element3);else if(isAction(element3))method=buildAction(ctx,element3);else if(isAssignment(element3))method=buildElement(ctx,element3.terminal);else if(isCrossReference(element3))method=buildCrossReference(ctx,element3);else if(isRuleCall(element3))method=buildRuleCall(ctx,element3);else if(isAlternatives(element3))method=buildAlternatives(ctx,element3);else if(isUnorderedGroup(element3))method=buildUnorderedGroup(ctx,element3);else if(isGroup(element3))method=buildGroup4(ctx,element3);else{if(!isEndOfFile(element3))throw new ErrorWithLocation(element3.$cstNode,`Unexpected element type: ${element3.$type}`);{const idx=ctx.consume++;method=__name(()=>ctx.parser.consume(idx,EOF,element3),"method")}}return wrap(ctx,ignoreGuard?void 0:getGuardCondition(element3),method,element3.cardinality)}function buildAction(ctx,action){const actionType=getTypeName(action);return()=>ctx.parser.action(actionType,action)}function buildRuleCall(ctx,ruleCall){const rule=ruleCall.rule.ref;if(isParserRule(rule)){const idx=ctx.subrule++,fragment=rule.fragment,predicate=ruleCall.arguments.length>0?buildRuleCallPredicate(rule,ruleCall.arguments):()=>({});return args=>ctx.parser.subrule(idx,getRule(ctx,rule),fragment,ruleCall,predicate(args))}if(isTerminalRule(rule)){const idx=ctx.consume++,method=getToken(ctx,rule.name);return()=>ctx.parser.consume(idx,method,ruleCall)}if(!rule)throw new ErrorWithLocation(ruleCall.$cstNode,`Undefined rule: ${ruleCall.rule.$refText}`);assertUnreachable()}function buildRuleCallPredicate(rule,namedArgs){const predicates=namedArgs.map(e3=>buildPredicate(e3.value));return args=>{const ruleArgs={};for(let i2=0;i2<predicates.length;i2++){const ruleTarget=rule.parameters[i2],predicate=predicates[i2];ruleArgs[ruleTarget.name]=predicate(args)}return ruleArgs}}function buildPredicate(condition){if(isDisjunction(condition)){const left3=buildPredicate(condition.left),right3=buildPredicate(condition.right);return args=>left3(args)||right3(args)}if(isConjunction(condition)){const left3=buildPredicate(condition.left),right3=buildPredicate(condition.right);return args=>left3(args)&&right3(args)}if(isNegation(condition)){const value2=buildPredicate(condition.value);return args=>!value2(args)}if(isParameterReference(condition)){const name=condition.parameter.ref.name;return args=>void 0!==args&&!0===args[name]}if(isBooleanLiteral(condition)){const value2=Boolean(condition.true);return()=>value2}assertUnreachable()}function buildAlternatives(ctx,alternatives){if(1===alternatives.elements.length)return buildElement(ctx,alternatives.elements[0]);{const methods=[];for(const element3 of alternatives.elements){const predicatedMethod={ALT:buildElement(ctx,element3,!0)},guard=getGuardCondition(element3);guard&&(predicatedMethod.GATE=buildPredicate(guard)),methods.push(predicatedMethod)}const idx=ctx.or++;return args=>ctx.parser.alternatives(idx,methods.map(method=>{const alt={ALT:__name(()=>method.ALT(args),"ALT")},gate=method.GATE;return gate&&(alt.GATE=()=>gate(args)),alt}))}}function buildUnorderedGroup(ctx,group2){if(1===group2.elements.length)return buildElement(ctx,group2.elements[0]);const methods=[];for(const element3 of group2.elements){const predicatedMethod={ALT:buildElement(ctx,element3,!0)},guard=getGuardCondition(element3);guard&&(predicatedMethod.GATE=buildPredicate(guard)),methods.push(predicatedMethod)}const orIdx=ctx.or++,idFunc=__name((groupIdx,lParser)=>`uGroup_${groupIdx}_${lParser.getRuleStack().join("-")}`,"idFunc"),alternatives=__name(args=>ctx.parser.alternatives(orIdx,methods.map((method,idx)=>{const alt={ALT:__name(()=>!0,"ALT")},parser24=ctx.parser;alt.ALT=()=>{if(method.ALT(args),!parser24.isRecording()){const key=idFunc(orIdx,parser24);parser24.unorderedGroups.get(key)||parser24.unorderedGroups.set(key,[]);const groupState=parser24.unorderedGroups.get(key);void 0===(null==groupState?void 0:groupState[idx])&&(groupState[idx]=!0)}};const gate=method.GATE;return alt.GATE=gate?()=>gate(args):()=>{const trackedAlternatives=parser24.unorderedGroups.get(idFunc(orIdx,parser24));return!(null==trackedAlternatives?void 0:trackedAlternatives[idx])},alt})),"alternatives"),wrapped=wrap(ctx,getGuardCondition(group2),alternatives,"*");return args=>{wrapped(args),ctx.parser.isRecording()||ctx.parser.unorderedGroups.delete(idFunc(orIdx,ctx.parser))}}function buildGroup4(ctx,group2){const methods=group2.elements.map(e3=>buildElement(ctx,e3));return args=>methods.forEach(method=>method(args))}function getGuardCondition(element3){if(isGroup(element3))return element3.guardCondition}function buildCrossReference(ctx,crossRef,terminal=crossRef.terminal){if(terminal){if(isRuleCall(terminal)&&isParserRule(terminal.rule.ref)){const rule=terminal.rule.ref,idx=ctx.subrule++;return args=>ctx.parser.subrule(idx,getRule(ctx,rule),!1,crossRef,args)}if(isRuleCall(terminal)&&isTerminalRule(terminal.rule.ref)){const idx=ctx.consume++,terminalRule=getToken(ctx,terminal.rule.ref.name);return()=>ctx.parser.consume(idx,terminalRule,crossRef)}if(isKeyword(terminal)){const idx=ctx.consume++,keyword=getToken(ctx,terminal.value);return()=>ctx.parser.consume(idx,keyword,crossRef)}throw new Error("Could not build cross reference parser")}{if(!crossRef.type.ref)throw new Error("Could not resolve reference to type: "+crossRef.type.$refText);const assignment=findNameAssignment(crossRef.type.ref),assignTerminal=null==assignment?void 0:assignment.terminal;if(!assignTerminal)throw new Error("Could not find name assignment for type: "+getTypeName(crossRef.type.ref));return buildCrossReference(ctx,crossRef,assignTerminal)}}function buildKeyword(ctx,keyword){const idx=ctx.consume++,token2=ctx.tokens[keyword.value];if(!token2)throw new Error("Could not find token for keyword: "+keyword.value);return()=>ctx.parser.consume(idx,token2,keyword)}function wrap(ctx,guard,method,cardinality){const gate=guard&&buildPredicate(guard);if(!cardinality){if(gate){const idx=ctx.or++;return args=>ctx.parser.alternatives(idx,[{ALT:__name(()=>method(args),"ALT"),GATE:__name(()=>gate(args),"GATE")},{ALT:EMPTY_ALT(),GATE:__name(()=>!gate(args),"GATE")}])}return method}if("*"===cardinality){const idx=ctx.many++;return args=>ctx.parser.many(idx,{DEF:__name(()=>method(args),"DEF"),GATE:gate?()=>gate(args):void 0})}if("+"===cardinality){const idx=ctx.many++;if(gate){const orIdx=ctx.or++;return args=>ctx.parser.alternatives(orIdx,[{ALT:__name(()=>ctx.parser.atLeastOne(idx,{DEF:__name(()=>method(args),"DEF")}),"ALT"),GATE:__name(()=>gate(args),"GATE")},{ALT:EMPTY_ALT(),GATE:__name(()=>!gate(args),"GATE")}])}return args=>ctx.parser.atLeastOne(idx,{DEF:__name(()=>method(args),"DEF")})}if("?"===cardinality){const idx=ctx.optional++;return args=>ctx.parser.optional(idx,{DEF:__name(()=>method(args),"DEF"),GATE:gate?()=>gate(args):void 0})}assertUnreachable()}function getRule(ctx,element3){const name=getRuleName(ctx,element3),rule=ctx.parser.getRule(name);if(!rule)throw new Error(`Rule "${name}" not found."`);return rule}function getRuleName(ctx,element3){if(isParserRule(element3))return element3.name;if(ctx.ruleNames.has(element3))return ctx.ruleNames.get(element3);{let item=element3,parent4=item.$container,ruleName=element3.$type;for(;!isParserRule(parent4);){if(isGroup(parent4)||isAlternatives(parent4)||isUnorderedGroup(parent4)){ruleName=parent4.elements.indexOf(item).toString()+":"+ruleName}item=parent4,parent4=parent4.$container}return ruleName=parent4.name+":"+ruleName,ctx.ruleNames.set(element3,ruleName),ruleName}}function getToken(ctx,name){const token2=ctx.tokens[name];if(!token2)throw new Error(`Token "${name}" not found."`);return token2}var init_parser_builder_base=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/parser-builder-base.js"(){init_api5(),init_ast(),init_errors2(),init_stream(),init_grammar_utils(),__name(createParser,"createParser"),__name(buildRules,"buildRules"),__name(buildElement,"buildElement"),__name(buildAction,"buildAction"),__name(buildRuleCall,"buildRuleCall"),__name(buildRuleCallPredicate,"buildRuleCallPredicate"),__name(buildPredicate,"buildPredicate"),__name(buildAlternatives,"buildAlternatives"),__name(buildUnorderedGroup,"buildUnorderedGroup"),__name(buildGroup4,"buildGroup"),__name(getGuardCondition,"getGuardCondition"),__name(buildCrossReference,"buildCrossReference"),__name(buildKeyword,"buildKeyword"),__name(wrap,"wrap"),__name(getRule,"getRule"),__name(getRuleName,"getRuleName"),__name(getToken,"getToken")}});function createCompletionParser(services){const grammar=services.Grammar,lexer=services.parser.Lexer,parser24=new LangiumCompletionParser(services);return createParser(grammar,parser24,lexer.definition),parser24.finalize(),parser24}var init_completion_parser_builder=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/completion-parser-builder.js"(){init_langium_parser(),init_parser_builder_base(),__name(createCompletionParser,"createCompletionParser")}});function createLangiumParser(services){const parser24=prepareLangiumParser(services);return parser24.finalize(),parser24}function prepareLangiumParser(services){const grammar=services.Grammar,lexer=services.parser.Lexer;return createParser(grammar,new LangiumParser(services),lexer.definition)}var DefaultTokenBuilder,DefaultValueConverter,ValueConverter,lastTick,globalInterruptionPeriod,OperationCancelled,Deferred,init_langium_parser_builder=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/langium-parser-builder.js"(){init_langium_parser(),init_parser_builder_base(),__name(createLangiumParser,"createLangiumParser"),__name(prepareLangiumParser,"prepareLangiumParser")}}),init_token_builder=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/token-builder.js"(){init_api5(),init_ast(),init_ast_utils(),init_grammar_utils(),init_regexp_utils(),init_stream(),DefaultTokenBuilder=class{static{__name(this,"DefaultTokenBuilder")}constructor(){this.diagnostics=[]}buildTokens(grammar,options2){const reachableRules=stream(getAllReachableRules(grammar,!1)),terminalTokens=this.buildTerminalTokens(reachableRules),tokens2=this.buildKeywordTokens(reachableRules,terminalTokens,options2);return terminalTokens.forEach(terminalToken=>{const pattern=terminalToken.PATTERN;"object"==typeof pattern&&pattern&&"test"in pattern&&isWhitespace2(pattern)?tokens2.unshift(terminalToken):tokens2.push(terminalToken)}),tokens2}flushLexingReport(text4){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const diagnostics=[...this.diagnostics];return this.diagnostics=[],diagnostics}buildTerminalTokens(rules){return rules.filter(isTerminalRule).filter(e3=>!e3.fragment).map(terminal=>this.buildTerminalToken(terminal)).toArray()}buildTerminalToken(terminal){const regex2=terminalRegex(terminal),pattern=this.requiresCustomPattern(regex2)?this.regexPatternFunction(regex2):regex2,tokenType={name:terminal.name,PATTERN:pattern};return"function"==typeof pattern&&(tokenType.LINE_BREAKS=!0),terminal.hidden&&(tokenType.GROUP=isWhitespace2(regex2)?Lexer2.SKIPPED:"hidden"),tokenType}requiresCustomPattern(regex2){return!(!regex2.flags.includes("u")&&!regex2.flags.includes("s"))||!(!regex2.source.includes("?<=")&&!regex2.source.includes("?<!"))}regexPatternFunction(regex2){const stickyRegex=new RegExp(regex2,regex2.flags+"y");return(text4,offset)=>{stickyRegex.lastIndex=offset;return stickyRegex.exec(text4)}}buildKeywordTokens(rules,terminalTokens,options2){return rules.filter(isParserRule).flatMap(rule=>streamAllContents(rule).filter(isKeyword)).distinct(e3=>e3.value).toArray().sort((a2,b3)=>b3.value.length-a2.value.length).map(keyword=>this.buildKeywordToken(keyword,terminalTokens,Boolean(null==options2?void 0:options2.caseInsensitive)))}buildKeywordToken(keyword,terminalTokens,caseInsensitive){const keywordPattern=this.buildKeywordPattern(keyword,caseInsensitive),tokenType={name:keyword.value,PATTERN:keywordPattern,LONGER_ALT:this.findLongerAlt(keyword,terminalTokens)};return"function"==typeof keywordPattern&&(tokenType.LINE_BREAKS=!0),tokenType}buildKeywordPattern(keyword,caseInsensitive){return caseInsensitive?new RegExp(getCaseInsensitivePattern(keyword.value)):keyword.value}findLongerAlt(keyword,terminalTokens){return terminalTokens.reduce((longerAlts,token2)=>{const pattern=null==token2?void 0:token2.PATTERN;return(null==pattern?void 0:pattern.source)&&partialMatches("^"+pattern.source+"$",keyword.value)&&longerAlts.push(token2),longerAlts},[])}}}}),init_value_converter=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/value-converter.js"(){init_ast(),init_grammar_utils(),DefaultValueConverter=class{static{__name(this,"DefaultValueConverter")}convert(input,cstNode){let feature=cstNode.grammarSource;if(isCrossReference(feature)&&(feature=getCrossReferenceTerminal(feature)),isRuleCall(feature)){const rule=feature.rule.ref;if(!rule)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(rule,input,cstNode)}return input}runConverter(rule,input,cstNode){var _a;switch(rule.name.toUpperCase()){case"INT":return ValueConverter.convertInt(input);case"STRING":return ValueConverter.convertString(input);case"ID":return ValueConverter.convertID(input)}switch(null===(_a=getRuleType(rule))||void 0===_a?void 0:_a.toLowerCase()){case"number":return ValueConverter.convertNumber(input);case"boolean":return ValueConverter.convertBoolean(input);case"bigint":return ValueConverter.convertBigint(input);case"date":return ValueConverter.convertDate(input);default:return input}}},function(ValueConverter2){function convertString(input){let result="";for(let i2=1;i2<input.length-1;i2++){const c3=input.charAt(i2);if("\\"===c3){result+=convertEscapeCharacter(input.charAt(++i2))}else result+=c3}return result}function convertEscapeCharacter(char2){switch(char2){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return char2}}function convertID(input){return"^"===input.charAt(0)?input.substring(1):input}function convertInt(input){return parseInt(input)}function convertBigint(input){return BigInt(input)}function convertDate(input){return new Date(input)}function convertNumber(input){return Number(input)}function convertBoolean(input){return"true"===input.toLowerCase()}__name(convertString,"convertString"),ValueConverter2.convertString=convertString,__name(convertEscapeCharacter,"convertEscapeCharacter"),__name(convertID,"convertID"),ValueConverter2.convertID=convertID,__name(convertInt,"convertInt"),ValueConverter2.convertInt=convertInt,__name(convertBigint,"convertBigint"),ValueConverter2.convertBigint=convertBigint,__name(convertDate,"convertDate"),ValueConverter2.convertDate=convertDate,__name(convertNumber,"convertNumber"),ValueConverter2.convertNumber=convertNumber,__name(convertBoolean,"convertBoolean"),ValueConverter2.convertBoolean=convertBoolean}(ValueConverter||(ValueConverter={}))}}),require_ral=__commonJS({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/ral.js"(exports2){var _ral;function RAL(){if(void 0===_ral)throw new Error("No runtime abstraction layer installed");return _ral}Object.defineProperty(exports2,"__esModule",{value:!0}),__name(RAL,"RAL"),function(RAL2){function install(ral){if(void 0===ral)throw new Error("No runtime abstraction layer provided");_ral=ral}__name(install,"install"),RAL2.install=install}(RAL||(RAL={})),exports2.default=RAL}}),require_is=__commonJS({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/is.js"(exports2){function boolean(value2){return!0===value2||!1===value2}function string3(value2){return"string"==typeof value2||value2 instanceof String}function number7(value2){return"number"==typeof value2||value2 instanceof Number}function error3(value2){return value2 instanceof Error}function func(value2){return"function"==typeof value2}function array4(value2){return Array.isArray(value2)}function stringArray(value2){return array4(value2)&&value2.every(elem=>string3(elem))}Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.stringArray=exports2.array=exports2.func=exports2.error=exports2.number=exports2.string=exports2.boolean=void 0,__name(boolean,"boolean"),exports2.boolean=boolean,__name(string3,"string"),exports2.string=string3,__name(number7,"number"),exports2.number=number7,__name(error3,"error"),exports2.error=error3,__name(func,"func"),exports2.func=func,__name(array4,"array"),exports2.array=array4,__name(stringArray,"stringArray"),exports2.stringArray=stringArray}}),require_events=__commonJS({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/events.js"(exports2){Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.Emitter=exports2.Event=void 0;var Event3,ral_1=require_ral();!function(Event4){const _disposable={dispose(){}};Event4.None=function(){return _disposable}}(Event3||(exports2.Event=Event3={}));var CallbackList=class{static{__name(this,"CallbackList")}add(callback,context=null,bucket){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(callback),this._contexts.push(context),Array.isArray(bucket)&&bucket.push({dispose:__name(()=>this.remove(callback,context),"dispose")})}remove(callback,context=null){if(!this._callbacks)return;let foundCallbackWithDifferentContext=!1;for(let i2=0,len=this._callbacks.length;i2<len;i2++)if(this._callbacks[i2]===callback){if(this._contexts[i2]===context)return this._callbacks.splice(i2,1),void this._contexts.splice(i2,1);foundCallbackWithDifferentContext=!0}if(foundCallbackWithDifferentContext)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...args){if(!this._callbacks)return[];const ret=[],callbacks=this._callbacks.slice(0),contexts=this._contexts.slice(0);for(let i2=0,len=callbacks.length;i2<len;i2++)try{ret.push(callbacks[i2].apply(contexts[i2],args))}catch(e3){(0,ral_1.default)().console.error(e3)}return ret}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}},Emitter4=class _Emitter{static{__name(this,"Emitter")}constructor(_options){this._options=_options}get event(){return this._event||(this._event=(listener,thisArgs,disposables)=>{this._callbacks||(this._callbacks=new CallbackList),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(listener,thisArgs);const result={dispose:__name(()=>{this._callbacks&&(this._callbacks.remove(listener,thisArgs),result.dispose=_Emitter._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(disposables)&&disposables.push(result),result}),this._event}fire(event3){this._callbacks&&this._callbacks.invoke.call(this._callbacks,event3)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};exports2.Emitter=Emitter4,Emitter4._noop=function(){}}}),require_cancellation=__commonJS({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/cancellation.js"(exports2){Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.CancellationTokenSource=exports2.CancellationToken=void 0;var CancellationToken11,ral_1=require_ral(),Is2=require_is(),events_1=require_events();!function(CancellationToken12){function is2(value2){const candidate=value2;return candidate&&(candidate===CancellationToken12.None||candidate===CancellationToken12.Cancelled||Is2.boolean(candidate.isCancellationRequested)&&!!candidate.onCancellationRequested)}CancellationToken12.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:events_1.Event.None}),CancellationToken12.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:events_1.Event.None}),__name(is2,"is"),CancellationToken12.is=is2}(CancellationToken11||(exports2.CancellationToken=CancellationToken11={}));var shortcutEvent=Object.freeze(function(callback,context){const handle=(0,ral_1.default)().timer.setTimeout(callback.bind(context),0);return{dispose(){handle.dispose()}}}),MutableToken=class{static{__name(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new events_1.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},CancellationTokenSource3=class{static{__name(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token.cancel():this._token=CancellationToken11.Cancelled}dispose(){this._token?this._token instanceof MutableToken&&this._token.dispose():this._token=CancellationToken11.None}};exports2.CancellationTokenSource=CancellationTokenSource3}}),cancellation_exports={},init_cancellation=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/cancellation.js"(){__reExport(cancellation_exports,__toESM(require_cancellation(),1))}});function delayNextTick(){return new Promise(resolve2=>{"undefined"==typeof setImmediate?setTimeout(resolve2,0):setImmediate(resolve2)})}function startCancelableOperation(){return lastTick=performance.now(),new cancellation_exports.CancellationTokenSource}function setInterruptionPeriod(period){globalInterruptionPeriod=period}function isOperationCancelled(err){return err===OperationCancelled}async function interruptAndCheck(token2){if(token2===cancellation_exports.CancellationToken.None)return;const current=performance.now();if(current-lastTick>=globalInterruptionPeriod&&(lastTick=current,await delayNextTick(),lastTick=performance.now()),token2.isCancellationRequested)throw OperationCancelled}var FullTextDocument2,TextDocument2,init_promise_utils=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/promise-utils.js"(){init_cancellation(),__name(delayNextTick,"delayNextTick"),lastTick=0,globalInterruptionPeriod=10,__name(startCancelableOperation,"startCancelableOperation"),__name(setInterruptionPeriod,"setInterruptionPeriod"),OperationCancelled=Symbol("OperationCancelled"),__name(isOperationCancelled,"isOperationCancelled"),__name(interruptAndCheck,"interruptAndCheck"),Deferred=class{static{__name(this,"Deferred")}constructor(){this.promise=new Promise((resolve2,reject3)=>{this.resolve=arg=>(resolve2(arg),this),this.reject=err=>(reject3(err),this)})}}}});function mergeSort(data5,compare){if(data5.length<=1)return data5;const p3=data5.length/2|0,left3=data5.slice(0,p3),right3=data5.slice(p3);mergeSort(left3,compare),mergeSort(right3,compare);let leftIdx=0,rightIdx=0,i2=0;for(;leftIdx<left3.length&&rightIdx<right3.length;){const ret=compare(left3[leftIdx],right3[rightIdx]);data5[i2++]=ret<=0?left3[leftIdx++]:right3[rightIdx++]}for(;leftIdx<left3.length;)data5[i2++]=left3[leftIdx++];for(;rightIdx<right3.length;)data5[i2++]=right3[rightIdx++];return data5}function computeLineOffsets(text4,isAtLineStart,textOffset=0){const result=isAtLineStart?[textOffset]:[];for(let i2=0;i2<text4.length;i2++){const ch=text4.charCodeAt(i2);isEOL(ch)&&(13===ch&&i2+1<text4.length&&10===text4.charCodeAt(i2+1)&&i2++,result.push(textOffset+i2+1))}return result}function isEOL(char2){return 13===char2||10===char2}function getWellformedRange(range3){const start3=range3.start,end2=range3.end;return start3.line>end2.line||start3.line===end2.line&&start3.character>end2.character?{start:end2,end:start3}:range3}function getWellformedEdit(textEdit){const range3=getWellformedRange(textEdit.range);return range3!==textEdit.range?{newText:textEdit.newText,range:range3}:textEdit}var LIB,URI2,Utils2,UriUtils,DocumentState,DefaultLangiumDocumentFactory,DefaultLangiumDocuments,ref_resolving,DefaultLinker,DefaultNameProvider,init_main2=__esm({"../../node_modules/.pnpm/vscode-languageserver-textdocument@1.0.12/node_modules/vscode-languageserver-textdocument/lib/esm/main.js"(){FullTextDocument2=class _FullTextDocument{static{__name(this,"FullTextDocument")}constructor(uri,languageId,version3,content){this._uri=uri,this._languageId=languageId,this._version=version3,this._content=content,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(range3){if(range3){const start3=this.offsetAt(range3.start),end2=this.offsetAt(range3.end);return this._content.substring(start3,end2)}return this._content}update(changes,version3){for(const change2 of changes)if(_FullTextDocument.isIncremental(change2)){const range3=getWellformedRange(change2.range),startOffset=this.offsetAt(range3.start),endOffset=this.offsetAt(range3.end);this._content=this._content.substring(0,startOffset)+change2.text+this._content.substring(endOffset,this._content.length);const startLine=Math.max(range3.start.line,0),endLine=Math.max(range3.end.line,0);let lineOffsets=this._lineOffsets;const addedLineOffsets=computeLineOffsets(change2.text,!1,startOffset);if(endLine-startLine===addedLineOffsets.length)for(let i2=0,len=addedLineOffsets.length;i2<len;i2++)lineOffsets[i2+startLine+1]=addedLineOffsets[i2];else addedLineOffsets.length<1e4?lineOffsets.splice(startLine+1,endLine-startLine,...addedLineOffsets):this._lineOffsets=lineOffsets=lineOffsets.slice(0,startLine+1).concat(addedLineOffsets,lineOffsets.slice(endLine+1));const diff2=change2.text.length-(endOffset-startOffset);if(0!==diff2)for(let i2=startLine+1+addedLineOffsets.length,len=lineOffsets.length;i2<len;i2++)lineOffsets[i2]=lineOffsets[i2]+diff2}else{if(!_FullTextDocument.isFull(change2))throw new Error("Unknown change event received");this._content=change2.text,this._lineOffsets=void 0}this._version=version3}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=computeLineOffsets(this._content,!0)),this._lineOffsets}positionAt(offset){offset=Math.max(Math.min(offset,this._content.length),0);const lineOffsets=this.getLineOffsets();let low=0,high=lineOffsets.length;if(0===high)return{line:0,character:offset};for(;low<high;){const mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}const line2=low-1;return{line:line2,character:(offset=this.ensureBeforeEOL(offset,lineOffsets[line2]))-lineOffsets[line2]}}offsetAt(position5){const lineOffsets=this.getLineOffsets();if(position5.line>=lineOffsets.length)return this._content.length;if(position5.line<0)return 0;const lineOffset=lineOffsets[position5.line];if(position5.character<=0)return lineOffset;const nextLineOffset=position5.line+1<lineOffsets.length?lineOffsets[position5.line+1]:this._content.length,offset=Math.min(lineOffset+position5.character,nextLineOffset);return this.ensureBeforeEOL(offset,lineOffset)}ensureBeforeEOL(offset,lineOffset){for(;offset>lineOffset&&isEOL(this._content.charCodeAt(offset-1));)offset--;return offset}get lineCount(){return this.getLineOffsets().length}static isIncremental(event3){const candidate=event3;return null!=candidate&&"string"==typeof candidate.text&&void 0!==candidate.range&&(void 0===candidate.rangeLength||"number"==typeof candidate.rangeLength)}static isFull(event3){const candidate=event3;return null!=candidate&&"string"==typeof candidate.text&&void 0===candidate.range&&void 0===candidate.rangeLength}},function(TextDocument3){function create4(uri,languageId,version3,content){return new FullTextDocument2(uri,languageId,version3,content)}function update2(document2,changes,version3){if(document2 instanceof FullTextDocument2)return document2.update(changes,version3),document2;throw new Error("TextDocument.update: document must be created by TextDocument.create")}function applyEdits(document2,edits){const text4=document2.getText(),sortedEdits=mergeSort(edits.map(getWellformedEdit),(a2,b3)=>{const diff2=a2.range.start.line-b3.range.start.line;return 0===diff2?a2.range.start.character-b3.range.start.character:diff2});let lastModifiedOffset=0;const spans=[];for(const e3 of sortedEdits){const startOffset=document2.offsetAt(e3.range.start);if(startOffset<lastModifiedOffset)throw new Error("Overlapping edit");startOffset>lastModifiedOffset&&spans.push(text4.substring(lastModifiedOffset,startOffset)),e3.newText.length&&spans.push(e3.newText),lastModifiedOffset=document2.offsetAt(e3.range.end)}return spans.push(text4.substr(lastModifiedOffset)),spans.join("")}__name(create4,"create"),TextDocument3.create=create4,__name(update2,"update"),TextDocument3.update=update2,__name(applyEdits,"applyEdits"),TextDocument3.applyEdits=applyEdits}(TextDocument2||(TextDocument2={})),__name(mergeSort,"mergeSort"),__name(computeLineOffsets,"computeLineOffsets"),__name(isEOL,"isEOL"),__name(getWellformedRange,"getWellformedRange"),__name(getWellformedEdit,"getWellformedEdit")}}),init_esm2=__esm({"../../node_modules/.pnpm/vscode-uri@3.0.8/node_modules/vscode-uri/lib/esm/index.mjs"(){(()=>{var t4={470:t5=>{function e4(t6){if("string"!=typeof t6)throw new TypeError("Path must be a string. Received "+JSON.stringify(t6))}function r3(t6,e6){for(var r4,n4="",i2=0,o2=-1,s2=0,h3=0;h3<=t6.length;++h3){if(h3<t6.length)r4=t6.charCodeAt(h3);else{if(47===r4)break;r4=47}if(47===r4){if(o2===h3-1||1===s2);else if(o2!==h3-1&&2===s2){if(n4.length<2||2!==i2||46!==n4.charCodeAt(n4.length-1)||46!==n4.charCodeAt(n4.length-2))if(n4.length>2){var a2=n4.lastIndexOf("/");if(a2!==n4.length-1){-1===a2?(n4="",i2=0):i2=(n4=n4.slice(0,a2)).length-1-n4.lastIndexOf("/"),o2=h3,s2=0;continue}}else if(2===n4.length||1===n4.length){n4="",i2=0,o2=h3,s2=0;continue}e6&&(n4.length>0?n4+="/..":n4="..",i2=2)}else n4.length>0?n4+="/"+t6.slice(o2+1,h3):n4=t6.slice(o2+1,h3),i2=h3-o2-1;o2=h3,s2=0}else 46===r4&&-1!==s2?++s2:s2=-1}return n4}__name(e4,"e"),__name(r3,"r");var n3={resolve:__name(function(){for(var t6,n4="",i2=!1,o2=arguments.length-1;o2>=-1&&!i2;o2--){var s2;o2>=0?s2=arguments[o2]:(void 0===t6&&(t6=process.cwd()),s2=t6),e4(s2),0!==s2.length&&(n4=s2+"/"+n4,i2=47===s2.charCodeAt(0))}return n4=r3(n4,!i2),i2?n4.length>0?"/"+n4:"/":n4.length>0?n4:"."},"resolve"),normalize:__name(function(t6){if(e4(t6),0===t6.length)return".";var n4=47===t6.charCodeAt(0),i2=47===t6.charCodeAt(t6.length-1);return 0!==(t6=r3(t6,!n4)).length||n4||(t6="."),t6.length>0&&i2&&(t6+="/"),n4?"/"+t6:t6},"normalize"),isAbsolute:__name(function(t6){return e4(t6),t6.length>0&&47===t6.charCodeAt(0)},"isAbsolute"),join:__name(function(){if(0===arguments.length)return".";for(var t6,r4=0;r4<arguments.length;++r4){var i2=arguments[r4];e4(i2),i2.length>0&&(void 0===t6?t6=i2:t6+="/"+i2)}return void 0===t6?".":n3.normalize(t6)},"join"),relative:__name(function(t6,r4){if(e4(t6),e4(r4),t6===r4)return"";if((t6=n3.resolve(t6))===(r4=n3.resolve(r4)))return"";for(var i2=1;i2<t6.length&&47===t6.charCodeAt(i2);++i2);for(var o2=t6.length,s2=o2-i2,h3=1;h3<r4.length&&47===r4.charCodeAt(h3);++h3);for(var a2=r4.length-h3,c3=s2<a2?s2:a2,f2=-1,u2=0;u2<=c3;++u2){if(u2===c3){if(a2>c3){if(47===r4.charCodeAt(h3+u2))return r4.slice(h3+u2+1);if(0===u2)return r4.slice(h3+u2)}else s2>c3&&(47===t6.charCodeAt(i2+u2)?f2=u2:0===u2&&(f2=0));break}var l4=t6.charCodeAt(i2+u2);if(l4!==r4.charCodeAt(h3+u2))break;47===l4&&(f2=u2)}var g2="";for(u2=i2+f2+1;u2<=o2;++u2)u2!==o2&&47!==t6.charCodeAt(u2)||(0===g2.length?g2+="..":g2+="/..");return g2.length>0?g2+r4.slice(h3+f2):(h3+=f2,47===r4.charCodeAt(h3)&&++h3,r4.slice(h3))},"relative"),_makeLong:__name(function(t6){return t6},"_makeLong"),dirname:__name(function(t6){if(e4(t6),0===t6.length)return".";for(var r4=t6.charCodeAt(0),n4=47===r4,i2=-1,o2=!0,s2=t6.length-1;s2>=1;--s2)if(47===(r4=t6.charCodeAt(s2))){if(!o2){i2=s2;break}}else o2=!1;return-1===i2?n4?"/":".":n4&&1===i2?"//":t6.slice(0,i2)},"dirname"),basename:__name(function(t6,r4){if(void 0!==r4&&"string"!=typeof r4)throw new TypeError('"ext" argument must be a string');e4(t6);var n4,i2=0,o2=-1,s2=!0;if(void 0!==r4&&r4.length>0&&r4.length<=t6.length){if(r4.length===t6.length&&r4===t6)return"";var h3=r4.length-1,a2=-1;for(n4=t6.length-1;n4>=0;--n4){var c3=t6.charCodeAt(n4);if(47===c3){if(!s2){i2=n4+1;break}}else-1===a2&&(s2=!1,a2=n4+1),h3>=0&&(c3===r4.charCodeAt(h3)?-1==--h3&&(o2=n4):(h3=-1,o2=a2))}return i2===o2?o2=a2:-1===o2&&(o2=t6.length),t6.slice(i2,o2)}for(n4=t6.length-1;n4>=0;--n4)if(47===t6.charCodeAt(n4)){if(!s2){i2=n4+1;break}}else-1===o2&&(s2=!1,o2=n4+1);return-1===o2?"":t6.slice(i2,o2)},"basename"),extname:__name(function(t6){e4(t6);for(var r4=-1,n4=0,i2=-1,o2=!0,s2=0,h3=t6.length-1;h3>=0;--h3){var a2=t6.charCodeAt(h3);if(47!==a2)-1===i2&&(o2=!1,i2=h3+1),46===a2?-1===r4?r4=h3:1!==s2&&(s2=1):-1!==r4&&(s2=-1);else if(!o2){n4=h3+1;break}}return-1===r4||-1===i2||0===s2||1===s2&&r4===i2-1&&r4===n4+1?"":t6.slice(r4,i2)},"extname"),format:__name(function(t6){if(null===t6||"object"!=typeof t6)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t6);return r4=(e6=t6).dir||e6.root,n4=e6.base||(e6.name||"")+(e6.ext||""),r4?r4===e6.root?r4+n4:r4+"/"+n4:n4;var e6,r4,n4},"format"),parse:__name(function(t6){e4(t6);var r4={root:"",dir:"",base:"",ext:"",name:""};if(0===t6.length)return r4;var n4,i2=t6.charCodeAt(0),o2=47===i2;o2?(r4.root="/",n4=1):n4=0;for(var s2=-1,h3=0,a2=-1,c3=!0,f2=t6.length-1,u2=0;f2>=n4;--f2)if(47!==(i2=t6.charCodeAt(f2)))-1===a2&&(c3=!1,a2=f2+1),46===i2?-1===s2?s2=f2:1!==u2&&(u2=1):-1!==s2&&(u2=-1);else if(!c3){h3=f2+1;break}return-1===s2||-1===a2||0===u2||1===u2&&s2===a2-1&&s2===h3+1?-1!==a2&&(r4.base=r4.name=0===h3&&o2?t6.slice(1,a2):t6.slice(h3,a2)):(0===h3&&o2?(r4.name=t6.slice(1,s2),r4.base=t6.slice(1,a2)):(r4.name=t6.slice(h3,s2),r4.base=t6.slice(h3,a2)),r4.ext=t6.slice(s2,a2)),h3>0?r4.dir=t6.slice(0,h3-1):o2&&(r4.dir="/"),r4},"parse"),sep:"/",delimiter:":",win32:null,posix:null};n3.posix=n3,t5.exports=n3}},e3={};function r2(n3){var i2=e3[n3];if(void 0!==i2)return i2.exports;var o2=e3[n3]={exports:{}};return t4[n3](o2,o2.exports,r2),o2.exports}__name(r2,"r"),r2.d=(t5,e4)=>{for(var n3 in e4)r2.o(e4,n3)&&!r2.o(t5,n3)&&Object.defineProperty(t5,n3,{enumerable:!0,get:e4[n3]})},r2.o=(t5,e4)=>Object.prototype.hasOwnProperty.call(t5,e4),r2.r=t5=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t5,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t5,"__esModule",{value:!0})};var n2={};(()=>{let t5;if(r2.r(n2),r2.d(n2,{URI:__name(()=>f2,"URI"),Utils:__name(()=>P3,"Utils")}),"object"==typeof process)t5="win32"===process.platform;else if("object"==typeof navigator){let e6=navigator.userAgent;t5=e6.indexOf("Windows")>=0}const e4=/^\w[\w\d+.-]*$/,i2=/^\//,o2=/^\/\//;function s2(t6,r3){if(!t6.scheme&&r3)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t6.authority}", path: "${t6.path}", query: "${t6.query}", fragment: "${t6.fragment}"}`);if(t6.scheme&&!e4.test(t6.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t6.path)if(t6.authority){if(!i2.test(t6.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o2.test(t6.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}__name(s2,"s");const a2="/",c3=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class f2{static{__name(this,"f")}static isUri(t6){return t6 instanceof f2||!!t6&&"string"==typeof t6.authority&&"string"==typeof t6.fragment&&"string"==typeof t6.path&&"string"==typeof t6.query&&"string"==typeof t6.scheme&&"string"==typeof t6.fsPath&&"function"==typeof t6.with&&"function"==typeof t6.toString}scheme;authority;path;query;fragment;constructor(t6,e6,r3,n3,i3,o3=!1){"object"==typeof t6?(this.scheme=t6.scheme||"",this.authority=t6.authority||"",this.path=t6.path||"",this.query=t6.query||"",this.fragment=t6.fragment||""):(this.scheme=function(t7,e7){return t7||e7?t7:"file"}(t6,o3),this.authority=e6||"",this.path=function(t7,e7){switch(t7){case"https":case"http":case"file":e7?e7[0]!==a2&&(e7=a2+e7):e7=a2}return e7}(this.scheme,r3||""),this.query=n3||"",this.fragment=i3||"",s2(this,o3))}get fsPath(){return m3(this,!1)}with(t6){if(!t6)return this;let{scheme:e6,authority:r3,path:n3,query:i3,fragment:o3}=t6;return void 0===e6?e6=this.scheme:null===e6&&(e6=""),void 0===r3?r3=this.authority:null===r3&&(r3=""),void 0===n3?n3=this.path:null===n3&&(n3=""),void 0===i3?i3=this.query:null===i3&&(i3=""),void 0===o3?o3=this.fragment:null===o3&&(o3=""),e6===this.scheme&&r3===this.authority&&n3===this.path&&i3===this.query&&o3===this.fragment?this:new l4(e6,r3,n3,i3,o3)}static parse(t6,e6=!1){const r3=c3.exec(t6);return r3?new l4(r3[2]||"",C3(r3[4]||""),C3(r3[5]||""),C3(r3[7]||""),C3(r3[9]||""),e6):new l4("","","","","")}static file(e6){let r3="";if(t5&&(e6=e6.replace(/\\/g,a2)),e6[0]===a2&&e6[1]===a2){const t6=e6.indexOf(a2,2);-1===t6?(r3=e6.substring(2),e6=a2):(r3=e6.substring(2,t6),e6=e6.substring(t6)||a2)}return new l4("file",r3,e6,"","")}static from(t6){const e6=new l4(t6.scheme,t6.authority,t6.path,t6.query,t6.fragment);return s2(e6,!0),e6}toString(t6=!1){return y6(this,t6)}toJSON(){return this}static revive(t6){if(t6){if(t6 instanceof f2)return t6;{const e6=new l4(t6);return e6._formatted=t6.external,e6._fsPath=t6._sep===u2?t6.fsPath:null,e6}}return t6}}const u2=t5?1:void 0;class l4 extends f2{static{__name(this,"l")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=m3(this,!1)),this._fsPath}toString(t6=!1){return t6?y6(this,!0):(this._formatted||(this._formatted=y6(this,!1)),this._formatted)}toJSON(){const t6={$mid:1};return this._fsPath&&(t6.fsPath=this._fsPath,t6._sep=u2),this._formatted&&(t6.external=this._formatted),this.path&&(t6.path=this.path),this.scheme&&(t6.scheme=this.scheme),this.authority&&(t6.authority=this.authority),this.query&&(t6.query=this.query),this.fragment&&(t6.fragment=this.fragment),t6}}const g2={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function d3(t6,e6,r3){let n3,i3=-1;for(let o3=0;o3<t6.length;o3++){const s3=t6.charCodeAt(o3);if(s3>=97&&s3<=122||s3>=65&&s3<=90||s3>=48&&s3<=57||45===s3||46===s3||95===s3||126===s3||e6&&47===s3||r3&&91===s3||r3&&93===s3||r3&&58===s3)-1!==i3&&(n3+=encodeURIComponent(t6.substring(i3,o3)),i3=-1),void 0!==n3&&(n3+=t6.charAt(o3));else{void 0===n3&&(n3=t6.substr(0,o3));const e7=g2[s3];void 0!==e7?(-1!==i3&&(n3+=encodeURIComponent(t6.substring(i3,o3)),i3=-1),n3+=e7):-1===i3&&(i3=o3)}}return-1!==i3&&(n3+=encodeURIComponent(t6.substring(i3))),void 0!==n3?n3:t6}function p3(t6){let e6;for(let r3=0;r3<t6.length;r3++){const n3=t6.charCodeAt(r3);35===n3||63===n3?(void 0===e6&&(e6=t6.substr(0,r3)),e6+=g2[n3]):void 0!==e6&&(e6+=t6[r3])}return void 0!==e6?e6:t6}function m3(e6,r3){let n3;return n3=e6.authority&&e6.path.length>1&&"file"===e6.scheme?`//${e6.authority}${e6.path}`:47===e6.path.charCodeAt(0)&&(e6.path.charCodeAt(1)>=65&&e6.path.charCodeAt(1)<=90||e6.path.charCodeAt(1)>=97&&e6.path.charCodeAt(1)<=122)&&58===e6.path.charCodeAt(2)?r3?e6.path.substr(1):e6.path[1].toLowerCase()+e6.path.substr(2):e6.path,t5&&(n3=n3.replace(/\//g,"\\")),n3}function y6(t6,e6){const r3=e6?p3:d3;let n3="",{scheme:i3,authority:o3,path:s3,query:h4,fragment:c4}=t6;if(i3&&(n3+=i3,n3+=":"),(o3||"file"===i3)&&(n3+=a2,n3+=a2),o3){let t7=o3.indexOf("@");if(-1!==t7){const e7=o3.substr(0,t7);o3=o3.substr(t7+1),t7=e7.lastIndexOf(":"),-1===t7?n3+=r3(e7,!1,!1):(n3+=r3(e7.substr(0,t7),!1,!1),n3+=":",n3+=r3(e7.substr(t7+1),!1,!0)),n3+="@"}o3=o3.toLowerCase(),t7=o3.lastIndexOf(":"),-1===t7?n3+=r3(o3,!1,!0):(n3+=r3(o3.substr(0,t7),!1,!0),n3+=o3.substr(t7))}if(s3){if(s3.length>=3&&47===s3.charCodeAt(0)&&58===s3.charCodeAt(2)){const t7=s3.charCodeAt(1);t7>=65&&t7<=90&&(s3=`/${String.fromCharCode(t7+32)}:${s3.substr(3)}`)}else if(s3.length>=2&&58===s3.charCodeAt(1)){const t7=s3.charCodeAt(0);t7>=65&&t7<=90&&(s3=`${String.fromCharCode(t7+32)}:${s3.substr(2)}`)}n3+=r3(s3,!0,!1)}return h4&&(n3+="?",n3+=r3(h4,!1,!1)),c4&&(n3+="#",n3+=e6?c4:d3(c4,!1,!1)),n3}function v3(t6){try{return decodeURIComponent(t6)}catch{return t6.length>3?t6.substr(0,3)+v3(t6.substr(3)):t6}}__name(d3,"d"),__name(p3,"p"),__name(m3,"m"),__name(y6,"y"),__name(v3,"v");const b3=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C3(t6){return t6.match(b3)?t6.replace(b3,t7=>v3(t7)):t6}__name(C3,"C");var A2=r2(470);const w4=A2.posix||A2;var P3,t6;(t6=P3||(P3={})).joinPath=function(t7,...e6){return t7.with({path:w4.join(t7.path,...e6)})},t6.resolvePath=function(t7,...e6){let r3=t7.path,n3=!1;"/"!==r3[0]&&(r3="/"+r3,n3=!0);let i3=w4.resolve(r3,...e6);return n3&&"/"===i3[0]&&!t7.authority&&(i3=i3.substring(1)),t7.with({path:i3})},t6.dirname=function(t7){if(0===t7.path.length||"/"===t7.path)return t7;let e6=w4.dirname(t7.path);return 1===e6.length&&46===e6.charCodeAt(0)&&(e6=""),t7.with({path:e6})},t6.basename=function(t7){return w4.basename(t7.path)},t6.extname=function(t7){return w4.extname(t7.path)}})(),LIB=n2})(),({URI:URI2,Utils:Utils2}=LIB)}}),init_uri_utils=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/uri-utils.js"(){init_esm2(),function(UriUtils2){function equals(a2,b3){return(null==a2?void 0:a2.toString())===(null==b3?void 0:b3.toString())}function relative(from2,to){const fromPath="string"==typeof from2?from2:from2.path,toPath2="string"==typeof to?to:to.path,fromParts=fromPath.split("/").filter(e3=>e3.length>0),toParts=toPath2.split("/").filter(e3=>e3.length>0);let i2=0;for(;i2<fromParts.length&&fromParts[i2]===toParts[i2];i2++);return"../".repeat(fromParts.length-i2)+toParts.slice(i2).join("/")}function normalize4(uri){return URI2.parse(uri.toString()).toString()}UriUtils2.basename=Utils2.basename,UriUtils2.dirname=Utils2.dirname,UriUtils2.extname=Utils2.extname,UriUtils2.joinPath=Utils2.joinPath,UriUtils2.resolvePath=Utils2.resolvePath,__name(equals,"equals"),UriUtils2.equals=equals,__name(relative,"relative"),UriUtils2.relative=relative,__name(normalize4,"normalize"),UriUtils2.normalize=normalize4}(UriUtils||(UriUtils={}))}}),init_documents=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/documents.js"(){var DocumentState2;init_main2(),init_documents(),init_cancellation(),init_stream(),init_uri_utils(),(DocumentState2=DocumentState||(DocumentState={}))[DocumentState2.Changed=0]="Changed",DocumentState2[DocumentState2.Parsed=1]="Parsed",DocumentState2[DocumentState2.IndexedContent=2]="IndexedContent",DocumentState2[DocumentState2.ComputedScopes=3]="ComputedScopes",DocumentState2[DocumentState2.Linked=4]="Linked",DocumentState2[DocumentState2.IndexedReferences=5]="IndexedReferences",DocumentState2[DocumentState2.Validated=6]="Validated",DefaultLangiumDocumentFactory=class{static{__name(this,"DefaultLangiumDocumentFactory")}constructor(services){this.serviceRegistry=services.ServiceRegistry,this.textDocuments=services.workspace.TextDocuments,this.fileSystemProvider=services.workspace.FileSystemProvider}async fromUri(uri,cancellationToken=cancellation_exports.CancellationToken.None){const content=await this.fileSystemProvider.readFile(uri);return this.createAsync(uri,content,cancellationToken)}fromTextDocument(textDocument,uri,token2){return uri=null!=uri?uri:URI2.parse(textDocument.uri),cancellation_exports.CancellationToken.is(token2)?this.createAsync(uri,textDocument,token2):this.create(uri,textDocument,token2)}fromString(text4,uri,token2){return cancellation_exports.CancellationToken.is(token2)?this.createAsync(uri,text4,token2):this.create(uri,text4,token2)}fromModel(model,uri){return this.create(uri,{$model:model})}create(uri,content,options2){if("string"==typeof content){const parseResult=this.parse(uri,content,options2);return this.createLangiumDocument(parseResult,uri,void 0,content)}if("$model"in content){const parseResult={value:content.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(parseResult,uri)}{const parseResult=this.parse(uri,content.getText(),options2);return this.createLangiumDocument(parseResult,uri,content)}}async createAsync(uri,content,cancelToken){if("string"==typeof content){const parseResult=await this.parseAsync(uri,content,cancelToken);return this.createLangiumDocument(parseResult,uri,void 0,content)}{const parseResult=await this.parseAsync(uri,content.getText(),cancelToken);return this.createLangiumDocument(parseResult,uri,content)}}createLangiumDocument(parseResult,uri,textDocument,text4){let document2;if(textDocument)document2={parseResult:parseResult,uri:uri,state:DocumentState.Parsed,references:[],textDocument:textDocument};else{const textDocumentGetter=this.createTextDocumentGetter(uri,text4);document2={parseResult:parseResult,uri:uri,state:DocumentState.Parsed,references:[],get textDocument(){return textDocumentGetter()}}}return parseResult.value.$document=document2,document2}async update(document2,cancellationToken){var _a,_b;const oldText=null===(_a=document2.parseResult.value.$cstNode)||void 0===_a?void 0:_a.root.fullText,textDocument=null===(_b=this.textDocuments)||void 0===_b?void 0:_b.get(document2.uri.toString()),text4=textDocument?textDocument.getText():await this.fileSystemProvider.readFile(document2.uri);if(textDocument)Object.defineProperty(document2,"textDocument",{value:textDocument});else{const textDocumentGetter=this.createTextDocumentGetter(document2.uri,text4);Object.defineProperty(document2,"textDocument",{get:textDocumentGetter})}return oldText!==text4&&(document2.parseResult=await this.parseAsync(document2.uri,text4,cancellationToken),document2.parseResult.value.$document=document2),document2.state=DocumentState.Parsed,document2}parse(uri,text4,options2){return this.serviceRegistry.getServices(uri).parser.LangiumParser.parse(text4,options2)}parseAsync(uri,text4,cancellationToken){return this.serviceRegistry.getServices(uri).parser.AsyncParser.parse(text4,cancellationToken)}createTextDocumentGetter(uri,text4){const serviceRegistry=this.serviceRegistry;let textDoc;return()=>null!=textDoc?textDoc:textDoc=TextDocument2.create(uri.toString(),serviceRegistry.getServices(uri).LanguageMetaData.languageId,0,null!=text4?text4:"")}},DefaultLangiumDocuments=class{static{__name(this,"DefaultLangiumDocuments")}constructor(services){this.documentMap=new Map,this.langiumDocumentFactory=services.workspace.LangiumDocumentFactory,this.serviceRegistry=services.ServiceRegistry}get all(){return stream(this.documentMap.values())}addDocument(document2){const uriString=document2.uri.toString();if(this.documentMap.has(uriString))throw new Error(`A document with the URI '${uriString}' is already present.`);this.documentMap.set(uriString,document2)}getDocument(uri){const uriString=uri.toString();return this.documentMap.get(uriString)}async getOrCreateDocument(uri,cancellationToken){let document2=this.getDocument(uri);return document2||(document2=await this.langiumDocumentFactory.fromUri(uri,cancellationToken),this.addDocument(document2),document2)}createDocument(uri,text4,cancellationToken){if(cancellationToken)return this.langiumDocumentFactory.fromString(text4,uri,cancellationToken).then(document2=>(this.addDocument(document2),document2));{const document2=this.langiumDocumentFactory.fromString(text4,uri);return this.addDocument(document2),document2}}hasDocument(uri){return this.documentMap.has(uri.toString())}invalidateDocument(uri){const uriString=uri.toString(),langiumDoc=this.documentMap.get(uriString);if(langiumDoc){this.serviceRegistry.getServices(uri).references.Linker.unlink(langiumDoc),langiumDoc.state=DocumentState.Changed,langiumDoc.precomputedScopes=void 0,langiumDoc.diagnostics=void 0}return langiumDoc}deleteDocument(uri){const uriString=uri.toString(),langiumDoc=this.documentMap.get(uriString);return langiumDoc&&(langiumDoc.state=DocumentState.Changed,this.documentMap.delete(uriString)),langiumDoc}}}}),init_linker=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/linker.js"(){init_cancellation(),init_syntax_tree(),init_ast_utils(),init_promise_utils(),init_documents(),ref_resolving=Symbol("ref_resolving"),DefaultLinker=class{static{__name(this,"DefaultLinker")}constructor(services){this.reflection=services.shared.AstReflection,this.langiumDocuments=()=>services.shared.workspace.LangiumDocuments,this.scopeProvider=services.references.ScopeProvider,this.astNodeLocator=services.workspace.AstNodeLocator}async link(document2,cancelToken=cancellation_exports.CancellationToken.None){for(const node2 of streamAst(document2.parseResult.value))await interruptAndCheck(cancelToken),streamReferences(node2).forEach(ref=>this.doLink(ref,document2))}doLink(refInfo,document2){var _a;const ref=refInfo.reference;if(void 0===ref._ref){ref._ref=ref_resolving;try{const description=this.getCandidate(refInfo);if(isLinkingError(description))ref._ref=description;else if(ref._nodeDescription=description,this.langiumDocuments().hasDocument(description.documentUri)){const linkedNode=this.loadAstNode(description);ref._ref=null!=linkedNode?linkedNode:this.createLinkingError(refInfo,description)}else ref._ref=void 0}catch(err){console.error(`An error occurred while resolving reference to '${ref.$refText}':`,err);const errorMessage=null!==(_a=err.message)&&void 0!==_a?_a:String(err);ref._ref=Object.assign(Object.assign({},refInfo),{message:`An error occurred while resolving reference to '${ref.$refText}': ${errorMessage}`})}document2.references.push(ref)}}unlink(document2){for(const ref of document2.references)delete ref._ref,delete ref._nodeDescription;document2.references=[]}getCandidate(refInfo){const description=this.scopeProvider.getScope(refInfo).getElement(refInfo.reference.$refText);return null!=description?description:this.createLinkingError(refInfo)}buildReference(node2,property2,refNode,refText){const linker=this,reference={$refNode:refNode,$refText:refText,get ref(){var _a;if(isAstNode(this._ref))return this._ref;if(isAstNodeDescription(this._nodeDescription)){const linkedNode=linker.loadAstNode(this._nodeDescription);this._ref=null!=linkedNode?linkedNode:linker.createLinkingError({reference:reference,container:node2,property:property2},this._nodeDescription)}else if(void 0===this._ref){this._ref=ref_resolving;const document2=findRootNode(node2).$document,refData=linker.getLinkedNode({reference:reference,container:node2,property:property2});if(refData.error&&document2&&document2.state<DocumentState.ComputedScopes)return this._ref=void 0;this._ref=null!==(_a=refData.node)&&void 0!==_a?_a:refData.error,this._nodeDescription=refData.descr,null==document2||document2.references.push(this)}else if(this._ref===ref_resolving)throw new Error(`Cyclic reference resolution detected: ${linker.astNodeLocator.getAstNodePath(node2)}/${property2} (symbol '${refText}')`);return isAstNode(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return isLinkingError(this._ref)?this._ref:void 0}};return reference}getLinkedNode(refInfo){var _a;try{const description=this.getCandidate(refInfo);if(isLinkingError(description))return{error:description};const linkedNode=this.loadAstNode(description);return linkedNode?{node:linkedNode,descr:description}:{descr:description,error:this.createLinkingError(refInfo,description)}}catch(err){console.error(`An error occurred while resolving reference to '${refInfo.reference.$refText}':`,err);const errorMessage=null!==(_a=err.message)&&void 0!==_a?_a:String(err);return{error:Object.assign(Object.assign({},refInfo),{message:`An error occurred while resolving reference to '${refInfo.reference.$refText}': ${errorMessage}`})}}}loadAstNode(nodeDescription){if(nodeDescription.node)return nodeDescription.node;const doc=this.langiumDocuments().getDocument(nodeDescription.documentUri);return doc?this.astNodeLocator.getAstNode(doc.parseResult.value,nodeDescription.path):void 0}createLinkingError(refInfo,targetDescription){const document2=findRootNode(refInfo.container).$document;document2&&document2.state<DocumentState.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${document2.uri}).`);const referenceType=this.reflection.getReferenceType(refInfo);return Object.assign(Object.assign({},refInfo),{message:`Could not resolve reference to ${referenceType} named '${refInfo.reference.$refText}'.`,targetDescription:targetDescription})}}}});function isNamed(node2){return"string"==typeof node2.name}var DefaultReferences,MultiMap,BiMap,DefaultScopeComputation,StreamScope,MapScope,EMPTY_SCOPE,DisposableCache,SimpleCache,ContextCache,DocumentCache,WorkspaceCache,DefaultScopeProvider,DefaultJsonSerializer,init_name_provider=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/name-provider.js"(){init_grammar_utils(),__name(isNamed,"isNamed"),DefaultNameProvider=class{static{__name(this,"DefaultNameProvider")}getName(node2){if(isNamed(node2))return node2.name}getNameNode(node2){return findNodeForProperty(node2.$cstNode,"name")}}}}),init_references=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/references.js"(){init_grammar_utils(),init_syntax_tree(),init_ast_utils(),init_cst_utils(),init_stream(),init_uri_utils(),DefaultReferences=class{static{__name(this,"DefaultReferences")}constructor(services){this.nameProvider=services.references.NameProvider,this.index=services.shared.workspace.IndexManager,this.nodeLocator=services.workspace.AstNodeLocator}findDeclaration(sourceCstNode){if(sourceCstNode){const assignment=findAssignment(sourceCstNode),nodeElem=sourceCstNode.astNode;if(assignment&&nodeElem){const reference=nodeElem[assignment.feature];if(isReference(reference))return reference.ref;if(Array.isArray(reference))for(const ref of reference)if(isReference(ref)&&ref.$refNode&&ref.$refNode.offset<=sourceCstNode.offset&&ref.$refNode.end>=sourceCstNode.end)return ref.ref}if(nodeElem){const nameNode=this.nameProvider.getNameNode(nodeElem);if(nameNode&&(nameNode===sourceCstNode||isChildNode(sourceCstNode,nameNode)))return nodeElem}}}findDeclarationNode(sourceCstNode){const astNode=this.findDeclaration(sourceCstNode);if(null==astNode?void 0:astNode.$cstNode){const targetNode=this.nameProvider.getNameNode(astNode);return null!=targetNode?targetNode:astNode.$cstNode}}findReferences(targetNode,options2){const refs=[];if(options2.includeDeclaration){const ref=this.getReferenceToSelf(targetNode);ref&&refs.push(ref)}let indexReferences=this.index.findAllReferences(targetNode,this.nodeLocator.getAstNodePath(targetNode));return options2.documentUri&&(indexReferences=indexReferences.filter(ref=>UriUtils.equals(ref.sourceUri,options2.documentUri))),refs.push(...indexReferences),stream(refs)}getReferenceToSelf(targetNode){const nameNode=this.nameProvider.getNameNode(targetNode);if(nameNode){const doc=getDocument(targetNode),path4=this.nodeLocator.getAstNodePath(targetNode);return{sourceUri:doc.uri,sourcePath:path4,targetUri:doc.uri,targetPath:path4,segment:toDocumentSegment(nameNode),local:!0}}}}}}),init_collections=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/collections.js"(){init_stream(),MultiMap=class{static{__name(this,"MultiMap")}constructor(elements2){if(this.map=new Map,elements2)for(const[key,value2]of elements2)this.add(key,value2)}get size(){return Reduction.sum(stream(this.map.values()).map(a2=>a2.length))}clear(){this.map.clear()}delete(key,value2){if(void 0===value2)return this.map.delete(key);{const values2=this.map.get(key);if(values2){const index=values2.indexOf(value2);if(index>=0)return 1===values2.length?this.map.delete(key):values2.splice(index,1),!0}return!1}}get(key){var _a;return null!==(_a=this.map.get(key))&&void 0!==_a?_a:[]}has(key,value2){if(void 0===value2)return this.map.has(key);{const values2=this.map.get(key);return!!values2&&values2.indexOf(value2)>=0}}add(key,value2){return this.map.has(key)?this.map.get(key).push(value2):this.map.set(key,[value2]),this}addAll(key,values2){return this.map.has(key)?this.map.get(key).push(...values2):this.map.set(key,Array.from(values2)),this}forEach(callbackfn){this.map.forEach((array4,key)=>array4.forEach(value2=>callbackfn(value2,key,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return stream(this.map.entries()).flatMap(([key,array4])=>array4.map(value2=>[key,value2]))}keys(){return stream(this.map.keys())}values(){return stream(this.map.values()).flat()}entriesGroupedByKey(){return stream(this.map.entries())}},BiMap=class{static{__name(this,"BiMap")}get size(){return this.map.size}constructor(elements2){if(this.map=new Map,this.inverse=new Map,elements2)for(const[key,value2]of elements2)this.set(key,value2)}clear(){this.map.clear(),this.inverse.clear()}set(key,value2){return this.map.set(key,value2),this.inverse.set(value2,key),this}get(key){return this.map.get(key)}getKey(value2){return this.inverse.get(value2)}delete(key){const value2=this.map.get(key);return void 0!==value2&&(this.map.delete(key),this.inverse.delete(value2),!0)}}}}),init_scope_computation=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/scope-computation.js"(){init_cancellation(),init_ast_utils(),init_collections(),init_promise_utils(),DefaultScopeComputation=class{static{__name(this,"DefaultScopeComputation")}constructor(services){this.nameProvider=services.references.NameProvider,this.descriptions=services.workspace.AstNodeDescriptionProvider}async computeExports(document2,cancelToken=cancellation_exports.CancellationToken.None){return this.computeExportsForNode(document2.parseResult.value,document2,void 0,cancelToken)}async computeExportsForNode(parentNode,document2,children2=streamContents,cancelToken=cancellation_exports.CancellationToken.None){const exports2=[];this.exportNode(parentNode,exports2,document2);for(const node2 of children2(parentNode))await interruptAndCheck(cancelToken),this.exportNode(node2,exports2,document2);return exports2}exportNode(node2,exports2,document2){const name=this.nameProvider.getName(node2);name&&exports2.push(this.descriptions.createDescription(node2,name,document2))}async computeLocalScopes(document2,cancelToken=cancellation_exports.CancellationToken.None){const rootNode=document2.parseResult.value,scopes=new MultiMap;for(const node2 of streamAllContents(rootNode))await interruptAndCheck(cancelToken),this.processNode(node2,document2,scopes);return scopes}processNode(node2,document2,scopes){const container2=node2.$container;if(container2){const name=this.nameProvider.getName(node2);name&&scopes.add(container2,this.descriptions.createDescription(node2,name,document2))}}}}}),init_scope=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/scope.js"(){init_stream(),StreamScope=class{static{__name(this,"StreamScope")}constructor(elements2,outerScope,options2){var _a;this.elements=elements2,this.outerScope=outerScope,this.caseInsensitive=null!==(_a=null==options2?void 0:options2.caseInsensitive)&&void 0!==_a&&_a}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(name){const local=this.caseInsensitive?this.elements.find(e3=>e3.name.toLowerCase()===name.toLowerCase()):this.elements.find(e3=>e3.name===name);return local||(this.outerScope?this.outerScope.getElement(name):void 0)}},MapScope=class{static{__name(this,"MapScope")}constructor(elements2,outerScope,options2){var _a;this.elements=new Map,this.caseInsensitive=null!==(_a=null==options2?void 0:options2.caseInsensitive)&&void 0!==_a&&_a;for(const element3 of elements2){const name=this.caseInsensitive?element3.name.toLowerCase():element3.name;this.elements.set(name,element3)}this.outerScope=outerScope}getElement(name){const localName=this.caseInsensitive?name.toLowerCase():name,local=this.elements.get(localName);return local||(this.outerScope?this.outerScope.getElement(name):void 0)}getAllElements(){let elementStream=stream(this.elements.values());return this.outerScope&&(elementStream=elementStream.concat(this.outerScope.getAllElements())),elementStream}},EMPTY_SCOPE={getElement(){},getAllElements:()=>EMPTY_STREAM}}}),init_caching=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/caching.js"(){DisposableCache=class{static{__name(this,"DisposableCache")}constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(disposable){this.toDispose.push(disposable)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(disposable=>disposable.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},SimpleCache=class extends DisposableCache{static{__name(this,"SimpleCache")}constructor(){super(...arguments),this.cache=new Map}has(key){return this.throwIfDisposed(),this.cache.has(key)}set(key,value2){this.throwIfDisposed(),this.cache.set(key,value2)}get(key,provider){if(this.throwIfDisposed(),this.cache.has(key))return this.cache.get(key);if(provider){const value2=provider();return this.cache.set(key,value2),value2}}delete(key){return this.throwIfDisposed(),this.cache.delete(key)}clear(){this.throwIfDisposed(),this.cache.clear()}},ContextCache=class extends DisposableCache{static{__name(this,"ContextCache")}constructor(converter){super(),this.cache=new Map,this.converter=null!=converter?converter:value2=>value2}has(contextKey,key){return this.throwIfDisposed(),this.cacheForContext(contextKey).has(key)}set(contextKey,key,value2){this.throwIfDisposed(),this.cacheForContext(contextKey).set(key,value2)}get(contextKey,key,provider){this.throwIfDisposed();const contextCache=this.cacheForContext(contextKey);if(contextCache.has(key))return contextCache.get(key);if(provider){const value2=provider();return contextCache.set(key,value2),value2}}delete(contextKey,key){return this.throwIfDisposed(),this.cacheForContext(contextKey).delete(key)}clear(contextKey){if(this.throwIfDisposed(),contextKey){const mapKey=this.converter(contextKey);this.cache.delete(mapKey)}else this.cache.clear()}cacheForContext(contextKey){const mapKey=this.converter(contextKey);let documentCache=this.cache.get(mapKey);return documentCache||(documentCache=new Map,this.cache.set(mapKey,documentCache)),documentCache}},DocumentCache=class extends ContextCache{static{__name(this,"DocumentCache")}constructor(sharedServices,state3){super(uri=>uri.toString()),state3?(this.toDispose.push(sharedServices.workspace.DocumentBuilder.onDocumentPhase(state3,document2=>{this.clear(document2.uri.toString())})),this.toDispose.push(sharedServices.workspace.DocumentBuilder.onUpdate((_changed,deleted)=>{for(const uri of deleted)this.clear(uri)}))):this.toDispose.push(sharedServices.workspace.DocumentBuilder.onUpdate((changed,deleted)=>{const allUris=changed.concat(deleted);for(const uri of allUris)this.clear(uri)}))}},WorkspaceCache=class extends SimpleCache{static{__name(this,"WorkspaceCache")}constructor(sharedServices,state3){super(),state3?(this.toDispose.push(sharedServices.workspace.DocumentBuilder.onBuildPhase(state3,()=>{this.clear()})),this.toDispose.push(sharedServices.workspace.DocumentBuilder.onUpdate((_changed,deleted)=>{deleted.length>0&&this.clear()}))):this.toDispose.push(sharedServices.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}}}),init_scope_provider=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/scope-provider.js"(){init_scope(),init_ast_utils(),init_stream(),init_caching(),DefaultScopeProvider=class{static{__name(this,"DefaultScopeProvider")}constructor(services){this.reflection=services.shared.AstReflection,this.nameProvider=services.references.NameProvider,this.descriptions=services.workspace.AstNodeDescriptionProvider,this.indexManager=services.shared.workspace.IndexManager,this.globalScopeCache=new WorkspaceCache(services.shared)}getScope(context){const scopes=[],referenceType=this.reflection.getReferenceType(context),precomputed=getDocument(context.container).precomputedScopes;if(precomputed){let currentNode=context.container;do{const allDescriptions=precomputed.get(currentNode);allDescriptions.length>0&&scopes.push(stream(allDescriptions).filter(desc=>this.reflection.isSubtype(desc.type,referenceType))),currentNode=currentNode.$container}while(currentNode)}let result=this.getGlobalScope(referenceType,context);for(let i2=scopes.length-1;i2>=0;i2--)result=this.createScope(scopes[i2],result);return result}createScope(elements2,outerScope,options2){return new StreamScope(stream(elements2),outerScope,options2)}createScopeForNodes(elements2,outerScope,options2){const s2=stream(elements2).map(e3=>{const name=this.nameProvider.getName(e3);if(name)return this.descriptions.createDescription(e3,name)}).nonNullable();return new StreamScope(s2,outerScope,options2)}getGlobalScope(referenceType,_context){return this.globalScopeCache.get(referenceType,()=>new MapScope(this.indexManager.allElements(referenceType)))}}}});function isAstNodeWithComment(node2){return"string"==typeof node2.$comment}function isIntermediateReference(obj){return"object"==typeof obj&&!!obj&&("$ref"in obj||"$error"in obj)}var DefaultServiceRegistry,ValidationCategory,ValidationRegistry,init_json_serializer=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/serializer/json-serializer.js"(){init_esm2(),init_syntax_tree(),init_ast_utils(),init_grammar_utils(),__name(isAstNodeWithComment,"isAstNodeWithComment"),__name(isIntermediateReference,"isIntermediateReference"),DefaultJsonSerializer=class{static{__name(this,"DefaultJsonSerializer")}constructor(services){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=services.shared.workspace.LangiumDocuments,this.astNodeLocator=services.workspace.AstNodeLocator,this.nameProvider=services.references.NameProvider,this.commentProvider=services.documentation.CommentProvider}serialize(node2,options2){const serializeOptions=null!=options2?options2:{},specificReplacer=null==options2?void 0:options2.replacer,defaultReplacer=__name((key,value2)=>this.replacer(key,value2,serializeOptions),"defaultReplacer"),replacer=specificReplacer?(key,value2)=>specificReplacer(key,value2,defaultReplacer):defaultReplacer;try{return this.currentDocument=getDocument(node2),JSON.stringify(node2,replacer,null==options2?void 0:options2.space)}finally{this.currentDocument=void 0}}deserialize(content,options2){const deserializeOptions=null!=options2?options2:{},root3=JSON.parse(content);return this.linkNode(root3,root3,deserializeOptions),root3}replacer(key,value2,{refText:refText,sourceText:sourceText,textRegions:textRegions,comments:comments,uriConverter:uriConverter}){var _a,_b,_c,_d;if(!this.ignoreProperties.has(key)){if(isReference(value2)){const refValue=value2.ref,$refText=refText?value2.$refText:void 0;if(refValue){const targetDocument=getDocument(refValue);let targetUri="";this.currentDocument&&this.currentDocument!==targetDocument&&(targetUri=uriConverter?uriConverter(targetDocument.uri,value2):targetDocument.uri.toString());return{$ref:`${targetUri}#${this.astNodeLocator.getAstNodePath(refValue)}`,$refText:$refText}}return{$error:null!==(_b=null===(_a=value2.error)||void 0===_a?void 0:_a.message)&&void 0!==_b?_b:"Could not resolve reference",$refText:$refText}}if(isAstNode(value2)){let astNode;if(textRegions&&(astNode=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},value2)),key&&!value2.$document||!(null==astNode?void 0:astNode.$textRegion)||(astNode.$textRegion.documentURI=null===(_c=this.currentDocument)||void 0===_c?void 0:_c.uri.toString())),sourceText&&!key&&(null!=astNode||(astNode=Object.assign({},value2)),astNode.$sourceText=null===(_d=value2.$cstNode)||void 0===_d?void 0:_d.text),comments){null!=astNode||(astNode=Object.assign({},value2));const comment2=this.commentProvider.getComment(value2);comment2&&(astNode.$comment=comment2.replace(/\r/g,""))}return null!=astNode?astNode:value2}return value2}}addAstNodeRegionWithAssignmentsTo(node2){const createDocumentSegment=__name(cstNode=>({offset:cstNode.offset,end:cstNode.end,length:cstNode.length,range:cstNode.range}),"createDocumentSegment");if(node2.$cstNode){const assignments=(node2.$textRegion=createDocumentSegment(node2.$cstNode)).assignments={};return Object.keys(node2).filter(key=>!key.startsWith("$")).forEach(key=>{const propertyAssignments=findNodesForProperty(node2.$cstNode,key).map(createDocumentSegment);0!==propertyAssignments.length&&(assignments[key]=propertyAssignments)}),node2}}linkNode(node2,root3,options2,container2,containerProperty,containerIndex){for(const[propertyName,item]of Object.entries(node2))if(Array.isArray(item))for(let index=0;index<item.length;index++){const element3=item[index];isIntermediateReference(element3)?item[index]=this.reviveReference(node2,propertyName,root3,element3,options2):isAstNode(element3)&&this.linkNode(element3,root3,options2,node2,propertyName,index)}else isIntermediateReference(item)?node2[propertyName]=this.reviveReference(node2,propertyName,root3,item,options2):isAstNode(item)&&this.linkNode(item,root3,options2,node2,propertyName);const mutable=node2;mutable.$container=container2,mutable.$containerProperty=containerProperty,mutable.$containerIndex=containerIndex}reviveReference(container2,property2,root3,reference,options2){let refText=reference.$refText,error3=reference.$error;if(reference.$ref){const ref=this.getRefNode(root3,reference.$ref,options2.uriConverter);if(isAstNode(ref))return refText||(refText=this.nameProvider.getName(ref)),{$refText:null!=refText?refText:"",ref:ref};error3=ref}if(error3){const ref={$refText:null!=refText?refText:""};return ref.error={container:container2,property:property2,message:error3,reference:ref},ref}}getRefNode(root3,uri,uriConverter){try{const fragmentIndex=uri.indexOf("#");if(0===fragmentIndex){const node3=this.astNodeLocator.getAstNode(root3,uri.substring(1));return node3||"Could not resolve path: "+uri}if(fragmentIndex<0){const documentUri2=uriConverter?uriConverter(uri):URI2.parse(uri),document3=this.langiumDocuments.getDocument(documentUri2);return document3?document3.parseResult.value:"Could not find document for URI: "+uri}const documentUri=uriConverter?uriConverter(uri.substring(0,fragmentIndex)):URI2.parse(uri.substring(0,fragmentIndex)),document2=this.langiumDocuments.getDocument(documentUri);if(!document2)return"Could not find document for URI: "+uri;if(fragmentIndex===uri.length-1)return document2.parseResult.value;const node2=this.astNodeLocator.getAstNode(document2.parseResult.value,uri.substring(fragmentIndex+1));return node2||"Could not resolve URI: "+uri}catch(err){return String(err)}}}}}),init_service_registry=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/service-registry.js"(){init_uri_utils(),DefaultServiceRegistry=class{static{__name(this,"DefaultServiceRegistry")}get map(){return this.fileExtensionMap}constructor(services){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=null==services?void 0:services.workspace.TextDocuments}register(language){const data5=language.LanguageMetaData;for(const ext of data5.fileExtensions)this.fileExtensionMap.has(ext)&&console.warn(`The file extension ${ext} is used by multiple languages. It is now assigned to '${data5.languageId}'.`),this.fileExtensionMap.set(ext,language);this.languageIdMap.set(data5.languageId,language),1===this.languageIdMap.size?this.singleton=language:this.singleton=void 0}getServices(uri){var _a,_b;if(void 0!==this.singleton)return this.singleton;if(0===this.languageIdMap.size)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const languageId=null===(_b=null===(_a=this.textDocuments)||void 0===_a?void 0:_a.get(uri))||void 0===_b?void 0:_b.languageId;if(void 0!==languageId){const services2=this.languageIdMap.get(languageId);if(services2)return services2}const ext=UriUtils.extname(uri),services=this.fileExtensionMap.get(ext);if(!services)throw languageId?new Error(`The service registry contains no services for the extension '${ext}' for language '${languageId}'.`):new Error(`The service registry contains no services for the extension '${ext}'.`);return services}hasServices(uri){try{return this.getServices(uri),!0}catch(_a){return!1}}get all(){return Array.from(this.languageIdMap.values())}}}});function diagnosticData(code){return{code:code}}var DefaultDocumentValidator,DocumentValidator,init_validation_registry=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/validation/validation-registry.js"(){init_lib3(),init_collections(),init_promise_utils(),init_stream(),__name(diagnosticData,"diagnosticData"),(ValidationCategory||(ValidationCategory={})).all=["fast","slow","built-in"],ValidationRegistry=class{static{__name(this,"ValidationRegistry")}constructor(services){this.entries=new MultiMap,this.entriesBefore=[],this.entriesAfter=[],this.reflection=services.shared.AstReflection}register(checksRecord,thisObj=this,category="fast"){if("built-in"===category)throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[type3,ch]of Object.entries(checksRecord)){const callbacks=ch;if(Array.isArray(callbacks))for(const check of callbacks){const entry={check:this.wrapValidationException(check,thisObj),category:category};this.addEntry(type3,entry)}else if("function"==typeof callbacks){const entry={check:this.wrapValidationException(callbacks,thisObj),category:category};this.addEntry(type3,entry)}else assertUnreachable()}}wrapValidationException(check,thisObj){return async(node2,accept,cancelToken)=>{await this.handleException(()=>check.call(thisObj,node2,accept,cancelToken),"An error occurred during validation",accept,node2)}}async handleException(functionality,messageContext,accept,node2){try{await functionality()}catch(err){if(isOperationCancelled(err))throw err;console.error(`${messageContext}:`,err),err instanceof Error&&err.stack&&console.error(err.stack);accept("error",`${messageContext}: ${err instanceof Error?err.message:String(err)}`,{node:node2})}}addEntry(type3,entry){if("AstNode"!==type3)for(const subtype of this.reflection.getAllSubTypes(type3))this.entries.add(subtype,entry);else this.entries.add("AstNode",entry)}getChecks(type3,categories){let checks=stream(this.entries.get(type3)).concat(this.entries.get("AstNode"));return categories&&(checks=checks.filter(entry=>categories.includes(entry.category))),checks.map(entry=>entry.check)}registerBeforeDocument(checkBefore,thisObj=this){this.entriesBefore.push(this.wrapPreparationException(checkBefore,"An error occurred during set-up of the validation",thisObj))}registerAfterDocument(checkAfter,thisObj=this){this.entriesAfter.push(this.wrapPreparationException(checkAfter,"An error occurred during tear-down of the validation",thisObj))}wrapPreparationException(check,messageContext,thisObj){return async(rootNode,accept,categories,cancelToken)=>{await this.handleException(()=>check.call(thisObj,rootNode,accept,categories,cancelToken),messageContext,accept,rootNode)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}}});function getDiagnosticRange(info2){if(info2.range)return info2.range;let cstNode;return"string"==typeof info2.property?cstNode=findNodeForProperty(info2.node.$cstNode,info2.property,info2.index):"string"==typeof info2.keyword&&(cstNode=findNodeForKeyword(info2.node.$cstNode,info2.keyword,info2.index)),null!=cstNode||(cstNode=info2.node.$cstNode),cstNode?cstNode.range:{start:{line:0,character:0},end:{line:0,character:0}}}function toDiagnosticSeverity(severity){switch(severity){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+severity)}}function toDiagnosticData(severity){switch(severity){case"error":return diagnosticData(DocumentValidator.LexingError);case"warning":return diagnosticData(DocumentValidator.LexingWarning);case"info":return diagnosticData(DocumentValidator.LexingInfo);case"hint":return diagnosticData(DocumentValidator.LexingHint);default:throw new Error("Invalid diagnostic severity: "+severity)}}var DefaultAstNodeDescriptionProvider,DefaultReferenceDescriptionProvider,DefaultAstNodeLocator,DefaultConfigurationProvider,Disposable,DefaultDocumentBuilder,DefaultIndexManager,DefaultWorkspaceManager,DefaultLexerErrorMessageProvider,DEFAULT_TOKENIZE_OPTIONS,DefaultLexer,init_document_validator=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/validation/document-validator.js"(){var DocumentValidator2;init_cancellation(),init_grammar_utils(),init_ast_utils(),init_cst_utils(),init_promise_utils(),init_validation_registry(),DefaultDocumentValidator=class{static{__name(this,"DefaultDocumentValidator")}constructor(services){this.validationRegistry=services.validation.ValidationRegistry,this.metadata=services.LanguageMetaData}async validateDocument(document2,options2={},cancelToken=cancellation_exports.CancellationToken.None){const parseResult=document2.parseResult,diagnostics=[];if(await interruptAndCheck(cancelToken),!options2.categories||options2.categories.includes("built-in")){if(this.processLexingErrors(parseResult,diagnostics,options2),options2.stopAfterLexingErrors&&diagnostics.some(d3=>{var _a;return(null===(_a=d3.data)||void 0===_a?void 0:_a.code)===DocumentValidator.LexingError}))return diagnostics;if(this.processParsingErrors(parseResult,diagnostics,options2),options2.stopAfterParsingErrors&&diagnostics.some(d3=>{var _a;return(null===(_a=d3.data)||void 0===_a?void 0:_a.code)===DocumentValidator.ParsingError}))return diagnostics;if(this.processLinkingErrors(document2,diagnostics,options2),options2.stopAfterLinkingErrors&&diagnostics.some(d3=>{var _a;return(null===(_a=d3.data)||void 0===_a?void 0:_a.code)===DocumentValidator.LinkingError}))return diagnostics}try{diagnostics.push(...await this.validateAst(parseResult.value,options2,cancelToken))}catch(err){if(isOperationCancelled(err))throw err;console.error("An error occurred during validation:",err)}return await interruptAndCheck(cancelToken),diagnostics}processLexingErrors(parseResult,diagnostics,_options){var _a,_b,_c;const lexerDiagnostics=[...parseResult.lexerErrors,...null!==(_b=null===(_a=parseResult.lexerReport)||void 0===_a?void 0:_a.diagnostics)&&void 0!==_b?_b:[]];for(const lexerDiagnostic of lexerDiagnostics){const severity=null!==(_c=lexerDiagnostic.severity)&&void 0!==_c?_c:"error",diagnostic={severity:toDiagnosticSeverity(severity),range:{start:{line:lexerDiagnostic.line-1,character:lexerDiagnostic.column-1},end:{line:lexerDiagnostic.line-1,character:lexerDiagnostic.column+lexerDiagnostic.length-1}},message:lexerDiagnostic.message,data:toDiagnosticData(severity),source:this.getSource()};diagnostics.push(diagnostic)}}processParsingErrors(parseResult,diagnostics,_options){for(const parserError of parseResult.parserErrors){let range3;if(isNaN(parserError.token.startOffset)){if("previousToken"in parserError){const token2=parserError.previousToken;if(isNaN(token2.startOffset)){const position5={line:0,character:0};range3={start:position5,end:position5}}else{const position5={line:token2.endLine-1,character:token2.endColumn};range3={start:position5,end:position5}}}}else range3=tokenToRange(parserError.token);if(range3){const diagnostic={severity:toDiagnosticSeverity("error"),range:range3,message:parserError.message,data:diagnosticData(DocumentValidator.ParsingError),source:this.getSource()};diagnostics.push(diagnostic)}}}processLinkingErrors(document2,diagnostics,_options){for(const reference of document2.references){const linkingError=reference.error;if(linkingError){const info2={node:linkingError.container,property:linkingError.property,index:linkingError.index,data:{code:DocumentValidator.LinkingError,containerType:linkingError.container.$type,property:linkingError.property,refText:linkingError.reference.$refText}};diagnostics.push(this.toDiagnostic("error",linkingError.message,info2))}}}async validateAst(rootNode,options2,cancelToken=cancellation_exports.CancellationToken.None){const validationItems=[],acceptor=__name((severity,message,info2)=>{validationItems.push(this.toDiagnostic(severity,message,info2))},"acceptor");return await this.validateAstBefore(rootNode,options2,acceptor,cancelToken),await this.validateAstNodes(rootNode,options2,acceptor,cancelToken),await this.validateAstAfter(rootNode,options2,acceptor,cancelToken),validationItems}async validateAstBefore(rootNode,options2,acceptor,cancelToken=cancellation_exports.CancellationToken.None){var _a;const checksBefore=this.validationRegistry.checksBefore;for(const checkBefore of checksBefore)await interruptAndCheck(cancelToken),await checkBefore(rootNode,acceptor,null!==(_a=options2.categories)&&void 0!==_a?_a:[],cancelToken)}async validateAstNodes(rootNode,options2,acceptor,cancelToken=cancellation_exports.CancellationToken.None){await Promise.all(streamAst(rootNode).map(async node2=>{await interruptAndCheck(cancelToken);const checks=this.validationRegistry.getChecks(node2.$type,options2.categories);for(const check of checks)await check(node2,acceptor,cancelToken)}))}async validateAstAfter(rootNode,options2,acceptor,cancelToken=cancellation_exports.CancellationToken.None){var _a;const checksAfter=this.validationRegistry.checksAfter;for(const checkAfter of checksAfter)await interruptAndCheck(cancelToken),await checkAfter(rootNode,acceptor,null!==(_a=options2.categories)&&void 0!==_a?_a:[],cancelToken)}toDiagnostic(severity,message,info2){return{message:message,range:getDiagnosticRange(info2),severity:toDiagnosticSeverity(severity),code:info2.code,codeDescription:info2.codeDescription,tags:info2.tags,relatedInformation:info2.relatedInformation,data:info2.data,source:this.getSource()}}getSource(){return this.metadata.languageId}},__name(getDiagnosticRange,"getDiagnosticRange"),__name(toDiagnosticSeverity,"toDiagnosticSeverity"),__name(toDiagnosticData,"toDiagnosticData"),(DocumentValidator2=DocumentValidator||(DocumentValidator={})).LexingError="lexing-error",DocumentValidator2.LexingWarning="lexing-warning",DocumentValidator2.LexingInfo="lexing-info",DocumentValidator2.LexingHint="lexing-hint",DocumentValidator2.ParsingError="parsing-error",DocumentValidator2.LinkingError="linking-error"}}),init_ast_descriptions=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/ast-descriptions.js"(){init_cancellation(),init_syntax_tree(),init_ast_utils(),init_cst_utils(),init_promise_utils(),init_uri_utils(),DefaultAstNodeDescriptionProvider=class{static{__name(this,"DefaultAstNodeDescriptionProvider")}constructor(services){this.astNodeLocator=services.workspace.AstNodeLocator,this.nameProvider=services.references.NameProvider}createDescription(node2,name,document2){const doc=null!=document2?document2:getDocument(node2);null!=name||(name=this.nameProvider.getName(node2));const path4=this.astNodeLocator.getAstNodePath(node2);if(!name)throw new Error(`Node at path ${path4} has no name.`);let nameNodeSegment;const nameSegmentGetter=__name(()=>{var _a;return null!=nameNodeSegment?nameNodeSegment:nameNodeSegment=toDocumentSegment(null!==(_a=this.nameProvider.getNameNode(node2))&&void 0!==_a?_a:node2.$cstNode)},"nameSegmentGetter");return{node:node2,name:name,get nameSegment(){return nameSegmentGetter()},selectionSegment:toDocumentSegment(node2.$cstNode),type:node2.$type,documentUri:doc.uri,path:path4}}},DefaultReferenceDescriptionProvider=class{static{__name(this,"DefaultReferenceDescriptionProvider")}constructor(services){this.nodeLocator=services.workspace.AstNodeLocator}async createDescriptions(document2,cancelToken=cancellation_exports.CancellationToken.None){const descr=[],rootNode=document2.parseResult.value;for(const astNode of streamAst(rootNode))await interruptAndCheck(cancelToken),streamReferences(astNode).filter(refInfo=>!isLinkingError(refInfo)).forEach(refInfo=>{const description=this.createDescription(refInfo);description&&descr.push(description)});return descr}createDescription(refInfo){const targetNodeDescr=refInfo.reference.$nodeDescription,refCstNode=refInfo.reference.$refNode;if(!targetNodeDescr||!refCstNode)return;const docUri=getDocument(refInfo.container).uri;return{sourceUri:docUri,sourcePath:this.nodeLocator.getAstNodePath(refInfo.container),targetUri:targetNodeDescr.documentUri,targetPath:targetNodeDescr.path,segment:toDocumentSegment(refCstNode),local:UriUtils.equals(targetNodeDescr.documentUri,docUri)}}}}}),init_ast_node_locator=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/ast-node-locator.js"(){DefaultAstNodeLocator=class{static{__name(this,"DefaultAstNodeLocator")}constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(node2){if(node2.$container){const containerPath=this.getAstNodePath(node2.$container),newSegment=this.getPathSegment(node2);return containerPath+this.segmentSeparator+newSegment}return""}getPathSegment({$containerProperty:$containerProperty,$containerIndex:$containerIndex}){if(!$containerProperty)throw new Error("Missing '$containerProperty' in AST node.");return void 0!==$containerIndex?$containerProperty+this.indexSeparator+$containerIndex:$containerProperty}getAstNode(node2,path4){return path4.split(this.segmentSeparator).reduce((previousValue,currentValue)=>{if(!previousValue||0===currentValue.length)return previousValue;const propertyIndex=currentValue.indexOf(this.indexSeparator);if(propertyIndex>0){const property2=currentValue.substring(0,propertyIndex),arrayIndex=parseInt(currentValue.substring(propertyIndex+1)),array4=previousValue[property2];return null==array4?void 0:array4[arrayIndex]}return previousValue[currentValue]},node2)}}}}),event_exports={},init_event3=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/event.js"(){__reExport(event_exports,__toESM(require_events(),1))}}),init_configuration=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/configuration.js"(){init_event3(),init_promise_utils(),DefaultConfigurationProvider=class{static{__name(this,"DefaultConfigurationProvider")}constructor(services){this._ready=new Deferred,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new event_exports.Emitter,this.serviceRegistry=services.ServiceRegistry}get ready(){return this._ready.promise}initialize(params){var _a,_b;this.workspaceConfig=null!==(_b=null===(_a=params.capabilities.workspace)||void 0===_a?void 0:_a.configuration)&&void 0!==_b&&_b}async initialized(params){if(this.workspaceConfig){if(params.register){const languages=this.serviceRegistry.all;params.register({section:languages.map(lang=>this.toSectionName(lang.LanguageMetaData.languageId))})}if(params.fetchConfiguration){const configToUpdate=this.serviceRegistry.all.map(lang=>({section:this.toSectionName(lang.LanguageMetaData.languageId)})),configs=await params.fetchConfiguration(configToUpdate);configToUpdate.forEach((conf5,idx)=>{this.updateSectionConfiguration(conf5.section,configs[idx])})}}this._ready.resolve()}updateConfiguration(change2){change2.settings&&Object.keys(change2.settings).forEach(section=>{const configuration=change2.settings[section];this.updateSectionConfiguration(section,configuration),this.onConfigurationSectionUpdateEmitter.fire({section:section,configuration:configuration})})}updateSectionConfiguration(section,configuration){this.settings[section]=configuration}async getConfiguration(language,configuration){await this.ready;const sectionName=this.toSectionName(language);if(this.settings[sectionName])return this.settings[sectionName][configuration]}toSectionName(languageId){return`${languageId}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}}}),init_disposable=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/disposable.js"(){!function(Disposable2){function create4(callback){return{dispose:__name(async()=>await callback(),"dispose")}}__name(create4,"create"),Disposable2.create=create4}(Disposable||(Disposable={}))}}),init_document_builder=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/document-builder.js"(){init_cancellation(),init_disposable(),init_collections(),init_promise_utils(),init_stream(),init_validation_registry(),init_documents(),DefaultDocumentBuilder=class{static{__name(this,"DefaultDocumentBuilder")}constructor(services){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new MultiMap,this.documentPhaseListeners=new MultiMap,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=DocumentState.Changed,this.langiumDocuments=services.workspace.LangiumDocuments,this.langiumDocumentFactory=services.workspace.LangiumDocumentFactory,this.textDocuments=services.workspace.TextDocuments,this.indexManager=services.workspace.IndexManager,this.serviceRegistry=services.ServiceRegistry}async build(documents,options2={},cancelToken=cancellation_exports.CancellationToken.None){var _a,_b;for(const document2 of documents){const key=document2.uri.toString();if(document2.state===DocumentState.Validated){if("boolean"==typeof options2.validation&&options2.validation)document2.state=DocumentState.IndexedReferences,document2.diagnostics=void 0,this.buildState.delete(key);else if("object"==typeof options2.validation){const buildState2=this.buildState.get(key),previousCategories=null===(_a=null==buildState2?void 0:buildState2.result)||void 0===_a?void 0:_a.validationChecks;if(previousCategories){const categories=(null!==(_b=options2.validation.categories)&&void 0!==_b?_b:ValidationCategory.all).filter(c3=>!previousCategories.includes(c3));categories.length>0&&(this.buildState.set(key,{completed:!1,options:{validation:Object.assign(Object.assign({},options2.validation),{categories:categories})},result:buildState2.result}),document2.state=DocumentState.IndexedReferences)}}}else this.buildState.delete(key)}this.currentState=DocumentState.Changed,await this.emitUpdate(documents.map(e3=>e3.uri),[]),await this.buildDocuments(documents,options2,cancelToken)}async update(changed,deleted,cancelToken=cancellation_exports.CancellationToken.None){this.currentState=DocumentState.Changed;for(const deletedUri of deleted)this.langiumDocuments.deleteDocument(deletedUri),this.buildState.delete(deletedUri.toString()),this.indexManager.remove(deletedUri);for(const changedUri of changed){if(!this.langiumDocuments.invalidateDocument(changedUri)){const newDocument=this.langiumDocumentFactory.fromModel({$type:"INVALID"},changedUri);newDocument.state=DocumentState.Changed,this.langiumDocuments.addDocument(newDocument)}this.buildState.delete(changedUri.toString())}const allChangedUris=stream(changed).concat(deleted).map(uri=>uri.toString()).toSet();this.langiumDocuments.all.filter(doc=>!allChangedUris.has(doc.uri.toString())&&this.shouldRelink(doc,allChangedUris)).forEach(doc=>{this.serviceRegistry.getServices(doc.uri).references.Linker.unlink(doc),doc.state=Math.min(doc.state,DocumentState.ComputedScopes),doc.diagnostics=void 0}),await this.emitUpdate(changed,deleted),await interruptAndCheck(cancelToken);const rebuildDocuments=this.sortDocuments(this.langiumDocuments.all.filter(doc=>{var _a;return doc.state<DocumentState.Linked||!(null===(_a=this.buildState.get(doc.uri.toString()))||void 0===_a?void 0:_a.completed)}).toArray());await this.buildDocuments(rebuildDocuments,this.updateBuildOptions,cancelToken)}async emitUpdate(changed,deleted){await Promise.all(this.updateListeners.map(listener=>listener(changed,deleted)))}sortDocuments(documents){let left3=0,right3=documents.length-1;for(;left3<right3;){for(;left3<documents.length&&this.hasTextDocument(documents[left3]);)left3++;for(;right3>=0&&!this.hasTextDocument(documents[right3]);)right3--;left3<right3&&([documents[left3],documents[right3]]=[documents[right3],documents[left3]])}return documents}hasTextDocument(doc){var _a;return Boolean(null===(_a=this.textDocuments)||void 0===_a?void 0:_a.get(doc.uri))}shouldRelink(document2,changedUris){return!!document2.references.some(ref=>void 0!==ref.error)||this.indexManager.isAffected(document2,changedUris)}onUpdate(callback){return this.updateListeners.push(callback),Disposable.create(()=>{const index=this.updateListeners.indexOf(callback);index>=0&&this.updateListeners.splice(index,1)})}async buildDocuments(documents,options2,cancelToken){this.prepareBuild(documents,options2),await this.runCancelable(documents,DocumentState.Parsed,cancelToken,doc=>this.langiumDocumentFactory.update(doc,cancelToken)),await this.runCancelable(documents,DocumentState.IndexedContent,cancelToken,doc=>this.indexManager.updateContent(doc,cancelToken)),await this.runCancelable(documents,DocumentState.ComputedScopes,cancelToken,async doc=>{const scopeComputation=this.serviceRegistry.getServices(doc.uri).references.ScopeComputation;doc.precomputedScopes=await scopeComputation.computeLocalScopes(doc,cancelToken)}),await this.runCancelable(documents,DocumentState.Linked,cancelToken,doc=>this.serviceRegistry.getServices(doc.uri).references.Linker.link(doc,cancelToken)),await this.runCancelable(documents,DocumentState.IndexedReferences,cancelToken,doc=>this.indexManager.updateReferences(doc,cancelToken));const toBeValidated=documents.filter(doc=>this.shouldValidate(doc));await this.runCancelable(toBeValidated,DocumentState.Validated,cancelToken,doc=>this.validate(doc,cancelToken));for(const doc of documents){const state3=this.buildState.get(doc.uri.toString());state3&&(state3.completed=!0)}}prepareBuild(documents,options2){for(const doc of documents){const key=doc.uri.toString(),state3=this.buildState.get(key);state3&&!state3.completed||this.buildState.set(key,{completed:!1,options:options2,result:null==state3?void 0:state3.result})}}async runCancelable(documents,targetState,cancelToken,callback){const filtered=documents.filter(doc=>doc.state<targetState);for(const document2 of filtered)await interruptAndCheck(cancelToken),await callback(document2),document2.state=targetState,await this.notifyDocumentPhase(document2,targetState,cancelToken);const targetStateDocs=documents.filter(doc=>doc.state===targetState);await this.notifyBuildPhase(targetStateDocs,targetState,cancelToken),this.currentState=targetState}onBuildPhase(targetState,callback){return this.buildPhaseListeners.add(targetState,callback),Disposable.create(()=>{this.buildPhaseListeners.delete(targetState,callback)})}onDocumentPhase(targetState,callback){return this.documentPhaseListeners.add(targetState,callback),Disposable.create(()=>{this.documentPhaseListeners.delete(targetState,callback)})}waitUntil(state3,uriOrToken,cancelToken){let uri;if(uriOrToken&&"path"in uriOrToken?uri=uriOrToken:cancelToken=uriOrToken,null!=cancelToken||(cancelToken=cancellation_exports.CancellationToken.None),uri){const document2=this.langiumDocuments.getDocument(uri);if(document2&&document2.state>state3)return Promise.resolve(uri)}return this.currentState>=state3?Promise.resolve(void 0):cancelToken.isCancellationRequested?Promise.reject(OperationCancelled):new Promise((resolve2,reject3)=>{const buildDisposable=this.onBuildPhase(state3,()=>{if(buildDisposable.dispose(),cancelDisposable.dispose(),uri){const document2=this.langiumDocuments.getDocument(uri);resolve2(null==document2?void 0:document2.uri)}else resolve2(void 0)}),cancelDisposable=cancelToken.onCancellationRequested(()=>{buildDisposable.dispose(),cancelDisposable.dispose(),reject3(OperationCancelled)})})}async notifyDocumentPhase(document2,state3,cancelToken){const listenersCopy=this.documentPhaseListeners.get(state3).slice();for(const listener of listenersCopy)try{await listener(document2,cancelToken)}catch(err){if(!isOperationCancelled(err))throw err}}async notifyBuildPhase(documents,state3,cancelToken){if(0===documents.length)return;const listenersCopy=this.buildPhaseListeners.get(state3).slice();for(const listener of listenersCopy)await interruptAndCheck(cancelToken),await listener(documents,cancelToken)}shouldValidate(document2){return Boolean(this.getBuildOptions(document2).validation)}async validate(document2,cancelToken){var _a,_b;const validator=this.serviceRegistry.getServices(document2.uri).validation.DocumentValidator,validationSetting=this.getBuildOptions(document2).validation,options2="object"==typeof validationSetting?validationSetting:void 0,diagnostics=await validator.validateDocument(document2,options2,cancelToken);document2.diagnostics?document2.diagnostics.push(...diagnostics):document2.diagnostics=diagnostics;const state3=this.buildState.get(document2.uri.toString());if(state3){null!==(_a=state3.result)&&void 0!==_a||(state3.result={});const newCategories=null!==(_b=null==options2?void 0:options2.categories)&&void 0!==_b?_b:ValidationCategory.all;state3.result.validationChecks?state3.result.validationChecks.push(...newCategories):state3.result.validationChecks=[...newCategories]}}getBuildOptions(document2){var _a,_b;return null!==(_b=null===(_a=this.buildState.get(document2.uri.toString()))||void 0===_a?void 0:_a.options)&&void 0!==_b?_b:{}}}}}),init_index_manager=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/index-manager.js"(){init_ast_utils(),init_caching(),init_cancellation(),init_stream(),init_uri_utils(),DefaultIndexManager=class{static{__name(this,"DefaultIndexManager")}constructor(services){this.symbolIndex=new Map,this.symbolByTypeIndex=new ContextCache,this.referenceIndex=new Map,this.documents=services.workspace.LangiumDocuments,this.serviceRegistry=services.ServiceRegistry,this.astReflection=services.AstReflection}findAllReferences(targetNode,astNodePath){const targetDocUri=getDocument(targetNode).uri,result=[];return this.referenceIndex.forEach(docRefs=>{docRefs.forEach(refDescr=>{UriUtils.equals(refDescr.targetUri,targetDocUri)&&refDescr.targetPath===astNodePath&&result.push(refDescr)})}),stream(result)}allElements(nodeType3,uris){let documentUris=stream(this.symbolIndex.keys());return uris&&(documentUris=documentUris.filter(uri=>!uris||uris.has(uri))),documentUris.map(uri=>this.getFileDescriptions(uri,nodeType3)).flat()}getFileDescriptions(uri,nodeType3){var _a;if(!nodeType3)return null!==(_a=this.symbolIndex.get(uri))&&void 0!==_a?_a:[];return this.symbolByTypeIndex.get(uri,nodeType3,()=>{var _a2;return(null!==(_a2=this.symbolIndex.get(uri))&&void 0!==_a2?_a2:[]).filter(e3=>this.astReflection.isSubtype(e3.type,nodeType3))})}remove(uri){const uriString=uri.toString();this.symbolIndex.delete(uriString),this.symbolByTypeIndex.clear(uriString),this.referenceIndex.delete(uriString)}async updateContent(document2,cancelToken=cancellation_exports.CancellationToken.None){const services=this.serviceRegistry.getServices(document2.uri),exports2=await services.references.ScopeComputation.computeExports(document2,cancelToken),uri=document2.uri.toString();this.symbolIndex.set(uri,exports2),this.symbolByTypeIndex.clear(uri)}async updateReferences(document2,cancelToken=cancellation_exports.CancellationToken.None){const services=this.serviceRegistry.getServices(document2.uri),indexData=await services.workspace.ReferenceDescriptionProvider.createDescriptions(document2,cancelToken);this.referenceIndex.set(document2.uri.toString(),indexData)}isAffected(document2,changedUris){const references=this.referenceIndex.get(document2.uri.toString());return!!references&&references.some(ref=>!ref.local&&changedUris.has(ref.targetUri.toString()))}}}}),init_workspace_manager=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/workspace-manager.js"(){init_cancellation(),init_promise_utils(),init_uri_utils(),DefaultWorkspaceManager=class{static{__name(this,"DefaultWorkspaceManager")}constructor(services){this.initialBuildOptions={},this._ready=new Deferred,this.serviceRegistry=services.ServiceRegistry,this.langiumDocuments=services.workspace.LangiumDocuments,this.documentBuilder=services.workspace.DocumentBuilder,this.fileSystemProvider=services.workspace.FileSystemProvider,this.mutex=services.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(params){var _a;this.folders=null!==(_a=params.workspaceFolders)&&void 0!==_a?_a:void 0}initialized(_params){return this.mutex.write(token2=>{var _a;return this.initializeWorkspace(null!==(_a=this.folders)&&void 0!==_a?_a:[],token2)})}async initializeWorkspace(folders,cancelToken=cancellation_exports.CancellationToken.None){const documents=await this.performStartup(folders);await interruptAndCheck(cancelToken),await this.documentBuilder.build(documents,this.initialBuildOptions,cancelToken)}async performStartup(folders){const fileExtensions=this.serviceRegistry.all.flatMap(e3=>e3.LanguageMetaData.fileExtensions),documents=[],collector=__name(document2=>{documents.push(document2),this.langiumDocuments.hasDocument(document2.uri)||this.langiumDocuments.addDocument(document2)},"collector");return await this.loadAdditionalDocuments(folders,collector),await Promise.all(folders.map(wf=>[wf,this.getRootFolder(wf)]).map(async entry=>this.traverseFolder(...entry,fileExtensions,collector))),this._ready.resolve(),documents}loadAdditionalDocuments(_folders,_collector){return Promise.resolve()}getRootFolder(workspaceFolder){return URI2.parse(workspaceFolder.uri)}async traverseFolder(workspaceFolder,folderPath,fileExtensions,collector){const content=await this.fileSystemProvider.readDirectory(folderPath);await Promise.all(content.map(async entry=>{if(this.includeEntry(workspaceFolder,entry,fileExtensions))if(entry.isDirectory)await this.traverseFolder(workspaceFolder,entry.uri,fileExtensions,collector);else if(entry.isFile){const document2=await this.langiumDocuments.getOrCreateDocument(entry.uri);collector(document2)}}))}includeEntry(_workspaceFolder,entry,fileExtensions){const name=UriUtils.basename(entry.uri);if(name.startsWith("."))return!1;if(entry.isDirectory)return"node_modules"!==name&&"out"!==name;if(entry.isFile){const extname=UriUtils.extname(entry.uri);return fileExtensions.includes(extname)}return!1}}}});function isTokenTypeArray(tokenVocabulary){return Array.isArray(tokenVocabulary)&&(0===tokenVocabulary.length||"name"in tokenVocabulary[0])}function isIMultiModeLexerDefinition(tokenVocabulary){return tokenVocabulary&&"modes"in tokenVocabulary&&"defaultMode"in tokenVocabulary}function isTokenTypeDictionary(tokenVocabulary){return!isTokenTypeArray(tokenVocabulary)&&!isIMultiModeLexerDefinition(tokenVocabulary)}var tagRegex,inlineTagRegex,nonWhitespaceRegex,whitespaceEndRegex,JSDocCommentImpl,JSDocTagImpl,JSDocTextImpl,JSDocLineImpl,init_lexer2=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/lexer.js"(){init_api5(),DefaultLexerErrorMessageProvider=class{static{__name(this,"DefaultLexerErrorMessageProvider")}buildUnexpectedCharactersMessage(fullText,startOffset,length2,line2,column2){return defaultLexerErrorProvider.buildUnexpectedCharactersMessage(fullText,startOffset,length2,line2,column2)}buildUnableToPopLexerModeMessage(token2){return defaultLexerErrorProvider.buildUnableToPopLexerModeMessage(token2)}},DEFAULT_TOKENIZE_OPTIONS={mode:"full"},DefaultLexer=class{static{__name(this,"DefaultLexer")}constructor(services){this.errorMessageProvider=services.parser.LexerErrorMessageProvider,this.tokenBuilder=services.parser.TokenBuilder;const tokens2=this.tokenBuilder.buildTokens(services.Grammar,{caseInsensitive:services.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(tokens2);const lexerTokens=isTokenTypeDictionary(tokens2)?Object.values(tokens2):tokens2,production="production"===services.LanguageMetaData.mode;this.chevrotainLexer=new Lexer2(lexerTokens,{positionTracking:"full",skipValidations:production,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(text4,_options=DEFAULT_TOKENIZE_OPTIONS){var _a,_b,_c;const chevrotainResult=this.chevrotainLexer.tokenize(text4);return{tokens:chevrotainResult.tokens,errors:chevrotainResult.errors,hidden:null!==(_a=chevrotainResult.groups.hidden)&&void 0!==_a?_a:[],report:null===(_c=(_b=this.tokenBuilder).flushLexingReport)||void 0===_c?void 0:_c.call(_b,text4)}}toTokenTypeDictionary(buildTokens){if(isTokenTypeDictionary(buildTokens))return buildTokens;const tokens2=isIMultiModeLexerDefinition(buildTokens)?Object.values(buildTokens.modes).flat():buildTokens,res={};return tokens2.forEach(token2=>res[token2.name]=token2),res}},__name(isTokenTypeArray,"isTokenTypeArray"),__name(isIMultiModeLexerDefinition,"isIMultiModeLexerDefinition"),__name(isTokenTypeDictionary,"isTokenTypeDictionary")}});function parseJSDoc(node2,start3,options2){let opts,position5;"string"==typeof node2?(position5=start3,opts=options2):(position5=node2.range.start,opts=start3),position5||(position5=Position.create(0,0));return parseJSDocComment({index:0,tokens:tokenize({lines:getLines(node2),position:position5,options:normalizeOptions(opts)}),position:position5})}function isJSDoc(node2,options2){const normalizedOptions=normalizeOptions(options2),lines=getLines(node2);if(0===lines.length)return!1;const first3=lines[0],last3=lines[lines.length-1],firstRegex=normalizedOptions.start,lastRegex=normalizedOptions.end;return Boolean(null==firstRegex?void 0:firstRegex.exec(first3))&&Boolean(null==lastRegex?void 0:lastRegex.exec(last3))}function getLines(node2){let content="";content="string"==typeof node2?node2:node2.text;return content.split(NEWLINE_REGEXP)}function tokenize(context){var _a,_b,_c;const tokens2=[];let currentLine=context.position.line,currentCharacter=context.position.character;for(let i2=0;i2<context.lines.length;i2++){const first3=0===i2,last3=i2===context.lines.length-1;let line2=context.lines[i2],index=0;if(first3&&context.options.start){const match2=null===(_a=context.options.start)||void 0===_a?void 0:_a.exec(line2);match2&&(index=match2.index+match2[0].length)}else{const match2=null===(_b=context.options.line)||void 0===_b?void 0:_b.exec(line2);match2&&(index=match2.index+match2[0].length)}if(last3){const match2=null===(_c=context.options.end)||void 0===_c?void 0:_c.exec(line2);match2&&(line2=line2.substring(0,match2.index))}line2=line2.substring(0,lastCharacter(line2));if(skipWhitespace(line2,index)>=line2.length){if(tokens2.length>0){const position5=Position.create(currentLine,currentCharacter);tokens2.push({type:"break",content:"",range:Range.create(position5,position5)})}}else{tagRegex.lastIndex=index;const tagMatch=tagRegex.exec(line2);if(tagMatch){const fullMatch=tagMatch[0],value2=tagMatch[1],start3=Position.create(currentLine,currentCharacter+index),end2=Position.create(currentLine,currentCharacter+index+fullMatch.length);tokens2.push({type:"tag",content:value2,range:Range.create(start3,end2)}),index+=fullMatch.length,index=skipWhitespace(line2,index)}if(index<line2.length){const rest=line2.substring(index),inlineTagMatches=Array.from(rest.matchAll(inlineTagRegex));tokens2.push(...buildInlineTokens(inlineTagMatches,rest,currentLine,currentCharacter+index))}}currentLine++,currentCharacter=0}return tokens2.length>0&&"break"===tokens2[tokens2.length-1].type?tokens2.slice(0,-1):tokens2}function buildInlineTokens(tags2,line2,lineIndex,characterIndex){const tokens2=[];if(0===tags2.length){const start3=Position.create(lineIndex,characterIndex),end2=Position.create(lineIndex,characterIndex+line2.length);tokens2.push({type:"text",content:line2,range:Range.create(start3,end2)})}else{let lastIndex=0;for(const match2 of tags2){const matchIndex=match2.index,startContent=line2.substring(lastIndex,matchIndex);startContent.length>0&&tokens2.push({type:"text",content:line2.substring(lastIndex,matchIndex),range:Range.create(Position.create(lineIndex,lastIndex+characterIndex),Position.create(lineIndex,matchIndex+characterIndex))});let offset=startContent.length+1;const tagName=match2[1];if(tokens2.push({type:"inline-tag",content:tagName,range:Range.create(Position.create(lineIndex,lastIndex+offset+characterIndex),Position.create(lineIndex,lastIndex+offset+tagName.length+characterIndex))}),offset+=tagName.length,4===match2.length){offset+=match2[2].length;const value2=match2[3];tokens2.push({type:"text",content:value2,range:Range.create(Position.create(lineIndex,lastIndex+offset+characterIndex),Position.create(lineIndex,lastIndex+offset+value2.length+characterIndex))})}else tokens2.push({type:"text",content:"",range:Range.create(Position.create(lineIndex,lastIndex+offset+characterIndex),Position.create(lineIndex,lastIndex+offset+characterIndex))});lastIndex=matchIndex+match2[0].length}const endContent=line2.substring(lastIndex);endContent.length>0&&tokens2.push({type:"text",content:endContent,range:Range.create(Position.create(lineIndex,lastIndex+characterIndex),Position.create(lineIndex,lastIndex+characterIndex+endContent.length))})}return tokens2}function skipWhitespace(line2,index){const match2=line2.substring(index).match(nonWhitespaceRegex);return match2?index+match2.index:line2.length}function lastCharacter(line2){const match2=line2.match(whitespaceEndRegex);if(match2&&"number"==typeof match2.index)return match2.index}function parseJSDocComment(context){var _a,_b,_c,_d;const startPosition=Position.create(context.position.line,context.position.character);if(0===context.tokens.length)return new JSDocCommentImpl([],Range.create(startPosition,startPosition));const elements2=[];for(;context.index<context.tokens.length;){const element3=parseJSDocElement(context,elements2[elements2.length-1]);element3&&elements2.push(element3)}const start3=null!==(_b=null===(_a=elements2[0])||void 0===_a?void 0:_a.range.start)&&void 0!==_b?_b:startPosition,end2=null!==(_d=null===(_c=elements2[elements2.length-1])||void 0===_c?void 0:_c.range.end)&&void 0!==_d?_d:startPosition;return new JSDocCommentImpl(elements2,Range.create(start3,end2))}function parseJSDocElement(context,last3){const next3=context.tokens[context.index];return"tag"===next3.type?parseJSDocTag(context,!1):"text"===next3.type||"inline-tag"===next3.type?parseJSDocText(context):(appendEmptyLine(next3,last3),void context.index++)}function appendEmptyLine(token2,element3){if(element3){const line2=new JSDocLineImpl("",token2.range);"inlines"in element3?element3.inlines.push(line2):element3.content.inlines.push(line2)}}function parseJSDocText(context){let token2=context.tokens[context.index];const firstToken=token2;let lastToken=token2;const lines=[];for(;token2&&"break"!==token2.type&&"tag"!==token2.type;)lines.push(parseJSDocInline(context)),lastToken=token2,token2=context.tokens[context.index];return new JSDocTextImpl(lines,Range.create(firstToken.range.start,lastToken.range.end))}function parseJSDocInline(context){return"inline-tag"===context.tokens[context.index].type?parseJSDocTag(context,!0):parseJSDocLine(context)}function parseJSDocTag(context,inline){const tagToken=context.tokens[context.index++],name=tagToken.content.substring(1),nextToken=context.tokens[context.index];if("text"===(null==nextToken?void 0:nextToken.type)){if(inline){const docLine=parseJSDocLine(context);return new JSDocTagImpl(name,new JSDocTextImpl([docLine],docLine.range),inline,Range.create(tagToken.range.start,docLine.range.end))}{const textDoc=parseJSDocText(context);return new JSDocTagImpl(name,textDoc,inline,Range.create(tagToken.range.start,textDoc.range.end))}}{const range3=tagToken.range;return new JSDocTagImpl(name,new JSDocTextImpl([],range3),inline,range3)}}function parseJSDocLine(context){const token2=context.tokens[context.index++];return new JSDocLineImpl(token2.content,token2.range)}function normalizeOptions(options2){if(!options2)return normalizeOptions({start:"/**",end:"*/",line:"*"});const{start:start3,end:end2,line:line2}=options2;return{start:normalizeOption(start3,!0),end:normalizeOption(end2,!1),line:normalizeOption(line2,!0)}}function normalizeOption(option2,start3){if("string"==typeof option2||"object"==typeof option2){const escaped="string"==typeof option2?escapeRegExp(option2):option2.source;return start3?new RegExp(`^\\s*${escaped}`):new RegExp(`\\s*${escaped}\\s*$`)}return option2}function renderInlineTag(tag,content,options2){var _a,_b;if("linkplain"===tag||"linkcode"===tag||"link"===tag){const index=content.indexOf(" ");let display=content;if(index>0){const displayStart=skipWhitespace(content,index);display=content.substring(displayStart),content=content.substring(0,index)}("linkcode"===tag||"link"===tag&&"code"===options2.link)&&(display=`\`${display}\``);return null!==(_b=null===(_a=options2.renderLink)||void 0===_a?void 0:_a.call(options2,content,display))&&void 0!==_b?_b:renderLinkDefault(content,display)}}function renderLinkDefault(content,display){try{return URI2.parse(content,!0),`[${display}](${content})`}catch(_a){return content}}function fillNewlines(text4){return text4.endsWith("\n")?"\n":"\n\n"}var JSDocDocumentationProvider,DefaultCommentProvider,DefaultAsyncParser,AbstractThreadedAsyncParser,ParserWorker,DefaultWorkspaceLock,DefaultHydrator,init_jsdoc=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/documentation/jsdoc.js"(){init_main(),init_regexp_utils(),init_uri_utils(),__name(parseJSDoc,"parseJSDoc"),__name(isJSDoc,"isJSDoc"),__name(getLines,"getLines"),tagRegex=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,inlineTagRegex=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu,__name(tokenize,"tokenize"),__name(buildInlineTokens,"buildInlineTokens"),nonWhitespaceRegex=/\S/,whitespaceEndRegex=/\s*$/,__name(skipWhitespace,"skipWhitespace"),__name(lastCharacter,"lastCharacter"),__name(parseJSDocComment,"parseJSDocComment"),__name(parseJSDocElement,"parseJSDocElement"),__name(appendEmptyLine,"appendEmptyLine"),__name(parseJSDocText,"parseJSDocText"),__name(parseJSDocInline,"parseJSDocInline"),__name(parseJSDocTag,"parseJSDocTag"),__name(parseJSDocLine,"parseJSDocLine"),__name(normalizeOptions,"normalizeOptions"),__name(normalizeOption,"normalizeOption"),JSDocCommentImpl=class{static{__name(this,"JSDocCommentImpl")}constructor(elements2,range3){this.elements=elements2,this.range=range3}getTag(name){return this.getAllTags().find(e3=>e3.name===name)}getTags(name){return this.getAllTags().filter(e3=>e3.name===name)}getAllTags(){return this.elements.filter(e3=>"name"in e3)}toString(){let value2="";for(const element3 of this.elements)if(0===value2.length)value2=element3.toString();else{const text4=element3.toString();value2+=fillNewlines(value2)+text4}return value2.trim()}toMarkdown(options2){let value2="";for(const element3 of this.elements)if(0===value2.length)value2=element3.toMarkdown(options2);else{const text4=element3.toMarkdown(options2);value2+=fillNewlines(value2)+text4}return value2.trim()}},JSDocTagImpl=class{static{__name(this,"JSDocTagImpl")}constructor(name,content,inline,range3){this.name=name,this.content=content,this.inline=inline,this.range=range3}toString(){let text4=`@${this.name}`;const content=this.content.toString();return 1===this.content.inlines.length?text4=`${text4} ${content}`:this.content.inlines.length>1&&(text4=`${text4}\n${content}`),this.inline?`{${text4}}`:text4}toMarkdown(options2){var _a,_b;return null!==(_b=null===(_a=null==options2?void 0:options2.renderTag)||void 0===_a?void 0:_a.call(options2,this))&&void 0!==_b?_b:this.toMarkdownDefault(options2)}toMarkdownDefault(options2){const content=this.content.toMarkdown(options2);if(this.inline){const rendered=renderInlineTag(this.name,content,null!=options2?options2:{});if("string"==typeof rendered)return rendered}let marker="";"italic"===(null==options2?void 0:options2.tag)||void 0===(null==options2?void 0:options2.tag)?marker="*":"bold"===(null==options2?void 0:options2.tag)?marker="**":"bold-italic"===(null==options2?void 0:options2.tag)&&(marker="***");let text4=`${marker}@${this.name}${marker}`;return 1===this.content.inlines.length?text4=`${text4} — ${content}`:this.content.inlines.length>1&&(text4=`${text4}\n${content}`),this.inline?`{${text4}}`:text4}},__name(renderInlineTag,"renderInlineTag"),__name(renderLinkDefault,"renderLinkDefault"),JSDocTextImpl=class{static{__name(this,"JSDocTextImpl")}constructor(lines,range3){this.inlines=lines,this.range=range3}toString(){let text4="";for(let i2=0;i2<this.inlines.length;i2++){const inline=this.inlines[i2],next3=this.inlines[i2+1];text4+=inline.toString(),next3&&next3.range.start.line>inline.range.start.line&&(text4+="\n")}return text4}toMarkdown(options2){let text4="";for(let i2=0;i2<this.inlines.length;i2++){const inline=this.inlines[i2],next3=this.inlines[i2+1];text4+=inline.toMarkdown(options2),next3&&next3.range.start.line>inline.range.start.line&&(text4+="\n")}return text4}},JSDocLineImpl=class{static{__name(this,"JSDocLineImpl")}constructor(text4,range3){this.text=text4,this.range=range3}toString(){return this.text}toMarkdown(){return this.text}},__name(fillNewlines,"fillNewlines")}}),init_documentation_provider=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/documentation/documentation-provider.js"(){init_ast_utils(),init_jsdoc(),JSDocDocumentationProvider=class{static{__name(this,"JSDocDocumentationProvider")}constructor(services){this.indexManager=services.shared.workspace.IndexManager,this.commentProvider=services.documentation.CommentProvider}getDocumentation(node2){const comment2=this.commentProvider.getComment(node2);if(comment2&&isJSDoc(comment2)){return parseJSDoc(comment2).toMarkdown({renderLink:__name((link2,display)=>this.documentationLinkRenderer(node2,link2,display),"renderLink"),renderTag:__name(tag=>this.documentationTagRenderer(node2,tag),"renderTag")})}}documentationLinkRenderer(node2,name,display){var _a;const description=null!==(_a=this.findNameInPrecomputedScopes(node2,name))&&void 0!==_a?_a:this.findNameInGlobalScope(node2,name);if(description&&description.nameSegment){const line2=description.nameSegment.range.start.line+1,character2=description.nameSegment.range.start.character+1;return`[${display}](${description.documentUri.with({fragment:`L${line2},${character2}`}).toString()})`}}documentationTagRenderer(_node,_tag){}findNameInPrecomputedScopes(node2,name){const precomputed=getDocument(node2).precomputedScopes;if(!precomputed)return;let currentNode=node2;do{const description=precomputed.get(currentNode).find(e3=>e3.name===name);if(description)return description;currentNode=currentNode.$container}while(currentNode)}findNameInGlobalScope(node2,name){return this.indexManager.allElements().find(e3=>e3.name===name)}}}}),init_comment_provider=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/documentation/comment-provider.js"(){init_json_serializer(),init_cst_utils(),DefaultCommentProvider=class{static{__name(this,"DefaultCommentProvider")}constructor(services){this.grammarConfig=()=>services.parser.GrammarConfig}getComment(node2){var _a;return isAstNodeWithComment(node2)?node2.$comment:null===(_a=findCommentNode(node2.$cstNode,this.grammarConfig().multilineCommentRules))||void 0===_a?void 0:_a.text}}}}),init_async_parser=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/async-parser.js"(){init_promise_utils(),init_event3(),DefaultAsyncParser=class{static{__name(this,"DefaultAsyncParser")}constructor(services){this.syncParser=services.parser.LangiumParser}parse(text4,_cancelToken){return Promise.resolve(this.syncParser.parse(text4))}},AbstractThreadedAsyncParser=class{static{__name(this,"AbstractThreadedAsyncParser")}constructor(services){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=services.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){const worker=this.createWorker();worker.onReady(()=>{if(this.queue.length>0){const deferred=this.queue.shift();deferred&&(worker.lock(),deferred.resolve(worker))}}),this.workerPool.push(worker)}}async parse(text4,cancelToken){const worker=await this.acquireParserWorker(cancelToken),deferred=new Deferred;let timeout2;const cancellation=cancelToken.onCancellationRequested(()=>{timeout2=setTimeout(()=>{this.terminateWorker(worker)},this.terminationDelay)});return worker.parse(text4).then(result=>{const hydrated=this.hydrator.hydrate(result);deferred.resolve(hydrated)}).catch(err=>{deferred.reject(err)}).finally(()=>{cancellation.dispose(),clearTimeout(timeout2)}),deferred.promise}terminateWorker(worker){worker.terminate();const index=this.workerPool.indexOf(worker);index>=0&&this.workerPool.splice(index,1)}async acquireParserWorker(cancelToken){this.initializeWorkers();for(const worker of this.workerPool)if(worker.ready)return worker.lock(),worker;const deferred=new Deferred;return cancelToken.onCancellationRequested(()=>{const index=this.queue.indexOf(deferred);index>=0&&this.queue.splice(index,1),deferred.reject(OperationCancelled)}),this.queue.push(deferred),deferred.promise}},ParserWorker=class{static{__name(this,"ParserWorker")}get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(sendMessage,onMessage,onError,terminate){this.onReadyEmitter=new event_exports.Emitter,this.deferred=new Deferred,this._ready=!0,this._parsing=!1,this.sendMessage=sendMessage,this._terminate=terminate,onMessage(result=>{const parseResult=result;this.deferred.resolve(parseResult),this.unlock()}),onError(error3=>{this.deferred.reject(error3),this.unlock()})}terminate(){this.deferred.reject(OperationCancelled),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(text4){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new Deferred,this.sendMessage(text4),this.deferred.promise}}}}),init_workspace_lock=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/workspace-lock.js"(){init_cancellation(),init_promise_utils(),DefaultWorkspaceLock=class{static{__name(this,"DefaultWorkspaceLock")}constructor(){this.previousTokenSource=new cancellation_exports.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(action){this.cancelWrite();const tokenSource=startCancelableOperation();return this.previousTokenSource=tokenSource,this.enqueue(this.writeQueue,action,tokenSource.token)}read(action){return this.enqueue(this.readQueue,action)}enqueue(queue,action,cancellationToken=cancellation_exports.CancellationToken.None){const deferred=new Deferred,entry={action:action,deferred:deferred,cancellationToken:cancellationToken};return queue.push(entry),this.performNextOperation(),deferred.promise}async performNextOperation(){if(!this.done)return;const entries2=[];if(this.writeQueue.length>0)entries2.push(this.writeQueue.shift());else{if(!(this.readQueue.length>0))return;entries2.push(...this.readQueue.splice(0,this.readQueue.length))}this.done=!1,await Promise.all(entries2.map(async({action:action,deferred:deferred,cancellationToken:cancellationToken})=>{try{const result=await Promise.resolve().then(()=>action(cancellationToken));deferred.resolve(result)}catch(err){isOperationCancelled(err)?deferred.resolve(void 0):deferred.reject(err)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}}}),init_hydrator=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/serializer/hydrator.js"(){init_cst_node_builder(),init_ast(),init_syntax_tree(),init_ast_utils(),init_collections(),init_cst_utils(),DefaultHydrator=class{static{__name(this,"DefaultHydrator")}constructor(services){this.grammarElementIdMap=new BiMap,this.tokenTypeIdMap=new BiMap,this.grammar=services.Grammar,this.lexer=services.parser.Lexer,this.linker=services.references.Linker}dehydrate(result){return{lexerErrors:result.lexerErrors,lexerReport:result.lexerReport?this.dehydrateLexerReport(result.lexerReport):void 0,parserErrors:result.parserErrors.map(e3=>Object.assign(Object.assign({},e3),{message:e3.message})),value:this.dehydrateAstNode(result.value,this.createDehyrationContext(result.value))}}dehydrateLexerReport(lexerReport){return lexerReport}createDehyrationContext(node2){const astNodes=new Map,cstNodes=new Map;for(const astNode of streamAst(node2))astNodes.set(astNode,{});if(node2.$cstNode)for(const cstNode of streamCst(node2.$cstNode))cstNodes.set(cstNode,{});return{astNodes:astNodes,cstNodes:cstNodes}}dehydrateAstNode(node2,context){const obj=context.astNodes.get(node2);obj.$type=node2.$type,obj.$containerIndex=node2.$containerIndex,obj.$containerProperty=node2.$containerProperty,void 0!==node2.$cstNode&&(obj.$cstNode=this.dehydrateCstNode(node2.$cstNode,context));for(const[name,value2]of Object.entries(node2))if(!name.startsWith("$"))if(Array.isArray(value2)){const arr=[];obj[name]=arr;for(const item of value2)isAstNode(item)?arr.push(this.dehydrateAstNode(item,context)):isReference(item)?arr.push(this.dehydrateReference(item,context)):arr.push(item)}else isAstNode(value2)?obj[name]=this.dehydrateAstNode(value2,context):isReference(value2)?obj[name]=this.dehydrateReference(value2,context):void 0!==value2&&(obj[name]=value2);return obj}dehydrateReference(reference,context){const obj={};return obj.$refText=reference.$refText,reference.$refNode&&(obj.$refNode=context.cstNodes.get(reference.$refNode)),obj}dehydrateCstNode(node2,context){const cstNode=context.cstNodes.get(node2);return isRootCstNode(node2)?cstNode.fullText=node2.fullText:cstNode.grammarSource=this.getGrammarElementId(node2.grammarSource),cstNode.hidden=node2.hidden,cstNode.astNode=context.astNodes.get(node2.astNode),isCompositeCstNode(node2)?cstNode.content=node2.content.map(child=>this.dehydrateCstNode(child,context)):isLeafCstNode(node2)&&(cstNode.tokenType=node2.tokenType.name,cstNode.offset=node2.offset,cstNode.length=node2.length,cstNode.startLine=node2.range.start.line,cstNode.startColumn=node2.range.start.character,cstNode.endLine=node2.range.end.line,cstNode.endColumn=node2.range.end.character),cstNode}hydrate(result){const node2=result.value,context=this.createHydrationContext(node2);return"$cstNode"in node2&&this.hydrateCstNode(node2.$cstNode,context),{lexerErrors:result.lexerErrors,lexerReport:result.lexerReport,parserErrors:result.parserErrors,value:this.hydrateAstNode(node2,context)}}createHydrationContext(node2){const astNodes=new Map,cstNodes=new Map;for(const astNode of streamAst(node2))astNodes.set(astNode,{});let root3;if(node2.$cstNode)for(const cstNode of streamCst(node2.$cstNode)){let cst;"fullText"in cstNode?(cst=new RootCstNodeImpl(cstNode.fullText),root3=cst):"content"in cstNode?cst=new CompositeCstNodeImpl:"tokenType"in cstNode&&(cst=this.hydrateCstLeafNode(cstNode)),cst&&(cstNodes.set(cstNode,cst),cst.root=root3)}return{astNodes:astNodes,cstNodes:cstNodes}}hydrateAstNode(node2,context){const astNode=context.astNodes.get(node2);astNode.$type=node2.$type,astNode.$containerIndex=node2.$containerIndex,astNode.$containerProperty=node2.$containerProperty,node2.$cstNode&&(astNode.$cstNode=context.cstNodes.get(node2.$cstNode));for(const[name,value2]of Object.entries(node2))if(!name.startsWith("$"))if(Array.isArray(value2)){const arr=[];astNode[name]=arr;for(const item of value2)isAstNode(item)?arr.push(this.setParent(this.hydrateAstNode(item,context),astNode)):isReference(item)?arr.push(this.hydrateReference(item,astNode,name,context)):arr.push(item)}else isAstNode(value2)?astNode[name]=this.setParent(this.hydrateAstNode(value2,context),astNode):isReference(value2)?astNode[name]=this.hydrateReference(value2,astNode,name,context):void 0!==value2&&(astNode[name]=value2);return astNode}setParent(node2,parent4){return node2.$container=parent4,node2}hydrateReference(reference,node2,name,context){return this.linker.buildReference(node2,name,context.cstNodes.get(reference.$refNode),reference.$refText)}hydrateCstNode(cstNode,context,num=0){const cstNodeObj=context.cstNodes.get(cstNode);if("number"==typeof cstNode.grammarSource&&(cstNodeObj.grammarSource=this.getGrammarElement(cstNode.grammarSource)),cstNodeObj.astNode=context.astNodes.get(cstNode.astNode),isCompositeCstNode(cstNodeObj))for(const child of cstNode.content){const hydrated=this.hydrateCstNode(child,context,num++);cstNodeObj.content.push(hydrated)}return cstNodeObj}hydrateCstLeafNode(cstNode){const tokenType=this.getTokenType(cstNode.tokenType),offset=cstNode.offset,length2=cstNode.length,startLine=cstNode.startLine,startColumn=cstNode.startColumn,endLine=cstNode.endLine,endColumn=cstNode.endColumn,hidden=cstNode.hidden;return new LeafCstNodeImpl(offset,length2,{start:{line:startLine,character:startColumn},end:{line:endLine,character:endColumn}},tokenType,hidden)}getTokenType(name){return this.lexer.definition[name]}getGrammarElementId(node2){if(node2)return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(node2)}getGrammarElement(id30){0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap();return this.grammarElementIdMap.getKey(id30)}createGrammarElementIdMap(){let id30=0;for(const element3 of streamAst(this.grammar))isAbstractElement(element3)&&this.grammarElementIdMap.set(element3,id30++)}}}});function createDefaultCoreModule(context){return{documentation:{CommentProvider:__name(services=>new DefaultCommentProvider(services),"CommentProvider"),DocumentationProvider:__name(services=>new JSDocDocumentationProvider(services),"DocumentationProvider")},parser:{AsyncParser:__name(services=>new DefaultAsyncParser(services),"AsyncParser"),GrammarConfig:__name(services=>createGrammarConfig(services),"GrammarConfig"),LangiumParser:__name(services=>createLangiumParser(services),"LangiumParser"),CompletionParser:__name(services=>createCompletionParser(services),"CompletionParser"),ValueConverter:__name(()=>new DefaultValueConverter,"ValueConverter"),TokenBuilder:__name(()=>new DefaultTokenBuilder,"TokenBuilder"),Lexer:__name(services=>new DefaultLexer(services),"Lexer"),ParserErrorMessageProvider:__name(()=>new LangiumParserErrorMessageProvider,"ParserErrorMessageProvider"),LexerErrorMessageProvider:__name(()=>new DefaultLexerErrorMessageProvider,"LexerErrorMessageProvider")},workspace:{AstNodeLocator:__name(()=>new DefaultAstNodeLocator,"AstNodeLocator"),AstNodeDescriptionProvider:__name(services=>new DefaultAstNodeDescriptionProvider(services),"AstNodeDescriptionProvider"),ReferenceDescriptionProvider:__name(services=>new DefaultReferenceDescriptionProvider(services),"ReferenceDescriptionProvider")},references:{Linker:__name(services=>new DefaultLinker(services),"Linker"),NameProvider:__name(()=>new DefaultNameProvider,"NameProvider"),ScopeProvider:__name(services=>new DefaultScopeProvider(services),"ScopeProvider"),ScopeComputation:__name(services=>new DefaultScopeComputation(services),"ScopeComputation"),References:__name(services=>new DefaultReferences(services),"References")},serializer:{Hydrator:__name(services=>new DefaultHydrator(services),"Hydrator"),JsonSerializer:__name(services=>new DefaultJsonSerializer(services),"JsonSerializer")},validation:{DocumentValidator:__name(services=>new DefaultDocumentValidator(services),"DocumentValidator"),ValidationRegistry:__name(services=>new ValidationRegistry(services),"ValidationRegistry")},shared:__name(()=>context.shared,"shared")}}function createDefaultSharedCoreModule(context){return{ServiceRegistry:__name(services=>new DefaultServiceRegistry(services),"ServiceRegistry"),workspace:{LangiumDocuments:__name(services=>new DefaultLangiumDocuments(services),"LangiumDocuments"),LangiumDocumentFactory:__name(services=>new DefaultLangiumDocumentFactory(services),"LangiumDocumentFactory"),DocumentBuilder:__name(services=>new DefaultDocumentBuilder(services),"DocumentBuilder"),IndexManager:__name(services=>new DefaultIndexManager(services),"IndexManager"),WorkspaceManager:__name(services=>new DefaultWorkspaceManager(services),"WorkspaceManager"),FileSystemProvider:__name(services=>context.fileSystemProvider(services),"FileSystemProvider"),WorkspaceLock:__name(()=>new DefaultWorkspaceLock,"WorkspaceLock"),ConfigurationProvider:__name(services=>new DefaultConfigurationProvider(services),"ConfigurationProvider")}}}var Module,isProxy,__requested__,init_default_module=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/default-module.js"(){init_grammar_config(),init_completion_parser_builder(),init_langium_parser_builder(),init_token_builder(),init_value_converter(),init_linker(),init_name_provider(),init_references(),init_scope_computation(),init_scope_provider(),init_json_serializer(),init_service_registry(),init_document_validator(),init_validation_registry(),init_ast_descriptions(),init_ast_node_locator(),init_configuration(),init_document_builder(),init_documents(),init_index_manager(),init_workspace_manager(),init_lexer2(),init_documentation_provider(),init_comment_provider(),init_langium_parser(),init_async_parser(),init_workspace_lock(),init_hydrator(),__name(createDefaultCoreModule,"createDefaultCoreModule"),__name(createDefaultSharedCoreModule,"createDefaultSharedCoreModule")}});function inject(module1,module2,module3,module4,module5,module6,module7,module8,module9){return _inject([module1,module2,module3,module4,module5,module6,module7,module8,module9].reduce(_merge,{}))}function eagerLoad(item){if(item&&item[isProxy])for(const value2 of Object.values(item))eagerLoad(value2);return item}function _inject(module2,injector){const proxy=new Proxy({},{deleteProperty:__name(()=>!1,"deleteProperty"),set:__name(()=>{throw new Error("Cannot set property on injected service container")},"set"),get:__name((obj,prop)=>prop===isProxy||_resolve2(obj,prop,module2,injector||proxy),"get"),getOwnPropertyDescriptor:__name((obj,prop)=>(_resolve2(obj,prop,module2,injector||proxy),Object.getOwnPropertyDescriptor(obj,prop)),"getOwnPropertyDescriptor"),has:__name((_3,prop)=>prop in module2,"has"),ownKeys:__name(()=>[...Object.getOwnPropertyNames(module2)],"ownKeys")});return proxy}function _resolve2(obj,prop,module2,injector){if(prop in obj){if(obj[prop]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:obj[prop]});if(obj[prop]===__requested__)throw new Error('Cycle detected. Please make "'+String(prop)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return obj[prop]}if(prop in module2){const value2=module2[prop];obj[prop]=__requested__;try{obj[prop]="function"==typeof value2?value2(injector):_inject(value2,injector)}catch(error3){throw obj[prop]=error3 instanceof Error?error3:void 0,error3}return obj[prop]}}function _merge(target,source){if(source)for(const[key,value2]of Object.entries(source))if(void 0!==value2){const value1=target[key];target[key]=null!==value1&&null!==value2&&"object"==typeof value1&&"object"==typeof value2?_merge(value1,value2):value2}return target}var indentationBuilderDefaultOptions,LexingMode,IndentationAwareTokenBuilder,IndentationAwareLexer,EmptyFileSystemProvider,EmptyFileSystem,minimalGrammarModule,minimalSharedGrammarModule,init_dependency_injection=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/dependency-injection.js"(){(Module||(Module={})).merge=(m1,m22)=>_merge(_merge({},m1),m22),__name(inject,"inject"),isProxy=Symbol("isProxy"),__name(eagerLoad,"eagerLoad"),__name(_inject,"_inject"),__requested__=Symbol(),__name(_resolve2,"_resolve"),__name(_merge,"_merge")}}),init_services=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/services.js"(){}}),init_documentation=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/documentation/index.js"(){init_comment_provider(),init_documentation_provider(),init_jsdoc()}}),init_language_meta_data=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/languages/language-meta-data.js"(){}}),init_languages=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/languages/index.js"(){init_grammar_config(),init_language_meta_data()}}),init_indentation_aware=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/indentation-aware.js"(){var LexingMode2;init_api5(),init_token_builder(),init_lexer2(),indentationBuilderDefaultOptions={indentTokenName:"INDENT",dedentTokenName:"DEDENT",whitespaceTokenName:"WS",ignoreIndentationDelimiters:[]},(LexingMode2=LexingMode||(LexingMode={})).REGULAR="indentation-sensitive",LexingMode2.IGNORE_INDENTATION="ignore-indentation",IndentationAwareTokenBuilder=class extends DefaultTokenBuilder{static{__name(this,"IndentationAwareTokenBuilder")}constructor(options2=indentationBuilderDefaultOptions){super(),this.indentationStack=[0],this.whitespaceRegExp=/[ \t]+/y,this.options=Object.assign(Object.assign({},indentationBuilderDefaultOptions),options2),this.indentTokenType=createToken({name:this.options.indentTokenName,pattern:this.indentMatcher.bind(this),line_breaks:!1}),this.dedentTokenType=createToken({name:this.options.dedentTokenName,pattern:this.dedentMatcher.bind(this),line_breaks:!1})}buildTokens(grammar,options2){const tokenTypes=super.buildTokens(grammar,options2);if(!isTokenTypeArray(tokenTypes))throw new Error("Invalid tokens built by default builder");const{indentTokenName:indentTokenName,dedentTokenName:dedentTokenName,whitespaceTokenName:whitespaceTokenName,ignoreIndentationDelimiters:ignoreIndentationDelimiters}=this.options;let dedent2,indent,ws;const otherTokens=[];for(const tokenType of tokenTypes){for(const[begin,end2]of ignoreIndentationDelimiters)tokenType.name===begin?tokenType.PUSH_MODE=LexingMode.IGNORE_INDENTATION:tokenType.name===end2&&(tokenType.POP_MODE=!0);tokenType.name===dedentTokenName?dedent2=tokenType:tokenType.name===indentTokenName?indent=tokenType:tokenType.name===whitespaceTokenName?ws=tokenType:otherTokens.push(tokenType)}if(!dedent2||!indent||!ws)throw new Error("Some indentation/whitespace tokens not found!");if(ignoreIndentationDelimiters.length>0){return{modes:{[LexingMode.REGULAR]:[dedent2,indent,...otherTokens,ws],[LexingMode.IGNORE_INDENTATION]:[...otherTokens,ws]},defaultMode:LexingMode.REGULAR}}return[dedent2,indent,ws,...otherTokens]}flushLexingReport(text4){const result=super.flushLexingReport(text4);return Object.assign(Object.assign({},result),{remainingDedents:this.flushRemainingDedents(text4)})}isStartOfLine(text4,offset){return 0===offset||"\r\n".includes(text4[offset-1])}matchWhitespace(text4,offset,tokens2,groups){var _a;this.whitespaceRegExp.lastIndex=offset;const match2=this.whitespaceRegExp.exec(text4);return{currIndentLevel:null!==(_a=null==match2?void 0:match2[0].length)&&void 0!==_a?_a:0,prevIndentLevel:this.indentationStack.at(-1),match:match2}}createIndentationTokenInstance(tokenType,text4,image,offset){const lineNumber=this.getLineNumber(text4,offset);return createTokenInstance(tokenType,image,offset,offset+image.length,lineNumber,lineNumber,1,image.length)}getLineNumber(text4,offset){return text4.substring(0,offset).split(/\r\n|\r|\n/).length}indentMatcher(text4,offset,tokens2,groups){if(!this.isStartOfLine(text4,offset))return null;const{currIndentLevel:currIndentLevel,prevIndentLevel:prevIndentLevel,match:match2}=this.matchWhitespace(text4,offset,tokens2,groups);return currIndentLevel<=prevIndentLevel?null:(this.indentationStack.push(currIndentLevel),match2)}dedentMatcher(text4,offset,tokens2,groups){var _a,_b,_c,_d;if(!this.isStartOfLine(text4,offset))return null;const{currIndentLevel:currIndentLevel,prevIndentLevel:prevIndentLevel,match:match2}=this.matchWhitespace(text4,offset,tokens2,groups);if(currIndentLevel>=prevIndentLevel)return null;const matchIndentIndex=this.indentationStack.lastIndexOf(currIndentLevel);if(-1===matchIndentIndex)return this.diagnostics.push({severity:"error",message:`Invalid dedent level ${currIndentLevel} at offset: ${offset}. Current indentation stack: ${this.indentationStack}`,offset:offset,length:null!==(_b=null===(_a=null==match2?void 0:match2[0])||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0,line:this.getLineNumber(text4,offset),column:1}),null;const numberOfDedents=this.indentationStack.length-matchIndentIndex-1,newlinesBeforeDedent=null!==(_d=null===(_c=text4.substring(0,offset).match(/[\r\n]+$/))||void 0===_c?void 0:_c[0].length)&&void 0!==_d?_d:1;for(let i2=0;i2<numberOfDedents;i2++){const token2=this.createIndentationTokenInstance(this.dedentTokenType,text4,"",offset-(newlinesBeforeDedent-1));tokens2.push(token2),this.indentationStack.pop()}return null}buildTerminalToken(terminal){const tokenType=super.buildTerminalToken(terminal),{indentTokenName:indentTokenName,dedentTokenName:dedentTokenName,whitespaceTokenName:whitespaceTokenName}=this.options;return tokenType.name===indentTokenName?this.indentTokenType:tokenType.name===dedentTokenName?this.dedentTokenType:tokenType.name===whitespaceTokenName?createToken({name:whitespaceTokenName,pattern:this.whitespaceRegExp,group:Lexer2.SKIPPED}):tokenType}flushRemainingDedents(text4){const remainingDedents=[];for(;this.indentationStack.length>1;)remainingDedents.push(this.createIndentationTokenInstance(this.dedentTokenType,text4,"",text4.length)),this.indentationStack.pop();return this.indentationStack=[0],remainingDedents}},IndentationAwareLexer=class extends DefaultLexer{static{__name(this,"IndentationAwareLexer")}constructor(services){if(super(services),!(services.parser.TokenBuilder instanceof IndentationAwareTokenBuilder))throw new Error("IndentationAwareLexer requires an accompanying IndentationAwareTokenBuilder");this.indentationTokenBuilder=services.parser.TokenBuilder}tokenize(text4,options2=DEFAULT_TOKENIZE_OPTIONS){const result=super.tokenize(text4),report=result.report;"full"===(null==options2?void 0:options2.mode)&&result.tokens.push(...report.remainingDedents),report.remainingDedents=[];const{indentTokenType:indentTokenType,dedentTokenType:dedentTokenType}=this.indentationTokenBuilder,indentTokenIdx=indentTokenType.tokenTypeIdx,dedentTokenIdx=dedentTokenType.tokenTypeIdx,cleanTokens=[],length2=result.tokens.length-1;for(let i2=0;i2<length2;i2++){const token2=result.tokens[i2],nextToken=result.tokens[i2+1];token2.tokenTypeIdx!==indentTokenIdx||nextToken.tokenTypeIdx!==dedentTokenIdx?cleanTokens.push(token2):i2++}return length2>=0&&cleanTokens.push(result.tokens[length2]),result.tokens=cleanTokens,result}}}}),init_parser_config=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/parser-config.js"(){}}),init_parser2=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/parser/index.js"(){init_async_parser(),init_completion_parser_builder(),init_cst_node_builder(),init_indentation_aware(),init_langium_parser_builder(),init_langium_parser(),init_lexer2(),init_parser_builder_base(),init_parser_config(),init_token_builder(),init_value_converter()}}),init_references2=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/references/index.js"(){init_linker(),init_name_provider(),init_references(),init_scope(),init_scope_computation(),init_scope_provider()}}),init_serializer=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/serializer/index.js"(){init_hydrator(),init_json_serializer()}}),init_file_system_provider=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/file-system-provider.js"(){EmptyFileSystemProvider=class{static{__name(this,"EmptyFileSystemProvider")}readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}},EmptyFileSystem={fileSystemProvider:__name(()=>new EmptyFileSystemProvider,"fileSystemProvider")}}});function createMinimalGrammarServices(){const shared=inject(createDefaultSharedCoreModule(EmptyFileSystem),minimalSharedGrammarModule),grammar=inject(createDefaultCoreModule({shared:shared}),minimalGrammarModule);return shared.ServiceRegistry.register(grammar),grammar}function loadGrammarFromJson(json3){var _a;const services=createMinimalGrammarServices(),astNode=services.serializer.JsonSerializer.deserialize(json3);return services.shared.workspace.LangiumDocumentFactory.fromModel(astNode,URI2.parse(`memory://${null!==(_a=astNode.name)&&void 0!==_a?_a:"grammar"}.langium`)),astNode}var init_grammar_loader=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/grammar-loader.js"(){init_default_module(),init_dependency_injection(),init_ast(),init_file_system_provider(),init_uri_utils(),minimalGrammarModule={Grammar:__name(()=>{},"Grammar"),LanguageMetaData:__name(()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"}),"LanguageMetaData")},minimalSharedGrammarModule={AstReflection:__name(()=>new LangiumGrammarAstReflection,"AstReflection")},__name(createMinimalGrammarServices,"createMinimalGrammarServices"),__name(loadGrammarFromJson,"loadGrammarFromJson")}}),utils_exports={};__export(utils_exports,{AstUtils:()=>ast_utils_exports,BiMap:()=>BiMap,Cancellation:()=>cancellation_exports,ContextCache:()=>ContextCache,CstUtils:()=>cst_utils_exports,DONE_RESULT:()=>DONE_RESULT,Deferred:()=>Deferred,Disposable:()=>Disposable,DisposableCache:()=>DisposableCache,DocumentCache:()=>DocumentCache,EMPTY_STREAM:()=>EMPTY_STREAM,ErrorWithLocation:()=>ErrorWithLocation,GrammarUtils:()=>grammar_utils_exports,MultiMap:()=>MultiMap,OperationCancelled:()=>OperationCancelled,Reduction:()=>Reduction,RegExpUtils:()=>regexp_utils_exports,SimpleCache:()=>SimpleCache,StreamImpl:()=>StreamImpl,TreeStreamImpl:()=>TreeStreamImpl,URI:()=>URI2,UriUtils:()=>UriUtils,WorkspaceCache:()=>WorkspaceCache,assertUnreachable:()=>assertUnreachable,delayNextTick:()=>delayNextTick,interruptAndCheck:()=>interruptAndCheck,isOperationCancelled:()=>isOperationCancelled,loadGrammarFromJson:()=>loadGrammarFromJson,setInterruptionPeriod:()=>setInterruptionPeriod,startCancelableOperation:()=>startCancelableOperation,stream:()=>stream});var init_utils4=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/utils/index.js"(){init_caching(),init_event3(),__reExport(utils_exports,event_exports),init_collections(),init_disposable(),init_errors2(),init_grammar_loader(),init_promise_utils(),init_stream(),init_uri_utils(),init_ast_utils(),init_cancellation(),init_cst_utils(),init_grammar_utils(),init_regexp_utils()}}),init_validation=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/validation/index.js"(){init_document_validator(),init_validation_registry()}}),init_workspace=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/workspace/index.js"(){init_ast_descriptions(),init_ast_node_locator(),init_configuration(),init_document_builder(),init_documents(),init_file_system_provider(),init_index_manager(),init_workspace_lock(),init_workspace_manager()}}),lib_exports={};__export(lib_exports,{AbstractAstReflection:()=>AbstractAstReflection,AbstractCstNode:()=>AbstractCstNode,AbstractLangiumParser:()=>AbstractLangiumParser,AbstractParserErrorMessageProvider:()=>AbstractParserErrorMessageProvider,AbstractThreadedAsyncParser:()=>AbstractThreadedAsyncParser,AstUtils:()=>ast_utils_exports,BiMap:()=>BiMap,Cancellation:()=>cancellation_exports,CompositeCstNodeImpl:()=>CompositeCstNodeImpl,ContextCache:()=>ContextCache,CstNodeBuilder:()=>CstNodeBuilder,CstUtils:()=>cst_utils_exports,DEFAULT_TOKENIZE_OPTIONS:()=>DEFAULT_TOKENIZE_OPTIONS,DONE_RESULT:()=>DONE_RESULT,DatatypeSymbol:()=>DatatypeSymbol,DefaultAstNodeDescriptionProvider:()=>DefaultAstNodeDescriptionProvider,DefaultAstNodeLocator:()=>DefaultAstNodeLocator,DefaultAsyncParser:()=>DefaultAsyncParser,DefaultCommentProvider:()=>DefaultCommentProvider,DefaultConfigurationProvider:()=>DefaultConfigurationProvider,DefaultDocumentBuilder:()=>DefaultDocumentBuilder,DefaultDocumentValidator:()=>DefaultDocumentValidator,DefaultHydrator:()=>DefaultHydrator,DefaultIndexManager:()=>DefaultIndexManager,DefaultJsonSerializer:()=>DefaultJsonSerializer,DefaultLangiumDocumentFactory:()=>DefaultLangiumDocumentFactory,DefaultLangiumDocuments:()=>DefaultLangiumDocuments,DefaultLexer:()=>DefaultLexer,DefaultLexerErrorMessageProvider:()=>DefaultLexerErrorMessageProvider,DefaultLinker:()=>DefaultLinker,DefaultNameProvider:()=>DefaultNameProvider,DefaultReferenceDescriptionProvider:()=>DefaultReferenceDescriptionProvider,DefaultReferences:()=>DefaultReferences,DefaultScopeComputation:()=>DefaultScopeComputation,DefaultScopeProvider:()=>DefaultScopeProvider,DefaultServiceRegistry:()=>DefaultServiceRegistry,DefaultTokenBuilder:()=>DefaultTokenBuilder,DefaultValueConverter:()=>DefaultValueConverter,DefaultWorkspaceLock:()=>DefaultWorkspaceLock,DefaultWorkspaceManager:()=>DefaultWorkspaceManager,Deferred:()=>Deferred,Disposable:()=>Disposable,DisposableCache:()=>DisposableCache,DocumentCache:()=>DocumentCache,DocumentState:()=>DocumentState,DocumentValidator:()=>DocumentValidator,EMPTY_SCOPE:()=>EMPTY_SCOPE,EMPTY_STREAM:()=>EMPTY_STREAM,EmptyFileSystem:()=>EmptyFileSystem,EmptyFileSystemProvider:()=>EmptyFileSystemProvider,ErrorWithLocation:()=>ErrorWithLocation,GrammarAST:()=>ast_exports,GrammarUtils:()=>grammar_utils_exports,IndentationAwareLexer:()=>IndentationAwareLexer,IndentationAwareTokenBuilder:()=>IndentationAwareTokenBuilder,JSDocDocumentationProvider:()=>JSDocDocumentationProvider,LangiumCompletionParser:()=>LangiumCompletionParser,LangiumParser:()=>LangiumParser,LangiumParserErrorMessageProvider:()=>LangiumParserErrorMessageProvider,LeafCstNodeImpl:()=>LeafCstNodeImpl,LexingMode:()=>LexingMode,MapScope:()=>MapScope,Module:()=>Module,MultiMap:()=>MultiMap,OperationCancelled:()=>OperationCancelled,ParserWorker:()=>ParserWorker,Reduction:()=>Reduction,RegExpUtils:()=>regexp_utils_exports,RootCstNodeImpl:()=>RootCstNodeImpl,SimpleCache:()=>SimpleCache,StreamImpl:()=>StreamImpl,StreamScope:()=>StreamScope,TextDocument:()=>TextDocument2,TreeStreamImpl:()=>TreeStreamImpl,URI:()=>URI2,UriUtils:()=>UriUtils,ValidationCategory:()=>ValidationCategory,ValidationRegistry:()=>ValidationRegistry,ValueConverter:()=>ValueConverter,WorkspaceCache:()=>WorkspaceCache,assertUnreachable:()=>assertUnreachable,createCompletionParser:()=>createCompletionParser,createDefaultCoreModule:()=>createDefaultCoreModule,createDefaultSharedCoreModule:()=>createDefaultSharedCoreModule,createGrammarConfig:()=>createGrammarConfig,createLangiumParser:()=>createLangiumParser,createParser:()=>createParser,delayNextTick:()=>delayNextTick,diagnosticData:()=>diagnosticData,eagerLoad:()=>eagerLoad,getDiagnosticRange:()=>getDiagnosticRange,indentationBuilderDefaultOptions:()=>indentationBuilderDefaultOptions,inject:()=>inject,interruptAndCheck:()=>interruptAndCheck,isAstNode:()=>isAstNode,isAstNodeDescription:()=>isAstNodeDescription,isAstNodeWithComment:()=>isAstNodeWithComment,isCompositeCstNode:()=>isCompositeCstNode,isIMultiModeLexerDefinition:()=>isIMultiModeLexerDefinition,isJSDoc:()=>isJSDoc,isLeafCstNode:()=>isLeafCstNode,isLinkingError:()=>isLinkingError,isNamed:()=>isNamed,isOperationCancelled:()=>isOperationCancelled,isReference:()=>isReference,isRootCstNode:()=>isRootCstNode,isTokenTypeArray:()=>isTokenTypeArray,isTokenTypeDictionary:()=>isTokenTypeDictionary,loadGrammarFromJson:()=>loadGrammarFromJson,parseJSDoc:()=>parseJSDoc,prepareLangiumParser:()=>prepareLangiumParser,setInterruptionPeriod:()=>setInterruptionPeriod,startCancelableOperation:()=>startCancelableOperation,stream:()=>stream,toDiagnosticData:()=>toDiagnosticData,toDiagnosticSeverity:()=>toDiagnosticSeverity});var __defProp2,__name2,Architecture,Branch,Commit,GitGraph,Info,Merge,Packet,PacketBlock,Pie,PieSection,Treemap,MermaidAstReflection,reflection2,loadedInfoGrammar,InfoGrammar,loadedPacketGrammar,PacketGrammar,loadedPieGrammar,PieGrammar,loadedArchitectureGrammar,ArchitectureGrammar,loadedGitGraphGrammar,GitGraphGrammar,loadedRadarGrammar,RadarGrammar,loadedTreemapGrammar,TreemapGrammar,InfoLanguageMetaData,PacketLanguageMetaData,PieLanguageMetaData,ArchitectureLanguageMetaData,GitGraphLanguageMetaData,RadarLanguageMetaData,TreemapLanguageMetaData,MermaidGeneratedSharedModule,InfoGeneratedModule,PacketGeneratedModule,PieGeneratedModule,ArchitectureGeneratedModule,GitGraphGeneratedModule,RadarGeneratedModule,TreemapGeneratedModule,rulesRegexes,AbstractMermaidValueConverter,CommonValueConverter,AbstractMermaidTokenBuilder,init_lib3=__esm({"../../node_modules/.pnpm/langium@3.3.1/node_modules/langium/lib/index.js"(){init_default_module(),init_dependency_injection(),init_service_registry(),init_services(),init_syntax_tree(),init_documentation(),init_languages(),init_parser2(),init_references2(),init_serializer(),init_utils4(),__reExport(lib_exports,utils_exports),init_validation(),init_workspace(),init_ast()}});function isArchitecture(item){return reflection2.isInstance(item,Architecture)}function isBranch(item){return reflection2.isInstance(item,Branch)}function isCommit(item){return reflection2.isInstance(item,Commit)}function isGitGraph(item){return reflection2.isInstance(item,GitGraph)}function isInfo(item){return reflection2.isInstance(item,Info)}function isMerge(item){return reflection2.isInstance(item,Merge)}function isPacket(item){return reflection2.isInstance(item,Packet)}function isPacketBlock(item){return reflection2.isInstance(item,PacketBlock)}function isPie(item){return reflection2.isInstance(item,Pie)}function isPieSection(item){return reflection2.isInstance(item,PieSection)}function isTreemap(item){return reflection2.isInstance(item,Treemap)}var GitGraphTokenBuilder,GitGraphModule,init_chunk_FPAJGGOC=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-FPAJGGOC.mjs"(){init_lib3(),init_lib3(),init_lib3(),init_lib3(),__defProp2=Object.defineProperty,__name2=__name((target,value2)=>__defProp2(target,"name",{value:value2,configurable:!0}),"__name"),Architecture="Architecture",__name(isArchitecture,"isArchitecture"),__name2(isArchitecture,"isArchitecture"),Branch="Branch",__name(isBranch,"isBranch"),__name2(isBranch,"isBranch"),Commit="Commit",__name(isCommit,"isCommit"),__name2(isCommit,"isCommit"),GitGraph="GitGraph",__name(isGitGraph,"isGitGraph"),__name2(isGitGraph,"isGitGraph"),Info="Info",__name(isInfo,"isInfo"),__name2(isInfo,"isInfo"),Merge="Merge",__name(isMerge,"isMerge"),__name2(isMerge,"isMerge"),Packet="Packet",__name(isPacket,"isPacket"),__name2(isPacket,"isPacket"),PacketBlock="PacketBlock",__name(isPacketBlock,"isPacketBlock"),__name2(isPacketBlock,"isPacketBlock"),Pie="Pie",__name(isPie,"isPie"),__name2(isPie,"isPie"),PieSection="PieSection",__name(isPieSection,"isPieSection"),__name2(isPieSection,"isPieSection"),Treemap="Treemap",__name(isTreemap,"isTreemap"),__name2(isTreemap,"isTreemap"),MermaidAstReflection=class extends AbstractAstReflection{static{__name(this,"MermaidAstReflection")}static{__name2(this,"MermaidAstReflection")}getAllTypes(){return[Architecture,"Axis",Branch,"Checkout","CherryPicking","ClassDefStatement",Commit,"Curve","Direction","Edge","Entry",GitGraph,"Group",Info,"Item","Junction","Leaf",Merge,"Option",Packet,PacketBlock,Pie,PieSection,"Radar","Section","Service","Statement",Treemap,"TreemapRow"]}computeIsSubtype(subtype,supertype){switch(subtype){case Branch:case"Checkout":case"CherryPicking":case Commit:case Merge:return this.isSubtype("Statement",supertype);case"Direction":return this.isSubtype(GitGraph,supertype);case"Leaf":case"Section":return this.isSubtype("Item",supertype);default:return!1}}getReferenceType(refInfo){const referenceId=`${refInfo.container.$type}:${refInfo.property}`;if("Entry:axis"===referenceId)return"Axis";throw new Error(`${referenceId} is not a valid reference id.`)}getTypeMetaData(type3){switch(type3){case Architecture:return{name:Architecture,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Axis":return{name:"Axis",properties:[{name:"label"},{name:"name"}]};case Branch:return{name:Branch,properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"ClassDefStatement":return{name:"ClassDefStatement",properties:[{name:"className"},{name:"styleText"}]};case Commit:return{name:Commit,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Curve":return{name:"Curve",properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"Entry":return{name:"Entry",properties:[{name:"axis"},{name:"value"}]};case GitGraph:return{name:GitGraph,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case Info:return{name:Info,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Item":return{name:"Item",properties:[{name:"classSelector"},{name:"name"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case Merge:return{name:Merge,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Option":return{name:"Option",properties:[{name:"name"},{name:"value",defaultValue:!1}]};case Packet:return{name:Packet,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case PacketBlock:return{name:PacketBlock,properties:[{name:"bits"},{name:"end"},{name:"label"},{name:"start"}]};case Pie:return{name:Pie,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case PieSection:return{name:PieSection,properties:[{name:"label"},{name:"value"}]};case"Radar":return{name:"Radar",properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case Treemap:return{name:Treemap,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"},{name:"TreemapRows",defaultValue:[]}]};case"TreemapRow":return{name:"TreemapRow",properties:[{name:"indent"},{name:"item"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Leaf":return{name:"Leaf",properties:[{name:"classSelector"},{name:"name"},{name:"value"}]};case"Section":return{name:"Section",properties:[{name:"classSelector"},{name:"name"}]};default:return{name:type3,properties:[]}}}},reflection2=new MermaidAstReflection,InfoGrammar=__name2(()=>loadedInfoGrammar??(loadedInfoGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@7"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}')),"InfoGrammar"),PacketGrammar=__name2(()=>loadedPacketGrammar??(loadedPacketGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"packet"},{"$type":"Keyword","value":"packet-beta"}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"+"},{"$type":"Assignment","feature":"bits","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@9"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}')),"PacketGrammar"),PieGrammar=__name2(()=>loadedPieGrammar??(loadedPieGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"FLOAT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@2"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@3"}}]},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@11"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@12"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}')),"PieGrammar"),ArchitectureGrammar=__name2(()=>loadedArchitectureGrammar??(loadedArchitectureGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@18"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@19"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}')),"ArchitectureGrammar"),GitGraphGrammar=__name2(()=>loadedGitGraphGrammar??(loadedGitGraphGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"GitGraph","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@14"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"TerminalRule","name":"REFERENCE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}')),"GitGraphGrammar"),RadarGrammar=__name2(()=>loadedRadarGrammar??(loadedRadarGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"Radar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@2"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@16"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"interfaces":[{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@2"}}}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"types":[],"usedGrammars":[]}')),"RadarGrammar"),TreemapGrammar=__name2(()=>loadedTreemapGrammar??(loadedTreemapGrammar=loadGrammarFromJson('{"$type":"Grammar","isDeclared":true,"name":"Treemap","rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"$ref":"#/interfaces@4"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap-beta"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"CLASS_DEF","definition":{"$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":::"}},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":"}},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"COMMA","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":","}},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/[ \\\\t]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"NL","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false},{"$type":"ParserRule","name":"TreemapRow","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"indent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"item","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Item","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Section","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Leaf","returnType":{"$ref":"#/interfaces@2"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INDENTATION","definition":{"$type":"RegexToken","regex":"/[ \\\\t]{1,}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID2","definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER2","definition":{"$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"STRING2","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false}],"interfaces":[{"$type":"Interface","name":"Item","attributes":[{"$type":"TypeAttribute","name":"name","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Section","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[]},{"$type":"Interface","name":"Leaf","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"$type":"Interface","name":"ClassDefStatement","attributes":[{"$type":"TypeAttribute","name":"className","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"styleText","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"$type":"Interface","name":"Treemap","attributes":[{"$type":"TypeAttribute","name":"TreemapRows","type":{"$type":"ArrayType","elementType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@14"}}},"isOptional":false},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[],"$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}')),"TreemapGrammar"),InfoLanguageMetaData={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},PacketLanguageMetaData={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},PieLanguageMetaData={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},ArchitectureLanguageMetaData={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},GitGraphLanguageMetaData={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},RadarLanguageMetaData={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},TreemapLanguageMetaData={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},MermaidGeneratedSharedModule={AstReflection:__name2(()=>new MermaidAstReflection,"AstReflection")},InfoGeneratedModule={Grammar:__name2(()=>InfoGrammar(),"Grammar"),LanguageMetaData:__name2(()=>InfoLanguageMetaData,"LanguageMetaData"),parser:{}},PacketGeneratedModule={Grammar:__name2(()=>PacketGrammar(),"Grammar"),LanguageMetaData:__name2(()=>PacketLanguageMetaData,"LanguageMetaData"),parser:{}},PieGeneratedModule={Grammar:__name2(()=>PieGrammar(),"Grammar"),LanguageMetaData:__name2(()=>PieLanguageMetaData,"LanguageMetaData"),parser:{}},ArchitectureGeneratedModule={Grammar:__name2(()=>ArchitectureGrammar(),"Grammar"),LanguageMetaData:__name2(()=>ArchitectureLanguageMetaData,"LanguageMetaData"),parser:{}},GitGraphGeneratedModule={Grammar:__name2(()=>GitGraphGrammar(),"Grammar"),LanguageMetaData:__name2(()=>GitGraphLanguageMetaData,"LanguageMetaData"),parser:{}},RadarGeneratedModule={Grammar:__name2(()=>RadarGrammar(),"Grammar"),LanguageMetaData:__name2(()=>RadarLanguageMetaData,"LanguageMetaData"),parser:{}},TreemapGeneratedModule={Grammar:__name2(()=>TreemapGrammar(),"Grammar"),LanguageMetaData:__name2(()=>TreemapLanguageMetaData,"LanguageMetaData"),parser:{}},rulesRegexes={ACC_DESCR:/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/accTitle[\t ]*:([^\n\r]*)/,TITLE:/title([\t ][^\n\r]*|)/},AbstractMermaidValueConverter=class extends DefaultValueConverter{static{__name(this,"AbstractMermaidValueConverter")}static{__name2(this,"AbstractMermaidValueConverter")}runConverter(rule,input,cstNode){let value2=this.runCommonConverter(rule,input,cstNode);return void 0===value2&&(value2=this.runCustomConverter(rule,input,cstNode)),void 0===value2?super.runConverter(rule,input,cstNode):value2}runCommonConverter(rule,input,_cstNode){const regex2=rulesRegexes[rule.name];if(void 0===regex2)return;const match2=regex2.exec(input);return null!==match2?void 0!==match2[1]?match2[1].trim().replace(/[\t ]{2,}/gm," "):void 0!==match2[2]?match2[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,"\n"):void 0:void 0}},CommonValueConverter=class extends AbstractMermaidValueConverter{static{__name(this,"CommonValueConverter")}static{__name2(this,"CommonValueConverter")}runCustomConverter(_rule,_input,_cstNode){}},AbstractMermaidTokenBuilder=class extends DefaultTokenBuilder{static{__name(this,"AbstractMermaidTokenBuilder")}static{__name2(this,"AbstractMermaidTokenBuilder")}constructor(keywords){super(),this.keywords=new Set(keywords)}buildKeywordTokens(rules,terminalTokens,options2){const tokenTypes=super.buildKeywordTokens(rules,terminalTokens,options2);return tokenTypes.forEach(tokenType=>{this.keywords.has(tokenType.name)&&void 0!==tokenType.PATTERN&&(tokenType.PATTERN=new RegExp(tokenType.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),tokenTypes}},class extends AbstractMermaidTokenBuilder{static{__name(this,"CommonTokenBuilder")}static{__name2(this,"CommonTokenBuilder")}}}});function createGitGraphServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),GitGraph2=inject(createDefaultCoreModule({shared:shared}),GitGraphGeneratedModule,GitGraphModule);return shared.ServiceRegistry.register(GitGraph2),{shared:shared,GitGraph:GitGraph2}}var InfoTokenBuilder,InfoModule,init_chunk_S6J4BHB3=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-S6J4BHB3.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),GitGraphTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"GitGraphTokenBuilder")}static{__name2(this,"GitGraphTokenBuilder")}constructor(){super(["gitGraph"])}},GitGraphModule={parser:{TokenBuilder:__name2(()=>new GitGraphTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new CommonValueConverter,"ValueConverter")}},__name(createGitGraphServices,"createGitGraphServices"),__name2(createGitGraphServices,"createGitGraphServices")}});function createInfoServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),Info2=inject(createDefaultCoreModule({shared:shared}),InfoGeneratedModule,InfoModule);return shared.ServiceRegistry.register(Info2),{shared:shared,Info:Info2}}var PacketTokenBuilder,PacketModule,init_chunk_LBM3YZW2=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-LBM3YZW2.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),InfoTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"InfoTokenBuilder")}static{__name2(this,"InfoTokenBuilder")}constructor(){super(["info","showInfo"])}},InfoModule={parser:{TokenBuilder:__name2(()=>new InfoTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new CommonValueConverter,"ValueConverter")}},__name(createInfoServices,"createInfoServices"),__name2(createInfoServices,"createInfoServices")}});function createPacketServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),Packet2=inject(createDefaultCoreModule({shared:shared}),PacketGeneratedModule,PacketModule);return shared.ServiceRegistry.register(Packet2),{shared:shared,Packet:Packet2}}var PieTokenBuilder,PieValueConverter,PieModule,init_chunk_76Q3JFCE=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-76Q3JFCE.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),PacketTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"PacketTokenBuilder")}static{__name2(this,"PacketTokenBuilder")}constructor(){super(["packet"])}},PacketModule={parser:{TokenBuilder:__name2(()=>new PacketTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new CommonValueConverter,"ValueConverter")}},__name(createPacketServices,"createPacketServices"),__name2(createPacketServices,"createPacketServices")}});function createPieServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),Pie2=inject(createDefaultCoreModule({shared:shared}),PieGeneratedModule,PieModule);return shared.ServiceRegistry.register(Pie2),{shared:shared,Pie:Pie2}}var ArchitectureTokenBuilder,ArchitectureValueConverter,ArchitectureModule,init_chunk_T53DSG4Q=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-T53DSG4Q.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),PieTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"PieTokenBuilder")}static{__name2(this,"PieTokenBuilder")}constructor(){super(["pie","showData"])}},PieValueConverter=class extends AbstractMermaidValueConverter{static{__name(this,"PieValueConverter")}static{__name2(this,"PieValueConverter")}runCustomConverter(rule,input,_cstNode){if("PIE_SECTION_LABEL"===rule.name)return input.replace(/"/g,"").trim()}},PieModule={parser:{TokenBuilder:__name2(()=>new PieTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new PieValueConverter,"ValueConverter")}},__name(createPieServices,"createPieServices"),__name2(createPieServices,"createPieServices")}});function createArchitectureServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),Architecture2=inject(createDefaultCoreModule({shared:shared}),ArchitectureGeneratedModule,ArchitectureModule);return shared.ServiceRegistry.register(Architecture2),{shared:shared,Architecture:Architecture2}}var RadarTokenBuilder,RadarModule,init_chunk_O7ZBX7Z2=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-O7ZBX7Z2.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),ArchitectureTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"ArchitectureTokenBuilder")}static{__name2(this,"ArchitectureTokenBuilder")}constructor(){super(["architecture"])}},ArchitectureValueConverter=class extends AbstractMermaidValueConverter{static{__name(this,"ArchitectureValueConverter")}static{__name2(this,"ArchitectureValueConverter")}runCustomConverter(rule,input,_cstNode){return"ARCH_ICON"===rule.name?input.replace(/[()]/g,"").trim():"ARCH_TEXT_ICON"===rule.name?input.replace(/["()]/g,""):"ARCH_TITLE"===rule.name?input.replace(/[[\]]/g,"").trim():void 0}},ArchitectureModule={parser:{TokenBuilder:__name2(()=>new ArchitectureTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new ArchitectureValueConverter,"ValueConverter")}},__name(createArchitectureServices,"createArchitectureServices"),__name2(createArchitectureServices,"createArchitectureServices")}});function createRadarServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),Radar2=inject(createDefaultCoreModule({shared:shared}),RadarGeneratedModule,RadarModule);return shared.ServiceRegistry.register(Radar2),{shared:shared,Radar:Radar2}}var TreemapTokenBuilder,classDefRegex,TreemapValueConverter,TreemapValidator,TreemapModule,init_chunk_LHMN2FUI=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-LHMN2FUI.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),RadarTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"RadarTokenBuilder")}static{__name2(this,"RadarTokenBuilder")}constructor(){super(["radar-beta"])}},RadarModule={parser:{TokenBuilder:__name2(()=>new RadarTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new CommonValueConverter,"ValueConverter")}},__name(createRadarServices,"createRadarServices"),__name2(createRadarServices,"createRadarServices")}});function registerValidationChecks(services){const validator=services.validation.TreemapValidator,registry=services.validation.ValidationRegistry;if(registry){const checks={Treemap:validator.checkSingleRoot.bind(validator)};registry.register(checks,validator)}}function createTreemapServices(context=EmptyFileSystem){const shared=inject(createDefaultSharedCoreModule(context),MermaidGeneratedSharedModule),Treemap2=inject(createDefaultCoreModule({shared:shared}),TreemapGeneratedModule,TreemapModule);return shared.ServiceRegistry.register(Treemap2),registerValidationChecks(Treemap2),{shared:shared,Treemap:Treemap2}}var init_chunk_FWNWRKHM=__esm({"../parser/dist/chunks/mermaid-parser.core/chunk-FWNWRKHM.mjs"(){init_chunk_FPAJGGOC(),init_lib3(),TreemapTokenBuilder=class extends AbstractMermaidTokenBuilder{static{__name(this,"TreemapTokenBuilder")}static{__name2(this,"TreemapTokenBuilder")}constructor(){super(["treemap"])}},classDefRegex=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,TreemapValueConverter=class extends AbstractMermaidValueConverter{static{__name(this,"TreemapValueConverter")}static{__name2(this,"TreemapValueConverter")}runCustomConverter(rule,input,_cstNode){if("NUMBER2"===rule.name)return parseFloat(input.replace(/,/g,""));if("SEPARATOR"===rule.name)return input.substring(1,input.length-1);if("STRING2"===rule.name)return input.substring(1,input.length-1);if("INDENTATION"===rule.name)return input.length;if("ClassDef"===rule.name){if("string"!=typeof input)return input;const match2=classDefRegex.exec(input);if(match2)return{$type:"ClassDefStatement",className:match2[1],styleText:match2[2]||void 0}}}},__name(registerValidationChecks,"registerValidationChecks"),__name2(registerValidationChecks,"registerValidationChecks"),TreemapValidator=class{static{__name(this,"TreemapValidator")}static{__name2(this,"TreemapValidator")}checkSingleRoot(doc,accept){let rootNodeIndentation;for(const row of doc.TreemapRows)row.item&&(void 0===rootNodeIndentation&&void 0===row.indent?rootNodeIndentation=0:(void 0===row.indent||void 0!==rootNodeIndentation&&rootNodeIndentation>=parseInt(row.indent,10))&&accept("error","Multiple root nodes are not allowed in a treemap.",{node:row,property:"item"}))}},TreemapModule={parser:{TokenBuilder:__name2(()=>new TreemapTokenBuilder,"TokenBuilder"),ValueConverter:__name2(()=>new TreemapValueConverter,"ValueConverter")},validation:{TreemapValidator:__name2(()=>new TreemapValidator,"TreemapValidator")}},__name(createTreemapServices,"createTreemapServices"),__name2(createTreemapServices,"createTreemapServices")}}),info_NVLQJR56_exports={};__export(info_NVLQJR56_exports,{InfoModule:()=>InfoModule,createInfoServices:()=>createInfoServices});var init_info_NVLQJR56=__esm({"../parser/dist/chunks/mermaid-parser.core/info-NVLQJR56.mjs"(){init_chunk_LBM3YZW2(),init_chunk_FPAJGGOC()}}),packet_BFZMPI3H_exports={};__export(packet_BFZMPI3H_exports,{PacketModule:()=>PacketModule,createPacketServices:()=>createPacketServices});var init_packet_BFZMPI3H=__esm({"../parser/dist/chunks/mermaid-parser.core/packet-BFZMPI3H.mjs"(){init_chunk_76Q3JFCE(),init_chunk_FPAJGGOC()}}),pie_7BOR55EZ_exports={};__export(pie_7BOR55EZ_exports,{PieModule:()=>PieModule,createPieServices:()=>createPieServices});var init_pie_7BOR55EZ=__esm({"../parser/dist/chunks/mermaid-parser.core/pie-7BOR55EZ.mjs"(){init_chunk_T53DSG4Q(),init_chunk_FPAJGGOC()}}),architecture_U656AL7Q_exports={};__export(architecture_U656AL7Q_exports,{ArchitectureModule:()=>ArchitectureModule,createArchitectureServices:()=>createArchitectureServices});var init_architecture_U656AL7Q=__esm({"../parser/dist/chunks/mermaid-parser.core/architecture-U656AL7Q.mjs"(){init_chunk_O7ZBX7Z2(),init_chunk_FPAJGGOC()}}),gitGraph_F6HP7TQM_exports={};__export(gitGraph_F6HP7TQM_exports,{GitGraphModule:()=>GitGraphModule,createGitGraphServices:()=>createGitGraphServices});var init_gitGraph_F6HP7TQM=__esm({"../parser/dist/chunks/mermaid-parser.core/gitGraph-F6HP7TQM.mjs"(){init_chunk_S6J4BHB3(),init_chunk_FPAJGGOC()}}),radar_NHE76QYJ_exports={};__export(radar_NHE76QYJ_exports,{RadarModule:()=>RadarModule,createRadarServices:()=>createRadarServices});var init_radar_NHE76QYJ=__esm({"../parser/dist/chunks/mermaid-parser.core/radar-NHE76QYJ.mjs"(){init_chunk_LHMN2FUI(),init_chunk_FPAJGGOC()}}),treemap_KMMF4GRG_exports={};__export(treemap_KMMF4GRG_exports,{TreemapModule:()=>TreemapModule,createTreemapServices:()=>createTreemapServices});var parsers,initializers,MermaidParseError,init_treemap_KMMF4GRG=__esm({"../parser/dist/chunks/mermaid-parser.core/treemap-KMMF4GRG.mjs"(){init_chunk_FWNWRKHM(),init_chunk_FPAJGGOC()}});async function parse3(diagramType,text4){const initializer=initializers[diagramType];if(!initializer)throw new Error(`Unknown diagram type: ${diagramType}`);parsers[diagramType]||await initializer();const result=parsers[diagramType].parse(text4);if(result.lexerErrors.length>0||result.parserErrors.length>0)throw new MermaidParseError(result);return result.value}var init_mermaid_parser_core=__esm({"../parser/dist/mermaid-parser.core.mjs"(){init_chunk_S6J4BHB3(),init_chunk_LBM3YZW2(),init_chunk_76Q3JFCE(),init_chunk_T53DSG4Q(),init_chunk_O7ZBX7Z2(),init_chunk_LHMN2FUI(),init_chunk_FWNWRKHM(),init_chunk_FPAJGGOC(),parsers={},initializers={info:__name2(async()=>{const{createInfoServices:createInfoServices2}=await Promise.resolve().then(()=>(init_info_NVLQJR56(),info_NVLQJR56_exports)),parser24=createInfoServices2().Info.parser.LangiumParser;parsers.info=parser24},"info"),packet:__name2(async()=>{const{createPacketServices:createPacketServices2}=await Promise.resolve().then(()=>(init_packet_BFZMPI3H(),packet_BFZMPI3H_exports)),parser24=createPacketServices2().Packet.parser.LangiumParser;parsers.packet=parser24},"packet"),pie:__name2(async()=>{const{createPieServices:createPieServices2}=await Promise.resolve().then(()=>(init_pie_7BOR55EZ(),pie_7BOR55EZ_exports)),parser24=createPieServices2().Pie.parser.LangiumParser;parsers.pie=parser24},"pie"),architecture:__name2(async()=>{const{createArchitectureServices:createArchitectureServices2}=await Promise.resolve().then(()=>(init_architecture_U656AL7Q(),architecture_U656AL7Q_exports)),parser24=createArchitectureServices2().Architecture.parser.LangiumParser;parsers.architecture=parser24},"architecture"),gitGraph:__name2(async()=>{const{createGitGraphServices:createGitGraphServices2}=await Promise.resolve().then(()=>(init_gitGraph_F6HP7TQM(),gitGraph_F6HP7TQM_exports)),parser24=createGitGraphServices2().GitGraph.parser.LangiumParser;parsers.gitGraph=parser24},"gitGraph"),radar:__name2(async()=>{const{createRadarServices:createRadarServices2}=await Promise.resolve().then(()=>(init_radar_NHE76QYJ(),radar_NHE76QYJ_exports)),parser24=createRadarServices2().Radar.parser.LangiumParser;parsers.radar=parser24},"radar"),treemap:__name2(async()=>{const{createTreemapServices:createTreemapServices2}=await Promise.resolve().then(()=>(init_treemap_KMMF4GRG(),treemap_KMMF4GRG_exports)),parser24=createTreemapServices2().Treemap.parser.LangiumParser;parsers.treemap=parser24},"treemap")},__name(parse3,"parse"),__name2(parse3,"parse"),MermaidParseError=class extends Error{static{__name(this,"MermaidParseError")}constructor(result){super(`Parsing failed: ${result.lexerErrors.map(err=>err.message).join("\n")} ${result.parserErrors.map(err=>err.message).join("\n")}`),this.result=result}static{__name2(this,"MermaidParseError")}}}});function populateCommonDb(ast,db7){ast.accDescr&&db7.setAccDescription?.(ast.accDescr),ast.accTitle&&db7.setAccTitle?.(ast.accTitle),ast.title&&db7.setDiagramTitle?.(ast.title)}var commitType,ImperativeState,DEFAULT_GITGRAPH_CONFIG,getConfig3,state2,setDirection,setOptions6,getOptions,commit,branch,merge4,cherryPick,checkout,prettyPrint,clear7,getBranchesAsObjArray,getCommitsArray,db,init_populateCommonDb=__esm({"src/diagrams/common/populateCommonDb.ts"(){__name(populateCommonDb,"populateCommonDb")}}),init_gitGraphTypes=__esm({"src/diagrams/git/gitGraphTypes.ts"(){commitType={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4}}}),init_imperativeState=__esm({"src/utils/imperativeState.ts"(){ImperativeState=class{constructor(init3){this.init=init3,this.records=this.init()}static{__name(this,"ImperativeState")}reset(){this.records=this.init()}}}});function getID(){return random({length:7})}function uniqBy2(list,fn3){const recordMap=Object.create(null);return list.reduce((out,item)=>{const key=fn3(item);return recordMap[key]||(recordMap[key]=!0,out.push(item)),out},[])}function upsert(arr,key,newVal){const index=arr.indexOf(key);-1===index?arr.push(newVal):arr.splice(index,1,newVal)}function prettyPrintCommitHistory(commitArr){const commit2=commitArr.reduce((out,commit3)=>out.seq>commit3.seq?out:commit3,commitArr[0]);let line2="";commitArr.forEach(function(c3){line2+=c3===commit2?"\t*":"\t|"});const label=[line2,commit2.id,commit2.seq];for(const branch2 in state2.records.branches)state2.records.branches.get(branch2)===commit2.id&&label.push(branch2);if(log.debug(label.join(" ")),commit2.parents&&2==commit2.parents.length&&commit2.parents[0]&&commit2.parents[1]){const newCommit=state2.records.commits.get(commit2.parents[0]);upsert(commitArr,commit2,newCommit),commit2.parents[1]&&commitArr.push(state2.records.commits.get(commit2.parents[1]))}else{if(0==commit2.parents.length)return;if(commit2.parents[0]){const newCommit=state2.records.commits.get(commit2.parents[0]);upsert(commitArr,commit2,newCommit)}}prettyPrintCommitHistory(commitArr=uniqBy2(commitArr,c3=>c3.id))}var populate15,parseStatement,parseCommit,parseBranch,parseMerge,parseCheckout,parseCherryPicking,parser4,DEFAULT_CONFIG,DEFAULT_GITGRAPH_CONFIG2,branchPos,commitPos,allCommitsDict,lanes,maxPos,dir,clear8,drawText2,findClosestParent,findClosestParentBT,setParallelBTPos,findClosestParentPos,calculateCommitPosition,setCommitPosition,setRootPosition,drawCommitBullet,drawCommitLabel,drawCommitTags,getCommitClassType,calculatePosition,getCommitPosition,drawCommits,shouldRerouteArrow,findLane,drawArrow,drawArrows,drawBranches,setBranchPosition,gitGraphRenderer_default,getStyles5,styles_default5,diagram4,init_gitGraphAst=__esm({"src/diagrams/git/gitGraphAst.ts"(){init_logger(),init_utils2(),init_config(),init_common(),init_commonDb(),init_gitGraphTypes(),init_imperativeState(),init_defaultConfig(),DEFAULT_GITGRAPH_CONFIG=defaultConfig_default.gitGraph,getConfig3=__name(()=>cleanAndMerge({...DEFAULT_GITGRAPH_CONFIG,...getConfig().gitGraph}),"getConfig"),state2=new ImperativeState(()=>{const config5=getConfig3(),mainBranchName=config5.mainBranchName,mainBranchOrder=config5.mainBranchOrder;return{mainBranchName:mainBranchName,commits:new Map,head:null,branchConfig:new Map([[mainBranchName,{name:mainBranchName,order:mainBranchOrder}]]),branches:new Map([[mainBranchName,null]]),currBranch:mainBranchName,direction:"LR",seq:0,options:{}}}),__name(getID,"getID"),__name(uniqBy2,"uniqBy"),setDirection=__name(function(dir2){state2.records.direction=dir2},"setDirection"),setOptions6=__name(function(rawOptString){log.debug("options str",rawOptString),rawOptString=rawOptString?.trim(),rawOptString=rawOptString||"{}";try{state2.records.options=JSON.parse(rawOptString)}catch(e3){log.error("error while parsing gitGraph options",e3.message)}},"setOptions"),getOptions=__name(function(){return state2.records.options},"getOptions"),commit=__name(function(commitDB){let msg=commitDB.msg,id30=commitDB.id;const type3=commitDB.type;let tags2=commitDB.tags;log.info("commit",msg,id30,type3,tags2),log.debug("Entering commit:",msg,id30,type3,tags2);const config5=getConfig3();id30=common_default.sanitizeText(id30,config5),msg=common_default.sanitizeText(msg,config5),tags2=tags2?.map(tag=>common_default.sanitizeText(tag,config5));const newCommit={id:id30||state2.records.seq+"-"+getID(),message:msg,seq:state2.records.seq++,type:type3??commitType.NORMAL,tags:tags2??[],parents:null==state2.records.head?[]:[state2.records.head.id],branch:state2.records.currBranch};state2.records.head=newCommit,log.info("main branch",config5.mainBranchName),state2.records.commits.has(newCommit.id)&&log.warn(`Commit ID ${newCommit.id} already exists`),state2.records.commits.set(newCommit.id,newCommit),state2.records.branches.set(state2.records.currBranch,newCommit.id),log.debug("in pushCommit "+newCommit.id)},"commit"),branch=__name(function(branchDB){let name=branchDB.name;const order2=branchDB.order;if(name=common_default.sanitizeText(name,getConfig3()),state2.records.branches.has(name))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${name}")`);state2.records.branches.set(name,null!=state2.records.head?state2.records.head.id:null),state2.records.branchConfig.set(name,{name:name,order:order2}),checkout(name),log.debug("in createBranch")},"branch"),merge4=__name(mergeDB=>{let otherBranch=mergeDB.branch,customId=mergeDB.id;const overrideType=mergeDB.type,customTags=mergeDB.tags,config5=getConfig3();otherBranch=common_default.sanitizeText(otherBranch,config5),customId&&(customId=common_default.sanitizeText(customId,config5));const currentBranchCheck=state2.records.branches.get(state2.records.currBranch),otherBranchCheck=state2.records.branches.get(otherBranch),currentCommit=currentBranchCheck?state2.records.commits.get(currentBranchCheck):void 0,otherCommit=otherBranchCheck?state2.records.commits.get(otherBranchCheck):void 0;if(currentCommit&&otherCommit&&currentCommit.branch===otherBranch)throw new Error(`Cannot merge branch '${otherBranch}' into itself.`);if(state2.records.currBranch===otherBranch){const error3=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw error3.hash={text:`merge ${otherBranch}`,token:`merge ${otherBranch}`,expected:["branch abc"]},error3}if(void 0===currentCommit||!currentCommit){const error3=new Error(`Incorrect usage of "merge". Current branch (${state2.records.currBranch})has no commits`);throw error3.hash={text:`merge ${otherBranch}`,token:`merge ${otherBranch}`,expected:["commit"]},error3}if(!state2.records.branches.has(otherBranch)){const error3=new Error('Incorrect usage of "merge". Branch to be merged ('+otherBranch+") does not exist");throw error3.hash={text:`merge ${otherBranch}`,token:`merge ${otherBranch}`,expected:[`branch ${otherBranch}`]},error3}if(void 0===otherCommit||!otherCommit){const error3=new Error('Incorrect usage of "merge". Branch to be merged ('+otherBranch+") has no commits");throw error3.hash={text:`merge ${otherBranch}`,token:`merge ${otherBranch}`,expected:['"commit"']},error3}if(currentCommit===otherCommit){const error3=new Error('Incorrect usage of "merge". Both branches have same head');throw error3.hash={text:`merge ${otherBranch}`,token:`merge ${otherBranch}`,expected:["branch abc"]},error3}if(customId&&state2.records.commits.has(customId)){const error3=new Error('Incorrect usage of "merge". Commit with id:'+customId+" already exists, use different custom id");throw error3.hash={text:`merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(" ")}`,token:`merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(" ")}`,expected:[`merge ${otherBranch} ${customId}_UNIQUE ${overrideType} ${customTags?.join(" ")}`]},error3}const verifiedBranch=otherBranchCheck||"",commit2={id:customId||`${state2.records.seq}-${getID()}`,message:`merged branch ${otherBranch} into ${state2.records.currBranch}`,seq:state2.records.seq++,parents:null==state2.records.head?[]:[state2.records.head.id,verifiedBranch],branch:state2.records.currBranch,type:commitType.MERGE,customType:overrideType,customId:!!customId,tags:customTags??[]};state2.records.head=commit2,state2.records.commits.set(commit2.id,commit2),state2.records.branches.set(state2.records.currBranch,commit2.id),log.debug(state2.records.branches),log.debug("in mergeBranch")},"merge"),cherryPick=__name(function(cherryPickDB){let sourceId=cherryPickDB.id,targetId=cherryPickDB.targetId,tags2=cherryPickDB.tags,parentCommitId=cherryPickDB.parent;log.debug("Entering cherryPick:",sourceId,targetId,tags2);const config5=getConfig3();if(sourceId=common_default.sanitizeText(sourceId,config5),targetId=common_default.sanitizeText(targetId,config5),tags2=tags2?.map(tag=>common_default.sanitizeText(tag,config5)),parentCommitId=common_default.sanitizeText(parentCommitId,config5),!sourceId||!state2.records.commits.has(sourceId)){const error3=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw error3.hash={text:`cherryPick ${sourceId} ${targetId}`,token:`cherryPick ${sourceId} ${targetId}`,expected:["cherry-pick abc"]},error3}const sourceCommit=state2.records.commits.get(sourceId);if(void 0===sourceCommit||!sourceCommit)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(parentCommitId&&(!Array.isArray(sourceCommit.parents)||!sourceCommit.parents.includes(parentCommitId))){throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.")}const sourceCommitBranch=sourceCommit.branch;if(sourceCommit.type===commitType.MERGE&&!parentCommitId){throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.")}if(!targetId||!state2.records.commits.has(targetId)){if(sourceCommitBranch===state2.records.currBranch){const error3=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw error3.hash={text:`cherryPick ${sourceId} ${targetId}`,token:`cherryPick ${sourceId} ${targetId}`,expected:["cherry-pick abc"]},error3}const currentCommitId=state2.records.branches.get(state2.records.currBranch);if(void 0===currentCommitId||!currentCommitId){const error3=new Error(`Incorrect usage of "cherry-pick". Current branch (${state2.records.currBranch})has no commits`);throw error3.hash={text:`cherryPick ${sourceId} ${targetId}`,token:`cherryPick ${sourceId} ${targetId}`,expected:["cherry-pick abc"]},error3}const currentCommit=state2.records.commits.get(currentCommitId);if(void 0===currentCommit||!currentCommit){const error3=new Error(`Incorrect usage of "cherry-pick". Current branch (${state2.records.currBranch})has no commits`);throw error3.hash={text:`cherryPick ${sourceId} ${targetId}`,token:`cherryPick ${sourceId} ${targetId}`,expected:["cherry-pick abc"]},error3}const commit2={id:state2.records.seq+"-"+getID(),message:`cherry-picked ${sourceCommit?.message} into ${state2.records.currBranch}`,seq:state2.records.seq++,parents:null==state2.records.head?[]:[state2.records.head.id,sourceCommit.id],branch:state2.records.currBranch,type:commitType.CHERRY_PICK,tags:tags2?tags2.filter(Boolean):[`cherry-pick:${sourceCommit.id}${sourceCommit.type===commitType.MERGE?`|parent:${parentCommitId}`:""}`]};state2.records.head=commit2,state2.records.commits.set(commit2.id,commit2),state2.records.branches.set(state2.records.currBranch,commit2.id),log.debug(state2.records.branches),log.debug("in cherryPick")}},"cherryPick"),checkout=__name(function(branch2){if(branch2=common_default.sanitizeText(branch2,getConfig3()),!state2.records.branches.has(branch2)){const error3=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${branch2}")`);throw error3.hash={text:`checkout ${branch2}`,token:`checkout ${branch2}`,expected:[`branch ${branch2}`]},error3}{state2.records.currBranch=branch2;const id30=state2.records.branches.get(state2.records.currBranch);state2.records.head=void 0!==id30&&id30?state2.records.commits.get(id30)??null:null}},"checkout"),__name(upsert,"upsert"),__name(prettyPrintCommitHistory,"prettyPrintCommitHistory"),prettyPrint=__name(function(){log.debug(state2.records.commits);prettyPrintCommitHistory([getCommitsArray()[0]])},"prettyPrint"),clear7=__name(function(){state2.reset(),clear()},"clear"),getBranchesAsObjArray=__name(function(){const branchesArray=[...state2.records.branchConfig.values()].map((branchConfig,i2)=>null!==branchConfig.order&&void 0!==branchConfig.order?branchConfig:{...branchConfig,order:parseFloat(`0.${i2}`)}).sort((a2,b3)=>(a2.order??0)-(b3.order??0)).map(({name:name})=>({name:name}));return branchesArray},"getBranchesAsObjArray"),db={commitType:commitType,getConfig:getConfig3,setDirection:setDirection,setOptions:setOptions6,getOptions:getOptions,commit:commit,branch:branch,merge:merge4,cherryPick:cherryPick,checkout:checkout,prettyPrint:prettyPrint,clear:clear7,getBranchesAsObjArray:getBranchesAsObjArray,getBranches:__name(function(){return state2.records.branches},"getBranches"),getCommits:__name(function(){return state2.records.commits},"getCommits"),getCommitsArray:getCommitsArray=__name(function(){const commitArr=[...state2.records.commits.values()];return commitArr.forEach(function(o2){log.debug(o2.id)}),commitArr.sort((a2,b3)=>a2.seq-b3.seq),commitArr},"getCommitsArray"),getCurrentBranch:__name(function(){return state2.records.currBranch},"getCurrentBranch"),getDirection:__name(function(){return state2.records.direction},"getDirection"),getHead:__name(function(){return state2.records.head},"getHead"),setAccTitle:setAccTitle,getAccTitle:getAccTitle,getAccDescription:getAccDescription,setAccDescription:setAccDescription,setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle}}}),init_gitGraphParser=__esm({"src/diagrams/git/gitGraphParser.ts"(){init_mermaid_parser_core(),init_logger(),init_populateCommonDb(),init_gitGraphAst(),init_gitGraphTypes(),populate15=__name((ast,db7)=>{populateCommonDb(ast,db7),ast.dir&&db7.setDirection(ast.dir);for(const statement of ast.statements)parseStatement(statement,db7)},"populate"),parseStatement=__name((statement,db7)=>{const parser24={Commit:__name(stmt=>db7.commit(parseCommit(stmt)),"Commit"),Branch:__name(stmt=>db7.branch(parseBranch(stmt)),"Branch"),Merge:__name(stmt=>db7.merge(parseMerge(stmt)),"Merge"),Checkout:__name(stmt=>db7.checkout(parseCheckout(stmt)),"Checkout"),CherryPicking:__name(stmt=>db7.cherryPick(parseCherryPicking(stmt)),"CherryPicking")}[statement.$type];parser24?parser24(statement):log.error(`Unknown statement type: ${statement.$type}`)},"parseStatement"),parseCommit=__name(commit2=>({id:commit2.id,msg:commit2.message??"",type:void 0!==commit2.type?commitType[commit2.type]:commitType.NORMAL,tags:commit2.tags??void 0}),"parseCommit"),parseBranch=__name(branch2=>({name:branch2.name,order:branch2.order??0}),"parseBranch"),parseMerge=__name(merge5=>({branch:merge5.branch,id:merge5.id??"",type:void 0!==merge5.type?commitType[merge5.type]:void 0,tags:merge5.tags??void 0}),"parseMerge"),parseCheckout=__name(checkout2=>checkout2.branch,"parseCheckout"),parseCherryPicking=__name(cherryPicking=>({id:cherryPicking.id,targetId:"",tags:0===cherryPicking.tags?.length?void 0:cherryPicking.tags,parent:cherryPicking.parent}),"parseCherryPicking"),parser4={parse:__name(async input=>{const ast=await parse3("gitGraph",input);log.debug(ast),populate15(ast,db)},"parse")}}}),init_gitGraphRenderer=__esm({"src/diagrams/git/gitGraphRenderer.ts"(){init_src32(),init_diagramAPI(),init_logger(),init_utils2(),init_gitGraphTypes(),DEFAULT_CONFIG=getConfig2(),DEFAULT_GITGRAPH_CONFIG2=DEFAULT_CONFIG?.gitGraph,branchPos=new Map,commitPos=new Map,allCommitsDict=new Map,lanes=[],maxPos=0,dir="LR",clear8=__name(()=>{branchPos.clear(),commitPos.clear(),allCommitsDict.clear(),maxPos=0,lanes=[],dir="LR"},"clear"),drawText2=__name(txt=>{const svgLabel=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof txt?txt.split(/\\n|\n|<br\s*\/?>/gi):txt).forEach(row=>{const tspan=document.createElementNS("http://www.w3.org/2000/svg","tspan");tspan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),tspan.setAttribute("dy","1em"),tspan.setAttribute("x","0"),tspan.setAttribute("class","row"),tspan.textContent=row.trim(),svgLabel.appendChild(tspan)}),svgLabel},"drawText"),findClosestParent=__name(parents3=>{let closestParent,comparisonFunc,targetPosition;return"BT"===dir?(comparisonFunc=__name((a2,b3)=>a2<=b3,"comparisonFunc"),targetPosition=1/0):(comparisonFunc=__name((a2,b3)=>a2>=b3,"comparisonFunc"),targetPosition=0),parents3.forEach(parent4=>{const parentPosition="TB"===dir||"BT"==dir?commitPos.get(parent4)?.y:commitPos.get(parent4)?.x;void 0!==parentPosition&&comparisonFunc(parentPosition,targetPosition)&&(closestParent=parent4,targetPosition=parentPosition)}),closestParent},"findClosestParent"),findClosestParentBT=__name(parents3=>{let closestParent="",maxPosition=1/0;return parents3.forEach(parent4=>{const parentPosition=commitPos.get(parent4).y;parentPosition<=maxPosition&&(closestParent=parent4,maxPosition=parentPosition)}),closestParent||void 0},"findClosestParentBT"),setParallelBTPos=__name((sortedKeys,commits,defaultPos2)=>{let curPos=defaultPos2,maxPosition=defaultPos2;const roots=[];sortedKeys.forEach(key=>{const commit2=commits.get(key);if(!commit2)throw new Error(`Commit not found for key ${key}`);commit2.parents.length?(curPos=calculateCommitPosition(commit2),maxPosition=Math.max(curPos,maxPosition)):roots.push(commit2),setCommitPosition(commit2,curPos)}),curPos=maxPosition,roots.forEach(commit2=>{setRootPosition(commit2,curPos,defaultPos2)}),sortedKeys.forEach(key=>{const commit2=commits.get(key);if(commit2?.parents.length){const closestParent=findClosestParentBT(commit2.parents);curPos=commitPos.get(closestParent).y-40,curPos<=maxPosition&&(maxPosition=curPos);const x5=branchPos.get(commit2.branch).pos,y6=curPos-10;commitPos.set(commit2.id,{x:x5,y:y6})}})},"setParallelBTPos"),findClosestParentPos=__name(commit2=>{const closestParent=findClosestParent(commit2.parents.filter(p3=>null!==p3));if(!closestParent)throw new Error(`Closest parent not found for commit ${commit2.id}`);const closestParentPos=commitPos.get(closestParent)?.y;if(void 0===closestParentPos)throw new Error(`Closest parent position not found for commit ${commit2.id}`);return closestParentPos},"findClosestParentPos"),calculateCommitPosition=__name(commit2=>findClosestParentPos(commit2)+40,"calculateCommitPosition"),setCommitPosition=__name((commit2,curPos)=>{const branch2=branchPos.get(commit2.branch);if(!branch2)throw new Error(`Branch not found for commit ${commit2.id}`);const x5=branch2.pos,y6=curPos+10;return commitPos.set(commit2.id,{x:x5,y:y6}),{x:x5,y:y6}},"setCommitPosition"),setRootPosition=__name((commit2,curPos,defaultPos2)=>{const branch2=branchPos.get(commit2.branch);if(!branch2)throw new Error(`Branch not found for commit ${commit2.id}`);const y6=curPos+defaultPos2,x5=branch2.pos;commitPos.set(commit2.id,{x:x5,y:y6})},"setRootPosition"),drawCommitBullet=__name((gBullets,commit2,commitPosition,typeClass,branchIndex,commitSymbolType)=>{if(commitSymbolType===commitType.HIGHLIGHT)gBullets.append("rect").attr("x",commitPosition.x-10).attr("y",commitPosition.y-10).attr("width",20).attr("height",20).attr("class",`commit ${commit2.id} commit-highlight${branchIndex%8} ${typeClass}-outer`),gBullets.append("rect").attr("x",commitPosition.x-6).attr("y",commitPosition.y-6).attr("width",12).attr("height",12).attr("class",`commit ${commit2.id} commit${branchIndex%8} ${typeClass}-inner`);else if(commitSymbolType===commitType.CHERRY_PICK)gBullets.append("circle").attr("cx",commitPosition.x).attr("cy",commitPosition.y).attr("r",10).attr("class",`commit ${commit2.id} ${typeClass}`),gBullets.append("circle").attr("cx",commitPosition.x-3).attr("cy",commitPosition.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${commit2.id} ${typeClass}`),gBullets.append("circle").attr("cx",commitPosition.x+3).attr("cy",commitPosition.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${commit2.id} ${typeClass}`),gBullets.append("line").attr("x1",commitPosition.x+3).attr("y1",commitPosition.y+1).attr("x2",commitPosition.x).attr("y2",commitPosition.y-5).attr("stroke","#fff").attr("class",`commit ${commit2.id} ${typeClass}`),gBullets.append("line").attr("x1",commitPosition.x-3).attr("y1",commitPosition.y+1).attr("x2",commitPosition.x).attr("y2",commitPosition.y-5).attr("stroke","#fff").attr("class",`commit ${commit2.id} ${typeClass}`);else{const circle6=gBullets.append("circle");if(circle6.attr("cx",commitPosition.x),circle6.attr("cy",commitPosition.y),circle6.attr("r",commit2.type===commitType.MERGE?9:10),circle6.attr("class",`commit ${commit2.id} commit${branchIndex%8}`),commitSymbolType===commitType.MERGE){const circle22=gBullets.append("circle");circle22.attr("cx",commitPosition.x),circle22.attr("cy",commitPosition.y),circle22.attr("r",6),circle22.attr("class",`commit ${typeClass} ${commit2.id} commit${branchIndex%8}`)}if(commitSymbolType===commitType.REVERSE){gBullets.append("path").attr("d",`M ${commitPosition.x-5},${commitPosition.y-5}L${commitPosition.x+5},${commitPosition.y+5}M${commitPosition.x-5},${commitPosition.y+5}L${commitPosition.x+5},${commitPosition.y-5}`).attr("class",`commit ${typeClass} ${commit2.id} commit${branchIndex%8}`)}}},"drawCommitBullet"),drawCommitLabel=__name((gLabels,commit2,commitPosition,pos)=>{if(commit2.type!==commitType.CHERRY_PICK&&(commit2.customId&&commit2.type===commitType.MERGE||commit2.type!==commitType.MERGE)&&DEFAULT_GITGRAPH_CONFIG2?.showCommitLabel){const wrapper=gLabels.append("g"),labelBkg=wrapper.insert("rect").attr("class","commit-label-bkg"),text4=wrapper.append("text").attr("x",pos).attr("y",commitPosition.y+25).attr("class","commit-label").text(commit2.id),bbox=text4.node()?.getBBox();if(bbox&&(labelBkg.attr("x",commitPosition.posWithOffset-bbox.width/2-2).attr("y",commitPosition.y+13.5).attr("width",bbox.width+4).attr("height",bbox.height+4),"TB"===dir||"BT"===dir?(labelBkg.attr("x",commitPosition.x-(bbox.width+16+5)).attr("y",commitPosition.y-12),text4.attr("x",commitPosition.x-(bbox.width+16)).attr("y",commitPosition.y+bbox.height-12)):text4.attr("x",commitPosition.posWithOffset-bbox.width/2),DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel))if("TB"===dir||"BT"===dir)text4.attr("transform","rotate(-45, "+commitPosition.x+", "+commitPosition.y+")"),labelBkg.attr("transform","rotate(-45, "+commitPosition.x+", "+commitPosition.y+")");else{const r_x=-7.5-(bbox.width+10)/25*9.5,r_y=10+bbox.width/25*8.5;wrapper.attr("transform","translate("+r_x+", "+r_y+") rotate(-45, "+pos+", "+commitPosition.y+")")}}},"drawCommitLabel"),drawCommitTags=__name((gLabels,commit2,commitPosition,pos)=>{if(commit2.tags.length>0){let yOffset=0,maxTagBboxWidth=0,maxTagBboxHeight=0;const tagElements=[];for(const tagValue of commit2.tags.reverse()){const rect3=gLabels.insert("polygon"),hole=gLabels.append("circle"),tag=gLabels.append("text").attr("y",commitPosition.y-16-yOffset).attr("class","tag-label").text(tagValue),tagBbox=tag.node()?.getBBox();if(!tagBbox)throw new Error("Tag bbox not found");maxTagBboxWidth=Math.max(maxTagBboxWidth,tagBbox.width),maxTagBboxHeight=Math.max(maxTagBboxHeight,tagBbox.height),tag.attr("x",commitPosition.posWithOffset-tagBbox.width/2),tagElements.push({tag:tag,hole:hole,rect:rect3,yOffset:yOffset}),yOffset+=20}for(const{tag:tag,hole:hole,rect:rect3,yOffset:yOffset2}of tagElements){const h22=maxTagBboxHeight/2,ly=commitPosition.y-19.2-yOffset2;if(rect3.attr("class","tag-label-bkg").attr("points",`\n      ${pos-maxTagBboxWidth/2-2},${ly+2}  \n      ${pos-maxTagBboxWidth/2-2},${ly-2}\n      ${commitPosition.posWithOffset-maxTagBboxWidth/2-4},${ly-h22-2}\n      ${commitPosition.posWithOffset+maxTagBboxWidth/2+4},${ly-h22-2}\n      ${commitPosition.posWithOffset+maxTagBboxWidth/2+4},${ly+h22+2}\n      ${commitPosition.posWithOffset-maxTagBboxWidth/2-4},${ly+h22+2}`),hole.attr("cy",ly).attr("cx",pos-maxTagBboxWidth/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===dir||"BT"===dir){const yOrigin=pos+yOffset2;rect3.attr("class","tag-label-bkg").attr("points",`\n        ${commitPosition.x},${yOrigin+2}\n        ${commitPosition.x},${yOrigin-2}\n        ${commitPosition.x+10},${yOrigin-h22-2}\n        ${commitPosition.x+10+maxTagBboxWidth+4},${yOrigin-h22-2}\n        ${commitPosition.x+10+maxTagBboxWidth+4},${yOrigin+h22+2}\n        ${commitPosition.x+10},${yOrigin+h22+2}`).attr("transform","translate(12,12) rotate(45, "+commitPosition.x+","+pos+")"),hole.attr("cx",commitPosition.x+2).attr("cy",yOrigin).attr("transform","translate(12,12) rotate(45, "+commitPosition.x+","+pos+")"),tag.attr("x",commitPosition.x+5).attr("y",yOrigin+3).attr("transform","translate(14,14) rotate(45, "+commitPosition.x+","+pos+")")}}}},"drawCommitTags"),getCommitClassType=__name(commit2=>{switch(commit2.customType??commit2.type){case commitType.NORMAL:return"commit-normal";case commitType.REVERSE:return"commit-reverse";case commitType.HIGHLIGHT:return"commit-highlight";case commitType.MERGE:return"commit-merge";case commitType.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),calculatePosition=__name((commit2,dir2,pos,commitPos2)=>{const defaultCommitPosition={x:0,y:0};if(!(commit2.parents.length>0)){if("TB"===dir2)return 30;if("BT"===dir2){return(commitPos2.get(commit2.id)??defaultCommitPosition).y-40}return 0}{const closestParent=findClosestParent(commit2.parents);if(closestParent){const parentPosition=commitPos2.get(closestParent)??defaultCommitPosition;if("TB"===dir2)return parentPosition.y+40;if("BT"===dir2){return(commitPos2.get(commit2.id)??defaultCommitPosition).y-40}return parentPosition.x+40}}return 0},"calculatePosition"),getCommitPosition=__name((commit2,pos,isParallelCommits)=>{const posWithOffset="BT"===dir&&isParallelCommits?pos:pos+10,y6="TB"===dir||"BT"===dir?posWithOffset:branchPos.get(commit2.branch)?.pos,x5="TB"===dir||"BT"===dir?branchPos.get(commit2.branch)?.pos:posWithOffset;if(void 0===x5||void 0===y6)throw new Error(`Position were undefined for commit ${commit2.id}`);return{x:x5,y:y6,posWithOffset:posWithOffset}},"getCommitPosition"),drawCommits=__name((svg2,commits,modifyGraph)=>{if(!DEFAULT_GITGRAPH_CONFIG2)throw new Error("GitGraph config not found");const gBullets=svg2.append("g").attr("class","commit-bullets"),gLabels=svg2.append("g").attr("class","commit-labels");let pos="TB"===dir||"BT"===dir?30:0;const keys2=[...commits.keys()],isParallelCommits=DEFAULT_GITGRAPH_CONFIG2?.parallelCommits??!1,sortKeys=__name((a2,b3)=>{const seqA=commits.get(a2)?.seq,seqB=commits.get(b3)?.seq;return void 0!==seqA&&void 0!==seqB?seqA-seqB:0},"sortKeys");let sortedKeys=keys2.sort(sortKeys);"BT"===dir&&(isParallelCommits&&setParallelBTPos(sortedKeys,commits,pos),sortedKeys=sortedKeys.reverse()),sortedKeys.forEach(key=>{const commit2=commits.get(key);if(!commit2)throw new Error(`Commit not found for key ${key}`);isParallelCommits&&(pos=calculatePosition(commit2,dir,pos,commitPos));const commitPosition=getCommitPosition(commit2,pos,isParallelCommits);if(modifyGraph){const typeClass=getCommitClassType(commit2),commitSymbolType=commit2.customType??commit2.type,branchIndex=branchPos.get(commit2.branch)?.index??0;drawCommitBullet(gBullets,commit2,commitPosition,typeClass,branchIndex,commitSymbolType),drawCommitLabel(gLabels,commit2,commitPosition,pos),drawCommitTags(gLabels,commit2,commitPosition,pos)}"TB"===dir||"BT"===dir?commitPos.set(commit2.id,{x:commitPosition.x,y:commitPosition.posWithOffset}):commitPos.set(commit2.id,{x:commitPosition.posWithOffset,y:commitPosition.y}),pos="BT"===dir&&isParallelCommits?pos+40:pos+40+10,pos>maxPos&&(maxPos=pos)})},"drawCommits"),shouldRerouteArrow=__name((commitA,commitB,p1,p22,allCommits)=>{const branchToGetCurve=("TB"===dir||"BT"===dir?p1.x<p22.x:p1.y<p22.y)?commitB.branch:commitA.branch,isOnBranchToGetCurve=__name(x5=>x5.branch===branchToGetCurve,"isOnBranchToGetCurve"),isBetweenCommits=__name(x5=>x5.seq>commitA.seq&&x5.seq<commitB.seq,"isBetweenCommits");return[...allCommits.values()].some(commitX=>isBetweenCommits(commitX)&&isOnBranchToGetCurve(commitX))},"shouldRerouteArrow"),findLane=__name((y1,y22,depth=0)=>{const candidate=y1+Math.abs(y1-y22)/2;if(depth>5)return candidate;if(lanes.every(lane=>Math.abs(lane-candidate)>=10))return lanes.push(candidate),candidate;const diff2=Math.abs(y1-y22);return findLane(y1,y22-diff2/5,depth+1)},"findLane"),drawArrow=__name((svg2,commitA,commitB,allCommits)=>{const p1=commitPos.get(commitA.id),p22=commitPos.get(commitB.id);if(void 0===p1||void 0===p22)throw new Error(`Commit positions not found for commits ${commitA.id} and ${commitB.id}`);const arrowNeedsRerouting=shouldRerouteArrow(commitA,commitB,p1,p22,allCommits);let lineDef,arc="",arc2="",radius2=0,offset=0,colorClassNum=branchPos.get(commitB.branch)?.index;if(commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]&&(colorClassNum=branchPos.get(commitA.branch)?.index),arrowNeedsRerouting){arc="A 10 10, 0, 0, 0,",arc2="A 10 10, 0, 0, 1,",radius2=10,offset=10;const lineY=p1.y<p22.y?findLane(p1.y,p22.y):findLane(p22.y,p1.y),lineX=p1.x<p22.x?findLane(p1.x,p22.x):findLane(p22.x,p1.x);"TB"===dir?p1.x<p22.x?lineDef=`M ${p1.x} ${p1.y} L ${lineX-radius2} ${p1.y} ${arc2} ${lineX} ${p1.y+offset} L ${lineX} ${p22.y-radius2} ${arc} ${lineX+offset} ${p22.y} L ${p22.x} ${p22.y}`:(colorClassNum=branchPos.get(commitA.branch)?.index,lineDef=`M ${p1.x} ${p1.y} L ${lineX+radius2} ${p1.y} ${arc} ${lineX} ${p1.y+offset} L ${lineX} ${p22.y-radius2} ${arc2} ${lineX-offset} ${p22.y} L ${p22.x} ${p22.y}`):"BT"===dir?p1.x<p22.x?lineDef=`M ${p1.x} ${p1.y} L ${lineX-radius2} ${p1.y} ${arc} ${lineX} ${p1.y-offset} L ${lineX} ${p22.y+radius2} ${arc2} ${lineX+offset} ${p22.y} L ${p22.x} ${p22.y}`:(colorClassNum=branchPos.get(commitA.branch)?.index,lineDef=`M ${p1.x} ${p1.y} L ${lineX+radius2} ${p1.y} ${arc2} ${lineX} ${p1.y-offset} L ${lineX} ${p22.y+radius2} ${arc} ${lineX-offset} ${p22.y} L ${p22.x} ${p22.y}`):p1.y<p22.y?lineDef=`M ${p1.x} ${p1.y} L ${p1.x} ${lineY-radius2} ${arc} ${p1.x+offset} ${lineY} L ${p22.x-radius2} ${lineY} ${arc2} ${p22.x} ${lineY+offset} L ${p22.x} ${p22.y}`:(colorClassNum=branchPos.get(commitA.branch)?.index,lineDef=`M ${p1.x} ${p1.y} L ${p1.x} ${lineY+radius2} ${arc2} ${p1.x+offset} ${lineY} L ${p22.x-radius2} ${lineY} ${arc} ${p22.x} ${lineY-offset} L ${p22.x} ${p22.y}`)}else arc="A 20 20, 0, 0, 0,",arc2="A 20 20, 0, 0, 1,",radius2=20,offset=20,"TB"===dir?(p1.x<p22.x&&(lineDef=commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]?`M ${p1.x} ${p1.y} L ${p1.x} ${p22.y-radius2} ${arc} ${p1.x+offset} ${p22.y} L ${p22.x} ${p22.y}`:`M ${p1.x} ${p1.y} L ${p22.x-radius2} ${p1.y} ${arc2} ${p22.x} ${p1.y+offset} L ${p22.x} ${p22.y}`),p1.x>p22.x&&(arc="A 20 20, 0, 0, 0,",arc2="A 20 20, 0, 0, 1,",radius2=20,offset=20,lineDef=commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]?`M ${p1.x} ${p1.y} L ${p1.x} ${p22.y-radius2} ${arc2} ${p1.x-offset} ${p22.y} L ${p22.x} ${p22.y}`:`M ${p1.x} ${p1.y} L ${p22.x+radius2} ${p1.y} ${arc} ${p22.x} ${p1.y+offset} L ${p22.x} ${p22.y}`),p1.x===p22.x&&(lineDef=`M ${p1.x} ${p1.y} L ${p22.x} ${p22.y}`)):"BT"===dir?(p1.x<p22.x&&(lineDef=commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]?`M ${p1.x} ${p1.y} L ${p1.x} ${p22.y+radius2} ${arc2} ${p1.x+offset} ${p22.y} L ${p22.x} ${p22.y}`:`M ${p1.x} ${p1.y} L ${p22.x-radius2} ${p1.y} ${arc} ${p22.x} ${p1.y-offset} L ${p22.x} ${p22.y}`),p1.x>p22.x&&(arc="A 20 20, 0, 0, 0,",arc2="A 20 20, 0, 0, 1,",radius2=20,offset=20,lineDef=commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]?`M ${p1.x} ${p1.y} L ${p1.x} ${p22.y+radius2} ${arc} ${p1.x-offset} ${p22.y} L ${p22.x} ${p22.y}`:`M ${p1.x} ${p1.y} L ${p22.x-radius2} ${p1.y} ${arc} ${p22.x} ${p1.y-offset} L ${p22.x} ${p22.y}`),p1.x===p22.x&&(lineDef=`M ${p1.x} ${p1.y} L ${p22.x} ${p22.y}`)):(p1.y<p22.y&&(lineDef=commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]?`M ${p1.x} ${p1.y} L ${p22.x-radius2} ${p1.y} ${arc2} ${p22.x} ${p1.y+offset} L ${p22.x} ${p22.y}`:`M ${p1.x} ${p1.y} L ${p1.x} ${p22.y-radius2} ${arc} ${p1.x+offset} ${p22.y} L ${p22.x} ${p22.y}`),p1.y>p22.y&&(lineDef=commitB.type===commitType.MERGE&&commitA.id!==commitB.parents[0]?`M ${p1.x} ${p1.y} L ${p22.x-radius2} ${p1.y} ${arc} ${p22.x} ${p1.y-offset} L ${p22.x} ${p22.y}`:`M ${p1.x} ${p1.y} L ${p1.x} ${p22.y+radius2} ${arc2} ${p1.x+offset} ${p22.y} L ${p22.x} ${p22.y}`),p1.y===p22.y&&(lineDef=`M ${p1.x} ${p1.y} L ${p22.x} ${p22.y}`));if(void 0===lineDef)throw new Error("Line definition not found");svg2.append("path").attr("d",lineDef).attr("class","arrow arrow"+colorClassNum%8)},"drawArrow"),drawArrows=__name((svg2,commits)=>{const gArrows=svg2.append("g").attr("class","commit-arrows");[...commits.keys()].forEach(key=>{const commit2=commits.get(key);commit2.parents&&commit2.parents.length>0&&commit2.parents.forEach(parent4=>{drawArrow(gArrows,commits.get(parent4),commit2,commits)})})},"drawArrows"),drawBranches=__name((svg2,branches)=>{const g2=svg2.append("g");branches.forEach((branch2,index)=>{const adjustIndexForTheme=index%8,pos=branchPos.get(branch2.name)?.pos;if(void 0===pos)throw new Error(`Position not found for branch ${branch2.name}`);const line2=g2.append("line");line2.attr("x1",0),line2.attr("y1",pos),line2.attr("x2",maxPos),line2.attr("y2",pos),line2.attr("class","branch branch"+adjustIndexForTheme),"TB"===dir?(line2.attr("y1",30),line2.attr("x1",pos),line2.attr("y2",maxPos),line2.attr("x2",pos)):"BT"===dir&&(line2.attr("y1",maxPos),line2.attr("x1",pos),line2.attr("y2",30),line2.attr("x2",pos)),lanes.push(pos);const name=branch2.name,labelElement=drawText2(name),bkg=g2.insert("rect"),label=g2.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+adjustIndexForTheme);label.node().appendChild(labelElement);const bbox=labelElement.getBBox();bkg.attr("class","branchLabelBkg label"+adjustIndexForTheme).attr("rx",4).attr("ry",4).attr("x",-bbox.width-4-(!0===DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel?30:0)).attr("y",-bbox.height/2+8).attr("width",bbox.width+18).attr("height",bbox.height+4),label.attr("transform","translate("+(-bbox.width-14-(!0===DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel?30:0))+", "+(pos-bbox.height/2-1)+")"),"TB"===dir?(bkg.attr("x",pos-bbox.width/2-10).attr("y",0),label.attr("transform","translate("+(pos-bbox.width/2-5)+", 0)")):"BT"===dir?(bkg.attr("x",pos-bbox.width/2-10).attr("y",maxPos),label.attr("transform","translate("+(pos-bbox.width/2-5)+", "+maxPos+")")):bkg.attr("transform","translate(-19, "+(pos-bbox.height/2)+")")})},"drawBranches"),setBranchPosition=__name(function(name,pos,index,bbox,rotateCommitLabel){return branchPos.set(name,{pos:pos,index:index}),pos+=50+(rotateCommitLabel?40:0)+("TB"===dir||"BT"===dir?bbox.width/2:0)},"setBranchPosition"),gitGraphRenderer_default={draw:__name(function(txt,id30,ver,diagObj){if(clear8(),log.debug("in gitgraph renderer",txt+"\n","id:",id30,ver),!DEFAULT_GITGRAPH_CONFIG2)throw new Error("GitGraph config not found");const rotateCommitLabel=DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel??!1,db7=diagObj.db;allCommitsDict=db7.getCommits();const branches=db7.getBranchesAsObjArray();dir=db7.getDirection();const diagram27=select_default2(`[id="${id30}"]`);let pos=0;branches.forEach((branch2,index)=>{const labelElement=drawText2(branch2.name),g2=diagram27.append("g"),branchLabel=g2.insert("g").attr("class","branchLabel"),label=branchLabel.insert("g").attr("class","label branch-label");label.node()?.appendChild(labelElement);const bbox=labelElement.getBBox();pos=setBranchPosition(branch2.name,pos,index,bbox,rotateCommitLabel),label.remove(),branchLabel.remove(),g2.remove()}),drawCommits(diagram27,allCommitsDict,!1),DEFAULT_GITGRAPH_CONFIG2.showBranches&&drawBranches(diagram27,branches),drawArrows(diagram27,allCommitsDict),drawCommits(diagram27,allCommitsDict,!0),utils_default2.insertTitle(diagram27,"gitTitleText",DEFAULT_GITGRAPH_CONFIG2.titleTopMargin??0,db7.getDiagramTitle()),setupGraphViewbox2(void 0,diagram27,DEFAULT_GITGRAPH_CONFIG2.diagramPadding,DEFAULT_GITGRAPH_CONFIG2.useMaxWidth)},"draw")}}}),init_styles5=__esm({"src/diagrams/git/styles.js"(){getStyles5=__name(options2=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map(i2=>`\n        .branch-label${i2} { fill: ${options2["gitBranchLabel"+i2]}; }\n        .commit${i2} { stroke: ${options2["git"+i2]}; fill: ${options2["git"+i2]}; }\n        .commit-highlight${i2} { stroke: ${options2["gitInv"+i2]}; fill: ${options2["gitInv"+i2]}; }\n        .label${i2}  { fill: ${options2["git"+i2]}; }\n        .arrow${i2} { stroke: ${options2["git"+i2]}; }\n        `).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${options2.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${options2.commitLabelFontSize}; fill: ${options2.commitLabelColor};}\n  .commit-label-bkg { font-size: ${options2.commitLabelFontSize}; fill: ${options2.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${options2.tagLabelFontSize}; fill: ${options2.tagLabelColor};}\n  .tag-label-bkg { fill: ${options2.tagLabelBackground}; stroke: ${options2.tagLabelBorder}; }\n  .tag-hole { fill: ${options2.textColor}; }\n\n  .commit-merge {\n    stroke: ${options2.primaryColor};\n    fill: ${options2.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${options2.primaryColor};\n    fill: ${options2.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${options2.primaryColor};\n    fill: ${options2.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options2.textColor};\n  }\n`,"getStyles"),styles_default5=getStyles5}}),gitGraphDiagram_exports={};__export(gitGraphDiagram_exports,{diagram:()=>diagram4});var parser5,gantt_default,import_sanitize_url4,import_dayjs2,import_isoWeek,import_customParseFormat,import_advancedFormat,WEEKEND_START_DAY,dateFormat,axisFormat,tickInterval,todayMarker,includes2,excludes,links,sections,tasks,currentSection,displayMode,tags,funs,inclusiveEndDates,topAxis,weekday,weekend,lastOrder,clear9,setAxisFormat,getAxisFormat,setTickInterval,getTickInterval,setTodayMarker,getTodayMarker,setDateFormat,enableInclusiveEndDates,endDatesAreInclusive,enableTopAxis,topAxisEnabled,setDisplayMode,getDisplayMode,getDateFormat,setIncludes,getIncludes,setExcludes,getExcludes,getLinks,addSection,getSections,getTasks,isInvalidDate,setWeekday,getWeekday,setWeekend,checkTaskDates,fixTaskDates,getStartDate,parseDuration,getEndDate,taskCnt,parseId,compileData,parseData,lastTask,lastTaskID,rawTasks,taskDb,addTask,findTaskById,addTaskOrg,compileTasks,setLink,setClass,setClickFun,pushFun,setClickEvent,bindFunctions,ganttDb_default,init_gitGraphDiagram=__esm({"src/diagrams/git/gitGraphDiagram.ts"(){init_gitGraphParser(),init_gitGraphAst(),init_gitGraphRenderer(),init_styles5(),diagram4={parser:parser4,db:db,renderer:gitGraphRenderer_default,styles:styles_default5}}}),init_gantt=__esm({"src/diagrams/gantt/parser/gantt.jison"(){parser5=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],$V1=[1,26],$V2=[1,27],$V3=[1,28],$V4=[1,29],$V5=[1,30],$V6=[1,31],$V7=[1,32],$V8=[1,33],$V9=[1,34],$Va=[1,9],$Vb=[1,10],$Vc=[1,11],$Vd=[1,12],$Ve=[1,13],$Vf=[1,14],$Vg=[1,15],$Vh=[1,16],$Vi=[1,19],$Vj=[1,20],$Vk=[1,21],$Vl=[1,22],$Vm=[1,23],$Vn=[1,25],$Vo=[1,35],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:case 6:case 7:this.$=[];break;case 3:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 4:case 5:this.$=$$[$0];break;case 8:yy.setWeekday("monday");break;case 9:yy.setWeekday("tuesday");break;case 10:yy.setWeekday("wednesday");break;case 11:yy.setWeekday("thursday");break;case 12:yy.setWeekday("friday");break;case 13:yy.setWeekday("saturday");break;case 14:yy.setWeekday("sunday");break;case 15:yy.setWeekend("friday");break;case 16:yy.setWeekend("saturday");break;case 17:yy.setDateFormat($$[$0].substr(11)),this.$=$$[$0].substr(11);break;case 18:yy.enableInclusiveEndDates(),this.$=$$[$0].substr(18);break;case 19:yy.TopAxis(),this.$=$$[$0].substr(8);break;case 20:yy.setAxisFormat($$[$0].substr(11)),this.$=$$[$0].substr(11);break;case 21:yy.setTickInterval($$[$0].substr(13)),this.$=$$[$0].substr(13);break;case 22:yy.setExcludes($$[$0].substr(9)),this.$=$$[$0].substr(9);break;case 23:yy.setIncludes($$[$0].substr(9)),this.$=$$[$0].substr(9);break;case 24:yy.setTodayMarker($$[$0].substr(12)),this.$=$$[$0].substr(12);break;case 27:yy.setDiagramTitle($$[$0].substr(6)),this.$=$$[$0].substr(6);break;case 28:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 29:case 30:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 31:yy.addSection($$[$0].substr(8)),this.$=$$[$0].substr(8);break;case 33:yy.addTask($$[$0-1],$$[$0]),this.$="task";break;case 34:this.$=$$[$0-1],yy.setClickEvent($$[$0-1],$$[$0],null);break;case 35:this.$=$$[$0-2],yy.setClickEvent($$[$0-2],$$[$0-1],$$[$0]);break;case 36:this.$=$$[$0-2],yy.setClickEvent($$[$0-2],$$[$0-1],null),yy.setLink($$[$0-2],$$[$0]);break;case 37:this.$=$$[$0-3],yy.setClickEvent($$[$0-3],$$[$0-2],$$[$0-1]),yy.setLink($$[$0-3],$$[$0]);break;case 38:this.$=$$[$0-2],yy.setClickEvent($$[$0-2],$$[$0],null),yy.setLink($$[$0-2],$$[$0-1]);break;case 39:this.$=$$[$0-3],yy.setClickEvent($$[$0-3],$$[$0-1],$$[$0]),yy.setLink($$[$0-3],$$[$0-2]);break;case 40:this.$=$$[$0-1],yy.setLink($$[$0-1],$$[$0]);break;case 41:case 47:this.$=$$[$0-1]+" "+$$[$0];break;case 42:case 43:case 45:this.$=$$[$0-2]+" "+$$[$0-1]+" "+$$[$0];break;case 44:case 46:this.$=$$[$0-3]+" "+$$[$0-2]+" "+$$[$0-1]+" "+$$[$0]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},o2($V0,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:$V1,13:$V2,14:$V3,15:$V4,16:$V5,17:$V6,18:$V7,19:18,20:$V8,21:$V9,22:$Va,23:$Vb,24:$Vc,25:$Vd,26:$Ve,27:$Vf,28:$Vg,29:$Vh,30:$Vi,31:$Vj,33:$Vk,35:$Vl,36:$Vm,37:24,38:$Vn,40:$Vo},o2($V0,[2,7],{1:[2,1]}),o2($V0,[2,3]),{9:36,11:17,12:$V1,13:$V2,14:$V3,15:$V4,16:$V5,17:$V6,18:$V7,19:18,20:$V8,21:$V9,22:$Va,23:$Vb,24:$Vc,25:$Vd,26:$Ve,27:$Vf,28:$Vg,29:$Vh,30:$Vi,31:$Vj,33:$Vk,35:$Vl,36:$Vm,37:24,38:$Vn,40:$Vo},o2($V0,[2,5]),o2($V0,[2,6]),o2($V0,[2,17]),o2($V0,[2,18]),o2($V0,[2,19]),o2($V0,[2,20]),o2($V0,[2,21]),o2($V0,[2,22]),o2($V0,[2,23]),o2($V0,[2,24]),o2($V0,[2,25]),o2($V0,[2,26]),o2($V0,[2,27]),{32:[1,37]},{34:[1,38]},o2($V0,[2,30]),o2($V0,[2,31]),o2($V0,[2,32]),{39:[1,39]},o2($V0,[2,8]),o2($V0,[2,9]),o2($V0,[2,10]),o2($V0,[2,11]),o2($V0,[2,12]),o2($V0,[2,13]),o2($V0,[2,14]),o2($V0,[2,15]),o2($V0,[2,16]),{41:[1,40],43:[1,41]},o2($V0,[2,4]),o2($V0,[2,28]),o2($V0,[2,29]),o2($V0,[2,33]),o2($V0,[2,34],{42:[1,42],43:[1,43]}),o2($V0,[2,40],{41:[1,44]}),o2($V0,[2,35],{43:[1,45]}),o2($V0,[2,36]),o2($V0,[2,38],{42:[1,46]}),o2($V0,[2,37]),o2($V0,[2,39])],defaultActions:{},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 15:case 18:case 21:case 24:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:case 9:case 10:case 12:case 13:break;case 11:return 10;case 14:this.begin("href");break;case 16:return 43;case 17:this.begin("callbackname");break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 22:return 42;case 23:this.begin("click");break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser5.parser=parser5,gantt_default=parser5}}),require_isoWeek=__commonJS({"../../node_modules/.pnpm/dayjs@1.11.18/node_modules/dayjs/plugin/isoWeek.js"(exports2,module2){var e3,t4;e3=exports2,t4=function(){return function(t4,i2,s2){var a2=__name(function(t5){return t5.add(4-t5.isoWeekday(),"day")},"a"),d3=i2.prototype;d3.isoWeekYear=function(){return a2(this).year()},d3.isoWeek=function(t5){if(!this.$utils().u(t5))return this.add(7*(t5-this.isoWeek()),"day");var i3,n3,o2,r2=a2(this),u2=(i3=this.isoWeekYear(),o2=4-(n3=(this.$u?s2.utc:s2)().year(i3).startOf("year")).isoWeekday(),n3.isoWeekday()>4&&(o2+=7),n3.add(o2,"day"));return r2.diff(u2,"week")+1},d3.isoWeekday=function(e4){return this.$utils().u(e4)?this.day()||7:this.day(this.day()%7?e4:e4-7)};var n2=d3.startOf;d3.startOf=function(e4,t5){var i3=this.$utils(),s3=!!i3.u(t5)||t5;return"isoweek"===i3.p(e4)?s3?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):n2.bind(this)(e4,t5)}}},"object"==typeof exports2&&void 0!==module2?module2.exports=t4():"function"==typeof define&&define.amd?define(t4):(e3="undefined"!=typeof globalThis?globalThis:e3||self).dayjs_plugin_isoWeek=t4()}}),require_customParseFormat=__commonJS({"../../node_modules/.pnpm/dayjs@1.11.18/node_modules/dayjs/plugin/customParseFormat.js"(exports2,module2){var e3,t4;e3=exports2,t4=function(){var e3={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t4=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n2=/\d/,r2=/\d\d/,i2=/\d\d?/,o2=/\d*[^-_:/,()\s\d]+/,s2={},a2=__name(function(e4){return(e4=+e4)+(e4>68?1900:2e3)},"a"),f2=__name(function(e4){return function(t5){this[e4]=+t5}},"f"),h3=[/[+-]\d\d:?(\d\d)?|Z/,function(e4){(this.zone||(this.zone={})).offset=function(e6){if(!e6)return 0;if("Z"===e6)return 0;var t5=e6.match(/([+-]|\d\d)/g),n3=60*t5[1]+(+t5[2]||0);return 0===n3?0:"+"===t5[0]?-n3:n3}(e4)}],u2=__name(function(e4){var t5=s2[e4];return t5&&(t5.indexOf?t5:t5.s.concat(t5.f))},"u"),d3=__name(function(e4,t5){var n3,r3=s2.meridiem;if(r3){for(var i3=1;i3<=24;i3+=1)if(e4.indexOf(r3(i3,0,t5))>-1){n3=i3>12;break}}else n3=e4===(t5?"pm":"PM");return n3},"d"),c3={A:[o2,function(e4){this.afternoon=d3(e4,!1)}],a:[o2,function(e4){this.afternoon=d3(e4,!0)}],Q:[n2,function(e4){this.month=3*(e4-1)+1}],S:[n2,function(e4){this.milliseconds=100*+e4}],SS:[r2,function(e4){this.milliseconds=10*+e4}],SSS:[/\d{3}/,function(e4){this.milliseconds=+e4}],s:[i2,f2("seconds")],ss:[i2,f2("seconds")],m:[i2,f2("minutes")],mm:[i2,f2("minutes")],H:[i2,f2("hours")],h:[i2,f2("hours")],HH:[i2,f2("hours")],hh:[i2,f2("hours")],D:[i2,f2("day")],DD:[r2,f2("day")],Do:[o2,function(e4){var t5=s2.ordinal,n3=e4.match(/\d+/);if(this.day=n3[0],t5)for(var r3=1;r3<=31;r3+=1)t5(r3).replace(/\[|\]/g,"")===e4&&(this.day=r3)}],w:[i2,f2("week")],ww:[r2,f2("week")],M:[i2,f2("month")],MM:[r2,f2("month")],MMM:[o2,function(e4){var t5=u2("months"),n3=(u2("monthsShort")||t5.map(function(e6){return e6.slice(0,3)})).indexOf(e4)+1;if(n3<1)throw new Error;this.month=n3%12||n3}],MMMM:[o2,function(e4){var t5=u2("months").indexOf(e4)+1;if(t5<1)throw new Error;this.month=t5%12||t5}],Y:[/[+-]?\d+/,f2("year")],YY:[r2,function(e4){this.year=a2(e4)}],YYYY:[/\d{4}/,f2("year")],Z:h3,ZZ:h3};function l4(n3){var r3,i3;r3=n3,i3=s2&&s2.formats;for(var o3=(n3=r3.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t5,n4,r4){var o4=r4&&r4.toUpperCase();return n4||i3[r4]||e3[r4]||i3[o4].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e4,t6,n5){return t6||n5.slice(1)})})).match(t4),a3=o3.length,f3=0;f3<a3;f3+=1){var h4=o3[f3],u3=c3[h4],d4=u3&&u3[0],l5=u3&&u3[1];o3[f3]=l5?{regex:d4,parser:l5}:h4.replace(/^\[|\]$/g,"")}return function(e4){for(var t5={},n4=0,r4=0;n4<a3;n4+=1){var i4=o3[n4];if("string"==typeof i4)r4+=i4.length;else{var s3=i4.regex,f4=i4.parser,h5=e4.slice(r4),u4=s3.exec(h5)[0];f4.call(t5,u4),e4=e4.replace(u4,"")}}return function(e6){var t6=e6.afternoon;if(void 0!==t6){var n5=e6.hours;t6?n5<12&&(e6.hours+=12):12===n5&&(e6.hours=0),delete e6.afternoon}}(t5),t5}}return __name(l4,"l"),function(e4,t5,n3){n3.p.customParseFormat=!0,e4&&e4.parseTwoDigitYear&&(a2=e4.parseTwoDigitYear);var r3=t5.prototype,i3=r3.parse;r3.parse=function(e6){var t6=e6.date,r4=e6.utc,o3=e6.args;this.$u=r4;var a3=o3[1];if("string"==typeof a3){var f3=!0===o3[2],h4=!0===o3[3],u3=f3||h4,d4=o3[2];h4&&(d4=o3[2]),s2=this.$locale(),!f3&&d4&&(s2=n3.Ls[d4]),this.$d=function(e7,t7,n4,r5){try{if(["x","X"].indexOf(t7)>-1)return new Date(("X"===t7?1e3:1)*e7);var i4=l4(t7)(e7),o4=i4.year,s3=i4.month,a4=i4.day,f4=i4.hours,h5=i4.minutes,u4=i4.seconds,d5=i4.milliseconds,c5=i4.zone,m4=i4.week,M4=new Date,Y3=a4||(o4||s3?1:M4.getDate()),p3=o4||M4.getFullYear(),v3=0;o4&&!s3||(v3=s3>0?s3-1:M4.getMonth());var D4,w4=f4||0,g2=h5||0,y6=u4||0,L3=d5||0;return c5?new Date(Date.UTC(p3,v3,Y3,w4,g2,y6,L3+60*c5.offset*1e3)):n4?new Date(Date.UTC(p3,v3,Y3,w4,g2,y6,L3)):(D4=new Date(p3,v3,Y3,w4,g2,y6,L3),m4&&(D4=r5(D4).week(m4).toDate()),D4)}catch(e8){return new Date("")}}(t6,a3,r4,n3),this.init(),d4&&!0!==d4&&(this.$L=this.locale(d4).$L),u3&&t6!=this.format(a3)&&(this.$d=new Date("")),s2={}}else if(a3 instanceof Array)for(var c4=a3.length,m3=1;m3<=c4;m3+=1){o3[1]=a3[m3-1];var M3=n3.apply(this,o3);if(M3.isValid()){this.$d=M3.$d,this.$L=M3.$L,this.init();break}m3===c4&&(this.$d=new Date(""))}else i3.call(this,e6)}}},"object"==typeof exports2&&void 0!==module2?module2.exports=t4():"function"==typeof define&&define.amd?define(t4):(e3="undefined"!=typeof globalThis?globalThis:e3||self).dayjs_plugin_customParseFormat=t4()}}),require_advancedFormat=__commonJS({"../../node_modules/.pnpm/dayjs@1.11.18/node_modules/dayjs/plugin/advancedFormat.js"(exports2,module2){var e3,t4;e3=exports2,t4=function(){return function(e3,t4){var r2=t4.prototype,n2=r2.format;r2.format=function(e4){var t5=this,r3=this.$locale();if(!this.isValid())return n2.bind(this)(e4);var s2=this.$utils(),a2=(e4||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e6){switch(e6){case"Q":return Math.ceil((t5.$M+1)/3);case"Do":return r3.ordinal(t5.$D);case"gggg":return t5.weekYear();case"GGGG":return t5.isoWeekYear();case"wo":return r3.ordinal(t5.week(),"W");case"w":case"ww":return s2.s(t5.week(),"w"===e6?1:2,"0");case"W":case"WW":return s2.s(t5.isoWeek(),"W"===e6?1:2,"0");case"k":case"kk":return s2.s(String(0===t5.$H?24:t5.$H),"k"===e6?1:2,"0");case"X":return Math.floor(t5.$d.getTime()/1e3);case"x":return t5.$d.getTime();case"z":return"["+t5.offsetName()+"]";case"zzz":return"["+t5.offsetName("long")+"]";default:return e6}});return n2.bind(this)(a2)}}},"object"==typeof exports2&&void 0!==module2?module2.exports=t4():"function"==typeof define&&define.amd?define(t4):(e3="undefined"!=typeof globalThis?globalThis:e3||self).dayjs_plugin_advancedFormat=t4()}});function getTaskTags(data5,task,tags2){let matchFound=!0;for(;matchFound;)matchFound=!1,tags2.forEach(function(t4){const regex2=new RegExp("^\\s*"+t4+"\\s*$");data5[0].match(regex2)&&(task[t4]=!0,data5.shift(1),matchFound=!0)})}var import_dayjs3,setConf2,mapWeekdayToTimeFunction,getMaxIntersections,w3,draw5,ganttRenderer_default,styles_default6,diagram5,init_ganttDb=__esm({"src/diagrams/gantt/ganttDb.js"(){import_sanitize_url4=__toESM(require_dist(),1),import_dayjs2=__toESM(require_dayjs_min(),1),import_isoWeek=__toESM(require_isoWeek(),1),import_customParseFormat=__toESM(require_customParseFormat(),1),import_advancedFormat=__toESM(require_advancedFormat(),1),init_logger(),init_diagramAPI(),init_utils2(),init_commonDb(),import_dayjs2.default.extend(import_isoWeek.default),import_dayjs2.default.extend(import_customParseFormat.default),import_dayjs2.default.extend(import_advancedFormat.default),WEEKEND_START_DAY={friday:5,saturday:6},dateFormat="",axisFormat="",tickInterval=void 0,todayMarker="",includes2=[],excludes=[],links=new Map,sections=[],tasks=[],currentSection="",displayMode="",tags=["active","done","crit","milestone","vert"],funs=[],inclusiveEndDates=!1,topAxis=!1,weekday="sunday",weekend="saturday",lastOrder=0,clear9=__name(function(){sections=[],tasks=[],currentSection="",funs=[],taskCnt=0,lastTask=void 0,lastTaskID=void 0,rawTasks=[],dateFormat="",axisFormat="",displayMode="",tickInterval=void 0,todayMarker="",includes2=[],excludes=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0,links=new Map,clear(),weekday="sunday",weekend="saturday"},"clear"),setAxisFormat=__name(function(txt){axisFormat=txt},"setAxisFormat"),getAxisFormat=__name(function(){return axisFormat},"getAxisFormat"),setTickInterval=__name(function(txt){tickInterval=txt},"setTickInterval"),getTickInterval=__name(function(){return tickInterval},"getTickInterval"),setTodayMarker=__name(function(txt){todayMarker=txt},"setTodayMarker"),getTodayMarker=__name(function(){return todayMarker},"getTodayMarker"),setDateFormat=__name(function(txt){dateFormat=txt},"setDateFormat"),enableInclusiveEndDates=__name(function(){inclusiveEndDates=!0},"enableInclusiveEndDates"),endDatesAreInclusive=__name(function(){return inclusiveEndDates},"endDatesAreInclusive"),enableTopAxis=__name(function(){topAxis=!0},"enableTopAxis"),topAxisEnabled=__name(function(){return topAxis},"topAxisEnabled"),setDisplayMode=__name(function(txt){displayMode=txt},"setDisplayMode"),getDisplayMode=__name(function(){return displayMode},"getDisplayMode"),getDateFormat=__name(function(){return dateFormat},"getDateFormat"),setIncludes=__name(function(txt){includes2=txt.toLowerCase().split(/[\s,]+/)},"setIncludes"),getIncludes=__name(function(){return includes2},"getIncludes"),setExcludes=__name(function(txt){excludes=txt.toLowerCase().split(/[\s,]+/)},"setExcludes"),getExcludes=__name(function(){return excludes},"getExcludes"),getLinks=__name(function(){return links},"getLinks"),addSection=__name(function(txt){currentSection=txt,sections.push(txt)},"addSection"),getSections=__name(function(){return sections},"getSections"),getTasks=__name(function(){let allItemsProcessed=compileTasks();let iterationCount=0;for(;!allItemsProcessed&&iterationCount<10;)allItemsProcessed=compileTasks(),iterationCount++;return tasks=rawTasks},"getTasks"),isInvalidDate=__name(function(date2,dateFormat2,excludes2,includes3){const formattedDate=date2.format(dateFormat2.trim()),dateOnly=date2.format("YYYY-MM-DD");return!includes3.includes(formattedDate)&&!includes3.includes(dateOnly)&&(!(!excludes2.includes("weekends")||date2.isoWeekday()!==WEEKEND_START_DAY[weekend]&&date2.isoWeekday()!==WEEKEND_START_DAY[weekend]+1)||(!!excludes2.includes(date2.format("dddd").toLowerCase())||(excludes2.includes(formattedDate)||excludes2.includes(dateOnly))))},"isInvalidDate"),setWeekday=__name(function(txt){weekday=txt},"setWeekday"),getWeekday=__name(function(){return weekday},"getWeekday"),setWeekend=__name(function(startDay){weekend=startDay},"setWeekend"),checkTaskDates=__name(function(task,dateFormat2,excludes2,includes3){if(!excludes2.length||task.manualEndTime)return;let startTime,originalEndTime;startTime=task.startTime instanceof Date?(0,import_dayjs2.default)(task.startTime):(0,import_dayjs2.default)(task.startTime,dateFormat2,!0),startTime=startTime.add(1,"d"),originalEndTime=task.endTime instanceof Date?(0,import_dayjs2.default)(task.endTime):(0,import_dayjs2.default)(task.endTime,dateFormat2,!0);const[fixedEndTime,renderEndTime]=fixTaskDates(startTime,originalEndTime,dateFormat2,excludes2,includes3);task.endTime=fixedEndTime.toDate(),task.renderEndTime=renderEndTime},"checkTaskDates"),fixTaskDates=__name(function(startTime,endTime,dateFormat2,excludes2,includes3){let invalid=!1,renderEndTime=null;for(;startTime<=endTime;)invalid||(renderEndTime=endTime.toDate()),invalid=isInvalidDate(startTime,dateFormat2,excludes2,includes3),invalid&&(endTime=endTime.add(1,"d")),startTime=startTime.add(1,"d");return[endTime,renderEndTime]},"fixTaskDates"),getStartDate=__name(function(prevTime,dateFormat2,str2){if(str2=str2.trim(),("x"===dateFormat2.trim()||"X"===dateFormat2.trim())&&/^\d+$/.test(str2))return new Date(Number(str2));const afterStatement=/^after\s+(?<ids>[\d\w- ]+)/.exec(str2);if(null!==afterStatement){let latestTask=null;for(const id30 of afterStatement.groups.ids.split(" ")){let task=findTaskById(id30);void 0!==task&&(!latestTask||task.endTime>latestTask.endTime)&&(latestTask=task)}if(latestTask)return latestTask.endTime;const today=new Date;return today.setHours(0,0,0,0),today}let mDate=(0,import_dayjs2.default)(str2,dateFormat2.trim(),!0);if(mDate.isValid())return mDate.toDate();{log.debug("Invalid date:"+str2),log.debug("With date format:"+dateFormat2.trim());const d3=new Date(str2);if(void 0===d3||isNaN(d3.getTime())||d3.getFullYear()<-1e4||d3.getFullYear()>1e4)throw new Error("Invalid date:"+str2);return d3}},"getStartDate"),parseDuration=__name(function(str2){const statement=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(str2.trim());return null!==statement?[Number.parseFloat(statement[1]),statement[2]]:[NaN,"ms"]},"parseDuration"),getEndDate=__name(function(prevTime,dateFormat2,str2,inclusive=!1){str2=str2.trim();const untilStatement=/^until\s+(?<ids>[\d\w- ]+)/.exec(str2);if(null!==untilStatement){let earliestTask=null;for(const id30 of untilStatement.groups.ids.split(" ")){let task=findTaskById(id30);void 0!==task&&(!earliestTask||task.startTime<earliestTask.startTime)&&(earliestTask=task)}if(earliestTask)return earliestTask.startTime;const today=new Date;return today.setHours(0,0,0,0),today}let parsedDate=(0,import_dayjs2.default)(str2,dateFormat2.trim(),!0);if(parsedDate.isValid())return inclusive&&(parsedDate=parsedDate.add(1,"d")),parsedDate.toDate();let endTime=(0,import_dayjs2.default)(prevTime);const[durationValue,durationUnit]=parseDuration(str2);if(!Number.isNaN(durationValue)){const newEndTime=endTime.add(durationValue,durationUnit);newEndTime.isValid()&&(endTime=newEndTime)}return endTime.toDate()},"getEndDate"),taskCnt=0,parseId=__name(function(idStr){return void 0===idStr?"task"+(taskCnt+=1):idStr},"parseId"),compileData=__name(function(prevTask,dataStr){let ds;ds=":"===dataStr.substr(0,1)?dataStr.substr(1,dataStr.length):dataStr;const data5=ds.split(","),task={};getTaskTags(data5,task,tags);for(let i2=0;i2<data5.length;i2++)data5[i2]=data5[i2].trim();let endTimeData="";switch(data5.length){case 1:task.id=parseId(),task.startTime=prevTask.endTime,endTimeData=data5[0];break;case 2:task.id=parseId(),task.startTime=getStartDate(void 0,dateFormat,data5[0]),endTimeData=data5[1];break;case 3:task.id=parseId(data5[0]),task.startTime=getStartDate(void 0,dateFormat,data5[1]),endTimeData=data5[2]}return endTimeData&&(task.endTime=getEndDate(task.startTime,dateFormat,endTimeData,inclusiveEndDates),task.manualEndTime=(0,import_dayjs2.default)(endTimeData,"YYYY-MM-DD",!0).isValid(),checkTaskDates(task,dateFormat,excludes,includes2)),task},"compileData"),parseData=__name(function(prevTaskId,dataStr){let ds;ds=":"===dataStr.substr(0,1)?dataStr.substr(1,dataStr.length):dataStr;const data5=ds.split(","),task={};getTaskTags(data5,task,tags);for(let i2=0;i2<data5.length;i2++)data5[i2]=data5[i2].trim();switch(data5.length){case 1:task.id=parseId(),task.startTime={type:"prevTaskEnd",id:prevTaskId},task.endTime={data:data5[0]};break;case 2:task.id=parseId(),task.startTime={type:"getStartDate",startData:data5[0]},task.endTime={data:data5[1]};break;case 3:task.id=parseId(data5[0]),task.startTime={type:"getStartDate",startData:data5[1]},task.endTime={data:data5[2]}}return task},"parseData"),rawTasks=[],taskDb={},addTask=__name(function(descr,data5){const rawTask={section:currentSection,type:currentSection,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:data5},task:descr,classes:[]},taskInfo=parseData(lastTaskID,data5);rawTask.raw.startTime=taskInfo.startTime,rawTask.raw.endTime=taskInfo.endTime,rawTask.id=taskInfo.id,rawTask.prevTaskId=lastTaskID,rawTask.active=taskInfo.active,rawTask.done=taskInfo.done,rawTask.crit=taskInfo.crit,rawTask.milestone=taskInfo.milestone,rawTask.vert=taskInfo.vert,rawTask.order=lastOrder,lastOrder++;const pos=rawTasks.push(rawTask);lastTaskID=rawTask.id,taskDb[rawTask.id]=pos-1},"addTask"),findTaskById=__name(function(id30){const pos=taskDb[id30];return rawTasks[pos]},"findTaskById"),addTaskOrg=__name(function(descr,data5){const newTask={section:currentSection,type:currentSection,description:descr,task:descr,classes:[]},taskInfo=compileData(lastTask,data5);newTask.startTime=taskInfo.startTime,newTask.endTime=taskInfo.endTime,newTask.id=taskInfo.id,newTask.active=taskInfo.active,newTask.done=taskInfo.done,newTask.crit=taskInfo.crit,newTask.milestone=taskInfo.milestone,newTask.vert=taskInfo.vert,lastTask=newTask,tasks.push(newTask)},"addTaskOrg"),compileTasks=__name(function(){const compileTask=__name(function(pos){const task=rawTasks[pos];let startTime="";switch(rawTasks[pos].raw.startTime.type){case"prevTaskEnd":{const prevTask=findTaskById(task.prevTaskId);task.startTime=prevTask.endTime;break}case"getStartDate":startTime=getStartDate(void 0,dateFormat,rawTasks[pos].raw.startTime.startData),startTime&&(rawTasks[pos].startTime=startTime)}return rawTasks[pos].startTime&&(rawTasks[pos].endTime=getEndDate(rawTasks[pos].startTime,dateFormat,rawTasks[pos].raw.endTime.data,inclusiveEndDates),rawTasks[pos].endTime&&(rawTasks[pos].processed=!0,rawTasks[pos].manualEndTime=(0,import_dayjs2.default)(rawTasks[pos].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),checkTaskDates(rawTasks[pos],dateFormat,excludes,includes2))),rawTasks[pos].processed},"compileTask");let allProcessed=!0;for(const[i2,rawTask]of rawTasks.entries())compileTask(i2),allProcessed=allProcessed&&rawTask.processed;return allProcessed},"compileTasks"),setLink=__name(function(ids,_linkStr){let linkStr=_linkStr;"loose"!==getConfig2().securityLevel&&(linkStr=(0,import_sanitize_url4.sanitizeUrl)(_linkStr)),ids.split(",").forEach(function(id30){void 0!==findTaskById(id30)&&(pushFun(id30,()=>{window.open(linkStr,"_self")}),links.set(id30,linkStr))}),setClass(ids,"clickable")},"setLink"),setClass=__name(function(ids,className){ids.split(",").forEach(function(id30){let rawTask=findTaskById(id30);void 0!==rawTask&&rawTask.classes.push(className)})},"setClass"),setClickFun=__name(function(id30,functionName,functionArgs){if("loose"!==getConfig2().securityLevel)return;if(void 0===functionName)return;let argList=[];if("string"==typeof functionArgs){argList=functionArgs.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let i2=0;i2<argList.length;i2++){let item=argList[i2].trim();item.startsWith('"')&&item.endsWith('"')&&(item=item.substr(1,item.length-2)),argList[i2]=item}}0===argList.length&&argList.push(id30),void 0!==findTaskById(id30)&&pushFun(id30,()=>{utils_default2.runFunc(functionName,...argList)})},"setClickFun"),pushFun=__name(function(id30,callbackFunction){funs.push(function(){const elem=document.querySelector(`[id="${id30}"]`);null!==elem&&elem.addEventListener("click",function(){callbackFunction()})},function(){const elem=document.querySelector(`[id="${id30}-text"]`);null!==elem&&elem.addEventListener("click",function(){callbackFunction()})})},"pushFun"),setClickEvent=__name(function(ids,functionName,functionArgs){ids.split(",").forEach(function(id30){setClickFun(id30,functionName,functionArgs)}),setClass(ids,"clickable")},"setClickEvent"),bindFunctions=__name(function(element3){funs.forEach(function(fun){fun(element3)})},"bindFunctions"),ganttDb_default={getConfig:__name(()=>getConfig2().gantt,"getConfig"),clear:clear9,setDateFormat:setDateFormat,getDateFormat:getDateFormat,enableInclusiveEndDates:enableInclusiveEndDates,endDatesAreInclusive:endDatesAreInclusive,enableTopAxis:enableTopAxis,topAxisEnabled:topAxisEnabled,setAxisFormat:setAxisFormat,getAxisFormat:getAxisFormat,setTickInterval:setTickInterval,getTickInterval:getTickInterval,setTodayMarker:setTodayMarker,getTodayMarker:getTodayMarker,setAccTitle:setAccTitle,getAccTitle:getAccTitle,setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle,setDisplayMode:setDisplayMode,getDisplayMode:getDisplayMode,setAccDescription:setAccDescription,getAccDescription:getAccDescription,addSection:addSection,getSections:getSections,getTasks:getTasks,addTask:addTask,findTaskById:findTaskById,addTaskOrg:addTaskOrg,setIncludes:setIncludes,getIncludes:getIncludes,setExcludes:setExcludes,getExcludes:getExcludes,setClickEvent:setClickEvent,setLink:setLink,getLinks:getLinks,bindFunctions:bindFunctions,parseDuration:parseDuration,isInvalidDate:isInvalidDate,setWeekday:setWeekday,getWeekday:getWeekday,setWeekend:setWeekend},__name(getTaskTags,"getTaskTags")}}),init_ganttRenderer=__esm({"src/diagrams/gantt/ganttRenderer.js"(){import_dayjs3=__toESM(require_dayjs_min(),1),init_logger(),init_src32(),init_common(),init_diagramAPI(),init_setupGraphViewbox(),setConf2=__name(function(){log.debug("Something is calling, setConf, remove the call")},"setConf"),mapWeekdayToTimeFunction={monday:timeMonday,tuesday:timeTuesday,wednesday:timeWednesday,thursday:timeThursday,friday:timeFriday,saturday:timeSaturday,sunday:timeSunday},getMaxIntersections=__name((tasks4,orderOffset)=>{let timeline=[...tasks4].map(()=>-1/0),sorted=[...tasks4].sort((a2,b3)=>a2.startTime-b3.startTime||a2.order-b3.order),maxIntersections=0;for(const element3 of sorted)for(let j3=0;j3<timeline.length;j3++)if(element3.startTime>=timeline[j3]){timeline[j3]=element3.endTime,element3.order=j3+orderOffset,j3>maxIntersections&&(maxIntersections=j3);break}return maxIntersections},"getMaxIntersections"),draw5=__name(function(text4,id30,version3,diagObj){const conf5=getConfig2().gantt,securityLevel=getConfig2().securityLevel;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body"),doc="sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument:document,elem=doc.getElementById(id30);void 0===(w3=elem.parentElement.offsetWidth)&&(w3=1200),void 0!==conf5.useWidth&&(w3=conf5.useWidth);const taskArray=diagObj.db.getTasks();let categories=[];for(const element3 of taskArray)categories.push(element3.type);categories=checkUnique(categories);const categoryHeights={};let h3=2*conf5.topPadding;if("compact"===diagObj.db.getDisplayMode()||"compact"===conf5.displayMode){const categoryElements={};for(const element3 of taskArray)void 0===categoryElements[element3.section]?categoryElements[element3.section]=[element3]:categoryElements[element3.section].push(element3);let intersections=0;for(const category of Object.keys(categoryElements)){const categoryHeight=getMaxIntersections(categoryElements[category],intersections)+1;intersections+=categoryHeight,h3+=categoryHeight*(conf5.barHeight+conf5.barGap),categoryHeights[category]=categoryHeight}}else{h3+=taskArray.length*(conf5.barHeight+conf5.barGap);for(const category of categories)categoryHeights[category]=taskArray.filter(task=>task.type===category).length}elem.setAttribute("viewBox","0 0 "+w3+" "+h3);const svg2=root3.select(`[id="${id30}"]`),timeScale=time().domain([min(taskArray,function(d3){return d3.startTime}),max(taskArray,function(d3){return d3.endTime})]).rangeRound([0,w3-conf5.leftPadding-conf5.rightPadding]);function taskCompare(a2,b3){const taskA=a2.startTime,taskB=b3.startTime;let result=0;return taskA>taskB?result=1:taskA<taskB&&(result=-1),result}function makeGantt(tasks4,pageWidth,pageHeight){const barHeight=conf5.barHeight,gap=barHeight+conf5.barGap,topPadding=conf5.topPadding,leftPadding=conf5.leftPadding,colorScale=linear2().domain([0,categories.length]).range(["#00B9FA","#F95002"]).interpolate(hcl_default);drawExcludeDays(gap,topPadding,leftPadding,pageWidth,pageHeight,tasks4,diagObj.db.getExcludes(),diagObj.db.getIncludes()),makeGrid(leftPadding,topPadding,pageWidth,pageHeight),drawRects(tasks4,gap,topPadding,leftPadding,barHeight,colorScale,pageWidth),vertLabels(gap,topPadding),drawToday(leftPadding,topPadding,pageWidth,pageHeight)}function drawRects(theArray,theGap,theTopPad,theSidePad,theBarHeight,theColorScale,w4){theArray.sort((a2,b3)=>a2.vert===b3.vert?0:a2.vert?1:-1);const uniqueTasks=[...new Set(theArray.map(item=>item.order))].map(id31=>theArray.find(item=>item.order===id31));svg2.append("g").selectAll("rect").data(uniqueTasks).enter().append("rect").attr("x",0).attr("y",function(d3,i2){return d3.order*theGap+theTopPad-2}).attr("width",function(){return w4-conf5.rightPadding/2}).attr("height",theGap).attr("class",function(d3){for(const[i2,category]of categories.entries())if(d3.type===category)return"section section"+i2%conf5.numberSectionStyles;return"section section0"}).enter();const rectangles=svg2.append("g").selectAll("rect").data(theArray).enter(),links3=diagObj.db.getLinks();rectangles.append("rect").attr("id",function(d3){return d3.id}).attr("rx",3).attr("ry",3).attr("x",function(d3){return d3.milestone?timeScale(d3.startTime)+theSidePad+.5*(timeScale(d3.endTime)-timeScale(d3.startTime))-.5*theBarHeight:timeScale(d3.startTime)+theSidePad}).attr("y",function(d3,i2){return i2=d3.order,d3.vert?conf5.gridLineStartPadding:i2*theGap+theTopPad}).attr("width",function(d3){return d3.milestone?theBarHeight:d3.vert?.08*theBarHeight:timeScale(d3.renderEndTime||d3.endTime)-timeScale(d3.startTime)}).attr("height",function(d3){return d3.vert?taskArray.length*(conf5.barHeight+conf5.barGap)+2*conf5.barHeight:theBarHeight}).attr("transform-origin",function(d3,i2){return i2=d3.order,(timeScale(d3.startTime)+theSidePad+.5*(timeScale(d3.endTime)-timeScale(d3.startTime))).toString()+"px "+(i2*theGap+theTopPad+.5*theBarHeight).toString()+"px"}).attr("class",function(d3){let classStr="";d3.classes.length>0&&(classStr=d3.classes.join(" "));let secNum=0;for(const[i2,category]of categories.entries())d3.type===category&&(secNum=i2%conf5.numberSectionStyles);let taskClass="";return d3.active?d3.crit?taskClass+=" activeCrit":taskClass=" active":d3.done?taskClass=d3.crit?" doneCrit":" done":d3.crit&&(taskClass+=" crit"),0===taskClass.length&&(taskClass=" task"),d3.milestone&&(taskClass=" milestone "+taskClass),d3.vert&&(taskClass=" vert "+taskClass),taskClass+=secNum,taskClass+=" "+classStr,"task"+taskClass}),rectangles.append("text").attr("id",function(d3){return d3.id+"-text"}).text(function(d3){return d3.task}).attr("font-size",conf5.fontSize).attr("x",function(d3){let startX2=timeScale(d3.startTime),endX=timeScale(d3.renderEndTime||d3.endTime);if(d3.milestone&&(startX2+=.5*(timeScale(d3.endTime)-timeScale(d3.startTime))-.5*theBarHeight,endX=startX2+theBarHeight),d3.vert)return timeScale(d3.startTime)+theSidePad;const textWidth=this.getBBox().width;return textWidth>endX-startX2?endX+textWidth+1.5*conf5.leftPadding>w4?startX2+theSidePad-5:endX+theSidePad+5:(endX-startX2)/2+startX2+theSidePad}).attr("y",function(d3,i2){return d3.vert?conf5.gridLineStartPadding+taskArray.length*(conf5.barHeight+conf5.barGap)+60:d3.order*theGap+conf5.barHeight/2+(conf5.fontSize/2-2)+theTopPad}).attr("text-height",theBarHeight).attr("class",function(d3){const startX2=timeScale(d3.startTime);let endX=timeScale(d3.endTime);d3.milestone&&(endX=startX2+theBarHeight);const textWidth=this.getBBox().width;let classStr="";d3.classes.length>0&&(classStr=d3.classes.join(" "));let secNum=0;for(const[i2,category]of categories.entries())d3.type===category&&(secNum=i2%conf5.numberSectionStyles);let taskType="";return d3.active&&(taskType=d3.crit?"activeCritText"+secNum:"activeText"+secNum),d3.done?taskType=d3.crit?taskType+" doneCritText"+secNum:taskType+" doneText"+secNum:d3.crit&&(taskType=taskType+" critText"+secNum),d3.milestone&&(taskType+=" milestoneText"),d3.vert&&(taskType+=" vertText"),textWidth>endX-startX2?endX+textWidth+1.5*conf5.leftPadding>w4?classStr+" taskTextOutsideLeft taskTextOutside"+secNum+" "+taskType:classStr+" taskTextOutsideRight taskTextOutside"+secNum+" "+taskType+" width-"+textWidth:classStr+" taskText taskText"+secNum+" "+taskType+" width-"+textWidth});if("sandbox"===getConfig2().securityLevel){let sandboxElement2;sandboxElement2=select_default2("#i"+id30);const doc2=sandboxElement2.nodes()[0].contentDocument;rectangles.filter(function(d3){return links3.has(d3.id)}).each(function(o2){var taskRect=doc2.querySelector("#"+o2.id),taskText=doc2.querySelector("#"+o2.id+"-text");const oldParent=taskRect.parentNode;var Link=doc2.createElement("a");Link.setAttribute("xlink:href",links3.get(o2.id)),Link.setAttribute("target","_top"),oldParent.appendChild(Link),Link.appendChild(taskRect),Link.appendChild(taskText)})}}function drawExcludeDays(theGap,theTopPad,theSidePad,w4,h4,tasks4,excludes2,includes3){if(0===excludes2.length&&0===includes3.length)return;let minTime,maxTime;for(const{startTime:startTime,endTime:endTime}of tasks4)(void 0===minTime||startTime<minTime)&&(minTime=startTime),(void 0===maxTime||endTime>maxTime)&&(maxTime=endTime);if(!minTime||!maxTime)return;if((0,import_dayjs3.default)(maxTime).diff((0,import_dayjs3.default)(minTime),"year")>5)return void log.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");const dateFormat2=diagObj.db.getDateFormat(),excludeRanges=[];let range3=null,d3=(0,import_dayjs3.default)(minTime);for(;d3.valueOf()<=maxTime;)diagObj.db.isInvalidDate(d3,dateFormat2,excludes2,includes3)?range3?range3.end=d3:range3={start:d3,end:d3}:range3&&(excludeRanges.push(range3),range3=null),d3=d3.add(1,"d");svg2.append("g").selectAll("rect").data(excludeRanges).enter().append("rect").attr("id",d4=>"exclude-"+d4.start.format("YYYY-MM-DD")).attr("x",d4=>timeScale(d4.start.startOf("day"))+theSidePad).attr("y",conf5.gridLineStartPadding).attr("width",d4=>timeScale(d4.end.endOf("day"))-timeScale(d4.start.startOf("day"))).attr("height",h4-theTopPad-conf5.gridLineStartPadding).attr("transform-origin",function(d4,i2){return(timeScale(d4.start)+theSidePad+.5*(timeScale(d4.end)-timeScale(d4.start))).toString()+"px "+(i2*theGap+.5*h4).toString()+"px"}).attr("class","exclude-range")}function makeGrid(theSidePad,theTopPad,w4,h4){const dateFormat2=diagObj.db.getDateFormat(),userAxisFormat=diagObj.db.getAxisFormat();let axisFormat2;axisFormat2=userAxisFormat||("D"===dateFormat2?"%d":conf5.axisFormat??"%Y-%m-%d");let bottomXAxis=axisBottom(timeScale).tickSize(-h4+theTopPad+conf5.gridLineStartPadding).tickFormat(timeFormat(axisFormat2));const resultTickInterval=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(diagObj.db.getTickInterval()||conf5.tickInterval);if(null!==resultTickInterval){const every3=resultTickInterval[1],interval2=resultTickInterval[2],weekday2=diagObj.db.getWeekday()||conf5.weekday;switch(interval2){case"millisecond":bottomXAxis.ticks(millisecond.every(every3));break;case"second":bottomXAxis.ticks(second.every(every3));break;case"minute":bottomXAxis.ticks(timeMinute.every(every3));break;case"hour":bottomXAxis.ticks(timeHour.every(every3));break;case"day":bottomXAxis.ticks(timeDay.every(every3));break;case"week":bottomXAxis.ticks(mapWeekdayToTimeFunction[weekday2].every(every3));break;case"month":bottomXAxis.ticks(timeMonth.every(every3))}}if(svg2.append("g").attr("class","grid").attr("transform","translate("+theSidePad+", "+(h4-50)+")").call(bottomXAxis).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),diagObj.db.topAxisEnabled()||conf5.topAxis){let topXAxis=axisTop(timeScale).tickSize(-h4+theTopPad+conf5.gridLineStartPadding).tickFormat(timeFormat(axisFormat2));if(null!==resultTickInterval){const every3=resultTickInterval[1],interval2=resultTickInterval[2],weekday2=diagObj.db.getWeekday()||conf5.weekday;switch(interval2){case"millisecond":topXAxis.ticks(millisecond.every(every3));break;case"second":topXAxis.ticks(second.every(every3));break;case"minute":topXAxis.ticks(timeMinute.every(every3));break;case"hour":topXAxis.ticks(timeHour.every(every3));break;case"day":topXAxis.ticks(timeDay.every(every3));break;case"week":topXAxis.ticks(mapWeekdayToTimeFunction[weekday2].every(every3));break;case"month":topXAxis.ticks(timeMonth.every(every3))}}svg2.append("g").attr("class","grid").attr("transform","translate("+theSidePad+", "+theTopPad+")").call(topXAxis).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function vertLabels(theGap,theTopPad){let prevGap=0;const numOccurrences=Object.keys(categoryHeights).map(d3=>[d3,categoryHeights[d3]]);svg2.append("g").selectAll("text").data(numOccurrences).enter().append(function(d3){const rows=d3[0].split(common_default.lineBreakRegex),dy=-(rows.length-1)/2,svgLabel=doc.createElementNS("http://www.w3.org/2000/svg","text");svgLabel.setAttribute("dy",dy+"em");for(const[j3,row]of rows.entries()){const tspan=doc.createElementNS("http://www.w3.org/2000/svg","tspan");tspan.setAttribute("alignment-baseline","central"),tspan.setAttribute("x","10"),j3>0&&tspan.setAttribute("dy","1em"),tspan.textContent=row,svgLabel.appendChild(tspan)}return svgLabel}).attr("x",10).attr("y",function(d3,i2){if(!(i2>0))return d3[1]*theGap/2+theTopPad;for(let j3=0;j3<i2;j3++)return prevGap+=numOccurrences[i2-1][1],d3[1]*theGap/2+prevGap*theGap+theTopPad}).attr("font-size",conf5.sectionFontSize).attr("class",function(d3){for(const[i2,category]of categories.entries())if(d3[0]===category)return"sectionTitle sectionTitle"+i2%conf5.numberSectionStyles;return"sectionTitle"})}function drawToday(theSidePad,theTopPad,w4,h4){const todayMarker2=diagObj.db.getTodayMarker();if("off"===todayMarker2)return;const todayG=svg2.append("g").attr("class","today"),today=new Date,todayLine=todayG.append("line");todayLine.attr("x1",timeScale(today)+theSidePad).attr("x2",timeScale(today)+theSidePad).attr("y1",conf5.titleTopMargin).attr("y2",h4-conf5.titleTopMargin).attr("class","today"),""!==todayMarker2&&todayLine.attr("style",todayMarker2.replace(/,/g,";"))}function checkUnique(arr){const hash={},result=[];for(let i2=0,l4=arr.length;i2<l4;++i2)Object.prototype.hasOwnProperty.call(hash,arr[i2])||(hash[arr[i2]]=!0,result.push(arr[i2]));return result}__name(taskCompare,"taskCompare"),taskArray.sort(taskCompare),makeGantt(taskArray,w3,h3),configureSvgSize(svg2,h3,w3,conf5.useMaxWidth),svg2.append("text").text(diagObj.db.getDiagramTitle()).attr("x",w3/2).attr("y",conf5.titleTopMargin).attr("class","titleText"),__name(makeGantt,"makeGantt"),__name(drawRects,"drawRects"),__name(drawExcludeDays,"drawExcludeDays"),__name(makeGrid,"makeGrid"),__name(vertLabels,"vertLabels"),__name(drawToday,"drawToday"),__name(checkUnique,"checkUnique")},"draw"),ganttRenderer_default={setConf:setConf2,draw:draw5}}}),init_styles6=__esm({"src/diagrams/gantt/styles.js"(){styles_default6=__name(options2=>`\n  .mermaid-main-font {\n        font-family: ${options2.fontFamily};\n  }\n\n  .exclude-range {\n    fill: ${options2.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${options2.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${options2.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${options2.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${options2.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${options2.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${options2.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${options2.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    font-family: ${options2.fontFamily};\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${options2.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n  }\n\n  .grid .tick text {\n    font-family: ${options2.fontFamily};\n    fill: ${options2.textColor};\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${options2.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: ${options2.fontFamily};\n  }\n\n  .taskTextOutsideRight {\n    fill: ${options2.taskTextDarkColor};\n    text-anchor: start;\n    font-family: ${options2.fontFamily};\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${options2.taskTextDarkColor};\n    text-anchor: end;\n  }\n\n\n  /* Special case clickable */\n\n  .task.clickable {\n    cursor: pointer;\n  }\n\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${options2.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${options2.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${options2.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${options2.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${options2.taskBkgColor};\n    stroke: ${options2.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${options2.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${options2.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${options2.activeTaskBkgColor};\n    stroke: ${options2.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${options2.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${options2.doneTaskBorderColor};\n    fill: ${options2.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${options2.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${options2.critBorderColor};\n    fill: ${options2.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${options2.critBorderColor};\n    fill: ${options2.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${options2.critBorderColor};\n    fill: ${options2.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${options2.taskTextDarkColor} !important;\n  }\n\n  .vert {\n    stroke: ${options2.vertLineColor};\n  }\n\n  .vertText {\n    font-size: 15px;\n    text-anchor: middle;\n    fill: ${options2.vertLineColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${options2.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options2.titleColor||options2.textColor};\n    font-family: ${options2.fontFamily};\n  }\n`,"getStyles")}}),ganttDiagram_exports={};__export(ganttDiagram_exports,{diagram:()=>diagram5});var parser6,package_default,DEFAULT_INFO_DB,db2,selectSvgElement,renderer3,diagram6,init_ganttDiagram=__esm({"src/diagrams/gantt/ganttDiagram.ts"(){init_gantt(),init_ganttDb(),init_ganttRenderer(),init_styles6(),diagram5={parser:gantt_default,db:ganttDb_default,renderer:ganttRenderer_default,styles:styles_default6}}}),init_infoParser=__esm({"src/diagrams/info/infoParser.ts"(){init_mermaid_parser_core(),init_logger(),parser6={parse:__name(async input=>{const ast=await parse3("info",input);log.debug(ast)},"parse")}}}),init_package=__esm({"package.json"(){package_default={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}}}}),init_infoDb=__esm({"src/diagrams/info/infoDb.ts"(){init_package(),DEFAULT_INFO_DB={version:package_default.version+""},db2={getVersion:__name(()=>DEFAULT_INFO_DB.version,"getVersion")}}}),init_selectSvgElement=__esm({"src/rendering-util/selectSvgElement.ts"(){init_src32(),init_diagramAPI(),selectSvgElement=__name(id30=>{const{securityLevel:securityLevel}=getConfig2();let root3=select_default2("body");if("sandbox"===securityLevel){const sandboxElement=select_default2(`#i${id30}`);root3=select_default2((sandboxElement.node()?.contentDocument??document).body)}return root3.select(`#${id30}`)},"selectSvgElement")}}),init_infoRenderer=__esm({"src/diagrams/info/infoRenderer.ts"(){init_logger(),init_selectSvgElement(),init_setupGraphViewbox(),renderer3={draw:__name((text4,id30,version3)=>{log.debug("rendering info diagram\n"+text4);const svg2=selectSvgElement(id30);configureSvgSize(svg2,100,400,!0);svg2.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${version3}`)},"draw")}}}),infoDiagram_exports={};__export(infoDiagram_exports,{diagram:()=>diagram6});var DEFAULT_PIE_CONFIG,DEFAULT_PIE_DB,sections2,showData,config2,db3,populateDb,parser7,pieStyles_default,createPieArcs,renderer4,diagram7,init_infoDiagram=__esm({"src/diagrams/info/infoDiagram.ts"(){init_infoParser(),init_infoDb(),init_infoRenderer(),diagram6={parser:parser6,db:db2,renderer:renderer3}}}),init_pieDb=__esm({"src/diagrams/pie/pieDb.ts"(){init_logger(),init_commonDb(),init_defaultConfig(),DEFAULT_PIE_CONFIG=defaultConfig_default.pie,sections2=(DEFAULT_PIE_DB={sections:new Map,showData:!1,config:DEFAULT_PIE_CONFIG}).sections,showData=DEFAULT_PIE_DB.showData,config2=structuredClone(DEFAULT_PIE_CONFIG),db3={getConfig:__name(()=>structuredClone(config2),"getConfig"),clear:__name(()=>{sections2=new Map,showData=DEFAULT_PIE_DB.showData,clear()},"clear"),setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle,setAccTitle:setAccTitle,getAccTitle:getAccTitle,setAccDescription:setAccDescription,getAccDescription:getAccDescription,addSection:__name(({label:label,value:value2})=>{if(value2<0)throw new Error(`"${label}" has invalid value: ${value2}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);sections2.has(label)||(sections2.set(label,value2),log.debug(`added new section: ${label}, with value: ${value2}`))},"addSection"),getSections:__name(()=>sections2,"getSections"),setShowData:__name(toggle=>{showData=toggle},"setShowData"),getShowData:__name(()=>showData,"getShowData")}}}),init_pieParser=__esm({"src/diagrams/pie/pieParser.ts"(){init_mermaid_parser_core(),init_logger(),init_populateCommonDb(),init_pieDb(),populateDb=__name((ast,db7)=>{populateCommonDb(ast,db7),db7.setShowData(ast.showData),ast.sections.map(db7.addSection)},"populateDb"),parser7={parse:__name(async input=>{const ast=await parse3("pie",input);log.debug(ast),populateDb(ast,db3)},"parse")}}}),init_pieStyles=__esm({"src/diagrams/pie/pieStyles.ts"(){pieStyles_default=__name(options2=>`\n  .pieCircle{\n    stroke: ${options2.pieStrokeColor};\n    stroke-width : ${options2.pieStrokeWidth};\n    opacity : ${options2.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${options2.pieOuterStrokeColor};\n    stroke-width: ${options2.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${options2.pieTitleTextSize};\n    fill: ${options2.pieTitleTextColor};\n    font-family: ${options2.fontFamily};\n  }\n  .slice {\n    font-family: ${options2.fontFamily};\n    fill: ${options2.pieSectionTextColor};\n    font-size:${options2.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${options2.pieLegendTextColor};\n    font-family: ${options2.fontFamily};\n    font-size: ${options2.pieLegendTextSize};\n  }\n`,"getStyles")}}),init_pieRenderer=__esm({"src/diagrams/pie/pieRenderer.ts"(){init_src32(),init_diagramAPI(),init_logger(),init_selectSvgElement(),init_setupGraphViewbox(),init_utils2(),createPieArcs=__name(sections6=>{const sum2=[...sections6.values()].reduce((acc,val)=>acc+val,0),pieData=[...sections6.entries()].map(([label,value2])=>({label:label,value:value2})).filter(d3=>d3.value/sum2*100>=1).sort((a2,b3)=>b3.value-a2.value);return pie_default().value(d3=>d3.value)(pieData)},"createPieArcs"),renderer4={draw:__name((text4,id30,_version,diagObj)=>{log.debug("rendering pie chart\n"+text4);const db7=diagObj.db,globalConfig=getConfig2(),pieConfig=cleanAndMerge(db7.getConfig(),globalConfig.pie),svg2=selectSvgElement(id30),group2=svg2.append("g");group2.attr("transform","translate(225,225)");const{themeVariables:themeVariables}=globalConfig;let[outerStrokeWidth]=parseFontSize(themeVariables.pieOuterStrokeWidth);outerStrokeWidth??=2;const textPosition=pieConfig.textPosition,radius2=Math.min(450,450)/2-40,arcGenerator=arc_default().innerRadius(0).outerRadius(radius2),labelArcGenerator=arc_default().innerRadius(radius2*textPosition).outerRadius(radius2*textPosition);group2.append("circle").attr("cx",0).attr("cy",0).attr("r",radius2+outerStrokeWidth/2).attr("class","pieOuterCircle");const sections6=db7.getSections(),arcs=createPieArcs(sections6),myGeneratedColors=[themeVariables.pie1,themeVariables.pie2,themeVariables.pie3,themeVariables.pie4,themeVariables.pie5,themeVariables.pie6,themeVariables.pie7,themeVariables.pie8,themeVariables.pie9,themeVariables.pie10,themeVariables.pie11,themeVariables.pie12];let sum2=0;sections6.forEach(section=>{sum2+=section});const filteredArcs=arcs.filter(datum2=>"0"!==(datum2.data.value/sum2*100).toFixed(0)),color2=ordinal(myGeneratedColors);group2.selectAll("mySlices").data(filteredArcs).enter().append("path").attr("d",arcGenerator).attr("fill",datum2=>color2(datum2.data.label)).attr("class","pieCircle"),group2.selectAll("mySlices").data(filteredArcs).enter().append("text").text(datum2=>(datum2.data.value/sum2*100).toFixed(0)+"%").attr("transform",datum2=>"translate("+labelArcGenerator.centroid(datum2)+")").style("text-anchor","middle").attr("class","slice"),group2.append("text").text(db7.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const allSectionData=[...sections6.entries()].map(([label,value2])=>({label:label,value:value2})),legend=group2.selectAll(".legend").data(allSectionData).enter().append("g").attr("class","legend").attr("transform",(_datum,index)=>"translate(216,"+(22*index-22*allSectionData.length/2)+")");legend.append("rect").attr("width",18).attr("height",18).style("fill",d3=>color2(d3.label)).style("stroke",d3=>color2(d3.label)),legend.append("text").attr("x",22).attr("y",14).text(d3=>db7.getShowData()?`${d3.label} [${d3.value}]`:d3.label);const totalWidth=512+Math.max(...legend.selectAll("text").nodes().map(node2=>node2?.getBoundingClientRect().width??0));svg2.attr("viewBox",`0 0 ${totalWidth} 450`),configureSvgSize(svg2,450,totalWidth,pieConfig.useMaxWidth)},"draw")}}}),pieDiagram_exports={};__export(pieDiagram_exports,{diagram:()=>diagram7});var parser8,quadrant_default,defaultThemeVariables,QuadrantBuilder,InvalidStyleError,init_pieDiagram=__esm({"src/diagrams/pie/pieDiagram.ts"(){init_pieParser(),init_pieDb(),init_pieStyles(),init_pieRenderer(),diagram7={parser:parser7,db:db3,renderer:renderer4,styles:pieStyles_default}}}),init_quadrant=__esm({"src/diagrams/quadrant-chart/parser/quadrant.jison"(){parser8=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,3],$V1=[1,4],$V2=[1,5],$V3=[1,6],$V4=[1,7],$V5=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],$V6=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],$V7=[55,56,57],$V8=[2,36],$V9=[1,37],$Va=[1,36],$Vb=[1,38],$Vc=[1,35],$Vd=[1,43],$Ve=[1,41],$Vf=[1,14],$Vg=[1,23],$Vh=[1,18],$Vi=[1,19],$Vj=[1,20],$Vk=[1,21],$Vl=[1,22],$Vm=[1,24],$Vn=[1,25],$Vo=[1,26],$Vp=[1,27],$Vq=[1,28],$Vr=[1,29],$Vs=[1,32],$Vt=[1,33],$Vu=[1,34],$Vv=[1,39],$Vw=[1,40],$Vx=[1,42],$Vy=[1,44],$Vz=[1,62],$VA=[1,61],$VB=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],$VC=[1,65],$VD=[1,66],$VE=[1,67],$VF=[1,68],$VG=[1,69],$VH=[1,70],$VI=[1,71],$VJ=[1,72],$VK=[1,73],$VL=[1,74],$VM=[1,75],$VN=[1,76],$VO=[4,5,6,7,8,9,10,11,12,13,14,15,18],$VP=[1,90],$VQ=[1,91],$VR=[1,92],$VS=[1,99],$VT=[1,93],$VU=[1,96],$VV=[1,94],$VW=[1,95],$VX=[1,97],$VY=[1,98],$VZ=[1,102],$V_=[10,55,56,57],$V$=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 23:case 68:this.$=$$[$0];break;case 24:case 69:this.$=$$[$0-1]+""+$$[$0];break;case 26:this.$=$$[$0-1]+$$[$0];break;case 27:this.$=[$$[$0].trim()];break;case 28:$$[$0-2].push($$[$0].trim()),this.$=$$[$0-2];break;case 29:this.$=$$[$0-4],yy.addClass($$[$0-2],$$[$0]);break;case 37:this.$=[];break;case 42:this.$=$$[$0].trim(),yy.setDiagramTitle(this.$);break;case 43:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 44:case 45:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 46:yy.addSection($$[$0].substr(8)),this.$=$$[$0].substr(8);break;case 47:yy.addPoint($$[$0-3],"",$$[$0-1],$$[$0],[]);break;case 48:yy.addPoint($$[$0-4],$$[$0-3],$$[$0-1],$$[$0],[]);break;case 49:yy.addPoint($$[$0-4],"",$$[$0-2],$$[$0-1],$$[$0]);break;case 50:yy.addPoint($$[$0-5],$$[$0-4],$$[$0-2],$$[$0-1],$$[$0]);break;case 51:yy.setXAxisLeftText($$[$0-2]),yy.setXAxisRightText($$[$0]);break;case 52:$$[$0-1].text+=" ⟶ ",yy.setXAxisLeftText($$[$0-1]);break;case 53:yy.setXAxisLeftText($$[$0]);break;case 54:yy.setYAxisBottomText($$[$0-2]),yy.setYAxisTopText($$[$0]);break;case 55:$$[$0-1].text+=" ⟶ ",yy.setYAxisBottomText($$[$0-1]);break;case 56:yy.setYAxisBottomText($$[$0]);break;case 57:yy.setQuadrant1Text($$[$0]);break;case 58:yy.setQuadrant2Text($$[$0]);break;case 59:yy.setQuadrant3Text($$[$0]);break;case 60:yy.setQuadrant4Text($$[$0]);break;case 64:case 66:this.$={text:$$[$0],type:"text"};break;case 65:this.$={text:$$[$0-1].text+""+$$[$0],type:$$[$0-1].type};break;case 67:this.$={text:$$[$0],type:"markdown"}}},"anonymous"),table:[{18:$V0,26:1,27:2,28:$V1,55:$V2,56:$V3,57:$V4},{1:[3]},{18:$V0,26:8,27:2,28:$V1,55:$V2,56:$V3,57:$V4},{18:$V0,26:9,27:2,28:$V1,55:$V2,56:$V3,57:$V4},o2($V5,[2,33],{29:10}),o2($V6,[2,61]),o2($V6,[2,62]),o2($V6,[2,63]),{1:[2,30]},{1:[2,31]},o2($V7,$V8,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$Vf,25:$Vg,35:$Vh,37:$Vi,39:$Vj,41:$Vk,42:$Vl,48:$Vm,50:$Vn,51:$Vo,52:$Vp,53:$Vq,54:$Vr,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V5,[2,34]),{27:45,55:$V2,56:$V3,57:$V4},o2($V7,[2,37]),o2($V7,$V8,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$Vf,25:$Vg,35:$Vh,37:$Vi,39:$Vj,41:$Vk,42:$Vl,48:$Vm,50:$Vn,51:$Vo,52:$Vp,53:$Vq,54:$Vr,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,39]),o2($V7,[2,40]),o2($V7,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},o2($V7,[2,45]),o2($V7,[2,46]),{18:[1,50]},{4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,43:51,58:31,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},{4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,43:52,58:31,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},{4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,43:53,58:31,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},{4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,43:54,58:31,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},{4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,43:55,58:31,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},{4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,43:56,58:31,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},{4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,44:[1,57],47:[1,58],58:60,59:59,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy},o2($VB,[2,64]),o2($VB,[2,66]),o2($VB,[2,67]),o2($VB,[2,70]),o2($VB,[2,71]),o2($VB,[2,72]),o2($VB,[2,73]),o2($VB,[2,74]),o2($VB,[2,75]),o2($VB,[2,76]),o2($VB,[2,77]),o2($VB,[2,78]),o2($VB,[2,79]),o2($VB,[2,80]),o2($V5,[2,35]),o2($V7,[2,38]),o2($V7,[2,42]),o2($V7,[2,43]),o2($V7,[2,44]),{3:64,4:$VC,5:$VD,6:$VE,7:$VF,8:$VG,9:$VH,10:$VI,11:$VJ,12:$VK,13:$VL,14:$VM,15:$VN,21:63},o2($V7,[2,53],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,49:[1,77],63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,56],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,49:[1,78],63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,57],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,58],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,59],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,60],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),{45:[1,79]},{44:[1,80]},o2($VB,[2,65]),o2($VB,[2,81]),o2($VB,[2,82]),o2($VB,[2,83]),{3:82,4:$VC,5:$VD,6:$VE,7:$VF,8:$VG,9:$VH,10:$VI,11:$VJ,12:$VK,13:$VL,14:$VM,15:$VN,18:[1,81]},o2($VO,[2,23]),o2($VO,[2,1]),o2($VO,[2,2]),o2($VO,[2,3]),o2($VO,[2,4]),o2($VO,[2,5]),o2($VO,[2,6]),o2($VO,[2,7]),o2($VO,[2,8]),o2($VO,[2,9]),o2($VO,[2,10]),o2($VO,[2,11]),o2($VO,[2,12]),o2($V7,[2,52],{58:31,43:83,4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,55],{58:31,43:84,4:$V9,5:$Va,10:$Vb,12:$Vc,13:$Vd,14:$Ve,60:$Vs,61:$Vt,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),{46:[1,85]},{45:[1,86]},{4:$VP,5:$VQ,6:$VR,8:$VS,11:$VT,13:$VU,16:89,17:$VV,18:$VW,19:$VX,20:$VY,22:88,23:87},o2($VO,[2,24]),o2($V7,[2,51],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,54],{59:59,58:60,4:$V9,5:$Va,8:$Vz,10:$Vb,12:$Vc,13:$Vd,14:$Ve,18:$VA,63:$Vu,64:$Vv,65:$Vw,66:$Vx,67:$Vy}),o2($V7,[2,47],{22:88,16:89,23:100,4:$VP,5:$VQ,6:$VR,8:$VS,11:$VT,13:$VU,17:$VV,18:$VW,19:$VX,20:$VY}),{46:[1,101]},o2($V7,[2,29],{10:$VZ}),o2($V_,[2,27],{16:103,4:$VP,5:$VQ,6:$VR,8:$VS,11:$VT,13:$VU,17:$VV,18:$VW,19:$VX,20:$VY}),o2($V$,[2,25]),o2($V$,[2,13]),o2($V$,[2,14]),o2($V$,[2,15]),o2($V$,[2,16]),o2($V$,[2,17]),o2($V$,[2,18]),o2($V$,[2,19]),o2($V$,[2,20]),o2($V$,[2,21]),o2($V$,[2,22]),o2($V7,[2,49],{10:$VZ}),o2($V7,[2,48],{22:88,16:89,23:104,4:$VP,5:$VQ,6:$VR,8:$VS,11:$VT,13:$VU,17:$VV,18:$VW,19:$VX,20:$VY}),{4:$VP,5:$VQ,6:$VR,8:$VS,11:$VT,13:$VU,16:89,17:$VV,18:$VW,19:$VX,20:$VY,22:105},o2($V$,[2,26]),o2($V7,[2,50],{10:$VZ}),o2($V_,[2,28],{16:103,4:$VP,5:$VQ,6:$VR,8:$VS,11:$VT,13:$VU,17:$VV,18:$VW,19:$VX,20:$VY})],defaultActions:{8:[2,30],9:[2,31]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:case 1:case 3:break;case 2:return 55;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 23:case 25:case 31:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 24:this.begin("string");break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser8.parser=parser8,quadrant_default=parser8}}),init_quadrantBuilder=__esm({"src/diagrams/quadrant-chart/quadrantBuilder.ts"(){init_src32(),init_defaultConfig(),init_logger(),init_theme_default(),defaultThemeVariables=getThemeVariables3(),QuadrantBuilder=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}static{__name(this,"QuadrantBuilder")}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:defaultConfig_default.quadrantChart?.chartWidth||500,chartWidth:defaultConfig_default.quadrantChart?.chartHeight||500,titlePadding:defaultConfig_default.quadrantChart?.titlePadding||10,titleFontSize:defaultConfig_default.quadrantChart?.titleFontSize||20,quadrantPadding:defaultConfig_default.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:defaultConfig_default.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:defaultConfig_default.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:defaultConfig_default.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:defaultConfig_default.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:defaultConfig_default.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:defaultConfig_default.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:defaultConfig_default.quadrantChart?.pointTextPadding||5,pointLabelFontSize:defaultConfig_default.quadrantChart?.pointLabelFontSize||12,pointRadius:defaultConfig_default.quadrantChart?.pointRadius||5,xAxisPosition:defaultConfig_default.quadrantChart?.xAxisPosition||"top",yAxisPosition:defaultConfig_default.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:defaultConfig_default.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:defaultConfig_default.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:defaultThemeVariables.quadrant1Fill,quadrant2Fill:defaultThemeVariables.quadrant2Fill,quadrant3Fill:defaultThemeVariables.quadrant3Fill,quadrant4Fill:defaultThemeVariables.quadrant4Fill,quadrant1TextFill:defaultThemeVariables.quadrant1TextFill,quadrant2TextFill:defaultThemeVariables.quadrant2TextFill,quadrant3TextFill:defaultThemeVariables.quadrant3TextFill,quadrant4TextFill:defaultThemeVariables.quadrant4TextFill,quadrantPointFill:defaultThemeVariables.quadrantPointFill,quadrantPointTextFill:defaultThemeVariables.quadrantPointTextFill,quadrantXAxisTextFill:defaultThemeVariables.quadrantXAxisTextFill,quadrantYAxisTextFill:defaultThemeVariables.quadrantYAxisTextFill,quadrantTitleFill:defaultThemeVariables.quadrantTitleFill,quadrantInternalBorderStrokeFill:defaultThemeVariables.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:defaultThemeVariables.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,log.info("clear called")}setData(data5){this.data={...this.data,...data5}}addPoints(points){this.data.points=[...points,...this.data.points]}addClass(className,styles4){this.classes.set(className,styles4)}setConfig(config5){log.trace("setConfig called with: ",config5),this.config={...this.config,...config5}}setThemeConfig(themeConfig){log.trace("setThemeConfig called with: ",themeConfig),this.themeConfig={...this.themeConfig,...themeConfig}}calculateSpace(xAxisPosition,showXAxis,showYAxis,showTitle){const xAxisSpaceCalculation=2*this.config.xAxisLabelPadding+this.config.xAxisLabelFontSize,xAxisSpace={top:"top"===xAxisPosition&&showXAxis?xAxisSpaceCalculation:0,bottom:"bottom"===xAxisPosition&&showXAxis?xAxisSpaceCalculation:0},yAxisSpaceCalculation=2*this.config.yAxisLabelPadding+this.config.yAxisLabelFontSize,yAxisSpace={left:"left"===this.config.yAxisPosition&&showYAxis?yAxisSpaceCalculation:0,right:"right"===this.config.yAxisPosition&&showYAxis?yAxisSpaceCalculation:0},titleSpaceCalculation=this.config.titleFontSize+2*this.config.titlePadding,titleSpace={top:showTitle?titleSpaceCalculation:0},quadrantLeft=this.config.quadrantPadding+yAxisSpace.left,quadrantTop=this.config.quadrantPadding+xAxisSpace.top+titleSpace.top,quadrantWidth=this.config.chartWidth-2*this.config.quadrantPadding-yAxisSpace.left-yAxisSpace.right,quadrantHeight=this.config.chartHeight-2*this.config.quadrantPadding-xAxisSpace.top-xAxisSpace.bottom-titleSpace.top;return{xAxisSpace:xAxisSpace,yAxisSpace:yAxisSpace,titleSpace:titleSpace,quadrantSpace:{quadrantLeft:quadrantLeft,quadrantTop:quadrantTop,quadrantWidth:quadrantWidth,quadrantHalfWidth:quadrantWidth/2,quadrantHeight:quadrantHeight,quadrantHalfHeight:quadrantHeight/2}}}getAxisLabels(xAxisPosition,showXAxis,showYAxis,spaceData){const{quadrantSpace:quadrantSpace,titleSpace:titleSpace}=spaceData,{quadrantHalfHeight:quadrantHalfHeight,quadrantHeight:quadrantHeight,quadrantLeft:quadrantLeft,quadrantHalfWidth:quadrantHalfWidth,quadrantTop:quadrantTop,quadrantWidth:quadrantWidth}=quadrantSpace,drawXAxisLabelsInMiddle=Boolean(this.data.xAxisRightText),drawYAxisLabelsInMiddle=Boolean(this.data.yAxisTopText),axisLabels=[];return this.data.xAxisLeftText&&showXAxis&&axisLabels.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:quadrantLeft+(drawXAxisLabelsInMiddle?quadrantHalfWidth/2:0),y:"top"===xAxisPosition?this.config.xAxisLabelPadding+titleSpace.top:this.config.xAxisLabelPadding+quadrantTop+quadrantHeight+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:drawXAxisLabelsInMiddle?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&showXAxis&&axisLabels.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:quadrantLeft+quadrantHalfWidth+(drawXAxisLabelsInMiddle?quadrantHalfWidth/2:0),y:"top"===xAxisPosition?this.config.xAxisLabelPadding+titleSpace.top:this.config.xAxisLabelPadding+quadrantTop+quadrantHeight+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:drawXAxisLabelsInMiddle?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&showYAxis&&axisLabels.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+quadrantLeft+quadrantWidth+this.config.quadrantPadding,y:quadrantTop+quadrantHeight-(drawYAxisLabelsInMiddle?quadrantHalfHeight/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:drawYAxisLabelsInMiddle?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&showYAxis&&axisLabels.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+quadrantLeft+quadrantWidth+this.config.quadrantPadding,y:quadrantTop+quadrantHalfHeight-(drawYAxisLabelsInMiddle?quadrantHalfHeight/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:drawYAxisLabelsInMiddle?"center":"left",horizontalPos:"top",rotation:-90}),axisLabels}getQuadrants(spaceData){const{quadrantSpace:quadrantSpace}=spaceData,{quadrantHalfHeight:quadrantHalfHeight,quadrantLeft:quadrantLeft,quadrantHalfWidth:quadrantHalfWidth,quadrantTop:quadrantTop}=quadrantSpace,quadrants=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:quadrantLeft+quadrantHalfWidth,y:quadrantTop,width:quadrantHalfWidth,height:quadrantHalfHeight,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:quadrantLeft,y:quadrantTop,width:quadrantHalfWidth,height:quadrantHalfHeight,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:quadrantLeft,y:quadrantTop+quadrantHalfHeight,width:quadrantHalfWidth,height:quadrantHalfHeight,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:quadrantLeft+quadrantHalfWidth,y:quadrantTop+quadrantHalfHeight,width:quadrantHalfWidth,height:quadrantHalfHeight,fill:this.themeConfig.quadrant4Fill}];for(const quadrant of quadrants)quadrant.text.x=quadrant.x+quadrant.width/2,0===this.data.points.length?(quadrant.text.y=quadrant.y+quadrant.height/2,quadrant.text.horizontalPos="middle"):(quadrant.text.y=quadrant.y+this.config.quadrantTextTopPadding,quadrant.text.horizontalPos="top");return quadrants}getQuadrantPoints(spaceData){const{quadrantSpace:quadrantSpace}=spaceData,{quadrantHeight:quadrantHeight,quadrantLeft:quadrantLeft,quadrantTop:quadrantTop,quadrantWidth:quadrantWidth}=quadrantSpace,xAxis=linear2().domain([0,1]).range([quadrantLeft,quadrantWidth+quadrantLeft]),yAxis=linear2().domain([0,1]).range([quadrantHeight+quadrantTop,quadrantTop]);return this.data.points.map(point8=>{const classStyles=this.classes.get(point8.className);classStyles&&(point8={...classStyles,...point8});return{x:xAxis(point8.x),y:yAxis(point8.y),fill:point8.color??this.themeConfig.quadrantPointFill,radius:point8.radius??this.config.pointRadius,text:{text:point8.text,fill:this.themeConfig.quadrantPointTextFill,x:xAxis(point8.x),y:yAxis(point8.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:point8.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:point8.strokeWidth??"0px"}})}getBorders(spaceData){const halfExternalBorderWidth=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:quadrantSpace}=spaceData,{quadrantHalfHeight:quadrantHalfHeight,quadrantHeight:quadrantHeight,quadrantLeft:quadrantLeft,quadrantHalfWidth:quadrantHalfWidth,quadrantTop:quadrantTop,quadrantWidth:quadrantWidth}=quadrantSpace;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:quadrantLeft-halfExternalBorderWidth,y1:quadrantTop,x2:quadrantLeft+quadrantWidth+halfExternalBorderWidth,y2:quadrantTop},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:quadrantLeft+quadrantWidth,y1:quadrantTop+halfExternalBorderWidth,x2:quadrantLeft+quadrantWidth,y2:quadrantTop+quadrantHeight-halfExternalBorderWidth},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:quadrantLeft-halfExternalBorderWidth,y1:quadrantTop+quadrantHeight,x2:quadrantLeft+quadrantWidth+halfExternalBorderWidth,y2:quadrantTop+quadrantHeight},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:quadrantLeft,y1:quadrantTop+halfExternalBorderWidth,x2:quadrantLeft,y2:quadrantTop+quadrantHeight-halfExternalBorderWidth},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:quadrantLeft+quadrantHalfWidth,y1:quadrantTop+halfExternalBorderWidth,x2:quadrantLeft+quadrantHalfWidth,y2:quadrantTop+quadrantHeight-halfExternalBorderWidth},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:quadrantLeft+halfExternalBorderWidth,y1:quadrantTop+quadrantHalfHeight,x2:quadrantLeft+quadrantWidth-halfExternalBorderWidth,y2:quadrantTop+quadrantHalfHeight}]}getTitle(showTitle){if(showTitle)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const showXAxis=this.config.showXAxis&&!(!this.data.xAxisLeftText&&!this.data.xAxisRightText),showYAxis=this.config.showYAxis&&!(!this.data.yAxisTopText&&!this.data.yAxisBottomText),showTitle=this.config.showTitle&&!!this.data.titleText,xAxisPosition=this.data.points.length>0?"bottom":this.config.xAxisPosition,calculatedSpace=this.calculateSpace(xAxisPosition,showXAxis,showYAxis,showTitle);return{points:this.getQuadrantPoints(calculatedSpace),quadrants:this.getQuadrants(calculatedSpace),axisLabels:this.getAxisLabels(xAxisPosition,showXAxis,showYAxis,calculatedSpace),borderLines:this.getBorders(calculatedSpace),title:this.getTitle(showTitle)}}}}});function validateHexCode(value2){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(value2)}function validateNumber(value2){return!/^\d+$/.test(value2)}function validateSizeInPixels(value2){return!/^\d+px$/.test(value2)}var config3,quadrantBuilder,quadrantDb_default,init_utils5=__esm({"src/diagrams/quadrant-chart/utils.ts"(){InvalidStyleError=class extends Error{static{__name(this,"InvalidStyleError")}constructor(style3,value2,type3){super(`value for ${style3} ${value2} is invalid, please use a valid ${type3}`),this.name="InvalidStyleError"}},__name(validateHexCode,"validateHexCode"),__name(validateNumber,"validateNumber"),__name(validateSizeInPixels,"validateSizeInPixels")}});function textSanitizer(text4){return sanitizeText(text4.trim(),config3)}function setQuadrant1Text(textObj){quadrantBuilder.setData({quadrant1Text:textSanitizer(textObj.text)})}function setQuadrant2Text(textObj){quadrantBuilder.setData({quadrant2Text:textSanitizer(textObj.text)})}function setQuadrant3Text(textObj){quadrantBuilder.setData({quadrant3Text:textSanitizer(textObj.text)})}function setQuadrant4Text(textObj){quadrantBuilder.setData({quadrant4Text:textSanitizer(textObj.text)})}function setXAxisLeftText(textObj){quadrantBuilder.setData({xAxisLeftText:textSanitizer(textObj.text)})}function setXAxisRightText(textObj){quadrantBuilder.setData({xAxisRightText:textSanitizer(textObj.text)})}function setYAxisTopText(textObj){quadrantBuilder.setData({yAxisTopText:textSanitizer(textObj.text)})}function setYAxisBottomText(textObj){quadrantBuilder.setData({yAxisBottomText:textSanitizer(textObj.text)})}function parseStyles(styles4){const stylesObject={};for(const style3 of styles4){const[key,value2]=style3.trim().split(/\s*:\s*/);if("radius"===key){if(validateNumber(value2))throw new InvalidStyleError(key,value2,"number");stylesObject.radius=parseInt(value2)}else if("color"===key){if(validateHexCode(value2))throw new InvalidStyleError(key,value2,"hex code");stylesObject.color=value2}else if("stroke-color"===key){if(validateHexCode(value2))throw new InvalidStyleError(key,value2,"hex code");stylesObject.strokeColor=value2}else{if("stroke-width"!==key)throw new Error(`style named ${key} is not supported.`);if(validateSizeInPixels(value2))throw new InvalidStyleError(key,value2,"number of pixels (eg. 10px)");stylesObject.strokeWidth=value2}}return stylesObject}function addPoint(textObj,className,x5,y6,styles4){const stylesObject=parseStyles(styles4);quadrantBuilder.addPoints([{x:x5,y:y6,text:textSanitizer(textObj.text),className:className,...stylesObject}])}function addClass2(className,styles4){quadrantBuilder.addClass(className,parseStyles(styles4))}function setWidth(width3){quadrantBuilder.setConfig({chartWidth:width3})}function setHeight(height2){quadrantBuilder.setConfig({chartHeight:height2})}function getQuadrantData(){const config5=getConfig2(),{themeVariables:themeVariables,quadrantChart:quadrantChartConfig}=config5;return quadrantChartConfig&&quadrantBuilder.setConfig(quadrantChartConfig),quadrantBuilder.setThemeConfig({quadrant1Fill:themeVariables.quadrant1Fill,quadrant2Fill:themeVariables.quadrant2Fill,quadrant3Fill:themeVariables.quadrant3Fill,quadrant4Fill:themeVariables.quadrant4Fill,quadrant1TextFill:themeVariables.quadrant1TextFill,quadrant2TextFill:themeVariables.quadrant2TextFill,quadrant3TextFill:themeVariables.quadrant3TextFill,quadrant4TextFill:themeVariables.quadrant4TextFill,quadrantPointFill:themeVariables.quadrantPointFill,quadrantPointTextFill:themeVariables.quadrantPointTextFill,quadrantXAxisTextFill:themeVariables.quadrantXAxisTextFill,quadrantYAxisTextFill:themeVariables.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:themeVariables.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:themeVariables.quadrantInternalBorderStrokeFill,quadrantTitleFill:themeVariables.quadrantTitleFill}),quadrantBuilder.setData({titleText:getDiagramTitle()}),quadrantBuilder.build()}var quadrantRenderer_default,diagram8,init_quadrantDb=__esm({"src/diagrams/quadrant-chart/quadrantDb.ts"(){init_diagramAPI(),init_common(),init_commonDb(),init_quadrantBuilder(),init_utils5(),config3=getConfig2(),__name(textSanitizer,"textSanitizer"),quadrantBuilder=new QuadrantBuilder,__name(setQuadrant1Text,"setQuadrant1Text"),__name(setQuadrant2Text,"setQuadrant2Text"),__name(setQuadrant3Text,"setQuadrant3Text"),__name(setQuadrant4Text,"setQuadrant4Text"),__name(setXAxisLeftText,"setXAxisLeftText"),__name(setXAxisRightText,"setXAxisRightText"),__name(setYAxisTopText,"setYAxisTopText"),__name(setYAxisBottomText,"setYAxisBottomText"),__name(parseStyles,"parseStyles"),__name(addPoint,"addPoint"),__name(addClass2,"addClass"),__name(setWidth,"setWidth"),__name(setHeight,"setHeight"),__name(getQuadrantData,"getQuadrantData"),quadrantDb_default={setWidth:setWidth,setHeight:setHeight,setQuadrant1Text:setQuadrant1Text,setQuadrant2Text:setQuadrant2Text,setQuadrant3Text:setQuadrant3Text,setQuadrant4Text:setQuadrant4Text,setXAxisLeftText:setXAxisLeftText,setXAxisRightText:setXAxisRightText,setYAxisTopText:setYAxisTopText,setYAxisBottomText:setYAxisBottomText,parseStyles:parseStyles,addPoint:addPoint,addClass:addClass2,getQuadrantData:getQuadrantData,clear:__name(function(){quadrantBuilder.clear(),clear()},"clear"),setAccTitle:setAccTitle,getAccTitle:getAccTitle,setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle,getAccDescription:getAccDescription,setAccDescription:setAccDescription}}}),init_quadrantRenderer=__esm({"src/diagrams/quadrant-chart/quadrantRenderer.ts"(){init_src32(),init_diagramAPI(),init_logger(),init_setupGraphViewbox(),quadrantRenderer_default={draw:__name((txt,id30,_version,diagObj)=>{function getDominantBaseLine(horizontalPos){return"top"===horizontalPos?"hanging":"middle"}function getTextAnchor(verticalPos){return"left"===verticalPos?"start":"middle"}function getTransformation(data5){return`translate(${data5.x}, ${data5.y}) rotate(${data5.rotation||0})`}__name(getDominantBaseLine,"getDominantBaseLine"),__name(getTextAnchor,"getTextAnchor"),__name(getTransformation,"getTransformation");const conf5=getConfig2();log.debug("Rendering quadrant chart\n"+txt);const securityLevel=conf5.securityLevel;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const svg2=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body").select(`[id="${id30}"]`),group2=svg2.append("g").attr("class","main"),width3=conf5.quadrantChart?.chartWidth??500,height2=conf5.quadrantChart?.chartHeight??500;configureSvgSize(svg2,height2,width3,conf5.quadrantChart?.useMaxWidth??!0),svg2.attr("viewBox","0 0 "+width3+" "+height2),diagObj.db.setHeight(height2),diagObj.db.setWidth(width3);const quadrantData=diagObj.db.getQuadrantData(),quadrantsGroup=group2.append("g").attr("class","quadrants"),borderGroup=group2.append("g").attr("class","border"),dataPointGroup=group2.append("g").attr("class","data-points"),labelGroup=group2.append("g").attr("class","labels"),titleGroup=group2.append("g").attr("class","title");quadrantData.title&&titleGroup.append("text").attr("x",0).attr("y",0).attr("fill",quadrantData.title.fill).attr("font-size",quadrantData.title.fontSize).attr("dominant-baseline",getDominantBaseLine(quadrantData.title.horizontalPos)).attr("text-anchor",getTextAnchor(quadrantData.title.verticalPos)).attr("transform",getTransformation(quadrantData.title)).text(quadrantData.title.text),quadrantData.borderLines&&borderGroup.selectAll("line").data(quadrantData.borderLines).enter().append("line").attr("x1",data5=>data5.x1).attr("y1",data5=>data5.y1).attr("x2",data5=>data5.x2).attr("y2",data5=>data5.y2).style("stroke",data5=>data5.strokeFill).style("stroke-width",data5=>data5.strokeWidth);const quadrants=quadrantsGroup.selectAll("g.quadrant").data(quadrantData.quadrants).enter().append("g").attr("class","quadrant");quadrants.append("rect").attr("x",data5=>data5.x).attr("y",data5=>data5.y).attr("width",data5=>data5.width).attr("height",data5=>data5.height).attr("fill",data5=>data5.fill),quadrants.append("text").attr("x",0).attr("y",0).attr("fill",data5=>data5.text.fill).attr("font-size",data5=>data5.text.fontSize).attr("dominant-baseline",data5=>getDominantBaseLine(data5.text.horizontalPos)).attr("text-anchor",data5=>getTextAnchor(data5.text.verticalPos)).attr("transform",data5=>getTransformation(data5.text)).text(data5=>data5.text.text);labelGroup.selectAll("g.label").data(quadrantData.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(data5=>data5.text).attr("fill",data5=>data5.fill).attr("font-size",data5=>data5.fontSize).attr("dominant-baseline",data5=>getDominantBaseLine(data5.horizontalPos)).attr("text-anchor",data5=>getTextAnchor(data5.verticalPos)).attr("transform",data5=>getTransformation(data5));const dataPoints=dataPointGroup.selectAll("g.data-point").data(quadrantData.points).enter().append("g").attr("class","data-point");dataPoints.append("circle").attr("cx",data5=>data5.x).attr("cy",data5=>data5.y).attr("r",data5=>data5.radius).attr("fill",data5=>data5.fill).attr("stroke",data5=>data5.strokeColor).attr("stroke-width",data5=>data5.strokeWidth),dataPoints.append("text").attr("x",0).attr("y",0).text(data5=>data5.text.text).attr("fill",data5=>data5.text.fill).attr("font-size",data5=>data5.text.fontSize).attr("dominant-baseline",data5=>getDominantBaseLine(data5.text.horizontalPos)).attr("text-anchor",data5=>getTextAnchor(data5.text.verticalPos)).attr("transform",data5=>getTransformation(data5.text))},"draw")}}}),quadrantDiagram_exports={};__export(quadrantDiagram_exports,{diagram:()=>diagram8});var parser9,xychart_default,init_quadrantDiagram=__esm({"src/diagrams/quadrant-chart/quadrantDiagram.ts"(){init_quadrant(),init_quadrantDb(),init_quadrantRenderer(),diagram8={parser:quadrant_default,db:quadrantDb_default,renderer:quadrantRenderer_default,styles:__name(()=>"","styles")}}}),init_xychart=__esm({"src/diagrams/xychart/parser/xychart.jison"(){parser9=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,10,12,14,16,18,19,21,23],$V1=[2,6],$V2=[1,3],$V3=[1,5],$V4=[1,6],$V5=[1,7],$V6=[1,5,10,12,14,16,18,19,21,23,34,35,36],$V7=[1,25],$V8=[1,26],$V9=[1,28],$Va=[1,29],$Vb=[1,30],$Vc=[1,31],$Vd=[1,32],$Ve=[1,33],$Vf=[1,34],$Vg=[1,35],$Vh=[1,36],$Vi=[1,37],$Vj=[1,43],$Vk=[1,42],$Vl=[1,47],$Vm=[1,50],$Vn=[1,10,12,14,16,18,19,21,23,34,35,36],$Vo=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],$Vp=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],$Vq=[1,64],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 5:yy.setOrientation($$[$0]);break;case 9:yy.setDiagramTitle($$[$0].text.trim());break;case 12:yy.setLineData({text:"",type:"text"},$$[$0]);break;case 13:yy.setLineData($$[$0-1],$$[$0]);break;case 14:yy.setBarData({text:"",type:"text"},$$[$0]);break;case 15:yy.setBarData($$[$0-1],$$[$0]);break;case 16:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 17:case 18:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 19:case 27:this.$=$$[$0-1];break;case 20:this.$=[Number($$[$0-2]),...$$[$0]];break;case 21:this.$=[Number($$[$0])];break;case 22:yy.setXAxisTitle($$[$0]);break;case 23:yy.setXAxisTitle($$[$0-1]);break;case 24:yy.setXAxisTitle({type:"text",text:""});break;case 25:yy.setXAxisBand($$[$0]);break;case 26:yy.setXAxisRangeData(Number($$[$0-2]),Number($$[$0]));break;case 28:this.$=[$$[$0-2],...$$[$0]];break;case 29:this.$=[$$[$0]];break;case 30:yy.setYAxisTitle($$[$0]);break;case 31:yy.setYAxisTitle($$[$0-1]);break;case 32:yy.setYAxisTitle({type:"text",text:""});break;case 33:yy.setYAxisRangeData(Number($$[$0-2]),Number($$[$0]));break;case 37:case 38:this.$={text:$$[$0],type:"text"};break;case 39:this.$={text:$$[$0],type:"markdown"};break;case 40:this.$=$$[$0];break;case 41:this.$=$$[$0-1]+""+$$[$0]}},"anonymous"),table:[o2($V0,$V1,{3:1,4:2,7:4,5:$V2,34:$V3,35:$V4,36:$V5}),{1:[3]},o2($V0,$V1,{4:2,7:4,3:8,5:$V2,34:$V3,35:$V4,36:$V5}),o2($V0,$V1,{4:2,7:4,6:9,3:10,5:$V2,8:[1,11],34:$V3,35:$V4,36:$V5}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},o2($V6,[2,34]),o2($V6,[2,35]),o2($V6,[2,36]),{1:[2,1]},o2($V0,$V1,{4:2,7:4,3:21,5:$V2,34:$V3,35:$V4,36:$V5}),{1:[2,3]},o2($V6,[2,5]),o2($V0,[2,7],{4:22,34:$V3,35:$V4,36:$V5}),{11:23,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},{11:39,13:38,24:$Vj,27:$Vk,29:40,30:41,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},{11:45,15:44,27:$Vl,33:46,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},{11:49,17:48,24:$Vm,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},{11:52,17:51,24:$Vm,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},{20:[1,53]},{22:[1,54]},o2($Vn,[2,18]),{1:[2,2]},o2($Vn,[2,8]),o2($Vn,[2,9]),o2($Vo,[2,37],{40:55,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi}),o2($Vo,[2,38]),o2($Vo,[2,39]),o2($Vp,[2,40]),o2($Vp,[2,42]),o2($Vp,[2,43]),o2($Vp,[2,44]),o2($Vp,[2,45]),o2($Vp,[2,46]),o2($Vp,[2,47]),o2($Vp,[2,48]),o2($Vp,[2,49]),o2($Vp,[2,50]),o2($Vp,[2,51]),o2($Vn,[2,10]),o2($Vn,[2,22],{30:41,29:56,24:$Vj,27:$Vk}),o2($Vn,[2,24]),o2($Vn,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},o2($Vn,[2,11]),o2($Vn,[2,30],{33:60,27:$Vl}),o2($Vn,[2,32]),{31:[1,61]},o2($Vn,[2,12]),{17:62,24:$Vm},{25:63,27:$Vq},o2($Vn,[2,14]),{17:65,24:$Vm},o2($Vn,[2,16]),o2($Vn,[2,17]),o2($Vp,[2,41]),o2($Vn,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},o2($Vn,[2,31]),{27:[1,69]},o2($Vn,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},o2($Vn,[2,15]),o2($Vn,[2,26]),o2($Vn,[2,27]),{11:59,32:72,37:24,38:$V7,39:$V8,40:27,41:$V9,42:$Va,43:$Vb,44:$Vc,45:$Vd,46:$Ve,47:$Vf,48:$Vg,49:$Vh,50:$Vi},o2($Vn,[2,33]),o2($Vn,[2,19]),{25:73,27:$Vq},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:case 1:case 5:case 44:break;case 2:case 3:return this.popState(),34;case 4:return 34;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:case 26:case 28:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:case 15:return 5;case 16:return 8;case 17:return this.pushState("axis_data"),"X_AXIS";case 18:return this.pushState("axis_data"),"Y_AXIS";case 19:return this.pushState("axis_band_data"),24;case 20:return 31;case 21:return this.pushState("data"),16;case 22:return this.pushState("data"),18;case 23:return this.pushState("data_inner"),24;case 24:return 27;case 25:return this.popState(),26;case 27:this.pushState("string");break;case 29:return"STR";case 30:return 24;case 31:return 26;case 32:return 43;case 33:return"COLON";case 34:return 44;case 35:return 28;case 36:return 45;case 37:return 46;case 38:return 48;case 39:return 50;case 40:return 47;case 41:return 41;case 42:return 49;case 43:return 42;case 45:return 35;case 46:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:xychart\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,24,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,18,21,22,23,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,22,24,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[28,29],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser9.parser=parser9,xychart_default=parser9}});function isBarPlot(data5){return"bar"===data5.type}function isBandAxisData(data5){return"band"===data5.type}function isLinearAxisData(data5){return"linear"===data5.type}var TextDimensionCalculatorWithFont,BaseAxis,BandAxis,LinearAxis,init_interfaces=__esm({"src/diagrams/xychart/chartBuilder/interfaces.ts"(){__name(isBarPlot,"isBarPlot"),__name(isBandAxisData,"isBandAxisData"),__name(isLinearAxisData,"isLinearAxisData")}}),init_textDimensionCalculator=__esm({"src/diagrams/xychart/chartBuilder/textDimensionCalculator.ts"(){init_createText(),TextDimensionCalculatorWithFont=class{constructor(parentGroup){this.parentGroup=parentGroup}static{__name(this,"TextDimensionCalculatorWithFont")}getMaxDimension(texts,fontSize){if(!this.parentGroup)return{width:texts.reduce((acc,cur)=>Math.max(cur.length,acc),0)*fontSize,height:fontSize};const dimension={width:0,height:0},elem=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",fontSize);for(const t4 of texts){const bbox=computeDimensionOfText(elem,1,t4),width3=bbox?bbox.width:t4.length*fontSize,height2=bbox?bbox.height:fontSize;dimension.width=Math.max(dimension.width,width3),dimension.height=Math.max(dimension.height,height2)}return elem.remove(),dimension}}}}),init_baseAxis=__esm({"src/diagrams/xychart/chartBuilder/components/axis/baseAxis.ts"(){BaseAxis=class{constructor(axisConfig,title2,textDimensionCalculator,axisThemeConfig){this.axisConfig=axisConfig,this.title=title2,this.textDimensionCalculator=textDimensionCalculator,this.axisThemeConfig=axisThemeConfig,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}static{__name(this,"BaseAxis")}setRange(range3){this.range=range3,"left"===this.axisPosition||"right"===this.axisPosition?this.boundingRect.height=range3[1]-range3[0]:this.boundingRect.width=range3[1]-range3[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(axisPosition){this.axisPosition=axisPosition,this.setRange(this.range)}getTickDistance(){const range3=this.getRange();return Math.abs(range3[0]-range3[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(tick=>tick.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){.7*this.getTickDistance()>2*this.outerPadding&&(this.outerPadding=Math.floor(.7*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(availableSpace){let availableHeight=availableSpace.height;if(this.axisConfig.showAxisLine&&availableHeight>this.axisConfig.axisLineWidth&&(availableHeight-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const spaceRequired=this.getLabelDimension(),maxPadding=.2*availableSpace.width;this.outerPadding=Math.min(spaceRequired.width/2,maxPadding);const heightRequired=spaceRequired.height+2*this.axisConfig.labelPadding;this.labelTextHeight=spaceRequired.height,heightRequired<=availableHeight&&(availableHeight-=heightRequired,this.showLabel=!0)}if(this.axisConfig.showTick&&availableHeight>=this.axisConfig.tickLength&&(this.showTick=!0,availableHeight-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const spaceRequired=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),heightRequired=spaceRequired.height+2*this.axisConfig.titlePadding;this.titleTextHeight=spaceRequired.height,heightRequired<=availableHeight&&(availableHeight-=heightRequired,this.showTitle=!0)}this.boundingRect.width=availableSpace.width,this.boundingRect.height=availableSpace.height-availableHeight}calculateSpaceIfDrawnVertical(availableSpace){let availableWidth=availableSpace.width;if(this.axisConfig.showAxisLine&&availableWidth>this.axisConfig.axisLineWidth&&(availableWidth-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const spaceRequired=this.getLabelDimension(),maxPadding=.2*availableSpace.height;this.outerPadding=Math.min(spaceRequired.height/2,maxPadding);const widthRequired=spaceRequired.width+2*this.axisConfig.labelPadding;widthRequired<=availableWidth&&(availableWidth-=widthRequired,this.showLabel=!0)}if(this.axisConfig.showTick&&availableWidth>=this.axisConfig.tickLength&&(this.showTick=!0,availableWidth-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const spaceRequired=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),widthRequired=spaceRequired.height+2*this.axisConfig.titlePadding;this.titleTextHeight=spaceRequired.height,widthRequired<=availableWidth&&(availableWidth-=widthRequired,this.showTitle=!0)}this.boundingRect.width=availableSpace.width-availableWidth,this.boundingRect.height=availableSpace.height}calculateSpace(availableSpace){return"left"===this.axisPosition||"right"===this.axisPosition?this.calculateSpaceIfDrawnVertical(availableSpace):this.calculateSpaceIfDrawnHorizontally(availableSpace),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(point8){this.boundingRect.x=point8.x,this.boundingRect.y=point8.y}getDrawableElementsForLeftAxis(){const drawableElement=[];if(this.showAxisLine){const x5=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;drawableElement.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${x5},${this.boundingRect.y} L ${x5},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&drawableElement.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(tick=>({text:tick.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(tick),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const x5=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);drawableElement.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(tick=>({path:`M ${x5},${this.getScaleValue(tick)} L ${x5-this.axisConfig.tickLength},${this.getScaleValue(tick)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&drawableElement.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),drawableElement}getDrawableElementsForBottomAxis(){const drawableElement=[];if(this.showAxisLine){const y6=this.boundingRect.y+this.axisConfig.axisLineWidth/2;drawableElement.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${y6} L ${this.boundingRect.x+this.boundingRect.width},${y6}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&drawableElement.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(tick=>({text:tick.toString(),x:this.getScaleValue(tick),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const y6=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);drawableElement.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(tick=>({path:`M ${this.getScaleValue(tick)},${y6} L ${this.getScaleValue(tick)},${y6+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&drawableElement.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),drawableElement}getDrawableElementsForTopAxis(){const drawableElement=[];if(this.showAxisLine){const y6=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;drawableElement.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${y6} L ${this.boundingRect.x+this.boundingRect.width},${y6}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&drawableElement.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(tick=>({text:tick.toString(),x:this.getScaleValue(tick),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+2*this.axisConfig.titlePadding:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const y6=this.boundingRect.y;drawableElement.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(tick=>({path:`M ${this.getScaleValue(tick)},${y6+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(tick)},${y6+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&drawableElement.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),drawableElement}getDrawableElements(){if("left"===this.axisPosition)return this.getDrawableElementsForLeftAxis();if("right"===this.axisPosition)throw Error("Drawing of right axis is not implemented");return"bottom"===this.axisPosition?this.getDrawableElementsForBottomAxis():"top"===this.axisPosition?this.getDrawableElementsForTopAxis():[]}}}}),init_bandAxis=__esm({"src/diagrams/xychart/chartBuilder/components/axis/bandAxis.ts"(){init_src32(),init_logger(),init_baseAxis(),BandAxis=class extends BaseAxis{static{__name(this,"BandAxis")}constructor(axisConfig,axisThemeConfig,categories,title2,textDimensionCalculator){super(axisConfig,title2,textDimensionCalculator,axisThemeConfig),this.categories=categories,this.scale=band().domain(this.categories).range(this.getRange())}setRange(range3){super.setRange(range3)}recalculateScale(){this.scale=band().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),log.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(value2){return this.scale(value2)??this.getRange()[0]}}}}),init_linearAxis=__esm({"src/diagrams/xychart/chartBuilder/components/axis/linearAxis.ts"(){init_src32(),init_baseAxis(),LinearAxis=class extends BaseAxis{static{__name(this,"LinearAxis")}constructor(axisConfig,axisThemeConfig,domain,title2,textDimensionCalculator){super(axisConfig,title2,textDimensionCalculator,axisThemeConfig),this.domain=domain,this.scale=linear2().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const domain=[...this.domain];"left"===this.axisPosition&&domain.reverse(),this.scale=linear2().domain(domain).range(this.getRange())}getScaleValue(value2){return this.scale(value2)}}}});function getAxis(data5,axisConfig,axisThemeConfig,tmpSVGGroup2){const textDimensionCalculator=new TextDimensionCalculatorWithFont(tmpSVGGroup2);return isBandAxisData(data5)?new BandAxis(axisConfig,axisThemeConfig,data5.categories,data5.title,textDimensionCalculator):new LinearAxis(axisConfig,axisThemeConfig,[data5.min,data5.max],data5.title,textDimensionCalculator)}var ChartTitle,init_axis2=__esm({"src/diagrams/xychart/chartBuilder/components/axis/index.ts"(){init_interfaces(),init_textDimensionCalculator(),init_bandAxis(),init_linearAxis(),__name(getAxis,"getAxis")}});function getChartTitleComponent(chartConfig,chartData,chartThemeConfig,tmpSVGGroup2){const textDimensionCalculator=new TextDimensionCalculatorWithFont(tmpSVGGroup2);return new ChartTitle(textDimensionCalculator,chartConfig,chartData,chartThemeConfig)}var LinePlot,BarPlot,BasePlot,init_chartTitle=__esm({"src/diagrams/xychart/chartBuilder/components/chartTitle.ts"(){init_textDimensionCalculator(),ChartTitle=class{constructor(textDimensionCalculator,chartConfig,chartData,chartThemeConfig){this.textDimensionCalculator=textDimensionCalculator,this.chartConfig=chartConfig,this.chartData=chartData,this.chartThemeConfig=chartThemeConfig,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}static{__name(this,"ChartTitle")}setBoundingBoxXY(point8){this.boundingRect.x=point8.x,this.boundingRect.y=point8.y}calculateSpace(availableSpace){const titleDimension=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),widthRequired=Math.max(titleDimension.width,availableSpace.width),heightRequired=titleDimension.height+2*this.chartConfig.titlePadding;return titleDimension.width<=widthRequired&&titleDimension.height<=heightRequired&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=widthRequired,this.boundingRect.height=heightRequired,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const drawableElem=[];return this.showChartTitle&&drawableElem.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),drawableElem}},__name(getChartTitleComponent,"getChartTitleComponent")}}),init_linePlot=__esm({"src/diagrams/xychart/chartBuilder/components/plot/linePlot.ts"(){init_src32(),LinePlot=class{constructor(plotData,xAxis,yAxis,orientation,plotIndex2){this.plotData=plotData,this.xAxis=xAxis,this.yAxis=yAxis,this.orientation=orientation,this.plotIndex=plotIndex2}static{__name(this,"LinePlot")}getDrawableElement(){const finalData=this.plotData.data.map(d3=>[this.xAxis.getScaleValue(d3[0]),this.yAxis.getScaleValue(d3[1])]);let path4;return path4="horizontal"===this.orientation?line_default().y(d3=>d3[0]).x(d3=>d3[1])(finalData):line_default().x(d3=>d3[0]).y(d3=>d3[1])(finalData),path4?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:path4,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}}}),init_barPlot=__esm({"src/diagrams/xychart/chartBuilder/components/plot/barPlot.ts"(){BarPlot=class{constructor(barData,boundingRect,xAxis,yAxis,orientation,plotIndex2){this.barData=barData,this.boundingRect=boundingRect,this.xAxis=xAxis,this.yAxis=yAxis,this.orientation=orientation,this.plotIndex=plotIndex2}static{__name(this,"BarPlot")}getDrawableElement(){const finalData=this.barData.data.map(d3=>[this.xAxis.getScaleValue(d3[0]),this.yAxis.getScaleValue(d3[1])]),barWidth=.95*Math.min(2*this.xAxis.getAxisOuterPadding(),this.xAxis.getTickDistance()),barWidthHalf=barWidth/2;return"horizontal"===this.orientation?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:finalData.map(data5=>({x:this.boundingRect.x,y:data5[0]-barWidthHalf,height:barWidth,width:data5[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:finalData.map(data5=>({x:data5[0]-barWidthHalf,y:data5[1],width:barWidth,height:this.boundingRect.y+this.boundingRect.height-data5[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}}}});function getPlotComponent(chartConfig,chartData,chartThemeConfig){return new BasePlot(chartConfig,chartData,chartThemeConfig)}var Orchestrator,XYChartBuilder,plotIndex,tmpSVGGroup,xyChartConfig,xyChartThemeConfig,xyChartData,plotColorPalette,hasSetXAxis,hasSetYAxis,xychartDb_default,init_plot=__esm({"src/diagrams/xychart/chartBuilder/components/plot/index.ts"(){init_linePlot(),init_barPlot(),BasePlot=class{constructor(chartConfig,chartData,chartThemeConfig){this.chartConfig=chartConfig,this.chartData=chartData,this.chartThemeConfig=chartThemeConfig,this.boundingRect={x:0,y:0,width:0,height:0}}static{__name(this,"BasePlot")}setAxes(xAxis,yAxis){this.xAxis=xAxis,this.yAxis=yAxis}setBoundingBoxXY(point8){this.boundingRect.x=point8.x,this.boundingRect.y=point8.y}calculateSpace(availableSpace){return this.boundingRect.width=availableSpace.width,this.boundingRect.height=availableSpace.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!this.xAxis||!this.yAxis)throw Error("Axes must be passed to render Plots");const drawableElem=[];for(const[i2,plot]of this.chartData.plots.entries())switch(plot.type){case"line":{const linePlot=new LinePlot(plot,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i2);drawableElem.push(...linePlot.getDrawableElement())}break;case"bar":{const barPlot=new BarPlot(plot,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i2);drawableElem.push(...barPlot.getDrawableElement())}}return drawableElem}},__name(getPlotComponent,"getPlotComponent")}}),init_orchestrator=__esm({"src/diagrams/xychart/chartBuilder/orchestrator.ts"(){init_axis2(),init_chartTitle(),init_plot(),init_interfaces(),Orchestrator=class{constructor(chartConfig,chartData,chartThemeConfig,tmpSVGGroup2){this.chartConfig=chartConfig,this.chartData=chartData,this.componentStore={title:getChartTitleComponent(chartConfig,chartData,chartThemeConfig,tmpSVGGroup2),plot:getPlotComponent(chartConfig,chartData,chartThemeConfig),xAxis:getAxis(chartData.xAxis,chartConfig.xAxis,{titleColor:chartThemeConfig.xAxisTitleColor,labelColor:chartThemeConfig.xAxisLabelColor,tickColor:chartThemeConfig.xAxisTickColor,axisLineColor:chartThemeConfig.xAxisLineColor},tmpSVGGroup2),yAxis:getAxis(chartData.yAxis,chartConfig.yAxis,{titleColor:chartThemeConfig.yAxisTitleColor,labelColor:chartThemeConfig.yAxisLabelColor,tickColor:chartThemeConfig.yAxisTickColor,axisLineColor:chartThemeConfig.yAxisLineColor},tmpSVGGroup2)}}static{__name(this,"Orchestrator")}calculateVerticalSpace(){let availableWidth=this.chartConfig.width,availableHeight=this.chartConfig.height,plotX=0,plotY=0,chartWidth=Math.floor(availableWidth*this.chartConfig.plotReservedSpacePercent/100),chartHeight=Math.floor(availableHeight*this.chartConfig.plotReservedSpacePercent/100),spaceUsed=this.componentStore.plot.calculateSpace({width:chartWidth,height:chartHeight});availableWidth-=spaceUsed.width,availableHeight-=spaceUsed.height,spaceUsed=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:availableHeight}),plotY=spaceUsed.height,availableHeight-=spaceUsed.height,this.componentStore.xAxis.setAxisPosition("bottom"),spaceUsed=this.componentStore.xAxis.calculateSpace({width:availableWidth,height:availableHeight}),availableHeight-=spaceUsed.height,this.componentStore.yAxis.setAxisPosition("left"),spaceUsed=this.componentStore.yAxis.calculateSpace({width:availableWidth,height:availableHeight}),plotX=spaceUsed.width,availableWidth-=spaceUsed.width,availableWidth>0&&(chartWidth+=availableWidth,availableWidth=0),availableHeight>0&&(chartHeight+=availableHeight,availableHeight=0),this.componentStore.plot.calculateSpace({width:chartWidth,height:chartHeight}),this.componentStore.plot.setBoundingBoxXY({x:plotX,y:plotY}),this.componentStore.xAxis.setRange([plotX,plotX+chartWidth]),this.componentStore.xAxis.setBoundingBoxXY({x:plotX,y:plotY+chartHeight}),this.componentStore.yAxis.setRange([plotY,plotY+chartHeight]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:plotY}),this.chartData.plots.some(p3=>isBarPlot(p3))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let availableWidth=this.chartConfig.width,availableHeight=this.chartConfig.height,titleYEnd=0,plotX=0,plotY=0,chartWidth=Math.floor(availableWidth*this.chartConfig.plotReservedSpacePercent/100),chartHeight=Math.floor(availableHeight*this.chartConfig.plotReservedSpacePercent/100),spaceUsed=this.componentStore.plot.calculateSpace({width:chartWidth,height:chartHeight});availableWidth-=spaceUsed.width,availableHeight-=spaceUsed.height,spaceUsed=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:availableHeight}),titleYEnd=spaceUsed.height,availableHeight-=spaceUsed.height,this.componentStore.xAxis.setAxisPosition("left"),spaceUsed=this.componentStore.xAxis.calculateSpace({width:availableWidth,height:availableHeight}),availableWidth-=spaceUsed.width,plotX=spaceUsed.width,this.componentStore.yAxis.setAxisPosition("top"),spaceUsed=this.componentStore.yAxis.calculateSpace({width:availableWidth,height:availableHeight}),availableHeight-=spaceUsed.height,plotY=titleYEnd+spaceUsed.height,availableWidth>0&&(chartWidth+=availableWidth,availableWidth=0),availableHeight>0&&(chartHeight+=availableHeight,availableHeight=0),this.componentStore.plot.calculateSpace({width:chartWidth,height:chartHeight}),this.componentStore.plot.setBoundingBoxXY({x:plotX,y:plotY}),this.componentStore.yAxis.setRange([plotX,plotX+chartWidth]),this.componentStore.yAxis.setBoundingBoxXY({x:plotX,y:titleYEnd}),this.componentStore.xAxis.setRange([plotY,plotY+chartHeight]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:plotY}),this.chartData.plots.some(p3=>isBarPlot(p3))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){"horizontal"===this.chartConfig.chartOrientation?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const drawableElem=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const component2 of Object.values(this.componentStore))drawableElem.push(...component2.getDrawableElements());return drawableElem}}}}),init_chartBuilder=__esm({"src/diagrams/xychart/chartBuilder/index.ts"(){init_orchestrator(),XYChartBuilder=class{static{__name(this,"XYChartBuilder")}static build(config5,chartData,chartThemeConfig,tmpSVGGroup2){return new Orchestrator(config5,chartData,chartThemeConfig,tmpSVGGroup2).getDrawableElement()}}}});function getChartDefaultThemeConfig(){const defaultThemeVariables2=getThemeVariables3(),config5=getConfig();return cleanAndMerge(defaultThemeVariables2.xyChart,config5.themeVariables.xyChart)}function getChartDefaultConfig(){const config5=getConfig();return cleanAndMerge(defaultConfig_default.xyChart,config5.xyChart)}function getChartDefaultData(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function textSanitizer2(text4){const config5=getConfig();return sanitizeText(text4.trim(),config5)}function setTmpSVGG(SVGG){tmpSVGGroup=SVGG}function setOrientation(orientation){xyChartConfig.chartOrientation="horizontal"===orientation?"horizontal":"vertical"}function setXAxisTitle(title2){xyChartData.xAxis.title=textSanitizer2(title2.text)}function setXAxisRangeData(min9,max10){xyChartData.xAxis={type:"linear",title:xyChartData.xAxis.title,min:min9,max:max10},hasSetXAxis=!0}function setXAxisBand(categories){xyChartData.xAxis={type:"band",title:xyChartData.xAxis.title,categories:categories.map(c3=>textSanitizer2(c3.text))},hasSetXAxis=!0}function setYAxisTitle(title2){xyChartData.yAxis.title=textSanitizer2(title2.text)}function setYAxisRangeData(min9,max10){xyChartData.yAxis={type:"linear",title:xyChartData.yAxis.title,min:min9,max:max10},hasSetYAxis=!0}function setYAxisRangeFromPlotData(data5){const minValue=Math.min(...data5),maxValue=Math.max(...data5),prevMinValue=isLinearAxisData(xyChartData.yAxis)?xyChartData.yAxis.min:1/0,prevMaxValue=isLinearAxisData(xyChartData.yAxis)?xyChartData.yAxis.max:-1/0;xyChartData.yAxis={type:"linear",title:xyChartData.yAxis.title,min:Math.min(prevMinValue,minValue),max:Math.max(prevMaxValue,maxValue)}}function transformDataWithoutCategory(data5){let retData=[];if(0===data5.length)return retData;if(!hasSetXAxis){const prevMinValue=isLinearAxisData(xyChartData.xAxis)?xyChartData.xAxis.min:1/0,prevMaxValue=isLinearAxisData(xyChartData.xAxis)?xyChartData.xAxis.max:-1/0;setXAxisRangeData(Math.min(prevMinValue,1),Math.max(prevMaxValue,data5.length))}if(hasSetYAxis||setYAxisRangeFromPlotData(data5),isBandAxisData(xyChartData.xAxis)&&(retData=xyChartData.xAxis.categories.map((c3,i2)=>[c3,data5[i2]])),isLinearAxisData(xyChartData.xAxis)){const min9=xyChartData.xAxis.min,max10=xyChartData.xAxis.max,step3=(max10-min9)/(data5.length-1),categories=[];for(let i2=min9;i2<=max10;i2+=step3)categories.push(`${i2}`);retData=categories.map((c3,i2)=>[c3,data5[i2]])}return retData}function getPlotColorFromPalette(plotIndex2){return plotColorPalette[0===plotIndex2?0:plotIndex2%plotColorPalette.length]}function setLineData(title2,data5){const plotData=transformDataWithoutCategory(data5);xyChartData.plots.push({type:"line",strokeFill:getPlotColorFromPalette(plotIndex),strokeWidth:2,data:plotData}),plotIndex++}function setBarData(title2,data5){const plotData=transformDataWithoutCategory(data5);xyChartData.plots.push({type:"bar",fill:getPlotColorFromPalette(plotIndex),data:plotData}),plotIndex++}function getDrawableElem(){if(0===xyChartData.plots.length)throw Error("No Plot to render, please provide a plot with some data");return xyChartData.title=getDiagramTitle(),XYChartBuilder.build(xyChartConfig,xyChartData,xyChartThemeConfig,tmpSVGGroup)}function getChartThemeConfig(){return xyChartThemeConfig}function getChartConfig(){return xyChartConfig}function getXYChartData(){return xyChartData}var draw9,xychartRenderer_default,diagram9,init_xychartDb=__esm({"src/diagrams/xychart/xychartDb.ts"(){init_config(),init_defaultConfig(),init_theme_default(),init_utils2(),init_common(),init_commonDb(),init_chartBuilder(),init_interfaces(),plotIndex=0,xyChartConfig=getChartDefaultConfig(),xyChartThemeConfig=getChartDefaultThemeConfig(),xyChartData={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},plotColorPalette=xyChartThemeConfig.plotColorPalette.split(",").map(color2=>color2.trim()),hasSetXAxis=!1,hasSetYAxis=!1,__name(getChartDefaultThemeConfig,"getChartDefaultThemeConfig"),__name(getChartDefaultConfig,"getChartDefaultConfig"),__name(getChartDefaultData,"getChartDefaultData"),__name(textSanitizer2,"textSanitizer"),__name(setTmpSVGG,"setTmpSVGG"),__name(setOrientation,"setOrientation"),__name(setXAxisTitle,"setXAxisTitle"),__name(setXAxisRangeData,"setXAxisRangeData"),__name(setXAxisBand,"setXAxisBand"),__name(setYAxisTitle,"setYAxisTitle"),__name(setYAxisRangeData,"setYAxisRangeData"),__name(setYAxisRangeFromPlotData,"setYAxisRangeFromPlotData"),__name(transformDataWithoutCategory,"transformDataWithoutCategory"),__name(getPlotColorFromPalette,"getPlotColorFromPalette"),__name(setLineData,"setLineData"),__name(setBarData,"setBarData"),__name(getDrawableElem,"getDrawableElem"),__name(getChartThemeConfig,"getChartThemeConfig"),__name(getChartConfig,"getChartConfig"),__name(getXYChartData,"getXYChartData"),xychartDb_default={getDrawableElem:getDrawableElem,clear:__name(function(){clear(),plotIndex=0,xyChartConfig=getChartDefaultConfig(),xyChartData={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},xyChartThemeConfig=getChartDefaultThemeConfig(),plotColorPalette=xyChartThemeConfig.plotColorPalette.split(",").map(color2=>color2.trim()),hasSetXAxis=!1,hasSetYAxis=!1},"clear"),setAccTitle:setAccTitle,getAccTitle:getAccTitle,setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle,getAccDescription:getAccDescription,setAccDescription:setAccDescription,setOrientation:setOrientation,setXAxisTitle:setXAxisTitle,setXAxisRangeData:setXAxisRangeData,setXAxisBand:setXAxisBand,setYAxisTitle:setYAxisTitle,setYAxisRangeData:setYAxisRangeData,setLineData:setLineData,setBarData:setBarData,setTmpSVGG:setTmpSVGG,getChartThemeConfig:getChartThemeConfig,getChartConfig:getChartConfig,getXYChartData:getXYChartData}}}),init_xychartRenderer=__esm({"src/diagrams/xychart/xychartRenderer.ts"(){init_logger(),init_selectSvgElement(),init_setupGraphViewbox(),draw9=__name((txt,id30,_version,diagObj)=>{const db7=diagObj.db,themeConfig=db7.getChartThemeConfig(),chartConfig=db7.getChartConfig(),labelData=db7.getXYChartData().plots[0].data.map(data5=>data5[1]);function getDominantBaseLine(horizontalPos){return"top"===horizontalPos?"text-before-edge":"middle"}function getTextAnchor(verticalPos){return"left"===verticalPos?"start":"right"===verticalPos?"end":"middle"}function getTextTransformation(data5){return`translate(${data5.x}, ${data5.y}) rotate(${data5.rotation||0})`}__name(getDominantBaseLine,"getDominantBaseLine"),__name(getTextAnchor,"getTextAnchor"),__name(getTextTransformation,"getTextTransformation"),log.debug("Rendering xychart chart\n"+txt);const svg2=selectSvgElement(id30),group2=svg2.append("g").attr("class","main"),background=group2.append("rect").attr("width",chartConfig.width).attr("height",chartConfig.height).attr("class","background");configureSvgSize(svg2,chartConfig.height,chartConfig.width,!0),svg2.attr("viewBox",`0 0 ${chartConfig.width} ${chartConfig.height}`),background.attr("fill",themeConfig.backgroundColor),db7.setTmpSVGG(svg2.append("g").attr("class","mermaid-tmp-group"));const shapes4=db7.getDrawableElem(),groups={};function getGroup(gList){let elem=group2,prefix="";for(const[i2]of gList.entries()){let parent4=group2;i2>0&&groups[prefix]&&(parent4=groups[prefix]),prefix+=gList[i2],elem=groups[prefix],elem||(elem=groups[prefix]=parent4.append("g").attr("class",gList[i2]))}return elem}__name(getGroup,"getGroup");for(const shape of shapes4){if(0===shape.data.length)continue;const shapeGroup=getGroup(shape.groupTexts);switch(shape.type){case"rect":if(shapeGroup.selectAll("rect").data(shape.data).enter().append("rect").attr("x",data5=>data5.x).attr("y",data5=>data5.y).attr("width",data5=>data5.width).attr("height",data5=>data5.height).attr("fill",data5=>data5.fill).attr("stroke",data5=>data5.strokeFill).attr("stroke-width",data5=>data5.strokeWidth),chartConfig.showDataLabel)if("horizontal"===chartConfig.chartOrientation){let fitsHorizontally2=function(item,fontSize){const{data:data5,label:label}=item;return fontSize*label.length*charWidthFactor<=data5.width-10};__name(fitsHorizontally2,"fitsHorizontally");const charWidthFactor=.7,validItems=shape.data.map((d3,i2)=>({data:d3,label:labelData[i2].toString()})).filter(item=>item.data.width>0&&item.data.height>0),candidateFontSizes=validItems.map(item=>{const{data:data5}=item;let fontSize=.7*data5.height;for(;!fitsHorizontally2(item,fontSize)&&fontSize>0;)fontSize-=1;return fontSize}),uniformFontSize=Math.floor(Math.min(...candidateFontSizes));shapeGroup.selectAll("text").data(validItems).enter().append("text").attr("x",item=>item.data.x+item.data.width-10).attr("y",item=>item.data.y+item.data.height/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","black").attr("font-size",`${uniformFontSize}px`).text(item=>item.label)}else{let fitsInBar2=function(item,fontSize,yOffset2){const{data:data5,label:label}=item,textWidth=fontSize*label.length*.7,centerX=data5.x+data5.width/2,rightEdge=centerX+textWidth/2,horizontalFits=centerX-textWidth/2>=data5.x&&rightEdge<=data5.x+data5.width,verticalFits=data5.y+yOffset2+fontSize<=data5.y+data5.height;return horizontalFits&&verticalFits};__name(fitsInBar2,"fitsInBar");const yOffset=10,validItems=shape.data.map((d3,i2)=>({data:d3,label:labelData[i2].toString()})).filter(item=>item.data.width>0&&item.data.height>0),candidateFontSizes=validItems.map(item=>{const{data:data5,label:label}=item;let fontSize=data5.width/(.7*label.length);for(;!fitsInBar2(item,fontSize,yOffset)&&fontSize>0;)fontSize-=1;return fontSize}),uniformFontSize=Math.floor(Math.min(...candidateFontSizes));shapeGroup.selectAll("text").data(validItems).enter().append("text").attr("x",item=>item.data.x+item.data.width/2).attr("y",item=>item.data.y+yOffset).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","black").attr("font-size",`${uniformFontSize}px`).text(item=>item.label)}break;case"text":shapeGroup.selectAll("text").data(shape.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",data5=>data5.fill).attr("font-size",data5=>data5.fontSize).attr("dominant-baseline",data5=>getDominantBaseLine(data5.verticalPos)).attr("text-anchor",data5=>getTextAnchor(data5.horizontalPos)).attr("transform",data5=>getTextTransformation(data5)).text(data5=>data5.text);break;case"path":shapeGroup.selectAll("path").data(shape.data).enter().append("path").attr("d",data5=>data5.path).attr("fill",data5=>data5.fill?data5.fill:"none").attr("stroke",data5=>data5.strokeFill).attr("stroke-width",data5=>data5.strokeWidth)}}},"draw"),xychartRenderer_default={draw:draw9}}}),xychartDiagram_exports={};__export(xychartDiagram_exports,{diagram:()=>diagram9});var parser10,requirementDiagram_default,RequirementDB,styles_default7,draw10,init_xychartDiagram=__esm({"src/diagrams/xychart/xychartDiagram.ts"(){init_xychart(),init_xychartDb(),init_xychartRenderer(),diagram9={parser:xychart_default,db:xychartDb_default,renderer:xychartRenderer_default}}}),init_requirementDiagram=__esm({"src/diagrams/requirement/parser/requirementDiagram.jison"(){parser10=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,3],$V1=[1,4],$V2=[1,5],$V3=[1,6],$V4=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],$V5=[1,22],$V6=[2,7],$V7=[1,26],$V8=[1,27],$V9=[1,28],$Va=[1,29],$Vb=[1,33],$Vc=[1,34],$Vd=[1,35],$Ve=[1,36],$Vf=[1,37],$Vg=[1,38],$Vh=[1,24],$Vi=[1,31],$Vj=[1,32],$Vk=[1,30],$Vl=[1,39],$Vm=[1,40],$Vn=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],$Vo=[1,61],$Vp=[89,90],$Vq=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],$Vr=[27,29],$Vs=[1,70],$Vt=[1,71],$Vu=[1,72],$Vv=[1,73],$Vw=[1,74],$Vx=[1,75],$Vy=[1,76],$Vz=[1,83],$VA=[1,80],$VB=[1,84],$VC=[1,85],$VD=[1,86],$VE=[1,87],$VF=[1,88],$VG=[1,89],$VH=[1,90],$VI=[1,91],$VJ=[1,92],$VK=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],$VL=[63,64],$VM=[1,101],$VN=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],$VO=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],$VP=[1,110],$VQ=[1,106],$VR=[1,107],$VS=[1,108],$VT=[1,109],$VU=[1,111],$VV=[1,116],$VW=[1,117],$VX=[1,114],$VY=[1,115],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 4:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 5:case 6:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:yy.setDirection("TB");break;case 18:yy.setDirection("BT");break;case 19:yy.setDirection("RL");break;case 20:yy.setDirection("LR");break;case 21:yy.addRequirement($$[$0-3],$$[$0-4]);break;case 22:yy.addRequirement($$[$0-5],$$[$0-6]),yy.setClass([$$[$0-5]],$$[$0-3]);break;case 23:yy.setNewReqId($$[$0-2]);break;case 24:yy.setNewReqText($$[$0-2]);break;case 25:yy.setNewReqRisk($$[$0-2]);break;case 26:yy.setNewReqVerifyMethod($$[$0-2]);break;case 29:this.$=yy.RequirementType.REQUIREMENT;break;case 30:this.$=yy.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=yy.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=yy.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=yy.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=yy.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=yy.RiskLevel.LOW_RISK;break;case 36:this.$=yy.RiskLevel.MED_RISK;break;case 37:this.$=yy.RiskLevel.HIGH_RISK;break;case 38:this.$=yy.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=yy.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=yy.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=yy.VerifyType.VERIFY_TEST;break;case 42:yy.addElement($$[$0-3]);break;case 43:yy.addElement($$[$0-5]),yy.setClass([$$[$0-5]],$$[$0-3]);break;case 44:yy.setNewElementType($$[$0-2]);break;case 45:yy.setNewElementDocRef($$[$0-2]);break;case 48:yy.addRelationship($$[$0-2],$$[$0],$$[$0-4]);break;case 49:yy.addRelationship($$[$0-2],$$[$0-4],$$[$0]);break;case 50:this.$=yy.Relationships.CONTAINS;break;case 51:this.$=yy.Relationships.COPIES;break;case 52:this.$=yy.Relationships.DERIVES;break;case 53:this.$=yy.Relationships.SATISFIES;break;case 54:this.$=yy.Relationships.VERIFIES;break;case 55:this.$=yy.Relationships.REFINES;break;case 56:this.$=yy.Relationships.TRACES;break;case 57:this.$=$$[$0-2],yy.defineClass($$[$0-1],$$[$0]);break;case 58:yy.setClass($$[$0-1],$$[$0]);break;case 59:yy.setClass([$$[$0-2]],$$[$0]);break;case 60:case 62:case 65:this.$=[$$[$0]];break;case 61:case 63:this.$=$$[$0-2].concat([$$[$0]]);break;case 64:this.$=$$[$0-2],yy.setCssStyle($$[$0-1],$$[$0]);break;case 66:$$[$0-2].push($$[$0]),this.$=$$[$0-2];break;case 68:this.$=$$[$0-1]+$$[$0]}},"anonymous"),table:[{3:1,4:2,6:$V0,9:$V1,11:$V2,13:$V3},{1:[3]},{3:8,4:2,5:[1,7],6:$V0,9:$V1,11:$V2,13:$V3},{5:[1,9]},{10:[1,10]},{12:[1,11]},o2($V4,[2,6]),{3:12,4:2,6:$V0,9:$V1,11:$V2,13:$V3},{1:[2,2]},{4:17,5:$V5,7:13,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},o2($V4,[2,4]),o2($V4,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:$V5,7:42,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:43,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:44,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:45,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:46,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:47,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:48,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:49,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{4:17,5:$V5,7:50,8:$V6,9:$V1,11:$V2,13:$V3,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:$V7,22:$V8,23:$V9,24:$Va,25:23,33:25,41:$Vb,42:$Vc,43:$Vd,44:$Ve,45:$Vf,46:$Vg,54:$Vh,72:$Vi,74:$Vj,77:$Vk,89:$Vl,90:$Vm},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},o2($Vn,[2,17]),o2($Vn,[2,18]),o2($Vn,[2,19]),o2($Vn,[2,20]),{30:60,33:62,75:$Vo,89:$Vl,90:$Vm},{30:63,33:62,75:$Vo,89:$Vl,90:$Vm},{30:64,33:62,75:$Vo,89:$Vl,90:$Vm},o2($Vp,[2,29]),o2($Vp,[2,30]),o2($Vp,[2,31]),o2($Vp,[2,32]),o2($Vp,[2,33]),o2($Vp,[2,34]),o2($Vq,[2,81]),o2($Vq,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},o2($Vr,[2,79]),o2($Vr,[2,80]),{27:[1,67],29:[1,68]},o2($Vr,[2,85]),o2($Vr,[2,86]),{62:69,65:$Vs,66:$Vt,67:$Vu,68:$Vv,69:$Vw,70:$Vx,71:$Vy},{62:77,65:$Vs,66:$Vt,67:$Vu,68:$Vv,69:$Vw,70:$Vx,71:$Vy},{30:78,33:62,75:$Vo,89:$Vl,90:$Vm},{73:79,75:$Vz,76:$VA,78:81,79:82,80:$VB,81:$VC,82:$VD,83:$VE,84:$VF,85:$VG,86:$VH,87:$VI,88:$VJ},o2($VK,[2,60]),o2($VK,[2,62]),{73:93,75:$Vz,76:$VA,78:81,79:82,80:$VB,81:$VC,82:$VD,83:$VE,84:$VF,85:$VG,86:$VH,87:$VI,88:$VJ},{30:94,33:62,75:$Vo,76:$VA,89:$Vl,90:$Vm},{5:[1,95]},{30:96,33:62,75:$Vo,89:$Vl,90:$Vm},{5:[1,97]},{30:98,33:62,75:$Vo,89:$Vl,90:$Vm},{63:[1,99]},o2($VL,[2,50]),o2($VL,[2,51]),o2($VL,[2,52]),o2($VL,[2,53]),o2($VL,[2,54]),o2($VL,[2,55]),o2($VL,[2,56]),{64:[1,100]},o2($Vn,[2,59],{76:$VA}),o2($Vn,[2,64],{76:$VM}),{33:103,75:[1,102],89:$Vl,90:$Vm},o2($VN,[2,65],{79:104,75:$Vz,80:$VB,81:$VC,82:$VD,83:$VE,84:$VF,85:$VG,86:$VH,87:$VI,88:$VJ}),o2($VO,[2,67]),o2($VO,[2,69]),o2($VO,[2,70]),o2($VO,[2,71]),o2($VO,[2,72]),o2($VO,[2,73]),o2($VO,[2,74]),o2($VO,[2,75]),o2($VO,[2,76]),o2($VO,[2,77]),o2($VO,[2,78]),o2($Vn,[2,57],{76:$VM}),o2($Vn,[2,58],{76:$VA}),{5:$VP,28:105,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},{27:[1,112],76:$VA},{5:$VV,40:$VW,56:113,57:$VX,59:$VY},{27:[1,118],76:$VA},{33:119,89:$Vl,90:$Vm},{33:120,89:$Vl,90:$Vm},{75:$Vz,78:121,79:82,80:$VB,81:$VC,82:$VD,83:$VE,84:$VF,85:$VG,86:$VH,87:$VI,88:$VJ},o2($VK,[2,61]),o2($VK,[2,63]),o2($VO,[2,68]),o2($Vn,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:$VP,28:126,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},o2($Vn,[2,28]),{5:[1,127]},o2($Vn,[2,42]),{32:[1,128]},{32:[1,129]},{5:$VV,40:$VW,56:130,57:$VX,59:$VY},o2($Vn,[2,47]),{5:[1,131]},o2($Vn,[2,48]),o2($Vn,[2,49]),o2($VN,[2,66],{79:104,75:$Vz,80:$VB,81:$VC,82:$VD,83:$VE,84:$VF,85:$VG,86:$VH,87:$VI,88:$VJ}),{33:132,89:$Vl,90:$Vm},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},o2($Vn,[2,27]),{5:$VP,28:145,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},o2($Vn,[2,46]),{5:$VV,40:$VW,56:152,57:$VX,59:$VY},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},o2($Vn,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},o2($Vn,[2,43]),{5:$VP,28:159,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},{5:$VP,28:160,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},{5:$VP,28:161,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},{5:$VP,28:162,31:$VQ,34:$VR,36:$VS,38:$VT,40:$VU},{5:$VV,40:$VW,56:163,57:$VX,59:$VY},{5:$VV,40:$VW,56:164,57:$VX,59:$VY},o2($Vn,[2,23]),o2($Vn,[2,24]),o2($Vn,[2,25]),o2($Vn,[2,26]),o2($Vn,[2,44]),o2($Vn,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 58:case 65:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:case 14:case 15:case 56:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:case 68:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 57:case 64:this.begin("string");break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 66:return"qString";case 67:return yy_.yytext=yy_.yytext.trim(),89;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser10.parser=parser10,requirementDiagram_default=parser10}}),init_requirementDb=__esm({"src/diagrams/requirement/requirementDb.ts"(){init_diagramAPI(),init_logger(),init_commonDb(),RequirementDB=class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=setAccTitle,this.getAccTitle=getAccTitle,this.setAccDescription=setAccDescription,this.getAccDescription=getAccDescription,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.getConfig=__name(()=>getConfig2().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}static{__name(this,"RequirementDB")}getDirection(){return this.direction}setDirection(dir2){this.direction=dir2}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(name,type3){return this.requirements.has(name)||this.requirements.set(name,{name:name,type:type3,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(name)}getRequirements(){return this.requirements}setNewReqId(id30){void 0!==this.latestRequirement&&(this.latestRequirement.requirementId=id30)}setNewReqText(text4){void 0!==this.latestRequirement&&(this.latestRequirement.text=text4)}setNewReqRisk(risk){void 0!==this.latestRequirement&&(this.latestRequirement.risk=risk)}setNewReqVerifyMethod(verifyMethod){void 0!==this.latestRequirement&&(this.latestRequirement.verifyMethod=verifyMethod)}addElement(name){return this.elements.has(name)||(this.elements.set(name,{name:name,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),log.info("Added new element: ",name)),this.resetLatestElement(),this.elements.get(name)}getElements(){return this.elements}setNewElementType(type3){void 0!==this.latestElement&&(this.latestElement.type=type3)}setNewElementDocRef(docRef){void 0!==this.latestElement&&(this.latestElement.docRef=docRef)}addRelationship(type3,src,dst){this.relations.push({type:type3,src:src,dst:dst})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,clear()}setCssStyle(ids,styles4){for(const id30 of ids){const node2=this.requirements.get(id30)??this.elements.get(id30);if(!styles4||!node2)return;for(const s2 of styles4)s2.includes(",")?node2.cssStyles.push(...s2.split(",")):node2.cssStyles.push(s2)}}setClass(ids,classNames){for(const id30 of ids){const node2=this.requirements.get(id30)??this.elements.get(id30);if(node2)for(const _class2 of classNames){node2.classes.push(_class2);const styles4=this.classes.get(_class2)?.styles;styles4&&node2.cssStyles.push(...styles4)}}}defineClass(ids,style3){for(const id30 of ids){let styleClass=this.classes.get(id30);void 0===styleClass&&(styleClass={id:id30,styles:[],textStyles:[]},this.classes.set(id30,styleClass)),style3&&style3.forEach(function(s2){if(/color/.exec(s2)){const newStyle=s2.replace("fill","bgFill");styleClass.textStyles.push(newStyle)}styleClass.styles.push(s2)}),this.requirements.forEach(value2=>{value2.classes.includes(id30)&&value2.cssStyles.push(...style3.flatMap(s2=>s2.split(",")))}),this.elements.forEach(value2=>{value2.classes.includes(id30)&&value2.cssStyles.push(...style3.flatMap(s2=>s2.split(",")))})}}getClasses(){return this.classes}getData(){const config5=getConfig2(),nodes5=[],edges3=[];for(const requirement of this.requirements.values()){const node2=requirement;node2.id=requirement.name,node2.cssStyles=requirement.cssStyles,node2.cssClasses=requirement.classes.join(" "),node2.shape="requirementBox",node2.look=config5.look,nodes5.push(node2)}for(const element3 of this.elements.values()){const node2=element3;node2.shape="requirementBox",node2.look=config5.look,node2.id=element3.name,node2.cssStyles=element3.cssStyles,node2.cssClasses=element3.classes.join(" "),nodes5.push(node2)}for(const relation of this.relations){let counter2=0;const isContains=relation.type===this.Relationships.CONTAINS,edge={id:`${relation.src}-${relation.dst}-${counter2}`,start:this.requirements.get(relation.src)?.name??this.elements.get(relation.src)?.name,end:this.requirements.get(relation.dst)?.name??this.elements.get(relation.dst)?.name,label:`&lt;&lt;${relation.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",isContains?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:isContains?"normal":"dashed",arrowTypeStart:isContains?"requirement_contains":"",arrowTypeEnd:isContains?"":"requirement_arrow",look:config5.look};edges3.push(edge),counter2++}return{nodes:nodes5,edges:edges3,other:{},config:config5,direction:this.getDirection()}}}}}),init_styles7=__esm({"src/diagrams/requirement/styles.js"(){styles_default7=__name(options2=>`\n\n  marker {\n    fill: ${options2.relationColor};\n    stroke: ${options2.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${options2.lineColor};\n  }\n\n  svg {\n    font-family: ${options2.fontFamily};\n    font-size: ${options2.fontSize};\n  }\n\n  .reqBox {\n    fill: ${options2.requirementBackground};\n    fill-opacity: 1.0;\n    stroke: ${options2.requirementBorderColor};\n    stroke-width: ${options2.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${options2.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${options2.relationLabelBackground};\n    fill-opacity: 1.0;\n  }\n\n  .req-title-line {\n    stroke: ${options2.requirementBorderColor};\n    stroke-width: ${options2.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${options2.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${options2.relationLabelColor};\n  }\n  .divider {\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1;\n  }\n  .label {\n    font-family: ${options2.fontFamily};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n  .label text,span {\n    fill: ${options2.nodeTextColor||options2.textColor};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n  .labelBkg {\n    background-color: ${options2.edgeLabelBackground};\n  }\n\n`,"getStyles")}}),requirementRenderer_exports={};__export(requirementRenderer_exports,{draw:()=>draw10});var diagram10,init_requirementRenderer=__esm({"src/diagrams/requirement/requirementRenderer.ts"(){init_diagramAPI(),init_logger(),init_insertElementsForSize(),init_render2(),init_setupViewPortForSVG(),init_utils2(),draw10=__name(async function(text4,id30,_version,diag){log.info("REF0:"),log.info("Drawing requirement diagram (unified)",id30);const{securityLevel:securityLevel,state:conf5,layout:layout6}=getConfig2(),data4Layout=diag.db.getData(),svg2=getDiagramElement(id30,securityLevel);data4Layout.type=diag.type,data4Layout.layoutAlgorithm=getRegisteredLayoutAlgorithm(layout6),data4Layout.nodeSpacing=conf5?.nodeSpacing??50,data4Layout.rankSpacing=conf5?.rankSpacing??50,data4Layout.markers=["requirement_contains","requirement_arrow"],data4Layout.diagramId=id30,await render6(data4Layout,svg2);utils_default2.insertTitle(svg2,"requirementDiagramTitleText",conf5?.titleTopMargin??25,diag.db.getDiagramTitle()),setupViewPortForSVG(svg2,8,"requirementDiagram",conf5?.useMaxWidth??!0)},"draw")}}),requirementDiagram_exports={};__export(requirementDiagram_exports,{diagram:()=>diagram10});var parser11,sequenceDiagram_default,LINETYPE2,ARROWTYPE2,PLACEMENT2,PARTICIPANT_TYPE,SequenceDB,styles_default8,import_sanitize_url5,ACTOR_TYPE_WIDTH,drawRect4,drawPopup,popupMenuToggle,drawKatex,drawText3,drawLabel,actorCnt,fixLifeLineHeights,drawActorTypeParticipant,drawActorTypeCollections,drawActorTypeQueue,drawActorTypeControl,drawActorTypeEntity,drawActorTypeDatabase,drawActorTypeBoundary,drawActorTypeActor,drawActor,drawBox,anchorElement,drawActivation,drawLoop,drawBackgroundRect2,insertDatabaseIcon2,insertComputerIcon2,insertClockIcon2,insertArrowHead2,insertArrowFilledHead2,insertSequenceNumber,insertArrowCrossHead2,getTextObj3,getNoteRect2,_drawTextCandidateFunc2,_drawMenuItemTextCandidateFunc,svgDraw_default2,conf2,bounds2,drawNote,messageFont2,noteFont,actorFont,drawMessage,addActorRenderingData,drawActors,drawActorsPopup,setConf3,actorActivations,activationBounds,draw11,getRequiredPopupWidth,buildNoteModel,buildMessageModel,calculateLoopBounds,sequenceRenderer_default,init_requirementDiagram2=__esm({"src/diagrams/requirement/requirementDiagram.ts"(){init_requirementDiagram(),init_requirementDb(),init_styles7(),init_requirementRenderer(),diagram10={parser:requirementDiagram_default,get db(){return new RequirementDB},renderer:requirementRenderer_exports,styles:styles_default7}}}),init_sequenceDiagram=__esm({"src/diagrams/sequence/parser/sequenceDiagram.jison"(){parser11=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,2],$V1=[1,3],$V2=[1,4],$V3=[2,4],$V4=[1,9],$V5=[1,11],$V6=[1,13],$V7=[1,14],$V8=[1,16],$V9=[1,17],$Va=[1,18],$Vb=[1,24],$Vc=[1,25],$Vd=[1,26],$Ve=[1,27],$Vf=[1,28],$Vg=[1,29],$Vh=[1,30],$Vi=[1,31],$Vj=[1,32],$Vk=[1,33],$Vl=[1,34],$Vm=[1,35],$Vn=[1,36],$Vo=[1,37],$Vp=[1,38],$Vq=[1,39],$Vr=[1,41],$Vs=[1,42],$Vt=[1,43],$Vu=[1,44],$Vv=[1,45],$Vw=[1,46],$Vx=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,55,60,61,62,63,71],$Vy=[2,71],$Vz=[4,5,16,50,52,53],$VA=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],$VB=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,55,60,61,62,63,71],$VC=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,55,60,61,62,63,71],$VD=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,55,60,61,62,63,71],$VE=[69,70,71],$VF=[1,127],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,actor_with_config:54,note:55,placement:56,text2:57,over:58,actor_pair:59,links:60,link:61,properties:62,details:63,spaceList:64,",":65,left_of:66,right_of:67,signaltype:68,"+":69,"-":70,ACTOR:71,config_object:72,CONFIG_START:73,CONFIG_CONTENT:74,CONFIG_END:75,SOLID_OPEN_ARROW:76,DOTTED_OPEN_ARROW:77,SOLID_ARROW:78,BIDIRECTIONAL_SOLID_ARROW:79,DOTTED_ARROW:80,BIDIRECTIONAL_DOTTED_ARROW:81,SOLID_CROSS:82,DOTTED_CROSS:83,SOLID_POINT:84,DOTTED_POINT:85,TXT:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",55:"note",58:"over",60:"links",61:"link",62:"properties",63:"details",65:",",66:"left_of",67:"right_of",69:"+",70:"-",71:"ACTOR",73:"CONFIG_START",74:"CONFIG_CONTENT",75:"CONFIG_END",76:"SOLID_OPEN_ARROW",77:"DOTTED_OPEN_ARROW",78:"SOLID_ARROW",79:"BIDIRECTIONAL_SOLID_ARROW",80:"DOTTED_ARROW",81:"BIDIRECTIONAL_DOTTED_ARROW",82:"SOLID_CROSS",83:"DOTTED_CROSS",84:"SOLID_POINT",85:"DOTTED_POINT",86:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[64,2],[64,1],[59,3],[59,1],[56,1],[56,1],[17,5],[17,5],[17,4],[54,2],[72,3],[22,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[57,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 3:return yy.apply($$[$0]),$$[$0];case 4:case 9:case 8:case 13:this.$=[];break;case 5:case 10:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 6:case 7:case 11:case 12:case 63:this.$=$$[$0];break;case 15:$$[$0].type="createParticipant",this.$=$$[$0];break;case 16:$$[$0-1].unshift({type:"boxStart",boxData:yy.parseBoxData($$[$0-2])}),$$[$0-1].push({type:"boxEnd",boxText:$$[$0-2]}),this.$=$$[$0-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number($$[$0-2]),sequenceIndexStep:Number($$[$0-1]),sequenceVisible:!0,signalType:yy.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number($$[$0-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:yy.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:yy.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:yy.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:yy.LINETYPE.ACTIVE_START,actor:$$[$0-1].actor};break;case 23:this.$={type:"activeEnd",signalType:yy.LINETYPE.ACTIVE_END,actor:$$[$0-1].actor};break;case 29:yy.setDiagramTitle($$[$0].substring(6)),this.$=$$[$0].substring(6);break;case 30:yy.setDiagramTitle($$[$0].substring(7)),this.$=$$[$0].substring(7);break;case 31:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 32:case 33:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 34:$$[$0-1].unshift({type:"loopStart",loopText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.LOOP_START}),$$[$0-1].push({type:"loopEnd",loopText:$$[$0-2],signalType:yy.LINETYPE.LOOP_END}),this.$=$$[$0-1];break;case 35:$$[$0-1].unshift({type:"rectStart",color:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.RECT_START}),$$[$0-1].push({type:"rectEnd",color:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.RECT_END}),this.$=$$[$0-1];break;case 36:$$[$0-1].unshift({type:"optStart",optText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.OPT_START}),$$[$0-1].push({type:"optEnd",optText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.OPT_END}),this.$=$$[$0-1];break;case 37:$$[$0-1].unshift({type:"altStart",altText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.ALT_START}),$$[$0-1].push({type:"altEnd",signalType:yy.LINETYPE.ALT_END}),this.$=$$[$0-1];break;case 38:$$[$0-1].unshift({type:"parStart",parText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.PAR_START}),$$[$0-1].push({type:"parEnd",signalType:yy.LINETYPE.PAR_END}),this.$=$$[$0-1];break;case 39:$$[$0-1].unshift({type:"parStart",parText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.PAR_OVER_START}),$$[$0-1].push({type:"parEnd",signalType:yy.LINETYPE.PAR_END}),this.$=$$[$0-1];break;case 40:$$[$0-1].unshift({type:"criticalStart",criticalText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.CRITICAL_START}),$$[$0-1].push({type:"criticalEnd",signalType:yy.LINETYPE.CRITICAL_END}),this.$=$$[$0-1];break;case 41:$$[$0-1].unshift({type:"breakStart",breakText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.BREAK_START}),$$[$0-1].push({type:"breakEnd",optText:yy.parseMessage($$[$0-2]),signalType:yy.LINETYPE.BREAK_END}),this.$=$$[$0-1];break;case 43:this.$=$$[$0-3].concat([{type:"option",optionText:yy.parseMessage($$[$0-1]),signalType:yy.LINETYPE.CRITICAL_OPTION},$$[$0]]);break;case 45:this.$=$$[$0-3].concat([{type:"and",parText:yy.parseMessage($$[$0-1]),signalType:yy.LINETYPE.PAR_AND},$$[$0]]);break;case 47:this.$=$$[$0-3].concat([{type:"else",altText:yy.parseMessage($$[$0-1]),signalType:yy.LINETYPE.ALT_ELSE},$$[$0]]);break;case 48:$$[$0-3].draw="participant",$$[$0-3].type="addParticipant",$$[$0-3].description=yy.parseMessage($$[$0-1]),this.$=$$[$0-3];break;case 49:case 53:$$[$0-1].draw="participant",$$[$0-1].type="addParticipant",this.$=$$[$0-1];break;case 50:$$[$0-3].draw="actor",$$[$0-3].type="addParticipant",$$[$0-3].description=yy.parseMessage($$[$0-1]),this.$=$$[$0-3];break;case 51:$$[$0-1].draw="actor",$$[$0-1].type="addParticipant",this.$=$$[$0-1];break;case 52:$$[$0-1].type="destroyParticipant",this.$=$$[$0-1];break;case 54:this.$=[$$[$0-1],{type:"addNote",placement:$$[$0-2],actor:$$[$0-1].actor,text:$$[$0]}];break;case 55:$$[$0-2]=[].concat($$[$0-1],$$[$0-1]).slice(0,2),$$[$0-2][0]=$$[$0-2][0].actor,$$[$0-2][1]=$$[$0-2][1].actor,this.$=[$$[$0-1],{type:"addNote",placement:yy.PLACEMENT.OVER,actor:$$[$0-2].slice(0,2),text:$$[$0]}];break;case 56:this.$=[$$[$0-1],{type:"addLinks",actor:$$[$0-1].actor,text:$$[$0]}];break;case 57:this.$=[$$[$0-1],{type:"addALink",actor:$$[$0-1].actor,text:$$[$0]}];break;case 58:this.$=[$$[$0-1],{type:"addProperties",actor:$$[$0-1].actor,text:$$[$0]}];break;case 59:this.$=[$$[$0-1],{type:"addDetails",actor:$$[$0-1].actor,text:$$[$0]}];break;case 62:this.$=[$$[$0-2],$$[$0]];break;case 64:this.$=yy.PLACEMENT.LEFTOF;break;case 65:this.$=yy.PLACEMENT.RIGHTOF;break;case 66:this.$=[$$[$0-4],$$[$0-1],{type:"addMessage",from:$$[$0-4].actor,to:$$[$0-1].actor,signalType:$$[$0-3],msg:$$[$0],activate:!0},{type:"activeStart",signalType:yy.LINETYPE.ACTIVE_START,actor:$$[$0-1].actor}];break;case 67:this.$=[$$[$0-4],$$[$0-1],{type:"addMessage",from:$$[$0-4].actor,to:$$[$0-1].actor,signalType:$$[$0-3],msg:$$[$0]},{type:"activeEnd",signalType:yy.LINETYPE.ACTIVE_END,actor:$$[$0-4].actor}];break;case 68:this.$=[$$[$0-3],$$[$0-1],{type:"addMessage",from:$$[$0-3].actor,to:$$[$0-1].actor,signalType:$$[$0-2],msg:$$[$0]}];break;case 69:this.$={type:"addParticipant",actor:$$[$0-1],config:$$[$0]};break;case 70:this.$=$$[$0-1].trim();break;case 71:this.$={type:"addParticipant",actor:$$[$0]};break;case 72:this.$=yy.LINETYPE.SOLID_OPEN;break;case 73:this.$=yy.LINETYPE.DOTTED_OPEN;break;case 74:this.$=yy.LINETYPE.SOLID;break;case 75:this.$=yy.LINETYPE.BIDIRECTIONAL_SOLID;break;case 76:this.$=yy.LINETYPE.DOTTED;break;case 77:this.$=yy.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 78:this.$=yy.LINETYPE.SOLID_CROSS;break;case 79:this.$=yy.LINETYPE.DOTTED_CROSS;break;case 80:this.$=yy.LINETYPE.SOLID_POINT;break;case 81:this.$=yy.LINETYPE.DOTTED_POINT;break;case 82:this.$=yy.parseMessage($$[$0].trim().substring(1))}},"anonymous"),table:[{3:1,4:$V0,5:$V1,6:$V2},{1:[3]},{3:5,4:$V0,5:$V1,6:$V2},{3:6,4:$V0,5:$V1,6:$V2},o2([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],$V3,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},o2($Vx,[2,5]),{9:47,12:12,13:$V6,14:$V7,17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},o2($Vx,[2,7]),o2($Vx,[2,8]),o2($Vx,[2,14]),{12:48,50:$Vo,52:$Vp,53:$Vq},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,71:$Vw},{22:55,71:$Vw},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},o2($Vx,[2,29]),o2($Vx,[2,30]),{32:[1,61]},{34:[1,62]},o2($Vx,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,54:72,71:[1,73]},{22:74,71:$Vw},{22:75,71:$Vw},{68:76,76:[1,77],77:[1,78],78:[1,79],79:[1,80],80:[1,81],81:[1,82],82:[1,83],83:[1,84],84:[1,85],85:[1,86]},{56:87,58:[1,88],66:[1,89],67:[1,90]},{22:91,71:$Vw},{22:92,71:$Vw},{22:93,71:$Vw},{22:94,71:$Vw},o2([5,51,65,76,77,78,79,80,81,82,83,84,85,86],$Vy),o2($Vx,[2,6]),o2($Vx,[2,15]),o2($Vz,[2,9],{10:95}),o2($Vx,[2,17]),{5:[1,97],19:[1,96]},{5:[1,98]},o2($Vx,[2,21]),{5:[1,99]},{5:[1,100]},o2($Vx,[2,24]),o2($Vx,[2,25]),o2($Vx,[2,26]),o2($Vx,[2,27]),o2($Vx,[2,28]),o2($Vx,[2,31]),o2($Vx,[2,32]),o2($VA,$V3,{7:101}),o2($VA,$V3,{7:102}),o2($VA,$V3,{7:103}),o2($VB,$V3,{40:104,7:105}),o2($VC,$V3,{42:106,7:107}),o2($VC,$V3,{7:107,42:108}),o2($VD,$V3,{45:109,7:110}),o2($VA,$V3,{7:111}),{5:[1,113],51:[1,112]},{5:[1,114]},o2([5,51],$Vy,{72:115,73:[1,116]}),{5:[1,118],51:[1,117]},{5:[1,119]},{22:122,69:[1,120],70:[1,121],71:$Vw},o2($VE,[2,72]),o2($VE,[2,73]),o2($VE,[2,74]),o2($VE,[2,75]),o2($VE,[2,76]),o2($VE,[2,77]),o2($VE,[2,78]),o2($VE,[2,79]),o2($VE,[2,80]),o2($VE,[2,81]),{22:123,71:$Vw},{22:125,59:124,71:$Vw},{71:[2,64]},{71:[2,65]},{57:126,86:$VF},{57:128,86:$VF},{57:129,86:$VF},{57:130,86:$VF},{4:[1,133],5:[1,135],11:132,12:134,16:[1,131],50:$Vo,52:$Vp,53:$Vq},{5:[1,136]},o2($Vx,[2,19]),o2($Vx,[2,20]),o2($Vx,[2,22]),o2($Vx,[2,23]),{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[1,137],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[1,138],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[1,139],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{16:[1,140]},{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[2,46],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,49:[1,141],50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{16:[1,142]},{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[2,44],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,48:[1,143],50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{16:[1,144]},{16:[1,145]},{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[2,42],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,47:[1,146],50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{4:$V4,5:$V5,8:8,9:10,12:12,13:$V6,14:$V7,16:[1,147],17:15,18:$V8,21:$V9,22:40,23:$Va,24:19,25:20,26:21,27:22,28:23,29:$Vb,30:$Vc,31:$Vd,33:$Ve,35:$Vf,36:$Vg,37:$Vh,38:$Vi,39:$Vj,41:$Vk,43:$Vl,44:$Vm,46:$Vn,50:$Vo,52:$Vp,53:$Vq,55:$Vr,60:$Vs,61:$Vt,62:$Vu,63:$Vv,71:$Vw},{15:[1,148]},o2($Vx,[2,49]),o2($Vx,[2,53]),{5:[2,69]},{74:[1,149]},{15:[1,150]},o2($Vx,[2,51]),o2($Vx,[2,52]),{22:151,71:$Vw},{22:152,71:$Vw},{57:153,86:$VF},{57:154,86:$VF},{57:155,86:$VF},{65:[1,156],86:[2,63]},{5:[2,56]},{5:[2,82]},{5:[2,57]},{5:[2,58]},{5:[2,59]},o2($Vx,[2,16]),o2($Vz,[2,10]),{12:157,50:$Vo,52:$Vp,53:$Vq},o2($Vz,[2,12]),o2($Vz,[2,13]),o2($Vx,[2,18]),o2($Vx,[2,34]),o2($Vx,[2,35]),o2($Vx,[2,36]),o2($Vx,[2,37]),{15:[1,158]},o2($Vx,[2,38]),{15:[1,159]},o2($Vx,[2,39]),o2($Vx,[2,40]),{15:[1,160]},o2($Vx,[2,41]),{5:[1,161]},{75:[1,162]},{5:[1,163]},{57:164,86:$VF},{57:165,86:$VF},{5:[2,68]},{5:[2,54]},{5:[2,55]},{22:166,71:$Vw},o2($Vz,[2,11]),o2($VB,$V3,{7:105,40:167}),o2($VC,$V3,{7:107,42:168}),o2($VD,$V3,{7:110,45:169}),o2($Vx,[2,48]),{5:[2,70]},o2($Vx,[2,50]),{5:[2,66]},{5:[2,67]},{86:[2,62]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],89:[2,64],90:[2,65],115:[2,69],126:[2,56],127:[2,82],128:[2,57],129:[2,58],130:[2,59],153:[2,68],154:[2,54],155:[2,55],162:[2,70],164:[2,66],165:[2,67],166:[2,62],167:[2,47],168:[2,45],169:[2,43]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:case 56:case 72:return 5;case 1:case 2:case 3:case 4:case 5:break;case 6:return 19;case 7:return this.begin("CONFIG"),73;case 8:return 74;case 9:return this.popState(),this.popState(),75;case 10:case 57:return yy_.yytext=yy_.yytext.trim(),71;case 11:case 17:return yy_.yytext=yy_.yytext.trim(),this.begin("ALIAS"),71;case 12:return this.begin("LINE"),14;case 13:return this.begin("ID"),50;case 14:return this.begin("ID"),52;case 15:return 13;case 16:return this.begin("ID"),53;case 18:return this.popState(),this.popState(),this.begin("LINE"),51;case 19:return this.popState(),this.popState(),5;case 20:return this.begin("LINE"),36;case 21:return this.begin("LINE"),37;case 22:return this.begin("LINE"),38;case 23:return this.begin("LINE"),39;case 24:return this.begin("LINE"),49;case 25:return this.begin("LINE"),41;case 26:return this.begin("LINE"),43;case 27:return this.begin("LINE"),48;case 28:return this.begin("LINE"),44;case 29:return this.begin("LINE"),47;case 30:return this.begin("LINE"),46;case 31:return this.popState(),15;case 32:return 16;case 33:return 66;case 34:return 67;case 35:return 60;case 36:return 61;case 37:return 62;case 38:return 63;case 39:return 58;case 40:return 55;case 41:return this.begin("ID"),21;case 42:return this.begin("ID"),23;case 43:return 29;case 44:return 30;case 45:return this.begin("acc_title"),31;case 46:return this.popState(),"acc_title_value";case 47:return this.begin("acc_descr"),33;case 48:return this.popState(),"acc_descr_value";case 49:this.begin("acc_descr_multiline");break;case 50:this.popState();break;case 51:return"acc_descr_multiline_value";case 52:return 6;case 53:return 18;case 54:return 20;case 55:return 65;case 58:return 78;case 59:return 79;case 60:return 80;case 61:return 81;case 62:return 76;case 63:return 77;case 64:return 82;case 65:return 83;case 66:return 84;case 67:return 85;case 68:case 69:return 86;case 70:return 69;case 71:return 70;case 73:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:@\{)/i,/^(?:[^\}]+)/i,/^(?:\})/i,/^(?:[^\<->\->:\n,;@\s]+(?=@\{))/i,/^(?:[^\<->\->:\n,;@]+?([\-]*[^\<->\->:\n,;@]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^<\->\->:\n,;]+?([\-]*[^<\->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+<\->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+<\->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]*)/i,/^(?::)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[50,51],inclusive:!1},acc_descr:{rules:[48],inclusive:!1},acc_title:{rules:[46],inclusive:!1},ID:{rules:[2,3,7,10,11,17],inclusive:!1},ALIAS:{rules:[2,3,18,19],inclusive:!1},LINE:{rules:[2,3,31],inclusive:!1},CONFIG:{rules:[8,9],inclusive:!1},CONFIG_DATA:{rules:[],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,12,13,14,15,16,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,49,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser11.parser=parser11,sequenceDiagram_default=parser11}}),init_sequenceDb=__esm({"src/diagrams/sequence/sequenceDb.ts"(){init_diagramAPI(),init_js_yaml(),init_logger(),init_imperativeState(),init_common(),init_commonDb(),LINETYPE2={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},ARROWTYPE2={FILLED:0,OPEN:1},PLACEMENT2={LEFTOF:0,RIGHTOF:1,OVER:2},PARTICIPANT_TYPE={ACTOR:"actor",BOUNDARY:"boundary",COLLECTIONS:"collections",CONTROL:"control",DATABASE:"database",ENTITY:"entity",PARTICIPANT:"participant",QUEUE:"queue"},SequenceDB=class{constructor(){this.state=new ImperativeState(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=setAccTitle,this.setAccDescription=setAccDescription,this.setDiagramTitle=setDiagramTitle,this.getAccTitle=getAccTitle,this.getAccDescription=getAccDescription,this.getDiagramTitle=getDiagramTitle,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap(getConfig2().wrap),this.LINETYPE=LINETYPE2,this.ARROWTYPE=ARROWTYPE2,this.PLACEMENT=PLACEMENT2}static{__name(this,"SequenceDB")}addBox(data5){this.state.records.boxes.push({name:data5.text,wrap:data5.wrap??this.autoWrap(),fill:data5.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(id30,name,description,type3,metadata){let doc,assignedBox=this.state.records.currentBox;if(void 0!==metadata){let yamlData;yamlData=metadata.includes("\n")?metadata+"\n":"{\n"+metadata+"\n}",doc=load(yamlData,{schema:JSON_SCHEMA})}type3=doc?.type??type3;const old=this.state.records.actors.get(id30);if(old){if(this.state.records.currentBox&&old.box&&this.state.records.currentBox!==old.box)throw new Error(`A same participant should only be defined in one Box: ${old.name} can't be in '${old.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(assignedBox=old.box?old.box:this.state.records.currentBox,old.box=assignedBox,old&&name===old.name&&null==description)return}if(null==description?.text&&(description={text:name,type:type3}),null!=type3&&null!=description.text||(description={text:name,type:type3}),this.state.records.actors.set(id30,{box:assignedBox,name:name,description:description.text,wrap:description.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:type3??"participant"}),this.state.records.prevActor){const prevActorInRecords=this.state.records.actors.get(this.state.records.prevActor);prevActorInRecords&&(prevActorInRecords.nextActor=id30)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(id30),this.state.records.prevActor=id30}activationCount(part){let i2,count2=0;if(!part)return 0;for(i2=0;i2<this.state.records.messages.length;i2++)this.state.records.messages[i2].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[i2].from===part&&count2++,this.state.records.messages[i2].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[i2].from===part&&count2--;return count2}addMessage(idFrom,idTo,message,answer){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:idFrom,to:idTo,message:message.text,wrap:message.wrap??this.autoWrap(),answer:answer})}addSignal(idFrom,idTo,message,messageType,activate=!1){if(messageType===this.LINETYPE.ACTIVE_END){if(this.activationCount(idFrom??"")<1){const error3=new Error("Trying to inactivate an inactive participant ("+idFrom+")");throw error3.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},error3}}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:idFrom,to:idTo,message:message?.text??"",wrap:message?.wrap??this.autoWrap(),type:messageType,activate:activate}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(b3=>b3.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(id30){return this.state.records.actors.get(id30)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(wrapSetting){this.state.records.wrapEnabled=wrapSetting}extractWrap(text4){if(void 0===text4)return{};text4=text4.trim();const wrap3=null!==/^:?wrap:/.exec(text4)||null===/^:?nowrap:/.exec(text4)&&void 0;return{cleanedText:(void 0===wrap3?text4:text4.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:wrap3}}autoWrap(){return void 0!==this.state.records.wrapEnabled?this.state.records.wrapEnabled:getConfig2().sequence?.wrap??!1}clear(){this.state.reset(),clear()}parseMessage(str2){const trimmedStr=str2.trim(),{wrap:wrap3,cleanedText:cleanedText}=this.extractWrap(trimmedStr),message={text:cleanedText,wrap:wrap3};return log.debug(`parseMessage: ${JSON.stringify(message)}`),message}parseBoxData(str2){const match2=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(str2);let color2=match2?.[1]?match2[1].trim():"transparent",title2=match2?.[2]?match2[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",color2)||(color2="transparent",title2=str2.trim());else{const style3=(new Option).style;style3.color=color2,style3.color!==color2&&(color2="transparent",title2=str2.trim())}const{wrap:wrap3,cleanedText:cleanedText}=this.extractWrap(title2);return{text:cleanedText?sanitizeText(cleanedText,getConfig2()):void 0,color:color2,wrap:wrap3}}addNote(actor,placement,message){const note3={actor:actor,placement:placement,message:message.text,wrap:message.wrap??this.autoWrap()},actors2=[].concat(actor,actor);this.state.records.notes.push(note3),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:actors2[0],to:actors2[1],message:message.text,wrap:message.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:placement})}addLinks(actorId,text4){const actor=this.getActor(actorId);try{let sanitizedText=sanitizeText(text4.text,getConfig2());sanitizedText=sanitizedText.replace(/&equals;/g,"="),sanitizedText=sanitizedText.replace(/&amp;/g,"&");const links3=JSON.parse(sanitizedText);this.insertLinks(actor,links3)}catch(e3){log.error("error while parsing actor link text",e3)}}addALink(actorId,text4){const actor=this.getActor(actorId);try{const links3={};let sanitizedText=sanitizeText(text4.text,getConfig2());const sep2=sanitizedText.indexOf("@");sanitizedText=sanitizedText.replace(/&equals;/g,"="),sanitizedText=sanitizedText.replace(/&amp;/g,"&");const label=sanitizedText.slice(0,sep2-1).trim(),link2=sanitizedText.slice(sep2+1).trim();links3[label]=link2,this.insertLinks(actor,links3)}catch(e3){log.error("error while parsing actor link text",e3)}}insertLinks(actor,links3){if(null==actor.links)actor.links=links3;else for(const key in links3)actor.links[key]=links3[key]}addProperties(actorId,text4){const actor=this.getActor(actorId);try{const sanitizedText=sanitizeText(text4.text,getConfig2()),properties=JSON.parse(sanitizedText);this.insertProperties(actor,properties)}catch(e3){log.error("error while parsing actor properties text",e3)}}insertProperties(actor,properties){if(null==actor.properties)actor.properties=properties;else for(const key in properties)actor.properties[key]=properties[key]}boxEnd(){this.state.records.currentBox=void 0}addDetails(actorId,text4){const actor=this.getActor(actorId),elem=document.getElementById(text4.text);try{const text5=elem.innerHTML,details=JSON.parse(text5);details.properties&&this.insertProperties(actor,details.properties),details.links&&this.insertLinks(actor,details.links)}catch(e3){log.error("error while parsing actor details text",e3)}}getActorProperty(actor,key){if(void 0!==actor?.properties)return actor.properties[key]}apply(param){if(Array.isArray(param))param.forEach(item=>{this.apply(item)});else switch(param.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:param.sequenceIndex,step:param.sequenceIndexStep,visible:param.sequenceVisible},wrap:!1,type:param.signalType});break;case"addParticipant":this.addActor(param.actor,param.actor,param.description,param.draw,param.config);break;case"createParticipant":if(this.state.records.actors.has(param.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=param.actor,this.addActor(param.actor,param.actor,param.description,param.draw,param.config),this.state.records.createdActors.set(param.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=param.actor,this.state.records.destroyedActors.set(param.actor,this.state.records.messages.length);break;case"activeStart":case"activeEnd":this.addSignal(param.actor,void 0,void 0,param.signalType);break;case"addNote":this.addNote(param.actor,param.placement,param.text);break;case"addLinks":this.addLinks(param.actor,param.text);break;case"addALink":this.addALink(param.actor,param.text);break;case"addProperties":this.addProperties(param.actor,param.text);break;case"addDetails":this.addDetails(param.actor,param.text);break;case"addMessage":if(this.state.records.lastCreated){if(param.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(param.to!==this.state.records.lastDestroyed&&param.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(param.from,param.to,param.msg,param.signalType,param.activate);break;case"boxStart":this.addBox(param.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,param.loopText,param.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":this.addSignal(void 0,void 0,void 0,param.signalType);break;case"rectStart":this.addSignal(void 0,void 0,param.color,param.signalType);break;case"optStart":this.addSignal(void 0,void 0,param.optText,param.signalType);break;case"altStart":case"else":this.addSignal(void 0,void 0,param.altText,param.signalType);break;case"setAccTitle":setAccTitle(param.text);break;case"parStart":case"and":this.addSignal(void 0,void 0,param.parText,param.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,param.criticalText,param.signalType);break;case"option":this.addSignal(void 0,void 0,param.optionText,param.signalType);break;case"breakStart":this.addSignal(void 0,void 0,param.breakText,param.signalType)}}getConfig(){return getConfig2().sequence}}}}),init_styles8=__esm({"src/diagrams/sequence/styles.js"(){styles_default8=__name(options2=>`.actor {\n    stroke: ${options2.actorBorder};\n    fill: ${options2.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${options2.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${options2.actorLineColor};\n  }\n  \n  .innerArc {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${options2.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${options2.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${options2.signalColor};\n    stroke: ${options2.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${options2.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${options2.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${options2.signalColor};\n    stroke: ${options2.signalColor};\n  }\n\n  .messageText {\n    fill: ${options2.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${options2.labelBoxBorderColor};\n    fill: ${options2.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${options2.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${options2.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${options2.labelBoxBorderColor};\n    fill: ${options2.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${options2.noteBorderColor};\n    fill: ${options2.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${options2.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${options2.activationBkgColor};\n    stroke: ${options2.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${options2.activationBkgColor};\n    stroke: ${options2.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${options2.activationBkgColor};\n    stroke: ${options2.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${options2.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${options2.actorBorder};\n    fill: ${options2.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${options2.actorBorder};\n    fill: ${options2.actorBkg};\n    stroke-width: 2px;\n  }\n\n`,"getStyles")}}),init_svgDraw2=__esm({"src/diagrams/sequence/svgDraw.js"(){import_sanitize_url5=__toESM(require_dist(),1),init_config(),init_utils2(),init_common(),init_svgDrawCommon(),ACTOR_TYPE_WIDTH=36,drawRect4=__name(function(elem,rectData){return drawRect(elem,rectData)},"drawRect"),drawPopup=__name(function(elem,actor,minMenuWidth,textAttrs,forceMenus){if(void 0===actor.links||null===actor.links||0===Object.keys(actor.links).length)return{height:0,width:0};const links3=actor.links,actorCnt2=actor.actorCnt,rectData=actor.rectData;var displayValue="none";forceMenus&&(displayValue="block !important");const g2=elem.append("g");g2.attr("id","actor"+actorCnt2+"_popup"),g2.attr("class","actorPopupMenu"),g2.attr("display",displayValue);var actorClass="";void 0!==rectData.class&&(actorClass=" "+rectData.class);let menuWidth=rectData.width>minMenuWidth?rectData.width:minMenuWidth;const rectElem=g2.append("rect");if(rectElem.attr("class","actorPopupMenuPanel"+actorClass),rectElem.attr("x",rectData.x),rectElem.attr("y",rectData.height),rectElem.attr("fill",rectData.fill),rectElem.attr("stroke",rectData.stroke),rectElem.attr("width",menuWidth),rectElem.attr("height",rectData.height),rectElem.attr("rx",rectData.rx),rectElem.attr("ry",rectData.ry),null!=links3){var linkY=20;for(let key in links3){var linkElem=g2.append("a"),sanitizedLink=(0,import_sanitize_url5.sanitizeUrl)(links3[key]);linkElem.attr("xlink:href",sanitizedLink),linkElem.attr("target","_blank"),_drawMenuItemTextCandidateFunc(textAttrs)(key,linkElem,rectData.x+10,rectData.height+linkY,menuWidth,20,{class:"actor"},textAttrs),linkY+=30}}return rectElem.attr("height",linkY),{height:rectData.height+linkY,width:menuWidth}},"drawPopup"),popupMenuToggle=__name(function(popId){return"var pu = document.getElementById('"+popId+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),drawKatex=__name(async function(elem,textData,msgModel=null){let textElem=elem.append("foreignObject");const linesSanitized=await renderKatexSanitized(textData.text,getConfig()),dim=textElem.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(linesSanitized).node().getBoundingClientRect();if(textElem.attr("height",Math.round(dim.height)).attr("width",Math.round(dim.width)),"noteText"===textData.class){const rectElem=elem.node().firstChild;rectElem.setAttribute("height",dim.height+2*textData.textMargin);const rectDim=rectElem.getBBox();textElem.attr("x",Math.round(rectDim.x+rectDim.width/2-dim.width/2)).attr("y",Math.round(rectDim.y+rectDim.height/2-dim.height/2))}else if(msgModel){let{startx:startx,stopx:stopx,starty:starty}=msgModel;if(startx>stopx){const temp=startx;startx=stopx,stopx=temp}textElem.attr("x",Math.round(startx+Math.abs(startx-stopx)/2-dim.width/2)),"loopText"===textData.class?textElem.attr("y",Math.round(starty)):textElem.attr("y",Math.round(starty-dim.height))}return[textElem]},"drawKatex"),drawText3=__name(function(elem,textData){let prevTextHeight=0,textHeight=0;const lines=textData.text.split(common_default.lineBreakRegex),[_textFontSize,_textFontSizePx]=parseFontSize(textData.fontSize);let textElems=[],dy=0,yfunc=__name(()=>textData.y,"yfunc");if(void 0!==textData.valign&&void 0!==textData.textMargin&&textData.textMargin>0)switch(textData.valign){case"top":case"start":yfunc=__name(()=>Math.round(textData.y+textData.textMargin),"yfunc");break;case"middle":case"center":yfunc=__name(()=>Math.round(textData.y+(prevTextHeight+textHeight+textData.textMargin)/2),"yfunc");break;case"bottom":case"end":yfunc=__name(()=>Math.round(textData.y+(prevTextHeight+textHeight+2*textData.textMargin)-textData.textMargin),"yfunc")}if(void 0!==textData.anchor&&void 0!==textData.textMargin&&void 0!==textData.width)switch(textData.anchor){case"left":case"start":textData.x=Math.round(textData.x+textData.textMargin),textData.anchor="start",textData.dominantBaseline="middle",textData.alignmentBaseline="middle";break;case"middle":case"center":textData.x=Math.round(textData.x+textData.width/2),textData.anchor="middle",textData.dominantBaseline="middle",textData.alignmentBaseline="middle";break;case"right":case"end":textData.x=Math.round(textData.x+textData.width-textData.textMargin),textData.anchor="end",textData.dominantBaseline="middle",textData.alignmentBaseline="middle"}for(let[i2,line2]of lines.entries()){void 0!==textData.textMargin&&0===textData.textMargin&&void 0!==_textFontSize&&(dy=i2*_textFontSize);const textElem=elem.append("text");textElem.attr("x",textData.x),textElem.attr("y",yfunc()),void 0!==textData.anchor&&textElem.attr("text-anchor",textData.anchor).attr("dominant-baseline",textData.dominantBaseline).attr("alignment-baseline",textData.alignmentBaseline),void 0!==textData.fontFamily&&textElem.style("font-family",textData.fontFamily),void 0!==_textFontSizePx&&textElem.style("font-size",_textFontSizePx),void 0!==textData.fontWeight&&textElem.style("font-weight",textData.fontWeight),void 0!==textData.fill&&textElem.attr("fill",textData.fill),void 0!==textData.class&&textElem.attr("class",textData.class),void 0!==textData.dy?textElem.attr("dy",textData.dy):0!==dy&&textElem.attr("dy",dy);const text4=line2||ZERO_WIDTH_SPACE;if(textData.tspan){const span=textElem.append("tspan");span.attr("x",textData.x),void 0!==textData.fill&&span.attr("fill",textData.fill),span.text(text4)}else textElem.text(text4);void 0!==textData.valign&&void 0!==textData.textMargin&&textData.textMargin>0&&(textHeight+=(textElem._groups||textElem)[0][0].getBBox().height,prevTextHeight=textHeight),textElems.push(textElem)}return textElems},"drawText"),drawLabel=__name(function(elem,txtObject){function genPoints(x5,y6,width3,height2,cut){return x5+","+y6+" "+(x5+width3)+","+y6+" "+(x5+width3)+","+(y6+height2-cut)+" "+(x5+width3-1.2*cut)+","+(y6+height2)+" "+x5+","+(y6+height2)}__name(genPoints,"genPoints");const polygon2=elem.append("polygon");return polygon2.attr("points",genPoints(txtObject.x,txtObject.y,txtObject.width,txtObject.height,7)),polygon2.attr("class","labelBox"),txtObject.y=txtObject.y+txtObject.height/2,drawText3(elem,txtObject),polygon2},"drawLabel"),actorCnt=-1,fixLifeLineHeights=__name((diagram27,actors2,actorKeys,conf5)=>{diagram27.select&&actorKeys.forEach(actorKey=>{const actor=actors2.get(actorKey),actorDOM=diagram27.select("#actor"+actor.actorCnt);!conf5.mirrorActors&&actor.stopy?actorDOM.attr("y2",actor.stopy+actor.height/2):conf5.mirrorActors&&actorDOM.attr("y2",actor.stopy)})},"fixLifeLineHeights"),drawActorTypeParticipant=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+actor.height,boxplusLineGroup=elem.append("g").lower();var g2=boxplusLineGroup;isFooter||(actorCnt++,Object.keys(actor.links||{}).length&&!conf5.forceMenus&&g2.attr("onclick",popupMenuToggle(`actor${actorCnt}_popup`)).attr("cursor","pointer"),g2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),g2=boxplusLineGroup.append("g"),actor.actorCnt=actorCnt,null!=actor.links&&g2.attr("id","root-"+actorCnt));const rect3=getNoteRect();var cssclass="actor";actor.properties?.class?cssclass=actor.properties.class:rect3.fill="#eaeaea",cssclass+=isFooter?" actor-bottom":" actor-top",rect3.x=actor.x,rect3.y=actorY,rect3.width=actor.width,rect3.height=actor.height,rect3.class=cssclass,rect3.rx=3,rect3.ry=3,rect3.name=actor.name;const rectElem=drawRect4(g2,rect3);if(actor.rectData=rect3,actor.properties?.icon){const iconSrc=actor.properties.icon.trim();"@"===iconSrc.charAt(0)?drawEmbeddedImage(g2,rect3.x+rect3.width-20,rect3.y+10,iconSrc.substr(1)):drawImage(g2,rect3.x+rect3.width-20,rect3.y+10,iconSrc)}_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,g2,rect3.x,rect3.y,rect3.width,rect3.height,{class:"actor actor-box"},conf5);let height2=actor.height;if(rectElem.node){const bounds4=rectElem.node().getBBox();actor.height=bounds4.height,height2=bounds4.height}return height2},"drawActorTypeParticipant"),drawActorTypeCollections=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+actor.height,boxplusLineGroup=elem.append("g").lower();var g2=boxplusLineGroup;isFooter||(actorCnt++,Object.keys(actor.links||{}).length&&!conf5.forceMenus&&g2.attr("onclick",popupMenuToggle(`actor${actorCnt}_popup`)).attr("cursor","pointer"),g2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),g2=boxplusLineGroup.append("g"),actor.actorCnt=actorCnt,null!=actor.links&&g2.attr("id","root-"+actorCnt));const rect3=getNoteRect();var cssclass="actor";actor.properties?.class?cssclass=actor.properties.class:rect3.fill="#eaeaea",cssclass+=isFooter?" actor-bottom":" actor-top",rect3.x=actor.x,rect3.y=actorY,rect3.width=actor.width,rect3.height=actor.height,rect3.class=cssclass,rect3.name=actor.name;const shadowRect={...rect3,x:rect3.x+-6,y:rect3.y+6,class:"actor"},rectElem=drawRect4(g2,rect3);if(drawRect4(g2,shadowRect),actor.rectData=rect3,actor.properties?.icon){const iconSrc=actor.properties.icon.trim();"@"===iconSrc.charAt(0)?drawEmbeddedImage(g2,rect3.x+rect3.width-20,rect3.y+10,iconSrc.substr(1)):drawImage(g2,rect3.x+rect3.width-20,rect3.y+10,iconSrc)}_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,g2,rect3.x-6,rect3.y+6,rect3.width,rect3.height,{class:"actor actor-box"},conf5);let height2=actor.height;if(rectElem.node){const bounds4=rectElem.node().getBBox();actor.height=bounds4.height,height2=bounds4.height}return height2},"drawActorTypeCollections"),drawActorTypeQueue=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+actor.height,boxplusLineGroup=elem.append("g").lower();let g2=boxplusLineGroup;isFooter||(actorCnt++,Object.keys(actor.links||{}).length&&!conf5.forceMenus&&g2.attr("onclick",popupMenuToggle(`actor${actorCnt}_popup`)).attr("cursor","pointer"),g2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),g2=boxplusLineGroup.append("g"),actor.actorCnt=actorCnt,null!=actor.links&&g2.attr("id","root-"+actorCnt));const rect3=getNoteRect();let cssclass="actor";actor.properties?.class?cssclass=actor.properties.class:rect3.fill="#eaeaea",cssclass+=isFooter?" actor-bottom":" actor-top",rect3.x=actor.x,rect3.y=actorY,rect3.width=actor.width,rect3.height=actor.height,rect3.class=cssclass,rect3.name=actor.name;const ry=rect3.height/2,rx=ry/(2.5+rect3.height/50),cylinderGroup=g2.append("g"),cylinderArc=g2.append("g");if(cylinderGroup.append("path").attr("d",`M ${rect3.x},${rect3.y+ry}\n    a ${rx},${ry} 0 0 0 0,${rect3.height}\n    h ${rect3.width-2*rx}\n    a ${rx},${ry} 0 0 0 0,-${rect3.height}\n    Z\n  `).attr("class",cssclass),cylinderArc.append("path").attr("d",`M ${rect3.x},${rect3.y+ry}\n      a ${rx},${ry} 0 0 0 0,${rect3.height}`).attr("stroke","#666").attr("stroke-width","1px").attr("class",cssclass),cylinderGroup.attr("transform",`translate(${rx}, ${-rect3.height/2})`),cylinderArc.attr("transform",`translate(${rect3.width-rx}, ${-rect3.height/2})`),actor.rectData=rect3,actor.properties?.icon){const iconSrc=actor.properties.icon.trim(),iconX=rect3.x+rect3.width-20,iconY=rect3.y+10;"@"===iconSrc.charAt(0)?drawEmbeddedImage(g2,iconX,iconY,iconSrc.substr(1)):drawImage(g2,iconX,iconY,iconSrc)}_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,g2,rect3.x,rect3.y,rect3.width,rect3.height,{class:"actor actor-box"},conf5);let height2=actor.height;const lastPath=cylinderGroup.select("path:last-child");if(lastPath.node()){const bounds4=lastPath.node().getBBox();actor.height=bounds4.height,height2=bounds4.height}return height2},"drawActorTypeQueue"),drawActorTypeControl=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+75,line2=elem.append("g").lower();isFooter||(actorCnt++,line2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),actor.actorCnt=actorCnt);const actElem=elem.append("g");let cssClass="actor-man";cssClass+=isFooter?" actor-bottom":" actor-top",actElem.attr("class",cssClass),actElem.attr("name",actor.name);const rect3=getNoteRect();rect3.x=actor.x,rect3.y=actorY,rect3.fill="#eaeaea",rect3.width=actor.width,rect3.height=actor.height,rect3.class="actor";const cx=actor.x+actor.width/2,cy=actorY+30;actElem.append("defs").append("marker").attr("id","filled-head-control").attr("refX",11).attr("refY",5.8).attr("markerWidth",20).attr("markerHeight",28).attr("orient","172.5").append("path").attr("d","M 14.4 5.6 L 7.2 10.4 L 8.8 5.6 L 7.2 0.8 Z"),actElem.append("circle").attr("cx",cx).attr("cy",cy).attr("r",18).attr("fill","#eaeaf7").attr("stroke","#666").attr("stroke-width",1.2),actElem.append("line").attr("marker-end","url(#filled-head-control)").attr("transform",`translate(${cx}, ${cy-18})`);const bounds4=actElem.node().getBBox();return actor.height=bounds4.height+2*(conf5?.sequence?.labelBoxHeight??0),_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,actElem,rect3.x,rect3.y+18+(isFooter?5:10),rect3.width,rect3.height,{class:"actor actor-man"},conf5),actor.height},"drawActorTypeControl"),drawActorTypeEntity=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+75,line2=elem.append("g").lower(),actElem=elem.append("g");let cssClass="actor-man";cssClass+=isFooter?" actor-bottom":" actor-top",actElem.attr("class",cssClass),actElem.attr("name",actor.name);const rect3=getNoteRect();rect3.x=actor.x,rect3.y=actorY,rect3.fill="#eaeaea",rect3.width=actor.width,rect3.height=actor.height,rect3.class="actor";const cx=actor.x+actor.width/2,cy=actorY+(isFooter?10:25);actElem.append("circle").attr("cx",cx).attr("cy",cy).attr("r",18).attr("width",actor.width).attr("height",actor.height),actElem.append("line").attr("x1",cx-18).attr("x2",cx+18).attr("y1",cy+18).attr("y2",cy+18).attr("stroke","#333").attr("stroke-width",2);const bounds4=actElem.node().getBBox();return actor.height=bounds4.height+(conf5?.sequence?.labelBoxHeight??0),isFooter||(actorCnt++,line2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),actor.actorCnt=actorCnt),_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,actElem,rect3.x,rect3.y+(isFooter?(cy-actorY+18-5)/2:(cy+18-actorY)/2),rect3.width,rect3.height,{class:"actor actor-man"},conf5),actElem.attr("transform","translate(0, 9)"),actor.height},"drawActorTypeEntity"),drawActorTypeDatabase=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+actor.height+2*conf5.boxTextMargin,boxplusLineGroup=elem.append("g").lower();let g2=boxplusLineGroup;isFooter||(actorCnt++,Object.keys(actor.links||{}).length&&!conf5.forceMenus&&g2.attr("onclick",popupMenuToggle(`actor${actorCnt}_popup`)).attr("cursor","pointer"),g2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),g2=boxplusLineGroup.append("g"),actor.actorCnt=actorCnt,null!=actor.links&&g2.attr("id","root-"+actorCnt));const rect3=getNoteRect();let cssclass="actor";actor.properties?.class?cssclass=actor.properties.class:rect3.fill="#eaeaea",cssclass+=isFooter?" actor-bottom":" actor-top",rect3.x=actor.x,rect3.y=actorY,rect3.width=actor.width,rect3.height=actor.height,rect3.class=cssclass,rect3.name=actor.name,rect3.x=actor.x,rect3.y=actorY;const w4=rect3.width/4,h3=rect3.width/4,rx=w4/2,ry=rx/(2.5+w4/50),cylinderGroup=g2.append("g"),d3=`\n  M ${rect3.x},${rect3.y+ry}\n  a ${rx},${ry} 0 0 0 ${w4},0\n  a ${rx},${ry} 0 0 0 -${w4},0\n  l 0,${h3-2*ry}\n  a ${rx},${ry} 0 0 0 ${w4},0\n  l 0,-${h3-2*ry}\n`;cylinderGroup.append("path").attr("d",d3).attr("fill","#eaeaea").attr("stroke","#000").attr("stroke-width",1).attr("class",cssclass),isFooter?cylinderGroup.attr("transform",`translate(${1.5*w4}, ${rect3.height/4-2*ry})`):cylinderGroup.attr("transform",`translate(${1.5*w4}, ${(rect3.height+ry)/4})`),actor.rectData=rect3,_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,g2,rect3.x,rect3.y+(isFooter?(rect3.height+h3)/4:(rect3.height+ry)/2),rect3.width,rect3.height,{class:"actor actor-box"},conf5);const lastPath=cylinderGroup.select("path:last-child");if(lastPath.node()){const bounds4=lastPath.node().getBBox();actor.height=bounds4.height+(conf5.sequence.labelBoxHeight??0)}return actor.height},"drawActorTypeDatabase"),drawActorTypeBoundary=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+80,line2=elem.append("g").lower();isFooter||(actorCnt++,line2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),actor.actorCnt=actorCnt);const actElem=elem.append("g");let cssClass="actor-man";cssClass+=isFooter?" actor-bottom":" actor-top",actElem.attr("class",cssClass),actElem.attr("name",actor.name);const rect3=getNoteRect();rect3.x=actor.x,rect3.y=actorY,rect3.fill="#eaeaea",rect3.width=actor.width,rect3.height=actor.height,rect3.class="actor",actElem.append("line").attr("id","actor-man-torso"+actorCnt).attr("x1",actor.x+actor.width/2-75).attr("y1",actorY+10).attr("x2",actor.x+actor.width/2-15).attr("y2",actorY+10),actElem.append("line").attr("id","actor-man-arms"+actorCnt).attr("x1",actor.x+actor.width/2-75).attr("y1",actorY+0).attr("x2",actor.x+actor.width/2-75).attr("y2",actorY+20),actElem.append("circle").attr("cx",actor.x+actor.width/2).attr("cy",actorY+10).attr("r",30);const bounds4=actElem.node().getBBox();return actor.height=bounds4.height+(conf5.sequence.labelBoxHeight??0),_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,actElem,rect3.x,rect3.y+(isFooter?11:18),rect3.width,rect3.height,{class:"actor actor-man"},conf5),actElem.attr("transform","translate(0,22)"),actor.height},"drawActorTypeBoundary"),drawActorTypeActor=__name(function(elem,actor,conf5,isFooter){const actorY=isFooter?actor.stopy:actor.starty,center4=actor.x+actor.width/2,centerY=actorY+80,line2=elem.append("g").lower();isFooter||(actorCnt++,line2.append("line").attr("id","actor"+actorCnt).attr("x1",center4).attr("y1",centerY).attr("x2",center4).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",actor.name),actor.actorCnt=actorCnt);const actElem=elem.append("g");let cssClass="actor-man";cssClass+=isFooter?" actor-bottom":" actor-top",actElem.attr("class",cssClass),actElem.attr("name",actor.name);const rect3=getNoteRect();rect3.x=actor.x,rect3.y=actorY,rect3.fill="#eaeaea",rect3.width=actor.width,rect3.height=actor.height,rect3.class="actor",rect3.rx=3,rect3.ry=3,actElem.append("line").attr("id","actor-man-torso"+actorCnt).attr("x1",center4).attr("y1",actorY+25).attr("x2",center4).attr("y2",actorY+45),actElem.append("line").attr("id","actor-man-arms"+actorCnt).attr("x1",center4-ACTOR_TYPE_WIDTH/2).attr("y1",actorY+33).attr("x2",center4+ACTOR_TYPE_WIDTH/2).attr("y2",actorY+33),actElem.append("line").attr("x1",center4-ACTOR_TYPE_WIDTH/2).attr("y1",actorY+60).attr("x2",center4).attr("y2",actorY+45),actElem.append("line").attr("x1",center4).attr("y1",actorY+45).attr("x2",center4+ACTOR_TYPE_WIDTH/2-2).attr("y2",actorY+60);const circle6=actElem.append("circle");circle6.attr("cx",actor.x+actor.width/2),circle6.attr("cy",actorY+10),circle6.attr("r",15),circle6.attr("width",actor.width),circle6.attr("height",actor.height);const bounds4=actElem.node().getBBox();return actor.height=bounds4.height,_drawTextCandidateFunc2(conf5,hasKatex(actor.description))(actor.description,actElem,rect3.x,rect3.y+35,rect3.width,rect3.height,{class:"actor actor-man"},conf5),actor.height},"drawActorTypeActor"),drawActor=__name(async function(elem,actor,conf5,isFooter){switch(actor.type){case"actor":return await drawActorTypeActor(elem,actor,conf5,isFooter);case"participant":return await drawActorTypeParticipant(elem,actor,conf5,isFooter);case"boundary":return await drawActorTypeBoundary(elem,actor,conf5,isFooter);case"control":return await drawActorTypeControl(elem,actor,conf5,isFooter);case"entity":return await drawActorTypeEntity(elem,actor,conf5,isFooter);case"database":return await drawActorTypeDatabase(elem,actor,conf5,isFooter);case"collections":return await drawActorTypeCollections(elem,actor,conf5,isFooter);case"queue":return await drawActorTypeQueue(elem,actor,conf5,isFooter)}},"drawActor"),drawBox=__name(function(elem,box,conf5){const g2=elem.append("g");drawBackgroundRect2(g2,box),box.name&&_drawTextCandidateFunc2(conf5)(box.name,g2,box.x,box.y+conf5.boxTextMargin+(box.textMaxHeight||0)/2,box.width,0,{class:"text"},conf5),g2.lower()},"drawBox"),anchorElement=__name(function(elem){return elem.append("g")},"anchorElement"),drawActivation=__name(function(elem,bounds4,verticalPos,conf5,actorActivations2){const rect3=getNoteRect(),g2=bounds4.anchored;rect3.x=bounds4.startx,rect3.y=bounds4.starty,rect3.class="activation"+actorActivations2%3,rect3.width=bounds4.stopx-bounds4.startx,rect3.height=verticalPos-bounds4.starty,drawRect4(g2,rect3)},"drawActivation"),drawLoop=__name(async function(elem,loopModel,labelText,conf5){const{boxMargin:boxMargin,boxTextMargin:boxTextMargin,labelBoxHeight:labelBoxHeight,labelBoxWidth:labelBoxWidth,messageFontFamily:fontFamily,messageFontSize:fontSize,messageFontWeight:fontWeight}=conf5,g2=elem.append("g"),drawLoopLine=__name(function(startx,starty,stopx,stopy){return g2.append("line").attr("x1",startx).attr("y1",starty).attr("x2",stopx).attr("y2",stopy).attr("class","loopLine")},"drawLoopLine");drawLoopLine(loopModel.startx,loopModel.starty,loopModel.stopx,loopModel.starty),drawLoopLine(loopModel.stopx,loopModel.starty,loopModel.stopx,loopModel.stopy),drawLoopLine(loopModel.startx,loopModel.stopy,loopModel.stopx,loopModel.stopy),drawLoopLine(loopModel.startx,loopModel.starty,loopModel.startx,loopModel.stopy),void 0!==loopModel.sections&&loopModel.sections.forEach(function(item){drawLoopLine(loopModel.startx,item.y,loopModel.stopx,item.y).style("stroke-dasharray","3, 3")});let txt=getTextObj();txt.text=labelText,txt.x=loopModel.startx,txt.y=loopModel.starty,txt.fontFamily=fontFamily,txt.fontSize=fontSize,txt.fontWeight=fontWeight,txt.anchor="middle",txt.valign="middle",txt.tspan=!1,txt.width=labelBoxWidth||50,txt.height=labelBoxHeight||20,txt.textMargin=boxTextMargin,txt.class="labelText",drawLabel(g2,txt),txt=getTextObj3(),txt.text=loopModel.title,txt.x=loopModel.startx+labelBoxWidth/2+(loopModel.stopx-loopModel.startx)/2,txt.y=loopModel.starty+boxMargin+boxTextMargin,txt.anchor="middle",txt.valign="middle",txt.textMargin=boxTextMargin,txt.class="loopText",txt.fontFamily=fontFamily,txt.fontSize=fontSize,txt.fontWeight=fontWeight,txt.wrap=!0;let textElem=hasKatex(txt.text)?await drawKatex(g2,txt,loopModel):drawText3(g2,txt);if(void 0!==loopModel.sectionTitles)for(const[idx,item]of Object.entries(loopModel.sectionTitles))if(item.message){txt.text=item.message,txt.x=loopModel.startx+(loopModel.stopx-loopModel.startx)/2,txt.y=loopModel.sections[idx].y+boxMargin+boxTextMargin,txt.class="loopText",txt.anchor="middle",txt.valign="middle",txt.tspan=!1,txt.fontFamily=fontFamily,txt.fontSize=fontSize,txt.fontWeight=fontWeight,txt.wrap=loopModel.wrap,hasKatex(txt.text)?(loopModel.starty=loopModel.sections[idx].y,await drawKatex(g2,txt,loopModel)):drawText3(g2,txt);let sectionHeight=Math.round(textElem.map(te=>(te._groups||te)[0][0].getBBox().height).reduce((acc,curr)=>acc+curr));loopModel.sections[idx].height+=sectionHeight-(boxMargin+boxTextMargin)}return loopModel.height=Math.round(loopModel.stopy-loopModel.starty),g2},"drawLoop"),drawBackgroundRect2=__name(function(elem,bounds4){drawBackgroundRect(elem,bounds4)},"drawBackgroundRect"),insertDatabaseIcon2=__name(function(elem){elem.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),insertComputerIcon2=__name(function(elem){elem.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),insertClockIcon2=__name(function(elem){elem.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),insertArrowHead2=__name(function(elem){elem.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),insertArrowFilledHead2=__name(function(elem){elem.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),insertSequenceNumber=__name(function(elem){elem.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),insertArrowCrossHead2=__name(function(elem){elem.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),getTextObj3=__name(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),getNoteRect2=__name(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),_drawTextCandidateFunc2=function(){function byText(content,g2,x5,y6,width3,height2,textAttrs){_setTextAttrs(g2.append("text").attr("x",x5+width3/2).attr("y",y6+height2/2+5).style("text-anchor","middle").text(content),textAttrs)}function byTspan(content,g2,x5,y6,width3,height2,textAttrs,conf5){const{actorFontSize:actorFontSize,actorFontFamily:actorFontFamily,actorFontWeight:actorFontWeight}=conf5,[_actorFontSize,_actorFontSizePx]=parseFontSize(actorFontSize),lines=content.split(common_default.lineBreakRegex);for(let i2=0;i2<lines.length;i2++){const dy=i2*_actorFontSize-_actorFontSize*(lines.length-1)/2,text4=g2.append("text").attr("x",x5+width3/2).attr("y",y6).style("text-anchor","middle").style("font-size",_actorFontSizePx).style("font-weight",actorFontWeight).style("font-family",actorFontFamily);text4.append("tspan").attr("x",x5+width3/2).attr("dy",dy).text(lines[i2]),text4.attr("y",y6+height2/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),_setTextAttrs(text4,textAttrs)}}function byFo(content,g2,x5,y6,width3,height2,textAttrs,conf5){const s2=g2.append("switch"),text4=s2.append("foreignObject").attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");text4.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(content),byTspan(content,s2,x5,y6,width3,height2,textAttrs,conf5),_setTextAttrs(text4,textAttrs)}async function byKatex(content,g2,x5,y6,width3,height2,textAttrs,conf5){const dim=await calculateMathMLDimensions(content,getConfig()),s2=g2.append("switch"),text4=s2.append("foreignObject").attr("x",x5+width3/2-dim.width/2).attr("y",y6+height2/2-dim.height/2).attr("width",dim.width).attr("height",dim.height).append("xhtml:div").style("height","100%").style("width","100%");text4.append("div").style("text-align","center").style("vertical-align","middle").html(await renderKatexSanitized(content,getConfig())),byTspan(content,s2,x5,y6,width3,height2,textAttrs,conf5),_setTextAttrs(text4,textAttrs)}function _setTextAttrs(toText,fromTextAttrsDict){for(const key in fromTextAttrsDict)fromTextAttrsDict.hasOwnProperty(key)&&toText.attr(key,fromTextAttrsDict[key])}return __name(byText,"byText"),__name(byTspan,"byTspan"),__name(byFo,"byFo"),__name(byKatex,"byKatex"),__name(_setTextAttrs,"_setTextAttrs"),function(conf5,hasKatex2=!1){return hasKatex2?byKatex:"fo"===conf5.textPlacement?byFo:"old"===conf5.textPlacement?byText:byTspan}}(),_drawMenuItemTextCandidateFunc=function(){function byText(content,g2,x5,y6,width3,height2,textAttrs){_setTextAttrs(g2.append("text").attr("x",x5).attr("y",y6).style("text-anchor","start").text(content),textAttrs)}function byTspan(content,g2,x5,y6,width3,height2,textAttrs,conf5){const{actorFontSize:actorFontSize,actorFontFamily:actorFontFamily,actorFontWeight:actorFontWeight}=conf5,lines=content.split(common_default.lineBreakRegex);for(let i2=0;i2<lines.length;i2++){const dy=i2*actorFontSize-actorFontSize*(lines.length-1)/2,text4=g2.append("text").attr("x",x5).attr("y",y6).style("text-anchor","start").style("font-size",actorFontSize).style("font-weight",actorFontWeight).style("font-family",actorFontFamily);text4.append("tspan").attr("x",x5).attr("dy",dy).text(lines[i2]),text4.attr("y",y6+height2/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),_setTextAttrs(text4,textAttrs)}}function byFo(content,g2,x5,y6,width3,height2,textAttrs,conf5){const s2=g2.append("switch"),text4=s2.append("foreignObject").attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");text4.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(content),byTspan(content,s2,x5,y6,0,height2,textAttrs,conf5),_setTextAttrs(text4,textAttrs)}function _setTextAttrs(toText,fromTextAttrsDict){for(const key in fromTextAttrsDict)fromTextAttrsDict.hasOwnProperty(key)&&toText.attr(key,fromTextAttrsDict[key])}return __name(byText,"byText"),__name(byTspan,"byTspan"),__name(byFo,"byFo"),__name(_setTextAttrs,"_setTextAttrs"),function(conf5){return"fo"===conf5.textPlacement?byFo:"old"===conf5.textPlacement?byText:byTspan}}(),svgDraw_default2={drawRect:drawRect4,drawText:drawText3,drawLabel:drawLabel,drawActor:drawActor,drawBox:drawBox,drawPopup:drawPopup,anchorElement:anchorElement,drawActivation:drawActivation,drawLoop:drawLoop,drawBackgroundRect:drawBackgroundRect2,insertArrowHead:insertArrowHead2,insertArrowFilledHead:insertArrowFilledHead2,insertSequenceNumber:insertSequenceNumber,insertArrowCrossHead:insertArrowCrossHead2,insertDatabaseIcon:insertDatabaseIcon2,insertComputerIcon:insertComputerIcon2,insertClockIcon:insertClockIcon2,getTextObj:getTextObj3,getNoteRect:getNoteRect2,fixLifeLineHeights:fixLifeLineHeights,sanitizeUrl:import_sanitize_url5.sanitizeUrl}}});async function boundMessage(_diagram,msgModel){bounds2.bumpVerticalPos(10);const{startx:startx,stopx:stopx,message:message}=msgModel,lines=common_default.splitBreaks(message).length,isKatexMsg=hasKatex(message),textDims=isKatexMsg?await calculateMathMLDimensions(message,getConfig2()):utils_default2.calculateTextDimensions(message,messageFont2(conf2));if(!isKatexMsg){const lineHeight=textDims.height/lines;msgModel.height+=lineHeight,bounds2.bumpVerticalPos(lineHeight)}let lineStartY,totalOffset=textDims.height-10;const textWidth=textDims.width;if(startx===stopx){lineStartY=bounds2.getVerticalPos()+totalOffset,conf2.rightAngles||(totalOffset+=conf2.boxMargin,lineStartY=bounds2.getVerticalPos()+totalOffset),totalOffset+=30;const dx=common_default.getMax(textWidth/2,conf2.width/2);bounds2.insert(startx-dx,bounds2.getVerticalPos()-10+totalOffset,stopx+dx,bounds2.getVerticalPos()+30+totalOffset)}else totalOffset+=conf2.boxMargin,lineStartY=bounds2.getVerticalPos()+totalOffset,bounds2.insert(startx,lineStartY-10,stopx,lineStartY);return bounds2.bumpVerticalPos(totalOffset),msgModel.height+=totalOffset,msgModel.stopy=msgModel.starty+msgModel.height,bounds2.insert(msgModel.fromBounds,msgModel.starty,msgModel.toBounds,msgModel.stopy),lineStartY}function adjustLoopHeightForWrap(loopWidths,msg,preMargin,postMargin,addLoopFn){bounds2.bumpVerticalPos(preMargin);let heightAdjust=postMargin;if(msg.id&&msg.message&&loopWidths[msg.id]){const loopWidth=loopWidths[msg.id].width,textConf=messageFont2(conf2);msg.message=utils_default2.wrapLabel(`[${msg.message}]`,loopWidth-2*conf2.wrapPadding,textConf),msg.width=loopWidth,msg.wrap=!0;const textDims=utils_default2.calculateTextDimensions(msg.message,textConf),totalOffset=common_default.getMax(textDims.height,conf2.labelBoxHeight);heightAdjust=postMargin+totalOffset,log.debug(`${totalOffset} - ${msg.message}`)}addLoopFn(msg),bounds2.bumpVerticalPos(heightAdjust)}function adjustCreatedDestroyedData(msg,msgModel,lineStartY,index,actors2,createdActors,destroyedActors){function receiverAdjustment(actor,adjustment){actor.x<actors2.get(msg.from).x?(bounds2.insert(msgModel.stopx-adjustment,msgModel.starty,msgModel.startx,msgModel.stopy+actor.height/2+conf2.noteMargin),msgModel.stopx=msgModel.stopx+adjustment):(bounds2.insert(msgModel.startx,msgModel.starty,msgModel.stopx+adjustment,msgModel.stopy+actor.height/2+conf2.noteMargin),msgModel.stopx=msgModel.stopx-adjustment)}function senderAdjustment(actor,adjustment){actor.x<actors2.get(msg.to).x?(bounds2.insert(msgModel.startx-adjustment,msgModel.starty,msgModel.stopx,msgModel.stopy+actor.height/2+conf2.noteMargin),msgModel.startx=msgModel.startx+adjustment):(bounds2.insert(msgModel.stopx,msgModel.starty,msgModel.startx+adjustment,msgModel.stopy+actor.height/2+conf2.noteMargin),msgModel.startx=msgModel.startx-adjustment)}__name(receiverAdjustment,"receiverAdjustment"),__name(senderAdjustment,"senderAdjustment");const actorArray=[PARTICIPANT_TYPE.ACTOR,PARTICIPANT_TYPE.CONTROL,PARTICIPANT_TYPE.ENTITY,PARTICIPANT_TYPE.DATABASE];if(createdActors.get(msg.to)==index){const actor=actors2.get(msg.to);receiverAdjustment(actor,actorArray.includes(actor.type)?ACTOR_TYPE_WIDTH/2+3:actor.width/2+3),actor.starty=lineStartY-actor.height/2,bounds2.bumpVerticalPos(actor.height/2)}else if(destroyedActors.get(msg.from)==index){const actor=actors2.get(msg.from);if(conf2.mirrorActors){senderAdjustment(actor,actorArray.includes(actor.type)?ACTOR_TYPE_WIDTH/2:actor.width/2)}actor.stopy=lineStartY-actor.height/2,bounds2.bumpVerticalPos(actor.height/2)}else if(destroyedActors.get(msg.to)==index){const actor=actors2.get(msg.to);if(conf2.mirrorActors){receiverAdjustment(actor,actorArray.includes(actor.type)?ACTOR_TYPE_WIDTH/2+3:actor.width/2+3)}actor.stopy=lineStartY-actor.height/2,bounds2.bumpVerticalPos(actor.height/2)}}async function getMaxMessageWidthPerActor(actors2,messages,diagObj){const maxMessageWidthPerActor={};for(const msg of messages)if(actors2.get(msg.to)&&actors2.get(msg.from)){const actor=actors2.get(msg.to);if(msg.placement===diagObj.db.PLACEMENT.LEFTOF&&!actor.prevActor)continue;if(msg.placement===diagObj.db.PLACEMENT.RIGHTOF&&!actor.nextActor)continue;const isNote=void 0!==msg.placement,isMessage=!isNote,textFont=isNote?noteFont(conf2):messageFont2(conf2),wrappedMessage=msg.wrap?utils_default2.wrapLabel(msg.message,conf2.width-2*conf2.wrapPadding,textFont):msg.message,messageWidth=(hasKatex(wrappedMessage)?await calculateMathMLDimensions(msg.message,getConfig2()):utils_default2.calculateTextDimensions(wrappedMessage,textFont)).width+2*conf2.wrapPadding;isMessage&&msg.from===actor.nextActor?maxMessageWidthPerActor[msg.to]=common_default.getMax(maxMessageWidthPerActor[msg.to]||0,messageWidth):isMessage&&msg.from===actor.prevActor?maxMessageWidthPerActor[msg.from]=common_default.getMax(maxMessageWidthPerActor[msg.from]||0,messageWidth):isMessage&&msg.from===msg.to?(maxMessageWidthPerActor[msg.from]=common_default.getMax(maxMessageWidthPerActor[msg.from]||0,messageWidth/2),maxMessageWidthPerActor[msg.to]=common_default.getMax(maxMessageWidthPerActor[msg.to]||0,messageWidth/2)):msg.placement===diagObj.db.PLACEMENT.RIGHTOF?maxMessageWidthPerActor[msg.from]=common_default.getMax(maxMessageWidthPerActor[msg.from]||0,messageWidth):msg.placement===diagObj.db.PLACEMENT.LEFTOF?maxMessageWidthPerActor[actor.prevActor]=common_default.getMax(maxMessageWidthPerActor[actor.prevActor]||0,messageWidth):msg.placement===diagObj.db.PLACEMENT.OVER&&(actor.prevActor&&(maxMessageWidthPerActor[actor.prevActor]=common_default.getMax(maxMessageWidthPerActor[actor.prevActor]||0,messageWidth/2)),actor.nextActor&&(maxMessageWidthPerActor[msg.from]=common_default.getMax(maxMessageWidthPerActor[msg.from]||0,messageWidth/2)))}return log.debug("maxMessageWidthPerActor:",maxMessageWidthPerActor),maxMessageWidthPerActor}async function calculateActorMargins(actors2,actorToMessageWidth,boxes){let maxHeight=0;for(const prop of actors2.keys()){const actor=actors2.get(prop);actor.wrap&&(actor.description=utils_default2.wrapLabel(actor.description,conf2.width-2*conf2.wrapPadding,actorFont(conf2)));const actDims=hasKatex(actor.description)?await calculateMathMLDimensions(actor.description,getConfig2()):utils_default2.calculateTextDimensions(actor.description,actorFont(conf2));actor.width=actor.wrap?conf2.width:common_default.getMax(conf2.width,actDims.width+2*conf2.wrapPadding),actor.height=actor.wrap?common_default.getMax(actDims.height,conf2.height):conf2.height,maxHeight=common_default.getMax(maxHeight,actor.height)}for(const actorKey in actorToMessageWidth){const actor=actors2.get(actorKey);if(!actor)continue;const nextActor=actors2.get(actor.nextActor);if(!nextActor){const actorWidth2=actorToMessageWidth[actorKey]+conf2.actorMargin-actor.width/2;actor.margin=common_default.getMax(actorWidth2,conf2.actorMargin);continue}const actorWidth=actorToMessageWidth[actorKey]+conf2.actorMargin-actor.width/2-nextActor.width/2;actor.margin=common_default.getMax(actorWidth,conf2.actorMargin)}let maxBoxHeight=0;return boxes.forEach(box=>{const textFont=messageFont2(conf2);let totalWidth=box.actorKeys.reduce((total,aKey)=>total+(actors2.get(aKey).width+(actors2.get(aKey).margin||0)),0);totalWidth+=8*conf2.boxMargin,totalWidth-=2*conf2.boxTextMargin,box.wrap&&(box.name=utils_default2.wrapLabel(box.name,totalWidth-2*conf2.wrapPadding,textFont));const boxMsgDimensions=utils_default2.calculateTextDimensions(box.name,textFont);maxBoxHeight=common_default.getMax(boxMsgDimensions.height,maxBoxHeight);const minWidth=common_default.getMax(totalWidth,boxMsgDimensions.width+2*conf2.wrapPadding);if(box.margin=conf2.boxTextMargin,totalWidth<minWidth){const missing=(minWidth-totalWidth)/2;box.margin+=missing}}),boxes.forEach(box=>box.textMaxHeight=maxBoxHeight),common_default.getMax(maxHeight,conf2.height)}var diagram11,init_sequenceRenderer=__esm({"src/diagrams/sequence/sequenceRenderer.ts"(){init_src32(),init_svgDraw2(),init_logger(),init_common(),init_common(),init_svgDrawCommon(),init_diagramAPI(),init_assignWithDepth(),init_utils2(),init_setupGraphViewbox(),init_sequenceDb(),conf2={},bounds2={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:__name(function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(actor=>actor.height||0))+(0===this.loops.length?0:this.loops.map(it=>it.height||0).reduce((acc,h3)=>acc+h3))+(0===this.messages.length?0:this.messages.map(it=>it.height||0).reduce((acc,h3)=>acc+h3))+(0===this.notes.length?0:this.notes.map(it=>it.height||0).reduce((acc,h3)=>acc+h3))},"getHeight"),clear:__name(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:__name(function(boxModel){this.boxes.push(boxModel)},"addBox"),addActor:__name(function(actorModel){this.actors.push(actorModel)},"addActor"),addLoop:__name(function(loopModel){this.loops.push(loopModel)},"addLoop"),addMessage:__name(function(msgModel){this.messages.push(msgModel)},"addMessage"),addNote:__name(function(noteModel){this.notes.push(noteModel)},"addNote"),lastActor:__name(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:__name(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:__name(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:__name(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:__name(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,setConf3(getConfig2())},"init"),updateVal:__name(function(obj,key,val,fun){void 0===obj[key]?obj[key]=val:obj[key]=fun(val,obj[key])},"updateVal"),updateBounds:__name(function(startx,starty,stopx,stopy){const _self=this;let cnt4=0;function updateFn(type3){return __name(function(item){cnt4++;const n2=_self.sequenceItems.length-cnt4+1;_self.updateVal(item,"starty",starty-n2*conf2.boxMargin,Math.min),_self.updateVal(item,"stopy",stopy+n2*conf2.boxMargin,Math.max),_self.updateVal(bounds2.data,"startx",startx-n2*conf2.boxMargin,Math.min),_self.updateVal(bounds2.data,"stopx",stopx+n2*conf2.boxMargin,Math.max),"activation"!==type3&&(_self.updateVal(item,"startx",startx-n2*conf2.boxMargin,Math.min),_self.updateVal(item,"stopx",stopx+n2*conf2.boxMargin,Math.max),_self.updateVal(bounds2.data,"starty",starty-n2*conf2.boxMargin,Math.min),_self.updateVal(bounds2.data,"stopy",stopy+n2*conf2.boxMargin,Math.max))},"updateItemBounds")}__name(updateFn,"updateFn"),this.sequenceItems.forEach(updateFn()),this.activations.forEach(updateFn("activation"))},"updateBounds"),insert:__name(function(startx,starty,stopx,stopy){const _startx=common_default.getMin(startx,stopx),_stopx=common_default.getMax(startx,stopx),_starty=common_default.getMin(starty,stopy),_stopy=common_default.getMax(starty,stopy);this.updateVal(bounds2.data,"startx",_startx,Math.min),this.updateVal(bounds2.data,"starty",_starty,Math.min),this.updateVal(bounds2.data,"stopx",_stopx,Math.max),this.updateVal(bounds2.data,"stopy",_stopy,Math.max),this.updateBounds(_startx,_starty,_stopx,_stopy)},"insert"),newActivation:__name(function(message,diagram27,actors2){const actorRect=actors2.get(message.from),stackedSize=actorActivations(message.from).length||0,x5=actorRect.x+actorRect.width/2+(stackedSize-1)*conf2.activationWidth/2;this.activations.push({startx:x5,starty:this.verticalPos+2,stopx:x5+conf2.activationWidth,stopy:void 0,actor:message.from,anchored:svgDraw_default2.anchorElement(diagram27)})},"newActivation"),endActivation:__name(function(message){const lastActorActivationIdx=this.activations.map(function(activation){return activation.actor}).lastIndexOf(message.from);return this.activations.splice(lastActorActivationIdx,1)[0]},"endActivation"),createLoop:__name(function(title2={message:void 0,wrap:!1,width:void 0},fill){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:title2.message,wrap:title2.wrap,width:title2.width,height:0,fill:fill}},"createLoop"),newLoop:__name(function(title2={message:void 0,wrap:!1,width:void 0},fill){this.sequenceItems.push(this.createLoop(title2,fill))},"newLoop"),endLoop:__name(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:__name(function(){return!!this.sequenceItems.length&&this.sequenceItems[this.sequenceItems.length-1].overlap},"isLoopOverlap"),addSectionToLoop:__name(function(message){const loop=this.sequenceItems.pop();loop.sections=loop.sections||[],loop.sectionTitles=loop.sectionTitles||[],loop.sections.push({y:bounds2.getVerticalPos(),height:0}),loop.sectionTitles.push(message),this.sequenceItems.push(loop)},"addSectionToLoop"),saveVerticalPos:__name(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:__name(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:__name(function(bump){this.verticalPos=this.verticalPos+bump,this.data.stopy=common_default.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:__name(function(){return this.verticalPos},"getVerticalPos"),getBounds:__name(function(){return{bounds:this.data,models:this.models}},"getBounds")},drawNote=__name(async function(elem,noteModel){bounds2.bumpVerticalPos(conf2.boxMargin),noteModel.height=conf2.boxMargin,noteModel.starty=bounds2.getVerticalPos();const rect3=getNoteRect();rect3.x=noteModel.startx,rect3.y=noteModel.starty,rect3.width=noteModel.width||conf2.width,rect3.class="note";const g2=elem.append("g"),rectElem=svgDraw_default2.drawRect(g2,rect3),textObj=getTextObj();textObj.x=noteModel.startx,textObj.y=noteModel.starty,textObj.width=rect3.width,textObj.dy="1em",textObj.text=noteModel.message,textObj.class="noteText",textObj.fontFamily=conf2.noteFontFamily,textObj.fontSize=conf2.noteFontSize,textObj.fontWeight=conf2.noteFontWeight,textObj.anchor=conf2.noteAlign,textObj.textMargin=conf2.noteMargin,textObj.valign="center";const textElem=hasKatex(textObj.text)?await drawKatex(g2,textObj):drawText3(g2,textObj),textHeight=Math.round(textElem.map(te=>(te._groups||te)[0][0].getBBox().height).reduce((acc,curr)=>acc+curr));rectElem.attr("height",textHeight+2*conf2.noteMargin),noteModel.height+=textHeight+2*conf2.noteMargin,bounds2.bumpVerticalPos(textHeight+2*conf2.noteMargin),noteModel.stopy=noteModel.starty+textHeight+2*conf2.noteMargin,noteModel.stopx=noteModel.startx+rect3.width,bounds2.insert(noteModel.startx,noteModel.starty,noteModel.stopx,noteModel.stopy),bounds2.models.addNote(noteModel)},"drawNote"),messageFont2=__name(cnf=>({fontFamily:cnf.messageFontFamily,fontSize:cnf.messageFontSize,fontWeight:cnf.messageFontWeight}),"messageFont"),noteFont=__name(cnf=>({fontFamily:cnf.noteFontFamily,fontSize:cnf.noteFontSize,fontWeight:cnf.noteFontWeight}),"noteFont"),actorFont=__name(cnf=>({fontFamily:cnf.actorFontFamily,fontSize:cnf.actorFontSize,fontWeight:cnf.actorFontWeight}),"actorFont"),__name(boundMessage,"boundMessage"),drawMessage=__name(async function(diagram27,msgModel,lineStartY,diagObj){const{startx:startx,stopx:stopx,starty:starty,message:message,type:type3,sequenceIndex:sequenceIndex,sequenceVisible:sequenceVisible}=msgModel,textDims=utils_default2.calculateTextDimensions(message,messageFont2(conf2)),textObj=getTextObj();textObj.x=startx,textObj.y=starty+10,textObj.width=stopx-startx,textObj.class="messageText",textObj.dy="1em",textObj.text=message,textObj.fontFamily=conf2.messageFontFamily,textObj.fontSize=conf2.messageFontSize,textObj.fontWeight=conf2.messageFontWeight,textObj.anchor=conf2.messageAlign,textObj.valign="center",textObj.textMargin=conf2.wrapPadding,textObj.tspan=!1,hasKatex(textObj.text)?await drawKatex(diagram27,textObj,{startx:startx,stopx:stopx,starty:lineStartY}):drawText3(diagram27,textObj);const textWidth=textDims.width;let line2;startx===stopx?line2=conf2.rightAngles?diagram27.append("path").attr("d",`M  ${startx},${lineStartY} H ${startx+common_default.getMax(conf2.width/2,textWidth/2)} V ${lineStartY+25} H ${startx}`):diagram27.append("path").attr("d","M "+startx+","+lineStartY+" C "+(startx+60)+","+(lineStartY-10)+" "+(startx+60)+","+(lineStartY+30)+" "+startx+","+(lineStartY+20)):(line2=diagram27.append("line"),line2.attr("x1",startx),line2.attr("y1",lineStartY),line2.attr("x2",stopx),line2.attr("y2",lineStartY)),type3===diagObj.db.LINETYPE.DOTTED||type3===diagObj.db.LINETYPE.DOTTED_CROSS||type3===diagObj.db.LINETYPE.DOTTED_POINT||type3===diagObj.db.LINETYPE.DOTTED_OPEN||type3===diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED?(line2.style("stroke-dasharray","3, 3"),line2.attr("class","messageLine1")):line2.attr("class","messageLine0");let url="";if(conf2.arrowMarkerAbsolute&&(url=getUrl(!0)),line2.attr("stroke-width",2),line2.attr("stroke","none"),line2.style("fill","none"),type3!==diagObj.db.LINETYPE.SOLID&&type3!==diagObj.db.LINETYPE.DOTTED||line2.attr("marker-end","url("+url+"#arrowhead)"),type3!==diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID&&type3!==diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED||(line2.attr("marker-start","url("+url+"#arrowhead)"),line2.attr("marker-end","url("+url+"#arrowhead)")),type3!==diagObj.db.LINETYPE.SOLID_POINT&&type3!==diagObj.db.LINETYPE.DOTTED_POINT||line2.attr("marker-end","url("+url+"#filled-head)"),type3!==diagObj.db.LINETYPE.SOLID_CROSS&&type3!==diagObj.db.LINETYPE.DOTTED_CROSS||line2.attr("marker-end","url("+url+"#crosshead)"),sequenceVisible||conf2.showSequenceNumbers){if(type3===diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID||type3===diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED){const SEQUENCE_NUMBER_RADIUS=6;startx<stopx?line2.attr("x1",startx+2*SEQUENCE_NUMBER_RADIUS):line2.attr("x1",startx+SEQUENCE_NUMBER_RADIUS)}diagram27.append("line").attr("x1",startx).attr("y1",lineStartY).attr("x2",startx).attr("y2",lineStartY).attr("stroke-width",0).attr("marker-start","url("+url+"#sequencenumber)"),diagram27.append("text").attr("x",startx).attr("y",lineStartY+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(sequenceIndex)}},"drawMessage"),addActorRenderingData=__name(function(diagram27,actors2,createdActors,actorKeys,verticalPos,messages,isFooter){let prevBox,prevWidth=0,prevMargin=0,maxHeight=0;for(const actorKey of actorKeys){const actor=actors2.get(actorKey),box=actor.box;prevBox&&prevBox!=box&&(isFooter||bounds2.models.addBox(prevBox),prevMargin+=conf2.boxMargin+prevBox.margin),box&&box!=prevBox&&(isFooter||(box.x=prevWidth+prevMargin,box.y=verticalPos),prevMargin+=box.margin),actor.width=actor.width||conf2.width,actor.height=common_default.getMax(actor.height||conf2.height,conf2.height),actor.margin=actor.margin||conf2.actorMargin,maxHeight=common_default.getMax(maxHeight,actor.height),createdActors.get(actor.name)&&(prevMargin+=actor.width/2),actor.x=prevWidth+prevMargin,actor.starty=bounds2.getVerticalPos(),bounds2.insert(actor.x,verticalPos,actor.x+actor.width,actor.height),prevWidth+=actor.width+prevMargin,actor.box&&(actor.box.width=prevWidth+box.margin-actor.box.x),prevMargin=actor.margin,prevBox=actor.box,bounds2.models.addActor(actor)}prevBox&&!isFooter&&bounds2.models.addBox(prevBox),bounds2.bumpVerticalPos(maxHeight)},"addActorRenderingData"),drawActors=__name(async function(diagram27,actors2,actorKeys,isFooter){if(isFooter){let maxHeight=0;bounds2.bumpVerticalPos(2*conf2.boxMargin);for(const actorKey of actorKeys){const actor=actors2.get(actorKey);actor.stopy||(actor.stopy=bounds2.getVerticalPos());const height2=await svgDraw_default2.drawActor(diagram27,actor,conf2,!0);maxHeight=common_default.getMax(maxHeight,height2)}bounds2.bumpVerticalPos(maxHeight+conf2.boxMargin)}else for(const actorKey of actorKeys){const actor=actors2.get(actorKey);await svgDraw_default2.drawActor(diagram27,actor,conf2,!1)}},"drawActors"),drawActorsPopup=__name(function(diagram27,actors2,actorKeys,doc){let maxHeight=0,maxWidth2=0;for(const actorKey of actorKeys){const actor=actors2.get(actorKey),minMenuWidth=getRequiredPopupWidth(actor),menuDimensions=svgDraw_default2.drawPopup(diagram27,actor,minMenuWidth,conf2,conf2.forceMenus,doc);menuDimensions.height>maxHeight&&(maxHeight=menuDimensions.height),menuDimensions.width+actor.x>maxWidth2&&(maxWidth2=menuDimensions.width+actor.x)}return{maxHeight:maxHeight,maxWidth:maxWidth2}},"drawActorsPopup"),setConf3=__name(function(cnf){assignWithDepth_default(conf2,cnf),cnf.fontFamily&&(conf2.actorFontFamily=conf2.noteFontFamily=conf2.messageFontFamily=cnf.fontFamily),cnf.fontSize&&(conf2.actorFontSize=conf2.noteFontSize=conf2.messageFontSize=cnf.fontSize),cnf.fontWeight&&(conf2.actorFontWeight=conf2.noteFontWeight=conf2.messageFontWeight=cnf.fontWeight)},"setConf"),actorActivations=__name(function(actor){return bounds2.activations.filter(function(activation){return activation.actor===actor})},"actorActivations"),activationBounds=__name(function(actor,actors2){const actorObj=actors2.get(actor),activations=actorActivations(actor);return[activations.reduce(function(acc,activation){return common_default.getMin(acc,activation.startx)},actorObj.x+actorObj.width/2-1),activations.reduce(function(acc,activation){return common_default.getMax(acc,activation.stopx)},actorObj.x+actorObj.width/2+1)]},"activationBounds"),__name(adjustLoopHeightForWrap,"adjustLoopHeightForWrap"),__name(adjustCreatedDestroyedData,"adjustCreatedDestroyedData"),draw11=__name(async function(_text,id30,_version,diagObj){const{securityLevel:securityLevel,sequence:sequence}=getConfig2();let sandboxElement;conf2=sequence,"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body"),doc="sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument:document;bounds2.init(),log.debug(diagObj.db);const diagram27="sandbox"===securityLevel?root3.select(`[id="${id30}"]`):select_default2(`[id="${id30}"]`),actors2=diagObj.db.getActors(),createdActors=diagObj.db.getCreatedActors(),destroyedActors=diagObj.db.getDestroyedActors(),boxes=diagObj.db.getBoxes();let actorKeys=diagObj.db.getActorKeys();const messages=diagObj.db.getMessages(),title2=diagObj.db.getDiagramTitle(),hasBoxes=diagObj.db.hasAtLeastOneBox(),hasBoxTitles=diagObj.db.hasAtLeastOneBoxWithTitle(),maxMessageWidthPerActor=await getMaxMessageWidthPerActor(actors2,messages,diagObj);if(conf2.height=await calculateActorMargins(actors2,maxMessageWidthPerActor,boxes),svgDraw_default2.insertComputerIcon(diagram27),svgDraw_default2.insertDatabaseIcon(diagram27),svgDraw_default2.insertClockIcon(diagram27),hasBoxes&&(bounds2.bumpVerticalPos(conf2.boxMargin),hasBoxTitles&&bounds2.bumpVerticalPos(boxes[0].textMaxHeight)),!0===conf2.hideUnusedParticipants){const newActors=new Set;messages.forEach(message=>{newActors.add(message.from),newActors.add(message.to)}),actorKeys=actorKeys.filter(actorKey=>newActors.has(actorKey))}addActorRenderingData(diagram27,actors2,createdActors,actorKeys,0,messages,!1);const loopWidths=await calculateLoopBounds(messages,actors2,maxMessageWidthPerActor,diagObj);function activeEnd(msg,verticalPos){const activationData=bounds2.endActivation(msg);activationData.starty+18>verticalPos&&(activationData.starty=verticalPos-6,verticalPos+=12),svgDraw_default2.drawActivation(diagram27,activationData,verticalPos,conf2,actorActivations(msg.from).length),bounds2.insert(activationData.startx,verticalPos-10,activationData.stopx,verticalPos)}svgDraw_default2.insertArrowHead(diagram27),svgDraw_default2.insertArrowCrossHead(diagram27),svgDraw_default2.insertArrowFilledHead(diagram27),svgDraw_default2.insertSequenceNumber(diagram27),__name(activeEnd,"activeEnd");let sequenceIndex=1,sequenceIndexStep=1;const messagesToDraw=[],backgrounds=[];let index=0;for(const msg of messages){let loopModel,noteModel,msgModel;switch(msg.type){case diagObj.db.LINETYPE.NOTE:bounds2.resetVerticalPos(),noteModel=msg.noteModel,await drawNote(diagram27,noteModel);break;case diagObj.db.LINETYPE.ACTIVE_START:bounds2.newActivation(msg,diagram27,actors2);break;case diagObj.db.LINETYPE.ACTIVE_END:activeEnd(msg,bounds2.getVerticalPos());break;case diagObj.db.LINETYPE.LOOP_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin+conf2.boxTextMargin,message=>bounds2.newLoop(message));break;case diagObj.db.LINETYPE.LOOP_END:loopModel=bounds2.endLoop(),await svgDraw_default2.drawLoop(diagram27,loopModel,"loop",conf2),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos()),bounds2.models.addLoop(loopModel);break;case diagObj.db.LINETYPE.RECT_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin,message=>bounds2.newLoop(void 0,message.message));break;case diagObj.db.LINETYPE.RECT_END:loopModel=bounds2.endLoop(),backgrounds.push(loopModel),bounds2.models.addLoop(loopModel),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos());break;case diagObj.db.LINETYPE.OPT_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin+conf2.boxTextMargin,message=>bounds2.newLoop(message));break;case diagObj.db.LINETYPE.OPT_END:loopModel=bounds2.endLoop(),await svgDraw_default2.drawLoop(diagram27,loopModel,"opt",conf2),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos()),bounds2.models.addLoop(loopModel);break;case diagObj.db.LINETYPE.ALT_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin+conf2.boxTextMargin,message=>bounds2.newLoop(message));break;case diagObj.db.LINETYPE.ALT_ELSE:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin+conf2.boxTextMargin,conf2.boxMargin,message=>bounds2.addSectionToLoop(message));break;case diagObj.db.LINETYPE.ALT_END:loopModel=bounds2.endLoop(),await svgDraw_default2.drawLoop(diagram27,loopModel,"alt",conf2),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos()),bounds2.models.addLoop(loopModel);break;case diagObj.db.LINETYPE.PAR_START:case diagObj.db.LINETYPE.PAR_OVER_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin+conf2.boxTextMargin,message=>bounds2.newLoop(message)),bounds2.saveVerticalPos();break;case diagObj.db.LINETYPE.PAR_AND:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin+conf2.boxTextMargin,conf2.boxMargin,message=>bounds2.addSectionToLoop(message));break;case diagObj.db.LINETYPE.PAR_END:loopModel=bounds2.endLoop(),await svgDraw_default2.drawLoop(diagram27,loopModel,"par",conf2),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos()),bounds2.models.addLoop(loopModel);break;case diagObj.db.LINETYPE.AUTONUMBER:sequenceIndex=msg.message.start||sequenceIndex,sequenceIndexStep=msg.message.step||sequenceIndexStep,msg.message.visible?diagObj.db.enableSequenceNumbers():diagObj.db.disableSequenceNumbers();break;case diagObj.db.LINETYPE.CRITICAL_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin+conf2.boxTextMargin,message=>bounds2.newLoop(message));break;case diagObj.db.LINETYPE.CRITICAL_OPTION:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin+conf2.boxTextMargin,conf2.boxMargin,message=>bounds2.addSectionToLoop(message));break;case diagObj.db.LINETYPE.CRITICAL_END:loopModel=bounds2.endLoop(),await svgDraw_default2.drawLoop(diagram27,loopModel,"critical",conf2),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos()),bounds2.models.addLoop(loopModel);break;case diagObj.db.LINETYPE.BREAK_START:adjustLoopHeightForWrap(loopWidths,msg,conf2.boxMargin,conf2.boxMargin+conf2.boxTextMargin,message=>bounds2.newLoop(message));break;case diagObj.db.LINETYPE.BREAK_END:loopModel=bounds2.endLoop(),await svgDraw_default2.drawLoop(diagram27,loopModel,"break",conf2),bounds2.bumpVerticalPos(loopModel.stopy-bounds2.getVerticalPos()),bounds2.models.addLoop(loopModel);break;default:try{msgModel=msg.msgModel,msgModel.starty=bounds2.getVerticalPos(),msgModel.sequenceIndex=sequenceIndex,msgModel.sequenceVisible=diagObj.db.showSequenceNumbers();const lineStartY=await boundMessage(0,msgModel);adjustCreatedDestroyedData(msg,msgModel,lineStartY,index,actors2,createdActors,destroyedActors),messagesToDraw.push({messageModel:msgModel,lineStartY:lineStartY}),bounds2.models.addMessage(msgModel)}catch(e3){log.error("error while drawing message",e3)}}[diagObj.db.LINETYPE.SOLID_OPEN,diagObj.db.LINETYPE.DOTTED_OPEN,diagObj.db.LINETYPE.SOLID,diagObj.db.LINETYPE.DOTTED,diagObj.db.LINETYPE.SOLID_CROSS,diagObj.db.LINETYPE.DOTTED_CROSS,diagObj.db.LINETYPE.SOLID_POINT,diagObj.db.LINETYPE.DOTTED_POINT,diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID,diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(msg.type)&&(sequenceIndex+=sequenceIndexStep),index++}log.debug("createdActors",createdActors),log.debug("destroyedActors",destroyedActors),await drawActors(diagram27,actors2,actorKeys,!1);for(const e3 of messagesToDraw)await drawMessage(diagram27,e3.messageModel,e3.lineStartY,diagObj);conf2.mirrorActors&&await drawActors(diagram27,actors2,actorKeys,!0),backgrounds.forEach(e3=>svgDraw_default2.drawBackgroundRect(diagram27,e3)),fixLifeLineHeights(diagram27,actors2,actorKeys,conf2);for(const box2 of bounds2.models.boxes){box2.height=bounds2.getVerticalPos()-box2.y,bounds2.insert(box2.x,box2.y,box2.x+box2.width,box2.height);const boxPadding=2*conf2.boxMargin;box2.startx=box2.x-boxPadding,box2.starty=box2.y-.25*boxPadding,box2.stopx=box2.startx+box2.width+2*boxPadding,box2.stopy=box2.starty+box2.height+.75*boxPadding,box2.stroke="rgb(0,0,0, 0.5)",svgDraw_default2.drawBox(diagram27,box2,conf2)}hasBoxes&&bounds2.bumpVerticalPos(conf2.boxMargin);const requiredBoxSize=drawActorsPopup(diagram27,actors2,actorKeys,doc),{bounds:box}=bounds2.getBounds();void 0===box.startx&&(box.startx=0),void 0===box.starty&&(box.starty=0),void 0===box.stopx&&(box.stopx=0),void 0===box.stopy&&(box.stopy=0);let boxHeight=box.stopy-box.starty;boxHeight<requiredBoxSize.maxHeight&&(boxHeight=requiredBoxSize.maxHeight);let height2=boxHeight+2*conf2.diagramMarginY;conf2.mirrorActors&&(height2=height2-conf2.boxMargin+conf2.bottomMarginAdj);let boxWidth=box.stopx-box.startx;boxWidth<requiredBoxSize.maxWidth&&(boxWidth=requiredBoxSize.maxWidth);const width3=boxWidth+2*conf2.diagramMarginX;title2&&diagram27.append("text").text(title2).attr("x",(box.stopx-box.startx)/2-2*conf2.diagramMarginX).attr("y",-25),configureSvgSize(diagram27,height2,width3,conf2.useMaxWidth);const extraVertForTitle=title2?40:0;diagram27.attr("viewBox",box.startx-conf2.diagramMarginX+" -"+(conf2.diagramMarginY+extraVertForTitle)+" "+width3+" "+(height2+extraVertForTitle)),log.debug("models:",bounds2.models)},"draw"),__name(getMaxMessageWidthPerActor,"getMaxMessageWidthPerActor"),getRequiredPopupWidth=__name(function(actor){let requiredPopupWidth=0;const textFont=actorFont(conf2);for(const key in actor.links){const labelWidth=utils_default2.calculateTextDimensions(key,textFont).width+2*conf2.wrapPadding+2*conf2.boxMargin;requiredPopupWidth<labelWidth&&(requiredPopupWidth=labelWidth)}return requiredPopupWidth},"getRequiredPopupWidth"),__name(calculateActorMargins,"calculateActorMargins"),buildNoteModel=__name(async function(msg,actors2,diagObj){const fromActor=actors2.get(msg.from),toActor=actors2.get(msg.to),startx=fromActor.x,stopx=toActor.x,shouldWrap=msg.wrap&&msg.message;let textDimensions=hasKatex(msg.message)?await calculateMathMLDimensions(msg.message,getConfig2()):utils_default2.calculateTextDimensions(shouldWrap?utils_default2.wrapLabel(msg.message,conf2.width,noteFont(conf2)):msg.message,noteFont(conf2));const noteModel={width:shouldWrap?conf2.width:common_default.getMax(conf2.width,textDimensions.width+2*conf2.noteMargin),height:0,startx:fromActor.x,stopx:0,starty:0,stopy:0,message:msg.message};return msg.placement===diagObj.db.PLACEMENT.RIGHTOF?(noteModel.width=shouldWrap?common_default.getMax(conf2.width,textDimensions.width):common_default.getMax(fromActor.width/2+toActor.width/2,textDimensions.width+2*conf2.noteMargin),noteModel.startx=startx+(fromActor.width+conf2.actorMargin)/2):msg.placement===diagObj.db.PLACEMENT.LEFTOF?(noteModel.width=shouldWrap?common_default.getMax(conf2.width,textDimensions.width+2*conf2.noteMargin):common_default.getMax(fromActor.width/2+toActor.width/2,textDimensions.width+2*conf2.noteMargin),noteModel.startx=startx-noteModel.width+(fromActor.width-conf2.actorMargin)/2):msg.to===msg.from?(textDimensions=utils_default2.calculateTextDimensions(shouldWrap?utils_default2.wrapLabel(msg.message,common_default.getMax(conf2.width,fromActor.width),noteFont(conf2)):msg.message,noteFont(conf2)),noteModel.width=shouldWrap?common_default.getMax(conf2.width,fromActor.width):common_default.getMax(fromActor.width,conf2.width,textDimensions.width+2*conf2.noteMargin),noteModel.startx=startx+(fromActor.width-noteModel.width)/2):(noteModel.width=Math.abs(startx+fromActor.width/2-(stopx+toActor.width/2))+conf2.actorMargin,noteModel.startx=startx<stopx?startx+fromActor.width/2-conf2.actorMargin/2:stopx+toActor.width/2-conf2.actorMargin/2),shouldWrap&&(noteModel.message=utils_default2.wrapLabel(msg.message,noteModel.width-2*conf2.wrapPadding,noteFont(conf2))),log.debug(`NM:[${noteModel.startx},${noteModel.stopx},${noteModel.starty},${noteModel.stopy}:${noteModel.width},${noteModel.height}=${msg.message}]`),noteModel},"buildNoteModel"),buildMessageModel=__name(function(msg,actors2,diagObj){if(![diagObj.db.LINETYPE.SOLID_OPEN,diagObj.db.LINETYPE.DOTTED_OPEN,diagObj.db.LINETYPE.SOLID,diagObj.db.LINETYPE.DOTTED,diagObj.db.LINETYPE.SOLID_CROSS,diagObj.db.LINETYPE.DOTTED_CROSS,diagObj.db.LINETYPE.SOLID_POINT,diagObj.db.LINETYPE.DOTTED_POINT,diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID,diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(msg.type))return{};const[fromLeft,fromRight]=activationBounds(msg.from,actors2),[toLeft,toRight]=activationBounds(msg.to,actors2),isArrowToRight=fromLeft<=toLeft;let startx=isArrowToRight?fromRight:fromLeft,stopx=isArrowToRight?toLeft:toRight;const isArrowToActivation=Math.abs(toLeft-toRight)>2,adjustValue=__name(value2=>isArrowToRight?-value2:value2,"adjustValue");msg.from===msg.to?stopx=startx:(msg.activate&&!isArrowToActivation&&(stopx+=adjustValue(conf2.activationWidth/2-1)),[diagObj.db.LINETYPE.SOLID_OPEN,diagObj.db.LINETYPE.DOTTED_OPEN].includes(msg.type)||(stopx+=adjustValue(3)),[diagObj.db.LINETYPE.BIDIRECTIONAL_SOLID,diagObj.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(msg.type)&&(startx-=adjustValue(3)));const allBounds=[fromLeft,fromRight,toLeft,toRight],boundedWidth=Math.abs(startx-stopx);msg.wrap&&msg.message&&(msg.message=utils_default2.wrapLabel(msg.message,common_default.getMax(boundedWidth+2*conf2.wrapPadding,conf2.width),messageFont2(conf2)));const msgDims=utils_default2.calculateTextDimensions(msg.message,messageFont2(conf2));return{width:common_default.getMax(msg.wrap?0:msgDims.width+2*conf2.wrapPadding,boundedWidth+2*conf2.wrapPadding,conf2.width),height:0,startx:startx,stopx:stopx,starty:0,stopy:0,message:msg.message,type:msg.type,wrap:msg.wrap,fromBounds:Math.min.apply(null,allBounds),toBounds:Math.max.apply(null,allBounds)}},"buildMessageModel"),calculateLoopBounds=__name(async function(messages,actors2,_maxWidthPerActor,diagObj){const loops={},stack=[];let current,noteModel,msgModel;for(const msg of messages){switch(msg.type){case diagObj.db.LINETYPE.LOOP_START:case diagObj.db.LINETYPE.ALT_START:case diagObj.db.LINETYPE.OPT_START:case diagObj.db.LINETYPE.PAR_START:case diagObj.db.LINETYPE.PAR_OVER_START:case diagObj.db.LINETYPE.CRITICAL_START:case diagObj.db.LINETYPE.BREAK_START:stack.push({id:msg.id,msg:msg.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case diagObj.db.LINETYPE.ALT_ELSE:case diagObj.db.LINETYPE.PAR_AND:case diagObj.db.LINETYPE.CRITICAL_OPTION:msg.message&&(current=stack.pop(),loops[current.id]=current,loops[msg.id]=current,stack.push(current));break;case diagObj.db.LINETYPE.LOOP_END:case diagObj.db.LINETYPE.ALT_END:case diagObj.db.LINETYPE.OPT_END:case diagObj.db.LINETYPE.PAR_END:case diagObj.db.LINETYPE.CRITICAL_END:case diagObj.db.LINETYPE.BREAK_END:current=stack.pop(),loops[current.id]=current;break;case diagObj.db.LINETYPE.ACTIVE_START:{const actorRect=actors2.get(msg.from?msg.from:msg.to.actor),stackedSize=actorActivations(msg.from?msg.from:msg.to.actor).length,x5=actorRect.x+actorRect.width/2+(stackedSize-1)*conf2.activationWidth/2,toAdd={startx:x5,stopx:x5+conf2.activationWidth,actor:msg.from,enabled:!0};bounds2.activations.push(toAdd)}break;case diagObj.db.LINETYPE.ACTIVE_END:{const lastActorActivationIdx=bounds2.activations.map(a2=>a2.actor).lastIndexOf(msg.from);bounds2.activations.splice(lastActorActivationIdx,1).splice(0,1)}}void 0!==msg.placement?(noteModel=await buildNoteModel(msg,actors2,diagObj),msg.noteModel=noteModel,stack.forEach(stk=>{current=stk,current.from=common_default.getMin(current.from,noteModel.startx),current.to=common_default.getMax(current.to,noteModel.startx+noteModel.width),current.width=common_default.getMax(current.width,Math.abs(current.from-current.to))-conf2.labelBoxWidth})):(msgModel=buildMessageModel(msg,actors2,diagObj),msg.msgModel=msgModel,msgModel.startx&&msgModel.stopx&&stack.length>0&&stack.forEach(stk=>{if(current=stk,msgModel.startx===msgModel.stopx){const from2=actors2.get(msg.from),to=actors2.get(msg.to);current.from=common_default.getMin(from2.x-msgModel.width/2,from2.x-from2.width/2,current.from),current.to=common_default.getMax(to.x+msgModel.width/2,to.x+from2.width/2,current.to),current.width=common_default.getMax(current.width,Math.abs(current.to-current.from))-conf2.labelBoxWidth}else current.from=common_default.getMin(msgModel.startx,current.from),current.to=common_default.getMax(msgModel.stopx,current.to),current.width=common_default.getMax(current.width,msgModel.width)-conf2.labelBoxWidth}))}return bounds2.activations=[],log.debug("Loop type widths:",loops),loops},"calculateLoopBounds"),sequenceRenderer_default={bounds:bounds2,drawActors:drawActors,drawActorsPopup:drawActorsPopup,setConf:setConf3,draw:draw11}}}),sequenceDiagram_exports={};__export(sequenceDiagram_exports,{diagram:()=>diagram11});var parser12,classDiagram_default,visibilityValues,ClassMember,classCounter,sanitizeText4,ClassDB,styles_default9,getDir,classRenderer_v3_unified_default,diagram12,init_sequenceDiagram2=__esm({"src/diagrams/sequence/sequenceDiagram.ts"(){init_sequenceDiagram(),init_sequenceDb(),init_styles8(),init_diagramAPI(),init_sequenceRenderer(),diagram11={parser:sequenceDiagram_default,get db(){return new SequenceDB},renderer:sequenceRenderer_default,styles:styles_default8,init:__name(cnf=>{cnf.sequence||(cnf.sequence={}),cnf.wrap&&(cnf.sequence.wrap=cnf.wrap,setConfig2({sequence:{wrap:cnf.wrap}}))},"init")}}}),init_classDiagram=__esm({"src/diagrams/class/parser/classDiagram.jison"(){parser12=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,18],$V1=[1,19],$V2=[1,20],$V3=[1,41],$V4=[1,42],$V5=[1,26],$V6=[1,24],$V7=[1,25],$V8=[1,32],$V9=[1,33],$Va=[1,34],$Vb=[1,45],$Vc=[1,35],$Vd=[1,36],$Ve=[1,37],$Vf=[1,38],$Vg=[1,27],$Vh=[1,28],$Vi=[1,29],$Vj=[1,30],$Vk=[1,31],$Vl=[1,44],$Vm=[1,46],$Vn=[1,43],$Vo=[1,47],$Vp=[1,9],$Vq=[1,8,9],$Vr=[1,58],$Vs=[1,59],$Vt=[1,60],$Vu=[1,61],$Vv=[1,62],$Vw=[1,63],$Vx=[1,64],$Vy=[1,8,9,41],$Vz=[1,76],$VA=[1,8,9,12,13,22,39,41,44,68,69,70,71,72,73,74,79,81],$VB=[1,8,9,12,13,18,20,22,39,41,44,50,60,68,69,70,71,72,73,74,79,81,86,100,102,103],$VC=[13,60,86,100,102,103],$VD=[13,60,73,74,86,100,102,103],$VE=[13,60,68,69,70,71,72,86,100,102,103],$VF=[1,100],$VG=[1,117],$VH=[1,113],$VI=[1,109],$VJ=[1,115],$VK=[1,110],$VL=[1,111],$VM=[1,112],$VN=[1,114],$VO=[1,116],$VP=[22,48,60,61,82,86,87,88,89,90],$VQ=[1,8,9,39,41,44],$VR=[1,8,9,22],$VS=[1,145],$VT=[1,8,9,61],$VU=[1,8,9,22,48,60,61,82,86,87,88,89,90],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,classLiteralName:17,DOT:18,className:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,emptyBody:47,SPACE:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,NOTE_FOR:54,noteText:55,NOTE:56,CLASSDEF:57,classList:58,stylesOpt:59,ALPHA:60,COMMA:61,direction_tb:62,direction_bt:63,direction_rl:64,direction_lr:65,relationType:66,lineType:67,AGGREGATION:68,EXTENSION:69,COMPOSITION:70,DEPENDENCY:71,LOLLIPOP:72,LINE:73,DOTTED_LINE:74,CALLBACK:75,LINK:76,LINK_TARGET:77,CLICK:78,CALLBACK_NAME:79,CALLBACK_ARGS:80,HREF:81,STYLE:82,CSSCLASS:83,style:84,styleComponent:85,NUM:86,COLON:87,UNIT:88,BRKT:89,PCT:90,commentToken:91,textToken:92,graphCodeTokens:93,textNoTagsToken:94,TAGSTART:95,TAGEND:96,"==":97,"--":98,DEFAULT:99,MINUS:100,keywords:101,UNICODE_TEXT:102,BQUOTE_STR:103,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",18:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",48:"SPACE",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"NOTE_FOR",56:"NOTE",57:"CLASSDEF",60:"ALPHA",61:"COMMA",62:"direction_tb",63:"direction_bt",64:"direction_rl",65:"direction_lr",68:"AGGREGATION",69:"EXTENSION",70:"COMPOSITION",71:"DEPENDENCY",72:"LOLLIPOP",73:"LINE",74:"DOTTED_LINE",75:"CALLBACK",76:"LINK",77:"LINK_TARGET",78:"CLICK",79:"CALLBACK_NAME",80:"CALLBACK_ARGS",81:"HREF",82:"STYLE",83:"CSSCLASS",86:"NUM",87:"COLON",88:"UNIT",89:"BRKT",90:"PCT",93:"graphCodeTokens",95:"TAGSTART",96:"TAGEND",97:"==",98:"--",99:"DEFAULT",100:"MINUS",101:"keywords",102:"UNICODE_TEXT",103:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,1],[15,3],[15,2],[19,1],[19,3],[19,1],[19,2],[19,2],[19,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,3],[24,6],[43,2],[43,3],[47,0],[47,2],[47,2],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[58,1],[58,3],[32,1],[32,1],[32,1],[32,1],[53,3],[53,2],[53,2],[53,1],[66,1],[66,1],[66,1],[66,1],[66,1],[67,1],[67,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[59,1],[59,3],[84,1],[84,2],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[91,1],[91,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[94,1],[94,1],[94,1],[94,1],[16,1],[16,1],[16,1],[16,1],[17,1],[55,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 8:this.$=$$[$0-1];break;case 9:case 10:case 13:case 15:this.$=$$[$0];break;case 11:case 14:this.$=$$[$0-2]+"."+$$[$0];break;case 12:case 16:case 100:this.$=$$[$0-1]+$$[$0];break;case 17:case 18:this.$=$$[$0-1]+"~"+$$[$0]+"~";break;case 19:yy.addRelation($$[$0]);break;case 20:$$[$0-1].title=yy.cleanupLabel($$[$0]),yy.addRelation($$[$0-1]);break;case 31:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 32:case 33:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 34:yy.addClassesToNamespace($$[$0-3],$$[$0-1]);break;case 35:yy.addClassesToNamespace($$[$0-4],$$[$0-1]);break;case 36:this.$=$$[$0],yy.addNamespace($$[$0]);break;case 37:case 51:case 64:case 97:this.$=[$$[$0]];break;case 38:this.$=[$$[$0-1]];break;case 39:$$[$0].unshift($$[$0-2]),this.$=$$[$0];break;case 41:yy.setCssClass($$[$0-2],$$[$0]);break;case 42:yy.addMembers($$[$0-3],$$[$0-1]);break;case 44:yy.setCssClass($$[$0-5],$$[$0-3]),yy.addMembers($$[$0-5],$$[$0-1]);break;case 45:this.$=$$[$0],yy.addClass($$[$0]);break;case 46:this.$=$$[$0-1],yy.addClass($$[$0-1]),yy.setClassLabel($$[$0-1],$$[$0]);break;case 50:yy.addAnnotation($$[$0],$$[$0-2]);break;case 52:$$[$0].push($$[$0-1]),this.$=$$[$0];break;case 53:case 55:case 56:break;case 54:yy.addMember($$[$0-1],yy.cleanupLabel($$[$0]));break;case 57:this.$={id1:$$[$0-2],id2:$$[$0],relation:$$[$0-1],relationTitle1:"none",relationTitle2:"none"};break;case 58:this.$={id1:$$[$0-3],id2:$$[$0],relation:$$[$0-1],relationTitle1:$$[$0-2],relationTitle2:"none"};break;case 59:this.$={id1:$$[$0-3],id2:$$[$0],relation:$$[$0-2],relationTitle1:"none",relationTitle2:$$[$0-1]};break;case 60:this.$={id1:$$[$0-4],id2:$$[$0],relation:$$[$0-2],relationTitle1:$$[$0-3],relationTitle2:$$[$0-1]};break;case 61:yy.addNote($$[$0],$$[$0-1]);break;case 62:yy.addNote($$[$0]);break;case 63:this.$=$$[$0-2],yy.defineClass($$[$0-1],$$[$0]);break;case 65:this.$=$$[$0-2].concat([$$[$0]]);break;case 66:yy.setDirection("TB");break;case 67:yy.setDirection("BT");break;case 68:yy.setDirection("RL");break;case 69:yy.setDirection("LR");break;case 70:this.$={type1:$$[$0-2],type2:$$[$0],lineType:$$[$0-1]};break;case 71:this.$={type1:"none",type2:$$[$0],lineType:$$[$0-1]};break;case 72:this.$={type1:$$[$0-1],type2:"none",lineType:$$[$0]};break;case 73:this.$={type1:"none",type2:"none",lineType:$$[$0]};break;case 74:this.$=yy.relationType.AGGREGATION;break;case 75:this.$=yy.relationType.EXTENSION;break;case 76:this.$=yy.relationType.COMPOSITION;break;case 77:this.$=yy.relationType.DEPENDENCY;break;case 78:this.$=yy.relationType.LOLLIPOP;break;case 79:this.$=yy.lineType.LINE;break;case 80:this.$=yy.lineType.DOTTED_LINE;break;case 81:case 87:this.$=$$[$0-2],yy.setClickEvent($$[$0-1],$$[$0]);break;case 82:case 88:this.$=$$[$0-3],yy.setClickEvent($$[$0-2],$$[$0-1]),yy.setTooltip($$[$0-2],$$[$0]);break;case 83:this.$=$$[$0-2],yy.setLink($$[$0-1],$$[$0]);break;case 84:this.$=$$[$0-3],yy.setLink($$[$0-2],$$[$0-1],$$[$0]);break;case 85:this.$=$$[$0-3],yy.setLink($$[$0-2],$$[$0-1]),yy.setTooltip($$[$0-2],$$[$0]);break;case 86:this.$=$$[$0-4],yy.setLink($$[$0-3],$$[$0-2],$$[$0]),yy.setTooltip($$[$0-3],$$[$0-1]);break;case 89:this.$=$$[$0-3],yy.setClickEvent($$[$0-2],$$[$0-1],$$[$0]);break;case 90:this.$=$$[$0-4],yy.setClickEvent($$[$0-3],$$[$0-2],$$[$0-1]),yy.setTooltip($$[$0-3],$$[$0]);break;case 91:this.$=$$[$0-3],yy.setLink($$[$0-2],$$[$0]);break;case 92:this.$=$$[$0-4],yy.setLink($$[$0-3],$$[$0-1],$$[$0]);break;case 93:this.$=$$[$0-4],yy.setLink($$[$0-3],$$[$0-1]),yy.setTooltip($$[$0-3],$$[$0]);break;case 94:this.$=$$[$0-5],yy.setLink($$[$0-4],$$[$0-2],$$[$0]),yy.setTooltip($$[$0-4],$$[$0-1]);break;case 95:this.$=$$[$0-2],yy.setCssStyle($$[$0-1],$$[$0]);break;case 96:yy.setCssClass($$[$0-1],$$[$0]);break;case 98:$$[$0-2].push($$[$0]),this.$=$$[$0-2]}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:$V0,35:$V1,37:$V2,38:22,42:$V3,43:23,46:$V4,49:$V5,51:$V6,52:$V7,54:$V8,56:$V9,57:$Va,60:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,75:$Vg,76:$Vh,78:$Vi,82:$Vj,83:$Vk,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},o2($Vp,[2,5],{8:[1,48]}),{8:[1,49]},o2($Vq,[2,19],{22:[1,50]}),o2($Vq,[2,21]),o2($Vq,[2,22]),o2($Vq,[2,23]),o2($Vq,[2,24]),o2($Vq,[2,25]),o2($Vq,[2,26]),o2($Vq,[2,27]),o2($Vq,[2,28]),o2($Vq,[2,29]),o2($Vq,[2,30]),{34:[1,51]},{36:[1,52]},o2($Vq,[2,33]),o2($Vq,[2,53],{53:53,66:56,67:57,13:[1,54],22:[1,55],68:$Vr,69:$Vs,70:$Vt,71:$Vu,72:$Vv,73:$Vw,74:$Vx}),{39:[1,65]},o2($Vy,[2,40],{39:[1,67],44:[1,66]}),o2($Vq,[2,55]),o2($Vq,[2,56]),{16:68,60:$Vb,86:$Vl,100:$Vm,102:$Vn},{16:39,17:40,19:69,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{16:39,17:40,19:70,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{16:39,17:40,19:71,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{60:[1,72]},{13:[1,73]},{16:39,17:40,19:74,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{13:$Vz,55:75},{58:77,60:[1,78]},o2($Vq,[2,66]),o2($Vq,[2,67]),o2($Vq,[2,68]),o2($Vq,[2,69]),o2($VA,[2,13],{16:39,17:40,19:80,18:[1,79],20:[1,81],60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo}),o2($VA,[2,15],{20:[1,82]}),{15:83,16:84,17:85,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{16:39,17:40,19:86,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},o2($VB,[2,123]),o2($VB,[2,124]),o2($VB,[2,125]),o2($VB,[2,126]),o2([1,8,9,12,13,20,22,39,41,44,68,69,70,71,72,73,74,79,81],[2,127]),o2($Vp,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,19:21,38:22,43:23,16:39,17:40,5:87,33:$V0,35:$V1,37:$V2,42:$V3,46:$V4,49:$V5,51:$V6,52:$V7,54:$V8,56:$V9,57:$Va,60:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,75:$Vg,76:$Vh,78:$Vi,82:$Vj,83:$Vk,86:$Vl,100:$Vm,102:$Vn,103:$Vo}),{5:88,10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:$V0,35:$V1,37:$V2,38:22,42:$V3,43:23,46:$V4,49:$V5,51:$V6,52:$V7,54:$V8,56:$V9,57:$Va,60:$Vb,62:$Vc,63:$Vd,64:$Ve,65:$Vf,75:$Vg,76:$Vh,78:$Vi,82:$Vj,83:$Vk,86:$Vl,100:$Vm,102:$Vn,103:$Vo},o2($Vq,[2,20]),o2($Vq,[2,31]),o2($Vq,[2,32]),{13:[1,90],16:39,17:40,19:89,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{53:91,66:56,67:57,68:$Vr,69:$Vs,70:$Vt,71:$Vu,72:$Vv,73:$Vw,74:$Vx},o2($Vq,[2,54]),{67:92,73:$Vw,74:$Vx},o2($VC,[2,73],{66:93,68:$Vr,69:$Vs,70:$Vt,71:$Vu,72:$Vv}),o2($VD,[2,74]),o2($VD,[2,75]),o2($VD,[2,76]),o2($VD,[2,77]),o2($VD,[2,78]),o2($VE,[2,79]),o2($VE,[2,80]),{8:[1,95],24:96,40:94,43:23,46:$V4},{16:97,60:$Vb,86:$Vl,100:$Vm,102:$Vn},{41:[1,99],45:98,51:$VF},{50:[1,101]},{13:[1,102]},{13:[1,103]},{79:[1,104],81:[1,105]},{22:$VG,48:$VH,59:106,60:$VI,82:$VJ,84:107,85:108,86:$VK,87:$VL,88:$VM,89:$VN,90:$VO},{60:[1,118]},{13:$Vz,55:119},o2($Vq,[2,62]),o2($Vq,[2,128]),{22:$VG,48:$VH,59:120,60:$VI,61:[1,121],82:$VJ,84:107,85:108,86:$VK,87:$VL,88:$VM,89:$VN,90:$VO},o2($VP,[2,64]),{16:39,17:40,19:122,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},o2($VA,[2,16]),o2($VA,[2,17]),o2($VA,[2,18]),{39:[2,36]},{15:124,16:84,17:85,18:[1,123],39:[2,9],60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{39:[2,10]},o2($VQ,[2,45],{11:125,12:[1,126]}),o2($Vp,[2,7]),{9:[1,127]},o2($VR,[2,57]),{16:39,17:40,19:128,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{13:[1,130],16:39,17:40,19:129,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},o2($VC,[2,72],{66:131,68:$Vr,69:$Vs,70:$Vt,71:$Vu,72:$Vv}),o2($VC,[2,71]),{41:[1,132]},{24:96,40:133,43:23,46:$V4},{8:[1,134],41:[2,37]},o2($Vy,[2,41],{39:[1,135]}),{41:[1,136]},o2($Vy,[2,43]),{41:[2,51],45:137,51:$VF},{16:39,17:40,19:138,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},o2($Vq,[2,81],{13:[1,139]}),o2($Vq,[2,83],{13:[1,141],77:[1,140]}),o2($Vq,[2,87],{13:[1,142],80:[1,143]}),{13:[1,144]},o2($Vq,[2,95],{61:$VS}),o2($VT,[2,97],{85:146,22:$VG,48:$VH,60:$VI,82:$VJ,86:$VK,87:$VL,88:$VM,89:$VN,90:$VO}),o2($VU,[2,99]),o2($VU,[2,101]),o2($VU,[2,102]),o2($VU,[2,103]),o2($VU,[2,104]),o2($VU,[2,105]),o2($VU,[2,106]),o2($VU,[2,107]),o2($VU,[2,108]),o2($VU,[2,109]),o2($Vq,[2,96]),o2($Vq,[2,61]),o2($Vq,[2,63],{61:$VS}),{60:[1,147]},o2($VA,[2,14]),{15:148,16:84,17:85,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},{39:[2,12]},o2($VQ,[2,46]),{13:[1,149]},{1:[2,4]},o2($VR,[2,59]),o2($VR,[2,58]),{16:39,17:40,19:150,60:$Vb,86:$Vl,100:$Vm,102:$Vn,103:$Vo},o2($VC,[2,70]),o2($Vq,[2,34]),{41:[1,151]},{24:96,40:152,41:[2,38],43:23,46:$V4},{45:153,51:$VF},o2($Vy,[2,42]),{41:[2,52]},o2($Vq,[2,50]),o2($Vq,[2,82]),o2($Vq,[2,84]),o2($Vq,[2,85],{77:[1,154]}),o2($Vq,[2,88]),o2($Vq,[2,89],{13:[1,155]}),o2($Vq,[2,91],{13:[1,157],77:[1,156]}),{22:$VG,48:$VH,60:$VI,82:$VJ,84:158,85:108,86:$VK,87:$VL,88:$VM,89:$VN,90:$VO},o2($VU,[2,100]),o2($VP,[2,65]),{39:[2,11]},{14:[1,159]},o2($VR,[2,60]),o2($Vq,[2,35]),{41:[2,39]},{41:[1,160]},o2($Vq,[2,86]),o2($Vq,[2,90]),o2($Vq,[2,92]),o2($Vq,[2,93],{77:[1,161]}),o2($VT,[2,98],{85:146,22:$VG,48:$VH,60:$VI,82:$VJ,86:$VK,87:$VL,88:$VM,89:$VN,90:$VO}),o2($VQ,[2,8]),o2($Vy,[2,44]),o2($Vq,[2,94])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,36],85:[2,10],124:[2,12],127:[2,4],137:[2,52],148:[2,11],152:[2,39]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return 62;case 1:return 63;case 2:return 64;case 3:return 65;case 4:case 5:case 14:case 31:case 36:case 40:case 47:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 19:case 22:case 24:case 58:case 61:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 35:return 8;case 15:case 16:return 7;case 17:case 37:case 45:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 79;case 23:return 80;case 25:return"STR";case 26:this.begin("string");break;case 27:return 82;case 28:return 57;case 29:return this.begin("namespace"),42;case 30:case 39:return this.popState(),8;case 32:return this.begin("namespace-body"),39;case 33:case 43:return this.popState(),41;case 34:case 44:return"EOF_IN_STRUCT";case 38:return this.begin("class"),46;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 46:return"OPEN_IN_STRUCT";case 48:return"MEMBER";case 49:return 83;case 50:return 75;case 51:return 76;case 52:return 78;case 53:return 54;case 54:return 56;case 55:return 49;case 56:return 50;case 57:return 81;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:case 65:case 66:case 67:return 77;case 68:case 69:return 69;case 70:case 71:return 71;case 72:return 70;case 73:return 68;case 74:return 72;case 75:return 73;case 76:return 74;case 77:return 22;case 78:return 44;case 79:return 100;case 80:return 18;case 81:return"PLUS";case 82:return 87;case 83:return 61;case 84:case 85:return 89;case 86:return 90;case 87:case 88:return"EQUALS";case 89:return 60;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 86;case 94:return 102;case 95:case 96:return 48;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser12.parser=parser12,classDiagram_default=parser12}}),init_classTypes=__esm({"src/diagrams/class/classTypes.ts"(){init_diagramAPI(),init_common(),visibilityValues=["#","+","~","-",""],ClassMember=class{static{__name(this,"ClassMember")}constructor(input,memberType){this.memberType=memberType,this.visibility="",this.classifier="",this.text="";const sanitizedInput=sanitizeText(input,getConfig2());this.parseMember(sanitizedInput)}getDisplayDetails(){let displayText=this.visibility+parseGenericTypes(this.id);"method"===this.memberType&&(displayText+=`(${parseGenericTypes(this.parameters.trim())})`,this.returnType&&(displayText+=" : "+parseGenericTypes(this.returnType))),displayText=displayText.trim();return{displayText:displayText,cssStyle:this.parseClassifier()}}parseMember(input){let potentialClassifier="";if("method"===this.memberType){const match2=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(input);if(match2){const detectedVisibility=match2[1]?match2[1].trim():"";if(visibilityValues.includes(detectedVisibility)&&(this.visibility=detectedVisibility),this.id=match2[2],this.parameters=match2[3]?match2[3].trim():"",potentialClassifier=match2[4]?match2[4].trim():"",this.returnType=match2[5]?match2[5].trim():"",""===potentialClassifier){const lastChar=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(lastChar)&&(potentialClassifier=lastChar,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const length2=input.length,firstChar=input.substring(0,1),lastChar=input.substring(length2-1);visibilityValues.includes(firstChar)&&(this.visibility=firstChar),/[$*]/.exec(lastChar)&&(potentialClassifier=lastChar),this.id=input.substring(""===this.visibility?0:1,""===potentialClassifier?length2:length2-1)}this.classifier=potentialClassifier,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const combinedText=`${this.visibility?"\\"+this.visibility:""}${parseGenericTypes(this.id)}${"method"===this.memberType?`(${parseGenericTypes(this.parameters)})${this.returnType?" : "+parseGenericTypes(this.returnType):""}`:""}`;this.text=combinedText.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}}}),init_classDb=__esm({"src/diagrams/class/classDb.ts"(){init_src32(),init_logger(),init_diagramAPI(),init_common(),init_utils2(),init_commonDb(),init_classTypes(),classCounter=0,sanitizeText4=__name(txt=>common_default.sanitizeText(txt,getConfig2()),"sanitizeText"),ClassDB=class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=__name(element3=>{let tooltipElem=select_default2(".mermaidTooltip");null===(tooltipElem._groups||tooltipElem)[0][0]&&(tooltipElem=select_default2("body").append("div").attr("class","mermaidTooltip").style("opacity",0));select_default2(element3).select("svg").selectAll("g.node").on("mouseover",event3=>{const el=select_default2(event3.currentTarget);if(null===el.attr("title"))return;const rect3=this.getBoundingClientRect();tooltipElem.transition().duration(200).style("opacity",".9"),tooltipElem.text(el.attr("title")).style("left",window.scrollX+rect3.left+(rect3.right-rect3.left)/2+"px").style("top",window.scrollY+rect3.top-14+document.body.scrollTop+"px"),tooltipElem.html(tooltipElem.html().replace(/&lt;br\/&gt;/g,"<br/>")),el.classed("hover",!0)}).on("mouseout",event3=>{tooltipElem.transition().duration(500).style("opacity",0);select_default2(event3.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=setAccTitle,this.getAccTitle=getAccTitle,this.setAccDescription=setAccDescription,this.getAccDescription=getAccDescription,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.getConfig=__name(()=>getConfig2().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}static{__name(this,"ClassDB")}splitClassNameAndType(_id){const id30=common_default.sanitizeText(_id,getConfig2());let genericType="",className=id30;if(id30.indexOf("~")>0){const split=id30.split("~");className=sanitizeText4(split[0]),genericType=sanitizeText4(split[1])}return{className:className,type:genericType}}setClassLabel(_id,label){const id30=common_default.sanitizeText(_id,getConfig2());label&&(label=sanitizeText4(label));const{className:className}=this.splitClassNameAndType(id30);this.classes.get(className).label=label,this.classes.get(className).text=`${label}${this.classes.get(className).type?`<${this.classes.get(className).type}>`:""}`}addClass(_id){const id30=common_default.sanitizeText(_id,getConfig2()),{className:className,type:type3}=this.splitClassNameAndType(id30);if(this.classes.has(className))return;const name=common_default.sanitizeText(className,getConfig2());this.classes.set(name,{id:name,type:type3,label:name,text:`${name}${type3?`&lt;${type3}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:"classId-"+name+"-"+classCounter}),classCounter++}addInterface(label,classId){const classInterface={id:`interface${this.interfaces.length}`,label:label,classId:classId};this.interfaces.push(classInterface)}lookUpDomId(_id){const id30=common_default.sanitizeText(_id,getConfig2());if(this.classes.has(id30))return this.classes.get(id30).domId;throw new Error("Class not found: "+id30)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",clear()}getClass(id30){return this.classes.get(id30)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(classRelation){log.debug("Adding relation: "+JSON.stringify(classRelation));const invalidTypes=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];classRelation.relation.type1!==this.relationType.LOLLIPOP||invalidTypes.includes(classRelation.relation.type2)?classRelation.relation.type2!==this.relationType.LOLLIPOP||invalidTypes.includes(classRelation.relation.type1)?(this.addClass(classRelation.id1),this.addClass(classRelation.id2)):(this.addClass(classRelation.id1),this.addInterface(classRelation.id2,classRelation.id1),classRelation.id2="interface"+(this.interfaces.length-1)):(this.addClass(classRelation.id2),this.addInterface(classRelation.id1,classRelation.id2),classRelation.id1="interface"+(this.interfaces.length-1)),classRelation.id1=this.splitClassNameAndType(classRelation.id1).className,classRelation.id2=this.splitClassNameAndType(classRelation.id2).className,classRelation.relationTitle1=common_default.sanitizeText(classRelation.relationTitle1.trim(),getConfig2()),classRelation.relationTitle2=common_default.sanitizeText(classRelation.relationTitle2.trim(),getConfig2()),this.relations.push(classRelation)}addAnnotation(className,annotation){const validatedClassName=this.splitClassNameAndType(className).className;this.classes.get(validatedClassName).annotations.push(annotation)}addMember(className,member){this.addClass(className);const validatedClassName=this.splitClassNameAndType(className).className,theClass=this.classes.get(validatedClassName);if("string"==typeof member){const memberString=member.trim();memberString.startsWith("<<")&&memberString.endsWith(">>")?theClass.annotations.push(sanitizeText4(memberString.substring(2,memberString.length-2))):memberString.indexOf(")")>0?theClass.methods.push(new ClassMember(memberString,"method")):memberString&&theClass.members.push(new ClassMember(memberString,"attribute"))}}addMembers(className,members){Array.isArray(members)&&(members.reverse(),members.forEach(member=>this.addMember(className,member)))}addNote(text4,className){const note3={id:`note${this.notes.length}`,class:className,text:text4};this.notes.push(note3)}cleanupLabel(label){return label.startsWith(":")&&(label=label.substring(1)),sanitizeText4(label.trim())}setCssClass(ids,className){ids.split(",").forEach(_id=>{let id30=_id;/\d/.exec(_id[0])&&(id30="classId-"+id30);const classNode=this.classes.get(id30);classNode&&(classNode.cssClasses+=" "+className)})}defineClass(ids,style3){for(const id30 of ids){let styleClass=this.styleClasses.get(id30);void 0===styleClass&&(styleClass={id:id30,styles:[],textStyles:[]},this.styleClasses.set(id30,styleClass)),style3&&style3.forEach(s2=>{if(/color/.exec(s2)){const newStyle=s2.replace("fill","bgFill");styleClass.textStyles.push(newStyle)}styleClass.styles.push(s2)}),this.classes.forEach(value2=>{value2.cssClasses.includes(id30)&&value2.styles.push(...style3.flatMap(s2=>s2.split(",")))})}}setTooltip(ids,tooltip){ids.split(",").forEach(id30=>{void 0!==tooltip&&(this.classes.get(id30).tooltip=sanitizeText4(tooltip))})}getTooltip(id30,namespace){return namespace&&this.namespaces.has(namespace)?this.namespaces.get(namespace).classes.get(id30).tooltip:this.classes.get(id30).tooltip}setLink(ids,linkStr,target){const config5=getConfig2();ids.split(",").forEach(_id=>{let id30=_id;/\d/.exec(_id[0])&&(id30="classId-"+id30);const theClass=this.classes.get(id30);theClass&&(theClass.link=utils_default2.formatUrl(linkStr,config5),"sandbox"===config5.securityLevel?theClass.linkTarget="_top":theClass.linkTarget="string"==typeof target?sanitizeText4(target):"_blank")}),this.setCssClass(ids,"clickable")}setClickEvent(ids,functionName,functionArgs){ids.split(",").forEach(id30=>{this.setClickFunc(id30,functionName,functionArgs),this.classes.get(id30).haveCallback=!0}),this.setCssClass(ids,"clickable")}setClickFunc(_domId,functionName,functionArgs){const domId=common_default.sanitizeText(_domId,getConfig2());if("loose"!==getConfig2().securityLevel)return;if(void 0===functionName)return;const id30=domId;if(this.classes.has(id30)){const elemId=this.lookUpDomId(id30);let argList=[];if("string"==typeof functionArgs){argList=functionArgs.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let i2=0;i2<argList.length;i2++){let item=argList[i2].trim();item.startsWith('"')&&item.endsWith('"')&&(item=item.substr(1,item.length-2)),argList[i2]=item}}0===argList.length&&argList.push(elemId),this.functions.push(()=>{const elem=document.querySelector(`[id="${elemId}"]`);null!==elem&&elem.addEventListener("click",()=>{utils_default2.runFunc(functionName,...argList)},!1)})}}bindFunctions(element3){this.functions.forEach(fun=>{fun(element3)})}getDirection(){return this.direction}setDirection(dir2){this.direction=dir2}addNamespace(id30){this.namespaces.has(id30)||(this.namespaces.set(id30,{id:id30,classes:new Map,children:{},domId:"classId-"+id30+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(name){return this.namespaces.get(name)}getNamespaces(){return this.namespaces}addClassesToNamespace(id30,classNames){if(this.namespaces.has(id30))for(const name of classNames){const{className:className}=this.splitClassNameAndType(name);this.classes.get(className).parent=id30,this.namespaces.get(id30).classes.set(className,this.classes.get(className))}}setCssStyle(id30,styles4){const thisClass=this.classes.get(id30);if(styles4&&thisClass)for(const s2 of styles4)s2.includes(",")?thisClass.styles.push(...s2.split(",")):thisClass.styles.push(s2)}getArrowMarker(type3){let marker;switch(type3){case 0:marker="aggregation";break;case 1:marker="extension";break;case 2:marker="composition";break;case 3:marker="dependency";break;case 4:marker="lollipop";break;default:marker="none"}return marker}getData(){const nodes5=[],edges3=[],config5=getConfig2();for(const namespaceKey of this.namespaces.keys()){const namespace=this.namespaces.get(namespaceKey);if(namespace){const node2={id:namespace.id,label:namespace.id,isGroup:!0,padding:config5.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:config5.look};nodes5.push(node2)}}for(const classKey of this.classes.keys()){const classNode=this.classes.get(classKey);if(classNode){const node2=classNode;node2.parentId=classNode.parent,node2.look=config5.look,nodes5.push(node2)}}let cnt4=0;for(const note3 of this.notes){cnt4++;const noteNode={id:note3.id,label:note3.text,isGroup:!1,shape:"note",padding:config5.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${config5.themeVariables.noteBkgColor}`,`stroke: ${config5.themeVariables.noteBorderColor}`],look:config5.look};nodes5.push(noteNode);const noteClassId=this.classes.get(note3.class)?.id??"";if(noteClassId){const edge={id:`edgeNote${cnt4}`,start:note3.id,end:noteClassId,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:config5.look};edges3.push(edge)}}for(const _interface of this.interfaces){const interfaceNode={id:_interface.id,label:_interface.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:config5.look};nodes5.push(interfaceNode)}cnt4=0;for(const classRelation of this.relations){cnt4++;const edge={id:getEdgeId(classRelation.id1,classRelation.id2,{prefix:"id",counter:cnt4}),start:classRelation.id1,end:classRelation.id2,type:"normal",label:classRelation.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(classRelation.relation.type1),arrowTypeEnd:this.getArrowMarker(classRelation.relation.type2),startLabelRight:"none"===classRelation.relationTitle1?"":classRelation.relationTitle1,endLabelLeft:"none"===classRelation.relationTitle2?"":classRelation.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:classRelation.style||"",pattern:1==classRelation.relation.lineType?"dashed":"solid",look:config5.look};edges3.push(edge)}return{nodes:nodes5,edges:edges3,other:{},config:config5,direction:this.getDirection()}}}}}),init_styles9=__esm({"src/diagrams/class/styles.js"(){init_globalStyles(),styles_default9=__name(options2=>`g.classGroup text {\n  fill: ${options2.nodeBorder||options2.classText};\n  stroke: none;\n  font-family: ${options2.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${options2.classText};\n}\n.edgeLabel .label rect {\n  fill: ${options2.mainBkg};\n}\n.label text {\n  fill: ${options2.classText};\n}\n\n.labelBkg {\n  background: ${options2.mainBkg};\n}\n.edgeLabel .label span {\n  background: ${options2.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options2.mainBkg};\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${options2.nodeBorder};\n  stroke-width: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${options2.mainBkg};\n  stroke: ${options2.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${options2.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${options2.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${options2.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${options2.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${options2.lineColor} !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${options2.lineColor} !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${options2.lineColor} !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${options2.lineColor} !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: transparent !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: transparent !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: transparent !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: transparent !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${options2.mainBkg} !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${options2.mainBkg} !important;\n  stroke: ${options2.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n  line-height: initial;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${options2.textColor};\n}\n  ${getIconStyles()}\n`,"getStyles")}}),init_classRenderer_v3_unified=__esm({"src/diagrams/class/classRenderer-v3-unified.ts"(){init_diagramAPI(),init_logger(),init_insertElementsForSize(),init_render2(),init_setupViewPortForSVG(),init_utils2(),getDir=__name((parsedItem,defaultDir="TB")=>{if(!parsedItem.doc)return defaultDir;let dir2=defaultDir;for(const parsedItemDoc of parsedItem.doc)"dir"===parsedItemDoc.stmt&&(dir2=parsedItemDoc.value);return dir2},"getDir"),classRenderer_v3_unified_default={getClasses:__name(function(text4,diagramObj){return diagramObj.db.getClasses()},"getClasses"),draw:__name(async function(text4,id30,_version,diag){log.info("REF0:"),log.info("Drawing class diagram (v3)",id30);const{securityLevel:securityLevel,state:conf5,layout:layout6}=getConfig2(),data4Layout=diag.db.getData(),svg2=getDiagramElement(id30,securityLevel);data4Layout.type=diag.type,data4Layout.layoutAlgorithm=getRegisteredLayoutAlgorithm(layout6),data4Layout.nodeSpacing=conf5?.nodeSpacing||50,data4Layout.rankSpacing=conf5?.rankSpacing||50,data4Layout.markers=["aggregation","extension","composition","dependency","lollipop"],data4Layout.diagramId=id30,await render6(data4Layout,svg2);utils_default2.insertTitle(svg2,"classDiagramTitleText",conf5?.titleTopMargin??25,diag.db.getDiagramTitle()),setupViewPortForSVG(svg2,8,"classDiagram",conf5?.useMaxWidth??!0)},"draw"),getDir:getDir}}}),classDiagram_exports={};__export(classDiagram_exports,{diagram:()=>diagram12});var diagram13,init_classDiagram2=__esm({"src/diagrams/class/classDiagram.ts"(){init_classDiagram(),init_classDb(),init_styles9(),init_classRenderer_v3_unified(),diagram12={parser:classDiagram_default,get db(){return new ClassDB},renderer:classRenderer_v3_unified_default,styles:styles_default9,init:__name(cnf=>{cnf.class||(cnf.class={}),cnf.class.arrowMarkerAbsolute=cnf.arrowMarkerAbsolute},"init")}}}),classDiagram_v2_exports={};__export(classDiagram_v2_exports,{diagram:()=>diagram13});var parser13,stateDiagram_default,DEFAULT_DIAGRAM_DIRECTION,DEFAULT_NESTED_DOC_DIR,STMT_DIRECTION,STMT_STATE,STMT_ROOT,STMT_RELATION,STMT_CLASSDEF,STMT_STYLEDEF,STMT_APPLYCLASS,DEFAULT_STATE_TYPE,DIVIDER_TYPE,G_EDGE_STYLE,G_EDGE_ARROWHEADSTYLE,G_EDGE_LABELPOS,G_EDGE_LABELTYPE,G_EDGE_THICKNESS,SHAPE_STATE,SHAPE_STATE_WITH_DESC,SHAPE_START,SHAPE_END,SHAPE_DIVIDER,SHAPE_GROUP,SHAPE_NOTE,SHAPE_NOTEGROUP,CSS_DIAGRAM,CSS_DIAGRAM_STATE,CSS_EDGE,CSS_EDGE_NOTE_EDGE,CSS_DIAGRAM_NOTE,CSS_DIAGRAM_CLUSTER,CSS_DIAGRAM_CLUSTER_ALT,PARENT2,NOTE,DOMID_STATE,DOMID_TYPE_SPACER,NOTE_ID,PARENT_ID,nodeDb,graphItemCount,setupDoc,getDir2,dataFetcher,reset3,init_classDiagram_v2=__esm({"src/diagrams/class/classDiagram-v2.ts"(){init_classDiagram(),init_classDb(),init_styles9(),init_classRenderer_v3_unified(),diagram13={parser:classDiagram_default,get db(){return new ClassDB},renderer:classRenderer_v3_unified_default,styles:styles_default9,init:__name(cnf=>{cnf.class||(cnf.class={}),cnf.class.arrowMarkerAbsolute=cnf.arrowMarkerAbsolute},"init")}}}),init_stateDiagram=__esm({"src/diagrams/state/parser/stateDiagram.jison"(){parser13=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,2],$V1=[1,3],$V2=[1,4],$V3=[2,4],$V4=[1,9],$V5=[1,11],$V6=[1,16],$V7=[1,17],$V8=[1,18],$V9=[1,19],$Va=[1,33],$Vb=[1,20],$Vc=[1,21],$Vd=[1,22],$Ve=[1,23],$Vf=[1,24],$Vg=[1,26],$Vh=[1,27],$Vi=[1,28],$Vj=[1,29],$Vk=[1,30],$Vl=[1,31],$Vm=[1,32],$Vn=[1,35],$Vo=[1,36],$Vp=[1,37],$Vq=[1,38],$Vr=[1,34],$Vs=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],$Vt=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,39,40,41,45,48,51,52,53,54,57],$Vu=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,CLICK:38,STRING:39,HREF:40,classDef:41,CLASSDEF_ID:42,CLASSDEF_STYLEOPTS:43,DEFAULT:44,style:45,STYLE_IDS:46,STYLEDEF_STYLEOPTS:47,class:48,CLASSENTITY_IDS:49,STYLECLASS:50,direction_tb:51,direction_bt:52,direction_rl:53,direction_lr:54,eol:55,";":56,EDGE_STATE:57,STYLE_SEPARATOR:58,left_of:59,right_of:60,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"CLICK",39:"STRING",40:"HREF",41:"classDef",42:"CLASSDEF_ID",43:"CLASSDEF_STYLEOPTS",44:"DEFAULT",45:"style",46:"STYLE_IDS",47:"STYLEDEF_STYLEOPTS",48:"class",49:"CLASSENTITY_IDS",50:"STYLECLASS",51:"direction_tb",52:"direction_bt",53:"direction_rl",54:"direction_lr",56:";",57:"EDGE_STATE",58:"STYLE_SEPARATOR",59:"left_of",60:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[9,5],[9,5],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[55,1],[55,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 3:return yy.setRootDoc($$[$0]),$$[$0];case 4:this.$=[];break;case 5:"nl"!=$$[$0]&&($$[$0-1].push($$[$0]),this.$=$$[$0-1]);break;case 6:case 7:case 12:this.$=$$[$0];break;case 8:this.$="nl";break;case 13:const stateStmt=$$[$0-1];stateStmt.description=yy.trimColon($$[$0]),this.$=stateStmt;break;case 14:this.$={stmt:"relation",state1:$$[$0-2],state2:$$[$0]};break;case 15:const relDescription=yy.trimColon($$[$0]);this.$={stmt:"relation",state1:$$[$0-3],state2:$$[$0-1],description:relDescription};break;case 19:this.$={stmt:"state",id:$$[$0-3],type:"default",description:"",doc:$$[$0-1]};break;case 20:var id30=$$[$0],description=$$[$0-2].trim();if($$[$0].match(":")){var parts=$$[$0].split(":");id30=parts[0],description=[description,parts[1]]}this.$={stmt:"state",id:id30,type:"default",description:description};break;case 21:this.$={stmt:"state",id:$$[$0-3],type:"default",description:$$[$0-5],doc:$$[$0-1]};break;case 22:this.$={stmt:"state",id:$$[$0],type:"fork"};break;case 23:this.$={stmt:"state",id:$$[$0],type:"join"};break;case 24:this.$={stmt:"state",id:$$[$0],type:"choice"};break;case 25:this.$={stmt:"state",id:yy.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:$$[$0-1].trim(),note:{position:$$[$0-2].trim(),text:$$[$0].trim()}};break;case 29:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 30:case 31:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 32:this.$={stmt:"click",id:$$[$0-3],url:$$[$0-2],tooltip:$$[$0-1]};break;case 33:this.$={stmt:"click",id:$$[$0-3],url:$$[$0-1],tooltip:""};break;case 34:case 35:this.$={stmt:"classDef",id:$$[$0-1].trim(),classes:$$[$0].trim()};break;case 36:this.$={stmt:"style",id:$$[$0-1].trim(),styleClass:$$[$0].trim()};break;case 37:this.$={stmt:"applyClass",id:$$[$0-1].trim(),styleClass:$$[$0].trim()};break;case 38:yy.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:yy.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:yy.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:yy.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:$$[$0].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:$$[$0-2].trim(),classes:[$$[$0].trim()],type:"default",description:""}}},"anonymous"),table:[{3:1,4:$V0,5:$V1,6:$V2},{1:[3]},{3:5,4:$V0,5:$V1,6:$V2},{3:6,4:$V0,5:$V1,6:$V2},o2([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],$V3,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:$V4,5:$V5,8:8,9:10,10:12,11:13,12:14,13:15,16:$V6,17:$V7,19:$V8,22:$V9,24:$Va,25:$Vb,26:$Vc,27:$Vd,28:$Ve,29:$Vf,32:25,33:$Vg,35:$Vh,37:$Vi,38:$Vj,41:$Vk,45:$Vl,48:$Vm,51:$Vn,52:$Vo,53:$Vp,54:$Vq,57:$Vr},o2($Vs,[2,5]),{9:39,10:12,11:13,12:14,13:15,16:$V6,17:$V7,19:$V8,22:$V9,24:$Va,25:$Vb,26:$Vc,27:$Vd,28:$Ve,29:$Vf,32:25,33:$Vg,35:$Vh,37:$Vi,38:$Vj,41:$Vk,45:$Vl,48:$Vm,51:$Vn,52:$Vo,53:$Vp,54:$Vq,57:$Vr},o2($Vs,[2,7]),o2($Vs,[2,8]),o2($Vs,[2,9]),o2($Vs,[2,10]),o2($Vs,[2,11]),o2($Vs,[2,12],{14:[1,40],15:[1,41]}),o2($Vs,[2,16]),{18:[1,42]},o2($Vs,[2,18],{20:[1,43]}),{23:[1,44]},o2($Vs,[2,22]),o2($Vs,[2,23]),o2($Vs,[2,24]),o2($Vs,[2,25]),{30:45,31:[1,46],59:[1,47],60:[1,48]},o2($Vs,[2,28]),{34:[1,49]},{36:[1,50]},o2($Vs,[2,31]),{13:51,24:$Va,57:$Vr},{42:[1,52],44:[1,53]},{46:[1,54]},{49:[1,55]},o2($Vt,[2,44],{58:[1,56]}),o2($Vt,[2,45],{58:[1,57]}),o2($Vs,[2,38]),o2($Vs,[2,39]),o2($Vs,[2,40]),o2($Vs,[2,41]),o2($Vs,[2,6]),o2($Vs,[2,13]),{13:58,24:$Va,57:$Vr},o2($Vs,[2,17]),o2($Vu,$V3,{7:59}),{24:[1,60]},{24:[1,61]},{23:[1,62]},{24:[2,48]},{24:[2,49]},o2($Vs,[2,29]),o2($Vs,[2,30]),{39:[1,63],40:[1,64]},{43:[1,65]},{43:[1,66]},{47:[1,67]},{50:[1,68]},{24:[1,69]},{24:[1,70]},o2($Vs,[2,14],{14:[1,71]}),{4:$V4,5:$V5,8:8,9:10,10:12,11:13,12:14,13:15,16:$V6,17:$V7,19:$V8,21:[1,72],22:$V9,24:$Va,25:$Vb,26:$Vc,27:$Vd,28:$Ve,29:$Vf,32:25,33:$Vg,35:$Vh,37:$Vi,38:$Vj,41:$Vk,45:$Vl,48:$Vm,51:$Vn,52:$Vo,53:$Vp,54:$Vq,57:$Vr},o2($Vs,[2,20],{20:[1,73]}),{31:[1,74]},{24:[1,75]},{39:[1,76]},{39:[1,77]},o2($Vs,[2,34]),o2($Vs,[2,35]),o2($Vs,[2,36]),o2($Vs,[2,37]),o2($Vt,[2,46]),o2($Vt,[2,47]),o2($Vs,[2,15]),o2($Vs,[2,19]),o2($Vu,$V3,{7:78}),o2($Vs,[2,26]),o2($Vs,[2,27]),{5:[1,79]},{5:[1,80]},{4:$V4,5:$V5,8:8,9:10,10:12,11:13,12:14,13:15,16:$V6,17:$V7,19:$V8,21:[1,81],22:$V9,24:$Va,25:$Vb,26:$Vc,27:$Vd,28:$Ve,29:$Vf,32:25,33:$Vg,35:$Vh,37:$Vi,38:$Vj,41:$Vk,45:$Vl,48:$Vm,51:$Vn,52:$Vo,53:$Vp,54:$Vq,57:$Vr},o2($Vs,[2,32]),o2($Vs,[2,33]),o2($Vs,[2,21])],defaultActions:{5:[2,1],6:[2,2],47:[2,48],48:[2,49]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return 38;case 1:return 40;case 2:return 39;case 3:return 44;case 4:case 45:return 51;case 5:case 46:return 52;case 6:case 47:return 53;case 7:case 48:return 54;case 8:case 9:case 11:case 12:case 13:case 14:case 57:case 59:case 65:break;case 10:case 80:return 5;case 15:case 35:return this.pushState("SCALE"),17;case 16:case 36:return 18;case 17:case 23:case 37:case 52:case 55:this.popState();break;case 18:return this.begin("acc_title"),33;case 19:return this.popState(),"acc_title_value";case 20:return this.begin("acc_descr"),35;case 21:return this.popState(),"acc_descr_value";case 22:this.begin("acc_descr_multiline");break;case 24:return"acc_descr_multiline_value";case 25:return this.pushState("CLASSDEF"),41;case 26:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 27:return this.popState(),this.pushState("CLASSDEFID"),42;case 28:return this.popState(),43;case 29:return this.pushState("CLASS"),48;case 30:return this.popState(),this.pushState("CLASS_STYLE"),49;case 31:return this.popState(),50;case 32:return this.pushState("STYLE"),45;case 33:return this.popState(),this.pushState("STYLEDEF_STYLES"),46;case 34:return this.popState(),47;case 38:this.pushState("STATE");break;case 39:case 42:return this.popState(),yy_.yytext=yy_.yytext.slice(0,-8).trim(),25;case 40:case 43:return this.popState(),yy_.yytext=yy_.yytext.slice(0,-8).trim(),26;case 41:case 44:return this.popState(),yy_.yytext=yy_.yytext.slice(0,-10).trim(),27;case 49:this.pushState("STATE_STRING");break;case 50:return this.pushState("STATE_ID"),"AS";case 51:case 67:return this.popState(),"ID";case 53:return"STATE_DESCR";case 54:return 19;case 56:return this.popState(),this.pushState("struct"),20;case 58:return this.popState(),21;case 60:return this.begin("NOTE"),29;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:return this.popState(),this.pushState("NOTE_ID"),60;case 63:this.popState(),this.pushState("FLOATING_NOTE");break;case 64:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 66:return"NOTE_TEXT";case 68:return this.popState(),this.pushState("NOTE_TEXT"),24;case 69:return this.popState(),yy_.yytext=yy_.yytext.substr(2).trim(),31;case 70:return this.popState(),yy_.yytext=yy_.yytext.slice(0,-8).trim(),31;case 71:case 72:return 6;case 73:return 16;case 74:return 57;case 75:return 24;case 76:return yy_.yytext=yy_.yytext.trim(),14;case 77:return 15;case 78:return 28;case 79:return 58;case 81:return"INVALID"}},"anonymous"),rules:[/^(?:click\b)/i,/^(?:href\b)/i,/^(?:"[^"]*")/i,/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[12,13],inclusive:!1},struct:{rules:[12,13,25,29,32,38,45,46,47,48,57,58,59,60,74,75,76,77,78],inclusive:!1},FLOATING_NOTE_ID:{rules:[67],inclusive:!1},FLOATING_NOTE:{rules:[64,65,66],inclusive:!1},NOTE_TEXT:{rules:[69,70],inclusive:!1},NOTE_ID:{rules:[68],inclusive:!1},NOTE:{rules:[61,62,63],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[34],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[33],inclusive:!1},CLASS_STYLE:{rules:[31],inclusive:!1},CLASS:{rules:[30],inclusive:!1},CLASSDEFID:{rules:[28],inclusive:!1},CLASSDEF:{rules:[26,27],inclusive:!1},acc_descr_multiline:{rules:[23,24],inclusive:!1},acc_descr:{rules:[21],inclusive:!1},acc_title:{rules:[19],inclusive:!1},SCALE:{rules:[16,17,36,37],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[51],inclusive:!1},STATE_STRING:{rules:[52,53],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[12,13,39,40,41,42,43,44,49,50,54,55,56],inclusive:!1},ID:{rules:[12,13],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,18,20,22,25,29,32,35,38,56,60,71,72,73,74,75,76,77,79,80,81],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser13.parser=parser13,stateDiagram_default=parser13}}),init_stateCommon=__esm({"src/diagrams/state/stateCommon.ts"(){DEFAULT_DIAGRAM_DIRECTION="TB",DEFAULT_NESTED_DOC_DIR="TB",STMT_DIRECTION="dir",STMT_STATE="state",STMT_ROOT="root",STMT_RELATION="relation",STMT_CLASSDEF="classDef",STMT_STYLEDEF="style",STMT_APPLYCLASS="applyClass",DEFAULT_STATE_TYPE="default",DIVIDER_TYPE="divider",G_EDGE_STYLE="fill:none",G_EDGE_ARROWHEADSTYLE="fill: #333",G_EDGE_LABELPOS="c",G_EDGE_LABELTYPE="text",G_EDGE_THICKNESS="normal",SHAPE_STATE="rect",SHAPE_STATE_WITH_DESC="rectWithTitle",SHAPE_START="stateStart",SHAPE_END="stateEnd",SHAPE_DIVIDER="divider",SHAPE_GROUP="roundedWithTitle",SHAPE_NOTE="note",SHAPE_NOTEGROUP="noteGroup",CSS_DIAGRAM_STATE=`${CSS_DIAGRAM="statediagram"}-state`,CSS_EDGE_NOTE_EDGE=`${CSS_EDGE="transition"} note-edge`,CSS_DIAGRAM_NOTE=`${CSS_DIAGRAM}-note`,CSS_DIAGRAM_CLUSTER=`${CSS_DIAGRAM}-cluster`,CSS_DIAGRAM_CLUSTER_ALT=`${CSS_DIAGRAM}-cluster-alt`,DOMID_STATE="state",NOTE_ID=`${DOMID_TYPE_SPACER="----"}${NOTE="note"}`,PARENT_ID=`${DOMID_TYPE_SPACER}${PARENT2="parent"}`}});function stateDomId(itemId="",counter2=0,type3="",typeSpacer=DOMID_TYPE_SPACER){const typeStr=null!==type3&&type3.length>0?`${typeSpacer}${type3}`:"";return`${DOMID_STATE}-${itemId}${typeStr}-${counter2}`}function insertOrUpdateNode(nodes5,nodeData2,classes3){if(!nodeData2.id||"</join></fork>"===nodeData2.id||"</choice>"===nodeData2.id)return;nodeData2.cssClasses&&(Array.isArray(nodeData2.cssCompiledStyles)||(nodeData2.cssCompiledStyles=[]),nodeData2.cssClasses.split(" ").forEach(cssClass=>{const classDef=classes3.get(cssClass);classDef&&(nodeData2.cssCompiledStyles=[...nodeData2.cssCompiledStyles??[],...classDef.styles])}));const existingNodeData=nodes5.find(node2=>node2.id===nodeData2.id);existingNodeData?Object.assign(existingNodeData,nodeData2):nodes5.push(nodeData2)}function getClassesFromDbInfo(dbInfoItem){return dbInfoItem?.classes?.join(" ")??""}function getStylesFromDbInfo(dbInfoItem){return dbInfoItem?.styles??[]}var getDir3,stateRenderer_v3_unified_default,CONSTANTS,newClassesList,newDoc,clone5,StateDB,styles_default10,drawStartState,drawDivider,drawSimpleState,drawDescrState,addTitleAndBox,drawEndState,drawForkJoinState,_drawLongText,drawNote2,drawState,edgeCount,drawEdge,conf3,transformationLog,setConf4,insertMarkers2,draw14,getLabelWidth,renderDoc,stateRenderer_default,diagram14,init_dataFetcher=__esm({"src/diagrams/state/dataFetcher.ts"(){init_diagramAPI(),init_logger(),init_common(),init_stateCommon(),nodeDb=new Map,graphItemCount=0,__name(stateDomId,"stateDomId"),setupDoc=__name((parentParsedItem,doc,diagramStates,nodes5,edges3,altFlag,look,classes3)=>{log.trace("items",doc),doc.forEach(item=>{switch(item.stmt){case STMT_STATE:case DEFAULT_STATE_TYPE:dataFetcher(parentParsedItem,item,diagramStates,nodes5,edges3,altFlag,look,classes3);break;case STMT_RELATION:{dataFetcher(parentParsedItem,item.state1,diagramStates,nodes5,edges3,altFlag,look,classes3),dataFetcher(parentParsedItem,item.state2,diagramStates,nodes5,edges3,altFlag,look,classes3);const edgeData2={id:"edge"+graphItemCount,start:item.state1.id,end:item.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:G_EDGE_STYLE,labelStyle:"",label:common_default.sanitizeText(item.description??"",getConfig2()),arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS,classes:CSS_EDGE,look:look};edges3.push(edgeData2),graphItemCount++}}})},"setupDoc"),getDir2=__name((parsedItem,defaultDir=DEFAULT_NESTED_DOC_DIR)=>{let dir2=defaultDir;if(parsedItem.doc)for(const parsedItemDoc of parsedItem.doc)"dir"===parsedItemDoc.stmt&&(dir2=parsedItemDoc.value);return dir2},"getDir"),__name(insertOrUpdateNode,"insertOrUpdateNode"),__name(getClassesFromDbInfo,"getClassesFromDbInfo"),__name(getStylesFromDbInfo,"getStylesFromDbInfo"),dataFetcher=__name((parent4,parsedItem,diagramStates,nodes5,edges3,altFlag,look,classes3)=>{const itemId=parsedItem.id,dbState=diagramStates.get(itemId),classStr=getClassesFromDbInfo(dbState),style3=getStylesFromDbInfo(dbState),config5=getConfig2();if(log.info("dataFetcher parsedItem",parsedItem,dbState,style3),"root"!==itemId){let shape=SHAPE_STATE;!0===parsedItem.start?shape=SHAPE_START:!1===parsedItem.start&&(shape=SHAPE_END),parsedItem.type!==DEFAULT_STATE_TYPE&&(shape=parsedItem.type),nodeDb.get(itemId)||nodeDb.set(itemId,{id:itemId,shape:shape,description:common_default.sanitizeText(itemId,config5),cssClasses:`${classStr} ${CSS_DIAGRAM_STATE}`,cssStyles:style3});const newNode=nodeDb.get(itemId);parsedItem.description&&(Array.isArray(newNode.description)?(newNode.shape=SHAPE_STATE_WITH_DESC,newNode.description.push(parsedItem.description)):newNode.description?.length&&newNode.description.length>0?(newNode.shape=SHAPE_STATE_WITH_DESC,newNode.description===itemId?newNode.description=[parsedItem.description]:newNode.description=[newNode.description,parsedItem.description]):(newNode.shape=SHAPE_STATE,newNode.description=parsedItem.description),newNode.description=common_default.sanitizeTextOrArray(newNode.description,config5)),1===newNode.description?.length&&newNode.shape===SHAPE_STATE_WITH_DESC&&("group"===newNode.type?newNode.shape=SHAPE_GROUP:newNode.shape=SHAPE_STATE),!newNode.type&&parsedItem.doc&&(log.info("Setting cluster for XCX",itemId,getDir2(parsedItem)),newNode.type="group",newNode.isGroup=!0,newNode.dir=getDir2(parsedItem),newNode.shape=parsedItem.type===DIVIDER_TYPE?SHAPE_DIVIDER:SHAPE_GROUP,newNode.cssClasses=`${newNode.cssClasses} ${CSS_DIAGRAM_CLUSTER} ${altFlag?CSS_DIAGRAM_CLUSTER_ALT:""}`);const nodeData2={labelStyle:"",shape:newNode.shape,label:newNode.description,cssClasses:newNode.cssClasses,cssCompiledStyles:[],cssStyles:newNode.cssStyles,id:itemId,dir:newNode.dir,domId:stateDomId(itemId,graphItemCount),type:newNode.type,isGroup:"group"===newNode.type,padding:8,rx:10,ry:10,look:look};if(nodeData2.shape===SHAPE_DIVIDER&&(nodeData2.label=""),parent4&&"root"!==parent4.id&&(log.trace("Setting node ",itemId," to be child of its parent ",parent4.id),nodeData2.parentId=parent4.id),nodeData2.centerLabel=!0,parsedItem.note){const noteData={labelStyle:"",shape:SHAPE_NOTE,label:parsedItem.note.text,cssClasses:CSS_DIAGRAM_NOTE,cssStyles:[],cssCompiledStyles:[],id:itemId+NOTE_ID+"-"+graphItemCount,domId:stateDomId(itemId,graphItemCount,NOTE),type:newNode.type,isGroup:"group"===newNode.type,padding:config5.flowchart?.padding,look:look,position:parsedItem.note.position},parentNodeId=itemId+PARENT_ID,groupData={labelStyle:"",shape:SHAPE_NOTEGROUP,label:parsedItem.note.text,cssClasses:newNode.cssClasses,cssStyles:[],id:itemId+PARENT_ID,domId:stateDomId(itemId,graphItemCount,PARENT2),type:"group",isGroup:!0,padding:16,look:look,position:parsedItem.note.position};graphItemCount++,groupData.id=parentNodeId,noteData.parentId=parentNodeId,insertOrUpdateNode(nodes5,groupData,classes3),insertOrUpdateNode(nodes5,noteData,classes3),insertOrUpdateNode(nodes5,nodeData2,classes3);let from2=itemId,to=noteData.id;"left of"===parsedItem.note.position&&(from2=noteData.id,to=itemId),edges3.push({id:from2+"-"+to,start:from2,end:to,arrowhead:"none",arrowTypeEnd:"",style:G_EDGE_STYLE,labelStyle:"",classes:CSS_EDGE_NOTE_EDGE,arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS,look:look})}else insertOrUpdateNode(nodes5,nodeData2,classes3)}parsedItem.doc&&(log.trace("Adding nodes children "),setupDoc(parsedItem,parsedItem.doc,diagramStates,nodes5,edges3,!altFlag,look,classes3))},"dataFetcher"),reset3=__name(()=>{nodeDb.clear(),graphItemCount=0},"reset")}}),init_stateRenderer_v3_unified=__esm({"src/diagrams/state/stateRenderer-v3-unified.ts"(){init_diagramAPI(),init_logger(),init_insertElementsForSize(),init_render2(),init_setupViewPortForSVG(),init_utils2(),init_stateCommon(),getDir3=__name((parsedItem,defaultDir=DEFAULT_NESTED_DOC_DIR)=>{if(!parsedItem.doc)return defaultDir;let dir2=defaultDir;for(const parsedItemDoc of parsedItem.doc)"dir"===parsedItemDoc.stmt&&(dir2=parsedItemDoc.value);return dir2},"getDir"),stateRenderer_v3_unified_default={getClasses:__name(function(text4,diagramObj){return diagramObj.db.getClasses()},"getClasses"),draw:__name(async function(text4,id30,_version,diag){log.info("REF0:"),log.info("Drawing state diagram (v2)",id30);const{securityLevel:securityLevel,state:conf5,layout:layout6}=getConfig2();diag.db.extract(diag.db.getRootDocV2());const data4Layout=diag.db.getData(),svg2=getDiagramElement(id30,securityLevel);data4Layout.type=diag.type,data4Layout.layoutAlgorithm=layout6,data4Layout.nodeSpacing=conf5?.nodeSpacing||50,data4Layout.rankSpacing=conf5?.rankSpacing||50,data4Layout.markers=["barb"],data4Layout.diagramId=id30,await render6(data4Layout,svg2);try{("function"==typeof diag.db.getLinks?diag.db.getLinks():new Map).forEach((linkInfo,key)=>{const stateId="string"==typeof key?key:"string"==typeof key?.id?key.id:"";if(!stateId)return void log.warn("⚠️ Invalid or missing stateId from key:",JSON.stringify(key));const allNodes=svg2.node()?.querySelectorAll("g");let matchedElem;if(allNodes?.forEach(g2=>{const text5=g2.textContent?.trim();text5===stateId&&(matchedElem=g2)}),!matchedElem)return void log.warn("⚠️ Could not find node matching text:",stateId);const parent4=matchedElem.parentNode;if(!parent4)return void log.warn("⚠️ Node has no parent, cannot wrap:",stateId);const a2=document.createElementNS("http://www.w3.org/2000/svg","a"),cleanedUrl=linkInfo.url.replace(/^"+|"+$/g,"");if(a2.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",cleanedUrl),a2.setAttribute("target","_blank"),linkInfo.tooltip){const tooltip=linkInfo.tooltip.replace(/^"+|"+$/g,"");a2.setAttribute("title",tooltip)}parent4.replaceChild(a2,matchedElem),a2.appendChild(matchedElem),log.info("🔗 Wrapped node in <a> tag for:",stateId,linkInfo.url)})}catch(err){log.error("❌ Error injecting clickable links:",err)}utils_default2.insertTitle(svg2,"statediagramTitleText",conf5?.titleTopMargin??25,diag.db.getDiagramTitle()),setupViewPortForSVG(svg2,8,CSS_DIAGRAM,conf5?.useMaxWidth??!0)},"draw"),getDir:getDir3}}}),init_stateDb=__esm({"src/diagrams/state/stateDb.ts"(){init_diagramAPI(),init_logger(),init_utils2(),init_common(),init_commonDb(),init_dataFetcher(),init_stateRenderer_v3_unified(),init_stateCommon(),CONSTANTS={START_NODE:"[*]",START_TYPE:"start",END_NODE:"[*]",END_TYPE:"end",COLOR_KEYWORD:"color",FILL_KEYWORD:"fill",BG_FILL:"bgFill",STYLECLASS_SEP:","},newClassesList=__name(()=>new Map,"newClassesList"),newDoc=__name(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),clone5=__name(o2=>JSON.parse(JSON.stringify(o2)),"clone"),StateDB=class{constructor(version3){this.version=version3,this.nodes=[],this.edges=[],this.rootDoc=[],this.classes=newClassesList(),this.documents={root:newDoc()},this.currentDocument=this.documents.root,this.startEndCount=0,this.dividerCnt=0,this.links=new Map,this.getAccTitle=getAccTitle,this.setAccTitle=setAccTitle,this.getAccDescription=getAccDescription,this.setAccDescription=setAccDescription,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.clear(),this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}static{__name(this,"StateDB")}static{this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3}}extract(statements){this.clear(!0);for(const item of Array.isArray(statements)?statements:statements.doc)switch(item.stmt){case STMT_STATE:this.addState(item.id.trim(),item.type,item.doc,item.description,item.note);break;case STMT_RELATION:this.addRelation(item.state1,item.state2,item.description);break;case STMT_CLASSDEF:this.addStyleClass(item.id.trim(),item.classes);break;case STMT_STYLEDEF:this.handleStyleDef(item);break;case STMT_APPLYCLASS:this.setCssClass(item.id.trim(),item.styleClass);break;case"click":this.addLink(item.id,item.url,item.tooltip)}const diagramStates=this.getStates(),config5=getConfig2();reset3(),dataFetcher(void 0,this.getRootDocV2(),diagramStates,this.nodes,this.edges,!0,config5.look,this.classes);for(const node2 of this.nodes)if(Array.isArray(node2.label)){if(node2.description=node2.label.slice(1),node2.isGroup&&node2.description.length>0)throw new Error(`Group nodes can only have label. Remove the additional description for node [${node2.id}]`);node2.label=node2.label[0]}}handleStyleDef(item){const ids=item.id.trim().split(","),styles4=item.styleClass.split(",");for(const id30 of ids){let state3=this.getState(id30);if(!state3){const trimmedId=id30.trim();this.addState(trimmedId),state3=this.getState(trimmedId)}state3&&(state3.styles=styles4.map(s2=>s2.replace(/;/g,"")?.trim()))}}setRootDoc(o2){log.info("Setting root doc",o2),this.rootDoc=o2,1===this.version?this.extract(o2):this.extract(this.getRootDocV2())}docTranslator(parent4,node2,first3){if(node2.stmt===STMT_RELATION)return this.docTranslator(parent4,node2.state1,!0),void this.docTranslator(parent4,node2.state2,!1);if(node2.stmt===STMT_STATE&&(node2.id===CONSTANTS.START_NODE?(node2.id=parent4.id+(first3?"_start":"_end"),node2.start=first3):node2.id=node2.id.trim()),node2.stmt!==STMT_ROOT&&node2.stmt!==STMT_STATE||!node2.doc)return;const doc=[];let currentDoc=[];for(const stmt of node2.doc)if(stmt.type===DIVIDER_TYPE){const newNode=clone5(stmt);newNode.doc=clone5(currentDoc),doc.push(newNode),currentDoc=[]}else currentDoc.push(stmt);if(doc.length>0&&currentDoc.length>0){const newNode={stmt:STMT_STATE,id:generateId(),type:"divider",doc:clone5(currentDoc)};doc.push(clone5(newNode)),node2.doc=doc}node2.doc.forEach(docNode=>this.docTranslator(node2,docNode,!0))}getRootDocV2(){return this.docTranslator({id:STMT_ROOT,stmt:STMT_ROOT},{id:STMT_ROOT,stmt:STMT_ROOT,doc:this.rootDoc},!0),{id:STMT_ROOT,doc:this.rootDoc}}addState(id30,type3=DEFAULT_STATE_TYPE,doc=void 0,descr=void 0,note3=void 0,classes3=void 0,styles4=void 0,textStyles=void 0){const trimmedId=id30?.trim();if(this.currentDocument.states.has(trimmedId)){const state3=this.currentDocument.states.get(trimmedId);if(!state3)throw new Error(`State not found: ${trimmedId}`);state3.doc||(state3.doc=doc),state3.type||(state3.type=type3)}else log.info("Adding state ",trimmedId,descr),this.currentDocument.states.set(trimmedId,{stmt:STMT_STATE,id:trimmedId,descriptions:[],type:type3,doc:doc,note:note3,classes:[],styles:[],textStyles:[]});if(descr){log.info("Setting state description",trimmedId,descr);(Array.isArray(descr)?descr:[descr]).forEach(des=>this.addDescription(trimmedId,des.trim()))}if(note3){const doc2=this.currentDocument.states.get(trimmedId);if(!doc2)throw new Error(`State not found: ${trimmedId}`);doc2.note=note3,doc2.note.text=common_default.sanitizeText(doc2.note.text,getConfig2())}if(classes3){log.info("Setting state classes",trimmedId,classes3);(Array.isArray(classes3)?classes3:[classes3]).forEach(cssClass=>this.setCssClass(trimmedId,cssClass.trim()))}if(styles4){log.info("Setting state styles",trimmedId,styles4);(Array.isArray(styles4)?styles4:[styles4]).forEach(style3=>this.setStyle(trimmedId,style3.trim()))}if(textStyles){log.info("Setting state styles",trimmedId,styles4);(Array.isArray(textStyles)?textStyles:[textStyles]).forEach(textStyle=>this.setTextStyle(trimmedId,textStyle.trim()))}}clear(saveCommon){this.nodes=[],this.edges=[],this.documents={root:newDoc()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=newClassesList(),saveCommon||(this.links=new Map,clear())}getState(id30){return this.currentDocument.states.get(id30)}getStates(){return this.currentDocument.states}logDocuments(){log.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}addLink(stateId,url,tooltip){this.links.set(stateId,{url:url,tooltip:tooltip}),log.warn("Adding link",stateId,url,tooltip)}getLinks(){return this.links}startIdIfNeeded(id30=""){return id30===CONSTANTS.START_NODE?(this.startEndCount++,`${CONSTANTS.START_TYPE}${this.startEndCount}`):id30}startTypeIfNeeded(id30="",type3=DEFAULT_STATE_TYPE){return id30===CONSTANTS.START_NODE?CONSTANTS.START_TYPE:type3}endIdIfNeeded(id30=""){return id30===CONSTANTS.END_NODE?(this.startEndCount++,`${CONSTANTS.END_TYPE}${this.startEndCount}`):id30}endTypeIfNeeded(id30="",type3=DEFAULT_STATE_TYPE){return id30===CONSTANTS.END_NODE?CONSTANTS.END_TYPE:type3}addRelationObjs(item1,item2,relationTitle=""){const id1=this.startIdIfNeeded(item1.id.trim()),type1=this.startTypeIfNeeded(item1.id.trim(),item1.type),id210=this.startIdIfNeeded(item2.id.trim()),type22=this.startTypeIfNeeded(item2.id.trim(),item2.type);this.addState(id1,type1,item1.doc,item1.description,item1.note,item1.classes,item1.styles,item1.textStyles),this.addState(id210,type22,item2.doc,item2.description,item2.note,item2.classes,item2.styles,item2.textStyles),this.currentDocument.relations.push({id1:id1,id2:id210,relationTitle:common_default.sanitizeText(relationTitle,getConfig2())})}addRelation(item1,item2,title2){if("object"==typeof item1&&"object"==typeof item2)this.addRelationObjs(item1,item2,title2);else if("string"==typeof item1&&"string"==typeof item2){const id1=this.startIdIfNeeded(item1.trim()),type1=this.startTypeIfNeeded(item1),id210=this.endIdIfNeeded(item2.trim()),type22=this.endTypeIfNeeded(item2);this.addState(id1,type1),this.addState(id210,type22),this.currentDocument.relations.push({id1:id1,id2:id210,relationTitle:title2?common_default.sanitizeText(title2,getConfig2()):void 0})}}addDescription(id30,descr){const theState=this.currentDocument.states.get(id30),_descr=descr.startsWith(":")?descr.replace(":","").trim():descr;theState?.descriptions?.push(common_default.sanitizeText(_descr,getConfig2()))}cleanupLabel(label){return label.startsWith(":")?label.slice(2).trim():label.trim()}getDividerId(){return this.dividerCnt++,`divider-id-${this.dividerCnt}`}addStyleClass(id30,styleAttributes=""){this.classes.has(id30)||this.classes.set(id30,{id:id30,styles:[],textStyles:[]});const foundClass=this.classes.get(id30);styleAttributes&&foundClass&&styleAttributes.split(CONSTANTS.STYLECLASS_SEP).forEach(attrib=>{const fixedAttrib=attrib.replace(/([^;]*);/,"$1").trim();if(RegExp(CONSTANTS.COLOR_KEYWORD).exec(attrib)){const newStyle2=fixedAttrib.replace(CONSTANTS.FILL_KEYWORD,CONSTANTS.BG_FILL).replace(CONSTANTS.COLOR_KEYWORD,CONSTANTS.FILL_KEYWORD);foundClass.textStyles.push(newStyle2)}foundClass.styles.push(fixedAttrib)})}getClasses(){return this.classes}setCssClass(itemIds,cssClassName){itemIds.split(",").forEach(id30=>{let foundState=this.getState(id30);if(!foundState){const trimmedId=id30.trim();this.addState(trimmedId),foundState=this.getState(trimmedId)}foundState?.classes?.push(cssClassName)})}setStyle(itemId,styleText){this.getState(itemId)?.styles?.push(styleText)}setTextStyle(itemId,cssClassName){this.getState(itemId)?.textStyles?.push(cssClassName)}getDirectionStatement(){return this.rootDoc.find(doc=>doc.stmt===STMT_DIRECTION)}getDirection(){return this.getDirectionStatement()?.value??DEFAULT_DIAGRAM_DIRECTION}setDirection(dir2){const doc=this.getDirectionStatement();doc?doc.value=dir2:this.rootDoc.unshift({stmt:STMT_DIRECTION,value:dir2})}trimColon(str2){return str2.startsWith(":")?str2.slice(1).trim():str2.trim()}getData(){const config5=getConfig2();return{nodes:this.nodes,edges:this.edges,other:{},config:config5,direction:getDir3(this.getRootDocV2())}}getConfig(){return getConfig2().state}}}}),init_styles10=__esm({"src/diagrams/state/styles.js"(){styles_default10=__name(options2=>`\ndefs #statediagram-barbEnd {\n    fill: ${options2.transitionColor};\n    stroke: ${options2.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${options2.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${options2.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${options2.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${options2.mainBkg};\n  stroke: ${options2.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${options2.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${options2.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${options2.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${options2.noteBorderColor};\n  fill: ${options2.noteBkgColor};\n\n  text {\n    fill: ${options2.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${options2.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${options2.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel {\n  background-color: ${options2.edgeLabelBackground};\n  p {\n    background-color: ${options2.edgeLabelBackground};\n  }\n  rect {\n    opacity: 0.5;\n    background-color: ${options2.edgeLabelBackground};\n    fill: ${options2.edgeLabelBackground};\n  }\n  text-align: center;\n}\n.edgeLabel .label text {\n  fill: ${options2.transitionLabelColor||options2.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${options2.transitionLabelColor||options2.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${options2.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${options2.specialStateColor};\n  stroke: ${options2.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${options2.specialStateColor};\n  stroke: ${options2.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${options2.innerEndBackground};\n  stroke: ${options2.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${options2.compositeBackground||options2.background};\n  // stroke: ${options2.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${options2.stateBkg||options2.mainBkg};\n  stroke: ${options2.stateBorder||options2.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${options2.mainBkg};\n  stroke: ${options2.stateBorder||options2.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${options2.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${options2.compositeTitleBackground};\n  stroke: ${options2.stateBorder||options2.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${options2.stateLabelColor};\n  // line-height: 1;\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${options2.stateBorder||options2.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${options2.compositeBackground||options2.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${options2.altBackground?options2.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${options2.altBackground?options2.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${options2.noteBkgColor};\n  stroke: ${options2.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${options2.noteBkgColor};\n  stroke: ${options2.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${options2.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${options2.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${options2.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${options2.lineColor};\n  stroke: ${options2.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${options2.textColor};\n}\n`,"getStyles")}}),init_shapes2=__esm({"src/diagrams/state/shapes.js"(){init_src32(),init_stateDb(),init_utils2(),init_common(),init_diagramAPI(),init_logger(),drawStartState=__name(g2=>g2.append("circle").attr("class","start-state").attr("r",getConfig2().state.sizeUnit).attr("cx",getConfig2().state.padding+getConfig2().state.sizeUnit).attr("cy",getConfig2().state.padding+getConfig2().state.sizeUnit),"drawStartState"),drawDivider=__name(g2=>g2.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",getConfig2().state.textHeight).attr("class","divider").attr("x2",2*getConfig2().state.textHeight).attr("y1",0).attr("y2",0),"drawDivider"),drawSimpleState=__name((g2,stateDef)=>{const state3=g2.append("text").attr("x",2*getConfig2().state.padding).attr("y",getConfig2().state.textHeight+2*getConfig2().state.padding).attr("font-size",getConfig2().state.fontSize).attr("class","state-title").text(stateDef.id),classBox2=state3.node().getBBox();return g2.insert("rect",":first-child").attr("x",getConfig2().state.padding).attr("y",getConfig2().state.padding).attr("width",classBox2.width+2*getConfig2().state.padding).attr("height",classBox2.height+2*getConfig2().state.padding).attr("rx",getConfig2().state.radius),state3},"drawSimpleState"),drawDescrState=__name((g2,stateDef)=>{const addTspan=__name(function(textEl,txt,isFirst2){const tSpan=textEl.append("tspan").attr("x",2*getConfig2().state.padding).text(txt);isFirst2||tSpan.attr("dy",getConfig2().state.textHeight)},"addTspan"),titleBox=g2.append("text").attr("x",2*getConfig2().state.padding).attr("y",getConfig2().state.textHeight+1.3*getConfig2().state.padding).attr("font-size",getConfig2().state.fontSize).attr("class","state-title").text(stateDef.descriptions[0]).node().getBBox(),titleHeight=titleBox.height,description=g2.append("text").attr("x",getConfig2().state.padding).attr("y",titleHeight+.4*getConfig2().state.padding+getConfig2().state.dividerMargin+getConfig2().state.textHeight).attr("class","state-description");let isFirst=!0,isSecond=!0;stateDef.descriptions.forEach(function(descr){isFirst||(addTspan(description,descr,isSecond),isSecond=!1),isFirst=!1});const descrLine=g2.append("line").attr("x1",getConfig2().state.padding).attr("y1",getConfig2().state.padding+titleHeight+getConfig2().state.dividerMargin/2).attr("y2",getConfig2().state.padding+titleHeight+getConfig2().state.dividerMargin/2).attr("class","descr-divider"),descrBox=description.node().getBBox(),width3=Math.max(descrBox.width,titleBox.width);return descrLine.attr("x2",width3+3*getConfig2().state.padding),g2.insert("rect",":first-child").attr("x",getConfig2().state.padding).attr("y",getConfig2().state.padding).attr("width",width3+2*getConfig2().state.padding).attr("height",descrBox.height+titleHeight+2*getConfig2().state.padding).attr("rx",getConfig2().state.radius),g2},"drawDescrState"),addTitleAndBox=__name((g2,stateDef,altBkg)=>{const pad3=getConfig2().state.padding,dblPad=2*getConfig2().state.padding,orgBox=g2.node().getBBox(),orgWidth=orgBox.width,orgX=orgBox.x,title2=g2.append("text").attr("x",0).attr("y",getConfig2().state.titleShift).attr("font-size",getConfig2().state.fontSize).attr("class","state-title").text(stateDef.id),titleWidth=title2.node().getBBox().width+dblPad;let startX2,width3=Math.max(titleWidth,orgWidth);width3===orgWidth&&(width3+=dblPad);const graphBox=g2.node().getBBox();stateDef.doc,startX2=orgX-pad3,titleWidth>orgWidth&&(startX2=(orgWidth-width3)/2+pad3),Math.abs(orgX-graphBox.x)<pad3&&titleWidth>orgWidth&&(startX2=orgX-(titleWidth-orgWidth)/2);const lineY=1-getConfig2().state.textHeight;return g2.insert("rect",":first-child").attr("x",startX2).attr("y",lineY).attr("class",altBkg?"alt-composit":"composit").attr("width",width3).attr("height",graphBox.height+getConfig2().state.textHeight+getConfig2().state.titleShift+1).attr("rx","0"),title2.attr("x",startX2+pad3),titleWidth<=orgWidth&&title2.attr("x",orgX+(width3-dblPad)/2-titleWidth/2+pad3),g2.insert("rect",":first-child").attr("x",startX2).attr("y",getConfig2().state.titleShift-getConfig2().state.textHeight-getConfig2().state.padding).attr("width",width3).attr("height",3*getConfig2().state.textHeight).attr("rx",getConfig2().state.radius),g2.insert("rect",":first-child").attr("x",startX2).attr("y",getConfig2().state.titleShift-getConfig2().state.textHeight-getConfig2().state.padding).attr("width",width3).attr("height",graphBox.height+3+2*getConfig2().state.textHeight).attr("rx",getConfig2().state.radius),g2},"addTitleAndBox"),drawEndState=__name(g2=>(g2.append("circle").attr("class","end-state-outer").attr("r",getConfig2().state.sizeUnit+getConfig2().state.miniPadding).attr("cx",getConfig2().state.padding+getConfig2().state.sizeUnit+getConfig2().state.miniPadding).attr("cy",getConfig2().state.padding+getConfig2().state.sizeUnit+getConfig2().state.miniPadding),g2.append("circle").attr("class","end-state-inner").attr("r",getConfig2().state.sizeUnit).attr("cx",getConfig2().state.padding+getConfig2().state.sizeUnit+2).attr("cy",getConfig2().state.padding+getConfig2().state.sizeUnit+2)),"drawEndState"),drawForkJoinState=__name((g2,stateDef)=>{let width3=getConfig2().state.forkWidth,height2=getConfig2().state.forkHeight;if(stateDef.parentId){let tmp=width3;width3=height2,height2=tmp}return g2.append("rect").style("stroke","black").style("fill","black").attr("width",width3).attr("height",height2).attr("x",getConfig2().state.padding).attr("y",getConfig2().state.padding)},"drawForkJoinState"),_drawLongText=__name((_text,x5,y6,g2)=>{let textHeight=0;const textElem=g2.append("text");textElem.style("text-anchor","start"),textElem.attr("class","noteText");let text4=_text.replace(/\r\n/g,"<br/>");text4=text4.replace(/\n/g,"<br/>");const lines=text4.split(common_default.lineBreakRegex);let tHeight=1.25*getConfig2().state.noteMargin;for(const line2 of lines){const txt=line2.trim();if(txt.length>0){const span=textElem.append("tspan");if(span.text(txt),0===tHeight){tHeight+=span.node().getBBox().height}textHeight+=tHeight,span.attr("x",x5+getConfig2().state.noteMargin),span.attr("y",y6+textHeight+1.25*getConfig2().state.noteMargin)}}return{textWidth:textElem.node().getBBox().width,textHeight:textHeight}},"_drawLongText"),drawNote2=__name((text4,g2)=>{g2.attr("class","state-note");const note3=g2.append("rect").attr("x",0).attr("y",getConfig2().state.padding),rectElem=g2.append("g"),{textWidth:textWidth,textHeight:textHeight}=_drawLongText(text4,0,0,rectElem);return note3.attr("height",textHeight+2*getConfig2().state.noteMargin),note3.attr("width",textWidth+2*getConfig2().state.noteMargin),note3},"drawNote"),drawState=__name(function(elem,stateDef){const id30=stateDef.id,stateInfo={id:id30,label:stateDef.id,width:0,height:0},g2=elem.append("g").attr("id",id30).attr("class","stateGroup");"start"===stateDef.type&&drawStartState(g2),"end"===stateDef.type&&drawEndState(g2),"fork"!==stateDef.type&&"join"!==stateDef.type||drawForkJoinState(g2,stateDef),"note"===stateDef.type&&drawNote2(stateDef.note.text,g2),"divider"===stateDef.type&&drawDivider(g2),"default"===stateDef.type&&0===stateDef.descriptions.length&&drawSimpleState(g2,stateDef),"default"===stateDef.type&&stateDef.descriptions.length>0&&drawDescrState(g2,stateDef);const stateBox=g2.node().getBBox();return stateInfo.width=stateBox.width+2*getConfig2().state.padding,stateInfo.height=stateBox.height+2*getConfig2().state.padding,stateInfo},"drawState"),edgeCount=0,drawEdge=__name(function(elem,path4,relation){const getRelationType=__name(function(type3){switch(type3){case StateDB.relationType.AGGREGATION:return"aggregation";case StateDB.relationType.EXTENSION:return"extension";case StateDB.relationType.COMPOSITION:return"composition";case StateDB.relationType.DEPENDENCY:return"dependency"}},"getRelationType");path4.points=path4.points.filter(p3=>!Number.isNaN(p3.y));const lineData=path4.points,lineFunction=line_default().x(function(d3){return d3.x}).y(function(d3){return d3.y}).curve(basis_default2),svgPath=elem.append("path").attr("d",lineFunction(lineData)).attr("id","edge"+edgeCount).attr("class","transition");let url="";if(getConfig2().state.arrowMarkerAbsolute&&(url=getUrl(!0)),svgPath.attr("marker-end","url("+url+"#"+getRelationType(StateDB.relationType.DEPENDENCY)+"End)"),void 0!==relation.title){const label=elem.append("g").attr("class","stateLabel"),{x:x5,y:y6}=utils_default2.calcLabelPosition(path4.points),rows=common_default.getRows(relation.title);let titleHeight=0;const titleRows=[];let maxWidth2=0,minX=0;for(let i2=0;i2<=rows.length;i2++){const title2=label.append("text").attr("text-anchor","middle").text(rows[i2]).attr("x",x5).attr("y",y6+titleHeight),boundsTmp=title2.node().getBBox();if(maxWidth2=Math.max(maxWidth2,boundsTmp.width),minX=Math.min(minX,boundsTmp.x),log.info(boundsTmp.x,x5,y6+titleHeight),0===titleHeight){const titleBox=title2.node().getBBox();titleHeight=titleBox.height,log.info("Title height",titleHeight,y6)}titleRows.push(title2)}let boxHeight=titleHeight*rows.length;if(rows.length>1){const heightAdj=(rows.length-1)*titleHeight*.5;titleRows.forEach((title2,i2)=>title2.attr("y",y6+i2*titleHeight-heightAdj)),boxHeight=titleHeight*rows.length}const bounds4=label.node().getBBox();label.insert("rect",":first-child").attr("class","box").attr("x",x5-maxWidth2/2-getConfig2().state.padding/2).attr("y",y6-boxHeight/2-getConfig2().state.padding/2-3.5).attr("width",maxWidth2+getConfig2().state.padding).attr("height",boxHeight+getConfig2().state.padding),log.info(bounds4)}edgeCount++},"drawEdge")}}),init_stateRenderer=__esm({"src/diagrams/state/stateRenderer.js"(){init_src32(),init_dagre(),init_graphlib(),init_logger(),init_common(),init_shapes2(),init_diagramAPI(),init_setupGraphViewbox(),transformationLog={},setConf4=__name(function(){},"setConf"),insertMarkers2=__name(function(elem){elem.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),draw14=__name(function(text4,id30,_version,diagObj){conf3=getConfig2().state;const securityLevel=getConfig2().securityLevel;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body"),doc="sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument:document;log.debug("Rendering diagram "+text4);const diagram27=root3.select(`[id='${id30}']`);insertMarkers2(diagram27);const rootDoc=diagObj.db.getRootDoc();renderDoc(rootDoc,diagram27,void 0,!1,root3,doc,diagObj);const padding2=conf3.padding,bounds4=diagram27.node().getBBox(),width3=bounds4.width+2*padding2,height2=bounds4.height+2*padding2;configureSvgSize(diagram27,height2,1.75*width3,conf3.useMaxWidth),diagram27.attr("viewBox",`${bounds4.x-conf3.padding}  ${bounds4.y-conf3.padding} `+width3+" "+height2)},"draw"),getLabelWidth=__name(text4=>text4?text4.length*conf3.fontSizeFactor:1,"getLabelWidth"),renderDoc=__name((doc,diagram27,parentId,altBkg,root3,domDocument,diagObj)=>{const graph=new Graph({compound:!0,multigraph:!0});let i2,edgeFreeDoc=!0;for(i2=0;i2<doc.length;i2++)if("relation"===doc[i2].stmt){edgeFreeDoc=!1;break}parentId?graph.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:edgeFreeDoc?1:conf3.edgeLengthFactor,nodeSep:edgeFreeDoc?1:50,isMultiGraph:!0}):graph.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:edgeFreeDoc?1:conf3.edgeLengthFactor,nodeSep:edgeFreeDoc?1:50,ranker:"tight-tree",isMultiGraph:!0}),graph.setDefaultEdgeLabel(function(){return{}});const states=diagObj.db.getStates(),relations=diagObj.db.getRelations(),keys2=Object.keys(states);for(const key of keys2){const stateDef=states[key];let node2;if(parentId&&(stateDef.parentId=parentId),stateDef.doc){let sub2=diagram27.append("g").attr("id",stateDef.id).attr("class","stateGroup");node2=renderDoc(stateDef.doc,sub2,stateDef.id,!altBkg,root3,domDocument,diagObj);{sub2=addTitleAndBox(sub2,stateDef,altBkg);let boxBounds=sub2.node().getBBox();node2.width=boxBounds.width,node2.height=boxBounds.height+conf3.padding/2,transformationLog[stateDef.id]={y:conf3.compositTitleSize}}}else node2=drawState(diagram27,stateDef,graph);if(stateDef.note){const noteDef={descriptions:[],id:stateDef.id+"-note",note:stateDef.note,type:"note"},note3=drawState(diagram27,noteDef,graph);"left of"===stateDef.note.position?(graph.setNode(node2.id+"-note",note3),graph.setNode(node2.id,node2)):(graph.setNode(node2.id,node2),graph.setNode(node2.id+"-note",note3)),graph.setParent(node2.id,node2.id+"-group"),graph.setParent(node2.id+"-note",node2.id+"-group")}else graph.setNode(node2.id,node2)}log.debug("Count=",graph.nodeCount(),graph);let cnt4=0;relations.forEach(function(relation){cnt4++,log.debug("Setting edge",relation),graph.setEdge(relation.id1,relation.id2,{relation:relation,width:getLabelWidth(relation.title),height:conf3.labelHeight*common_default.getRows(relation.title).length,labelpos:"c"},"id"+cnt4)}),layout(graph),log.debug("Graph after layout",graph.nodes());const svgElem=diagram27.node();graph.nodes().forEach(function(v3){if(void 0!==v3&&void 0!==graph.node(v3)){log.warn("Node "+v3+": "+JSON.stringify(graph.node(v3))),root3.select("#"+svgElem.id+" #"+v3).attr("transform","translate("+(graph.node(v3).x-graph.node(v3).width/2)+","+(graph.node(v3).y+(transformationLog[v3]?transformationLog[v3].y:0)-graph.node(v3).height/2)+" )"),root3.select("#"+svgElem.id+" #"+v3).attr("data-x-shift",graph.node(v3).x-graph.node(v3).width/2);domDocument.querySelectorAll("#"+svgElem.id+" #"+v3+" .divider").forEach(divider2=>{const parent4=divider2.parentElement;let pWidth=0,pShift=0;parent4&&(parent4.parentElement&&(pWidth=parent4.parentElement.getBBox().width),pShift=parseInt(parent4.getAttribute("data-x-shift"),10),Number.isNaN(pShift)&&(pShift=0)),divider2.setAttribute("x1",0-pShift+8),divider2.setAttribute("x2",pWidth-pShift-8)})}else log.debug("No Node "+v3+": "+JSON.stringify(graph.node(v3)))});let stateBox=svgElem.getBBox();graph.edges().forEach(function(e3){void 0!==e3&&void 0!==graph.edge(e3)&&(log.debug("Edge "+e3.v+" -> "+e3.w+": "+JSON.stringify(graph.edge(e3))),drawEdge(diagram27,graph.edge(e3),graph.edge(e3).relation))}),stateBox=svgElem.getBBox();const stateInfo={id:parentId||"root",label:parentId||"root",width:0,height:0};return stateInfo.width=stateBox.width+2*conf3.padding,stateInfo.height=stateBox.height+2*conf3.padding,log.debug("Doc rendered",stateInfo,graph),stateInfo},"renderDoc"),stateRenderer_default={setConf:setConf4,draw:draw14}}}),stateDiagram_exports={};__export(stateDiagram_exports,{diagram:()=>diagram14});var diagram15,init_stateDiagram2=__esm({"src/diagrams/state/stateDiagram.ts"(){init_stateDiagram(),init_stateDb(),init_styles10(),init_stateRenderer(),diagram14={parser:stateDiagram_default,get db(){return new StateDB(1)},renderer:stateRenderer_default,styles:styles_default10,init:__name(cnf=>{cnf.state||(cnf.state={}),cnf.state.arrowMarkerAbsolute=cnf.arrowMarkerAbsolute},"init")}}}),stateDiagram_v2_exports={};__export(stateDiagram_v2_exports,{diagram:()=>diagram15});var parser14,journey_default,currentSection2,sections3,tasks2,rawTasks2,clear13,addSection3,getSections3,getTasks2,updateActors,addTask2,addTaskOrg2,compileTasks2,getActors,journeyDb_default,styles_default11,drawRect5,drawFace,drawCircle,drawText4,drawLabel2,drawSection,taskCount,drawTask,drawBackgroundRect3,_drawTextCandidateFunc3,svgDraw_default3,setConf5,actors,maxWidth,conf4,leftMargin,draw15,bounds3,fills,textColours,drawTasks,journeyRenderer_default,init_stateDiagram_v2=__esm({"src/diagrams/state/stateDiagram-v2.ts"(){init_stateDiagram(),init_stateDb(),init_styles10(),init_stateRenderer_v3_unified(),diagram15={parser:stateDiagram_default,get db(){return new StateDB(2)},renderer:stateRenderer_v3_unified_default,styles:styles_default10,init:__name(cnf=>{cnf.state||(cnf.state={}),cnf.state.arrowMarkerAbsolute=cnf.arrowMarkerAbsolute},"init")}}}),init_journey=__esm({"src/diagrams/user-journey/parser/journey.jison"(){parser14=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[6,8,10,11,12,14,16,17,18],$V1=[1,9],$V2=[1,10],$V3=[1,11],$V4=[1,12],$V5=[1,13],$V6=[1,14],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:case 6:case 7:this.$=[];break;case 3:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 4:case 5:this.$=$$[$0];break;case 8:yy.setDiagramTitle($$[$0].substr(6)),this.$=$$[$0].substr(6);break;case 9:this.$=$$[$0].trim(),yy.setAccTitle(this.$);break;case 10:case 11:this.$=$$[$0].trim(),yy.setAccDescription(this.$);break;case 12:yy.addSection($$[$0].substr(8)),this.$=$$[$0].substr(8);break;case 13:yy.addTask($$[$0-1],$$[$0]),this.$="task"}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},o2($V0,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:$V1,12:$V2,14:$V3,16:$V4,17:$V5,18:$V6},o2($V0,[2,7],{1:[2,1]}),o2($V0,[2,3]),{9:15,11:$V1,12:$V2,14:$V3,16:$V4,17:$V5,18:$V6},o2($V0,[2,5]),o2($V0,[2,6]),o2($V0,[2,8]),{13:[1,16]},{15:[1,17]},o2($V0,[2,11]),o2($V0,[2,12]),{19:[1,18]},o2($V0,[2,4]),o2($V0,[2,9]),o2($V0,[2,10]),o2($V0,[2,13])],defaultActions:{},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser14.parser=parser14,journey_default=parser14}}),init_journeyDb=__esm({"src/diagrams/user-journey/journeyDb.js"(){init_diagramAPI(),init_commonDb(),currentSection2="",sections3=[],tasks2=[],rawTasks2=[],clear13=__name(function(){sections3.length=0,tasks2.length=0,currentSection2="",rawTasks2.length=0,clear()},"clear"),addSection3=__name(function(txt){currentSection2=txt,sections3.push(txt)},"addSection"),getSections3=__name(function(){return sections3},"getSections"),getTasks2=__name(function(){let allItemsProcessed=compileTasks2();let iterationCount=0;for(;!allItemsProcessed&&iterationCount<100;)allItemsProcessed=compileTasks2(),iterationCount++;return tasks2.push(...rawTasks2),tasks2},"getTasks"),updateActors=__name(function(){const tempActors=[];tasks2.forEach(task=>{task.people&&tempActors.push(...task.people)});return[...new Set(tempActors)].sort()},"updateActors"),addTask2=__name(function(descr,taskData){const pieces=taskData.substr(1).split(":");let score=0,peeps=[];1===pieces.length?(score=Number(pieces[0]),peeps=[]):(score=Number(pieces[0]),peeps=pieces[1].split(","));const peopleList=peeps.map(s2=>s2.trim()),rawTask={section:currentSection2,type:currentSection2,people:peopleList,task:descr,score:score};rawTasks2.push(rawTask)},"addTask"),addTaskOrg2=__name(function(descr){const newTask={section:currentSection2,type:currentSection2,description:descr,task:descr,classes:[]};tasks2.push(newTask)},"addTaskOrg"),compileTasks2=__name(function(){const compileTask=__name(function(pos){return rawTasks2[pos].processed},"compileTask");let allProcessed=!0;for(const[i2,rawTask]of rawTasks2.entries())compileTask(i2),allProcessed=allProcessed&&rawTask.processed;return allProcessed},"compileTasks"),getActors=__name(function(){return updateActors()},"getActors"),journeyDb_default={getConfig:__name(()=>getConfig2().journey,"getConfig"),clear:clear13,setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle,setAccTitle:setAccTitle,getAccTitle:getAccTitle,setAccDescription:setAccDescription,getAccDescription:getAccDescription,addSection:addSection3,getSections:getSections3,getTasks:getTasks2,addTask:addTask2,addTaskOrg:addTaskOrg2,getActors:getActors}}}),init_styles11=__esm({"src/diagrams/user-journey/styles.js"(){init_globalStyles(),styles_default11=__name(options2=>`.label {\n    font-family: ${options2.fontFamily};\n    color: ${options2.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${options2.textColor}\n  }\n\n  .legend {\n    fill: ${options2.textColor};\n    font-family: ${options2.fontFamily};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${options2.textColor}\n  }\n\n  .face {\n    ${options2.faceColor?`fill: ${options2.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options2.mainBkg};\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options2.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options2.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${options2.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options2.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${options2.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${options2.fontFamily};\n    font-size: 12px;\n    background: ${options2.tertiaryColor};\n    border: 1px solid ${options2.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${options2.fillType0?`fill: ${options2.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${options2.fillType0?`fill: ${options2.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${options2.fillType0?`fill: ${options2.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${options2.fillType0?`fill: ${options2.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${options2.fillType0?`fill: ${options2.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${options2.fillType0?`fill: ${options2.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${options2.fillType0?`fill: ${options2.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${options2.fillType0?`fill: ${options2.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${options2.actor0?`fill: ${options2.actor0}`:""};\n  }\n  .actor-1 {\n    ${options2.actor1?`fill: ${options2.actor1}`:""};\n  }\n  .actor-2 {\n    ${options2.actor2?`fill: ${options2.actor2}`:""};\n  }\n  .actor-3 {\n    ${options2.actor3?`fill: ${options2.actor3}`:""};\n  }\n  .actor-4 {\n    ${options2.actor4?`fill: ${options2.actor4}`:""};\n  }\n  .actor-5 {\n    ${options2.actor5?`fill: ${options2.actor5}`:""};\n  }\n  ${getIconStyles()}\n`,"getStyles")}}),init_svgDraw3=__esm({"src/diagrams/user-journey/svgDraw.js"(){init_src32(),init_svgDrawCommon(),drawRect5=__name(function(elem,rectData){return drawRect(elem,rectData)},"drawRect"),drawFace=__name(function(element3,faceData){const circleElement=element3.append("circle").attr("cx",faceData.cx).attr("cy",faceData.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),face=element3.append("g");function smile(face2){const arc=arc_default().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(15/2.2);face2.append("path").attr("class","mouth").attr("d",arc).attr("transform","translate("+faceData.cx+","+(faceData.cy+2)+")")}function sad(face2){const arc=arc_default().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(15/2.2);face2.append("path").attr("class","mouth").attr("d",arc).attr("transform","translate("+faceData.cx+","+(faceData.cy+7)+")")}function ambivalent(face2){face2.append("line").attr("class","mouth").attr("stroke",2).attr("x1",faceData.cx-5).attr("y1",faceData.cy+7).attr("x2",faceData.cx+5).attr("y2",faceData.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return face.append("circle").attr("cx",faceData.cx-5).attr("cy",faceData.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),face.append("circle").attr("cx",faceData.cx+5).attr("cy",faceData.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),__name(smile,"smile"),__name(sad,"sad"),__name(ambivalent,"ambivalent"),faceData.score>3?smile(face):faceData.score<3?sad(face):ambivalent(face),circleElement},"drawFace"),drawCircle=__name(function(element3,circleData){const circleElement=element3.append("circle");return circleElement.attr("cx",circleData.cx),circleElement.attr("cy",circleData.cy),circleElement.attr("class","actor-"+circleData.pos),circleElement.attr("fill",circleData.fill),circleElement.attr("stroke",circleData.stroke),circleElement.attr("r",circleData.r),void 0!==circleElement.class&&circleElement.attr("class",circleElement.class),void 0!==circleData.title&&circleElement.append("title").text(circleData.title),circleElement},"drawCircle"),drawText4=__name(function(elem,textData){return drawText(elem,textData)},"drawText"),drawLabel2=__name(function(elem,txtObject){function genPoints(x5,y6,width3,height2,cut){return x5+","+y6+" "+(x5+width3)+","+y6+" "+(x5+width3)+","+(y6+height2-cut)+" "+(x5+width3-1.2*cut)+","+(y6+height2)+" "+x5+","+(y6+height2)}__name(genPoints,"genPoints");const polygon2=elem.append("polygon");polygon2.attr("points",genPoints(txtObject.x,txtObject.y,50,20,7)),polygon2.attr("class","labelBox"),txtObject.y=txtObject.y+txtObject.labelMargin,txtObject.x=txtObject.x+.5*txtObject.labelMargin,drawText4(elem,txtObject)},"drawLabel"),drawSection=__name(function(elem,section,conf5){const g2=elem.append("g"),rect3=getNoteRect();rect3.x=section.x,rect3.y=section.y,rect3.fill=section.fill,rect3.width=conf5.width*section.taskCount+conf5.diagramMarginX*(section.taskCount-1),rect3.height=conf5.height,rect3.class="journey-section section-type-"+section.num,rect3.rx=3,rect3.ry=3,drawRect5(g2,rect3),_drawTextCandidateFunc3(conf5)(section.text,g2,rect3.x,rect3.y,rect3.width,rect3.height,{class:"journey-section section-type-"+section.num},conf5,section.colour)},"drawSection"),taskCount=-1,drawTask=__name(function(elem,task,conf5){const center4=task.x+conf5.width/2,g2=elem.append("g");taskCount++;g2.append("line").attr("id","task"+taskCount).attr("x1",center4).attr("y1",task.y).attr("x2",center4).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),drawFace(g2,{cx:center4,cy:300+30*(5-task.score),score:task.score});const rect3=getNoteRect();rect3.x=task.x,rect3.y=task.y,rect3.fill=task.fill,rect3.width=conf5.width,rect3.height=conf5.height,rect3.class="task task-type-"+task.num,rect3.rx=3,rect3.ry=3,drawRect5(g2,rect3);let xPos=task.x+14;task.people.forEach(person=>{const colour=task.actors[person].color,circle6={cx:xPos,cy:task.y,r:7,fill:colour,stroke:"#000",title:person,pos:task.actors[person].position};drawCircle(g2,circle6),xPos+=10}),_drawTextCandidateFunc3(conf5)(task.task,g2,rect3.x,rect3.y,rect3.width,rect3.height,{class:"task"},conf5,task.colour)},"drawTask"),drawBackgroundRect3=__name(function(elem,bounds4){drawBackgroundRect(elem,bounds4)},"drawBackgroundRect"),_drawTextCandidateFunc3=function(){function byText(content,g2,x5,y6,width3,height2,textAttrs,colour){_setTextAttrs(g2.append("text").attr("x",x5+width3/2).attr("y",y6+height2/2+5).style("font-color",colour).style("text-anchor","middle").text(content),textAttrs)}function byTspan(content,g2,x5,y6,width3,height2,textAttrs,conf5,colour){const{taskFontSize:taskFontSize,taskFontFamily:taskFontFamily}=conf5,lines=content.split(/<br\s*\/?>/gi);for(let i2=0;i2<lines.length;i2++){const dy=i2*taskFontSize-taskFontSize*(lines.length-1)/2,text4=g2.append("text").attr("x",x5+width3/2).attr("y",y6).attr("fill",colour).style("text-anchor","middle").style("font-size",taskFontSize).style("font-family",taskFontFamily);text4.append("tspan").attr("x",x5+width3/2).attr("dy",dy).text(lines[i2]),text4.attr("y",y6+height2/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),_setTextAttrs(text4,textAttrs)}}function byFo(content,g2,x5,y6,width3,height2,textAttrs,conf5){const body=g2.append("switch"),text4=body.append("foreignObject").attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");text4.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(content),byTspan(content,body,x5,y6,width3,height2,textAttrs,conf5),_setTextAttrs(text4,textAttrs)}function _setTextAttrs(toText,fromTextAttrsDict){for(const key in fromTextAttrsDict)key in fromTextAttrsDict&&toText.attr(key,fromTextAttrsDict[key])}return __name(byText,"byText"),__name(byTspan,"byTspan"),__name(byFo,"byFo"),__name(_setTextAttrs,"_setTextAttrs"),function(conf5){return"fo"===conf5.textPlacement?byFo:"old"===conf5.textPlacement?byText:byTspan}}(),svgDraw_default3={drawRect:drawRect5,drawCircle:drawCircle,drawSection:drawSection,drawText:drawText4,drawLabel:drawLabel2,drawTask:drawTask,drawBackgroundRect:drawBackgroundRect3,initGraphics:__name(function(graphics){graphics.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics")}}});function drawActorLegend(diagram27){const conf5=getConfig2().journey,maxLabelWidth=conf5.maxLabelWidth;maxWidth=0;let yPos=60;Object.keys(actors).forEach(person=>{const colour=actors[person].color,circleData={cx:20,cy:yPos,r:7,fill:colour,stroke:"#000",pos:actors[person].position};svgDraw_default3.drawCircle(diagram27,circleData);let measureText=diagram27.append("text").attr("visibility","hidden").text(person);const fullTextWidth=measureText.node().getBoundingClientRect().width;measureText.remove();let lines=[];if(fullTextWidth<=maxLabelWidth)lines=[person];else{const words=person.split(" ");let currentLine="";measureText=diagram27.append("text").attr("visibility","hidden"),words.forEach(word=>{const testLine=currentLine?`${currentLine} ${word}`:word;measureText.text(testLine);if(measureText.node().getBoundingClientRect().width>maxLabelWidth){if(currentLine&&lines.push(currentLine),currentLine=word,measureText.text(word),measureText.node().getBoundingClientRect().width>maxLabelWidth){let brokenWord="";for(const char2 of word)brokenWord+=char2,measureText.text(brokenWord+"-"),measureText.node().getBoundingClientRect().width>maxLabelWidth&&(lines.push(brokenWord.slice(0,-1)+"-"),brokenWord=char2);currentLine=brokenWord}}else currentLine=testLine}),currentLine&&lines.push(currentLine),measureText.remove()}lines.forEach((line2,index)=>{const labelData={x:40,y:yPos+7+20*index,fill:"#666",text:line2,textMargin:conf5.boxTextMargin??5},lineWidth=svgDraw_default3.drawText(diagram27,labelData).node().getBoundingClientRect().width;lineWidth>maxWidth&&lineWidth>conf5.leftMargin-lineWidth&&(maxWidth=lineWidth)}),yPos+=Math.max(20,20*lines.length)})}var diagram16,init_journeyRenderer=__esm({"src/diagrams/user-journey/journeyRenderer.ts"(){init_src32(),init_svgDraw3(),init_diagramAPI(),init_setupGraphViewbox(),setConf5=__name(function(cnf){Object.keys(cnf).forEach(function(key){conf4[key]=cnf[key]})},"setConf"),actors={},maxWidth=0,__name(drawActorLegend,"drawActorLegend"),conf4=getConfig2().journey,leftMargin=0,draw15=__name(function(text4,id30,version3,diagObj){const configObject=getConfig2(),titleColor=configObject.journey.titleColor,titleFontSize=configObject.journey.titleFontSize,titleFontFamily=configObject.journey.titleFontFamily,securityLevel=configObject.securityLevel;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body");bounds3.init();const diagram27=root3.select("#"+id30);svgDraw_default3.initGraphics(diagram27);const tasks4=diagObj.db.getTasks(),title2=diagObj.db.getDiagramTitle(),actorNames=diagObj.db.getActors();for(const member in actors)delete actors[member];let actorPos=0;actorNames.forEach(actorName=>{actors[actorName]={color:conf4.actorColours[actorPos%conf4.actorColours.length],position:actorPos},actorPos++}),drawActorLegend(diagram27),leftMargin=conf4.leftMargin+maxWidth,bounds3.insert(0,0,leftMargin,50*Object.keys(actors).length),drawTasks(diagram27,tasks4,0);const box=bounds3.getBounds();title2&&diagram27.append("text").text(title2).attr("x",leftMargin).attr("font-size",titleFontSize).attr("font-weight","bold").attr("y",25).attr("fill",titleColor).attr("font-family",titleFontFamily);const height2=box.stopy-box.starty+2*conf4.diagramMarginY,width3=leftMargin+box.stopx+2*conf4.diagramMarginX;configureSvgSize(diagram27,height2,width3,conf4.useMaxWidth),diagram27.append("line").attr("x1",leftMargin).attr("y1",4*conf4.height).attr("x2",width3-leftMargin-4).attr("y2",4*conf4.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const extraVertForTitle=title2?70:0;diagram27.attr("viewBox",`${box.startx} -25 ${width3} ${height2+extraVertForTitle}`),diagram27.attr("preserveAspectRatio","xMinYMin meet"),diagram27.attr("height",height2+extraVertForTitle+25)},"draw"),bounds3={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:__name(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:__name(function(obj,key,val,fun){void 0===obj[key]?obj[key]=val:obj[key]=fun(val,obj[key])},"updateVal"),updateBounds:__name(function(startx,starty,stopx,stopy){const conf5=getConfig2().journey,_self=this;let cnt4=0;function updateFn(type3){return __name(function(item){cnt4++;const n2=_self.sequenceItems.length-cnt4+1;_self.updateVal(item,"starty",starty-n2*conf5.boxMargin,Math.min),_self.updateVal(item,"stopy",stopy+n2*conf5.boxMargin,Math.max),_self.updateVal(bounds3.data,"startx",startx-n2*conf5.boxMargin,Math.min),_self.updateVal(bounds3.data,"stopx",stopx+n2*conf5.boxMargin,Math.max),"activation"!==type3&&(_self.updateVal(item,"startx",startx-n2*conf5.boxMargin,Math.min),_self.updateVal(item,"stopx",stopx+n2*conf5.boxMargin,Math.max),_self.updateVal(bounds3.data,"starty",starty-n2*conf5.boxMargin,Math.min),_self.updateVal(bounds3.data,"stopy",stopy+n2*conf5.boxMargin,Math.max))},"updateItemBounds")}__name(updateFn,"updateFn"),this.sequenceItems.forEach(updateFn())},"updateBounds"),insert:__name(function(startx,starty,stopx,stopy){const _startx=Math.min(startx,stopx),_stopx=Math.max(startx,stopx),_starty=Math.min(starty,stopy),_stopy=Math.max(starty,stopy);this.updateVal(bounds3.data,"startx",_startx,Math.min),this.updateVal(bounds3.data,"starty",_starty,Math.min),this.updateVal(bounds3.data,"stopx",_stopx,Math.max),this.updateVal(bounds3.data,"stopy",_stopy,Math.max),this.updateBounds(_startx,_starty,_stopx,_stopy)},"insert"),bumpVerticalPos:__name(function(bump){this.verticalPos=this.verticalPos+bump,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:__name(function(){return this.verticalPos},"getVerticalPos"),getBounds:__name(function(){return this.data},"getBounds")},fills=conf4.sectionFills,textColours=conf4.sectionColours,drawTasks=__name(function(diagram27,tasks4,verticalPos){const conf5=getConfig2().journey;let lastSection="";const taskPos=verticalPos+(2*conf5.height+conf5.diagramMarginY);let sectionNumber=0,fill="#CCC",colour="black",num=0;for(const[i2,task]of tasks4.entries()){if(lastSection!==task.section){fill=fills[sectionNumber%fills.length],num=sectionNumber%fills.length,colour=textColours[sectionNumber%textColours.length];let taskInSectionCount=0;const currentSection4=task.section;for(let taskIndex=i2;taskIndex<tasks4.length&&tasks4[taskIndex].section==currentSection4;taskIndex++)taskInSectionCount+=1;const section={x:i2*conf5.taskMargin+i2*conf5.width+leftMargin,y:50,text:task.section,fill:fill,num:num,colour:colour,taskCount:taskInSectionCount};svgDraw_default3.drawSection(diagram27,section,conf5),lastSection=task.section,sectionNumber++}const taskActors=task.people.reduce((acc,actorName)=>(actors[actorName]&&(acc[actorName]=actors[actorName]),acc),{});task.x=i2*conf5.taskMargin+i2*conf5.width+leftMargin,task.y=taskPos,task.width=conf5.diagramMarginX,task.height=conf5.diagramMarginY,task.colour=colour,task.fill=fill,task.num=num,task.actors=taskActors,svgDraw_default3.drawTask(diagram27,task,conf5),bounds3.insert(task.x,task.y,task.x+task.width+conf5.taskMargin,450)}},"drawTasks"),journeyRenderer_default={setConf:setConf5,draw:draw15}}}),journeyDiagram_exports={};__export(journeyDiagram_exports,{diagram:()=>diagram16});var parser15,timeline_default,currentSection3,currentTaskId,sections4,tasks3,rawTasks3,getCommonDb2,clear14,addSection4,getSections4,getTasks3,addTask3,addEvent,addTaskOrg3,compileTasks3,timelineDb_default,init_journeyDiagram=__esm({"src/diagrams/user-journey/journeyDiagram.ts"(){init_journey(),init_journeyDb(),init_styles11(),init_journeyRenderer(),diagram16={parser:journey_default,db:journeyDb_default,renderer:journeyRenderer_default,styles:styles_default11,init:__name(cnf=>{journeyRenderer_default.setConf(cnf.journey),journeyDb_default.clear()},"init")}}}),init_timeline=__esm({"src/diagrams/timeline/parser/timeline.jison"(){parser15=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[6,8,10,11,12,14,16,17,20,21],$V1=[1,9],$V2=[1,10],$V3=[1,11],$V4=[1,12],$V5=[1,13],$V6=[1,16],$V7=[1,17],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:case 6:case 7:this.$=[];break;case 3:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 4:case 5:this.$=$$[$0];break;case 8:yy.getCommonDb().setDiagramTitle($$[$0].substr(6)),this.$=$$[$0].substr(6);break;case 9:this.$=$$[$0].trim(),yy.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=$$[$0].trim(),yy.getCommonDb().setAccDescription(this.$);break;case 12:yy.addSection($$[$0].substr(8)),this.$=$$[$0].substr(8);break;case 15:yy.addTask($$[$0],0,""),this.$=$$[$0];break;case 16:yy.addEvent($$[$0].substr(2)),this.$=$$[$0]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},o2($V0,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:$V1,12:$V2,14:$V3,16:$V4,17:$V5,18:14,19:15,20:$V6,21:$V7},o2($V0,[2,7],{1:[2,1]}),o2($V0,[2,3]),{9:18,11:$V1,12:$V2,14:$V3,16:$V4,17:$V5,18:14,19:15,20:$V6,21:$V7},o2($V0,[2,5]),o2($V0,[2,6]),o2($V0,[2,8]),{13:[1,19]},{15:[1,20]},o2($V0,[2,11]),o2($V0,[2,12]),o2($V0,[2,13]),o2($V0,[2,14]),o2($V0,[2,15]),o2($V0,[2,16]),o2($V0,[2,4]),o2($V0,[2,9]),o2($V0,[2,10])],defaultActions:{},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s(?:[^:\n]|:(?!\s))+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser15.parser=parser15,timeline_default=parser15}}),timelineDb_exports={};__export(timelineDb_exports,{addEvent:()=>addEvent,addSection:()=>addSection4,addTask:()=>addTask3,addTaskOrg:()=>addTaskOrg3,clear:()=>clear14,default:()=>timelineDb_default,getCommonDb:()=>getCommonDb2,getSections:()=>getSections4,getTasks:()=>getTasks3});var drawRect6,drawFace2,drawCircle2,drawText5,drawLabel3,drawSection2,taskCount2,drawTask2,drawBackgroundRect4,getTextObj4,getNoteRect3,_drawTextCandidateFunc4,initGraphics2,drawNode,getVirtualNodeHeight,defaultBkg,svgDraw_default4,init_timelineDb=__esm({"src/diagrams/timeline/timelineDb.js"(){init_commonDb(),currentSection3="",currentTaskId=0,sections4=[],tasks3=[],rawTasks3=[],getCommonDb2=__name(()=>commonDb_exports,"getCommonDb"),clear14=__name(function(){sections4.length=0,tasks3.length=0,currentSection3="",rawTasks3.length=0,clear()},"clear"),addSection4=__name(function(txt){currentSection3=txt,sections4.push(txt)},"addSection"),getSections4=__name(function(){return sections4},"getSections"),getTasks3=__name(function(){let allItemsProcessed=compileTasks3();let iterationCount=0;for(;!allItemsProcessed&&iterationCount<100;)allItemsProcessed=compileTasks3(),iterationCount++;return tasks3.push(...rawTasks3),tasks3},"getTasks"),addTask3=__name(function(period,length2,event3){const rawTask={id:currentTaskId++,section:currentSection3,type:currentSection3,task:period,score:length2||0,events:event3?[event3]:[]};rawTasks3.push(rawTask)},"addTask"),addEvent=__name(function(event3){rawTasks3.find(task=>task.id===currentTaskId-1).events.push(event3)},"addEvent"),addTaskOrg3=__name(function(descr){const newTask={section:currentSection3,type:currentSection3,description:descr,task:descr,classes:[]};tasks3.push(newTask)},"addTaskOrg"),compileTasks3=__name(function(){const compileTask=__name(function(pos){return rawTasks3[pos].processed},"compileTask");let allProcessed=!0;for(const[i2,rawTask]of rawTasks3.entries())compileTask(i2),allProcessed=allProcessed&&rawTask.processed;return allProcessed},"compileTasks"),timelineDb_default={clear:clear14,getCommonDb:getCommonDb2,addSection:addSection4,getSections:getSections4,getTasks:getTasks3,addTask:addTask3,addTaskOrg:addTaskOrg3,addEvent:addEvent}}});function wrap2(text4,width3){text4.each(function(){var word,text5=select_default2(this),words=text5.text().split(/(\s+|<br>)/).reverse(),line2=[],y6=text5.attr("y"),dy=parseFloat(text5.attr("dy")),tspan=text5.text(null).append("tspan").attr("x",0).attr("y",y6).attr("dy",dy+"em");for(let j3=0;j3<words.length;j3++)word=words[words.length-1-j3],line2.push(word),tspan.text(line2.join(" ").trim()),(tspan.node().getComputedTextLength()>width3||"<br>"===word)&&(line2.pop(),tspan.text(line2.join(" ").trim()),line2="<br>"===word?[""]:[word],tspan=text5.append("tspan").attr("x",0).attr("y",y6).attr("dy","1.1em").text(word))})}var draw17,drawTasks2,drawEvents,timelineRenderer_default,genSections,styles_default12,diagram18,init_svgDraw4=__esm({"src/diagrams/timeline/svgDraw.js"(){init_src32(),drawRect6=__name(function(elem,rectData){const rectElem=elem.append("rect");return rectElem.attr("x",rectData.x),rectElem.attr("y",rectData.y),rectElem.attr("fill",rectData.fill),rectElem.attr("stroke",rectData.stroke),rectElem.attr("width",rectData.width),rectElem.attr("height",rectData.height),rectElem.attr("rx",rectData.rx),rectElem.attr("ry",rectData.ry),void 0!==rectData.class&&rectElem.attr("class",rectData.class),rectElem},"drawRect"),drawFace2=__name(function(element3,faceData){const circleElement=element3.append("circle").attr("cx",faceData.cx).attr("cy",faceData.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),face=element3.append("g");function smile(face2){const arc=arc_default().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(15/2.2);face2.append("path").attr("class","mouth").attr("d",arc).attr("transform","translate("+faceData.cx+","+(faceData.cy+2)+")")}function sad(face2){const arc=arc_default().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(15/2.2);face2.append("path").attr("class","mouth").attr("d",arc).attr("transform","translate("+faceData.cx+","+(faceData.cy+7)+")")}function ambivalent(face2){face2.append("line").attr("class","mouth").attr("stroke",2).attr("x1",faceData.cx-5).attr("y1",faceData.cy+7).attr("x2",faceData.cx+5).attr("y2",faceData.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return face.append("circle").attr("cx",faceData.cx-5).attr("cy",faceData.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),face.append("circle").attr("cx",faceData.cx+5).attr("cy",faceData.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),__name(smile,"smile"),__name(sad,"sad"),__name(ambivalent,"ambivalent"),faceData.score>3?smile(face):faceData.score<3?sad(face):ambivalent(face),circleElement},"drawFace"),drawCircle2=__name(function(element3,circleData){const circleElement=element3.append("circle");return circleElement.attr("cx",circleData.cx),circleElement.attr("cy",circleData.cy),circleElement.attr("class","actor-"+circleData.pos),circleElement.attr("fill",circleData.fill),circleElement.attr("stroke",circleData.stroke),circleElement.attr("r",circleData.r),void 0!==circleElement.class&&circleElement.attr("class",circleElement.class),void 0!==circleData.title&&circleElement.append("title").text(circleData.title),circleElement},"drawCircle"),drawText5=__name(function(elem,textData){const nText=textData.text.replace(/<br\s*\/?>/gi," "),textElem=elem.append("text");textElem.attr("x",textData.x),textElem.attr("y",textData.y),textElem.attr("class","legend"),textElem.style("text-anchor",textData.anchor),void 0!==textData.class&&textElem.attr("class",textData.class);const span=textElem.append("tspan");return span.attr("x",textData.x+2*textData.textMargin),span.text(nText),textElem},"drawText"),drawLabel3=__name(function(elem,txtObject){function genPoints(x5,y6,width3,height2,cut){return x5+","+y6+" "+(x5+width3)+","+y6+" "+(x5+width3)+","+(y6+height2-cut)+" "+(x5+width3-1.2*cut)+","+(y6+height2)+" "+x5+","+(y6+height2)}__name(genPoints,"genPoints");const polygon2=elem.append("polygon");polygon2.attr("points",genPoints(txtObject.x,txtObject.y,50,20,7)),polygon2.attr("class","labelBox"),txtObject.y=txtObject.y+txtObject.labelMargin,txtObject.x=txtObject.x+.5*txtObject.labelMargin,drawText5(elem,txtObject)},"drawLabel"),drawSection2=__name(function(elem,section,conf5){const g2=elem.append("g"),rect3=getNoteRect3();rect3.x=section.x,rect3.y=section.y,rect3.fill=section.fill,rect3.width=conf5.width,rect3.height=conf5.height,rect3.class="journey-section section-type-"+section.num,rect3.rx=3,rect3.ry=3,drawRect6(g2,rect3),_drawTextCandidateFunc4(conf5)(section.text,g2,rect3.x,rect3.y,rect3.width,rect3.height,{class:"journey-section section-type-"+section.num},conf5,section.colour)},"drawSection"),taskCount2=-1,drawTask2=__name(function(elem,task,conf5){const center4=task.x+conf5.width/2,g2=elem.append("g");taskCount2++;g2.append("line").attr("id","task"+taskCount2).attr("x1",center4).attr("y1",task.y).attr("x2",center4).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),drawFace2(g2,{cx:center4,cy:300+30*(5-task.score),score:task.score});const rect3=getNoteRect3();rect3.x=task.x,rect3.y=task.y,rect3.fill=task.fill,rect3.width=conf5.width,rect3.height=conf5.height,rect3.class="task task-type-"+task.num,rect3.rx=3,rect3.ry=3,drawRect6(g2,rect3),_drawTextCandidateFunc4(conf5)(task.task,g2,rect3.x,rect3.y,rect3.width,rect3.height,{class:"task"},conf5,task.colour)},"drawTask"),drawBackgroundRect4=__name(function(elem,bounds4){drawRect6(elem,{x:bounds4.startx,y:bounds4.starty,width:bounds4.stopx-bounds4.startx,height:bounds4.stopy-bounds4.starty,fill:bounds4.fill,class:"rect"}).lower()},"drawBackgroundRect"),getTextObj4=__name(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),getNoteRect3=__name(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),_drawTextCandidateFunc4=function(){function byText(content,g2,x5,y6,width3,height2,textAttrs,colour){_setTextAttrs(g2.append("text").attr("x",x5+width3/2).attr("y",y6+height2/2+5).style("font-color",colour).style("text-anchor","middle").text(content),textAttrs)}function byTspan(content,g2,x5,y6,width3,height2,textAttrs,conf5,colour){const{taskFontSize:taskFontSize,taskFontFamily:taskFontFamily}=conf5,lines=content.split(/<br\s*\/?>/gi);for(let i2=0;i2<lines.length;i2++){const dy=i2*taskFontSize-taskFontSize*(lines.length-1)/2,text4=g2.append("text").attr("x",x5+width3/2).attr("y",y6).attr("fill",colour).style("text-anchor","middle").style("font-size",taskFontSize).style("font-family",taskFontFamily);text4.append("tspan").attr("x",x5+width3/2).attr("dy",dy).text(lines[i2]),text4.attr("y",y6+height2/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),_setTextAttrs(text4,textAttrs)}}function byFo(content,g2,x5,y6,width3,height2,textAttrs,conf5){const body=g2.append("switch"),text4=body.append("foreignObject").attr("x",x5).attr("y",y6).attr("width",width3).attr("height",height2).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");text4.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(content),byTspan(content,body,x5,y6,width3,height2,textAttrs,conf5),_setTextAttrs(text4,textAttrs)}function _setTextAttrs(toText,fromTextAttrsDict){for(const key in fromTextAttrsDict)key in fromTextAttrsDict&&toText.attr(key,fromTextAttrsDict[key])}return __name(byText,"byText"),__name(byTspan,"byTspan"),__name(byFo,"byFo"),__name(_setTextAttrs,"_setTextAttrs"),function(conf5){return"fo"===conf5.textPlacement?byFo:"old"===conf5.textPlacement?byText:byTspan}}(),initGraphics2=__name(function(graphics){graphics.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),__name(wrap2,"wrap"),drawNode=__name(function(elem,node2,fullSection,conf5){const section=fullSection%12-1,nodeElem=elem.append("g");node2.section=section,nodeElem.attr("class",(node2.class?node2.class+" ":"")+"timeline-node section-"+section);const bkgElem=nodeElem.append("g"),textElem=nodeElem.append("g"),bbox=textElem.append("text").text(node2.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(wrap2,node2.width).node().getBBox(),fontSize=conf5.fontSize?.replace?conf5.fontSize.replace("px",""):conf5.fontSize;return node2.height=bbox.height+1.1*fontSize*.5+node2.padding,node2.height=Math.max(node2.height,node2.maxHeight),node2.width=node2.width+2*node2.padding,textElem.attr("transform","translate("+node2.width/2+", "+node2.padding/2+")"),defaultBkg(bkgElem,node2,section,conf5),node2},"drawNode"),getVirtualNodeHeight=__name(function(elem,node2,conf5){const textElem=elem.append("g"),bbox=textElem.append("text").text(node2.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(wrap2,node2.width).node().getBBox(),fontSize=conf5.fontSize?.replace?conf5.fontSize.replace("px",""):conf5.fontSize;return textElem.remove(),bbox.height+1.1*fontSize*.5+node2.padding},"getVirtualNodeHeight"),defaultBkg=__name(function(elem,node2,section){elem.append("path").attr("id","node-"+node2.id).attr("class","node-bkg node-"+node2.type).attr("d",`M0 ${node2.height-5} v${10-node2.height} q0,-5 5,-5 h${node2.width-10} q5,0 5,5 v${node2.height-5} H0 Z`),elem.append("line").attr("class","node-line-"+section).attr("x1",0).attr("y1",node2.height).attr("x2",node2.width).attr("y2",node2.height)},"defaultBkg"),svgDraw_default4={drawRect:drawRect6,drawCircle:drawCircle2,drawSection:drawSection2,drawText:drawText5,drawLabel:drawLabel3,drawTask:drawTask2,drawBackgroundRect:drawBackgroundRect4,getTextObj:getTextObj4,getNoteRect:getNoteRect3,initGraphics:initGraphics2,drawNode:drawNode,getVirtualNodeHeight:getVirtualNodeHeight}}}),init_timelineRenderer=__esm({"src/diagrams/timeline/timelineRenderer.ts"(){init_src32(),init_svgDraw4(),init_logger(),init_diagramAPI(),init_setupGraphViewbox(),draw17=__name(function(text4,id30,version3,diagObj){const conf5=getConfig2(),LEFT_MARGIN=conf5.timeline?.leftMargin??50;log.debug("timeline",diagObj.db);const securityLevel=conf5.securityLevel;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const svg2=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body").select("#"+id30);svg2.append("g");const tasks4=diagObj.db.getTasks(),title2=diagObj.db.getCommonDb().getDiagramTitle();log.debug("task",tasks4),svgDraw_default4.initGraphics(svg2);const sections6=diagObj.db.getSections();log.debug("sections",sections6);let maxSectionHeight=0,maxTaskHeight=0,depthY=0,sectionBeginY=0,masterX=50+LEFT_MARGIN,masterY=50;sectionBeginY=50;let sectionNumber=0,hasSections=!0;sections6.forEach(function(section){const sectionNode={number:sectionNumber,descr:section,section:sectionNumber,width:150,padding:20,maxHeight:maxSectionHeight},sectionHeight=svgDraw_default4.getVirtualNodeHeight(svg2,sectionNode,conf5);log.debug("sectionHeight before draw",sectionHeight),maxSectionHeight=Math.max(maxSectionHeight,sectionHeight+20)});let maxEventCount=0,maxEventLineLength=0;log.debug("tasks.length",tasks4.length);for(const[i2,task]of tasks4.entries()){const taskNode={number:i2,descr:task,section:task.section,width:150,padding:20,maxHeight:maxTaskHeight},taskHeight=svgDraw_default4.getVirtualNodeHeight(svg2,taskNode,conf5);log.debug("taskHeight before draw",taskHeight),maxTaskHeight=Math.max(maxTaskHeight,taskHeight+20),maxEventCount=Math.max(maxEventCount,task.events.length);let maxEventLineLengthTemp=0;for(const event3 of task.events){const eventNode={descr:event3,section:task.section,number:task.section,width:150,padding:20,maxHeight:50};maxEventLineLengthTemp+=svgDraw_default4.getVirtualNodeHeight(svg2,eventNode,conf5)}task.events.length>0&&(maxEventLineLengthTemp+=10*(task.events.length-1)),maxEventLineLength=Math.max(maxEventLineLength,maxEventLineLengthTemp)}log.debug("maxSectionHeight before draw",maxSectionHeight),log.debug("maxTaskHeight before draw",maxTaskHeight),sections6&&sections6.length>0?sections6.forEach(section=>{const tasksForSection=tasks4.filter(task=>task.section===section),sectionNode={number:sectionNumber,descr:section,section:sectionNumber,width:200*Math.max(tasksForSection.length,1)-50,padding:20,maxHeight:maxSectionHeight};log.debug("sectionNode",sectionNode);const sectionNodeWrapper=svg2.append("g"),node2=svgDraw_default4.drawNode(sectionNodeWrapper,sectionNode,sectionNumber,conf5);log.debug("sectionNode output",node2),sectionNodeWrapper.attr("transform",`translate(${masterX}, 50)`),masterY+=maxSectionHeight+50,tasksForSection.length>0&&drawTasks2(svg2,tasksForSection,sectionNumber,masterX,masterY,maxTaskHeight,conf5,maxEventCount,maxEventLineLength,maxSectionHeight,!1),masterX+=200*Math.max(tasksForSection.length,1),masterY=50,sectionNumber++}):(hasSections=!1,drawTasks2(svg2,tasks4,sectionNumber,masterX,masterY,maxTaskHeight,conf5,maxEventCount,maxEventLineLength,maxSectionHeight,!0));const box=svg2.node().getBBox();log.debug("bounds",box),title2&&svg2.append("text").text(title2).attr("x",box.width/2-LEFT_MARGIN).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),depthY=hasSections?maxSectionHeight+maxTaskHeight+150:maxTaskHeight+100;svg2.append("g").attr("class","lineWrapper").append("line").attr("x1",LEFT_MARGIN).attr("y1",depthY).attr("x2",box.width+3*LEFT_MARGIN).attr("y2",depthY).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),setupGraphViewbox(void 0,svg2,conf5.timeline?.padding??50,conf5.timeline?.useMaxWidth??!1)},"draw"),drawTasks2=__name(function(diagram27,tasks4,sectionColor,masterX,masterY,maxTaskHeight,conf5,maxEventCount,maxEventLineLength,maxSectionHeight,isWithoutSections){for(const task of tasks4){const taskNode={descr:task.task,section:sectionColor,number:sectionColor,width:150,padding:20,maxHeight:maxTaskHeight};log.debug("taskNode",taskNode);const taskWrapper=diagram27.append("g").attr("class","taskWrapper"),taskHeight=svgDraw_default4.drawNode(taskWrapper,taskNode,sectionColor,conf5).height;if(log.debug("taskHeight after draw",taskHeight),taskWrapper.attr("transform",`translate(${masterX}, ${masterY})`),maxTaskHeight=Math.max(maxTaskHeight,taskHeight),task.events){const lineWrapper=diagram27.append("g").attr("class","lineWrapper");let lineLength=maxTaskHeight;masterY+=100,lineLength+=drawEvents(diagram27,task.events,sectionColor,masterX,masterY,conf5),masterY-=100,lineWrapper.append("line").attr("x1",masterX+95).attr("y1",masterY+maxTaskHeight).attr("x2",masterX+95).attr("y2",masterY+maxTaskHeight+100+maxEventLineLength+100).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}masterX+=200,isWithoutSections&&!conf5.timeline?.disableMulticolor&&sectionColor++}masterY-=10},"drawTasks"),drawEvents=__name(function(diagram27,events,sectionColor,masterX,masterY,conf5){let maxEventHeight=0;const eventBeginY=masterY;masterY+=100;for(const event3 of events){const eventNode={descr:event3,section:sectionColor,number:sectionColor,width:150,padding:20,maxHeight:50};log.debug("eventNode",eventNode);const eventWrapper=diagram27.append("g").attr("class","eventWrapper"),eventHeight=svgDraw_default4.drawNode(eventWrapper,eventNode,sectionColor,conf5).height;maxEventHeight+=eventHeight,eventWrapper.attr("transform",`translate(${masterX}, ${masterY})`),masterY=masterY+10+eventHeight}return masterY=eventBeginY,maxEventHeight},"drawEvents"),timelineRenderer_default={setConf:__name(()=>{},"setConf"),draw:draw17}}}),init_styles12=__esm({"src/diagrams/timeline/styles.js"(){init_dist(),genSections=__name(options2=>{let sections6="";for(let i2=0;i2<options2.THEME_COLOR_LIMIT;i2++)options2["lineColor"+i2]=options2["lineColor"+i2]||options2["cScaleInv"+i2],is_dark_default(options2["lineColor"+i2])?options2["lineColor"+i2]=lighten_default(options2["lineColor"+i2],20):options2["lineColor"+i2]=darken_default(options2["lineColor"+i2],20);for(let i2=0;i2<options2.THEME_COLOR_LIMIT;i2++){const sw=""+(17-3*i2);sections6+=`\n    .section-${i2-1} rect, .section-${i2-1} path, .section-${i2-1} circle, .section-${i2-1} path  {\n      fill: ${options2["cScale"+i2]};\n    }\n    .section-${i2-1} text {\n     fill: ${options2["cScaleLabel"+i2]};\n    }\n    .node-icon-${i2-1} {\n      font-size: 40px;\n      color: ${options2["cScaleLabel"+i2]};\n    }\n    .section-edge-${i2-1}{\n      stroke: ${options2["cScale"+i2]};\n    }\n    .edge-depth-${i2-1}{\n      stroke-width: ${sw};\n    }\n    .section-${i2-1} line {\n      stroke: ${options2["cScaleInv"+i2]} ;\n      stroke-width: 3;\n    }\n\n    .lineWrapper line{\n      stroke: ${options2["cScaleLabel"+i2]} ;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return sections6},"genSections"),styles_default12=__name(options2=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${genSections(options2)}\n  .section-root rect, .section-root path, .section-root circle  {\n    fill: ${options2.git0};\n  }\n  .section-root text {\n    fill: ${options2.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .eventWrapper  {\n   filter: brightness(120%);\n  }\n`,"getStyles")}}),timeline_definition_exports={};__export(timeline_definition_exports,{diagram:()=>diagram18});var parser16,mindmap_default,byteToHex,init_timeline_definition=__esm({"src/diagrams/timeline/timeline-definition.ts"(){init_timeline(),init_timelineDb(),init_timelineRenderer(),init_styles12(),diagram18={db:timelineDb_exports,renderer:timelineRenderer_default,parser:timeline_default,styles:styles_default12}}}),init_mindmap=__esm({"src/diagrams/mindmap/parser/mindmap.jison"(){parser16=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,4],$V1=[1,13],$V2=[1,12],$V3=[1,15],$V4=[1,16],$V5=[1,20],$V6=[1,19],$V7=[6,7,8],$V8=[1,26],$V9=[1,24],$Va=[1,25],$Vb=[6,7,11],$Vc=[1,6,13,15,16,19,22],$Vd=[1,33],$Ve=[1,34],$Vf=[1,6,7,11,13,15,16,19,22],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 6:case 7:return yy;case 8:yy.getLogger().trace("Stop NL ");break;case 9:yy.getLogger().trace("Stop EOF ");break;case 11:yy.getLogger().trace("Stop NL2 ");break;case 12:yy.getLogger().trace("Stop EOF2 ");break;case 15:yy.getLogger().info("Node: ",$$[$0].id),yy.addNode($$[$0-1].length,$$[$0].id,$$[$0].descr,$$[$0].type);break;case 16:yy.getLogger().trace("Icon: ",$$[$0]),yy.decorateNode({icon:$$[$0]});break;case 17:case 21:yy.decorateNode({class:$$[$0]});break;case 18:yy.getLogger().trace("SPACELIST");break;case 19:yy.getLogger().trace("Node: ",$$[$0].id),yy.addNode(0,$$[$0].id,$$[$0].descr,$$[$0].type);break;case 20:yy.decorateNode({icon:$$[$0]});break;case 25:yy.getLogger().trace("node found ..",$$[$0-2]),this.$={id:$$[$0-1],descr:$$[$0-1],type:yy.getType($$[$0-2],$$[$0])};break;case 26:this.$={id:$$[$0],descr:$$[$0],type:yy.nodeType.DEFAULT};break;case 27:yy.getLogger().trace("node found ..",$$[$0-3]),this.$={id:$$[$0-3],descr:$$[$0-1],type:yy.getType($$[$0-2],$$[$0])}}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:$V0},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:$V0},{6:$V1,7:[1,10],9:9,12:11,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},o2($V7,[2,3]),{1:[2,2]},o2($V7,[2,4]),o2($V7,[2,5]),{1:[2,6],6:$V1,12:21,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},{6:$V1,9:22,12:11,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},{6:$V8,7:$V9,10:23,11:$Va},o2($Vb,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:$V5,22:$V6}),o2($Vb,[2,18]),o2($Vb,[2,19]),o2($Vb,[2,20]),o2($Vb,[2,21]),o2($Vb,[2,23]),o2($Vb,[2,24]),o2($Vb,[2,26],{19:[1,30]}),{20:[1,31]},{6:$V8,7:$V9,10:32,11:$Va},{1:[2,7],6:$V1,12:21,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},o2($Vc,[2,14],{7:$Vd,11:$Ve}),o2($Vf,[2,8]),o2($Vf,[2,9]),o2($Vf,[2,10]),o2($Vb,[2,15]),o2($Vb,[2,16]),o2($Vb,[2,17]),{20:[1,35]},{21:[1,36]},o2($Vc,[2,13],{7:$Vd,11:$Ve}),o2($Vf,[2,11]),o2($Vf,[2,12]),{21:[1,37]},o2($Vb,[2,25]),o2($Vb,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return yy.getLogger().trace("Found comment",yy_.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:yy.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return yy.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:yy.getLogger().trace("end icon"),this.popState();break;case 10:return yy.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return yy.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return yy.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return yy.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:yy.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return yy.getLogger().trace("description:",yy_.yytext),"NODE_DESCR";case 27:return this.popState(),yy.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),yy.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),yy.getLogger().trace("node end ...",yy_.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),yy.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),yy.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return yy.getLogger().trace("Long description:",yy_.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser16.parser=parser16,mindmap_default=parser16}});function unsafeStringify(arr,offset=0){return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}var getRandomValues,rnds8,init_stringify=__esm({"../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/stringify.js"(){byteToHex=[];for(let i2=0;i2<256;++i2)byteToHex.push((i2+256).toString(16).slice(1));__name(unsafeStringify,"unsafeStringify")}});function rng(){if(!getRandomValues){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}var randomUUID,native_default,v4_default,init_rng=__esm({"../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/rng.js"(){rnds8=new Uint8Array(16),__name(rng,"rng")}}),init_native=__esm({"../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/native.js"(){randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native_default={randomUUID:randomUUID}}});function v4(options2,buf,offset){if(native_default.randomUUID&&!buf&&!options2)return native_default.randomUUID();const rnds=(options2=options2||{}).random??options2.rng?.()??rng();if(rnds.length<16)throw new Error("Random bytes length must be >= 16");if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){if((offset=offset||0)<0||offset+16>buf.length)throw new RangeError(`UUID byte range ${offset}:${offset+15} is out of buffer bounds`);for(let i2=0;i2<16;++i2)buf[offset+i2]=rnds[i2];return buf}return unsafeStringify(rnds)}var nodeType,MindmapDB,mindmapRenderer_default,genSections2,styles_default13,diagram19,init_v4=__esm({"../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/v4.js"(){init_native(),init_rng(),init_stringify(),__name(v4,"v4"),v4_default=v4}}),init_esm_browser=__esm({"../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/index.js"(){init_v4()}}),init_mindmapDb=__esm({"src/diagrams/mindmap/mindmapDb.ts"(){init_diagramAPI(),init_esm_browser(),init_common(),init_logger(),init_defaultConfig(),init_config(),nodeType={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},MindmapDB=class{constructor(){this.nodes=[],this.count=0,this.elements={},this.getLogger=this.getLogger.bind(this),this.nodeType=nodeType,this.clear(),this.getType=this.getType.bind(this),this.getElementById=this.getElementById.bind(this),this.getParent=this.getParent.bind(this),this.getMindmap=this.getMindmap.bind(this),this.addNode=this.addNode.bind(this),this.decorateNode=this.decorateNode.bind(this)}static{__name(this,"MindmapDB")}clear(){this.nodes=[],this.count=0,this.elements={},this.baseLevel=void 0}getParent(level){for(let i2=this.nodes.length-1;i2>=0;i2--)if(this.nodes[i2].level<level)return this.nodes[i2];return null}getMindmap(){return this.nodes.length>0?this.nodes[0]:null}addNode(level,id30,descr,type3){log.info("addNode",level,id30,descr,type3);let isRoot=!1;0===this.nodes.length?(this.baseLevel=level,level=0,isRoot=!0):void 0!==this.baseLevel&&(level-=this.baseLevel,isRoot=!1);const conf5=getConfig2();let padding2=conf5.mindmap?.padding??defaultConfig_default.mindmap.padding;switch(type3){case this.nodeType.ROUNDED_RECT:case this.nodeType.RECT:case this.nodeType.HEXAGON:padding2*=2}const node2={id:this.count++,nodeId:sanitizeText(id30,conf5),level:level,descr:sanitizeText(descr,conf5),type:type3,children:[],width:conf5.mindmap?.maxNodeWidth??defaultConfig_default.mindmap.maxNodeWidth,padding:padding2,isRoot:isRoot},parent4=this.getParent(level);if(parent4)parent4.children.push(node2),this.nodes.push(node2);else{if(!isRoot)throw new Error(`There can be only one root. No parent could be found for ("${node2.descr}")`);this.nodes.push(node2)}}getType(startStr,endStr){switch(log.debug("In get type",startStr,endStr),startStr){case"[":return this.nodeType.RECT;case"(":return")"===endStr?this.nodeType.ROUNDED_RECT:this.nodeType.CLOUD;case"((":return this.nodeType.CIRCLE;case")":return this.nodeType.CLOUD;case"))":return this.nodeType.BANG;case"{{":return this.nodeType.HEXAGON;default:return this.nodeType.DEFAULT}}setElementForId(id30,element3){this.elements[id30]=element3}getElementById(id30){return this.elements[id30]}decorateNode(decoration){if(!decoration)return;const config5=getConfig2(),node2=this.nodes[this.nodes.length-1];decoration.icon&&(node2.icon=sanitizeText(decoration.icon,config5)),decoration.class&&(node2.class=sanitizeText(decoration.class,config5))}type2Str(type3){switch(type3){case this.nodeType.DEFAULT:return"no-border";case this.nodeType.RECT:return"rect";case this.nodeType.ROUNDED_RECT:return"rounded-rect";case this.nodeType.CIRCLE:return"circle";case this.nodeType.CLOUD:return"cloud";case this.nodeType.BANG:return"bang";case this.nodeType.HEXAGON:return"hexgon";default:return"no-border"}}assignSections(node2,sectionNumber){if(0===node2.level?node2.section=void 0:node2.section=sectionNumber,node2.children)for(const[index,child]of node2.children.entries()){const childSectionNumber=0===node2.level?index:sectionNumber;this.assignSections(child,childSectionNumber)}}flattenNodes(node2,processedNodes){const cssClasses=["mindmap-node"];!0===node2.isRoot?cssClasses.push("section-root","section--1"):void 0!==node2.section&&cssClasses.push(`section-${node2.section}`),node2.class&&cssClasses.push(node2.class);const classes3=cssClasses.join(" "),getShapeFromType=__name(type3=>{switch(type3){case nodeType.CIRCLE:return"mindmapCircle";case nodeType.RECT:return"rect";case nodeType.ROUNDED_RECT:return"rounded";case nodeType.CLOUD:return"cloud";case nodeType.BANG:return"bang";case nodeType.HEXAGON:return"hexagon";case nodeType.DEFAULT:return"defaultMindmapNode";default:return"rect"}},"getShapeFromType"),processedNode={id:node2.id.toString(),domId:"node_"+node2.id.toString(),label:node2.descr,isGroup:!1,shape:getShapeFromType(node2.type),width:node2.width,height:node2.height??0,padding:node2.padding,cssClasses:classes3,cssStyles:[],look:"default",icon:node2.icon,x:node2.x,y:node2.y,level:node2.level,nodeId:node2.nodeId,type:node2.type,section:node2.section};if(processedNodes.push(processedNode),node2.children)for(const child of node2.children)this.flattenNodes(child,processedNodes)}generateEdges(node2,edges3){if(node2.children)for(const child of node2.children){let edgeClasses="edge";void 0!==child.section&&(edgeClasses+=` section-edge-${child.section}`);edgeClasses+=` edge-depth-${node2.level+1}`;const edge={id:`edge_${node2.id}_${child.id}`,start:node2.id.toString(),end:child.id.toString(),type:"normal",curve:"basis",thickness:"normal",look:"default",classes:edgeClasses,depth:node2.level,section:child.section};edges3.push(edge),this.generateEdges(child,edges3)}}getData(){const mindmapRoot=this.getMindmap(),config5=getConfig2(),finalConfig=config5;if(void 0!==getUserDefinedConfig().layout||(finalConfig.layout="cose-bilkent"),!mindmapRoot)return{nodes:[],edges:[],config:finalConfig};log.debug("getData: mindmapRoot",mindmapRoot,config5),this.assignSections(mindmapRoot);const processedNodes=[],processedEdges=[];this.flattenNodes(mindmapRoot,processedNodes),this.generateEdges(mindmapRoot,processedEdges),log.debug(`getData: processed ${processedNodes.length} nodes and ${processedEdges.length} edges`);const shapes4=new Map;for(const node2 of processedNodes)shapes4.set(node2.id,{shape:node2.shape,width:node2.width,height:node2.height,padding:node2.padding});return{nodes:processedNodes,edges:processedEdges,config:finalConfig,rootNode:mindmapRoot,markers:["point"],direction:"TB",nodeSpacing:50,rankSpacing:50,shapes:Object.fromEntries(shapes4),type:"mindmap",diagramId:"mindmap-"+v4_default()}}getLogger(){return log}}}}),init_mindmapRenderer=__esm({"src/diagrams/mindmap/mindmapRenderer.ts"(){init_logger(),init_insertElementsForSize(),init_render2(),init_setupViewPortForSVG(),init_defaultConfig(),mindmapRenderer_default={draw:__name(async(text4,id30,_version,diagObj)=>{log.debug("Rendering mindmap diagram\n"+text4);const db7=diagObj.db,data4Layout=db7.getData(),svg2=getDiagramElement(id30,data4Layout.config.securityLevel);data4Layout.type=diagObj.type,data4Layout.layoutAlgorithm=getRegisteredLayoutAlgorithm(data4Layout.config.layout,{fallback:"cose-bilkent"}),data4Layout.diagramId=id30;db7.getMindmap()&&(data4Layout.nodes.forEach(node2=>{"rounded"===node2.shape?(node2.radius=15,node2.taper=15,node2.stroke="none",node2.width=0,node2.padding=15):"circle"===node2.shape?node2.padding=10:"rect"===node2.shape&&(node2.width=0,node2.padding=10)}),await render6(data4Layout,svg2),setupViewPortForSVG(svg2,data4Layout.config.mindmap?.padding??defaultConfig_default.mindmap.padding,"mindmapDiagram",data4Layout.config.mindmap?.useMaxWidth??defaultConfig_default.mindmap.useMaxWidth))},"draw")}}}),init_styles13=__esm({"src/diagrams/mindmap/styles.ts"(){init_dist(),genSections2=__name(options2=>{let sections6="";for(let i2=0;i2<options2.THEME_COLOR_LIMIT;i2++)options2["lineColor"+i2]=options2["lineColor"+i2]||options2["cScaleInv"+i2],is_dark_default(options2["lineColor"+i2])?options2["lineColor"+i2]=lighten_default(options2["lineColor"+i2],20):options2["lineColor"+i2]=darken_default(options2["lineColor"+i2],20);for(let i2=0;i2<options2.THEME_COLOR_LIMIT;i2++){const sw=""+(17-3*i2);sections6+=`\n    .section-${i2-1} rect, .section-${i2-1} path, .section-${i2-1} circle, .section-${i2-1} polygon, .section-${i2-1} path  {\n      fill: ${options2["cScale"+i2]};\n    }\n    .section-${i2-1} text {\n     fill: ${options2["cScaleLabel"+i2]};\n    }\n    .node-icon-${i2-1} {\n      font-size: 40px;\n      color: ${options2["cScaleLabel"+i2]};\n    }\n    .section-edge-${i2-1}{\n      stroke: ${options2["cScale"+i2]};\n    }\n    .edge-depth-${i2-1}{\n      stroke-width: ${sw};\n    }\n    .section-${i2-1} line {\n      stroke: ${options2["cScaleInv"+i2]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return sections6},"genSections"),styles_default13=__name(options2=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${genSections2(options2)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${options2.git0};\n  }\n  .section-root text {\n    fill: ${options2.gitBranchLabel0};\n  }\n  .section-root span {\n    color: ${options2.gitBranchLabel0};\n  }\n  .section-2 span {\n    color: ${options2.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,"getStyles")}}),mindmap_definition_exports={};__export(mindmap_definition_exports,{diagram:()=>diagram19});var parser17,kanban_default,nodes3,sections5,cnt2,elements,clear15,getSection,getSections5,getData,nodeType2,kanbanDb_default,draw19,kanbanRenderer_default,genSections3,styles_default14,diagram20,init_mindmap_definition=__esm({"src/diagrams/mindmap/mindmap-definition.ts"(){init_mindmap(),init_mindmapDb(),init_mindmapRenderer(),init_styles13(),diagram19={get db(){return new MindmapDB},renderer:mindmapRenderer_default,parser:mindmap_default,styles:styles_default13}}}),init_kanban=__esm({"src/diagrams/kanban/parser/kanban.jison"(){parser17=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,4],$V1=[1,13],$V2=[1,12],$V3=[1,15],$V4=[1,16],$V5=[1,20],$V6=[1,19],$V7=[6,7,8],$V8=[1,26],$V9=[1,24],$Va=[1,25],$Vb=[6,7,11],$Vc=[1,31],$Vd=[6,7,11,24],$Ve=[1,6,13,16,17,20,23],$Vf=[1,35],$Vg=[1,36],$Vh=[1,6,7,11,13,16,17,20,23],$Vi=[1,38],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 6:case 7:return yy;case 8:yy.getLogger().trace("Stop NL ");break;case 9:yy.getLogger().trace("Stop EOF ");break;case 11:yy.getLogger().trace("Stop NL2 ");break;case 12:yy.getLogger().trace("Stop EOF2 ");break;case 15:yy.getLogger().info("Node: ",$$[$0-1].id),yy.addNode($$[$0-2].length,$$[$0-1].id,$$[$0-1].descr,$$[$0-1].type,$$[$0]);break;case 16:yy.getLogger().info("Node: ",$$[$0].id),yy.addNode($$[$0-1].length,$$[$0].id,$$[$0].descr,$$[$0].type);break;case 17:yy.getLogger().trace("Icon: ",$$[$0]),yy.decorateNode({icon:$$[$0]});break;case 18:case 23:yy.decorateNode({class:$$[$0]});break;case 19:yy.getLogger().trace("SPACELIST");break;case 20:yy.getLogger().trace("Node: ",$$[$0-1].id),yy.addNode(0,$$[$0-1].id,$$[$0-1].descr,$$[$0-1].type,$$[$0]);break;case 21:yy.getLogger().trace("Node: ",$$[$0].id),yy.addNode(0,$$[$0].id,$$[$0].descr,$$[$0].type);break;case 22:yy.decorateNode({icon:$$[$0]});break;case 27:yy.getLogger().trace("node found ..",$$[$0-2]),this.$={id:$$[$0-1],descr:$$[$0-1],type:yy.getType($$[$0-2],$$[$0])};break;case 28:this.$={id:$$[$0],descr:$$[$0],type:0};break;case 29:yy.getLogger().trace("node found ..",$$[$0-3]),this.$={id:$$[$0-3],descr:$$[$0-1],type:yy.getType($$[$0-2],$$[$0])};break;case 30:this.$=$$[$0-1]+$$[$0];break;case 31:this.$=$$[$0]}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:$V0},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:$V0},{6:$V1,7:[1,10],9:9,12:11,13:$V2,14:14,16:$V3,17:$V4,18:17,19:18,20:$V5,23:$V6},o2($V7,[2,3]),{1:[2,2]},o2($V7,[2,4]),o2($V7,[2,5]),{1:[2,6],6:$V1,12:21,13:$V2,14:14,16:$V3,17:$V4,18:17,19:18,20:$V5,23:$V6},{6:$V1,9:22,12:11,13:$V2,14:14,16:$V3,17:$V4,18:17,19:18,20:$V5,23:$V6},{6:$V8,7:$V9,10:23,11:$Va},o2($Vb,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:$V5,23:$V6}),o2($Vb,[2,19]),o2($Vb,[2,21],{15:30,24:$Vc}),o2($Vb,[2,22]),o2($Vb,[2,23]),o2($Vd,[2,25]),o2($Vd,[2,26]),o2($Vd,[2,28],{20:[1,32]}),{21:[1,33]},{6:$V8,7:$V9,10:34,11:$Va},{1:[2,7],6:$V1,12:21,13:$V2,14:14,16:$V3,17:$V4,18:17,19:18,20:$V5,23:$V6},o2($Ve,[2,14],{7:$Vf,11:$Vg}),o2($Vh,[2,8]),o2($Vh,[2,9]),o2($Vh,[2,10]),o2($Vb,[2,16],{15:37,24:$Vc}),o2($Vb,[2,17]),o2($Vb,[2,18]),o2($Vb,[2,20],{24:$Vi}),o2($Vd,[2,31]),{21:[1,39]},{22:[1,40]},o2($Ve,[2,13],{7:$Vf,11:$Vg}),o2($Vh,[2,11]),o2($Vh,[2,12]),o2($Vb,[2,15],{24:$Vi}),o2($Vd,[2,30]),{22:[1,41]},o2($Vd,[2,27]),o2($Vd,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return this.pushState("shapeData"),yy_.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:const re3=/\n\s*/g;return yy_.yytext=yy_.yytext.replace(re3,"<br/>"),24;case 4:return 24;case 5:case 10:case 29:case 32:this.popState();break;case 6:return yy.getLogger().trace("Found comment",yy_.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 11:yy.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return yy.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:yy.getLogger().trace("end icon"),this.popState();break;case 16:return yy.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return yy.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return yy.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return yy.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:case 21:case 22:case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 30:yy.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return yy.getLogger().trace("description:",yy_.yytext),"NODE_DESCR";case 33:return this.popState(),yy.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),yy.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),yy.getLogger().trace("node end ...",yy_.yytext),"NODE_DEND";case 36:case 39:case 40:return this.popState(),yy.getLogger().trace("node end (("),"NODE_DEND";case 37:case 38:return this.popState(),yy.getLogger().trace("node end (-"),"NODE_DEND";case 41:case 42:return yy.getLogger().trace("Long description:",yy_.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser17.parser=parser17,kanban_default=parser17}}),init_kanbanDb=__esm({"src/diagrams/kanban/kanbanDb.ts"(){init_diagramAPI(),init_common(),init_logger(),init_defaultConfig(),init_js_yaml(),nodes3=[],sections5=[],cnt2=0,elements={},clear15=__name(()=>{nodes3=[],sections5=[],cnt2=0,elements={}},"clear"),getSection=__name(level=>{if(0===nodes3.length)return null;const sectionLevel=nodes3[0].level;let lastSection=null;for(let i2=nodes3.length-1;i2>=0;i2--)if(nodes3[i2].level!==sectionLevel||lastSection||(lastSection=nodes3[i2]),nodes3[i2].level<sectionLevel)throw new Error('Items without section detected, found section ("'+nodes3[i2].label+'")');return level===lastSection?.level?null:lastSection},"getSection"),getSections5=__name(function(){return sections5},"getSections"),getData=__name(function(){const _nodes=[],sections6=getSections5(),conf5=getConfig2();for(const section of sections6){const node2={id:section.id,label:sanitizeText(section.label??"",conf5),isGroup:!0,ticket:section.ticket,shape:"kanbanSection",level:section.level,look:conf5.look};_nodes.push(node2);const children2=nodes3.filter(n2=>n2.parentId===section.id);for(const item of children2){const childNode={id:item.id,parentId:section.id,label:sanitizeText(item.label??"",conf5),isGroup:!1,ticket:item?.ticket,priority:item?.priority,assigned:item?.assigned,icon:item?.icon,shape:"kanbanItem",level:item.level,rx:5,ry:5,cssStyles:["text-align: left"]};_nodes.push(childNode)}}return{nodes:_nodes,edges:[],other:{},config:getConfig2()}},"getData"),kanbanDb_default={clear:clear15,addNode:__name((level,id30,descr,type3,shapeData)=>{const conf5=getConfig2();let padding2=conf5.mindmap?.padding??defaultConfig_default.mindmap.padding;switch(type3){case nodeType2.ROUNDED_RECT:case nodeType2.RECT:case nodeType2.HEXAGON:padding2*=2}const node2={id:sanitizeText(id30,conf5)||"kbn"+cnt2++,level:level,label:sanitizeText(descr,conf5),width:conf5.mindmap?.maxNodeWidth??defaultConfig_default.mindmap.maxNodeWidth,padding:padding2,isGroup:!1};if(void 0!==shapeData){let yamlData;yamlData=shapeData.includes("\n")?shapeData+"\n":"{\n"+shapeData+"\n}";const doc=load(yamlData,{schema:JSON_SCHEMA});if(doc.shape&&(doc.shape!==doc.shape.toLowerCase()||doc.shape.includes("_")))throw new Error(`No such shape: ${doc.shape}. Shape names should be lowercase.`);doc?.shape&&"kanbanItem"===doc.shape&&(node2.shape=doc?.shape),doc?.label&&(node2.label=doc?.label),doc?.icon&&(node2.icon=doc?.icon.toString()),doc?.assigned&&(node2.assigned=doc?.assigned.toString()),doc?.ticket&&(node2.ticket=doc?.ticket.toString()),doc?.priority&&(node2.priority=doc?.priority)}const section=getSection(level);section?node2.parentId=section.id||"kbn"+cnt2++:sections5.push(node2),nodes3.push(node2)},"addNode"),getSections:getSections5,getData:getData,nodeType:nodeType2={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},getType:__name((startStr,endStr)=>{switch(log.debug("In get type",startStr,endStr),startStr){case"[":return nodeType2.RECT;case"(":return")"===endStr?nodeType2.ROUNDED_RECT:nodeType2.CLOUD;case"((":return nodeType2.CIRCLE;case")":return nodeType2.CLOUD;case"))":return nodeType2.BANG;case"{{":return nodeType2.HEXAGON;default:return nodeType2.DEFAULT}},"getType"),setElementForId:__name((id30,element3)=>{elements[id30]=element3},"setElementForId"),decorateNode:__name(decoration=>{if(!decoration)return;const config5=getConfig2(),node2=nodes3[nodes3.length-1];decoration.icon&&(node2.icon=sanitizeText(decoration.icon,config5)),decoration.class&&(node2.cssClasses=sanitizeText(decoration.class,config5))},"decorateNode"),type2Str:__name(type3=>{switch(type3){case nodeType2.DEFAULT:return"no-border";case nodeType2.RECT:return"rect";case nodeType2.ROUNDED_RECT:return"rounded-rect";case nodeType2.CIRCLE:return"circle";case nodeType2.CLOUD:return"cloud";case nodeType2.BANG:return"bang";case nodeType2.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),getLogger:__name(()=>log,"getLogger"),getElementById:__name(id30=>elements[id30],"getElementById")}}}),init_kanbanRenderer=__esm({"src/diagrams/kanban/kanbanRenderer.ts"(){init_diagramAPI(),init_logger(),init_selectSvgElement(),init_setupGraphViewbox(),init_defaultConfig(),init_clusters(),init_nodes2(),draw19=__name(async(text4,id30,_version,diagObj)=>{log.debug("Rendering kanban diagram\n"+text4);const data4Layout=diagObj.db.getData(),conf5=getConfig2();conf5.htmlLabels=!1;const svg2=selectSvgElement(id30),sectionsElem=svg2.append("g");sectionsElem.attr("class","sections");const nodesElem=svg2.append("g");nodesElem.attr("class","items");const sections6=data4Layout.nodes.filter(node2=>node2.isGroup);let cnt4=0;const sectionObjects=[];let maxLabelHeight=25;for(const section of sections6){const WIDTH=conf5?.kanban?.sectionWidth||200;cnt4+=1,section.x=WIDTH*cnt4+10*(cnt4-1)/2,section.width=WIDTH,section.y=0,section.height=3*WIDTH,section.rx=5,section.ry=5,section.cssClasses=section.cssClasses+" section-"+cnt4;const sectionObj=await insertCluster(sectionsElem,section);maxLabelHeight=Math.max(maxLabelHeight,sectionObj?.labelBBox?.height),sectionObjects.push(sectionObj)}let i2=0;for(const section of sections6){const sectionObj=sectionObjects[i2];i2+=1;const WIDTH=conf5?.kanban?.sectionWidth||200,top2=3*-WIDTH/2+maxLabelHeight;let y6=top2;const sectionItems=data4Layout.nodes.filter(node2=>node2.parentId===section.id);for(const item of sectionItems){if(item.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");item.x=section.x,item.width=WIDTH-15;const bbox=(await insertNode(nodesElem,item,{config:conf5})).node().getBBox();item.y=y6+bbox.height/2,await positionNode(item),y6=item.y+bbox.height/2+5}const rect3=sectionObj.cluster.select("rect"),height2=Math.max(y6-top2+30,50)+(maxLabelHeight-25);rect3.attr("height",height2)}setupGraphViewbox(void 0,svg2,conf5.mindmap?.padding??defaultConfig_default.kanban.padding,conf5.mindmap?.useMaxWidth??defaultConfig_default.kanban.useMaxWidth)},"draw"),kanbanRenderer_default={draw:draw19}}}),init_styles14=__esm({"src/diagrams/kanban/styles.ts"(){init_dist(),init_globalStyles(),genSections3=__name(options2=>{let sections6="";for(let i2=0;i2<options2.THEME_COLOR_LIMIT;i2++)options2["lineColor"+i2]=options2["lineColor"+i2]||options2["cScaleInv"+i2],is_dark_default(options2["lineColor"+i2])?options2["lineColor"+i2]=lighten_default(options2["lineColor"+i2],20):options2["lineColor"+i2]=darken_default(options2["lineColor"+i2],20);const adjuster=__name((color2,level)=>options2.darkMode?darken_default(color2,level):lighten_default(color2,level),"adjuster");for(let i2=0;i2<options2.THEME_COLOR_LIMIT;i2++){const sw=""+(17-3*i2);sections6+=`\n    .section-${i2-1} rect, .section-${i2-1} path, .section-${i2-1} circle, .section-${i2-1} polygon, .section-${i2-1} path  {\n      fill: ${adjuster(options2["cScale"+i2],10)};\n      stroke: ${adjuster(options2["cScale"+i2],10)};\n\n    }\n    .section-${i2-1} text {\n     fill: ${options2["cScaleLabel"+i2]};\n    }\n    .node-icon-${i2-1} {\n      font-size: 40px;\n      color: ${options2["cScaleLabel"+i2]};\n    }\n    .section-edge-${i2-1}{\n      stroke: ${options2["cScale"+i2]};\n    }\n    .edge-depth-${i2-1}{\n      stroke-width: ${sw};\n    }\n    .section-${i2-1} line {\n      stroke: ${options2["cScaleInv"+i2]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options2.background};\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .kanban-ticket-link {\n    fill: ${options2.background};\n    stroke: ${options2.nodeBorder};\n    text-decoration: underline;\n  }\n    `}return sections6},"genSections"),styles_default14=__name(options2=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${genSections3(options2)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${options2.git0};\n  }\n  .section-root text {\n    fill: ${options2.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .cluster-label, .label {\n    color: ${options2.textColor};\n    fill: ${options2.textColor};\n    }\n  .kanban-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n    ${getIconStyles()}\n`,"getStyles")}}),kanban_definition_exports={};__export(kanban_definition_exports,{diagram:()=>diagram20});var parser18,sankey_default,links2,nodes4,nodesMap,clear16,SankeyLink,addLink,SankeyNode,findOrCreateNode,getNodes,getLinks2,getGraph,sankeyDB_default,init_kanban_definition=__esm({"src/diagrams/kanban/kanban-definition.ts"(){init_kanban(),init_kanbanDb(),init_kanbanRenderer(),init_styles14(),diagram20={db:kanbanDb_default,renderer:kanbanRenderer_default,parser:kanban_default,styles:styles_default14}}}),init_sankey=__esm({"src/diagrams/sankey/parser/sankey.jison"(){parser18=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,9],$V1=[1,10],$V2=[1,5,10,12],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 7:const source=yy.findOrCreateNode($$[$0-4].trim().replaceAll('""','"')),target=yy.findOrCreateNode($$[$0-2].trim().replaceAll('""','"')),value2=parseFloat($$[$0].trim());yy.addLink(source,target,value2);break;case 8:case 9:case 11:this.$=$$[$0];break;case 10:this.$=$$[$0-1]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:$V0,20:$V1},{1:[2,6],7:11,10:[1,12]},o2($V1,[2,4],{9:13,5:[1,14]}),{12:[1,15]},o2($V2,[2,8]),o2($V2,[2,9]),{19:[1,16]},o2($V2,[2,11]),{1:[2,1]},{1:[2,5]},o2($V1,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:$V0,20:$V1},{15:18,16:7,17:8,18:$V0,20:$V1},{18:[1,19]},o2($V1,[2,3]),{12:[1,20]},o2($V2,[2,10]),{15:21,16:7,17:8,18:$V0,20:$V1},o2([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser18.parser=parser18,sankey_default=parser18}}),init_sankeyDB=__esm({"src/diagrams/sankey/sankeyDB.ts"(){init_diagramAPI(),init_common(),init_commonDb(),links2=[],nodes4=[],nodesMap=new Map,clear16=__name(()=>{links2=[],nodes4=[],nodesMap=new Map,clear()},"clear"),SankeyLink=class{constructor(source,target,value2=0){this.source=source,this.target=target,this.value=value2}static{__name(this,"SankeyLink")}},addLink=__name((source,target,value2)=>{links2.push(new SankeyLink(source,target,value2))},"addLink"),SankeyNode=class{constructor(ID){this.ID=ID}static{__name(this,"SankeyNode")}},findOrCreateNode=__name(ID=>{ID=common_default.sanitizeText(ID,getConfig2());let node2=nodesMap.get(ID);return void 0===node2&&(node2=new SankeyNode(ID),nodesMap.set(ID,node2),nodes4.push(node2)),node2},"findOrCreateNode"),getNodes=__name(()=>nodes4,"getNodes"),getLinks2=__name(()=>links2,"getLinks"),getGraph=__name(()=>({nodes:nodes4.map(node2=>({id:node2.ID})),links:links2.map(link2=>({source:link2.source.ID,target:link2.target.ID,value:link2.value}))}),"getGraph"),sankeyDB_default={nodesMap:nodesMap,getConfig:__name(()=>getConfig2().sankey,"getConfig"),getNodes:getNodes,getLinks:getLinks2,getGraph:getGraph,addLink:addLink,findOrCreateNode:findOrCreateNode,getAccTitle:getAccTitle,setAccTitle:setAccTitle,getAccDescription:getAccDescription,setAccDescription:setAccDescription,getDiagramTitle:getDiagramTitle,setDiagramTitle:setDiagramTitle,clear:clear16}}});function max9(values2,valueof){let max10;if(void 0===valueof)for(const value2 of values2)null!=value2&&(max10<value2||void 0===max10&&value2>=value2)&&(max10=value2);else{let index=-1;for(let value2 of values2)null!=(value2=valueof(value2,++index,values2))&&(max10<value2||void 0===max10&&value2>=value2)&&(max10=value2)}return max10}var init_max3=__esm({"../../node_modules/.pnpm/d3-array@2.12.1/node_modules/d3-array/src/max.js"(){__name(max9,"max")}});function min8(values2,valueof){let min9;if(void 0===valueof)for(const value2 of values2)null!=value2&&(min9>value2||void 0===min9&&value2>=value2)&&(min9=value2);else{let index=-1;for(let value2 of values2)null!=(value2=valueof(value2,++index,values2))&&(min9>value2||void 0===min9&&value2>=value2)&&(min9=value2)}return min9}var init_min3=__esm({"../../node_modules/.pnpm/d3-array@2.12.1/node_modules/d3-array/src/min.js"(){__name(min8,"min")}});function sum(values2,valueof){let sum2=0;if(void 0===valueof)for(let value2 of values2)(value2=+value2)&&(sum2+=value2);else{let index=-1;for(let value2 of values2)(value2=+valueof(value2,++index,values2))&&(sum2+=value2)}return sum2}var init_sum2=__esm({"../../node_modules/.pnpm/d3-array@2.12.1/node_modules/d3-array/src/sum.js"(){__name(sum,"sum")}}),init_src33=__esm({"../../node_modules/.pnpm/d3-array@2.12.1/node_modules/d3-array/src/index.js"(){init_max3(),init_min3(),init_sum2()}});function targetDepth(d3){return d3.target.depth}function left2(node2){return node2.depth}function right2(node2,n2){return n2-1-node2.height}function justify(node2,n2){return node2.sourceLinks.length?node2.depth:n2-1}function center3(node2){return node2.targetLinks.length?node2.depth:node2.sourceLinks.length?min8(node2.sourceLinks,targetDepth)-1:0}var init_align=__esm({"../../node_modules/.pnpm/d3-sankey@0.12.3/node_modules/d3-sankey/src/align.js"(){init_src33(),__name(targetDepth,"targetDepth"),__name(left2,"left"),__name(right2,"right"),__name(justify,"justify"),__name(center3,"center")}});function constant2(x5){return function(){return x5}}var init_constant9=__esm({"../../node_modules/.pnpm/d3-sankey@0.12.3/node_modules/d3-sankey/src/constant.js"(){__name(constant2,"constant")}});function ascendingSourceBreadth(a2,b3){return ascendingBreadth(a2.source,b3.source)||a2.index-b3.index}function ascendingTargetBreadth(a2,b3){return ascendingBreadth(a2.target,b3.target)||a2.index-b3.index}function ascendingBreadth(a2,b3){return a2.y0-b3.y0}function value(d3){return d3.value}function defaultId(d3){return d3.index}function defaultNodes(graph){return graph.nodes}function defaultLinks(graph){return graph.links}function find3(nodeById,id30){const node2=nodeById.get(id30);if(!node2)throw new Error("missing: "+id30);return node2}function computeLinkBreadths({nodes:nodes5}){for(const node2 of nodes5){let y0=node2.y0,y1=y0;for(const link2 of node2.sourceLinks)link2.y0=y0+link2.width/2,y0+=link2.width;for(const link2 of node2.targetLinks)link2.y1=y1+link2.width/2,y1+=link2.width}}function Sankey(){let py,sort3,linkSort,x0=0,y0=0,x1=1,y1=1,dx=24,dy=8,id30=defaultId,align=justify,nodes5=defaultNodes,links3=defaultLinks,iterations=6;function sankey(){const graph={nodes:nodes5.apply(null,arguments),links:links3.apply(null,arguments)};return computeNodeLinks(graph),computeNodeValues(graph),computeNodeDepths(graph),computeNodeHeights(graph),computeNodeBreadths(graph),computeLinkBreadths(graph),graph}function computeNodeLinks({nodes:nodes6,links:links4}){for(const[i2,node2]of nodes6.entries())node2.index=i2,node2.sourceLinks=[],node2.targetLinks=[];const nodeById=new Map(nodes6.map((d3,i2)=>[id30(d3,i2,nodes6),d3]));for(const[i2,link2]of links4.entries()){link2.index=i2;let{source:source,target:target}=link2;"object"!=typeof source&&(source=link2.source=find3(nodeById,source)),"object"!=typeof target&&(target=link2.target=find3(nodeById,target)),source.sourceLinks.push(link2),target.targetLinks.push(link2)}if(null!=linkSort)for(const{sourceLinks:sourceLinks,targetLinks:targetLinks}of nodes6)sourceLinks.sort(linkSort),targetLinks.sort(linkSort)}function computeNodeValues({nodes:nodes6}){for(const node2 of nodes6)node2.value=void 0===node2.fixedValue?Math.max(sum(node2.sourceLinks,value),sum(node2.targetLinks,value)):node2.fixedValue}function computeNodeDepths({nodes:nodes6}){const n2=nodes6.length;let current=new Set(nodes6),next3=new Set,x5=0;for(;current.size;){for(const node2 of current){node2.depth=x5;for(const{target:target}of node2.sourceLinks)next3.add(target)}if(++x5>n2)throw new Error("circular link");current=next3,next3=new Set}}function computeNodeHeights({nodes:nodes6}){const n2=nodes6.length;let current=new Set(nodes6),next3=new Set,x5=0;for(;current.size;){for(const node2 of current){node2.height=x5;for(const{source:source}of node2.targetLinks)next3.add(source)}if(++x5>n2)throw new Error("circular link");current=next3,next3=new Set}}function computeNodeLayers({nodes:nodes6}){const x5=max9(nodes6,d3=>d3.depth)+1,kx=(x1-x0-dx)/(x5-1),columns=new Array(x5);for(const node2 of nodes6){const i2=Math.max(0,Math.min(x5-1,Math.floor(align.call(null,node2,x5))));node2.layer=i2,node2.x0=x0+i2*kx,node2.x1=node2.x0+dx,columns[i2]?columns[i2].push(node2):columns[i2]=[node2]}if(sort3)for(const column2 of columns)column2.sort(sort3);return columns}function initializeNodeBreadths(columns){const ky=min8(columns,c3=>(y1-y0-(c3.length-1)*py)/sum(c3,value));for(const nodes6 of columns){let y6=y0;for(const node2 of nodes6){node2.y0=y6,node2.y1=y6+node2.value*ky,y6=node2.y1+py;for(const link2 of node2.sourceLinks)link2.width=link2.value*ky}y6=(y1-y6+py)/(nodes6.length+1);for(let i2=0;i2<nodes6.length;++i2){const node2=nodes6[i2];node2.y0+=y6*(i2+1),node2.y1+=y6*(i2+1)}reorderLinks(nodes6)}}function computeNodeBreadths(graph){const columns=computeNodeLayers(graph);py=Math.min(dy,(y1-y0)/(max9(columns,c3=>c3.length)-1)),initializeNodeBreadths(columns);for(let i2=0;i2<iterations;++i2){const alpha=Math.pow(.99,i2),beta=Math.max(1-alpha,(i2+1)/iterations);relaxRightToLeft(columns,alpha,beta),relaxLeftToRight(columns,alpha,beta)}}function relaxLeftToRight(columns,alpha,beta){for(let i2=1,n2=columns.length;i2<n2;++i2){const column2=columns[i2];for(const target of column2){let y6=0,w4=0;for(const{source:source,value:value2}of target.targetLinks){let v3=value2*(target.layer-source.layer);y6+=targetTop(source,target)*v3,w4+=v3}if(!(w4>0))continue;let dy2=(y6/w4-target.y0)*alpha;target.y0+=dy2,target.y1+=dy2,reorderNodeLinks(target)}void 0===sort3&&column2.sort(ascendingBreadth),resolveCollisions(column2,beta)}}function relaxRightToLeft(columns,alpha,beta){for(let i2=columns.length-2;i2>=0;--i2){const column2=columns[i2];for(const source of column2){let y6=0,w4=0;for(const{target:target,value:value2}of source.sourceLinks){let v3=value2*(target.layer-source.layer);y6+=sourceTop(source,target)*v3,w4+=v3}if(!(w4>0))continue;let dy2=(y6/w4-source.y0)*alpha;source.y0+=dy2,source.y1+=dy2,reorderNodeLinks(source)}void 0===sort3&&column2.sort(ascendingBreadth),resolveCollisions(column2,beta)}}function resolveCollisions(nodes6,alpha){const i2=nodes6.length>>1,subject=nodes6[i2];resolveCollisionsBottomToTop(nodes6,subject.y0-py,i2-1,alpha),resolveCollisionsTopToBottom(nodes6,subject.y1+py,i2+1,alpha),resolveCollisionsBottomToTop(nodes6,y1,nodes6.length-1,alpha),resolveCollisionsTopToBottom(nodes6,y0,0,alpha)}function resolveCollisionsTopToBottom(nodes6,y6,i2,alpha){for(;i2<nodes6.length;++i2){const node2=nodes6[i2],dy2=(y6-node2.y0)*alpha;dy2>1e-6&&(node2.y0+=dy2,node2.y1+=dy2),y6=node2.y1+py}}function resolveCollisionsBottomToTop(nodes6,y6,i2,alpha){for(;i2>=0;--i2){const node2=nodes6[i2],dy2=(node2.y1-y6)*alpha;dy2>1e-6&&(node2.y0-=dy2,node2.y1-=dy2),y6=node2.y0-py}}function reorderNodeLinks({sourceLinks:sourceLinks,targetLinks:targetLinks}){if(void 0===linkSort){for(const{source:{sourceLinks:sourceLinks2}}of targetLinks)sourceLinks2.sort(ascendingTargetBreadth);for(const{target:{targetLinks:targetLinks2}}of sourceLinks)targetLinks2.sort(ascendingSourceBreadth)}}function reorderLinks(nodes6){if(void 0===linkSort)for(const{sourceLinks:sourceLinks,targetLinks:targetLinks}of nodes6)sourceLinks.sort(ascendingTargetBreadth),targetLinks.sort(ascendingSourceBreadth)}function targetTop(source,target){let y6=source.y0-(source.sourceLinks.length-1)*py/2;for(const{target:node2,width:width3}of source.sourceLinks){if(node2===target)break;y6+=width3+py}for(const{source:node2,width:width3}of target.targetLinks){if(node2===source)break;y6-=width3}return y6}function sourceTop(source,target){let y6=target.y0-(target.targetLinks.length-1)*py/2;for(const{source:node2,width:width3}of target.targetLinks){if(node2===source)break;y6+=width3+py}for(const{target:node2,width:width3}of source.sourceLinks){if(node2===target)break;y6-=width3}return y6}return __name(sankey,"sankey"),sankey.update=function(graph){return computeLinkBreadths(graph),graph},sankey.nodeId=function(_3){return arguments.length?(id30="function"==typeof _3?_3:constant2(_3),sankey):id30},sankey.nodeAlign=function(_3){return arguments.length?(align="function"==typeof _3?_3:constant2(_3),sankey):align},sankey.nodeSort=function(_3){return arguments.length?(sort3=_3,sankey):sort3},sankey.nodeWidth=function(_3){return arguments.length?(dx=+_3,sankey):dx},sankey.nodePadding=function(_3){return arguments.length?(dy=py=+_3,sankey):dy},sankey.nodes=function(_3){return arguments.length?(nodes5="function"==typeof _3?_3:constant2(_3),sankey):nodes5},sankey.links=function(_3){return arguments.length?(links3="function"==typeof _3?_3:constant2(_3),sankey):links3},sankey.linkSort=function(_3){return arguments.length?(linkSort=_3,sankey):linkSort},sankey.size=function(_3){return arguments.length?(x0=y0=0,x1=+_3[0],y1=+_3[1],sankey):[x1-x0,y1-y0]},sankey.extent=function(_3){return arguments.length?(x0=+_3[0][0],x1=+_3[1][0],y0=+_3[0][1],y1=+_3[1][1],sankey):[[x0,y0],[x1,y1]]},sankey.iterations=function(_3){return arguments.length?(iterations=+_3,sankey):iterations},__name(computeNodeLinks,"computeNodeLinks"),__name(computeNodeValues,"computeNodeValues"),__name(computeNodeDepths,"computeNodeDepths"),__name(computeNodeHeights,"computeNodeHeights"),__name(computeNodeLayers,"computeNodeLayers"),__name(initializeNodeBreadths,"initializeNodeBreadths"),__name(computeNodeBreadths,"computeNodeBreadths"),__name(relaxLeftToRight,"relaxLeftToRight"),__name(relaxRightToLeft,"relaxRightToLeft"),__name(resolveCollisions,"resolveCollisions"),__name(resolveCollisionsTopToBottom,"resolveCollisionsTopToBottom"),__name(resolveCollisionsBottomToTop,"resolveCollisionsBottomToTop"),__name(reorderNodeLinks,"reorderNodeLinks"),__name(reorderLinks,"reorderLinks"),__name(targetTop,"targetTop"),__name(sourceTop,"sourceTop"),sankey}var pi3,tau3,tauEpsilon2,path_default2,init_sankey2=__esm({"../../node_modules/.pnpm/d3-sankey@0.12.3/node_modules/d3-sankey/src/sankey.js"(){init_src33(),init_align(),init_constant9(),__name(ascendingSourceBreadth,"ascendingSourceBreadth"),__name(ascendingTargetBreadth,"ascendingTargetBreadth"),__name(ascendingBreadth,"ascendingBreadth"),__name(value,"value"),__name(defaultId,"defaultId"),__name(defaultNodes,"defaultNodes"),__name(defaultLinks,"defaultLinks"),__name(find3,"find"),__name(computeLinkBreadths,"computeLinkBreadths"),__name(Sankey,"Sankey")}});function Path2(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path3(){return new Path2}var init_path4=__esm({"../../node_modules/.pnpm/d3-path@1.0.9/node_modules/d3-path/src/path.js"(){pi3=Math.PI,tauEpsilon2=(tau3=2*pi3)-1e-6,__name(Path2,"Path"),__name(path3,"path"),Path2.prototype=path3.prototype={constructor:Path2,moveTo:__name(function(x5,y6){this._+="M"+(this._x0=this._x1=+x5)+","+(this._y0=this._y1=+y6)},"moveTo"),closePath:__name(function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},"closePath"),lineTo:__name(function(x5,y6){this._+="L"+(this._x1=+x5)+","+(this._y1=+y6)},"lineTo"),quadraticCurveTo:__name(function(x1,y1,x5,y6){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x5)+","+(this._y1=+y6)},"quadraticCurveTo"),bezierCurveTo:__name(function(x1,y1,x22,y22,x5,y6){this._+="C"+ +x1+","+ +y1+","+ +x22+","+ +y22+","+(this._x1=+x5)+","+(this._y1=+y6)},"bezierCurveTo"),arcTo:__name(function(x1,y1,x22,y22,r2){x1=+x1,y1=+y1,x22=+x22,y22=+y22,r2=+r2;var x0=this._x1,y0=this._y1,x21=x22-x1,y21=y22-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r2<0)throw new Error("negative radius: "+r2);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r2){var x20=x22-x0,y20=y22-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l4=r2*Math.tan((pi3-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l4/l01,t21=l4/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r2+","+r2+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},"arcTo"),arc:__name(function(x5,y6,r2,a0,a1,ccw){x5=+x5,y6=+y6,ccw=!!ccw;var dx=(r2=+r2)*Math.cos(a0),dy=r2*Math.sin(a0),x0=x5+dx,y0=y6+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r2<0)throw new Error("negative radius: "+r2);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r2&&(da<0&&(da=da%tau3+tau3),da>tauEpsilon2?this._+="A"+r2+","+r2+",0,1,"+cw+","+(x5-dx)+","+(y6-dy)+"A"+r2+","+r2+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r2+","+r2+",0,"+ +(da>=pi3)+","+cw+","+(this._x1=x5+r2*Math.cos(a1))+","+(this._y1=y6+r2*Math.sin(a1))))},"arc"),rect:__name(function(x5,y6,w4,h3){this._+="M"+(this._x0=this._x1=+x5)+","+(this._y0=this._y1=+y6)+"h"+ +w4+"v"+ +h3+"h"+-w4+"Z"},"rect"),toString:__name(function(){return this._},"toString")},path_default2=path3}}),init_src34=__esm({"../../node_modules/.pnpm/d3-path@1.0.9/node_modules/d3-path/src/index.js"(){init_path4()}});function constant_default8(x5){return __name(function(){return x5},"constant")}var init_constant10=__esm({"../../node_modules/.pnpm/d3-shape@1.3.7/node_modules/d3-shape/src/constant.js"(){__name(constant_default8,"default")}});function x4(p3){return p3[0]}function y5(p3){return p3[1]}var slice3,init_point2=__esm({"../../node_modules/.pnpm/d3-shape@1.3.7/node_modules/d3-shape/src/point.js"(){__name(x4,"x"),__name(y5,"y")}}),init_array4=__esm({"../../node_modules/.pnpm/d3-shape@1.3.7/node_modules/d3-shape/src/array.js"(){slice3=Array.prototype.slice}});function linkSource(d3){return d3.source}function linkTarget(d3){return d3.target}function link(curve){var source=linkSource,target=linkTarget,x5=x4,y6=y5,context=null;function link2(){var buffer,argv=slice3.call(arguments),s2=source.apply(this,argv),t4=target.apply(this,argv);if(context||(context=buffer=path_default2()),curve(context,+x5.apply(this,(argv[0]=s2,argv)),+y6.apply(this,argv),+x5.apply(this,(argv[0]=t4,argv)),+y6.apply(this,argv)),buffer)return context=null,buffer+""||null}return __name(link2,"link"),link2.source=function(_3){return arguments.length?(source=_3,link2):source},link2.target=function(_3){return arguments.length?(target=_3,link2):target},link2.x=function(_3){return arguments.length?(x5="function"==typeof _3?_3:constant_default8(+_3),link2):x5},link2.y=function(_3){return arguments.length?(y6="function"==typeof _3?_3:constant_default8(+_3),link2):y6},link2.context=function(_3){return arguments.length?(context=null==_3?null:_3,link2):context},link2}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function linkHorizontal(){return link(curveHorizontal)}var init_link=__esm({"../../node_modules/.pnpm/d3-shape@1.3.7/node_modules/d3-shape/src/link/index.js"(){init_src34(),init_array4(),init_constant10(),init_point2(),__name(linkSource,"linkSource"),__name(linkTarget,"linkTarget"),__name(link,"link"),__name(curveHorizontal,"curveHorizontal"),__name(linkHorizontal,"linkHorizontal")}}),init_src35=__esm({"../../node_modules/.pnpm/d3-shape@1.3.7/node_modules/d3-shape/src/index.js"(){init_link()}});function horizontalSource(d3){return[d3.source.x1,d3.y0]}function horizontalTarget(d3){return[d3.target.x0,d3.y1]}function sankeyLinkHorizontal_default(){return linkHorizontal().source(horizontalSource).target(horizontalTarget)}var Uid,alignmentsMap,sankeyRenderer_default,prepareTextForParsing,styles_default15,originalParse,diagram21,init_sankeyLinkHorizontal=__esm({"../../node_modules/.pnpm/d3-sankey@0.12.3/node_modules/d3-sankey/src/sankeyLinkHorizontal.js"(){init_src35(),__name(horizontalSource,"horizontalSource"),__name(horizontalTarget,"horizontalTarget"),__name(sankeyLinkHorizontal_default,"default")}}),init_src36=__esm({"../../node_modules/.pnpm/d3-sankey@0.12.3/node_modules/d3-sankey/src/index.js"(){init_sankey2(),init_align(),init_sankeyLinkHorizontal()}}),init_uid=__esm({"src/rendering-util/uid.ts"(){Uid=class _Uid{static{__name(this,"Uid")}static{this.count=0}static next(name){return new _Uid(name+ ++_Uid.count)}constructor(id30){this.id=id30,this.href=`#${id30}`}toString(){return"url("+this.href+")"}}}}),init_sankeyRenderer=__esm({"src/diagrams/sankey/sankeyRenderer.ts"(){init_diagramAPI(),init_src32(),init_src36(),init_setupGraphViewbox(),init_uid(),alignmentsMap={left:left2,right:right2,center:center3,justify:justify},sankeyRenderer_default={draw:__name(function(text4,id30,_version,diagObj){const{securityLevel:securityLevel,sankey:conf5}=getConfig2(),defaultSankeyConfig=defaultConfig2.sankey;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body"),svg2="sandbox"===securityLevel?root3.select(`[id="${id30}"]`):select_default2(`[id="${id30}"]`),width3=conf5?.width??defaultSankeyConfig.width,height2=conf5?.height??defaultSankeyConfig.width,useMaxWidth=conf5?.useMaxWidth??defaultSankeyConfig.useMaxWidth,nodeAlignment=conf5?.nodeAlignment??defaultSankeyConfig.nodeAlignment,prefix=conf5?.prefix??defaultSankeyConfig.prefix,suffix=conf5?.suffix??defaultSankeyConfig.suffix,showValues=conf5?.showValues??defaultSankeyConfig.showValues,graph=diagObj.db.getGraph(),nodeAlign=alignmentsMap[nodeAlignment];Sankey().nodeId(d3=>d3.id).nodeWidth(10).nodePadding(10+(showValues?15:0)).nodeAlign(nodeAlign).extent([[0,0],[width3,height2]])(graph);const colorScheme=ordinal(Tableau10_default);svg2.append("g").attr("class","nodes").selectAll(".node").data(graph.nodes).join("g").attr("class","node").attr("id",d3=>(d3.uid=Uid.next("node-")).id).attr("transform",function(d3){return"translate("+d3.x0+","+d3.y0+")"}).attr("x",d3=>d3.x0).attr("y",d3=>d3.y0).append("rect").attr("height",d3=>d3.y1-d3.y0).attr("width",d3=>d3.x1-d3.x0).attr("fill",d3=>colorScheme(d3.id));const getText=__name(({id:id31,value:value2})=>showValues?`${id31}\n${prefix}${Math.round(100*value2)/100}${suffix}`:id31,"getText");svg2.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(graph.nodes).join("text").attr("x",d3=>d3.x0<width3/2?d3.x1+6:d3.x0-6).attr("y",d3=>(d3.y1+d3.y0)/2).attr("dy",(showValues?"0":"0.35")+"em").attr("text-anchor",d3=>d3.x0<width3/2?"start":"end").text(getText);const link2=svg2.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(graph.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),linkColor=conf5?.linkColor??"gradient";if("gradient"===linkColor){const gradient=link2.append("linearGradient").attr("id",d3=>(d3.uid=Uid.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",d3=>d3.source.x1).attr("x2",d3=>d3.target.x0);gradient.append("stop").attr("offset","0%").attr("stop-color",d3=>colorScheme(d3.source.id)),gradient.append("stop").attr("offset","100%").attr("stop-color",d3=>colorScheme(d3.target.id))}let coloring;switch(linkColor){case"gradient":coloring=__name(d3=>d3.uid,"coloring");break;case"source":coloring=__name(d3=>colorScheme(d3.source.id),"coloring");break;case"target":coloring=__name(d3=>colorScheme(d3.target.id),"coloring");break;default:coloring=linkColor}link2.append("path").attr("d",sankeyLinkHorizontal_default()).attr("stroke",coloring).attr("stroke-width",d3=>Math.max(1,d3.width)),setupGraphViewbox(void 0,svg2,0,useMaxWidth)},"draw")}}}),init_sankeyUtils=__esm({"src/diagrams/sankey/sankeyUtils.ts"(){prepareTextForParsing=__name(text4=>text4.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,"\n").trim(),"prepareTextForParsing")}}),init_styles15=__esm({"src/diagrams/sankey/styles.js"(){styles_default15=__name(options2=>`.label {\n      font-family: ${options2.fontFamily};\n    }`,"getStyles")}}),sankeyDiagram_exports={};__export(sankeyDiagram_exports,{diagram:()=>diagram21});var DEFAULT_PACKET_CONFIG,PacketDB,populate16,getNextFittingBlock,parser19,draw21,drawWord,renderer6,defaultPacketStyleOptions,styles2,diagram22,init_sankeyDiagram=__esm({"src/diagrams/sankey/sankeyDiagram.ts"(){init_sankey(),init_sankeyDB(),init_sankeyRenderer(),init_sankeyUtils(),init_styles15(),originalParse=sankey_default.parse.bind(sankey_default),sankey_default.parse=text4=>originalParse(prepareTextForParsing(text4)),diagram21={styles:styles_default15,parser:sankey_default,db:sankeyDB_default,renderer:sankeyRenderer_default}}}),init_db=__esm({"src/diagrams/packet/db.ts"(){init_config(),init_defaultConfig(),init_utils2(),init_commonDb(),DEFAULT_PACKET_CONFIG=defaultConfig_default.packet,PacketDB=class{constructor(){this.packet=[],this.setAccTitle=setAccTitle,this.getAccTitle=getAccTitle,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.getAccDescription=getAccDescription,this.setAccDescription=setAccDescription}static{__name(this,"PacketDB")}getConfig(){const config5=cleanAndMerge({...DEFAULT_PACKET_CONFIG,...getConfig().packet});return config5.showBits&&(config5.paddingY+=10),config5}getPacket(){return this.packet}pushWord(word){word.length>0&&this.packet.push(word)}clear(){clear(),this.packet=[]}}}}),init_parser3=__esm({"src/diagrams/packet/parser.ts"(){init_mermaid_parser_core(),init_logger(),init_populateCommonDb(),init_db(),populate16=__name((ast,db7)=>{populateCommonDb(ast,db7);let lastBit=-1,word=[],row=1;const{bitsPerRow:bitsPerRow}=db7.getConfig();for(let{start:start3,end:end2,bits:bits,label:label}of ast.blocks){if(void 0!==start3&&void 0!==end2&&end2<start3)throw new Error(`Packet block ${start3} - ${end2} is invalid. End must be greater than start.`);if(start3??=lastBit+1,start3!==lastBit+1)throw new Error(`Packet block ${start3} - ${end2??start3} is not contiguous. It should start from ${lastBit+1}.`);if(0===bits)throw new Error(`Packet block ${start3} is invalid. Cannot have a zero bit field.`);for(end2??=start3+(bits??1)-1,bits??=end2-start3+1,lastBit=end2,log.debug(`Packet block ${start3} - ${lastBit} with label ${label}`);word.length<=bitsPerRow+1&&db7.getPacket().length<1e4;){const[block2,nextBlock]=getNextFittingBlock({start:start3,end:end2,bits:bits,label:label},row,bitsPerRow);if(word.push(block2),block2.end+1===row*bitsPerRow&&(db7.pushWord(word),word=[],row++),!nextBlock)break;({start:start3,end:end2,bits:bits,label:label}=nextBlock)}}db7.pushWord(word)},"populate"),getNextFittingBlock=__name((block2,row,bitsPerRow)=>{if(void 0===block2.start)throw new Error("start should have been set during first phase");if(void 0===block2.end)throw new Error("end should have been set during first phase");if(block2.start>block2.end)throw new Error(`Block start ${block2.start} is greater than block end ${block2.end}.`);if(block2.end+1<=row*bitsPerRow)return[block2,void 0];const rowEnd=row*bitsPerRow-1,rowStart=row*bitsPerRow;return[{start:block2.start,end:rowEnd,label:block2.label,bits:rowEnd-block2.start},{start:rowStart,end:block2.end,label:block2.label,bits:block2.end-rowStart}]},"getNextFittingBlock"),parser19={parser:{yy:void 0},parse:__name(async input=>{const ast=await parse3("packet",input),db7=parser19.parser?.yy;if(!(db7 instanceof PacketDB))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");log.debug(ast),populate16(ast,db7)},"parse")}}}),init_renderer=__esm({"src/diagrams/packet/renderer.ts"(){init_selectSvgElement(),init_setupGraphViewbox(),draw21=__name((_text,id30,_version,diagram27)=>{const db7=diagram27.db,config5=db7.getConfig(),{rowHeight:rowHeight,paddingY:paddingY,bitWidth:bitWidth,bitsPerRow:bitsPerRow}=config5,words=db7.getPacket(),title2=db7.getDiagramTitle(),totalRowHeight=rowHeight+paddingY,svgHeight=totalRowHeight*(words.length+1)-(title2?0:rowHeight),svgWidth=bitWidth*bitsPerRow+2,svg2=selectSvgElement(id30);svg2.attr("viewbox",`0 0 ${svgWidth} ${svgHeight}`),configureSvgSize(svg2,svgHeight,svgWidth,config5.useMaxWidth);for(const[word,packet2]of words.entries())drawWord(svg2,packet2,word,config5);svg2.append("text").text(title2).attr("x",svgWidth/2).attr("y",svgHeight-totalRowHeight/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),drawWord=__name((svg2,word,rowNumber,{rowHeight:rowHeight,paddingX:paddingX,paddingY:paddingY,bitWidth:bitWidth,bitsPerRow:bitsPerRow,showBits:showBits})=>{const group2=svg2.append("g"),wordY=rowNumber*(rowHeight+paddingY)+paddingY;for(const block2 of word){const blockX=block2.start%bitsPerRow*bitWidth+1,width3=(block2.end-block2.start+1)*bitWidth-paddingX;if(group2.append("rect").attr("x",blockX).attr("y",wordY).attr("width",width3).attr("height",rowHeight).attr("class","packetBlock"),group2.append("text").attr("x",blockX+width3/2).attr("y",wordY+rowHeight/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(block2.label),!showBits)continue;const isSingleBlock=block2.end===block2.start,bitNumberY=wordY-2;group2.append("text").attr("x",blockX+(isSingleBlock?width3/2:0)).attr("y",bitNumberY).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",isSingleBlock?"middle":"start").text(block2.start),isSingleBlock||group2.append("text").attr("x",blockX+width3).attr("y",bitNumberY).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(block2.end)}},"drawWord"),renderer6={draw:draw21}}}),init_styles16=__esm({"src/diagrams/packet/styles.ts"(){init_utils2(),defaultPacketStyleOptions={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},styles2=__name(({packet:packet2}={})=>{const options2=cleanAndMerge(defaultPacketStyleOptions,packet2);return`\n\t.packetByte {\n\t\tfont-size: ${options2.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${options2.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${options2.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${options2.labelColor};\n\t\tfont-size: ${options2.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${options2.titleColor};\n\t\tfont-size: ${options2.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${options2.blockStrokeColor};\n\t\tstroke-width: ${options2.blockStrokeWidth};\n\t\tfill: ${options2.blockFillColor};\n\t}\n\t`},"styles")}}),diagram_exports={};__export(diagram_exports,{diagram:()=>diagram22});var defaultOptions,defaultRadarData,data4,DEFAULT_RADAR_CONFIG,getConfig5,getAxes,getCurves,getOptions2,setAxes,setCurves,computeCurveEntries,db5,populate17,parser20,draw22,drawFrame,drawGraticule,drawAxes2,renderer7,init_diagram=__esm({"src/diagrams/packet/diagram.ts"(){init_db(),init_parser3(),init_renderer(),init_styles16(),diagram22={parser:parser19,get db(){return new PacketDB},renderer:renderer6,styles:styles2}}}),init_db2=__esm({"src/diagrams/radar/db.ts"(){init_config(),init_defaultConfig(),init_utils2(),init_commonDb(),defaultRadarData={axes:[],curves:[],options:defaultOptions={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"}},data4=structuredClone(defaultRadarData),DEFAULT_RADAR_CONFIG=defaultConfig_default.radar,getConfig5=__name(()=>cleanAndMerge({...DEFAULT_RADAR_CONFIG,...getConfig().radar}),"getConfig"),getAxes=__name(()=>data4.axes,"getAxes"),getCurves=__name(()=>data4.curves,"getCurves"),getOptions2=__name(()=>data4.options,"getOptions"),setAxes=__name(axes=>{data4.axes=axes.map(axis2=>({name:axis2.name,label:axis2.label??axis2.name}))},"setAxes"),setCurves=__name(curves=>{data4.curves=curves.map(curve=>({name:curve.name,label:curve.label??curve.name,entries:computeCurveEntries(curve.entries)}))},"setCurves"),computeCurveEntries=__name(entries2=>{if(null==entries2[0].axis)return entries2.map(entry=>entry.value);const axes=getAxes();if(0===axes.length)throw new Error("Axes must be populated before curves for reference entries");return axes.map(axis2=>{const entry=entries2.find(entry2=>entry2.axis?.$refText===axis2.name);if(void 0===entry)throw new Error("Missing entry for axis "+axis2.label);return entry.value})},"computeCurveEntries"),db5={getAxes:getAxes,getCurves:getCurves,getOptions:getOptions2,setAxes:setAxes,setCurves:setCurves,setOptions:__name(options2=>{const optionMap=options2.reduce((acc,option2)=>(acc[option2.name]=option2,acc),{});data4.options={showLegend:optionMap.showLegend?.value??defaultOptions.showLegend,ticks:optionMap.ticks?.value??defaultOptions.ticks,max:optionMap.max?.value??defaultOptions.max,min:optionMap.min?.value??defaultOptions.min,graticule:optionMap.graticule?.value??defaultOptions.graticule}},"setOptions"),getConfig:getConfig5,clear:__name(()=>{clear(),data4=structuredClone(defaultRadarData)},"clear"),setAccTitle:setAccTitle,getAccTitle:getAccTitle,setDiagramTitle:setDiagramTitle,getDiagramTitle:getDiagramTitle,getAccDescription:getAccDescription,setAccDescription:setAccDescription}}}),init_parser4=__esm({"src/diagrams/radar/parser.ts"(){init_mermaid_parser_core(),init_logger(),init_populateCommonDb(),init_db2(),populate17=__name(ast=>{populateCommonDb(ast,db5);const{axes:axes,curves:curves,options:options2}=ast;db5.setAxes(axes),db5.setCurves(curves),db5.setOptions(options2)},"populate"),parser20={parse:__name(async input=>{const ast=await parse3("radar",input);log.debug(ast),populate17(ast)},"parse")}}});function drawCurves(g2,axes,curves,minValue,maxValue,graticule,config5){const numAxes=axes.length,radius2=Math.min(config5.width,config5.height)/2;curves.forEach((curve,index)=>{if(curve.entries.length!==numAxes)return;const points=curve.entries.map((entry,i2)=>{const angle2=2*Math.PI*i2/numAxes-Math.PI/2,r2=relativeRadius(entry,minValue,maxValue,radius2);return{x:r2*Math.cos(angle2),y:r2*Math.sin(angle2)}});"circle"===graticule?g2.append("path").attr("d",closedRoundCurve(points,config5.curveTension)).attr("class",`radarCurve-${index}`):"polygon"===graticule&&g2.append("polygon").attr("points",points.map(p3=>`${p3.x},${p3.y}`).join(" ")).attr("class",`radarCurve-${index}`)})}function relativeRadius(value2,minValue,maxValue,radius2){return radius2*(Math.min(Math.max(value2,minValue),maxValue)-minValue)/(maxValue-minValue)}function closedRoundCurve(points,tension){const numPoints=points.length;let d3=`M${points[0].x},${points[0].y}`;for(let i2=0;i2<numPoints;i2++){const p0=points[(i2-1+numPoints)%numPoints],p1=points[i2],p22=points[(i2+1)%numPoints],p3=points[(i2+2)%numPoints],cp1={x:p1.x+(p22.x-p0.x)*tension,y:p1.y+(p22.y-p0.y)*tension},cp2={x:p22.x-(p3.x-p1.x)*tension,y:p22.y-(p3.y-p1.y)*tension};d3+=` C${cp1.x},${cp1.y} ${cp2.x},${cp2.y} ${p22.x},${p22.y}`}return`${d3} Z`}function drawLegend(g2,curves,showLegend,config5){if(!showLegend)return;const legendX=3*(config5.width/2+config5.marginRight)/4,legendY=3*-(config5.height/2+config5.marginTop)/4;curves.forEach((curve,index)=>{const itemGroup=g2.append("g").attr("transform",`translate(${legendX}, ${legendY+20*index})`);itemGroup.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${index}`),itemGroup.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(curve.label)})}var genIndexStyles,buildRadarStyleOptions,styles3,diagram23,init_renderer2=__esm({"src/diagrams/radar/renderer.ts"(){init_selectSvgElement(),draw22=__name((_text,id30,_version,diagram27)=>{const db7=diagram27.db,axes=db7.getAxes(),curves=db7.getCurves(),options2=db7.getOptions(),config5=db7.getConfig(),title2=db7.getDiagramTitle(),svg2=selectSvgElement(id30),g2=drawFrame(svg2,config5),maxValue=options2.max??Math.max(...curves.map(curve=>Math.max(...curve.entries))),minValue=options2.min,radius2=Math.min(config5.width,config5.height)/2;drawGraticule(g2,axes,radius2,options2.ticks,options2.graticule),drawAxes2(g2,axes,radius2,config5),drawCurves(g2,axes,curves,minValue,maxValue,options2.graticule,config5),drawLegend(g2,curves,options2.showLegend,config5),g2.append("text").attr("class","radarTitle").text(title2).attr("x",0).attr("y",-config5.height/2-config5.marginTop)},"draw"),drawFrame=__name((svg2,config5)=>{const totalWidth=config5.width+config5.marginLeft+config5.marginRight,totalHeight=config5.height+config5.marginTop+config5.marginBottom,center4_x=config5.marginLeft+config5.width/2,center4_y=config5.marginTop+config5.height/2;return svg2.attr("viewbox",`0 0 ${totalWidth} ${totalHeight}`).attr("width",totalWidth).attr("height",totalHeight),svg2.append("g").attr("transform",`translate(${center4_x}, ${center4_y})`)},"drawFrame"),drawGraticule=__name((g2,axes,radius2,ticks2,graticule)=>{if("circle"===graticule)for(let i2=0;i2<ticks2;i2++){const r2=radius2*(i2+1)/ticks2;g2.append("circle").attr("r",r2).attr("class","radarGraticule")}else if("polygon"===graticule){const numAxes=axes.length;for(let i2=0;i2<ticks2;i2++){const r2=radius2*(i2+1)/ticks2,points=axes.map((_3,j3)=>{const angle2=2*j3*Math.PI/numAxes-Math.PI/2;return`${r2*Math.cos(angle2)},${r2*Math.sin(angle2)}`}).join(" ");g2.append("polygon").attr("points",points).attr("class","radarGraticule")}}},"drawGraticule"),drawAxes2=__name((g2,axes,radius2,config5)=>{const numAxes=axes.length;for(let i2=0;i2<numAxes;i2++){const label=axes[i2].label,angle2=2*i2*Math.PI/numAxes-Math.PI/2;g2.append("line").attr("x1",0).attr("y1",0).attr("x2",radius2*config5.axisScaleFactor*Math.cos(angle2)).attr("y2",radius2*config5.axisScaleFactor*Math.sin(angle2)).attr("class","radarAxisLine"),g2.append("text").text(label).attr("x",radius2*config5.axisLabelFactor*Math.cos(angle2)).attr("y",radius2*config5.axisLabelFactor*Math.sin(angle2)).attr("class","radarAxisLabel")}},"drawAxes"),__name(drawCurves,"drawCurves"),__name(relativeRadius,"relativeRadius"),__name(closedRoundCurve,"closedRoundCurve"),__name(drawLegend,"drawLegend"),renderer7={draw:draw22}}}),init_styles17=__esm({"src/diagrams/radar/styles.ts"(){init_utils2(),init_theme_default(),init_config(),genIndexStyles=__name((themeVariables,radarOptions)=>{let sections6="";for(let i2=0;i2<themeVariables.THEME_COLOR_LIMIT;i2++){const indexColor=themeVariables[`cScale${i2}`];sections6+=`\n\t\t.radarCurve-${i2} {\n\t\t\tcolor: ${indexColor};\n\t\t\tfill: ${indexColor};\n\t\t\tfill-opacity: ${radarOptions.curveOpacity};\n\t\t\tstroke: ${indexColor};\n\t\t\tstroke-width: ${radarOptions.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${i2} {\n\t\t\tfill: ${indexColor};\n\t\t\tfill-opacity: ${radarOptions.curveOpacity};\n\t\t\tstroke: ${indexColor};\n\t\t}\n\t\t`}return sections6},"genIndexStyles"),buildRadarStyleOptions=__name(radar2=>{const themeVariables=cleanAndMerge(getThemeVariables3(),getConfig().themeVariables);return{themeVariables:themeVariables,radarOptions:cleanAndMerge(themeVariables.radar,radar2)}},"buildRadarStyleOptions"),styles3=__name(({radar:radar2}={})=>{const{themeVariables:themeVariables,radarOptions:radarOptions}=buildRadarStyleOptions(radar2);return`\n\t.radarTitle {\n\t\tfont-size: ${themeVariables.fontSize};\n\t\tcolor: ${themeVariables.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${radarOptions.axisColor};\n\t\tstroke-width: ${radarOptions.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${radarOptions.axisLabelFontSize}px;\n\t\tcolor: ${radarOptions.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${radarOptions.graticuleColor};\n\t\tfill-opacity: ${radarOptions.graticuleOpacity};\n\t\tstroke: ${radarOptions.graticuleColor};\n\t\tstroke-width: ${radarOptions.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${radarOptions.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${genIndexStyles(themeVariables,radarOptions)}\n\t`},"styles")}}),diagram_exports2={};__export(diagram_exports2,{diagram:()=>diagram23});var parser21,block_default,blockDatabase,edgeList,edgeCount2,config4,classes2,sanitizeText5,addStyleClass,addStyle2Node,setCssClass,populateBlockDatabase,blocks,rootBlock,clear18,cnt3,generateId2,setHierarchy,getColumns,getBlocksFlat,getBlocks,getEdges,getBlock,setBlock,getLogger2,getClasses4,blockDB_default,init_diagram2=__esm({"src/diagrams/radar/diagram.ts"(){init_db2(),init_parser4(),init_renderer2(),init_styles17(),diagram23={parser:parser20,db:db5,renderer:renderer7,styles:styles3}}}),init_block=__esm({"src/diagrams/block/parser/block.jison"(){parser21=function(){var o2=__name(function(k2,v3,o3,l4){for(o3=o3||{},l4=k2.length;l4--;o3[k2[l4]]=v3);return o3},"o"),$V0=[1,15],$V1=[1,7],$V2=[1,13],$V3=[1,14],$V4=[1,19],$V5=[1,16],$V6=[1,17],$V7=[1,18],$V8=[8,30],$V9=[8,10,21,28,29,30,31,39,43,46],$Va=[1,23],$Vb=[1,24],$Vc=[8,10,15,16,21,28,29,30,31,39,43,46],$Vd=[8,10,15,16,21,27,28,29,30,31,39,43,46],$Ve=[1,49],parser24={trace:__name(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:__name(function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 4:yy.getLogger().debug("Rule: separator (NL) ");break;case 5:yy.getLogger().debug("Rule: separator (Space) ");break;case 6:yy.getLogger().debug("Rule: separator (EOF) ");break;case 7:yy.getLogger().debug("Rule: hierarchy: ",$$[$0-1]),yy.setHierarchy($$[$0-1]);break;case 8:yy.getLogger().debug("Stop NL ");break;case 9:yy.getLogger().debug("Stop EOF ");break;case 10:yy.getLogger().debug("Stop NL2 ");break;case 11:yy.getLogger().debug("Stop EOF2 ");break;case 12:yy.getLogger().debug("Rule: statement: ",$$[$0]),"number"==typeof $$[$0].length?this.$=$$[$0]:this.$=[$$[$0]];break;case 13:yy.getLogger().debug("Rule: statement #2: ",$$[$0-1]),this.$=[$$[$0-1]].concat($$[$0]);break;case 14:yy.getLogger().debug("Rule: link: ",$$[$0],yytext),this.$={edgeTypeStr:$$[$0],label:""};break;case 15:yy.getLogger().debug("Rule: LABEL link: ",$$[$0-3],$$[$0-1],$$[$0]),this.$={edgeTypeStr:$$[$0],label:$$[$0-1]};break;case 18:const num=parseInt($$[$0]),spaceId=yy.generateId();this.$={id:spaceId,type:"space",label:"",width:num,children:[]};break;case 23:yy.getLogger().debug("Rule: (nodeStatement link node) ",$$[$0-2],$$[$0-1],$$[$0]," typestr: ",$$[$0-1].edgeTypeStr);const edgeData2=yy.edgeStrToEdgeData($$[$0-1].edgeTypeStr);this.$=[{id:$$[$0-2].id,label:$$[$0-2].label,type:$$[$0-2].type,directions:$$[$0-2].directions},{id:$$[$0-2].id+"-"+$$[$0].id,start:$$[$0-2].id,end:$$[$0].id,label:$$[$0-1].label,type:"edge",directions:$$[$0].directions,arrowTypeEnd:edgeData2,arrowTypeStart:"arrow_open"},{id:$$[$0].id,label:$$[$0].label,type:yy.typeStr2Type($$[$0].typeStr),directions:$$[$0].directions}];break;case 24:yy.getLogger().debug("Rule: nodeStatement (abc88 node size) ",$$[$0-1],$$[$0]),this.$={id:$$[$0-1].id,label:$$[$0-1].label,type:yy.typeStr2Type($$[$0-1].typeStr),directions:$$[$0-1].directions,widthInColumns:parseInt($$[$0],10)};break;case 25:yy.getLogger().debug("Rule: nodeStatement (node) ",$$[$0]),this.$={id:$$[$0].id,label:$$[$0].label,type:yy.typeStr2Type($$[$0].typeStr),directions:$$[$0].directions,widthInColumns:1};break;case 26:yy.getLogger().debug("APA123",this?this:"na"),yy.getLogger().debug("COLUMNS: ",$$[$0]),this.$={type:"column-setting",columns:"auto"===$$[$0]?-1:parseInt($$[$0])};break;case 27:yy.getLogger().debug("Rule: id-block statement : ",$$[$0-2],$$[$0-1]);yy.generateId();this.$={...$$[$0-2],type:"composite",children:$$[$0-1]};break;case 28:yy.getLogger().debug("Rule: blockStatement : ",$$[$0-2],$$[$0-1],$$[$0]);const id30=yy.generateId();this.$={id:id30,type:"composite",label:"",children:$$[$0-1]};break;case 29:yy.getLogger().debug("Rule: node (NODE_ID separator): ",$$[$0]),this.$={id:$$[$0]};break;case 30:yy.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",$$[$0-1],$$[$0]),this.$={id:$$[$0-1],label:$$[$0].label,typeStr:$$[$0].typeStr,directions:$$[$0].directions};break;case 31:yy.getLogger().debug("Rule: dirList: ",$$[$0]),this.$=[$$[$0]];break;case 32:yy.getLogger().debug("Rule: dirList: ",$$[$0-1],$$[$0]),this.$=[$$[$0-1]].concat($$[$0]);break;case 33:yy.getLogger().debug("Rule: nodeShapeNLabel: ",$$[$0-2],$$[$0-1],$$[$0]),this.$={typeStr:$$[$0-2]+$$[$0],label:$$[$0-1]};break;case 34:yy.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",$$[$0-3],$$[$0-2]," #3:",$$[$0-1],$$[$0]),this.$={typeStr:$$[$0-3]+$$[$0],label:$$[$0-2],directions:$$[$0-1]};break;case 35:case 36:this.$={type:"classDef",id:$$[$0-1].trim(),css:$$[$0].trim()};break;case 37:this.$={type:"applyClass",id:$$[$0-1].trim(),styleClass:$$[$0].trim()};break;case 38:this.$={type:"applyStyles",id:$$[$0-1].trim(),stylesStr:$$[$0].trim()}}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:$V0,11:3,13:4,19:5,20:6,21:$V1,22:8,23:9,24:10,25:11,26:12,28:$V2,29:$V3,31:$V4,39:$V5,43:$V6,46:$V7},{8:[1,20]},o2($V8,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:$V0,21:$V1,28:$V2,29:$V3,31:$V4,39:$V5,43:$V6,46:$V7}),o2($V9,[2,16],{14:22,15:$Va,16:$Vb}),o2($V9,[2,17]),o2($V9,[2,18]),o2($V9,[2,19]),o2($V9,[2,20]),o2($V9,[2,21]),o2($V9,[2,22]),o2($Vc,[2,25],{27:[1,25]}),o2($V9,[2,26]),{19:26,26:12,31:$V4},{10:$V0,11:27,13:4,19:5,20:6,21:$V1,22:8,23:9,24:10,25:11,26:12,28:$V2,29:$V3,31:$V4,39:$V5,43:$V6,46:$V7},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},o2($Vd,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},o2($V8,[2,13]),{26:35,31:$V4},{31:[2,14]},{17:[1,36]},o2($Vc,[2,24]),{10:$V0,11:37,13:4,14:22,15:$Va,16:$Vb,19:5,20:6,21:$V1,22:8,23:9,24:10,25:11,26:12,28:$V2,29:$V3,31:$V4,39:$V5,43:$V6,46:$V7},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},o2($Vd,[2,30]),{18:[1,43]},{18:[1,44]},o2($Vc,[2,23]),{18:[1,45]},{30:[1,46]},o2($V9,[2,28]),o2($V9,[2,35]),o2($V9,[2,36]),o2($V9,[2,37]),o2($V9,[2,38]),{36:[1,47]},{33:48,34:$Ve},{15:[1,50]},o2($V9,[2,27]),o2($Vd,[2,33]),{38:[1,51]},{33:52,34:$Ve,38:[2,31]},{31:[2,15]},o2($Vd,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:__name(function(str2,hash){if(!hash.recoverable){var error3=new Error(str2);throw error3.hash=hash,error3}this.trace(str2)},"parseError"),parse:__name(function(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k2 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k2)&&(sharedState.yy[k2]=this.yy[k2]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token2;return"number"!=typeof(token2=tstack.pop()||lexer2.lex()||1)&&(token2 instanceof Array&&(token2=(tstack=token2).pop()),token2=self2.symbols_[token2]||token2),token2}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,__name(function(n2){stack.length=stack.length-2*n2,vstack.length=vstack.length-n2,lstack.length=lstack.length-n2},"popStack"),__name(lex,"lex");for(var symbol,preErrorSymbol,state3,action,r2,p3,len,newState2,expected,yyval={};;){if(state3=stack[stack.length-1],this.defaultActions[state3]?action=this.defaultActions[state3]:(null==symbol&&(symbol=lex()),action=table[state3]&&table[state3][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p3 in expected=[],table[state3])this.terminals_[p3]&&p3>2&&expected.push("'"+this.terminals_[p3]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state3+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r2=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r2;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState2=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState2);break;case 3:return!0}}return!0},"parse")},lexer=function(){var lexer2={EOF:1,parseError:__name(function(str2,hash){if(!this.yy.parser)throw new Error(str2);this.yy.parser.parseError(str2,hash)},"parseError"),setInput:__name(function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:__name(function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},"input"),unput:__name(function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r2=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r2[0],r2[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},"unput"),more:__name(function(){return this._more=!0,this},"more"),reject:__name(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:__name(function(n2){this.unput(this.match.slice(n2))},"less"),pastInput:__name(function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:__name(function(){var next3=this.match;return next3.length<20&&(next3+=this._input.substr(0,20-next3.length)),(next3.substr(0,20)+(next3.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:__name(function(){var pre=this.pastInput(),c3=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c3+"^"},"showPosition"),test_match:__name(function(match2,indexed_rule){var token2,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match2[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match2[0].length},this.yytext+=match2[0],this.match+=match2[0],this.matches=match2,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match2[0].length),this.matched+=match2[0],token2=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token2)return token2;if(this._backtrack){for(var k2 in backup)this[k2]=backup[k2];return!1}return!1},"test_match"),next:__name(function(){if(this.done)return this.EOF;var token2,match2,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i2=0;i2<rules.length;i2++)if((tempMatch=this._input.match(this.rules[rules[i2]]))&&(!match2||tempMatch[0].length>match2[0].length)){if(match2=tempMatch,index=i2,this.options.backtrack_lexer){if(!1!==(token2=this.test_match(tempMatch,rules[i2])))return token2;if(this._backtrack){match2=!1;continue}return!1}if(!this.options.flex)break}return match2?!1!==(token2=this.test_match(match2,rules[index]))&&token2:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:__name(function(){var r2=this.next();return r2||this.lex()},"lex"),begin:__name(function(condition){this.conditionStack.push(condition)},"begin"),popState:__name(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:__name(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:__name(function(n2){return(n2=this.conditionStack.length-1-Math.abs(n2||0))>=0?this.conditionStack[n2]:"INITIAL"},"topState"),pushState:__name(function(condition){this.begin(condition)},"pushState"),stateStackSize:__name(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:__name(function(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return yy.getLogger().debug("Found block-beta"),10;case 1:return yy.getLogger().debug("Found id-block"),29;case 2:return yy.getLogger().debug("Found block"),10;case 3:yy.getLogger().debug(".",yy_.yytext);break;case 4:yy.getLogger().debug("_",yy_.yytext);break;case 5:return 5;case 6:return yy_.yytext=-1,28;case 7:return yy_.yytext=yy_.yytext.replace(/columns\s+/,""),yy.getLogger().debug("COLUMNS (LEX)",yy_.yytext),28;case 8:case 76:case 77:case 99:this.pushState("md_string");break;case 9:return"MD_STR";case 10:case 34:case 79:this.popState();break;case 11:this.pushState("string");break;case 12:yy.getLogger().debug("LEX: POPPING STR:",yy_.yytext),this.popState();break;case 13:return yy.getLogger().debug("LEX: STR end:",yy_.yytext),"STR";case 14:return yy_.yytext=yy_.yytext.replace(/space\:/,""),yy.getLogger().debug("SPACE NUM (LEX)",yy_.yytext),21;case 15:return yy_.yytext="1",yy.getLogger().debug("COLUMNS (LEX)",yy_.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:case 38:case 40:case 41:case 44:return this.popState(),yy.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),yy.getLogger().debug("Lex: ))"),"NODE_DEND";case 42:return this.popState(),yy.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),yy.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),yy.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),yy.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),yy.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:case 49:return this.popState(),yy.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),yy.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),yy.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),yy.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),yy.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return yy.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return yy.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return yy.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:case 59:case 60:case 61:case 64:return yy.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return yy.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 62:return yy.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return yy.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 65:case 66:case 67:case 68:case 69:case 70:case 71:return this.pushState("NODE"),35;case 72:return yy.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),yy.getLogger().debug("LEX ARR START"),37;case 74:return yy.getLogger().debug("Lex: NODE_ID",yy_.yytext),31;case 75:return yy.getLogger().debug("Lex: EOF",yy_.yytext),8;case 78:return"NODE_DESCR";case 80:yy.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:yy.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return yy.getLogger().debug("LEX: NODE_DESCR:",yy_.yytext),"NODE_DESCR";case 83:yy.getLogger().debug("LEX POPPING"),this.popState();break;case 84:yy.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return yy_.yytext=yy_.yytext.replace(/^,\s*/,""),yy.getLogger().debug("Lex (right): dir:",yy_.yytext),"DIR";case 86:return yy_.yytext=yy_.yytext.replace(/^,\s*/,""),yy.getLogger().debug("Lex (left):",yy_.yytext),"DIR";case 87:return yy_.yytext=yy_.yytext.replace(/^,\s*/,""),yy.getLogger().debug("Lex (x):",yy_.yytext),"DIR";case 88:return yy_.yytext=yy_.yytext.replace(/^,\s*/,""),yy.getLogger().debug("Lex (y):",yy_.yytext),"DIR";case 89:return yy_.yytext=yy_.yytext.replace(/^,\s*/,""),yy.getLogger().debug("Lex (up):",yy_.yytext),"DIR";case 90:return yy_.yytext=yy_.yytext.replace(/^,\s*/,""),yy.getLogger().debug("Lex (down):",yy_.yytext),"DIR";case 91:return yy_.yytext="]>",yy.getLogger().debug("Lex (ARROW_DIR end):",yy_.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return yy.getLogger().debug("Lex: LINK","#"+yy_.yytext+"#"),15;case 93:case 94:case 95:return yy.getLogger().debug("Lex: LINK",yy_.yytext),15;case 96:case 97:case 98:return yy.getLogger().debug("Lex: START_LINK",yy_.yytext),this.pushState("LLABEL"),16;case 100:return yy.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),yy.getLogger().debug("Lex: LINK","#"+yy_.yytext+"#"),15;case 102:case 103:return this.popState(),yy.getLogger().debug("Lex: LINK",yy_.yytext),15;case 104:return yy.getLogger().debug("Lex: COLON",yy_.yytext),yy_.yytext=yy_.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}};return lexer2}();function Parser3(){this.yy={}}return parser24.lexer=lexer,__name(Parser3,"Parser"),Parser3.prototype=parser24,parser24.Parser=Parser3,new Parser3}(),parser21.parser=parser21,block_default=parser21}});function typeStr2Type(typeStr){switch(log.debug("typeStr2Type",typeStr),typeStr){case"[]":return"square";case"()":return log.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function edgeTypeStr2Type(typeStr){return log.debug("typeStr2Type",typeStr),"=="===typeStr?"thick":"normal"}function edgeStrToEdgeData(typeStr){switch(typeStr.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}var fade3,styles_default16,insertMarkers3,markers2,markers_default2,padding,getMaxChildSize,init_blockDB=__esm({"src/diagrams/block/blockDB.ts"(){init_clone2(),init_config(),init_diagramAPI(),init_logger(),init_common(),init_commonDb(),blockDatabase=new Map,edgeList=[],edgeCount2=new Map,config4=getConfig2(),classes2=new Map,sanitizeText5=__name(txt=>common_default.sanitizeText(txt,config4),"sanitizeText"),addStyleClass=__name(function(id30,styleAttributes=""){let foundClass=classes2.get(id30);foundClass||(foundClass={id:id30,styles:[],textStyles:[]},classes2.set(id30,foundClass)),null!=styleAttributes&&styleAttributes.split(",").forEach(attrib=>{const fixedAttrib=attrib.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(attrib)){const newStyle2=fixedAttrib.replace("fill","bgFill").replace("color","fill");foundClass.textStyles.push(newStyle2)}foundClass.styles.push(fixedAttrib)})},"addStyleClass"),addStyle2Node=__name(function(id30,styles4=""){const foundBlock=blockDatabase.get(id30);null!=styles4&&(foundBlock.styles=styles4.split(","))},"addStyle2Node"),setCssClass=__name(function(itemIds,cssClassName){itemIds.split(",").forEach(function(id30){let foundBlock=blockDatabase.get(id30);if(void 0===foundBlock){const trimmedId=id30.trim();foundBlock={id:trimmedId,type:"na",children:[]},blockDatabase.set(trimmedId,foundBlock)}foundBlock.classes||(foundBlock.classes=[]),foundBlock.classes.push(cssClassName)})},"setCssClass"),populateBlockDatabase=__name((_blockList,parent4)=>{const blockList=_blockList.flat(),children2=[],columnSettingBlock=blockList.find(b3=>"column-setting"===b3?.type),column2=columnSettingBlock?.columns??-1;for(const block2 of blockList)if("number"==typeof column2&&column2>0&&"column-setting"!==block2.type&&"number"==typeof block2.widthInColumns&&block2.widthInColumns>column2&&log.warn(`Block ${block2.id} width ${block2.widthInColumns} exceeds configured column width ${column2}`),block2.label&&(block2.label=sanitizeText5(block2.label)),"classDef"!==block2.type)if("applyClass"!==block2.type)if("applyStyles"!==block2.type)if("column-setting"===block2.type)parent4.columns=block2.columns??-1;else if("edge"===block2.type){const count2=(edgeCount2.get(block2.id)??0)+1;edgeCount2.set(block2.id,count2),block2.id=count2+"-"+block2.id,edgeList.push(block2)}else{block2.label||("composite"===block2.type?block2.label="":block2.label=block2.id);const existingBlock=blockDatabase.get(block2.id);if(void 0===existingBlock?blockDatabase.set(block2.id,block2):("na"!==block2.type&&(existingBlock.type=block2.type),block2.label!==block2.id&&(existingBlock.label=block2.label)),block2.children&&populateBlockDatabase(block2.children,block2),"space"===block2.type){const w4=block2.width??1;for(let j3=0;j3<w4;j3++){const newBlock=clone_default2(block2);newBlock.id=newBlock.id+"-"+j3,blockDatabase.set(newBlock.id,newBlock),children2.push(newBlock)}}else void 0===existingBlock&&children2.push(block2)}else block2?.stylesStr&&addStyle2Node(block2.id,block2?.stylesStr);else setCssClass(block2.id,block2?.styleClass??"");else addStyleClass(block2.id,block2.css);parent4.children=children2},"populateBlockDatabase"),blocks=[],rootBlock={id:"root",type:"composite",children:[],columns:-1},clear18=__name(()=>{log.debug("Clear called"),clear(),rootBlock={id:"root",type:"composite",children:[],columns:-1},blockDatabase=new Map([["root",rootBlock]]),blocks=[],classes2=new Map,edgeList=[],edgeCount2=new Map},"clear"),__name(typeStr2Type,"typeStr2Type"),__name(edgeTypeStr2Type,"edgeTypeStr2Type"),__name(edgeStrToEdgeData,"edgeStrToEdgeData"),cnt3=0,generateId2=__name(()=>(cnt3++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt3),"generateId"),setHierarchy=__name(block2=>{rootBlock.children=block2,populateBlockDatabase(block2,rootBlock),blocks=rootBlock.children},"setHierarchy"),getColumns=__name(blockId=>{const block2=blockDatabase.get(blockId);return block2?block2.columns?block2.columns:block2.children?block2.children.length:-1:-1},"getColumns"),getBlocksFlat=__name(()=>[...blockDatabase.values()],"getBlocksFlat"),getBlocks=__name(()=>blocks||[],"getBlocks"),getEdges=__name(()=>edgeList,"getEdges"),getBlock=__name(id30=>blockDatabase.get(id30),"getBlock"),setBlock=__name(block2=>{blockDatabase.set(block2.id,block2)},"setBlock"),getLogger2=__name(()=>log,"getLogger"),getClasses4=__name(function(){return classes2},"getClasses"),blockDB_default={getConfig:__name(()=>getConfig().block,"getConfig"),typeStr2Type:typeStr2Type,edgeTypeStr2Type:edgeTypeStr2Type,edgeStrToEdgeData:edgeStrToEdgeData,getLogger:getLogger2,getBlocksFlat:getBlocksFlat,getBlocks:getBlocks,getEdges:getEdges,setHierarchy:setHierarchy,getBlock:getBlock,setBlock:setBlock,getColumns:getColumns,getClasses:getClasses4,clear:clear18,generateId:generateId2}}}),init_styles18=__esm({"src/diagrams/block/styles.ts"(){init_dist(),init_globalStyles(),fade3=__name((color2,opacity)=>{const channel2=channel_default2,r2=channel2(color2,"r"),g2=channel2(color2,"g"),b3=channel2(color2,"b");return rgba_default(r2,g2,b3,opacity)},"fade"),styles_default16=__name(options2=>`.label {\n    font-family: ${options2.fontFamily};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n  .cluster-label text {\n    fill: ${options2.titleColor};\n  }\n  .cluster-label span,p {\n    color: ${options2.titleColor};\n  }\n\n\n\n  .label text,span,p {\n    fill: ${options2.nodeTextColor||options2.textColor};\n    color: ${options2.nodeTextColor||options2.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options2.mainBkg};\n    stroke: ${options2.nodeBorder};\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options2.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options2.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${options2.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options2.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${options2.edgeLabelBackground};\n      fill: ${options2.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${fade3(options2.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ${fade3(options2.mainBkg,.5)};\n    fill: ${fade3(options2.clusterBkg,.5)};\n    stroke: ${fade3(options2.clusterBorder,.2)};\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${options2.titleColor};\n  }\n\n  .cluster span,p {\n    color: ${options2.titleColor};\n  }\n  /* .cluster div {\n    color: ${options2.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${options2.fontFamily};\n    font-size: 12px;\n    background: ${options2.tertiaryColor};\n    border: 1px solid ${options2.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options2.textColor};\n  }\n  ${getIconStyles()}\n`,"getStyles")}}),init_markers2=__esm({"src/dagre-wrapper/markers.js"(){init_logger(),insertMarkers3=__name((elem,markerArray,type3,id30)=>{markerArray.forEach(markerName=>{markers2[markerName](elem,type3,id30)})},"insertMarkers"),markers2={extension:__name((elem,type3,id30)=>{log.trace("Making markers for ",id30),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-extensionStart").attr("class","marker extension "+type3).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-extensionEnd").attr("class","marker extension "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-compositionStart").attr("class","marker composition "+type3).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-compositionEnd").attr("class","marker composition "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-aggregationStart").attr("class","marker aggregation "+type3).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-aggregationEnd").attr("class","marker aggregation "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-dependencyStart").attr("class","marker dependency "+type3).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-dependencyEnd").attr("class","marker dependency "+type3).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-lollipopStart").attr("class","marker lollipop "+type3).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-lollipopEnd").attr("class","marker lollipop "+type3).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:__name((elem,type3,id30)=>{elem.append("marker").attr("id",id30+"_"+type3+"-pointEnd").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),elem.append("marker").attr("id",id30+"_"+type3+"-pointStart").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:__name((elem,type3,id30)=>{elem.append("marker").attr("id",id30+"_"+type3+"-circleEnd").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),elem.append("marker").attr("id",id30+"_"+type3+"-circleStart").attr("class","marker "+type3).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:__name((elem,type3,id30)=>{elem.append("marker").attr("id",id30+"_"+type3+"-crossEnd").attr("class","marker cross "+type3).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),elem.append("marker").attr("id",id30+"_"+type3+"-crossStart").attr("class","marker cross "+type3).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:__name((elem,type3,id30)=>{elem.append("defs").append("marker").attr("id",id30+"_"+type3+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb")},markers_default2=insertMarkers3}});function calculateBlockPosition(columns,position5){if(0===columns||!Number.isInteger(columns))throw new Error("Columns must be an integer !== 0.");if(position5<0||!Number.isInteger(position5))throw new Error("Position must be a non-negative integer."+position5);if(columns<0)return{px:position5,py:0};if(1===columns)return{px:0,py:position5};return{px:position5%columns,py:Math.floor(position5/columns)}}function setBlockSizes(block2,db7,siblingWidth=0,siblingHeight=0){log.debug("setBlockSizes abc95 (start)",block2.id,block2?.size?.x,"block width =",block2?.size,"siblingWidth",siblingWidth),block2?.size?.width||(block2.size={width:siblingWidth,height:siblingHeight,x:0,y:0});let maxWidth2=0,maxHeight=0;if(block2.children?.length>0){for(const child of block2.children)setBlockSizes(child,db7);const childSize=getMaxChildSize(block2);maxWidth2=childSize.width,maxHeight=childSize.height,log.debug("setBlockSizes abc95 maxWidth of",block2.id,":s children is ",maxWidth2,maxHeight);for(const child of block2.children)child.size&&(log.debug(`abc95 Setting size of children of ${block2.id} id=${child.id} ${maxWidth2} ${maxHeight} ${JSON.stringify(child.size)}`),child.size.width=maxWidth2*(child.widthInColumns??1)+padding*((child.widthInColumns??1)-1),child.size.height=maxHeight,child.size.x=0,child.size.y=0,log.debug(`abc95 updating size of ${block2.id} children child:${child.id} maxWidth:${maxWidth2} maxHeight:${maxHeight}`));for(const child of block2.children)setBlockSizes(child,db7,maxWidth2,maxHeight);const columns=block2.columns??-1;let numItems=0;for(const child of block2.children)numItems+=child.widthInColumns??1;let xSize=block2.children.length;columns>0&&columns<numItems&&(xSize=columns);const ySize=Math.ceil(numItems/xSize);let width3=xSize*(maxWidth2+padding)+padding,height2=ySize*(maxHeight+padding)+padding;if(width3<siblingWidth){log.debug(`Detected to small sibling: abc95 ${block2.id} siblingWidth ${siblingWidth} siblingHeight ${siblingHeight} width ${width3}`),width3=siblingWidth,height2=siblingHeight;const childWidth=(siblingWidth-xSize*padding-padding)/xSize,childHeight=(siblingHeight-ySize*padding-padding)/ySize;log.debug("Size indata abc88",block2.id,"childWidth",childWidth,"maxWidth",maxWidth2),log.debug("Size indata abc88",block2.id,"childHeight",childHeight,"maxHeight",maxHeight),log.debug("Size indata abc88 xSize",xSize,"padding",padding);for(const child of block2.children)child.size&&(child.size.width=childWidth,child.size.height=childHeight,child.size.x=0,child.size.y=0)}if(log.debug(`abc95 (finale calc) ${block2.id} xSize ${xSize} ySize ${ySize} columns ${columns}${block2.children.length} width=${Math.max(width3,block2.size?.width||0)}`),width3<(block2?.size?.width||0)){width3=block2?.size?.width||0;const num=columns>0?Math.min(block2.children.length,columns):block2.children.length;if(num>0){const childWidth=(width3-num*padding-padding)/num;log.debug("abc95 (growing to fit) width",block2.id,width3,block2.size?.width,childWidth);for(const child of block2.children)child.size&&(child.size.width=childWidth)}}block2.size={width:width3,height:height2,x:0,y:0}}log.debug("setBlockSizes abc94 (done)",block2.id,block2?.size?.x,block2?.size?.width,block2?.size?.y,block2?.size?.height)}function layoutBlocks(block2,db7){log.debug(`abc85 layout blocks (=>layoutBlocks) ${block2.id} x: ${block2?.size?.x} y: ${block2?.size?.y} width: ${block2?.size?.width}`);const columns=block2.columns??-1;if(log.debug("layoutBlocks columns abc95",block2.id,"=>",columns,block2),block2.children&&block2.children.length>0){const width3=block2?.children[0]?.size?.width??0,widthOfChildren=block2.children.length*width3+(block2.children.length-1)*padding;log.debug("widthOfChildren 88",widthOfChildren,"posX");let columnPos=0;log.debug("abc91 block?.size?.x",block2.id,block2?.size?.x);let startingPosX=block2?.size?.x?block2?.size?.x+(-block2?.size?.width/2||0):-padding,rowPos=0;for(const child of block2.children){const parent4=block2;if(!child.size)continue;const{width:width4,height:height2}=child.size,{px:px,py:py}=calculateBlockPosition(columns,columnPos);if(py!=rowPos&&(rowPos=py,startingPosX=block2?.size?.x?block2?.size?.x+(-block2?.size?.width/2||0):-padding,log.debug("New row in layout for block",block2.id," and child ",child.id,rowPos)),log.debug(`abc89 layout blocks (child) id: ${child.id} Pos: ${columnPos} (px, py) ${px},${py} (${parent4?.size?.x},${parent4?.size?.y}) parent: ${parent4.id} width: ${width4}${padding}`),parent4.size){const halfWidth=width4/2;child.size.x=startingPosX+padding+halfWidth,log.debug(`abc91 layout blocks (calc) px, pyid:${child.id} startingPos=X${startingPosX} new startingPosX${child.size.x} ${halfWidth} padding=${padding} width=${width4} halfWidth=${halfWidth} => x:${child.size.x} y:${child.size.y} ${child.widthInColumns} (width * (child?.w || 1)) / 2 ${width4*(child?.widthInColumns??1)/2}`),startingPosX=child.size.x+halfWidth,child.size.y=parent4.size.y-parent4.size.height/2+py*(height2+padding)+height2/2+padding,log.debug(`abc88 layout blocks (calc) px, pyid:${child.id}startingPosX${startingPosX}${padding}${halfWidth}=>x:${child.size.x}y:${child.size.y}${child.widthInColumns}(width * (child?.w || 1)) / 2${width4*(child?.widthInColumns??1)/2}`)}child.children&&layoutBlocks(child,db7);let columnsFilled=child?.widthInColumns??1;columns>0&&(columnsFilled=Math.min(columnsFilled,columns-columnPos%columns)),columnPos+=columnsFilled,log.debug("abc88 columnsPos",child,columnPos)}}log.debug(`layout blocks (<==layoutBlocks) ${block2.id} x: ${block2?.size?.x} y: ${block2?.size?.y} width: ${block2?.size?.width}`)}function findBounds(block2,{minX:minX,minY:minY,maxX:maxX,maxY:maxY}={minX:0,minY:0,maxX:0,maxY:0}){if(block2.size&&"root"!==block2.id){const{x:x5,y:y6,width:width3,height:height2}=block2.size;x5-width3/2<minX&&(minX=x5-width3/2),y6-height2/2<minY&&(minY=y6-height2/2),x5+width3/2>maxX&&(maxX=x5+width3/2),y6+height2/2>maxY&&(maxY=y6+height2/2)}if(block2.children)for(const child of block2.children)({minX:minX,minY:minY,maxX:maxX,maxY:maxY}=findBounds(child,{minX:minX,minY:minY,maxX:maxX,maxY:maxY}));return{minX:minX,minY:minY,maxX:maxX,maxY:maxY}}function layout5(db7){const root3=db7.getBlock("root");if(!root3)return;setBlockSizes(root3,db7,0,0),layoutBlocks(root3,db7),log.debug("getBlocks",JSON.stringify(root3,null,2));const{minX:minX,minY:minY,maxX:maxX,maxY:maxY}=findBounds(root3);return{x:minX,y:minY,width:maxX-minX,height:maxY-minY}}var createLabel_default2,init_layout3=__esm({"src/diagrams/block/layout.ts"(){init_logger(),init_diagramAPI(),padding=getConfig2()?.block?.padding??8,__name(calculateBlockPosition,"calculateBlockPosition"),getMaxChildSize=__name(block2=>{let maxWidth2=0,maxHeight=0;for(const child of block2.children){const{width:width3,height:height2,x:x5,y:y6}=child.size??{width:0,height:0,x:0,y:0};log.debug("getMaxChildSize abc95 child:",child.id,"width:",width3,"height:",height2,"x:",x5,"y:",y6,child.type),"space"!==child.type&&(width3>maxWidth2&&(maxWidth2=width3/(block2.widthInColumns??1)),height2>maxHeight&&(maxHeight=height2))}return{width:maxWidth2,height:maxHeight}},"getMaxChildSize"),__name(setBlockSizes,"setBlockSizes"),__name(layoutBlocks,"layoutBlocks"),__name(findBounds,"findBounds"),__name(layout5,"layout")}});function applyStyle3(dom,styleFn){styleFn&&dom.attr("style",styleFn)}function addHtmlLabel2(node2,config5){const fo=select_default2(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),div=fo.append("xhtml:div"),label=node2.label,labelClass=node2.isNode?"nodeLabel":"edgeLabel",span=div.append("span");return span.html(sanitizeText(label,config5)),applyStyle3(span,node2.labelStyle),span.attr("class",labelClass),applyStyle3(div,node2.labelStyle),div.style("display","inline-block"),div.style("white-space","nowrap"),div.attr("xmlns","http://www.w3.org/1999/xhtml"),fo.node()}var addEdgeMarkers2,arrowTypesMap2,addEdgeMarker2,edgeLabels2,terminalLabels2,insertEdgeLabel2,positionEdgeLabel2,outsideNode2,intersection3,cutPathAtIntersect2,insertEdge2,init_createLabel2=__esm({"src/dagre-wrapper/createLabel.js"(){init_src32(),init_diagramAPI(),init_common(),init_logger(),init_createText(),init_utils2(),__name(applyStyle3,"applyStyle"),__name(addHtmlLabel2,"addHtmlLabel"),createLabel_default2=__name(async(_vertexText,style3,isTitle,isNode2)=>{let vertexText=_vertexText||"";"object"==typeof vertexText&&(vertexText=vertexText[0]);const config5=getConfig2();if(evaluate(config5.flowchart.htmlLabels)){vertexText=vertexText.replace(/\\n|\n/g,"<br />"),log.debug("vertexText"+vertexText);return addHtmlLabel2({isNode:isNode2,label:await replaceIconSubstring(decodeEntities(vertexText)),labelStyle:style3.replace("fill:","color:")},config5)}{const svgLabel=document.createElementNS("http://www.w3.org/2000/svg","text");svgLabel.setAttribute("style",style3.replace("color:","fill:"));let rows=[];rows="string"==typeof vertexText?vertexText.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(vertexText)?vertexText:[];for(const row of rows){const tspan=document.createElementNS("http://www.w3.org/2000/svg","tspan");tspan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),tspan.setAttribute("dy","1em"),tspan.setAttribute("x","0"),isTitle?tspan.setAttribute("class","title-row"):tspan.setAttribute("class","row"),tspan.textContent=row.trim(),svgLabel.appendChild(tspan)}return svgLabel}},"createLabel")}}),init_edgeMarker2=__esm({"src/dagre-wrapper/edgeMarker.ts"(){init_logger(),addEdgeMarkers2=__name((svgPath,edge,url,id30,diagramType)=>{edge.arrowTypeStart&&addEdgeMarker2(svgPath,"start",edge.arrowTypeStart,url,id30,diagramType),edge.arrowTypeEnd&&addEdgeMarker2(svgPath,"end",edge.arrowTypeEnd,url,id30,diagramType)},"addEdgeMarkers"),arrowTypesMap2={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},addEdgeMarker2=__name((svgPath,position5,arrowType,url,id30,diagramType)=>{const endMarkerType=arrowTypesMap2[arrowType];if(!endMarkerType)return void log.warn(`Unknown arrow type: ${arrowType}`);const suffix="start"===position5?"Start":"End";svgPath.attr(`marker-${position5}`,`url(${url}#${id30}_${diagramType}-${endMarkerType}${suffix})`)},"addEdgeMarker")}});function setTerminalWidth2(fo,value2){getConfig2().flowchart.htmlLabels&&fo&&(fo.style.width=9*value2.length+"px",fo.style.height="12px")}var expandAndDeduplicateDirections,getArrowPoints,intersect_node_default2,init_edges2=__esm({"src/dagre-wrapper/edges.js"(){init_logger(),init_createLabel2(),init_createText(),init_src32(),init_diagramAPI(),init_utils2(),init_common(),init_lineWithOffset(),init_subGraphTitleMargins(),init_edgeMarker2(),edgeLabels2={},terminalLabels2={},insertEdgeLabel2=__name(async(elem,edge)=>{const config5=getConfig2(),useHtmlLabels=evaluate(config5.flowchart.htmlLabels),labelElement="markdown"===edge.labelType?createText(elem,edge.label,{style:edge.labelStyle,useHtmlLabels:useHtmlLabels,addSvgBackground:!0},config5):await createLabel_default2(edge.label,edge.labelStyle),edgeLabel=elem.insert("g").attr("class","edgeLabel"),label=edgeLabel.insert("g").attr("class","label");label.node().appendChild(labelElement);let fo,bbox=labelElement.getBBox();if(useHtmlLabels){const div=labelElement.children[0],dv=select_default2(labelElement);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}if(label.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"),edgeLabels2[edge.id]=edgeLabel,edge.width=bbox.width,edge.height=bbox.height,edge.startLabelLeft){const startLabelElement=await createLabel_default2(edge.startLabelLeft,edge.labelStyle),startEdgeLabelLeft=elem.insert("g").attr("class","edgeTerminals"),inner2=startEdgeLabelLeft.insert("g").attr("class","inner");fo=inner2.node().appendChild(startLabelElement);const slBox=startLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),terminalLabels2[edge.id]||(terminalLabels2[edge.id]={}),terminalLabels2[edge.id].startLeft=startEdgeLabelLeft,setTerminalWidth2(fo,edge.startLabelLeft)}if(edge.startLabelRight){const startLabelElement=await createLabel_default2(edge.startLabelRight,edge.labelStyle),startEdgeLabelRight=elem.insert("g").attr("class","edgeTerminals"),inner2=startEdgeLabelRight.insert("g").attr("class","inner");fo=startEdgeLabelRight.node().appendChild(startLabelElement),inner2.node().appendChild(startLabelElement);const slBox=startLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),terminalLabels2[edge.id]||(terminalLabels2[edge.id]={}),terminalLabels2[edge.id].startRight=startEdgeLabelRight,setTerminalWidth2(fo,edge.startLabelRight)}if(edge.endLabelLeft){const endLabelElement=await createLabel_default2(edge.endLabelLeft,edge.labelStyle),endEdgeLabelLeft=elem.insert("g").attr("class","edgeTerminals"),inner2=endEdgeLabelLeft.insert("g").attr("class","inner");fo=inner2.node().appendChild(endLabelElement);const slBox=endLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),endEdgeLabelLeft.node().appendChild(endLabelElement),terminalLabels2[edge.id]||(terminalLabels2[edge.id]={}),terminalLabels2[edge.id].endLeft=endEdgeLabelLeft,setTerminalWidth2(fo,edge.endLabelLeft)}if(edge.endLabelRight){const endLabelElement=await createLabel_default2(edge.endLabelRight,edge.labelStyle),endEdgeLabelRight=elem.insert("g").attr("class","edgeTerminals"),inner2=endEdgeLabelRight.insert("g").attr("class","inner");fo=inner2.node().appendChild(endLabelElement);const slBox=endLabelElement.getBBox();inner2.attr("transform","translate("+-slBox.width/2+", "+-slBox.height/2+")"),endEdgeLabelRight.node().appendChild(endLabelElement),terminalLabels2[edge.id]||(terminalLabels2[edge.id]={}),terminalLabels2[edge.id].endRight=endEdgeLabelRight,setTerminalWidth2(fo,edge.endLabelRight)}return labelElement},"insertEdgeLabel"),__name(setTerminalWidth2,"setTerminalWidth"),positionEdgeLabel2=__name((edge,paths)=>{log.debug("Moving label abc88 ",edge.id,edge.label,edgeLabels2[edge.id],paths);let path4=paths.updatedPath?paths.updatedPath:paths.originalPath;const siteConfig2=getConfig2(),{subGraphTitleTotalMargin:subGraphTitleTotalMargin}=getSubGraphTitleMargins(siteConfig2);if(edge.label){const el=edgeLabels2[edge.id];let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcLabelPosition(path4);log.debug("Moving label "+edge.label+" from (",x5,",",y6,") to (",pos.x,",",pos.y,") abc88"),paths.updatedPath&&(x5=pos.x,y6=pos.y)}el.attr("transform",`translate(${x5}, ${y6+subGraphTitleTotalMargin/2})`)}if(edge.startLabelLeft){const el=terminalLabels2[edge.id].startLeft;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeStart?10:0,"start_left",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}if(edge.startLabelRight){const el=terminalLabels2[edge.id].startRight;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeStart?10:0,"start_right",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}if(edge.endLabelLeft){const el=terminalLabels2[edge.id].endLeft;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeEnd?10:0,"end_left",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}if(edge.endLabelRight){const el=terminalLabels2[edge.id].endRight;let x5=edge.x,y6=edge.y;if(path4){const pos=utils_default2.calcTerminalLabelPosition(edge.arrowTypeEnd?10:0,"end_right",path4);x5=pos.x,y6=pos.y}el.attr("transform",`translate(${x5}, ${y6})`)}},"positionEdgeLabel"),outsideNode2=__name((node2,point8)=>{const x5=node2.x,y6=node2.y,dx=Math.abs(point8.x-x5),dy=Math.abs(point8.y-y6),w4=node2.width/2,h3=node2.height/2;return dx>=w4||dy>=h3},"outsideNode"),intersection3=__name((node2,outsidePoint,insidePoint)=>{log.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(outsidePoint)}\n  insidePoint : ${JSON.stringify(insidePoint)}\n  node        : x:${node2.x} y:${node2.y} w:${node2.width} h:${node2.height}`);const x5=node2.x,y6=node2.y,dx=Math.abs(x5-insidePoint.x),w4=node2.width/2;let r2=insidePoint.x<outsidePoint.x?w4-dx:w4+dx;const h3=node2.height/2,Q3=Math.abs(outsidePoint.y-insidePoint.y),R3=Math.abs(outsidePoint.x-insidePoint.x);if(Math.abs(y6-outsidePoint.y)*w4>Math.abs(x5-outsidePoint.x)*h3){let q3=insidePoint.y<outsidePoint.y?outsidePoint.y-h3-y6:y6-h3-outsidePoint.y;r2=R3*q3/Q3;const res={x:insidePoint.x<outsidePoint.x?insidePoint.x+r2:insidePoint.x-R3+r2,y:insidePoint.y<outsidePoint.y?insidePoint.y+Q3-q3:insidePoint.y-Q3+q3};return 0===r2&&(res.x=outsidePoint.x,res.y=outsidePoint.y),0===R3&&(res.x=outsidePoint.x),0===Q3&&(res.y=outsidePoint.y),log.debug(`abc89 topp/bott calc, Q ${Q3}, q ${q3}, R ${R3}, r ${r2}`,res),res}{r2=insidePoint.x<outsidePoint.x?outsidePoint.x-w4-x5:x5-w4-outsidePoint.x;let q3=Q3*r2/R3,_x=insidePoint.x<outsidePoint.x?insidePoint.x+R3-r2:insidePoint.x-R3+r2,_y=insidePoint.y<outsidePoint.y?insidePoint.y+q3:insidePoint.y-q3;return log.debug(`sides calc abc89, Q ${Q3}, q ${q3}, R ${R3}, r ${r2}`,{_x:_x,_y:_y}),0===r2&&(_x=outsidePoint.x,_y=outsidePoint.y),0===R3&&(_x=outsidePoint.x),0===Q3&&(_y=outsidePoint.y),{x:_x,y:_y}}},"intersection"),cutPathAtIntersect2=__name((_points,boundaryNode)=>{log.debug("abc88 cutPathAtIntersect",_points,boundaryNode);let points=[],lastPointOutside=_points[0],isInside=!1;return _points.forEach(point8=>{if(outsideNode2(boundaryNode,point8)||isInside)lastPointOutside=point8,isInside||points.push(point8);else{const inter=intersection3(boundaryNode,lastPointOutside,point8);let pointPresent=!1;points.forEach(p3=>{pointPresent=pointPresent||p3.x===inter.x&&p3.y===inter.y}),points.some(e3=>e3.x===inter.x&&e3.y===inter.y)||points.push(inter),isInside=!0}}),points},"cutPathAtIntersect"),insertEdge2=__name(function(elem,e3,edge,clusterDb2,diagramType,graph,id30){let points=edge.points;log.debug("abc88 InsertEdge: edge=",edge,"e=",e3);let pointsHasChanged=!1;const tail=graph.node(e3.v);var head2=graph.node(e3.w);head2?.intersect&&tail?.intersect&&(points=points.slice(1,edge.points.length-1),points.unshift(tail.intersect(points[0])),points.push(head2.intersect(points[points.length-1]))),edge.toCluster&&(log.debug("to cluster abc88",clusterDb2[edge.toCluster]),points=cutPathAtIntersect2(edge.points,clusterDb2[edge.toCluster].node),pointsHasChanged=!0),edge.fromCluster&&(log.debug("from cluster abc88",clusterDb2[edge.fromCluster]),points=cutPathAtIntersect2(points.reverse(),clusterDb2[edge.fromCluster].node).reverse(),pointsHasChanged=!0);const lineData=points.filter(p3=>!Number.isNaN(p3.y));let curve=basis_default2;!edge.curve||"graph"!==diagramType&&"flowchart"!==diagramType||(curve=edge.curve);const{x:x5,y:y6}=getLineFunctionsWithOffset(edge),lineFunction=line_default().x(x5).y(y6).curve(curve);let strokeClasses;switch(edge.thickness){case"normal":strokeClasses="edge-thickness-normal";break;case"thick":case"invisible":strokeClasses="edge-thickness-thick";break;default:strokeClasses=""}switch(edge.pattern){case"solid":strokeClasses+=" edge-pattern-solid";break;case"dotted":strokeClasses+=" edge-pattern-dotted";break;case"dashed":strokeClasses+=" edge-pattern-dashed"}const svgPath=elem.append("path").attr("d",lineFunction(lineData)).attr("id",edge.id).attr("class"," "+strokeClasses+(edge.classes?" "+edge.classes:"")).attr("style",edge.style);let url="";(getConfig2().flowchart.arrowMarkerAbsolute||getConfig2().state.arrowMarkerAbsolute)&&(url=getUrl(!0)),addEdgeMarkers2(svgPath,edge,url,id30,diagramType);let paths={};return pointsHasChanged&&(paths.updatedPath=points),paths.originalPath=edge.points,paths},"insertEdge")}}),init_blockArrowHelper=__esm({"src/dagre-wrapper/blockArrowHelper.ts"(){expandAndDeduplicateDirections=__name(directions=>{const uniqueDirections=new Set;for(const direction of directions)switch(direction){case"x":uniqueDirections.add("right"),uniqueDirections.add("left");break;case"y":uniqueDirections.add("up"),uniqueDirections.add("down");break;default:uniqueDirections.add(direction)}return uniqueDirections},"expandAndDeduplicateDirections"),getArrowPoints=__name((duplicatedDirections,bbox,node2)=>{const directions=expandAndDeduplicateDirections(duplicatedDirections),height2=bbox.height+2*node2.padding,midpoint3=height2/2,width3=bbox.width+2*midpoint3+node2.padding,padding2=node2.padding/2;return directions.has("right")&&directions.has("left")&&directions.has("up")&&directions.has("down")?[{x:0,y:0},{x:midpoint3,y:0},{x:width3/2,y:2*padding2},{x:width3-midpoint3,y:0},{x:width3,y:0},{x:width3,y:-height2/3},{x:width3+2*padding2,y:-height2/2},{x:width3,y:-2*height2/3},{x:width3,y:-height2},{x:width3-midpoint3,y:-height2},{x:width3/2,y:-height2-2*padding2},{x:midpoint3,y:-height2},{x:0,y:-height2},{x:0,y:-2*height2/3},{x:-2*padding2,y:-height2/2},{x:0,y:-height2/3}]:directions.has("right")&&directions.has("left")&&directions.has("up")?[{x:midpoint3,y:0},{x:width3-midpoint3,y:0},{x:width3,y:-height2/2},{x:width3-midpoint3,y:-height2},{x:midpoint3,y:-height2},{x:0,y:-height2/2}]:directions.has("right")&&directions.has("left")&&directions.has("down")?[{x:0,y:0},{x:midpoint3,y:-height2},{x:width3-midpoint3,y:-height2},{x:width3,y:0}]:directions.has("right")&&directions.has("up")&&directions.has("down")?[{x:0,y:0},{x:width3,y:-midpoint3},{x:width3,y:-height2+midpoint3},{x:0,y:-height2}]:directions.has("left")&&directions.has("up")&&directions.has("down")?[{x:width3,y:0},{x:0,y:-midpoint3},{x:0,y:-height2+midpoint3},{x:width3,y:-height2}]:directions.has("right")&&directions.has("left")?[{x:midpoint3,y:0},{x:midpoint3,y:-padding2},{x:width3-midpoint3,y:-padding2},{x:width3-midpoint3,y:0},{x:width3,y:-height2/2},{x:width3-midpoint3,y:-height2},{x:width3-midpoint3,y:-height2+padding2},{x:midpoint3,y:-height2+padding2},{x:midpoint3,y:-height2},{x:0,y:-height2/2}]:directions.has("up")&&directions.has("down")?[{x:width3/2,y:0},{x:0,y:-padding2},{x:midpoint3,y:-padding2},{x:midpoint3,y:-height2+padding2},{x:0,y:-height2+padding2},{x:width3/2,y:-height2},{x:width3,y:-height2+padding2},{x:width3-midpoint3,y:-height2+padding2},{x:width3-midpoint3,y:-padding2},{x:width3,y:-padding2}]:directions.has("right")&&directions.has("up")?[{x:0,y:0},{x:width3,y:-midpoint3},{x:0,y:-height2}]:directions.has("right")&&directions.has("down")?[{x:0,y:0},{x:width3,y:0},{x:0,y:-height2}]:directions.has("left")&&directions.has("up")?[{x:width3,y:0},{x:0,y:-midpoint3},{x:width3,y:-height2}]:directions.has("left")&&directions.has("down")?[{x:width3,y:0},{x:0,y:0},{x:width3,y:-height2}]:directions.has("right")?[{x:midpoint3,y:-padding2},{x:midpoint3,y:-padding2},{x:width3-midpoint3,y:-padding2},{x:width3-midpoint3,y:0},{x:width3,y:-height2/2},{x:width3-midpoint3,y:-height2},{x:width3-midpoint3,y:-height2+padding2},{x:midpoint3,y:-height2+padding2},{x:midpoint3,y:-height2+padding2}]:directions.has("left")?[{x:midpoint3,y:0},{x:midpoint3,y:-padding2},{x:width3-midpoint3,y:-padding2},{x:width3-midpoint3,y:-height2+padding2},{x:midpoint3,y:-height2+padding2},{x:midpoint3,y:-height2},{x:0,y:-height2/2}]:directions.has("up")?[{x:midpoint3,y:-padding2},{x:midpoint3,y:-height2+padding2},{x:0,y:-height2+padding2},{x:width3/2,y:-height2},{x:width3,y:-height2+padding2},{x:width3-midpoint3,y:-height2+padding2},{x:width3-midpoint3,y:-padding2}]:directions.has("down")?[{x:width3/2,y:0},{x:0,y:-padding2},{x:midpoint3,y:-padding2},{x:midpoint3,y:-height2+padding2},{x:width3-midpoint3,y:-height2+padding2},{x:width3-midpoint3,y:-padding2},{x:width3,y:-padding2}]:[{x:0,y:0}]},"getArrowPoints")}});function intersectNode2(node2,point8){return node2.intersect(point8)}var intersect_ellipse_default2,init_intersect_node2=__esm({"src/dagre-wrapper/intersect/intersect-node.js"(){__name(intersectNode2,"intersectNode"),intersect_node_default2=intersectNode2}});function intersectEllipse2(node2,rx,ry,point8){var cx=node2.x,cy=node2.y,px=cx-point8.x,py=cy-point8.y,det=Math.sqrt(rx*rx*py*py+ry*ry*px*px),dx=Math.abs(rx*ry*px/det);point8.x<cx&&(dx=-dx);var dy=Math.abs(rx*ry*py/det);return point8.y<cy&&(dy=-dy),{x:cx+dx,y:cy+dy}}var intersect_circle_default2,init_intersect_ellipse2=__esm({"src/dagre-wrapper/intersect/intersect-ellipse.js"(){__name(intersectEllipse2,"intersectEllipse"),intersect_ellipse_default2=intersectEllipse2}});function intersectCircle2(node2,rx,point8){return intersect_ellipse_default2(node2,rx,rx,point8)}var intersect_line_default2,init_intersect_circle2=__esm({"src/dagre-wrapper/intersect/intersect-circle.js"(){init_intersect_ellipse2(),__name(intersectCircle2,"intersectCircle"),intersect_circle_default2=intersectCircle2}});function intersectLine2(p1,p22,q1,q22){var a1,a2,b1,b22,c1,c22,r1,r2,r3,r4,denom,offset,num;if(a1=p22.y-p1.y,b1=p1.x-p22.x,c1=p22.x*p1.y-p1.x*p22.y,r3=a1*q1.x+b1*q1.y+c1,r4=a1*q22.x+b1*q22.y+c1,!(0!==r3&&0!==r4&&sameSign2(r3,r4)||(a2=q22.y-q1.y,b22=q1.x-q22.x,c22=q22.x*q1.y-q1.x*q22.y,r1=a2*p1.x+b22*p1.y+c22,r2=a2*p22.x+b22*p22.y+c22,0!==r1&&0!==r2&&sameSign2(r1,r2)||0===(denom=a1*b22-a2*b1))))return offset=Math.abs(denom/2),{x:(num=b1*c22-b22*c1)<0?(num-offset)/denom:(num+offset)/denom,y:(num=a2*c1-a1*c22)<0?(num-offset)/denom:(num+offset)/denom}}function sameSign2(r1,r2){return r1*r2>0}var intersect_polygon_default2,init_intersect_line2=__esm({"src/dagre-wrapper/intersect/intersect-line.js"(){__name(intersectLine2,"intersectLine"),__name(sameSign2,"sameSign"),intersect_line_default2=intersectLine2}});function intersectPolygon2(node2,polyPoints,point8){var x1=node2.x,y1=node2.y,intersections=[],minX=Number.POSITIVE_INFINITY,minY=Number.POSITIVE_INFINITY;"function"==typeof polyPoints.forEach?polyPoints.forEach(function(entry){minX=Math.min(minX,entry.x),minY=Math.min(minY,entry.y)}):(minX=Math.min(minX,polyPoints.x),minY=Math.min(minY,polyPoints.y));for(var left3=x1-node2.width/2-minX,top2=y1-node2.height/2-minY,i2=0;i2<polyPoints.length;i2++){var p1=polyPoints[i2],p22=polyPoints[i2<polyPoints.length-1?i2+1:0],intersect3=intersect_line_default2(node2,point8,{x:left3+p1.x,y:top2+p1.y},{x:left3+p22.x,y:top2+p22.y});intersect3&&intersections.push(intersect3)}return intersections.length?(intersections.length>1&&intersections.sort(function(p3,q3){var pdx=p3.x-point8.x,pdy=p3.y-point8.y,distp=Math.sqrt(pdx*pdx+pdy*pdy),qdx=q3.x-point8.x,qdy=q3.y-point8.y,distq=Math.sqrt(qdx*qdx+qdy*qdy);return distp<distq?-1:distp===distq?0:1}),intersections[0]):node2}var intersect_rect_default2,intersect_default2,labelHelper2,updateNodeBounds2,init_intersect_polygon2=__esm({"src/dagre-wrapper/intersect/intersect-polygon.js"(){init_intersect_line2(),intersect_polygon_default2=intersectPolygon2,__name(intersectPolygon2,"intersectPolygon")}}),init_intersect_rect2=__esm({"src/dagre-wrapper/intersect/intersect-rect.js"(){intersect_rect_default2=__name((node2,point8)=>{var sx,sy,x5=node2.x,y6=node2.y,dx=point8.x-x5,dy=point8.y-y6,w4=node2.width/2,h3=node2.height/2;return Math.abs(dy)*w4>Math.abs(dx)*h3?(dy<0&&(h3=-h3),sx=0===dy?0:h3*dx/dy,sy=h3):(dx<0&&(w4=-w4),sx=w4,sy=0===dx?0:w4*dy/dx),{x:x5+sx,y:y6+sy}},"intersectRect")}}),init_intersect2=__esm({"src/dagre-wrapper/intersect/index.js"(){init_intersect_node2(),init_intersect_circle2(),init_intersect_ellipse2(),init_intersect_polygon2(),init_intersect_rect2(),intersect_default2={node:intersect_node_default2,circle:intersect_circle_default2,ellipse:intersect_ellipse_default2,polygon:intersect_polygon_default2,rect:intersect_rect_default2}}});function insertPolygonShape2(parent4,w4,h3,points){return parent4.insert("polygon",":first-child").attr("points",points.map(function(d3){return d3.x+","+d3.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-w4/2+","+h3/2+")")}var note_default,formatClass,getClassesFromNode,question2,choice2,hexagon2,block_arrow,rect_left_inv_arrow2,lean_right2,lean_left2,trapezoid2,inv_trapezoid2,rect_right_inv_arrow,cylinder2,rect2,composite,labelRect2,rectWithTitle2,stadium2,circle5,doublecircle2,subroutine2,start2,forkJoin2,shapes3,nodeElems2,insertNode2,positionNode2,init_util4=__esm({"src/dagre-wrapper/shapes/util.js"(){init_createLabel2(),init_createText(),init_diagramAPI(),init_src32(),init_common(),init_utils2(),labelHelper2=__name(async(parent4,node2,_classes,isNode2)=>{const config5=getConfig2();let classes3;const useHtmlLabels=node2.useHtmlLabels||evaluate(config5.flowchart.htmlLabels);classes3=_classes||"node default";const shapeSvg=parent4.insert("g").attr("class",classes3).attr("id",node2.domId||node2.id),label=shapeSvg.insert("g").attr("class","label").attr("style",node2.labelStyle);let labelText;labelText=void 0===node2.labelText?"":"string"==typeof node2.labelText?node2.labelText:node2.labelText[0];const textNode=label.node();let text4;text4="markdown"===node2.labelType?createText(label,sanitizeText(decodeEntities(labelText),config5),{useHtmlLabels:useHtmlLabels,width:node2.width||config5.flowchart.wrappingWidth,classes:"markdown-node-label"},config5):textNode.appendChild(await createLabel_default2(sanitizeText(decodeEntities(labelText),config5),node2.labelStyle,!1,isNode2));let bbox=text4.getBBox();const halfPadding=node2.padding/2;if(evaluate(config5.flowchart.htmlLabels)){const div=text4.children[0],dv=select_default2(text4),images=div.getElementsByTagName("img");if(images){const noImgText=""===labelText.replace(/<img[^>]*>/g,"").trim();await Promise.all([...images].map(img=>new Promise(res=>{function setupImage(){if(img.style.display="flex",img.style.flexDirection="column",noImgText){const bodyFontSize=config5.fontSize?config5.fontSize:window.getComputedStyle(document.body).fontSize,enlargingFactor=5,width3=parseInt(bodyFontSize,10)*enlargingFactor+"px";img.style.minWidth=width3,img.style.maxWidth=width3}else img.style.width="100%";res(img)}__name(setupImage,"setupImage"),setTimeout(()=>{img.complete&&setupImage()}),img.addEventListener("error",setupImage),img.addEventListener("load",setupImage)})))}bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}return useHtmlLabels?label.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"):label.attr("transform","translate(0, "+-bbox.height/2+")"),node2.centerLabel&&label.attr("transform","translate("+-bbox.width/2+", "+-bbox.height/2+")"),label.insert("rect",":first-child"),{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding,label:label}},"labelHelper"),updateNodeBounds2=__name((node2,element3)=>{const bbox=element3.node().getBBox();node2.width=bbox.width,node2.height=bbox.height},"updateNodeBounds"),__name(insertPolygonShape2,"insertPolygonShape")}}),init_note2=__esm({"src/dagre-wrapper/shapes/note.js"(){init_util4(),init_logger(),init_diagramAPI(),init_intersect2(),note_default=__name(async(parent4,node2)=>{node2.useHtmlLabels||getConfig2().flowchart.htmlLabels||(node2.centerLabel=!0);const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper2(parent4,node2,"node "+node2.classes,!0);log.info("Classes = ",node2.classes);const rect3=shapeSvg.insert("rect",":first-child");return rect3.attr("rx",node2.rx).attr("ry",node2.ry).attr("x",-bbox.width/2-halfPadding).attr("y",-bbox.height/2-halfPadding).attr("width",bbox.width+node2.padding).attr("height",bbox.height+node2.padding),updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"note")}});function applyNodePropertyBorders(rect3,borders,totalWidth,totalHeight){const strokeDashArray=[],addBorder=__name(length2=>{strokeDashArray.push(length2,0)},"addBorder"),skipBorder=__name(length2=>{strokeDashArray.push(0,length2)},"skipBorder");borders.includes("t")?(log.debug("add top border"),addBorder(totalWidth)):skipBorder(totalWidth),borders.includes("r")?(log.debug("add right border"),addBorder(totalHeight)):skipBorder(totalHeight),borders.includes("b")?(log.debug("add bottom border"),addBorder(totalWidth)):skipBorder(totalWidth),borders.includes("l")?(log.debug("add left border"),addBorder(totalHeight)):skipBorder(totalHeight),rect3.attr("stroke-dasharray",strokeDashArray.join(" "))}var init_nodes3=__esm({"src/dagre-wrapper/nodes.js"(){init_src32(),init_diagramAPI(),init_common(),init_logger(),init_blockArrowHelper(),init_createLabel2(),init_intersect2(),init_note2(),init_util4(),formatClass=__name(str2=>str2?" "+str2:"","formatClass"),getClassesFromNode=__name((node2,otherClasses)=>`${otherClasses||"node default"}${formatClass(node2.classes)} ${formatClass(node2.class)}`,"getClassesFromNode"),question2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),s2=bbox.width+node2.padding+(bbox.height+node2.padding),points=[{x:s2/2,y:0},{x:s2,y:-s2/2},{x:s2/2,y:-s2},{x:0,y:-s2/2}];log.info("Question main (Circle)");const questionElem=insertPolygonShape2(shapeSvg,s2,s2,points);return questionElem.attr("style",node2.style),updateNodeBounds2(node2,questionElem),node2.intersect=function(point8){return log.warn("Intersect called"),intersect_default2.polygon(node2,points,point8)},shapeSvg},"question"),choice2=__name((parent4,node2)=>{const shapeSvg=parent4.insert("g").attr("class","node default").attr("id",node2.domId||node2.id),points=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return shapeSvg.insert("polygon",":first-child").attr("points",points.map(function(d3){return d3.x+","+d3.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),node2.width=28,node2.height=28,node2.intersect=function(point8){return intersect_default2.circle(node2,14,point8)},shapeSvg},"choice"),hexagon2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),h3=bbox.height+node2.padding,m3=h3/4,w4=bbox.width+2*m3+node2.padding,points=[{x:m3,y:0},{x:w4-m3,y:0},{x:w4,y:-h3/2},{x:w4-m3,y:-h3},{x:m3,y:-h3},{x:0,y:-h3/2}],hex2=insertPolygonShape2(shapeSvg,w4,h3,points);return hex2.attr("style",node2.style),updateNodeBounds2(node2,hex2),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"hexagon"),block_arrow=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,void 0,!0),h3=bbox.height+2*node2.padding,m3=h3/2,w4=bbox.width+2*m3+node2.padding,points=getArrowPoints(node2.directions,bbox,node2),blockArrow=insertPolygonShape2(shapeSvg,w4,h3,points);return blockArrow.attr("style",node2.style),updateNodeBounds2(node2,blockArrow),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"block_arrow"),rect_left_inv_arrow2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:-h3/2,y:0},{x:w4,y:0},{x:w4,y:-h3},{x:-h3/2,y:-h3},{x:0,y:-h3/2}];return insertPolygonShape2(shapeSvg,w4,h3,points).attr("style",node2.style),node2.width=w4+h3,node2.height=h3,node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"rect_left_inv_arrow"),lean_right2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:-2*h3/6,y:0},{x:w4-h3/6,y:0},{x:w4+2*h3/6,y:-h3},{x:h3/6,y:-h3}],el=insertPolygonShape2(shapeSvg,w4,h3,points);return el.attr("style",node2.style),updateNodeBounds2(node2,el),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"lean_right"),lean_left2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:2*h3/6,y:0},{x:w4+h3/6,y:0},{x:w4-2*h3/6,y:-h3},{x:-h3/6,y:-h3}],el=insertPolygonShape2(shapeSvg,w4,h3,points);return el.attr("style",node2.style),updateNodeBounds2(node2,el),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"lean_left"),trapezoid2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:-2*h3/6,y:0},{x:w4+2*h3/6,y:0},{x:w4-h3/6,y:-h3},{x:h3/6,y:-h3}],el=insertPolygonShape2(shapeSvg,w4,h3,points);return el.attr("style",node2.style),updateNodeBounds2(node2,el),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"trapezoid"),inv_trapezoid2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:h3/6,y:0},{x:w4-h3/6,y:0},{x:w4+2*h3/6,y:-h3},{x:-2*h3/6,y:-h3}],el=insertPolygonShape2(shapeSvg,w4,h3,points);return el.attr("style",node2.style),updateNodeBounds2(node2,el),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"inv_trapezoid"),rect_right_inv_arrow=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:0,y:0},{x:w4+h3/2,y:0},{x:w4,y:-h3/2},{x:w4+h3/2,y:-h3},{x:0,y:-h3}],el=insertPolygonShape2(shapeSvg,w4,h3,points);return el.attr("style",node2.style),updateNodeBounds2(node2,el),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"rect_right_inv_arrow"),cylinder2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,rx=w4/2,ry=rx/(2.5+w4/50),h3=bbox.height+ry+node2.padding,shape="M 0,"+ry+" a "+rx+","+ry+" 0,0,0 "+w4+" 0 a "+rx+","+ry+" 0,0,0 "+-w4+" 0 l 0,"+h3+" a "+rx+","+ry+" 0,0,0 "+w4+" 0 l 0,"+-h3,el=shapeSvg.attr("label-offset-y",ry).insert("path",":first-child").attr("style",node2.style).attr("d",shape).attr("transform","translate("+-w4/2+","+-(h3/2+ry)+")");return updateNodeBounds2(node2,el),node2.intersect=function(point8){const pos=intersect_default2.rect(node2,point8),x5=pos.x-node2.x;if(0!=rx&&(Math.abs(x5)<node2.width/2||Math.abs(x5)==node2.width/2&&Math.abs(pos.y-node2.y)>node2.height/2-ry)){let y6=ry*ry*(1-x5*x5/(rx*rx));0!=y6&&(y6=Math.sqrt(y6)),y6=ry-y6,point8.y-node2.y>0&&(y6=-y6),pos.y+=y6}return pos},shapeSvg},"cylinder"),rect2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper2(parent4,node2,"node "+node2.classes+" "+node2.class,!0),rect3=shapeSvg.insert("rect",":first-child"),totalWidth=node2.positioned?node2.width:bbox.width+node2.padding,totalHeight=node2.positioned?node2.height:bbox.height+node2.padding,x5=node2.positioned?-totalWidth/2:-bbox.width/2-halfPadding,y6=node2.positioned?-totalHeight/2:-bbox.height/2-halfPadding;if(rect3.attr("class","basic label-container").attr("style",node2.style).attr("rx",node2.rx).attr("ry",node2.ry).attr("x",x5).attr("y",y6).attr("width",totalWidth).attr("height",totalHeight),node2.props){const propKeys=new Set(Object.keys(node2.props));node2.props.borders&&(applyNodePropertyBorders(rect3,node2.props.borders,totalWidth,totalHeight),propKeys.delete("borders")),propKeys.forEach(propKey=>{log.warn(`Unknown node property ${propKey}`)})}return updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"rect"),composite=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper2(parent4,node2,"node "+node2.classes,!0),rect3=shapeSvg.insert("rect",":first-child"),totalWidth=node2.positioned?node2.width:bbox.width+node2.padding,totalHeight=node2.positioned?node2.height:bbox.height+node2.padding,x5=node2.positioned?-totalWidth/2:-bbox.width/2-halfPadding,y6=node2.positioned?-totalHeight/2:-bbox.height/2-halfPadding;if(rect3.attr("class","basic cluster composite label-container").attr("style",node2.style).attr("rx",node2.rx).attr("ry",node2.ry).attr("x",x5).attr("y",y6).attr("width",totalWidth).attr("height",totalHeight),node2.props){const propKeys=new Set(Object.keys(node2.props));node2.props.borders&&(applyNodePropertyBorders(rect3,node2.props.borders,totalWidth,totalHeight),propKeys.delete("borders")),propKeys.forEach(propKey=>{log.warn(`Unknown node property ${propKey}`)})}return updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"composite"),labelRect2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg}=await labelHelper2(parent4,node2,"label",!0);log.trace("Classes = ",node2.class);const rect3=shapeSvg.insert("rect",":first-child");if(rect3.attr("width",0).attr("height",0),shapeSvg.attr("class","label edgeLabel"),node2.props){const propKeys=new Set(Object.keys(node2.props));node2.props.borders&&(applyNodePropertyBorders(rect3,node2.props.borders,0,0),propKeys.delete("borders")),propKeys.forEach(propKey=>{log.warn(`Unknown node property ${propKey}`)})}return updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"labelRect"),__name(applyNodePropertyBorders,"applyNodePropertyBorders"),rectWithTitle2=__name(async(parent4,node2)=>{let classes3;classes3=node2.classes?"node "+node2.classes:"node default";const shapeSvg=parent4.insert("g").attr("class",classes3).attr("id",node2.domId||node2.id),rect3=shapeSvg.insert("rect",":first-child"),innerLine=shapeSvg.insert("line"),label=shapeSvg.insert("g").attr("class","label"),text22=node2.labelText.flat?node2.labelText.flat():node2.labelText;let title2="";title2="object"==typeof text22?text22[0]:text22,log.info("Label text abc79",title2,text22,"object"==typeof text22);const text4=label.node().appendChild(await createLabel_default2(title2,node2.labelStyle,!0,!0));let bbox={width:0,height:0};if(evaluate(getConfig2().flowchart.htmlLabels)){const div=text4.children[0],dv=select_default2(text4);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}log.info("Text 2",text22);const textRows=text22.slice(1,text22.length);let titleBox=text4.getBBox();const descr=label.node().appendChild(await createLabel_default2(textRows.join?textRows.join("<br/>"):textRows,node2.labelStyle,!0,!0));if(evaluate(getConfig2().flowchart.htmlLabels)){const div=descr.children[0],dv=select_default2(descr);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}const halfPadding=node2.padding/2;return select_default2(descr).attr("transform","translate( "+(bbox.width>titleBox.width?0:(titleBox.width-bbox.width)/2)+", "+(titleBox.height+halfPadding+5)+")"),select_default2(text4).attr("transform","translate( "+(bbox.width<titleBox.width?0:-(titleBox.width-bbox.width)/2)+", 0)"),bbox=label.node().getBBox(),label.attr("transform","translate("+-bbox.width/2+", "+(-bbox.height/2-halfPadding+3)+")"),rect3.attr("class","outer title-state").attr("x",-bbox.width/2-halfPadding).attr("y",-bbox.height/2-halfPadding).attr("width",bbox.width+node2.padding).attr("height",bbox.height+node2.padding),innerLine.attr("class","divider").attr("x1",-bbox.width/2-halfPadding).attr("x2",bbox.width/2+halfPadding).attr("y1",-bbox.height/2-halfPadding+titleBox.height+halfPadding).attr("y2",-bbox.height/2-halfPadding+titleBox.height+halfPadding),updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"rectWithTitle"),stadium2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),h3=bbox.height+node2.padding,w4=bbox.width+h3/4+node2.padding,rect3=shapeSvg.insert("rect",":first-child").attr("style",node2.style).attr("rx",h3/2).attr("ry",h3/2).attr("x",-w4/2).attr("y",-h3/2).attr("width",w4).attr("height",h3);return updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"stadium"),circle5=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),circle6=shapeSvg.insert("circle",":first-child");return circle6.attr("style",node2.style).attr("rx",node2.rx).attr("ry",node2.ry).attr("r",bbox.width/2+halfPadding).attr("width",bbox.width+node2.padding).attr("height",bbox.height+node2.padding),log.info("Circle main"),updateNodeBounds2(node2,circle6),node2.intersect=function(point8){return log.info("Circle intersect",node2,bbox.width/2+halfPadding,point8),intersect_default2.circle(node2,bbox.width/2+halfPadding,point8)},shapeSvg},"circle"),doublecircle2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox,halfPadding:halfPadding}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),circleGroup=shapeSvg.insert("g",":first-child"),outerCircle=circleGroup.insert("circle"),innerCircle=circleGroup.insert("circle");return circleGroup.attr("class",node2.class),outerCircle.attr("style",node2.style).attr("rx",node2.rx).attr("ry",node2.ry).attr("r",bbox.width/2+halfPadding+5).attr("width",bbox.width+node2.padding+10).attr("height",bbox.height+node2.padding+10),innerCircle.attr("style",node2.style).attr("rx",node2.rx).attr("ry",node2.ry).attr("r",bbox.width/2+halfPadding).attr("width",bbox.width+node2.padding).attr("height",bbox.height+node2.padding),log.info("DoubleCircle main"),updateNodeBounds2(node2,outerCircle),node2.intersect=function(point8){return log.info("DoubleCircle intersect",node2,bbox.width/2+halfPadding+5,point8),intersect_default2.circle(node2,bbox.width/2+halfPadding+5,point8)},shapeSvg},"doublecircle"),subroutine2=__name(async(parent4,node2)=>{const{shapeSvg:shapeSvg,bbox:bbox}=await labelHelper2(parent4,node2,getClassesFromNode(node2,void 0),!0),w4=bbox.width+node2.padding,h3=bbox.height+node2.padding,points=[{x:0,y:0},{x:w4,y:0},{x:w4,y:-h3},{x:0,y:-h3},{x:0,y:0},{x:-8,y:0},{x:w4+8,y:0},{x:w4+8,y:-h3},{x:-8,y:-h3},{x:-8,y:0}],el=insertPolygonShape2(shapeSvg,w4,h3,points);return el.attr("style",node2.style),updateNodeBounds2(node2,el),node2.intersect=function(point8){return intersect_default2.polygon(node2,points,point8)},shapeSvg},"subroutine"),start2=__name((parent4,node2)=>{const shapeSvg=parent4.insert("g").attr("class","node default").attr("id",node2.domId||node2.id),circle6=shapeSvg.insert("circle",":first-child");return circle6.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),updateNodeBounds2(node2,circle6),node2.intersect=function(point8){return intersect_default2.circle(node2,7,point8)},shapeSvg},"start"),forkJoin2=__name((parent4,node2,dir2)=>{const shapeSvg=parent4.insert("g").attr("class","node default").attr("id",node2.domId||node2.id);let width3=70,height2=10;"LR"===dir2&&(width3=10,height2=70);const shape=shapeSvg.append("rect").attr("x",-1*width3/2).attr("y",-1*height2/2).attr("width",width3).attr("height",height2).attr("class","fork-join");return updateNodeBounds2(node2,shape),node2.height=node2.height+node2.padding/2,node2.width=node2.width+node2.padding/2,node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"forkJoin"),shapes3={rhombus:question2,composite:composite,question:question2,rect:rect2,labelRect:labelRect2,rectWithTitle:rectWithTitle2,choice:choice2,circle:circle5,doublecircle:doublecircle2,stadium:stadium2,hexagon:hexagon2,block_arrow:block_arrow,rect_left_inv_arrow:rect_left_inv_arrow2,lean_right:lean_right2,lean_left:lean_left2,trapezoid:trapezoid2,inv_trapezoid:inv_trapezoid2,rect_right_inv_arrow:rect_right_inv_arrow,cylinder:cylinder2,start:start2,end:__name((parent4,node2)=>{const shapeSvg=parent4.insert("g").attr("class","node default").attr("id",node2.domId||node2.id),innerCircle=shapeSvg.insert("circle",":first-child"),circle6=shapeSvg.insert("circle",":first-child");return circle6.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),innerCircle.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),updateNodeBounds2(node2,circle6),node2.intersect=function(point8){return intersect_default2.circle(node2,7,point8)},shapeSvg},"end"),note:note_default,subroutine:subroutine2,fork:forkJoin2,join:forkJoin2,class_box:__name(async(parent4,node2)=>{const halfPadding=node2.padding/2;let classes3;classes3=node2.classes?"node "+node2.classes:"node default";const shapeSvg=parent4.insert("g").attr("class",classes3).attr("id",node2.domId||node2.id),rect3=shapeSvg.insert("rect",":first-child"),topLine=shapeSvg.insert("line"),bottomLine=shapeSvg.insert("line");let maxWidth2=0,maxHeight=4;const labelContainer=shapeSvg.insert("g").attr("class","label");let verticalPos=0;const hasInterface=node2.classData.annotations?.[0],interfaceLabelText=node2.classData.annotations[0]?"«"+node2.classData.annotations[0]+"»":"",interfaceLabel=labelContainer.node().appendChild(await createLabel_default2(interfaceLabelText,node2.labelStyle,!0,!0));let interfaceBBox=interfaceLabel.getBBox();if(evaluate(getConfig2().flowchart.htmlLabels)){const div=interfaceLabel.children[0],dv=select_default2(interfaceLabel);interfaceBBox=div.getBoundingClientRect(),dv.attr("width",interfaceBBox.width),dv.attr("height",interfaceBBox.height)}node2.classData.annotations[0]&&(maxHeight+=interfaceBBox.height+4,maxWidth2+=interfaceBBox.width);let classTitleString=node2.classData.label;void 0!==node2.classData.type&&""!==node2.classData.type&&(getConfig2().flowchart.htmlLabels?classTitleString+="&lt;"+node2.classData.type+"&gt;":classTitleString+="<"+node2.classData.type+">");const classTitleLabel=labelContainer.node().appendChild(await createLabel_default2(classTitleString,node2.labelStyle,!0,!0));select_default2(classTitleLabel).attr("class","classTitle");let classTitleBBox=classTitleLabel.getBBox();if(evaluate(getConfig2().flowchart.htmlLabels)){const div=classTitleLabel.children[0],dv=select_default2(classTitleLabel);classTitleBBox=div.getBoundingClientRect(),dv.attr("width",classTitleBBox.width),dv.attr("height",classTitleBBox.height)}maxHeight+=classTitleBBox.height+4,classTitleBBox.width>maxWidth2&&(maxWidth2=classTitleBBox.width);const classAttributes=[];node2.classData.members.forEach(async member=>{const parsedInfo=member.getDisplayDetails();let parsedText=parsedInfo.displayText;getConfig2().flowchart.htmlLabels&&(parsedText=parsedText.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const lbl=labelContainer.node().appendChild(await createLabel_default2(parsedText,parsedInfo.cssStyle?parsedInfo.cssStyle:node2.labelStyle,!0,!0));let bbox=lbl.getBBox();if(evaluate(getConfig2().flowchart.htmlLabels)){const div=lbl.children[0],dv=select_default2(lbl);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}bbox.width>maxWidth2&&(maxWidth2=bbox.width),maxHeight+=bbox.height+4,classAttributes.push(lbl)}),maxHeight+=8;const classMethods=[];if(node2.classData.methods.forEach(async member=>{const parsedInfo=member.getDisplayDetails();let displayText=parsedInfo.displayText;getConfig2().flowchart.htmlLabels&&(displayText=displayText.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const lbl=labelContainer.node().appendChild(await createLabel_default2(displayText,parsedInfo.cssStyle?parsedInfo.cssStyle:node2.labelStyle,!0,!0));let bbox=lbl.getBBox();if(evaluate(getConfig2().flowchart.htmlLabels)){const div=lbl.children[0],dv=select_default2(lbl);bbox=div.getBoundingClientRect(),dv.attr("width",bbox.width),dv.attr("height",bbox.height)}bbox.width>maxWidth2&&(maxWidth2=bbox.width),maxHeight+=bbox.height+4,classMethods.push(lbl)}),maxHeight+=8,hasInterface){let diffX2=(maxWidth2-interfaceBBox.width)/2;select_default2(interfaceLabel).attr("transform","translate( "+(-1*maxWidth2/2+diffX2)+", "+-1*maxHeight/2+")"),verticalPos=interfaceBBox.height+4}let diffX=(maxWidth2-classTitleBBox.width)/2;return select_default2(classTitleLabel).attr("transform","translate( "+(-1*maxWidth2/2+diffX)+", "+(-1*maxHeight/2+verticalPos)+")"),verticalPos+=classTitleBBox.height+4,topLine.attr("class","divider").attr("x1",-maxWidth2/2-halfPadding).attr("x2",maxWidth2/2+halfPadding).attr("y1",-maxHeight/2-halfPadding+8+verticalPos).attr("y2",-maxHeight/2-halfPadding+8+verticalPos),verticalPos+=8,classAttributes.forEach(lbl=>{select_default2(lbl).attr("transform","translate( "+-maxWidth2/2+", "+(-1*maxHeight/2+verticalPos+4)+")");const memberBBox=lbl?.getBBox();verticalPos+=(memberBBox?.height??0)+4}),verticalPos+=8,bottomLine.attr("class","divider").attr("x1",-maxWidth2/2-halfPadding).attr("x2",maxWidth2/2+halfPadding).attr("y1",-maxHeight/2-halfPadding+8+verticalPos).attr("y2",-maxHeight/2-halfPadding+8+verticalPos),verticalPos+=8,classMethods.forEach(lbl=>{select_default2(lbl).attr("transform","translate( "+-maxWidth2/2+", "+(-1*maxHeight/2+verticalPos)+")");const memberBBox=lbl?.getBBox();verticalPos+=(memberBBox?.height??0)+4}),rect3.attr("style",node2.style).attr("class","outer title-state").attr("x",-maxWidth2/2-halfPadding).attr("y",-maxHeight/2-halfPadding).attr("width",maxWidth2+node2.padding).attr("height",maxHeight+node2.padding),updateNodeBounds2(node2,rect3),node2.intersect=function(point8){return intersect_default2.rect(node2,point8)},shapeSvg},"class_box")},nodeElems2={},insertNode2=__name(async(elem,node2,renderOptions)=>{let newEl,el;if(node2.link){let target;"sandbox"===getConfig2().securityLevel?target="_top":node2.linkTarget&&(target=node2.linkTarget||"_blank"),newEl=elem.insert("svg:a").attr("xlink:href",node2.link).attr("target",target),el=await shapes3[node2.shape](newEl,node2,renderOptions)}else el=await shapes3[node2.shape](elem,node2,renderOptions),newEl=el;return node2.tooltip&&el.attr("title",node2.tooltip),node2.class&&el.attr("class","node default "+node2.class),nodeElems2[node2.id]=newEl,node2.haveCallback&&nodeElems2[node2.id].attr("class",nodeElems2[node2.id].attr("class")+" clickable"),newEl},"insertNode"),positionNode2=__name(node2=>{const el=nodeElems2[node2.id];log.trace("Transforming node",node2.diff,node2,"translate("+(node2.x-node2.width/2-5)+", "+node2.width/2+")");const diff2=node2.diff||0;return node2.clusterNode?el.attr("transform","translate("+(node2.x+diff2-node2.width/2)+", "+(node2.y-node2.height/2-8)+")"):el.attr("transform","translate("+node2.x+", "+node2.y+")"),diff2},"positionNode")}});function getNodeFromBlock(block2,db7,positioned=!1){const vertex=block2;let classStr="default";(vertex?.classes?.length||0)>0&&(classStr=(vertex?.classes??[]).join(" ")),classStr+=" flowchart-label";let padding2,radius2=0,shape="";switch(vertex.type){case"round":radius2=5,shape="rect";break;case"composite":radius2=0,shape="composite",padding2=0;break;case"square":case"group":default:shape="rect";break;case"diamond":shape="question";break;case"hexagon":shape="hexagon";break;case"block_arrow":shape="block_arrow";break;case"odd":case"rect_left_inv_arrow":shape="rect_left_inv_arrow";break;case"lean_right":shape="lean_right";break;case"lean_left":shape="lean_left";break;case"trapezoid":shape="trapezoid";break;case"inv_trapezoid":shape="inv_trapezoid";break;case"circle":shape="circle";break;case"ellipse":shape="ellipse";break;case"stadium":shape="stadium";break;case"subroutine":shape="subroutine";break;case"cylinder":shape="cylinder";break;case"doublecircle":shape="doublecircle"}const styles4=getStylesFromArray(vertex?.styles??[]),vertexText=vertex.label,bounds4=vertex.size??{width:0,height:0,x:0,y:0};return{labelStyle:styles4.labelStyle,shape:shape,labelText:vertexText,rx:radius2,ry:radius2,class:classStr,style:styles4.style,id:vertex.id,directions:vertex.directions,width:bounds4.width,height:bounds4.height,x:bounds4.x,y:bounds4.y,positioned:positioned,intersect:void 0,type:vertex.type,padding:padding2??getConfig()?.block?.padding??0}}async function calculateBlockSize(elem,block2,db7){const node2=getNodeFromBlock(block2,0,!1);if("group"===node2.type)return;const config5=getConfig(),nodeEl=await insertNode2(elem,node2,{config:config5}),boundingBox3=nodeEl.node().getBBox(),obj=db7.getBlock(node2.id);obj.size={width:boundingBox3.width,height:boundingBox3.height,x:0,y:0,node:nodeEl},db7.setBlock(obj),nodeEl.remove()}async function insertBlockPositioned(elem,block2,db7){const node2=getNodeFromBlock(block2,0,!0);if("space"!==db7.getBlock(node2.id).type){const config5=getConfig();await insertNode2(elem,node2,{config:config5}),block2.intersect=node2?.intersect,positionNode2(node2)}}async function performOperations(elem,blocks2,db7,operation){for(const block2 of blocks2)await operation(elem,block2,db7),block2.children&&await performOperations(elem,block2.children,db7,operation)}async function calculateBlockSizes(elem,blocks2,db7){await performOperations(elem,blocks2,db7,calculateBlockSize)}async function insertBlocks(elem,blocks2,db7){await performOperations(elem,blocks2,db7,insertBlockPositioned)}async function insertEdges(elem,edges3,blocks2,db7,id30){const g2=new Graph({multigraph:!0,compound:!0});g2.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const block2 of blocks2)block2.size&&g2.setNode(block2.id,{width:block2.size.width,height:block2.size.height,intersect:block2.intersect});for(const edge of edges3)if(edge.start&&edge.end){const startBlock=db7.getBlock(edge.start),endBlock=db7.getBlock(edge.end);if(startBlock?.size&&endBlock?.size){const start3=startBlock.size,end2=endBlock.size,points=[{x:start3.x,y:start3.y},{x:start3.x+(end2.x-start3.x)/2,y:start3.y+(end2.y-start3.y)/2},{x:end2.x,y:end2.y}];insertEdge2(elem,{v:edge.start,w:edge.end,name:edge.id},{...edge,arrowTypeEnd:edge.arrowTypeEnd,arrowTypeStart:edge.arrowTypeStart,points:points,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",g2,id30),edge.label&&(await insertEdgeLabel2(elem,{...edge,label:edge.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:edge.arrowTypeEnd,arrowTypeStart:edge.arrowTypeStart,points:points,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),positionEdgeLabel2({...edge,x:points[1].x,y:points[1].y},{originalPath:points}))}}}var getClasses5,blockRenderer_default,diagram24,init_renderHelpers=__esm({"src/diagrams/block/renderHelpers.ts"(){init_graphlib(),init_config(),init_edges2(),init_nodes3(),init_utils2(),__name(getNodeFromBlock,"getNodeFromBlock"),__name(calculateBlockSize,"calculateBlockSize"),__name(insertBlockPositioned,"insertBlockPositioned"),__name(performOperations,"performOperations"),__name(calculateBlockSizes,"calculateBlockSizes"),__name(insertBlocks,"insertBlocks"),__name(insertEdges,"insertEdges")}}),init_blockRenderer=__esm({"src/diagrams/block/blockRenderer.ts"(){init_src32(),init_config(),init_markers2(),init_logger(),init_setupGraphViewbox(),init_layout3(),init_renderHelpers(),getClasses5=__name(function(text4,diagObj){return diagObj.db.getClasses()},"getClasses"),blockRenderer_default={draw:__name(async function(text4,id30,_version,diagObj){const{securityLevel:securityLevel,block:conf5}=getConfig(),db7=diagObj.db;let sandboxElement;"sandbox"===securityLevel&&(sandboxElement=select_default2("#i"+id30));const root3=select_default2("sandbox"===securityLevel?sandboxElement.nodes()[0].contentDocument.body:"body"),svg2="sandbox"===securityLevel?root3.select(`[id="${id30}"]`):select_default2(`[id="${id30}"]`);markers_default2(svg2,["point","circle","cross"],diagObj.type,id30);const bl=db7.getBlocks(),blArr=db7.getBlocksFlat(),edges3=db7.getEdges(),nodes5=svg2.insert("g").attr("class","block");await calculateBlockSizes(nodes5,bl,db7);const bounds4=layout5(db7);if(await insertBlocks(nodes5,bl,db7),await insertEdges(nodes5,edges3,blArr,db7,id30),bounds4){const bounds22=bounds4,magicFactor=Math.max(1,Math.round(bounds22.width/bounds22.height*.125)),height2=bounds22.height+magicFactor+10,width3=bounds22.width+10,{useMaxWidth:useMaxWidth}=conf5;configureSvgSize(svg2,height2,width3,!!useMaxWidth),log.debug("Here Bounds",bounds4,bounds22),svg2.attr("viewBox",`${bounds22.x-5} ${bounds22.y-5} ${bounds22.width+10} ${bounds22.height+10}`)}},"draw"),getClasses:getClasses5}}}),blockDiagram_exports={};__export(blockDiagram_exports,{diagram:()=>diagram24});var ArchitectureDirectionName,ArchitectureDirectionArrow,ArchitectureDirectionArrowShift,getOppositeArchitectureDirection,isArchitectureDirection,isArchitectureDirectionX,isArchitectureDirectionY,isArchitectureDirectionXY,isArchitecturePairXY,isValidArchitectureDirectionPair,getArchitectureDirectionPair,shiftPositionByArchitectureDirectionPair,getArchitectureDirectionXYFactors,getArchitectureDirectionAlignment,isArchitectureService,isArchitectureJunction,edgeData,nodeData,DEFAULT_ARCHITECTURE_CONFIG,ArchitectureDB,populateDb2,parser22,architectureStyles_default,wrapIcon,architectureIcons,drawEdges,drawGroups,drawServices,drawJunctions,import_cytoscape_fcose,renderer8,init_blockDiagram=__esm({"src/diagrams/block/blockDiagram.ts"(){init_block(),init_blockDB(),init_styles18(),init_blockRenderer(),diagram24={parser:block_default,db:blockDB_default,renderer:blockRenderer_default,styles:styles_default16}}}),init_architectureTypes=__esm({"src/diagrams/architecture/architectureTypes.ts"(){ArchitectureDirectionName={L:"left",R:"right",T:"top",B:"bottom"},ArchitectureDirectionArrow={L:__name(scale2=>`${scale2},${scale2/2} 0,${scale2} 0,0`,"L"),R:__name(scale2=>`0,${scale2/2} ${scale2},0 ${scale2},${scale2}`,"R"),T:__name(scale2=>`0,0 ${scale2},0 ${scale2/2},${scale2}`,"T"),B:__name(scale2=>`${scale2/2},0 ${scale2},${scale2} 0,${scale2}`,"B")},ArchitectureDirectionArrowShift={L:__name((orig,arrowSize)=>orig-arrowSize+2,"L"),R:__name((orig,_arrowSize)=>orig-2,"R"),T:__name((orig,arrowSize)=>orig-arrowSize+2,"T"),B:__name((orig,_arrowSize)=>orig-2,"B")},getOppositeArchitectureDirection=__name(function(x5){return isArchitectureDirectionX(x5)?"L"===x5?"R":"L":"T"===x5?"B":"T"},"getOppositeArchitectureDirection"),isArchitectureDirection=__name(function(x5){return"L"===x5||"R"===x5||"T"===x5||"B"===x5},"isArchitectureDirection"),isArchitectureDirectionX=__name(function(x5){return"L"===x5||"R"===x5},"isArchitectureDirectionX"),isArchitectureDirectionY=__name(function(x5){return"T"===x5||"B"===x5},"isArchitectureDirectionY"),isArchitectureDirectionXY=__name(function(a2,b3){const aX_bY=isArchitectureDirectionX(a2)&&isArchitectureDirectionY(b3),aY_bX=isArchitectureDirectionY(a2)&&isArchitectureDirectionX(b3);return aX_bY||aY_bX},"isArchitectureDirectionXY"),isArchitecturePairXY=__name(function(pair){const lhs=pair[0],rhs=pair[1],aX_bY=isArchitectureDirectionX(lhs)&&isArchitectureDirectionY(rhs),aY_bX=isArchitectureDirectionY(lhs)&&isArchitectureDirectionX(rhs);return aX_bY||aY_bX},"isArchitecturePairXY"),isValidArchitectureDirectionPair=__name(function(x5){return"LL"!==x5&&"RR"!==x5&&"TT"!==x5&&"BB"!==x5},"isValidArchitectureDirectionPair"),getArchitectureDirectionPair=__name(function(sourceDir,targetDir){const pair=`${sourceDir}${targetDir}`;return isValidArchitectureDirectionPair(pair)?pair:void 0},"getArchitectureDirectionPair"),shiftPositionByArchitectureDirectionPair=__name(function([x5,y6],pair){const lhs=pair[0],rhs=pair[1];return isArchitectureDirectionX(lhs)?isArchitectureDirectionY(rhs)?[x5+("L"===lhs?-1:1),y6+("T"===rhs?1:-1)]:[x5+("L"===lhs?-1:1),y6]:isArchitectureDirectionX(rhs)?[x5+("L"===rhs?1:-1),y6+("T"===lhs?1:-1)]:[x5,y6+("T"===lhs?1:-1)]},"shiftPositionByArchitectureDirectionPair"),getArchitectureDirectionXYFactors=__name(function(pair){return"LT"===pair||"TL"===pair?[1,1]:"BL"===pair||"LB"===pair?[1,-1]:"BR"===pair||"RB"===pair?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),getArchitectureDirectionAlignment=__name(function(a2,b3){return isArchitectureDirectionXY(a2,b3)?"bend":isArchitectureDirectionX(a2)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),isArchitectureService=__name(function(x5){return"service"===x5.type},"isArchitectureService"),isArchitectureJunction=__name(function(x5){return"junction"===x5.type},"isArchitectureJunction"),edgeData=__name(edge=>edge.data(),"edgeData"),nodeData=__name(node2=>node2.data(),"nodeData")}}),init_architectureDb=__esm({"src/diagrams/architecture/architectureDb.ts"(){init_config(),init_defaultConfig(),init_utils2(),init_commonDb(),init_architectureTypes(),DEFAULT_ARCHITECTURE_CONFIG=defaultConfig_default.architecture,ArchitectureDB=class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=setAccTitle,this.getAccTitle=getAccTitle,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.getAccDescription=getAccDescription,this.setAccDescription=setAccDescription,this.clear()}static{__name(this,"ArchitectureDB")}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},clear()}addService({id:id30,icon:icon2,in:parent4,title:title2,iconText:iconText}){if(void 0!==this.registeredIds[id30])throw new Error(`The service id [${id30}] is already in use by another ${this.registeredIds[id30]}`);if(void 0!==parent4){if(id30===parent4)throw new Error(`The service [${id30}] cannot be placed within itself`);if(void 0===this.registeredIds[parent4])throw new Error(`The service [${id30}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===this.registeredIds[parent4])throw new Error(`The service [${id30}]'s parent is not a group`)}this.registeredIds[id30]="node",this.nodes[id30]={id:id30,type:"service",icon:icon2,iconText:iconText,title:title2,edges:[],in:parent4}}getServices(){return Object.values(this.nodes).filter(isArchitectureService)}addJunction({id:id30,in:parent4}){this.registeredIds[id30]="node",this.nodes[id30]={id:id30,type:"junction",edges:[],in:parent4}}getJunctions(){return Object.values(this.nodes).filter(isArchitectureJunction)}getNodes(){return Object.values(this.nodes)}getNode(id30){return this.nodes[id30]??null}addGroup({id:id30,icon:icon2,in:parent4,title:title2}){if(void 0!==this.registeredIds?.[id30])throw new Error(`The group id [${id30}] is already in use by another ${this.registeredIds[id30]}`);if(void 0!==parent4){if(id30===parent4)throw new Error(`The group [${id30}] cannot be placed within itself`);if(void 0===this.registeredIds?.[parent4])throw new Error(`The group [${id30}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===this.registeredIds?.[parent4])throw new Error(`The group [${id30}]'s parent is not a group`)}this.registeredIds[id30]="group",this.groups[id30]={id:id30,icon:icon2,title:title2,in:parent4}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:lhsId,rhsId:rhsId,lhsDir:lhsDir,rhsDir:rhsDir,lhsInto:lhsInto,rhsInto:rhsInto,lhsGroup:lhsGroup,rhsGroup:rhsGroup,title:title2}){if(!isArchitectureDirection(lhsDir))throw new Error(`Invalid direction given for left hand side of edge ${lhsId}--${rhsId}. Expected (L,R,T,B) got ${String(lhsDir)}`);if(!isArchitectureDirection(rhsDir))throw new Error(`Invalid direction given for right hand side of edge ${lhsId}--${rhsId}. Expected (L,R,T,B) got ${String(rhsDir)}`);if(void 0===this.nodes[lhsId]&&void 0===this.groups[lhsId])throw new Error(`The left-hand id [${lhsId}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===this.nodes[rhsId]&&void 0===this.groups[rhsId])throw new Error(`The right-hand id [${rhsId}] does not yet exist. Please create the service/group before declaring an edge to it.`);const lhsGroupId=this.nodes[lhsId].in,rhsGroupId=this.nodes[rhsId].in;if(lhsGroup&&lhsGroupId&&rhsGroupId&&lhsGroupId==rhsGroupId)throw new Error(`The left-hand id [${lhsId}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(rhsGroup&&lhsGroupId&&rhsGroupId&&lhsGroupId==rhsGroupId)throw new Error(`The right-hand id [${rhsId}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const edge={lhsId:lhsId,lhsDir:lhsDir,lhsInto:lhsInto,lhsGroup:lhsGroup,rhsId:rhsId,rhsDir:rhsDir,rhsInto:rhsInto,rhsGroup:rhsGroup,title:title2};this.edges.push(edge),this.nodes[lhsId]&&this.nodes[rhsId]&&(this.nodes[lhsId].edges.push(this.edges[this.edges.length-1]),this.nodes[rhsId].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(void 0===this.dataStructures){const groupAlignments={},adjList=Object.entries(this.nodes).reduce((prevOuter,[id30,service])=>(prevOuter[id30]=service.edges.reduce((prevInner,edge)=>{const lhsGroupId=this.getNode(edge.lhsId)?.in,rhsGroupId=this.getNode(edge.rhsId)?.in;if(lhsGroupId&&rhsGroupId&&lhsGroupId!==rhsGroupId){const alignment=getArchitectureDirectionAlignment(edge.lhsDir,edge.rhsDir);"bend"!==alignment&&(groupAlignments[lhsGroupId]??={},groupAlignments[lhsGroupId][rhsGroupId]=alignment,groupAlignments[rhsGroupId]??={},groupAlignments[rhsGroupId][lhsGroupId]=alignment)}if(edge.lhsId===id30){const pair=getArchitectureDirectionPair(edge.lhsDir,edge.rhsDir);pair&&(prevInner[pair]=edge.rhsId)}else{const pair=getArchitectureDirectionPair(edge.rhsDir,edge.lhsDir);pair&&(prevInner[pair]=edge.lhsId)}return prevInner},{}),prevOuter),{}),firstId=Object.keys(adjList)[0],visited={[firstId]:1},notVisited=Object.keys(adjList).reduce((prev2,id30)=>id30===firstId?prev2:{...prev2,[id30]:1},{}),BFS=__name(startingId=>{const spatialMap={[startingId]:[0,0]},queue=[startingId];for(;queue.length>0;){const id30=queue.shift();if(id30){visited[id30]=1,delete notVisited[id30];const adj=adjList[id30],[posX,posY]=spatialMap[id30];Object.entries(adj).forEach(([dir2,rhsId])=>{visited[rhsId]||(spatialMap[rhsId]=shiftPositionByArchitectureDirectionPair([posX,posY],dir2),queue.push(rhsId))})}}return spatialMap},"BFS"),spatialMaps=[BFS(firstId)];for(;Object.keys(notVisited).length>0;)spatialMaps.push(BFS(Object.keys(notVisited)[0]));this.dataStructures={adjList:adjList,spatialMaps:spatialMaps,groupAlignments:groupAlignments}}return this.dataStructures}setElementForId(id30,element3){this.elements[id30]=element3}getElementById(id30){return this.elements[id30]}getConfig(){return cleanAndMerge({...DEFAULT_ARCHITECTURE_CONFIG,...getConfig().architecture})}getConfigField(field){return this.getConfig()[field]}}}}),init_architectureParser=__esm({"src/diagrams/architecture/architectureParser.ts"(){init_mermaid_parser_core(),init_logger(),init_populateCommonDb(),init_architectureDb(),populateDb2=__name((ast,db7)=>{populateCommonDb(ast,db7),ast.groups.map(group2=>db7.addGroup(group2)),ast.services.map(service=>db7.addService({...service,type:"service"})),ast.junctions.map(service=>db7.addJunction({...service,type:"junction"})),ast.edges.map(edge=>db7.addEdge(edge))},"populateDb"),parser22={parser:{yy:void 0},parse:__name(async input=>{const ast=await parse3("architecture",input);log.debug(ast);const db7=parser22.parser?.yy;if(!(db7 instanceof ArchitectureDB))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");populateDb2(ast,db7)},"parse")}}}),init_architectureStyles=__esm({"src/diagrams/architecture/architectureStyles.ts"(){architectureStyles_default=__name(options2=>`\n  .edge {\n    stroke-width: ${options2.archEdgeWidth};\n    stroke: ${options2.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${options2.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${options2.archGroupBorderColor};\n    stroke-width: ${options2.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`,"getStyles")}}),require_layout_base2=__commonJS({"../../node_modules/.pnpm/layout-base@2.0.1/node_modules/layout-base/layout-base.js"(exports2,module2){__name(function(root3,factory){"object"==typeof exports2&&"object"==typeof module2?module2.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports2?exports2.layoutBase=factory():root3.layoutBase=factory()},"webpackUniversalModuleDefinition")(exports2,function(){return function(modules2){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module3=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules2[moduleId].call(module3.exports,module3,module3.exports,__webpack_require__),module3.l=!0,module3.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=modules2,__webpack_require__.c=installedModules,__webpack_require__.i=function(value2){return value2},__webpack_require__.d=function(exports3,name,getter){__webpack_require__.o(exports3,name)||Object.defineProperty(exports3,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module3){var getter=module3&&module3.__esModule?__name(function(){return module3.default},"getDefault"):__name(function(){return module3},"getModuleExports");return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object3,property2){return Object.prototype.hasOwnProperty.call(object3,property2)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=28)}([function(module3,exports3,__webpack_require__){function LayoutConstants(){}__name(LayoutConstants,"LayoutConstants"),LayoutConstants.QUALITY=1,LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,LayoutConstants.DEFAULT_INCREMENTAL=!1,LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT=!0,LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT=!1,LayoutConstants.DEFAULT_ANIMATION_PERIOD=50,LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,LayoutConstants.DEFAULT_GRAPH_MARGIN=15,LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=!1,LayoutConstants.SIMPLE_NODE_SIZE=40,LayoutConstants.SIMPLE_NODE_HALF_SIZE=LayoutConstants.SIMPLE_NODE_SIZE/2,LayoutConstants.EMPTY_COMPOUND_NODE_SIZE=40,LayoutConstants.MIN_EDGE_LENGTH=1,LayoutConstants.WORLD_BOUNDARY=1e6,LayoutConstants.INITIAL_WORLD_BOUNDARY=LayoutConstants.WORLD_BOUNDARY/1e3,LayoutConstants.WORLD_CENTER_X=1200,LayoutConstants.WORLD_CENTER_Y=900,module3.exports=LayoutConstants},function(module3,exports3,__webpack_require__){var LGraphObject=__webpack_require__(2),IGeometry=__webpack_require__(8),IMath=__webpack_require__(9);function LEdge(source,target,vEdge){LGraphObject.call(this,vEdge),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=vEdge,this.bendpoints=[],this.source=source,this.target=target}for(var prop in __name(LEdge,"LEdge"),LEdge.prototype=Object.create(LGraphObject.prototype),LGraphObject)LEdge[prop]=LGraphObject[prop];LEdge.prototype.getSource=function(){return this.source},LEdge.prototype.getTarget=function(){return this.target},LEdge.prototype.isInterGraph=function(){return this.isInterGraph},LEdge.prototype.getLength=function(){return this.length},LEdge.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},LEdge.prototype.getBendpoints=function(){return this.bendpoints},LEdge.prototype.getLca=function(){return this.lca},LEdge.prototype.getSourceInLca=function(){return this.sourceInLca},LEdge.prototype.getTargetInLca=function(){return this.targetInLca},LEdge.prototype.getOtherEnd=function(node2){if(this.source===node2)return this.target;if(this.target===node2)return this.source;throw"Node is not incident with this edge"},LEdge.prototype.getOtherEndInGraph=function(node2,graph){for(var otherEnd=this.getOtherEnd(node2),root3=graph.getGraphManager().getRoot();;){if(otherEnd.getOwner()==graph)return otherEnd;if(otherEnd.getOwner()==root3)break;otherEnd=otherEnd.getOwner().getParent()}return null},LEdge.prototype.updateLength=function(){var clipPointCoordinates=new Array(4);this.isOverlapingSourceAndTarget=IGeometry.getIntersection(this.target.getRect(),this.source.getRect(),clipPointCoordinates),this.isOverlapingSourceAndTarget||(this.lengthX=clipPointCoordinates[0]-clipPointCoordinates[2],this.lengthY=clipPointCoordinates[1]-clipPointCoordinates[3],Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},LEdge.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},module3.exports=LEdge},function(module3,exports3,__webpack_require__){function LGraphObject(vGraphObject){this.vGraphObject=vGraphObject}__name(LGraphObject,"LGraphObject"),module3.exports=LGraphObject},function(module3,exports3,__webpack_require__){var LGraphObject=__webpack_require__(2),Integer=__webpack_require__(10),RectangleD=__webpack_require__(13),LayoutConstants=__webpack_require__(0),RandomSeed=__webpack_require__(16),PointD=__webpack_require__(5);function LNode(gm,loc,size4,vNode){null==size4&&null==vNode&&(vNode=loc),LGraphObject.call(this,vNode),null!=gm.graphManager&&(gm=gm.graphManager),this.estimatedSize=Integer.MIN_VALUE,this.inclusionTreeDepth=Integer.MAX_VALUE,this.vGraphObject=vNode,this.edges=[],this.graphManager=gm,this.rect=null!=size4&&null!=loc?new RectangleD(loc.x,loc.y,size4.width,size4.height):new RectangleD}for(var prop in __name(LNode,"LNode"),LNode.prototype=Object.create(LGraphObject.prototype),LGraphObject)LNode[prop]=LGraphObject[prop];LNode.prototype.getEdges=function(){return this.edges},LNode.prototype.getChild=function(){return this.child},LNode.prototype.getOwner=function(){return this.owner},LNode.prototype.getWidth=function(){return this.rect.width},LNode.prototype.setWidth=function(width3){this.rect.width=width3},LNode.prototype.getHeight=function(){return this.rect.height},LNode.prototype.setHeight=function(height2){this.rect.height=height2},LNode.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},LNode.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},LNode.prototype.getCenter=function(){return new PointD(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},LNode.prototype.getLocation=function(){return new PointD(this.rect.x,this.rect.y)},LNode.prototype.getRect=function(){return this.rect},LNode.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},LNode.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},LNode.prototype.setRect=function(upperLeft,dimension){this.rect.x=upperLeft.x,this.rect.y=upperLeft.y,this.rect.width=dimension.width,this.rect.height=dimension.height},LNode.prototype.setCenter=function(cx,cy){this.rect.x=cx-this.rect.width/2,this.rect.y=cy-this.rect.height/2},LNode.prototype.setLocation=function(x5,y6){this.rect.x=x5,this.rect.y=y6},LNode.prototype.moveBy=function(dx,dy){this.rect.x+=dx,this.rect.y+=dy},LNode.prototype.getEdgeListToNode=function(to){var edgeList2=[],self2=this;return self2.edges.forEach(function(edge2){if(edge2.target==to){if(edge2.source!=self2)throw"Incorrect edge source!";edgeList2.push(edge2)}}),edgeList2},LNode.prototype.getEdgesBetween=function(other){var edgeList2=[],self2=this;return self2.edges.forEach(function(edge2){if(edge2.source!=self2&&edge2.target!=self2)throw"Incorrect edge source and/or target";edge2.target!=other&&edge2.source!=other||edgeList2.push(edge2)}),edgeList2},LNode.prototype.getNeighborsList=function(){var neighbors=new Set,self2=this;return self2.edges.forEach(function(edge){if(edge.source==self2)neighbors.add(edge.target);else{if(edge.target!=self2)throw"Incorrect incidency!";neighbors.add(edge.source)}}),neighbors},LNode.prototype.withChildren=function(){var withNeighborsList=new Set;if(withNeighborsList.add(this),null!=this.child)for(var nodes5=this.child.getNodes(),i2=0;i2<nodes5.length;i2++)nodes5[i2].withChildren().forEach(function(node2){withNeighborsList.add(node2)});return withNeighborsList},LNode.prototype.getNoOfChildren=function(){var noOfChildren=0;if(null==this.child)noOfChildren=1;else for(var nodes5=this.child.getNodes(),i2=0;i2<nodes5.length;i2++)noOfChildren+=nodes5[i2].getNoOfChildren();return 0==noOfChildren&&(noOfChildren=1),noOfChildren},LNode.prototype.getEstimatedSize=function(){if(this.estimatedSize==Integer.MIN_VALUE)throw"assert failed";return this.estimatedSize},LNode.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},LNode.prototype.scatter=function(){var randomCenterX,randomCenterY,minX=-LayoutConstants.INITIAL_WORLD_BOUNDARY,maxX=LayoutConstants.INITIAL_WORLD_BOUNDARY;randomCenterX=LayoutConstants.WORLD_CENTER_X+RandomSeed.nextDouble()*(maxX-minX)+minX;var minY=-LayoutConstants.INITIAL_WORLD_BOUNDARY,maxY=LayoutConstants.INITIAL_WORLD_BOUNDARY;randomCenterY=LayoutConstants.WORLD_CENTER_Y+RandomSeed.nextDouble()*(maxY-minY)+minY,this.rect.x=randomCenterX,this.rect.y=randomCenterY},LNode.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var childGraph=this.getChild();if(childGraph.updateBounds(!0),this.rect.x=childGraph.getLeft(),this.rect.y=childGraph.getTop(),this.setWidth(childGraph.getRight()-childGraph.getLeft()),this.setHeight(childGraph.getBottom()-childGraph.getTop()),LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS){var width3=childGraph.getRight()-childGraph.getLeft(),height2=childGraph.getBottom()-childGraph.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(width3+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>width3?(this.rect.x-=(this.labelWidth-width3)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(width3+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(height2+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>height2?(this.rect.y-=(this.labelHeight-height2)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(height2+this.labelHeight))}}},LNode.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==Integer.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},LNode.prototype.transform=function(trans){var left3=this.rect.x;left3>LayoutConstants.WORLD_BOUNDARY?left3=LayoutConstants.WORLD_BOUNDARY:left3<-LayoutConstants.WORLD_BOUNDARY&&(left3=-LayoutConstants.WORLD_BOUNDARY);var top2=this.rect.y;top2>LayoutConstants.WORLD_BOUNDARY?top2=LayoutConstants.WORLD_BOUNDARY:top2<-LayoutConstants.WORLD_BOUNDARY&&(top2=-LayoutConstants.WORLD_BOUNDARY);var leftTop=new PointD(left3,top2),vLeftTop=trans.inverseTransformPoint(leftTop);this.setLocation(vLeftTop.x,vLeftTop.y)},LNode.prototype.getLeft=function(){return this.rect.x},LNode.prototype.getRight=function(){return this.rect.x+this.rect.width},LNode.prototype.getTop=function(){return this.rect.y},LNode.prototype.getBottom=function(){return this.rect.y+this.rect.height},LNode.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},module3.exports=LNode},function(module3,exports3,__webpack_require__){var LayoutConstants=__webpack_require__(0);function FDLayoutConstants(){}for(var prop in __name(FDLayoutConstants,"FDLayoutConstants"),LayoutConstants)FDLayoutConstants[prop]=LayoutConstants[prop];FDLayoutConstants.MAX_ITERATIONS=2500,FDLayoutConstants.DEFAULT_EDGE_LENGTH=50,FDLayoutConstants.DEFAULT_SPRING_STRENGTH=.45,FDLayoutConstants.DEFAULT_REPULSION_STRENGTH=4500,FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=.4,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,FDLayoutConstants.COOLING_ADAPTATION_FACTOR=.33,FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT=1e3,FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT=5e3,FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,FDLayoutConstants.MAX_NODE_DISPLACEMENT=3*FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL,FDLayoutConstants.MIN_REPULSION_DIST=FDLayoutConstants.DEFAULT_EDGE_LENGTH/10,FDLayoutConstants.CONVERGENCE_CHECK_PERIOD=100,FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,FDLayoutConstants.MIN_EDGE_LENGTH=1,FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD=10,module3.exports=FDLayoutConstants},function(module3,exports3,__webpack_require__){function PointD(x5,y6){null==x5&&null==y6?(this.x=0,this.y=0):(this.x=x5,this.y=y6)}__name(PointD,"PointD"),PointD.prototype.getX=function(){return this.x},PointD.prototype.getY=function(){return this.y},PointD.prototype.setX=function(x5){this.x=x5},PointD.prototype.setY=function(y6){this.y=y6},PointD.prototype.getDifference=function(pt){return new DimensionD(this.x-pt.x,this.y-pt.y)},PointD.prototype.getCopy=function(){return new PointD(this.x,this.y)},PointD.prototype.translate=function(dim){return this.x+=dim.width,this.y+=dim.height,this},module3.exports=PointD},function(module3,exports3,__webpack_require__){var LGraphObject=__webpack_require__(2),Integer=__webpack_require__(10),LayoutConstants=__webpack_require__(0),LGraphManager=__webpack_require__(7),LNode=__webpack_require__(3),LEdge=__webpack_require__(1),RectangleD=__webpack_require__(13),Point3=__webpack_require__(12),LinkedList=__webpack_require__(11);function LGraph(parent4,obj2,vGraph){LGraphObject.call(this,vGraph),this.estimatedSize=Integer.MIN_VALUE,this.margin=LayoutConstants.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=parent4,null!=obj2&&obj2 instanceof LGraphManager?this.graphManager=obj2:null!=obj2&&obj2 instanceof Layout&&(this.graphManager=obj2.graphManager)}for(var prop in __name(LGraph,"LGraph"),LGraph.prototype=Object.create(LGraphObject.prototype),LGraphObject)LGraph[prop]=LGraphObject[prop];LGraph.prototype.getNodes=function(){return this.nodes},LGraph.prototype.getEdges=function(){return this.edges},LGraph.prototype.getGraphManager=function(){return this.graphManager},LGraph.prototype.getParent=function(){return this.parent},LGraph.prototype.getLeft=function(){return this.left},LGraph.prototype.getRight=function(){return this.right},LGraph.prototype.getTop=function(){return this.top},LGraph.prototype.getBottom=function(){return this.bottom},LGraph.prototype.isConnected=function(){return this.isConnected},LGraph.prototype.add=function(obj1,sourceNode,targetNode){if(null==sourceNode&&null==targetNode){var newNode=obj1;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(newNode)>-1)throw"Node already in graph!";return newNode.owner=this,this.getNodes().push(newNode),newNode}var newEdge=obj1;if(!(this.getNodes().indexOf(sourceNode)>-1&&this.getNodes().indexOf(targetNode)>-1))throw"Source or target not in graph!";if(sourceNode.owner!=targetNode.owner||sourceNode.owner!=this)throw"Both owners must be this graph!";return sourceNode.owner!=targetNode.owner?null:(newEdge.source=sourceNode,newEdge.target=targetNode,newEdge.isInterGraph=!1,this.getEdges().push(newEdge),sourceNode.edges.push(newEdge),targetNode!=sourceNode&&targetNode.edges.push(newEdge),newEdge)},LGraph.prototype.remove=function(obj){var node2=obj;if(obj instanceof LNode){if(null==node2)throw"Node is null!";if(null==node2.owner||node2.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var edgesToBeRemoved=node2.edges.slice(),s2=edgesToBeRemoved.length,i2=0;i2<s2;i2++)(edge=edgesToBeRemoved[i2]).isInterGraph?this.graphManager.remove(edge):edge.source.owner.remove(edge);if(-1==(index=this.nodes.indexOf(node2)))throw"Node not in owner node list!";this.nodes.splice(index,1)}else if(obj instanceof LEdge){var edge;if(null==(edge=obj))throw"Edge is null!";if(null==edge.source||null==edge.target)throw"Source and/or target is null!";if(null==edge.source.owner||null==edge.target.owner||edge.source.owner!=this||edge.target.owner!=this)throw"Source and/or target owner is invalid!";var index,sourceIndex=edge.source.edges.indexOf(edge),targetIndex=edge.target.edges.indexOf(edge);if(!(sourceIndex>-1&&targetIndex>-1))throw"Source and/or target doesn't know this edge!";if(edge.source.edges.splice(sourceIndex,1),edge.target!=edge.source&&edge.target.edges.splice(targetIndex,1),-1==(index=edge.source.owner.getEdges().indexOf(edge)))throw"Not in owner's edge list!";edge.source.owner.getEdges().splice(index,1)}},LGraph.prototype.updateLeftTop=function(){for(var nodeTop,nodeLeft,margin,top2=Integer.MAX_VALUE,left3=Integer.MAX_VALUE,nodes5=this.getNodes(),s2=nodes5.length,i2=0;i2<s2;i2++){var lNode=nodes5[i2];top2>(nodeTop=lNode.getTop())&&(top2=nodeTop),left3>(nodeLeft=lNode.getLeft())&&(left3=nodeLeft)}return top2==Integer.MAX_VALUE?null:(margin=null!=nodes5[0].getParent().paddingLeft?nodes5[0].getParent().paddingLeft:this.margin,this.left=left3-margin,this.top=top2-margin,new Point3(this.left,this.top))},LGraph.prototype.updateBounds=function(recursive){for(var nodeLeft,nodeRight,nodeTop,nodeBottom,margin,left3=Integer.MAX_VALUE,right3=-Integer.MAX_VALUE,top2=Integer.MAX_VALUE,bottom2=-Integer.MAX_VALUE,nodes5=this.nodes,s2=nodes5.length,i2=0;i2<s2;i2++){var lNode=nodes5[i2];recursive&&null!=lNode.child&&lNode.updateBounds(),left3>(nodeLeft=lNode.getLeft())&&(left3=nodeLeft),right3<(nodeRight=lNode.getRight())&&(right3=nodeRight),top2>(nodeTop=lNode.getTop())&&(top2=nodeTop),bottom2<(nodeBottom=lNode.getBottom())&&(bottom2=nodeBottom)}var boundingRect=new RectangleD(left3,top2,right3-left3,bottom2-top2);left3==Integer.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),margin=null!=nodes5[0].getParent().paddingLeft?nodes5[0].getParent().paddingLeft:this.margin,this.left=boundingRect.x-margin,this.right=boundingRect.x+boundingRect.width+margin,this.top=boundingRect.y-margin,this.bottom=boundingRect.y+boundingRect.height+margin},LGraph.calculateBounds=function(nodes5){for(var nodeLeft,nodeRight,nodeTop,nodeBottom,left3=Integer.MAX_VALUE,right3=-Integer.MAX_VALUE,top2=Integer.MAX_VALUE,bottom2=-Integer.MAX_VALUE,s2=nodes5.length,i2=0;i2<s2;i2++){var lNode=nodes5[i2];left3>(nodeLeft=lNode.getLeft())&&(left3=nodeLeft),right3<(nodeRight=lNode.getRight())&&(right3=nodeRight),top2>(nodeTop=lNode.getTop())&&(top2=nodeTop),bottom2<(nodeBottom=lNode.getBottom())&&(bottom2=nodeBottom)}return new RectangleD(left3,top2,right3-left3,bottom2-top2)},LGraph.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},LGraph.prototype.getEstimatedSize=function(){if(this.estimatedSize==Integer.MIN_VALUE)throw"assert failed";return this.estimatedSize},LGraph.prototype.calcEstimatedSize=function(){for(var size4=0,nodes5=this.nodes,s2=nodes5.length,i2=0;i2<s2;i2++){size4+=nodes5[i2].calcEstimatedSize()}return this.estimatedSize=0==size4?LayoutConstants.EMPTY_COMPOUND_NODE_SIZE:size4/Math.sqrt(this.nodes.length),this.estimatedSize},LGraph.prototype.updateConnected=function(){var self2=this;if(0!=this.nodes.length){var neighborEdges,currentNeighbor,queue=new LinkedList,visited=new Set,currentNode=this.nodes[0];for(currentNode.withChildren().forEach(function(node2){queue.push(node2),visited.add(node2)});0!==queue.length;)for(var size4=(neighborEdges=(currentNode=queue.shift()).getEdges()).length,i2=0;i2<size4;i2++){if(null!=(currentNeighbor=neighborEdges[i2].getOtherEndInGraph(currentNode,this))&&!visited.has(currentNeighbor))currentNeighbor.withChildren().forEach(function(node2){queue.push(node2),visited.add(node2)})}if(this.isConnected=!1,visited.size>=this.nodes.length){var noOfVisitedInThisGraph=0;visited.forEach(function(visitedNode){visitedNode.owner==self2&&noOfVisitedInThisGraph++}),noOfVisitedInThisGraph==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},module3.exports=LGraph},function(module3,exports3,__webpack_require__){var LGraph,LEdge=__webpack_require__(1);function LGraphManager(layout6){LGraph=__webpack_require__(6),this.layout=layout6,this.graphs=[],this.edges=[]}__name(LGraphManager,"LGraphManager"),LGraphManager.prototype.addRoot=function(){var ngraph=this.layout.newGraph(),nnode=this.layout.newNode(null),root3=this.add(ngraph,nnode);return this.setRootGraph(root3),this.rootGraph},LGraphManager.prototype.add=function(newGraph,parentNode,newEdge,sourceNode,targetNode){if(null==newEdge&&null==sourceNode&&null==targetNode){if(null==newGraph)throw"Graph is null!";if(null==parentNode)throw"Parent node is null!";if(this.graphs.indexOf(newGraph)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(newGraph),null!=newGraph.parent)throw"Already has a parent!";if(null!=parentNode.child)throw"Already has a child!";return newGraph.parent=parentNode,parentNode.child=newGraph,newGraph}targetNode=newEdge,newEdge=newGraph;var sourceGraph=(sourceNode=parentNode).getOwner(),targetGraph=targetNode.getOwner();if(null==sourceGraph||sourceGraph.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==targetGraph||targetGraph.getGraphManager()!=this)throw"Target not in this graph mgr!";if(sourceGraph==targetGraph)return newEdge.isInterGraph=!1,sourceGraph.add(newEdge,sourceNode,targetNode);if(newEdge.isInterGraph=!0,newEdge.source=sourceNode,newEdge.target=targetNode,this.edges.indexOf(newEdge)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(newEdge),null==newEdge.source||null==newEdge.target)throw"Edge source and/or target is null!";if(-1!=newEdge.source.edges.indexOf(newEdge)||-1!=newEdge.target.edges.indexOf(newEdge))throw"Edge already in source and/or target incidency list!";return newEdge.source.edges.push(newEdge),newEdge.target.edges.push(newEdge),newEdge},LGraphManager.prototype.remove=function(lObj){if(lObj instanceof LGraph){var graph=lObj;if(graph.getGraphManager()!=this)throw"Graph not in this graph mgr";if(graph!=this.rootGraph&&(null==graph.parent||graph.parent.graphManager!=this))throw"Invalid parent node!";for(var edge,edgesToBeRemoved=[],s2=(edgesToBeRemoved=edgesToBeRemoved.concat(graph.getEdges())).length,i2=0;i2<s2;i2++)edge=edgesToBeRemoved[i2],graph.remove(edge);var node2,nodesToBeRemoved=[];s2=(nodesToBeRemoved=nodesToBeRemoved.concat(graph.getNodes())).length;for(i2=0;i2<s2;i2++)node2=nodesToBeRemoved[i2],graph.remove(node2);graph==this.rootGraph&&this.setRootGraph(null);var index=this.graphs.indexOf(graph);this.graphs.splice(index,1),graph.parent=null}else if(lObj instanceof LEdge){if(null==(edge=lObj))throw"Edge is null!";if(!edge.isInterGraph)throw"Not an inter-graph edge!";if(null==edge.source||null==edge.target)throw"Source and/or target is null!";if(-1==edge.source.edges.indexOf(edge)||-1==edge.target.edges.indexOf(edge))throw"Source and/or target doesn't know this edge!";index=edge.source.edges.indexOf(edge);if(edge.source.edges.splice(index,1),index=edge.target.edges.indexOf(edge),edge.target.edges.splice(index,1),null==edge.source.owner||null==edge.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==edge.source.owner.getGraphManager().edges.indexOf(edge))throw"Not in owner graph manager's edge list!";index=edge.source.owner.getGraphManager().edges.indexOf(edge);edge.source.owner.getGraphManager().edges.splice(index,1)}},LGraphManager.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},LGraphManager.prototype.getGraphs=function(){return this.graphs},LGraphManager.prototype.getAllNodes=function(){if(null==this.allNodes){for(var nodeList=[],graphs=this.getGraphs(),s2=graphs.length,i2=0;i2<s2;i2++)nodeList=nodeList.concat(graphs[i2].getNodes());this.allNodes=nodeList}return this.allNodes},LGraphManager.prototype.resetAllNodes=function(){this.allNodes=null},LGraphManager.prototype.resetAllEdges=function(){this.allEdges=null},LGraphManager.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},LGraphManager.prototype.getAllEdges=function(){if(null==this.allEdges){for(var edgeList2=[],graphs=this.getGraphs(),i2=(graphs.length,0);i2<graphs.length;i2++)edgeList2=edgeList2.concat(graphs[i2].getEdges());edgeList2=edgeList2.concat(this.edges),this.allEdges=edgeList2}return this.allEdges},LGraphManager.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},LGraphManager.prototype.setAllNodesToApplyGravitation=function(nodeList){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=nodeList},LGraphManager.prototype.getRoot=function(){return this.rootGraph},LGraphManager.prototype.setRootGraph=function(graph){if(graph.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=graph,null==graph.parent&&(graph.parent=this.layout.newNode("Root node"))},LGraphManager.prototype.getLayout=function(){return this.layout},LGraphManager.prototype.isOneAncestorOfOther=function(firstNode,secondNode){if(null==firstNode||null==secondNode)throw"assert failed";if(firstNode==secondNode)return!0;for(var parentNode,ownerGraph=firstNode.getOwner();;){if(null==(parentNode=ownerGraph.getParent()))break;if(parentNode==secondNode)return!0;if(null==(ownerGraph=parentNode.getOwner()))break}for(ownerGraph=secondNode.getOwner();;){if(null==(parentNode=ownerGraph.getParent()))break;if(parentNode==firstNode)return!0;if(null==(ownerGraph=parentNode.getOwner()))break}return!1},LGraphManager.prototype.calcLowestCommonAncestors=function(){for(var edge,sourceNode,targetNode,sourceAncestorGraph,targetAncestorGraph,edges3=this.getAllEdges(),s2=edges3.length,i2=0;i2<s2;i2++)if(sourceNode=(edge=edges3[i2]).source,targetNode=edge.target,edge.lca=null,edge.sourceInLca=sourceNode,edge.targetInLca=targetNode,sourceNode!=targetNode){for(sourceAncestorGraph=sourceNode.getOwner();null==edge.lca;){for(edge.targetInLca=targetNode,targetAncestorGraph=targetNode.getOwner();null==edge.lca;){if(targetAncestorGraph==sourceAncestorGraph){edge.lca=targetAncestorGraph;break}if(targetAncestorGraph==this.rootGraph)break;if(null!=edge.lca)throw"assert failed";edge.targetInLca=targetAncestorGraph.getParent(),targetAncestorGraph=edge.targetInLca.getOwner()}if(sourceAncestorGraph==this.rootGraph)break;null==edge.lca&&(edge.sourceInLca=sourceAncestorGraph.getParent(),sourceAncestorGraph=edge.sourceInLca.getOwner())}if(null==edge.lca)throw"assert failed"}else edge.lca=sourceNode.getOwner()},LGraphManager.prototype.calcLowestCommonAncestor=function(firstNode,secondNode){if(firstNode==secondNode)return firstNode.getOwner();for(var firstOwnerGraph=firstNode.getOwner();;){if(null==firstOwnerGraph)break;for(var secondOwnerGraph=secondNode.getOwner();;){if(null==secondOwnerGraph)break;if(secondOwnerGraph==firstOwnerGraph)return secondOwnerGraph;secondOwnerGraph=secondOwnerGraph.getParent().getOwner()}firstOwnerGraph=firstOwnerGraph.getParent().getOwner()}return firstOwnerGraph},LGraphManager.prototype.calcInclusionTreeDepths=function(graph,depth){var node2;null==graph&&null==depth&&(graph=this.rootGraph,depth=1);for(var nodes5=graph.getNodes(),s2=nodes5.length,i2=0;i2<s2;i2++)(node2=nodes5[i2]).inclusionTreeDepth=depth,null!=node2.child&&this.calcInclusionTreeDepths(node2.child,depth+1)},LGraphManager.prototype.includesInvalidEdge=function(){for(var edge,edgesToRemove=[],s2=this.edges.length,i2=0;i2<s2;i2++)edge=this.edges[i2],this.isOneAncestorOfOther(edge.source,edge.target)&&edgesToRemove.push(edge);for(i2=0;i2<edgesToRemove.length;i2++)this.remove(edgesToRemove[i2]);return!1},module3.exports=LGraphManager},function(module3,exports3,__webpack_require__){var Point3=__webpack_require__(12);function IGeometry(){}__name(IGeometry,"IGeometry"),IGeometry.calcSeparationAmount=function(rectA,rectB,overlapAmount,separationBuffer){if(!rectA.intersects(rectB))throw"assert failed";var directions=new Array(2);this.decideDirectionsForOverlappingNodes(rectA,rectB,directions),overlapAmount[0]=Math.min(rectA.getRight(),rectB.getRight())-Math.max(rectA.x,rectB.x),overlapAmount[1]=Math.min(rectA.getBottom(),rectB.getBottom())-Math.max(rectA.y,rectB.y),rectA.getX()<=rectB.getX()&&rectA.getRight()>=rectB.getRight()?overlapAmount[0]+=Math.min(rectB.getX()-rectA.getX(),rectA.getRight()-rectB.getRight()):rectB.getX()<=rectA.getX()&&rectB.getRight()>=rectA.getRight()&&(overlapAmount[0]+=Math.min(rectA.getX()-rectB.getX(),rectB.getRight()-rectA.getRight())),rectA.getY()<=rectB.getY()&&rectA.getBottom()>=rectB.getBottom()?overlapAmount[1]+=Math.min(rectB.getY()-rectA.getY(),rectA.getBottom()-rectB.getBottom()):rectB.getY()<=rectA.getY()&&rectB.getBottom()>=rectA.getBottom()&&(overlapAmount[1]+=Math.min(rectA.getY()-rectB.getY(),rectB.getBottom()-rectA.getBottom()));var slope=Math.abs((rectB.getCenterY()-rectA.getCenterY())/(rectB.getCenterX()-rectA.getCenterX()));rectB.getCenterY()===rectA.getCenterY()&&rectB.getCenterX()===rectA.getCenterX()&&(slope=1);var moveByY=slope*overlapAmount[0],moveByX=overlapAmount[1]/slope;overlapAmount[0]<moveByX?moveByX=overlapAmount[0]:moveByY=overlapAmount[1],overlapAmount[0]=-1*directions[0]*(moveByX/2+separationBuffer),overlapAmount[1]=-1*directions[1]*(moveByY/2+separationBuffer)},IGeometry.decideDirectionsForOverlappingNodes=function(rectA,rectB,directions){rectA.getCenterX()<rectB.getCenterX()?directions[0]=-1:directions[0]=1,rectA.getCenterY()<rectB.getCenterY()?directions[1]=-1:directions[1]=1},IGeometry.getIntersection2=function(rectA,rectB,result){var p1x=rectA.getCenterX(),p1y=rectA.getCenterY(),p2x=rectB.getCenterX(),p2y=rectB.getCenterY();if(rectA.intersects(rectB))return result[0]=p1x,result[1]=p1y,result[2]=p2x,result[3]=p2y,!0;var topLeftAx=rectA.getX(),topLeftAy=rectA.getY(),topRightAx=rectA.getRight(),bottomLeftAx=rectA.getX(),bottomLeftAy=rectA.getBottom(),bottomRightAx=rectA.getRight(),halfWidthA=rectA.getWidthHalf(),halfHeightA=rectA.getHeightHalf(),topLeftBx=rectB.getX(),topLeftBy=rectB.getY(),topRightBx=rectB.getRight(),bottomLeftBx=rectB.getX(),bottomLeftBy=rectB.getBottom(),bottomRightBx=rectB.getRight(),halfWidthB=rectB.getWidthHalf(),halfHeightB=rectB.getHeightHalf(),clipPointAFound=!1,clipPointBFound=!1;if(p1x===p2x){if(p1y>p2y)return result[0]=p1x,result[1]=topLeftAy,result[2]=p2x,result[3]=bottomLeftBy,!1;if(p1y<p2y)return result[0]=p1x,result[1]=bottomLeftAy,result[2]=p2x,result[3]=topLeftBy,!1}else if(p1y===p2y){if(p1x>p2x)return result[0]=topLeftAx,result[1]=p1y,result[2]=topRightBx,result[3]=p2y,!1;if(p1x<p2x)return result[0]=topRightAx,result[1]=p1y,result[2]=topLeftBx,result[3]=p2y,!1}else{var slopeA=rectA.height/rectA.width,slopeB=rectB.height/rectB.width,slopePrime=(p2y-p1y)/(p2x-p1x),cardinalDirectionA=void 0,cardinalDirectionB=void 0,tempPointAx=void 0,tempPointAy=void 0,tempPointBx=void 0,tempPointBy=void 0;if(-slopeA===slopePrime?p1x>p2x?(result[0]=bottomLeftAx,result[1]=bottomLeftAy,clipPointAFound=!0):(result[0]=topRightAx,result[1]=topLeftAy,clipPointAFound=!0):slopeA===slopePrime&&(p1x>p2x?(result[0]=topLeftAx,result[1]=topLeftAy,clipPointAFound=!0):(result[0]=bottomRightAx,result[1]=bottomLeftAy,clipPointAFound=!0)),-slopeB===slopePrime?p2x>p1x?(result[2]=bottomLeftBx,result[3]=bottomLeftBy,clipPointBFound=!0):(result[2]=topRightBx,result[3]=topLeftBy,clipPointBFound=!0):slopeB===slopePrime&&(p2x>p1x?(result[2]=topLeftBx,result[3]=topLeftBy,clipPointBFound=!0):(result[2]=bottomRightBx,result[3]=bottomLeftBy,clipPointBFound=!0)),clipPointAFound&&clipPointBFound)return!1;if(p1x>p2x?p1y>p2y?(cardinalDirectionA=this.getCardinalDirection(slopeA,slopePrime,4),cardinalDirectionB=this.getCardinalDirection(slopeB,slopePrime,2)):(cardinalDirectionA=this.getCardinalDirection(-slopeA,slopePrime,3),cardinalDirectionB=this.getCardinalDirection(-slopeB,slopePrime,1)):p1y>p2y?(cardinalDirectionA=this.getCardinalDirection(-slopeA,slopePrime,1),cardinalDirectionB=this.getCardinalDirection(-slopeB,slopePrime,3)):(cardinalDirectionA=this.getCardinalDirection(slopeA,slopePrime,2),cardinalDirectionB=this.getCardinalDirection(slopeB,slopePrime,4)),!clipPointAFound)switch(cardinalDirectionA){case 1:tempPointAy=topLeftAy,tempPointAx=p1x+-halfHeightA/slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 2:tempPointAx=bottomRightAx,tempPointAy=p1y+halfWidthA*slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 3:tempPointAy=bottomLeftAy,tempPointAx=p1x+halfHeightA/slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 4:tempPointAx=bottomLeftAx,tempPointAy=p1y+-halfWidthA*slopePrime,result[0]=tempPointAx,result[1]=tempPointAy}if(!clipPointBFound)switch(cardinalDirectionB){case 1:tempPointBy=topLeftBy,tempPointBx=p2x+-halfHeightB/slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 2:tempPointBx=bottomRightBx,tempPointBy=p2y+halfWidthB*slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 3:tempPointBy=bottomLeftBy,tempPointBx=p2x+halfHeightB/slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 4:tempPointBx=bottomLeftBx,tempPointBy=p2y+-halfWidthB*slopePrime,result[2]=tempPointBx,result[3]=tempPointBy}}return!1},IGeometry.getCardinalDirection=function(slope,slopePrime,line2){return slope>slopePrime?line2:1+line2%4},IGeometry.getIntersection=function(s1,s2,f1,f2){if(null==f2)return this.getIntersection2(s1,s2,f1);var a1,a2,b1,b22,c1,c22,denom,x1=s1.x,y1=s1.y,x22=s2.x,y22=s2.y,x32=f1.x,y32=f1.y,x42=f2.x,y42=f2.y;return 0===(denom=(a1=y22-y1)*(b22=x32-x42)-(a2=y42-y32)*(b1=x1-x22))?null:new Point3((b1*(c22=x42*y32-x32*y42)-b22*(c1=x22*y1-x1*y22))/denom,(a2*c1-a1*c22)/denom)},IGeometry.angleOfVector=function(Cx,Cy,Nx,Ny){var C_angle=void 0;return Cx!==Nx?(C_angle=Math.atan((Ny-Cy)/(Nx-Cx)),Nx<Cx?C_angle+=Math.PI:Ny<Cy&&(C_angle+=this.TWO_PI)):C_angle=Ny<Cy?this.ONE_AND_HALF_PI:this.HALF_PI,C_angle},IGeometry.doIntersect=function(p1,p22,p3,p4){var a2=p1.x,b3=p1.y,c3=p22.x,d3=p22.y,p5=p3.x,q3=p3.y,r2=p4.x,s2=p4.y,det=(c3-a2)*(s2-q3)-(r2-p5)*(d3-b3);if(0===det)return!1;var lambda=((s2-q3)*(r2-a2)+(p5-r2)*(s2-b3))/det,gamma2=((b3-d3)*(r2-a2)+(c3-a2)*(s2-b3))/det;return 0<lambda&&lambda<1&&0<gamma2&&gamma2<1},IGeometry.findCircleLineIntersections=function(Ex,Ey,Lx,Ly,Cx,Cy,r2){var a2=(Lx-Ex)*(Lx-Ex)+(Ly-Ey)*(Ly-Ey),b3=2*((Ex-Cx)*(Lx-Ex)+(Ey-Cy)*(Ly-Ey)),c3=(Ex-Cx)*(Ex-Cx)+(Ey-Cy)*(Ey-Cy)-r2*r2;if(b3*b3-4*a2*c3>=0){var t13=(-b3+Math.sqrt(b3*b3-4*a2*c3))/(2*a2),t22=(-b3-Math.sqrt(b3*b3-4*a2*c3))/(2*a2);return t13>=0&&t13<=1?[t13]:t22>=0&&t22<=1?[t22]:null}return null},IGeometry.HALF_PI=.5*Math.PI,IGeometry.ONE_AND_HALF_PI=1.5*Math.PI,IGeometry.TWO_PI=2*Math.PI,IGeometry.THREE_PI=3*Math.PI,module3.exports=IGeometry},function(module3,exports3,__webpack_require__){function IMath(){}__name(IMath,"IMath"),IMath.sign=function(value2){return value2>0?1:value2<0?-1:0},IMath.floor=function(value2){return value2<0?Math.ceil(value2):Math.floor(value2)},IMath.ceil=function(value2){return value2<0?Math.floor(value2):Math.ceil(value2)},module3.exports=IMath},function(module3,exports3,__webpack_require__){function Integer(){}__name(Integer,"Integer"),Integer.MAX_VALUE=2147483647,Integer.MIN_VALUE=-2147483648,module3.exports=Integer},function(module3,exports3,__webpack_require__){var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var nodeFrom=__name(function(value2){return{value:value2,next:null,prev:null}},"nodeFrom"),add3=__name(function(prev2,node2,next3,list){return null!==prev2?prev2.next=node2:list.head=node2,null!==next3?next3.prev=node2:list.tail=node2,node2.prev=prev2,node2.next=next3,list.length++,node2},"add"),_remove=__name(function(node2,list){var prev2=node2.prev,next3=node2.next;return null!==prev2?prev2.next=next3:list.head=next3,null!==next3?next3.prev=prev2:list.tail=prev2,node2.prev=node2.next=null,list.length--,node2},"_remove"),LinkedList=function(){function LinkedList2(vals){var _this=this;_classCallCheck2(this,LinkedList2),this.length=0,this.head=null,this.tail=null,null!=vals&&vals.forEach(function(v3){return _this.push(v3)})}return __name(LinkedList2,"LinkedList"),_createClass2(LinkedList2,[{key:"size",value:__name(function(){return this.length},"size")},{key:"insertBefore",value:__name(function(val,otherNode){return add3(otherNode.prev,nodeFrom(val),otherNode,this)},"insertBefore")},{key:"insertAfter",value:__name(function(val,otherNode){return add3(otherNode,nodeFrom(val),otherNode.next,this)},"insertAfter")},{key:"insertNodeBefore",value:__name(function(newNode,otherNode){return add3(otherNode.prev,newNode,otherNode,this)},"insertNodeBefore")},{key:"insertNodeAfter",value:__name(function(newNode,otherNode){return add3(otherNode,newNode,otherNode.next,this)},"insertNodeAfter")},{key:"push",value:__name(function(val){return add3(this.tail,nodeFrom(val),null,this)},"push")},{key:"unshift",value:__name(function(val){return add3(null,nodeFrom(val),this.head,this)},"unshift")},{key:"remove",value:__name(function(node2){return _remove(node2,this)},"remove")},{key:"pop",value:__name(function(){return _remove(this.tail,this).value},"pop")},{key:"popNode",value:__name(function(){return _remove(this.tail,this)},"popNode")},{key:"shift",value:__name(function(){return _remove(this.head,this).value},"shift")},{key:"shiftNode",value:__name(function(){return _remove(this.head,this)},"shiftNode")},{key:"get_object_at",value:__name(function(index){if(index<=this.length()){for(var i2=1,current=this.head;i2<index;)current=current.next,i2++;return current.value}},"get_object_at")},{key:"set_object_at",value:__name(function(index,value2){if(index<=this.length()){for(var i2=1,current=this.head;i2<index;)current=current.next,i2++;current.value=value2}},"set_object_at")}]),LinkedList2}();module3.exports=LinkedList},function(module3,exports3,__webpack_require__){function Point3(x5,y6,p3){this.x=null,this.y=null,null==x5&&null==y6&&null==p3?(this.x=0,this.y=0):"number"==typeof x5&&"number"==typeof y6&&null==p3?(this.x=x5,this.y=y6):"Point"==x5.constructor.name&&null==y6&&null==p3&&(p3=x5,this.x=p3.x,this.y=p3.y)}__name(Point3,"Point"),Point3.prototype.getX=function(){return this.x},Point3.prototype.getY=function(){return this.y},Point3.prototype.getLocation=function(){return new Point3(this.x,this.y)},Point3.prototype.setLocation=function(x5,y6,p3){"Point"==x5.constructor.name&&null==y6&&null==p3?(p3=x5,this.setLocation(p3.x,p3.y)):"number"==typeof x5&&"number"==typeof y6&&null==p3&&(parseInt(x5)==x5&&parseInt(y6)==y6?this.move(x5,y6):(this.x=Math.floor(x5+.5),this.y=Math.floor(y6+.5)))},Point3.prototype.move=function(x5,y6){this.x=x5,this.y=y6},Point3.prototype.translate=function(dx,dy){this.x+=dx,this.y+=dy},Point3.prototype.equals=function(obj){if("Point"==obj.constructor.name){var pt=obj;return this.x==pt.x&&this.y==pt.y}return this==obj},Point3.prototype.toString=function(){return(new Point3).constructor.name+"[x="+this.x+",y="+this.y+"]"},module3.exports=Point3},function(module3,exports3,__webpack_require__){function RectangleD(x5,y6,width3,height2){this.x=0,this.y=0,this.width=0,this.height=0,null!=x5&&null!=y6&&null!=width3&&null!=height2&&(this.x=x5,this.y=y6,this.width=width3,this.height=height2)}__name(RectangleD,"RectangleD"),RectangleD.prototype.getX=function(){return this.x},RectangleD.prototype.setX=function(x5){this.x=x5},RectangleD.prototype.getY=function(){return this.y},RectangleD.prototype.setY=function(y6){this.y=y6},RectangleD.prototype.getWidth=function(){return this.width},RectangleD.prototype.setWidth=function(width3){this.width=width3},RectangleD.prototype.getHeight=function(){return this.height},RectangleD.prototype.setHeight=function(height2){this.height=height2},RectangleD.prototype.getRight=function(){return this.x+this.width},RectangleD.prototype.getBottom=function(){return this.y+this.height},RectangleD.prototype.intersects=function(a2){return!(this.getRight()<a2.x)&&(!(this.getBottom()<a2.y)&&(!(a2.getRight()<this.x)&&!(a2.getBottom()<this.y)))},RectangleD.prototype.getCenterX=function(){return this.x+this.width/2},RectangleD.prototype.getMinX=function(){return this.getX()},RectangleD.prototype.getMaxX=function(){return this.getX()+this.width},RectangleD.prototype.getCenterY=function(){return this.y+this.height/2},RectangleD.prototype.getMinY=function(){return this.getY()},RectangleD.prototype.getMaxY=function(){return this.getY()+this.height},RectangleD.prototype.getWidthHalf=function(){return this.width/2},RectangleD.prototype.getHeightHalf=function(){return this.height/2},module3.exports=RectangleD},function(module3,exports3,__webpack_require__){var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function UniqueIDGeneretor(){}__name(UniqueIDGeneretor,"UniqueIDGeneretor"),UniqueIDGeneretor.lastID=0,UniqueIDGeneretor.createID=function(obj){return UniqueIDGeneretor.isPrimitive(obj)?obj:(null!=obj.uniqueID||(obj.uniqueID=UniqueIDGeneretor.getString(),UniqueIDGeneretor.lastID++),obj.uniqueID)},UniqueIDGeneretor.getString=function(id30){return null==id30&&(id30=UniqueIDGeneretor.lastID),"Object#"+id30},UniqueIDGeneretor.isPrimitive=function(arg){var type3=void 0===arg?"undefined":_typeof2(arg);return null==arg||"object"!=type3&&"function"!=type3},module3.exports=UniqueIDGeneretor},function(module3,exports3,__webpack_require__){function _toConsumableArray2(arr){if(Array.isArray(arr)){for(var i2=0,arr2=Array(arr.length);i2<arr.length;i2++)arr2[i2]=arr[i2];return arr2}return Array.from(arr)}__name(_toConsumableArray2,"_toConsumableArray");var LayoutConstants=__webpack_require__(0),LGraphManager=__webpack_require__(7),LNode=__webpack_require__(3),LEdge=__webpack_require__(1),LGraph=__webpack_require__(6),PointD=__webpack_require__(5),Transform2=__webpack_require__(17),Emitter4=__webpack_require__(29);function Layout2(isRemoteUse){Emitter4.call(this),this.layoutQuality=LayoutConstants.QUALITY,this.createBendsAsNeeded=LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=LayoutConstants.DEFAULT_INCREMENTAL,this.animationOnLayout=LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=LayoutConstants.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new LGraphManager(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=isRemoteUse&&(this.isRemoteUse=isRemoteUse)}__name(Layout2,"Layout"),Layout2.RANDOM_SEED=1,Layout2.prototype=Object.create(Emitter4.prototype),Layout2.prototype.getGraphManager=function(){return this.graphManager},Layout2.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},Layout2.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},Layout2.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},Layout2.prototype.newGraphManager=function(){var gm=new LGraphManager(this);return this.graphManager=gm,gm},Layout2.prototype.newGraph=function(vGraph){return new LGraph(null,this.graphManager,vGraph)},Layout2.prototype.newNode=function(vNode){return new LNode(this.graphManager,vNode)},Layout2.prototype.newEdge=function(vEdge){return new LEdge(null,null,vEdge)},Layout2.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},Layout2.prototype.runLayout=function(){var isLayoutSuccessfull;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),isLayoutSuccessfull=!this.checkLayoutSuccess()&&this.layout(),"during"!==LayoutConstants.ANIMATE&&(isLayoutSuccessfull&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,isLayoutSuccessfull)},Layout2.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},Layout2.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var allEdges=this.graphManager.getAllEdges(),i2=0;i2<allEdges.length;i2++)allEdges[i2];var nodes5=this.graphManager.getRoot().getNodes();for(i2=0;i2<nodes5.length;i2++)nodes5[i2];this.update(this.graphManager.getRoot())}},Layout2.prototype.update=function(obj){if(null==obj)this.update2();else if(obj instanceof LNode){var node2=obj;if(null!=node2.getChild())for(var nodes5=node2.getChild().getNodes(),i2=0;i2<nodes5.length;i2++)update(nodes5[i2]);if(null!=node2.vGraphObject)node2.vGraphObject.update(node2)}else if(obj instanceof LEdge){var edge=obj;if(null!=edge.vGraphObject)edge.vGraphObject.update(edge)}else if(obj instanceof LGraph){var graph=obj;if(null!=graph.vGraphObject)graph.vGraphObject.update(graph)}},Layout2.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=LayoutConstants.QUALITY,this.animationDuringLayout=LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=LayoutConstants.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=LayoutConstants.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},Layout2.prototype.transform=function(newLeftTop){if(null==newLeftTop)this.transform(new PointD(0,0));else{var trans=new Transform2,leftTop=this.graphManager.getRoot().updateLeftTop();if(null!=leftTop){trans.setWorldOrgX(newLeftTop.x),trans.setWorldOrgY(newLeftTop.y),trans.setDeviceOrgX(leftTop.x),trans.setDeviceOrgY(leftTop.y);for(var nodes5=this.getAllNodes(),i2=0;i2<nodes5.length;i2++)nodes5[i2].transform(trans)}}},Layout2.prototype.positionNodesRandomly=function(graph){if(null==graph)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var lNode,childGraph,nodes5=graph.getNodes(),i2=0;i2<nodes5.length;i2++)null==(childGraph=(lNode=nodes5[i2]).getChild())||0==childGraph.getNodes().length?lNode.scatter():(this.positionNodesRandomly(childGraph),lNode.updateBounds())},Layout2.prototype.getFlatForest=function(){for(var flatForest=[],isForest=!0,allNodes=this.graphManager.getRoot().getNodes(),isFlat=!0,i2=0;i2<allNodes.length;i2++)null!=allNodes[i2].getChild()&&(isFlat=!1);if(!isFlat)return flatForest;var visited=new Set,toBeVisited=[],parents3=new Map,unProcessedNodes=[];for(unProcessedNodes=unProcessedNodes.concat(allNodes);unProcessedNodes.length>0&&isForest;){for(toBeVisited.push(unProcessedNodes[0]);toBeVisited.length>0&&isForest;){var currentNode=toBeVisited[0];toBeVisited.splice(0,1),visited.add(currentNode);var neighborEdges=currentNode.getEdges();for(i2=0;i2<neighborEdges.length;i2++){var currentNeighbor=neighborEdges[i2].getOtherEnd(currentNode);if(parents3.get(currentNode)!=currentNeighbor){if(visited.has(currentNeighbor)){isForest=!1;break}toBeVisited.push(currentNeighbor),parents3.set(currentNeighbor,currentNode)}}}if(isForest){var temp=[].concat(_toConsumableArray2(visited));flatForest.push(temp);for(i2=0;i2<temp.length;i2++){var value2=temp[i2],index=unProcessedNodes.indexOf(value2);index>-1&&unProcessedNodes.splice(index,1)}visited=new Set,parents3=new Map}else flatForest=[]}return flatForest},Layout2.prototype.createDummyNodesForBendpoints=function(edge){for(var dummyNodes=[],prev2=edge.source,graph=this.graphManager.calcLowestCommonAncestor(edge.source,edge.target),i2=0;i2<edge.bendpoints.length;i2++){var dummyNode=this.newNode(null);dummyNode.setRect(new Point(0,0),new Dimension(1,1)),graph.add(dummyNode);var dummyEdge=this.newEdge(null);this.graphManager.add(dummyEdge,prev2,dummyNode),dummyNodes.add(dummyNode),prev2=dummyNode}dummyEdge=this.newEdge(null);return this.graphManager.add(dummyEdge,prev2,edge.target),this.edgeToDummyNodes.set(edge,dummyNodes),edge.isInterGraph()?this.graphManager.remove(edge):graph.remove(edge),dummyNodes},Layout2.prototype.createBendpointsFromDummyNodes=function(){var edges3=[];edges3=edges3.concat(this.graphManager.getAllEdges()),edges3=[].concat(_toConsumableArray2(this.edgeToDummyNodes.keys())).concat(edges3);for(var k2=0;k2<edges3.length;k2++){var lEdge=edges3[k2];if(lEdge.bendpoints.length>0){for(var path4=this.edgeToDummyNodes.get(lEdge),i2=0;i2<path4.length;i2++){var dummyNode=path4[i2],p3=new PointD(dummyNode.getCenterX(),dummyNode.getCenterY()),ebp=lEdge.bendpoints.get(i2);ebp.x=p3.x,ebp.y=p3.y,dummyNode.getOwner().remove(dummyNode)}this.graphManager.add(lEdge,lEdge.source,lEdge.target)}}},Layout2.transform=function(sliderValue,defaultValue,minDiv,maxMul){if(null!=minDiv&&null!=maxMul){var value2=defaultValue;if(sliderValue<=50)value2-=(defaultValue-defaultValue/minDiv)/50*(50-sliderValue);else value2+=(defaultValue*maxMul-defaultValue)/50*(sliderValue-50);return value2}var a2,b3;return sliderValue<=50?(a2=9*defaultValue/500,b3=defaultValue/10):(a2=9*defaultValue/50,b3=-8*defaultValue),a2*sliderValue+b3},Layout2.findCenterOfTree=function(nodes5){var list=[];list=list.concat(nodes5);var removedNodes=[],remainingDegrees=new Map,foundCenter=!1,centerNode=null;1!=list.length&&2!=list.length||(foundCenter=!0,centerNode=list[0]);for(var i2=0;i2<list.length;i2++){var degree=(node2=list[i2]).getNeighborsList().size;remainingDegrees.set(node2,node2.getNeighborsList().size),1==degree&&removedNodes.push(node2)}var tempList=[];for(tempList=tempList.concat(removedNodes);!foundCenter;){var tempList2=[];tempList2=tempList2.concat(tempList),tempList=[];for(i2=0;i2<list.length;i2++){var node2=list[i2],index=list.indexOf(node2);index>=0&&list.splice(index,1),node2.getNeighborsList().forEach(function(neighbour){if(removedNodes.indexOf(neighbour)<0){var newDegree=remainingDegrees.get(neighbour)-1;1==newDegree&&tempList.push(neighbour),remainingDegrees.set(neighbour,newDegree)}})}removedNodes=removedNodes.concat(tempList),1!=list.length&&2!=list.length||(foundCenter=!0,centerNode=list[0])}return centerNode},Layout2.prototype.setGraphManager=function(gm){this.graphManager=gm},module3.exports=Layout2},function(module3,exports3,__webpack_require__){function RandomSeed(){}__name(RandomSeed,"RandomSeed"),RandomSeed.seed=1,RandomSeed.x=0,RandomSeed.nextDouble=function(){return RandomSeed.x=1e4*Math.sin(RandomSeed.seed++),RandomSeed.x-Math.floor(RandomSeed.x)},module3.exports=RandomSeed},function(module3,exports3,__webpack_require__){var PointD=__webpack_require__(5);function Transform2(x5,y6){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}__name(Transform2,"Transform"),Transform2.prototype.getWorldOrgX=function(){return this.lworldOrgX},Transform2.prototype.setWorldOrgX=function(wox){this.lworldOrgX=wox},Transform2.prototype.getWorldOrgY=function(){return this.lworldOrgY},Transform2.prototype.setWorldOrgY=function(woy){this.lworldOrgY=woy},Transform2.prototype.getWorldExtX=function(){return this.lworldExtX},Transform2.prototype.setWorldExtX=function(wex){this.lworldExtX=wex},Transform2.prototype.getWorldExtY=function(){return this.lworldExtY},Transform2.prototype.setWorldExtY=function(wey){this.lworldExtY=wey},Transform2.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},Transform2.prototype.setDeviceOrgX=function(dox){this.ldeviceOrgX=dox},Transform2.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},Transform2.prototype.setDeviceOrgY=function(doy){this.ldeviceOrgY=doy},Transform2.prototype.getDeviceExtX=function(){return this.ldeviceExtX},Transform2.prototype.setDeviceExtX=function(dex){this.ldeviceExtX=dex},Transform2.prototype.getDeviceExtY=function(){return this.ldeviceExtY},Transform2.prototype.setDeviceExtY=function(dey){this.ldeviceExtY=dey},Transform2.prototype.transformX=function(x5){var xDevice=0,worldExtX=this.lworldExtX;return 0!=worldExtX&&(xDevice=this.ldeviceOrgX+(x5-this.lworldOrgX)*this.ldeviceExtX/worldExtX),xDevice},Transform2.prototype.transformY=function(y6){var yDevice=0,worldExtY=this.lworldExtY;return 0!=worldExtY&&(yDevice=this.ldeviceOrgY+(y6-this.lworldOrgY)*this.ldeviceExtY/worldExtY),yDevice},Transform2.prototype.inverseTransformX=function(x5){var xWorld=0,deviceExtX=this.ldeviceExtX;return 0!=deviceExtX&&(xWorld=this.lworldOrgX+(x5-this.ldeviceOrgX)*this.lworldExtX/deviceExtX),xWorld},Transform2.prototype.inverseTransformY=function(y6){var yWorld=0,deviceExtY=this.ldeviceExtY;return 0!=deviceExtY&&(yWorld=this.lworldOrgY+(y6-this.ldeviceOrgY)*this.lworldExtY/deviceExtY),yWorld},Transform2.prototype.inverseTransformPoint=function(inPoint){return new PointD(this.inverseTransformX(inPoint.x),this.inverseTransformY(inPoint.y))},module3.exports=Transform2},function(module3,exports3,__webpack_require__){function _toConsumableArray2(arr){if(Array.isArray(arr)){for(var i2=0,arr2=Array(arr.length);i2<arr.length;i2++)arr2[i2]=arr[i2];return arr2}return Array.from(arr)}__name(_toConsumableArray2,"_toConsumableArray");var Layout2=__webpack_require__(15),FDLayoutConstants=__webpack_require__(4),LayoutConstants=__webpack_require__(0),IGeometry=__webpack_require__(8),IMath=__webpack_require__(9);function FDLayout(){Layout2.call(this),this.useSmartIdealEdgeLengthCalculation=FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*FDLayoutConstants.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=FDLayoutConstants.MAX_ITERATIONS}for(var prop in __name(FDLayout,"FDLayout"),FDLayout.prototype=Object.create(Layout2.prototype),Layout2)FDLayout[prop]=Layout2[prop];FDLayout.prototype.initParameters=function(){Layout2.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},FDLayout.prototype.calcIdealEdgeLengths=function(){for(var edge,originalIdealLength,lcaDepth,source,target,sizeOfSourceInLca,sizeOfTargetInLca,allEdges=this.getGraphManager().getAllEdges(),i2=0;i2<allEdges.length;i2++)originalIdealLength=(edge=allEdges[i2]).idealLength,edge.isInterGraph&&(source=edge.getSource(),target=edge.getTarget(),sizeOfSourceInLca=edge.getSourceInLca().getEstimatedSize(),sizeOfTargetInLca=edge.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(edge.idealLength+=sizeOfSourceInLca+sizeOfTargetInLca-2*LayoutConstants.SIMPLE_NODE_SIZE),lcaDepth=edge.getLca().getInclusionTreeDepth(),edge.idealLength+=originalIdealLength*FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(source.getInclusionTreeDepth()+target.getInclusionTreeDepth()-2*lcaDepth))},FDLayout.prototype.initSpringEmbedder=function(){var s2=this.getAllNodes().length;this.incremental?(s2>FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*FDLayoutConstants.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(s2-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)/(FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-FDLayoutConstants.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL):(s2>FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(FDLayoutConstants.COOLING_ADAPTATION_FACTOR,1-(s2-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)/(FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)*(1-FDLayoutConstants.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=FDLayoutConstants.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*FDLayoutConstants.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},FDLayout.prototype.calcSpringForces=function(){for(var edge,lEdges=this.getAllEdges(),i2=0;i2<lEdges.length;i2++)edge=lEdges[i2],this.calcSpringForce(edge,edge.idealLength)},FDLayout.prototype.calcRepulsionForces=function(){var i2,j3,nodeA,nodeB,processedNodeSet,gridUpdateAllowed=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],forceToNodeSurroundingUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lNodes=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD==1&&gridUpdateAllowed&&this.updateGrid(),processedNodeSet=new Set,i2=0;i2<lNodes.length;i2++)nodeA=lNodes[i2],this.calculateRepulsionForceOfANode(nodeA,processedNodeSet,gridUpdateAllowed,forceToNodeSurroundingUpdate),processedNodeSet.add(nodeA);else for(i2=0;i2<lNodes.length;i2++)for(nodeA=lNodes[i2],j3=i2+1;j3<lNodes.length;j3++)nodeB=lNodes[j3],nodeA.getOwner()==nodeB.getOwner()&&this.calcRepulsionForce(nodeA,nodeB)},FDLayout.prototype.calcGravitationalForces=function(){for(var node2,lNodes=this.getAllNodesToApplyGravitation(),i2=0;i2<lNodes.length;i2++)node2=lNodes[i2],this.calcGravitationalForce(node2)},FDLayout.prototype.moveNodes=function(){for(var lNodes=this.getAllNodes(),i2=0;i2<lNodes.length;i2++)lNodes[i2].move()},FDLayout.prototype.calcSpringForce=function(edge,idealLength){var length2,springForce,springForceX,springForceY,sourceNode=edge.getSource(),targetNode=edge.getTarget();if(this.uniformLeafNodeSizes&&null==sourceNode.getChild()&&null==targetNode.getChild())edge.updateLengthSimple();else if(edge.updateLength(),edge.isOverlapingSourceAndTarget)return;0!=(length2=edge.getLength())&&(springForceX=(springForce=edge.edgeElasticity*(length2-idealLength))*(edge.lengthX/length2),springForceY=springForce*(edge.lengthY/length2),sourceNode.springForceX+=springForceX,sourceNode.springForceY+=springForceY,targetNode.springForceX-=springForceX,targetNode.springForceY-=springForceY)},FDLayout.prototype.calcRepulsionForce=function(nodeA,nodeB){var distanceX,distanceY,distanceSquared,distance2,repulsionForce,repulsionForceX,repulsionForceY,rectA=nodeA.getRect(),rectB=nodeB.getRect(),overlapAmount=new Array(2),clipPoints=new Array(4);if(rectA.intersects(rectB)){IGeometry.calcSeparationAmount(rectA,rectB,overlapAmount,FDLayoutConstants.DEFAULT_EDGE_LENGTH/2),repulsionForceX=2*overlapAmount[0],repulsionForceY=2*overlapAmount[1];var childrenConstant=nodeA.noOfChildren*nodeB.noOfChildren/(nodeA.noOfChildren+nodeB.noOfChildren);nodeA.repulsionForceX-=childrenConstant*repulsionForceX,nodeA.repulsionForceY-=childrenConstant*repulsionForceY,nodeB.repulsionForceX+=childrenConstant*repulsionForceX,nodeB.repulsionForceY+=childrenConstant*repulsionForceY}else this.uniformLeafNodeSizes&&null==nodeA.getChild()&&null==nodeB.getChild()?(distanceX=rectB.getCenterX()-rectA.getCenterX(),distanceY=rectB.getCenterY()-rectA.getCenterY()):(IGeometry.getIntersection(rectA,rectB,clipPoints),distanceX=clipPoints[2]-clipPoints[0],distanceY=clipPoints[3]-clipPoints[1]),Math.abs(distanceX)<FDLayoutConstants.MIN_REPULSION_DIST&&(distanceX=IMath.sign(distanceX)*FDLayoutConstants.MIN_REPULSION_DIST),Math.abs(distanceY)<FDLayoutConstants.MIN_REPULSION_DIST&&(distanceY=IMath.sign(distanceY)*FDLayoutConstants.MIN_REPULSION_DIST),distanceSquared=distanceX*distanceX+distanceY*distanceY,distance2=Math.sqrt(distanceSquared),repulsionForceX=(repulsionForce=(nodeA.nodeRepulsion/2+nodeB.nodeRepulsion/2)*nodeA.noOfChildren*nodeB.noOfChildren/distanceSquared)*distanceX/distance2,repulsionForceY=repulsionForce*distanceY/distance2,nodeA.repulsionForceX-=repulsionForceX,nodeA.repulsionForceY-=repulsionForceY,nodeB.repulsionForceX+=repulsionForceX,nodeB.repulsionForceY+=repulsionForceY},FDLayout.prototype.calcGravitationalForce=function(node2){var ownerGraph,ownerCenterX,ownerCenterY,distanceX,distanceY,absDistanceX,absDistanceY,estimatedSize;ownerCenterX=((ownerGraph=node2.getOwner()).getRight()+ownerGraph.getLeft())/2,ownerCenterY=(ownerGraph.getTop()+ownerGraph.getBottom())/2,distanceX=node2.getCenterX()-ownerCenterX,distanceY=node2.getCenterY()-ownerCenterY,absDistanceX=Math.abs(distanceX)+node2.getWidth()/2,absDistanceY=Math.abs(distanceY)+node2.getHeight()/2,node2.getOwner()==this.graphManager.getRoot()?(absDistanceX>(estimatedSize=ownerGraph.getEstimatedSize()*this.gravityRangeFactor)||absDistanceY>estimatedSize)&&(node2.gravitationForceX=-this.gravityConstant*distanceX,node2.gravitationForceY=-this.gravityConstant*distanceY):(absDistanceX>(estimatedSize=ownerGraph.getEstimatedSize()*this.compoundGravityRangeFactor)||absDistanceY>estimatedSize)&&(node2.gravitationForceX=-this.gravityConstant*distanceX*this.compoundGravityConstant,node2.gravitationForceY=-this.gravityConstant*distanceY*this.compoundGravityConstant)},FDLayout.prototype.isConverged=function(){var converged,oscilating=!1;return this.totalIterations>this.maxIterations/3&&(oscilating=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),converged=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,converged||oscilating},FDLayout.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},FDLayout.prototype.calcNoOfChildrenForAllNodes=function(){for(var node2,allNodes=this.graphManager.getAllNodes(),i2=0;i2<allNodes.length;i2++)(node2=allNodes[i2]).noOfChildren=node2.getNoOfChildren()},FDLayout.prototype.calcGrid=function(graph){var sizeX,sizeY;sizeX=parseInt(Math.ceil((graph.getRight()-graph.getLeft())/this.repulsionRange)),sizeY=parseInt(Math.ceil((graph.getBottom()-graph.getTop())/this.repulsionRange));for(var grid=new Array(sizeX),i2=0;i2<sizeX;i2++)grid[i2]=new Array(sizeY);for(i2=0;i2<sizeX;i2++)for(var j3=0;j3<sizeY;j3++)grid[i2][j3]=new Array;return grid},FDLayout.prototype.addNodeToGrid=function(v3,left3,top2){var startX2,finishX,startY2,finishY;startX2=parseInt(Math.floor((v3.getRect().x-left3)/this.repulsionRange)),finishX=parseInt(Math.floor((v3.getRect().width+v3.getRect().x-left3)/this.repulsionRange)),startY2=parseInt(Math.floor((v3.getRect().y-top2)/this.repulsionRange)),finishY=parseInt(Math.floor((v3.getRect().height+v3.getRect().y-top2)/this.repulsionRange));for(var i2=startX2;i2<=finishX;i2++)for(var j3=startY2;j3<=finishY;j3++)this.grid[i2][j3].push(v3),v3.setGridCoordinates(startX2,finishX,startY2,finishY)},FDLayout.prototype.updateGrid=function(){var i2,nodeA,lNodes=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),i2=0;i2<lNodes.length;i2++)nodeA=lNodes[i2],this.addNodeToGrid(nodeA,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},FDLayout.prototype.calculateRepulsionForceOfANode=function(nodeA,processedNodeSet,gridUpdateAllowed,forceToNodeSurroundingUpdate){if(this.totalIterations%FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD==1&&gridUpdateAllowed||forceToNodeSurroundingUpdate){var nodeB,surrounding=new Set;nodeA.surrounding=new Array;for(var grid=this.grid,i2=nodeA.startX-1;i2<nodeA.finishX+2;i2++)for(var j3=nodeA.startY-1;j3<nodeA.finishY+2;j3++)if(!(i2<0||j3<0||i2>=grid.length||j3>=grid[0].length))for(var k2=0;k2<grid[i2][j3].length;k2++)if(nodeB=grid[i2][j3][k2],nodeA.getOwner()==nodeB.getOwner()&&nodeA!=nodeB&&!processedNodeSet.has(nodeB)&&!surrounding.has(nodeB)){var distanceX=Math.abs(nodeA.getCenterX()-nodeB.getCenterX())-(nodeA.getWidth()/2+nodeB.getWidth()/2),distanceY=Math.abs(nodeA.getCenterY()-nodeB.getCenterY())-(nodeA.getHeight()/2+nodeB.getHeight()/2);distanceX<=this.repulsionRange&&distanceY<=this.repulsionRange&&surrounding.add(nodeB)}nodeA.surrounding=[].concat(_toConsumableArray2(surrounding))}for(i2=0;i2<nodeA.surrounding.length;i2++)this.calcRepulsionForce(nodeA,nodeA.surrounding[i2])},FDLayout.prototype.calcRepulsionRange=function(){return 0},module3.exports=FDLayout},function(module3,exports3,__webpack_require__){var LEdge=__webpack_require__(1),FDLayoutConstants=__webpack_require__(4);function FDLayoutEdge(source,target,vEdge){LEdge.call(this,source,target,vEdge),this.idealLength=FDLayoutConstants.DEFAULT_EDGE_LENGTH,this.edgeElasticity=FDLayoutConstants.DEFAULT_SPRING_STRENGTH}for(var prop in __name(FDLayoutEdge,"FDLayoutEdge"),FDLayoutEdge.prototype=Object.create(LEdge.prototype),LEdge)FDLayoutEdge[prop]=LEdge[prop];module3.exports=FDLayoutEdge},function(module3,exports3,__webpack_require__){var LNode=__webpack_require__(3),FDLayoutConstants=__webpack_require__(4);function FDLayoutNode(gm,loc,size4,vNode){LNode.call(this,gm,loc,size4,vNode),this.nodeRepulsion=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var prop in __name(FDLayoutNode,"FDLayoutNode"),FDLayoutNode.prototype=Object.create(LNode.prototype),LNode)FDLayoutNode[prop]=LNode[prop];FDLayoutNode.prototype.setGridCoordinates=function(_startX,_finishX,_startY,_finishY){this.startX=_startX,this.finishX=_finishX,this.startY=_startY,this.finishY=_finishY},module3.exports=FDLayoutNode},function(module3,exports3,__webpack_require__){function DimensionD2(width3,height2){this.width=0,this.height=0,null!==width3&&null!==height2&&(this.height=height2,this.width=width3)}__name(DimensionD2,"DimensionD"),DimensionD2.prototype.getWidth=function(){return this.width},DimensionD2.prototype.setWidth=function(width3){this.width=width3},DimensionD2.prototype.getHeight=function(){return this.height},DimensionD2.prototype.setHeight=function(height2){this.height=height2},module3.exports=DimensionD2},function(module3,exports3,__webpack_require__){var UniqueIDGeneretor=__webpack_require__(14);function HashMap(){this.map={},this.keys=[]}__name(HashMap,"HashMap"),HashMap.prototype.put=function(key,value2){var theId=UniqueIDGeneretor.createID(key);this.contains(theId)||(this.map[theId]=value2,this.keys.push(key))},HashMap.prototype.contains=function(key){UniqueIDGeneretor.createID(key);return null!=this.map[key]},HashMap.prototype.get=function(key){var theId=UniqueIDGeneretor.createID(key);return this.map[theId]},HashMap.prototype.keySet=function(){return this.keys},module3.exports=HashMap},function(module3,exports3,__webpack_require__){var UniqueIDGeneretor=__webpack_require__(14);function HashSet(){this.set={}}__name(HashSet,"HashSet"),HashSet.prototype.add=function(obj){var theId=UniqueIDGeneretor.createID(obj);this.contains(theId)||(this.set[theId]=obj)},HashSet.prototype.remove=function(obj){delete this.set[UniqueIDGeneretor.createID(obj)]},HashSet.prototype.clear=function(){this.set={}},HashSet.prototype.contains=function(obj){return this.set[UniqueIDGeneretor.createID(obj)]==obj},HashSet.prototype.isEmpty=function(){return 0===this.size()},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAllTo=function(list){for(var keys2=Object.keys(this.set),length2=keys2.length,i2=0;i2<length2;i2++)list.push(this.set[keys2[i2]])},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAll=function(list){for(var s2=list.length,i2=0;i2<s2;i2++){var v3=list[i2];this.add(v3)}},module3.exports=HashSet},function(module3,exports3,__webpack_require__){function Matrix(){}__name(Matrix,"Matrix"),Matrix.multMat=function(array1,array22){for(var result=[],i2=0;i2<array1.length;i2++){result[i2]=[];for(var j3=0;j3<array22[0].length;j3++){result[i2][j3]=0;for(var k2=0;k2<array1[0].length;k2++)result[i2][j3]+=array1[i2][k2]*array22[k2][j3]}}return result},Matrix.transpose=function(array4){for(var result=[],i2=0;i2<array4[0].length;i2++){result[i2]=[];for(var j3=0;j3<array4.length;j3++)result[i2][j3]=array4[j3][i2]}return result},Matrix.multCons=function(array4,constant3){for(var result=[],i2=0;i2<array4.length;i2++)result[i2]=array4[i2]*constant3;return result},Matrix.minusOp=function(array1,array22){for(var result=[],i2=0;i2<array1.length;i2++)result[i2]=array1[i2]-array22[i2];return result},Matrix.dotProduct=function(array1,array22){for(var product=0,i2=0;i2<array1.length;i2++)product+=array1[i2]*array22[i2];return product},Matrix.mag=function(array4){return Math.sqrt(this.dotProduct(array4,array4))},Matrix.normalize=function(array4){for(var result=[],magnitude=this.mag(array4),i2=0;i2<array4.length;i2++)result[i2]=array4[i2]/magnitude;return result},Matrix.multGamma=function(array4){for(var result=[],sum2=0,i2=0;i2<array4.length;i2++)sum2+=array4[i2];sum2*=-1/array4.length;for(var _i=0;_i<array4.length;_i++)result[_i]=sum2+array4[_i];return result},Matrix.multL=function(array4,C3,INV){for(var result=[],temp1=[],temp2=[],i2=0;i2<C3[0].length;i2++){for(var sum2=0,j3=0;j3<C3.length;j3++)sum2+=-.5*C3[j3][i2]*array4[j3];temp1[i2]=sum2}for(var _i2=0;_i2<INV.length;_i2++){for(var _sum=0,_j=0;_j<INV.length;_j++)_sum+=INV[_i2][_j]*temp1[_j];temp2[_i2]=_sum}for(var _i3=0;_i3<C3.length;_i3++){for(var _sum2=0,_j2=0;_j2<C3[0].length;_j2++)_sum2+=C3[_i3][_j2]*temp2[_j2];result[_i3]=_sum2}return result},module3.exports=Matrix},function(module3,exports3,__webpack_require__){var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var LinkedList=__webpack_require__(11),Quicksort=function(){function Quicksort2(A2,compareFunction){_classCallCheck2(this,Quicksort2),null===compareFunction&&void 0===compareFunction||(this.compareFunction=this._defaultCompareFunction);var length2=void 0;length2=A2 instanceof LinkedList?A2.size():A2.length,this._quicksort(A2,0,length2-1)}return __name(Quicksort2,"Quicksort"),_createClass2(Quicksort2,[{key:"_quicksort",value:__name(function(A2,p3,r2){if(p3<r2){var q3=this._partition(A2,p3,r2);this._quicksort(A2,p3,q3),this._quicksort(A2,q3+1,r2)}},"_quicksort")},{key:"_partition",value:__name(function(A2,p3,r2){for(var x5=this._get(A2,p3),i2=p3,j3=r2;;){for(;this.compareFunction(x5,this._get(A2,j3));)j3--;for(;this.compareFunction(this._get(A2,i2),x5);)i2++;if(!(i2<j3))return j3;this._swap(A2,i2,j3),i2++,j3--}},"_partition")},{key:"_get",value:__name(function(object3,index){return object3 instanceof LinkedList?object3.get_object_at(index):object3[index]},"_get")},{key:"_set",value:__name(function(object3,index,value2){object3 instanceof LinkedList?object3.set_object_at(index,value2):object3[index]=value2},"_set")},{key:"_swap",value:__name(function(A2,i2,j3){var temp=this._get(A2,i2);this._set(A2,i2,this._get(A2,j3)),this._set(A2,j3,temp)},"_swap")},{key:"_defaultCompareFunction",value:__name(function(a2,b3){return b3>a2},"_defaultCompareFunction")}]),Quicksort2}();module3.exports=Quicksort},function(module3,exports3,__webpack_require__){function SVD(){}__name(SVD,"SVD"),SVD.svd=function(A2){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=A2.length,this.n=A2[0].length;var dims,nu=Math.min(this.m,this.n);this.s=function(s2){for(var a2=[];s2-- >0;)a2.push(0);return a2}(Math.min(this.m+1,this.n)),this.U=(dims=[this.m,nu],__name(function allocate2(dims2){if(0==dims2.length)return 0;for(var array4=[],i3=0;i3<dims2[0];i3++)array4.push(allocate2(dims2.slice(1)));return array4},"allocate")(dims)),this.V=function(dims){return __name(function allocate2(dims2){if(0==dims2.length)return 0;for(var array4=[],i3=0;i3<dims2[0];i3++)array4.push(allocate2(dims2.slice(1)));return array4},"allocate")(dims)}([this.n,this.n]);for(var e3=function(s2){for(var a2=[];s2-- >0;)a2.push(0);return a2}(this.n),work=function(s2){for(var a2=[];s2-- >0;)a2.push(0);return a2}(this.m),nct=Math.min(this.m-1,this.n),nrt=Math.max(0,Math.min(this.n-2,this.m)),k2=0;k2<Math.max(nct,nrt);k2++){if(k2<nct){this.s[k2]=0;for(var i2=k2;i2<this.m;i2++)this.s[k2]=SVD.hypot(this.s[k2],A2[i2][k2]);if(0!==this.s[k2]){A2[k2][k2]<0&&(this.s[k2]=-this.s[k2]);for(var _i=k2;_i<this.m;_i++)A2[_i][k2]/=this.s[k2];A2[k2][k2]+=1}this.s[k2]=-this.s[k2]}for(var j3=k2+1;j3<this.n;j3++){if(function(lhs,rhs){return lhs&&rhs}(k2<nct,0!==this.s[k2])){for(var t4=0,_i2=k2;_i2<this.m;_i2++)t4+=A2[_i2][k2]*A2[_i2][j3];t4=-t4/A2[k2][k2];for(var _i3=k2;_i3<this.m;_i3++)A2[_i3][j3]+=t4*A2[_i3][k2]}e3[j3]=A2[k2][j3]}if(function(lhs,rhs){return rhs}(0,k2<nct))for(var _i4=k2;_i4<this.m;_i4++)this.U[_i4][k2]=A2[_i4][k2];if(k2<nrt){e3[k2]=0;for(var _i5=k2+1;_i5<this.n;_i5++)e3[k2]=SVD.hypot(e3[k2],e3[_i5]);if(0!==e3[k2]){e3[k2+1]<0&&(e3[k2]=-e3[k2]);for(var _i6=k2+1;_i6<this.n;_i6++)e3[_i6]/=e3[k2];e3[k2+1]+=1}if(e3[k2]=-e3[k2],function(lhs,rhs){return lhs&&rhs}(k2+1<this.m,0!==e3[k2])){for(var _i7=k2+1;_i7<this.m;_i7++)work[_i7]=0;for(var _j=k2+1;_j<this.n;_j++)for(var _i8=k2+1;_i8<this.m;_i8++)work[_i8]+=e3[_j]*A2[_i8][_j];for(var _j2=k2+1;_j2<this.n;_j2++)for(var _t=-e3[_j2]/e3[k2+1],_i9=k2+1;_i9<this.m;_i9++)A2[_i9][_j2]+=_t*work[_i9]}for(var _i10=k2+1;_i10<this.n;_i10++)this.V[_i10][k2]=e3[_i10]}}var p3=Math.min(this.n,this.m+1);nct<this.n&&(this.s[nct]=A2[nct][nct]),this.m<p3&&(this.s[p3-1]=0),nrt+1<p3&&(e3[nrt]=A2[nrt][p3-1]),e3[p3-1]=0;for(var _j3=nct;_j3<nu;_j3++){for(var _i11=0;_i11<this.m;_i11++)this.U[_i11][_j3]=0;this.U[_j3][_j3]=1}for(var _k=nct-1;_k>=0;_k--)if(0!==this.s[_k]){for(var _j4=_k+1;_j4<nu;_j4++){for(var _t2=0,_i12=_k;_i12<this.m;_i12++)_t2+=this.U[_i12][_k]*this.U[_i12][_j4];_t2=-_t2/this.U[_k][_k];for(var _i13=_k;_i13<this.m;_i13++)this.U[_i13][_j4]+=_t2*this.U[_i13][_k]}for(var _i14=_k;_i14<this.m;_i14++)this.U[_i14][_k]=-this.U[_i14][_k];this.U[_k][_k]=1+this.U[_k][_k];for(var _i15=0;_i15<_k-1;_i15++)this.U[_i15][_k]=0}else{for(var _i16=0;_i16<this.m;_i16++)this.U[_i16][_k]=0;this.U[_k][_k]=1}for(var _k2=this.n-1;_k2>=0;_k2--){if(function(lhs,rhs){return lhs&&rhs}(_k2<nrt,0!==e3[_k2]))for(var _j5=_k2+1;_j5<nu;_j5++){for(var _t3=0,_i17=_k2+1;_i17<this.n;_i17++)_t3+=this.V[_i17][_k2]*this.V[_i17][_j5];_t3=-_t3/this.V[_k2+1][_k2];for(var _i18=_k2+1;_i18<this.n;_i18++)this.V[_i18][_j5]+=_t3*this.V[_i18][_k2]}for(var _i19=0;_i19<this.n;_i19++)this.V[_i19][_k2]=0;this.V[_k2][_k2]=1}for(var pp=p3-1,eps=Math.pow(2,-52),tiny=Math.pow(2,-966);p3>0;){var _k3=void 0,kase=void 0;for(_k3=p3-2;_k3>=-1&&-1!==_k3;_k3--)if(Math.abs(e3[_k3])<=tiny+eps*(Math.abs(this.s[_k3])+Math.abs(this.s[_k3+1]))){e3[_k3]=0;break}if(_k3===p3-2)kase=4;else{var ks=void 0;for(ks=p3-1;ks>=_k3&&ks!==_k3;ks--){var _t4=(ks!==p3?Math.abs(e3[ks]):0)+(ks!==_k3+1?Math.abs(e3[ks-1]):0);if(Math.abs(this.s[ks])<=tiny+eps*_t4){this.s[ks]=0;break}}ks===_k3?kase=3:ks===p3-1?kase=1:(kase=2,_k3=ks)}switch(_k3++,kase){case 1:var f2=e3[p3-2];e3[p3-2]=0;for(var _j6=p3-2;_j6>=_k3;_j6--){var _t5=SVD.hypot(this.s[_j6],f2),cs=this.s[_j6]/_t5,sn=f2/_t5;this.s[_j6]=_t5,_j6!==_k3&&(f2=-sn*e3[_j6-1],e3[_j6-1]=cs*e3[_j6-1]);for(var _i20=0;_i20<this.n;_i20++)_t5=cs*this.V[_i20][_j6]+sn*this.V[_i20][p3-1],this.V[_i20][p3-1]=-sn*this.V[_i20][_j6]+cs*this.V[_i20][p3-1],this.V[_i20][_j6]=_t5}break;case 2:var _f=e3[_k3-1];e3[_k3-1]=0;for(var _j7=_k3;_j7<p3;_j7++){var _t6=SVD.hypot(this.s[_j7],_f),_cs=this.s[_j7]/_t6,_sn=_f/_t6;this.s[_j7]=_t6,_f=-_sn*e3[_j7],e3[_j7]=_cs*e3[_j7];for(var _i21=0;_i21<this.m;_i21++)_t6=_cs*this.U[_i21][_j7]+_sn*this.U[_i21][_k3-1],this.U[_i21][_k3-1]=-_sn*this.U[_i21][_j7]+_cs*this.U[_i21][_k3-1],this.U[_i21][_j7]=_t6}break;case 3:var scale2=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[p3-1]),Math.abs(this.s[p3-2])),Math.abs(e3[p3-2])),Math.abs(this.s[_k3])),Math.abs(e3[_k3])),sp=this.s[p3-1]/scale2,spm1=this.s[p3-2]/scale2,epm1=e3[p3-2]/scale2,sk=this.s[_k3]/scale2,ek=e3[_k3]/scale2,b3=((spm1+sp)*(spm1-sp)+epm1*epm1)/2,c3=sp*epm1*(sp*epm1),shift2=0;(function(lhs,rhs){return lhs||rhs})(0!==b3,0!==c3)&&(shift2=Math.sqrt(b3*b3+c3),b3<0&&(shift2=-shift2),shift2=c3/(b3+shift2));for(var _f2=(sk+sp)*(sk-sp)+shift2,g2=sk*ek,_j8=_k3;_j8<p3-1;_j8++){var _t7=SVD.hypot(_f2,g2),_cs2=_f2/_t7,_sn2=g2/_t7;_j8!==_k3&&(e3[_j8-1]=_t7),_f2=_cs2*this.s[_j8]+_sn2*e3[_j8],e3[_j8]=_cs2*e3[_j8]-_sn2*this.s[_j8],g2=_sn2*this.s[_j8+1],this.s[_j8+1]=_cs2*this.s[_j8+1];for(var _i22=0;_i22<this.n;_i22++)_t7=_cs2*this.V[_i22][_j8]+_sn2*this.V[_i22][_j8+1],this.V[_i22][_j8+1]=-_sn2*this.V[_i22][_j8]+_cs2*this.V[_i22][_j8+1],this.V[_i22][_j8]=_t7;if(_cs2=_f2/(_t7=SVD.hypot(_f2,g2)),_sn2=g2/_t7,this.s[_j8]=_t7,_f2=_cs2*e3[_j8]+_sn2*this.s[_j8+1],this.s[_j8+1]=-_sn2*e3[_j8]+_cs2*this.s[_j8+1],g2=_sn2*e3[_j8+1],e3[_j8+1]=_cs2*e3[_j8+1],_j8<this.m-1)for(var _i23=0;_i23<this.m;_i23++)_t7=_cs2*this.U[_i23][_j8]+_sn2*this.U[_i23][_j8+1],this.U[_i23][_j8+1]=-_sn2*this.U[_i23][_j8]+_cs2*this.U[_i23][_j8+1],this.U[_i23][_j8]=_t7}e3[p3-2]=_f2;break;case 4:if(this.s[_k3]<=0){this.s[_k3]=this.s[_k3]<0?-this.s[_k3]:0;for(var _i24=0;_i24<=pp;_i24++)this.V[_i24][_k3]=-this.V[_i24][_k3]}for(;_k3<pp&&!(this.s[_k3]>=this.s[_k3+1]);){var _t8=this.s[_k3];if(this.s[_k3]=this.s[_k3+1],this.s[_k3+1]=_t8,_k3<this.n-1)for(var _i25=0;_i25<this.n;_i25++)_t8=this.V[_i25][_k3+1],this.V[_i25][_k3+1]=this.V[_i25][_k3],this.V[_i25][_k3]=_t8;if(_k3<this.m-1)for(var _i26=0;_i26<this.m;_i26++)_t8=this.U[_i26][_k3+1],this.U[_i26][_k3+1]=this.U[_i26][_k3],this.U[_i26][_k3]=_t8;_k3++}p3--}}return{U:this.U,V:this.V,S:this.s}},SVD.hypot=function(a2,b3){var r2=void 0;return Math.abs(a2)>Math.abs(b3)?(r2=b3/a2,r2=Math.abs(a2)*Math.sqrt(1+r2*r2)):0!=b3?(r2=a2/b3,r2=Math.abs(b3)*Math.sqrt(1+r2*r2)):r2=0,r2},module3.exports=SVD},function(module3,exports3,__webpack_require__){var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var NeedlemanWunsch=function(){function NeedlemanWunsch2(sequence1,sequence2){var match_score=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,mismatch_penalty=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,gap_penalty=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;_classCallCheck2(this,NeedlemanWunsch2),this.sequence1=sequence1,this.sequence2=sequence2,this.match_score=match_score,this.mismatch_penalty=mismatch_penalty,this.gap_penalty=gap_penalty,this.iMax=sequence1.length+1,this.jMax=sequence2.length+1,this.grid=new Array(this.iMax);for(var i2=0;i2<this.iMax;i2++){this.grid[i2]=new Array(this.jMax);for(var j3=0;j3<this.jMax;j3++)this.grid[i2][j3]=0}this.tracebackGrid=new Array(this.iMax);for(var _i=0;_i<this.iMax;_i++){this.tracebackGrid[_i]=new Array(this.jMax);for(var _j=0;_j<this.jMax;_j++)this.tracebackGrid[_i][_j]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return __name(NeedlemanWunsch2,"NeedlemanWunsch"),_createClass2(NeedlemanWunsch2,[{key:"getScore",value:__name(function(){return this.score},"getScore")},{key:"getAlignments",value:__name(function(){return this.alignments},"getAlignments")},{key:"computeGrids",value:__name(function(){for(var j3=1;j3<this.jMax;j3++)this.grid[0][j3]=this.grid[0][j3-1]+this.gap_penalty,this.tracebackGrid[0][j3]=[!1,!1,!0];for(var i2=1;i2<this.iMax;i2++)this.grid[i2][0]=this.grid[i2-1][0]+this.gap_penalty,this.tracebackGrid[i2][0]=[!1,!0,!1];for(var _i2=1;_i2<this.iMax;_i2++)for(var _j2=1;_j2<this.jMax;_j2++){var maxOf=[this.sequence1[_i2-1]===this.sequence2[_j2-1]?this.grid[_i2-1][_j2-1]+this.match_score:this.grid[_i2-1][_j2-1]+this.mismatch_penalty,this.grid[_i2-1][_j2]+this.gap_penalty,this.grid[_i2][_j2-1]+this.gap_penalty],indices=this.arrayAllMaxIndexes(maxOf);this.grid[_i2][_j2]=maxOf[indices[0]],this.tracebackGrid[_i2][_j2]=[indices.includes(0),indices.includes(1),indices.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]},"computeGrids")},{key:"alignmentTraceback",value:__name(function(){var inProcessAlignments=[];for(inProcessAlignments.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});inProcessAlignments[0];){var current=inProcessAlignments[0],directions=this.tracebackGrid[current.pos[0]][current.pos[1]];directions[0]&&inProcessAlignments.push({pos:[current.pos[0]-1,current.pos[1]-1],seq1:this.sequence1[current.pos[0]-1]+current.seq1,seq2:this.sequence2[current.pos[1]-1]+current.seq2}),directions[1]&&inProcessAlignments.push({pos:[current.pos[0]-1,current.pos[1]],seq1:this.sequence1[current.pos[0]-1]+current.seq1,seq2:"-"+current.seq2}),directions[2]&&inProcessAlignments.push({pos:[current.pos[0],current.pos[1]-1],seq1:"-"+current.seq1,seq2:this.sequence2[current.pos[1]-1]+current.seq2}),0===current.pos[0]&&0===current.pos[1]&&this.alignments.push({sequence1:current.seq1,sequence2:current.seq2}),inProcessAlignments.shift()}return this.alignments},"alignmentTraceback")},{key:"getAllIndexes",value:__name(function(arr,val){for(var indexes=[],i2=-1;-1!==(i2=arr.indexOf(val,i2+1));)indexes.push(i2);return indexes},"getAllIndexes")},{key:"arrayAllMaxIndexes",value:__name(function(array4){return this.getAllIndexes(array4,Math.max.apply(null,array4))},"arrayAllMaxIndexes")}]),NeedlemanWunsch2}();module3.exports=NeedlemanWunsch},function(module3,exports3,__webpack_require__){var layoutBase=__name(function(){},"layoutBase");layoutBase.FDLayout=__webpack_require__(18),layoutBase.FDLayoutConstants=__webpack_require__(4),layoutBase.FDLayoutEdge=__webpack_require__(19),layoutBase.FDLayoutNode=__webpack_require__(20),layoutBase.DimensionD=__webpack_require__(21),layoutBase.HashMap=__webpack_require__(22),layoutBase.HashSet=__webpack_require__(23),layoutBase.IGeometry=__webpack_require__(8),layoutBase.IMath=__webpack_require__(9),layoutBase.Integer=__webpack_require__(10),layoutBase.Point=__webpack_require__(12),layoutBase.PointD=__webpack_require__(5),layoutBase.RandomSeed=__webpack_require__(16),layoutBase.RectangleD=__webpack_require__(13),layoutBase.Transform=__webpack_require__(17),layoutBase.UniqueIDGeneretor=__webpack_require__(14),layoutBase.Quicksort=__webpack_require__(25),layoutBase.LinkedList=__webpack_require__(11),layoutBase.LGraphObject=__webpack_require__(2),layoutBase.LGraph=__webpack_require__(6),layoutBase.LEdge=__webpack_require__(1),layoutBase.LGraphManager=__webpack_require__(7),layoutBase.LNode=__webpack_require__(3),layoutBase.Layout=__webpack_require__(15),layoutBase.LayoutConstants=__webpack_require__(0),layoutBase.NeedlemanWunsch=__webpack_require__(27),layoutBase.Matrix=__webpack_require__(24),layoutBase.SVD=__webpack_require__(26),module3.exports=layoutBase},function(module3,exports3,__webpack_require__){function Emitter4(){this.listeners=[]}__name(Emitter4,"Emitter");var p3=Emitter4.prototype;p3.addListener=function(event3,callback){this.listeners.push({event:event3,callback:callback})},p3.removeListener=function(event3,callback){for(var i2=this.listeners.length;i2>=0;i2--){var l4=this.listeners[i2];l4.event===event3&&l4.callback===callback&&this.listeners.splice(i2,1)}},p3.emit=function(event3,data5){for(var i2=0;i2<this.listeners.length;i2++){var l4=this.listeners[i2];event3===l4.event&&l4.callback(data5)}},module3.exports=Emitter4}])})}}),require_cose_base2=__commonJS({"../../node_modules/.pnpm/cose-base@2.2.0/node_modules/cose-base/cose-base.js"(exports2,module2){__name(function(root3,factory){"object"==typeof exports2&&"object"==typeof module2?module2.exports=factory(require_layout_base2()):"function"==typeof define&&define.amd?define(["layout-base"],factory):"object"==typeof exports2?exports2.coseBase=factory(require_layout_base2()):root3.coseBase=factory(root3.layoutBase)},"webpackUniversalModuleDefinition")(exports2,function(__WEBPACK_EXTERNAL_MODULE__551__){return(()=>{var __webpack_modules__={45:(module3,__unused_webpack_exports,__webpack_require__2)=>{var coseBase={};coseBase.layoutBase=__webpack_require__2(551),coseBase.CoSEConstants=__webpack_require__2(806),coseBase.CoSEEdge=__webpack_require__2(767),coseBase.CoSEGraph=__webpack_require__2(880),coseBase.CoSEGraphManager=__webpack_require__2(578),coseBase.CoSELayout=__webpack_require__2(765),coseBase.CoSENode=__webpack_require__2(991),coseBase.ConstraintHandler=__webpack_require__2(902),module3.exports=coseBase},806:(module3,__unused_webpack_exports,__webpack_require__2)=>{var FDLayoutConstants=__webpack_require__2(551).FDLayoutConstants;function CoSEConstants(){}for(var prop in __name(CoSEConstants,"CoSEConstants"),FDLayoutConstants)CoSEConstants[prop]=FDLayoutConstants[prop];CoSEConstants.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,CoSEConstants.DEFAULT_RADIAL_SEPARATION=FDLayoutConstants.DEFAULT_EDGE_LENGTH,CoSEConstants.DEFAULT_COMPONENT_SEPERATION=60,CoSEConstants.TILE=!0,CoSEConstants.TILING_PADDING_VERTICAL=10,CoSEConstants.TILING_PADDING_HORIZONTAL=10,CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,CoSEConstants.ENFORCE_CONSTRAINTS=!0,CoSEConstants.APPLY_LAYOUT=!0,CoSEConstants.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL=!0,CoSEConstants.PURE_INCREMENTAL=CoSEConstants.DEFAULT_INCREMENTAL,module3.exports=CoSEConstants},767:(module3,__unused_webpack_exports,__webpack_require__2)=>{var FDLayoutEdge=__webpack_require__2(551).FDLayoutEdge;function CoSEEdge(source,target,vEdge){FDLayoutEdge.call(this,source,target,vEdge)}for(var prop in __name(CoSEEdge,"CoSEEdge"),CoSEEdge.prototype=Object.create(FDLayoutEdge.prototype),FDLayoutEdge)CoSEEdge[prop]=FDLayoutEdge[prop];module3.exports=CoSEEdge},880:(module3,__unused_webpack_exports,__webpack_require__2)=>{var LGraph=__webpack_require__2(551).LGraph;function CoSEGraph(parent4,graphMgr,vGraph){LGraph.call(this,parent4,graphMgr,vGraph)}for(var prop in __name(CoSEGraph,"CoSEGraph"),CoSEGraph.prototype=Object.create(LGraph.prototype),LGraph)CoSEGraph[prop]=LGraph[prop];module3.exports=CoSEGraph},578:(module3,__unused_webpack_exports,__webpack_require__2)=>{var LGraphManager=__webpack_require__2(551).LGraphManager;function CoSEGraphManager(layout6){LGraphManager.call(this,layout6)}for(var prop in __name(CoSEGraphManager,"CoSEGraphManager"),CoSEGraphManager.prototype=Object.create(LGraphManager.prototype),LGraphManager)CoSEGraphManager[prop]=LGraphManager[prop];module3.exports=CoSEGraphManager},765:(module3,__unused_webpack_exports,__webpack_require__2)=>{var FDLayout=__webpack_require__2(551).FDLayout,CoSEGraphManager=__webpack_require__2(578),CoSEGraph=__webpack_require__2(880),CoSENode=__webpack_require__2(991),CoSEEdge=__webpack_require__2(767),CoSEConstants=__webpack_require__2(806),ConstraintHandler=__webpack_require__2(902),FDLayoutConstants=__webpack_require__2(551).FDLayoutConstants,LayoutConstants=__webpack_require__2(551).LayoutConstants,Point3=__webpack_require__2(551).Point,PointD=__webpack_require__2(551).PointD,DimensionD2=__webpack_require__2(551).DimensionD,Layout2=__webpack_require__2(551).Layout,Integer=__webpack_require__2(551).Integer,IGeometry=__webpack_require__2(551).IGeometry,LGraph=__webpack_require__2(551).LGraph,Transform2=__webpack_require__2(551).Transform,LinkedList=__webpack_require__2(551).LinkedList;function CoSELayout(){FDLayout.call(this),this.toBeTiled={},this.constraints={}}for(var prop in __name(CoSELayout,"CoSELayout"),CoSELayout.prototype=Object.create(FDLayout.prototype),FDLayout)CoSELayout[prop]=FDLayout[prop];CoSELayout.prototype.newGraphManager=function(){var gm=new CoSEGraphManager(this);return this.graphManager=gm,gm},CoSELayout.prototype.newGraph=function(vGraph){return new CoSEGraph(null,this.graphManager,vGraph)},CoSELayout.prototype.newNode=function(vNode){return new CoSENode(this.graphManager,vNode)},CoSELayout.prototype.newEdge=function(vEdge){return new CoSEEdge(null,null,vEdge)},CoSELayout.prototype.initParameters=function(){FDLayout.prototype.initParameters.call(this,arguments),this.isSubLayout||(CoSEConstants.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=CoSEConstants.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=CoSEConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},CoSELayout.prototype.initSpringEmbedder=function(){FDLayout.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/FDLayoutConstants.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},CoSELayout.prototype.layout=function(){return LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},CoSELayout.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();allNodes=new Set(this.getAllNodes()),intersection4=this.nodesWithGravity.filter(function(x5){return allNodes.has(x5)});this.graphManager.setAllNodesToApplyGravitation(intersection4)}}else{var forest=this.getFlatForest();if(forest.length>0)this.positionNodesRadially(forest);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var allNodes=new Set(this.getAllNodes()),intersection4=this.nodesWithGravity.filter(function(x5){return allNodes.has(x5)});this.graphManager.setAllNodesToApplyGravitation(intersection4),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(ConstraintHandler.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),CoSEConstants.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},CoSELayout.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%FDLayoutConstants.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var allNodes=new Set(this.getAllNodes()),intersection4=this.nodesWithGravity.filter(function(x5){return allNodes.has(x5)});this.graphManager.setAllNodesToApplyGravitation(intersection4),this.graphManager.updateBounds(),this.updateGrid(),CoSEConstants.PURE_INCREMENTAL?this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),CoSEConstants.PURE_INCREMENTAL?this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var gridUpdateAllowed=!this.isTreeGrowing&&!this.isGrowthFinished,forceToNodeSurroundingUpdate=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(gridUpdateAllowed,forceToNodeSurroundingUpdate),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},CoSELayout.prototype.getPositionsData=function(){for(var allNodes=this.graphManager.getAllNodes(),pData={},i2=0;i2<allNodes.length;i2++){var rect3=allNodes[i2].rect,id30=allNodes[i2].id;pData[id30]={id:id30,x:rect3.getCenterX(),y:rect3.getCenterY(),w:rect3.width,h:rect3.height}}return pData},CoSELayout.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var layoutEnded=!1;if("during"===FDLayoutConstants.ANIMATE)this.emit("layoutstarted");else{for(;!layoutEnded;)layoutEnded=this.tick();this.graphManager.updateBounds()}},CoSELayout.prototype.moveNodes=function(){for(var lNodes=this.getAllNodes(),i2=0;i2<lNodes.length;i2++)lNodes[i2].calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(i2=0;i2<lNodes.length;i2++)lNodes[i2].move()},CoSELayout.prototype.initConstraintVariables=function(){var self2=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var allNodes=this.graphManager.getAllNodes(),i2=0;i2<allNodes.length;i2++){var node2=allNodes[i2];this.idToNodeMap.set(node2.id,node2)}var calculateCompoundWeight=__name(function calculateCompoundWeight2(compoundNode){for(var node3,nodes5=compoundNode.getChild().getNodes(),fixedNodeWeight2=0,i3=0;i3<nodes5.length;i3++)null==(node3=nodes5[i3]).getChild()?self2.fixedNodeSet.has(node3.id)&&(fixedNodeWeight2+=100):fixedNodeWeight2+=calculateCompoundWeight2(node3);return fixedNodeWeight2},"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(nodeData2){self2.fixedNodeSet.add(nodeData2.nodeId)});for(allNodes=this.graphManager.getAllNodes(),i2=0;i2<allNodes.length;i2++)if(null!=(node2=allNodes[i2]).getChild()){var fixedNodeWeight=calculateCompoundWeight(node2);fixedNodeWeight>0&&(node2.fixedNodeWeight=fixedNodeWeight)}}if(this.constraints.relativePlacementConstraint){var nodeToDummyForVerticalAlignment=new Map,nodeToDummyForHorizontalAlignment=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(nodeId){self2.fixedNodesOnHorizontal.add(nodeId),self2.fixedNodesOnVertical.add(nodeId)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var verticalAlignment2=this.constraints.alignmentConstraint.vertical;for(i2=0;i2<verticalAlignment2.length;i2++)this.dummyToNodeForVerticalAlignment.set("dummy"+i2,[]),verticalAlignment2[i2].forEach(function(nodeId){nodeToDummyForVerticalAlignment.set(nodeId,"dummy"+i2),self2.dummyToNodeForVerticalAlignment.get("dummy"+i2).push(nodeId),self2.fixedNodeSet.has(nodeId)&&self2.fixedNodesOnHorizontal.add("dummy"+i2)})}if(this.constraints.alignmentConstraint.horizontal){var horizontalAlignment=this.constraints.alignmentConstraint.horizontal;for(i2=0;i2<horizontalAlignment.length;i2++)this.dummyToNodeForHorizontalAlignment.set("dummy"+i2,[]),horizontalAlignment[i2].forEach(function(nodeId){nodeToDummyForHorizontalAlignment.set(nodeId,"dummy"+i2),self2.dummyToNodeForHorizontalAlignment.get("dummy"+i2).push(nodeId),self2.fixedNodeSet.has(nodeId)&&self2.fixedNodesOnVertical.add("dummy"+i2)})}}if(CoSEConstants.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(array4){var j3,x5,i3;for(i3=array4.length-1;i3>=2*array4.length/3;i3--)j3=Math.floor(Math.random()*(i3+1)),x5=array4[i3],array4[i3]=array4[j3],array4[j3]=x5;return array4},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(constraint){if(constraint.left){var nodeIdLeft=nodeToDummyForVerticalAlignment.has(constraint.left)?nodeToDummyForVerticalAlignment.get(constraint.left):constraint.left,nodeIdRight=nodeToDummyForVerticalAlignment.has(constraint.right)?nodeToDummyForVerticalAlignment.get(constraint.right):constraint.right;self2.nodesInRelativeHorizontal.includes(nodeIdLeft)||(self2.nodesInRelativeHorizontal.push(nodeIdLeft),self2.nodeToRelativeConstraintMapHorizontal.set(nodeIdLeft,[]),self2.dummyToNodeForVerticalAlignment.has(nodeIdLeft)?self2.nodeToTempPositionMapHorizontal.set(nodeIdLeft,self2.idToNodeMap.get(self2.dummyToNodeForVerticalAlignment.get(nodeIdLeft)[0]).getCenterX()):self2.nodeToTempPositionMapHorizontal.set(nodeIdLeft,self2.idToNodeMap.get(nodeIdLeft).getCenterX())),self2.nodesInRelativeHorizontal.includes(nodeIdRight)||(self2.nodesInRelativeHorizontal.push(nodeIdRight),self2.nodeToRelativeConstraintMapHorizontal.set(nodeIdRight,[]),self2.dummyToNodeForVerticalAlignment.has(nodeIdRight)?self2.nodeToTempPositionMapHorizontal.set(nodeIdRight,self2.idToNodeMap.get(self2.dummyToNodeForVerticalAlignment.get(nodeIdRight)[0]).getCenterX()):self2.nodeToTempPositionMapHorizontal.set(nodeIdRight,self2.idToNodeMap.get(nodeIdRight).getCenterX())),self2.nodeToRelativeConstraintMapHorizontal.get(nodeIdLeft).push({right:nodeIdRight,gap:constraint.gap}),self2.nodeToRelativeConstraintMapHorizontal.get(nodeIdRight).push({left:nodeIdLeft,gap:constraint.gap})}else{var nodeIdTop=nodeToDummyForHorizontalAlignment.has(constraint.top)?nodeToDummyForHorizontalAlignment.get(constraint.top):constraint.top,nodeIdBottom=nodeToDummyForHorizontalAlignment.has(constraint.bottom)?nodeToDummyForHorizontalAlignment.get(constraint.bottom):constraint.bottom;self2.nodesInRelativeVertical.includes(nodeIdTop)||(self2.nodesInRelativeVertical.push(nodeIdTop),self2.nodeToRelativeConstraintMapVertical.set(nodeIdTop,[]),self2.dummyToNodeForHorizontalAlignment.has(nodeIdTop)?self2.nodeToTempPositionMapVertical.set(nodeIdTop,self2.idToNodeMap.get(self2.dummyToNodeForHorizontalAlignment.get(nodeIdTop)[0]).getCenterY()):self2.nodeToTempPositionMapVertical.set(nodeIdTop,self2.idToNodeMap.get(nodeIdTop).getCenterY())),self2.nodesInRelativeVertical.includes(nodeIdBottom)||(self2.nodesInRelativeVertical.push(nodeIdBottom),self2.nodeToRelativeConstraintMapVertical.set(nodeIdBottom,[]),self2.dummyToNodeForHorizontalAlignment.has(nodeIdBottom)?self2.nodeToTempPositionMapVertical.set(nodeIdBottom,self2.idToNodeMap.get(self2.dummyToNodeForHorizontalAlignment.get(nodeIdBottom)[0]).getCenterY()):self2.nodeToTempPositionMapVertical.set(nodeIdBottom,self2.idToNodeMap.get(nodeIdBottom).getCenterY())),self2.nodeToRelativeConstraintMapVertical.get(nodeIdTop).push({bottom:nodeIdBottom,gap:constraint.gap}),self2.nodeToRelativeConstraintMapVertical.get(nodeIdBottom).push({top:nodeIdTop,gap:constraint.gap})}});else{var subGraphOnHorizontal=new Map,subGraphOnVertical=new Map;this.constraints.relativePlacementConstraint.forEach(function(constraint){if(constraint.left){var left3=nodeToDummyForVerticalAlignment.has(constraint.left)?nodeToDummyForVerticalAlignment.get(constraint.left):constraint.left,right3=nodeToDummyForVerticalAlignment.has(constraint.right)?nodeToDummyForVerticalAlignment.get(constraint.right):constraint.right;subGraphOnHorizontal.has(left3)?subGraphOnHorizontal.get(left3).push(right3):subGraphOnHorizontal.set(left3,[right3]),subGraphOnHorizontal.has(right3)?subGraphOnHorizontal.get(right3).push(left3):subGraphOnHorizontal.set(right3,[left3])}else{var top2=nodeToDummyForHorizontalAlignment.has(constraint.top)?nodeToDummyForHorizontalAlignment.get(constraint.top):constraint.top,bottom2=nodeToDummyForHorizontalAlignment.has(constraint.bottom)?nodeToDummyForHorizontalAlignment.get(constraint.bottom):constraint.bottom;subGraphOnVertical.has(top2)?subGraphOnVertical.get(top2).push(bottom2):subGraphOnVertical.set(top2,[bottom2]),subGraphOnVertical.has(bottom2)?subGraphOnVertical.get(bottom2).push(top2):subGraphOnVertical.set(bottom2,[top2])}});var constructComponents=__name(function(graph,fixedNodes){var components3=[],isFixed=[],queue=new LinkedList,visited=new Set,count2=0;return graph.forEach(function(value2,key){if(!visited.has(key)){components3[count2]=[],isFixed[count2]=!1;var currentNode=key;for(queue.push(currentNode),visited.add(currentNode),components3[count2].push(currentNode);0!=queue.length;){currentNode=queue.shift(),fixedNodes.has(currentNode)&&(isFixed[count2]=!0),graph.get(currentNode).forEach(function(neighbor){visited.has(neighbor)||(queue.push(neighbor),visited.add(neighbor),components3[count2].push(neighbor))})}count2++}}),{components:components3,isFixed:isFixed}},"constructComponents"),resultOnHorizontal=constructComponents(subGraphOnHorizontal,self2.fixedNodesOnHorizontal);this.componentsOnHorizontal=resultOnHorizontal.components,this.fixedComponentsOnHorizontal=resultOnHorizontal.isFixed;var resultOnVertical=constructComponents(subGraphOnVertical,self2.fixedNodesOnVertical);this.componentsOnVertical=resultOnVertical.components,this.fixedComponentsOnVertical=resultOnVertical.isFixed}}},CoSELayout.prototype.updateDisplacements=function(){var self2=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(nodeData2){var fixedNode=self2.idToNodeMap.get(nodeData2.nodeId);fixedNode.displacementX=0,fixedNode.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var allVerticalAlignments=this.constraints.alignmentConstraint.vertical,i2=0;i2<allVerticalAlignments.length;i2++){for(var totalDisplacementX=0,j3=0;j3<allVerticalAlignments[i2].length;j3++){if(this.fixedNodeSet.has(allVerticalAlignments[i2][j3])){totalDisplacementX=0;break}totalDisplacementX+=this.idToNodeMap.get(allVerticalAlignments[i2][j3]).displacementX}var averageDisplacementX=totalDisplacementX/allVerticalAlignments[i2].length;for(j3=0;j3<allVerticalAlignments[i2].length;j3++)this.idToNodeMap.get(allVerticalAlignments[i2][j3]).displacementX=averageDisplacementX}if(this.constraints.alignmentConstraint.horizontal){var allHorizontalAlignments=this.constraints.alignmentConstraint.horizontal;for(i2=0;i2<allHorizontalAlignments.length;i2++){var totalDisplacementY=0;for(j3=0;j3<allHorizontalAlignments[i2].length;j3++){if(this.fixedNodeSet.has(allHorizontalAlignments[i2][j3])){totalDisplacementY=0;break}totalDisplacementY+=this.idToNodeMap.get(allHorizontalAlignments[i2][j3]).displacementY}var averageDisplacementY=totalDisplacementY/allHorizontalAlignments[i2].length;for(j3=0;j3<allHorizontalAlignments[i2].length;j3++)this.idToNodeMap.get(allHorizontalAlignments[i2][j3]).displacementY=averageDisplacementY}}}if(this.constraints.relativePlacementConstraint)if(CoSEConstants.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(nodeId){if(!self2.fixedNodesOnHorizontal.has(nodeId)){var displacement=0;displacement=self2.dummyToNodeForVerticalAlignment.has(nodeId)?self2.idToNodeMap.get(self2.dummyToNodeForVerticalAlignment.get(nodeId)[0]).displacementX:self2.idToNodeMap.get(nodeId).displacementX,self2.nodeToRelativeConstraintMapHorizontal.get(nodeId).forEach(function(constraint){var diff2;constraint.right?(diff2=self2.nodeToTempPositionMapHorizontal.get(constraint.right)-self2.nodeToTempPositionMapHorizontal.get(nodeId)-displacement)<constraint.gap&&(displacement-=constraint.gap-diff2):(diff2=self2.nodeToTempPositionMapHorizontal.get(nodeId)-self2.nodeToTempPositionMapHorizontal.get(constraint.left)+displacement)<constraint.gap&&(displacement+=constraint.gap-diff2)}),self2.nodeToTempPositionMapHorizontal.set(nodeId,self2.nodeToTempPositionMapHorizontal.get(nodeId)+displacement),self2.dummyToNodeForVerticalAlignment.has(nodeId)?self2.dummyToNodeForVerticalAlignment.get(nodeId).forEach(function(nodeId2){self2.idToNodeMap.get(nodeId2).displacementX=displacement}):self2.idToNodeMap.get(nodeId).displacementX=displacement}}),this.nodesInRelativeVertical.forEach(function(nodeId){if(!self2.fixedNodesOnHorizontal.has(nodeId)){var displacement=0;displacement=self2.dummyToNodeForHorizontalAlignment.has(nodeId)?self2.idToNodeMap.get(self2.dummyToNodeForHorizontalAlignment.get(nodeId)[0]).displacementY:self2.idToNodeMap.get(nodeId).displacementY,self2.nodeToRelativeConstraintMapVertical.get(nodeId).forEach(function(constraint){var diff2;constraint.bottom?(diff2=self2.nodeToTempPositionMapVertical.get(constraint.bottom)-self2.nodeToTempPositionMapVertical.get(nodeId)-displacement)<constraint.gap&&(displacement-=constraint.gap-diff2):(diff2=self2.nodeToTempPositionMapVertical.get(nodeId)-self2.nodeToTempPositionMapVertical.get(constraint.top)+displacement)<constraint.gap&&(displacement+=constraint.gap-diff2)}),self2.nodeToTempPositionMapVertical.set(nodeId,self2.nodeToTempPositionMapVertical.get(nodeId)+displacement),self2.dummyToNodeForHorizontalAlignment.has(nodeId)?self2.dummyToNodeForHorizontalAlignment.get(nodeId).forEach(function(nodeId2){self2.idToNodeMap.get(nodeId2).displacementY=displacement}):self2.idToNodeMap.get(nodeId).displacementY=displacement}});else{for(i2=0;i2<this.componentsOnHorizontal.length;i2++){var component2=this.componentsOnHorizontal[i2];if(this.fixedComponentsOnHorizontal[i2])for(j3=0;j3<component2.length;j3++)this.dummyToNodeForVerticalAlignment.has(component2[j3])?this.dummyToNodeForVerticalAlignment.get(component2[j3]).forEach(function(nodeId){self2.idToNodeMap.get(nodeId).displacementX=0}):this.idToNodeMap.get(component2[j3]).displacementX=0;else{var sum2=0,count2=0;for(j3=0;j3<component2.length;j3++){if(this.dummyToNodeForVerticalAlignment.has(component2[j3]))sum2+=(actualNodes=this.dummyToNodeForVerticalAlignment.get(component2[j3])).length*this.idToNodeMap.get(actualNodes[0]).displacementX,count2+=actualNodes.length;else sum2+=this.idToNodeMap.get(component2[j3]).displacementX,count2++}var averageDisplacement=sum2/count2;for(j3=0;j3<component2.length;j3++)this.dummyToNodeForVerticalAlignment.has(component2[j3])?this.dummyToNodeForVerticalAlignment.get(component2[j3]).forEach(function(nodeId){self2.idToNodeMap.get(nodeId).displacementX=averageDisplacement}):this.idToNodeMap.get(component2[j3]).displacementX=averageDisplacement}}for(i2=0;i2<this.componentsOnVertical.length;i2++){component2=this.componentsOnVertical[i2];if(this.fixedComponentsOnVertical[i2])for(j3=0;j3<component2.length;j3++)this.dummyToNodeForHorizontalAlignment.has(component2[j3])?this.dummyToNodeForHorizontalAlignment.get(component2[j3]).forEach(function(nodeId){self2.idToNodeMap.get(nodeId).displacementY=0}):this.idToNodeMap.get(component2[j3]).displacementY=0;else{for(sum2=0,count2=0,j3=0;j3<component2.length;j3++){var actualNodes;if(this.dummyToNodeForHorizontalAlignment.has(component2[j3]))sum2+=(actualNodes=this.dummyToNodeForHorizontalAlignment.get(component2[j3])).length*this.idToNodeMap.get(actualNodes[0]).displacementY,count2+=actualNodes.length;else sum2+=this.idToNodeMap.get(component2[j3]).displacementY,count2++}for(averageDisplacement=sum2/count2,j3=0;j3<component2.length;j3++)this.dummyToNodeForHorizontalAlignment.has(component2[j3])?this.dummyToNodeForHorizontalAlignment.get(component2[j3]).forEach(function(nodeId){self2.idToNodeMap.get(nodeId).displacementY=averageDisplacement}):this.idToNodeMap.get(component2[j3]).displacementY=averageDisplacement}}}},CoSELayout.prototype.calculateNodesToApplyGravitationTo=function(){var graph,i2,nodeList=[],graphs=this.graphManager.getGraphs(),size4=graphs.length;for(i2=0;i2<size4;i2++)(graph=graphs[i2]).updateConnected(),graph.isConnected||(nodeList=nodeList.concat(graph.getNodes()));return nodeList},CoSELayout.prototype.createBendpoints=function(){var edges3=[];edges3=edges3.concat(this.graphManager.getAllEdges());var i2,visited=new Set;for(i2=0;i2<edges3.length;i2++){var edge=edges3[i2];if(!visited.has(edge)){var source=edge.getSource(),target=edge.getTarget();if(source==target)edge.getBendpoints().push(new PointD),edge.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(edge),visited.add(edge);else{var edgeList2=[];if(edgeList2=(edgeList2=edgeList2.concat(source.getEdgeListToNode(target))).concat(target.getEdgeListToNode(source)),!visited.has(edgeList2[0])){var k2;if(edgeList2.length>1)for(k2=0;k2<edgeList2.length;k2++){var multiEdge=edgeList2[k2];multiEdge.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(multiEdge)}edgeList2.forEach(function(edge2){visited.add(edge2)})}}}if(visited.size==edges3.length)break}},CoSELayout.prototype.positionNodesRadially=function(forest){for(var currentStartingPoint=new Point3(0,0),numberOfColumns=Math.ceil(Math.sqrt(forest.length)),height2=0,currentY=0,currentX=0,point8=new PointD(0,0),i2=0;i2<forest.length;i2++){i2%numberOfColumns==0&&(currentX=0,currentY=height2,0!=i2&&(currentY+=CoSEConstants.DEFAULT_COMPONENT_SEPERATION),height2=0);var tree=forest[i2],centerNode=Layout2.findCenterOfTree(tree);currentStartingPoint.x=currentX,currentStartingPoint.y=currentY,(point8=CoSELayout.radialLayout(tree,centerNode,currentStartingPoint)).y>height2&&(height2=Math.floor(point8.y)),currentX=Math.floor(point8.x+CoSEConstants.DEFAULT_COMPONENT_SEPERATION)}this.transform(new PointD(LayoutConstants.WORLD_CENTER_X-point8.x/2,LayoutConstants.WORLD_CENTER_Y-point8.y/2))},CoSELayout.radialLayout=function(tree,centerNode,startingPoint){var radialSep=Math.max(this.maxDiagonalInTree(tree),CoSEConstants.DEFAULT_RADIAL_SEPARATION);CoSELayout.branchRadialLayout(centerNode,null,0,359,0,radialSep);var bounds4=LGraph.calculateBounds(tree),transform8=new Transform2;transform8.setDeviceOrgX(bounds4.getMinX()),transform8.setDeviceOrgY(bounds4.getMinY()),transform8.setWorldOrgX(startingPoint.x),transform8.setWorldOrgY(startingPoint.y);for(var i2=0;i2<tree.length;i2++){tree[i2].transform(transform8)}var bottomRight=new PointD(bounds4.getMaxX(),bounds4.getMaxY());return transform8.inverseTransformPoint(bottomRight)},CoSELayout.branchRadialLayout=function(node2,parentOfNode,startAngle,endAngle,distance2,radialSeparation){var halfInterval=(endAngle-startAngle+1)/2;halfInterval<0&&(halfInterval+=180);var teta=(halfInterval+startAngle)%360*IGeometry.TWO_PI/360,x_=(Math.cos(teta),distance2*Math.cos(teta)),y_=distance2*Math.sin(teta);node2.setCenter(x_,y_);var neighborEdges=[],childCount=(neighborEdges=neighborEdges.concat(node2.getEdges())).length;null!=parentOfNode&&childCount--;for(var startIndex,branchCount=0,incEdgesCount=neighborEdges.length,edges3=node2.getEdgesBetween(parentOfNode);edges3.length>1;){var temp=edges3[0];edges3.splice(0,1);var index=neighborEdges.indexOf(temp);index>=0&&neighborEdges.splice(index,1),incEdgesCount--,childCount--}startIndex=null!=parentOfNode?(neighborEdges.indexOf(edges3[0])+1)%incEdgesCount:0;for(var stepAngle=Math.abs(endAngle-startAngle)/childCount,i2=startIndex;branchCount!=childCount;i2=++i2%incEdgesCount){var currentNeighbor=neighborEdges[i2].getOtherEnd(node2);if(currentNeighbor!=parentOfNode){var childStartAngle=(startAngle+branchCount*stepAngle)%360,childEndAngle=(childStartAngle+stepAngle)%360;CoSELayout.branchRadialLayout(currentNeighbor,node2,childStartAngle,childEndAngle,distance2+radialSeparation,radialSeparation),branchCount++}}},CoSELayout.maxDiagonalInTree=function(tree){for(var maxDiagonal=Integer.MIN_VALUE,i2=0;i2<tree.length;i2++){var diagonal=tree[i2].getDiagonal();diagonal>maxDiagonal&&(maxDiagonal=diagonal)}return maxDiagonal},CoSELayout.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},CoSELayout.prototype.groupZeroDegreeMembers=function(){var self2=this,tempMemberGroups={};this.memberGroups={},this.idToDummyNode={};for(var zeroDegree=[],allNodes=this.graphManager.getAllNodes(),i2=0;i2<allNodes.length;i2++){var parent4=(node2=allNodes[i2]).getParent();0!==this.getNodeDegreeWithChildren(node2)||null!=parent4.id&&this.getToBeTiled(parent4)||zeroDegree.push(node2)}for(i2=0;i2<zeroDegree.length;i2++){var node2,p_id=(node2=zeroDegree[i2]).getParent().id;void 0===tempMemberGroups[p_id]&&(tempMemberGroups[p_id]=[]),tempMemberGroups[p_id]=tempMemberGroups[p_id].concat(node2)}Object.keys(tempMemberGroups).forEach(function(p_id2){if(tempMemberGroups[p_id2].length>1){var dummyCompoundId="DummyCompound_"+p_id2;self2.memberGroups[dummyCompoundId]=tempMemberGroups[p_id2];var parent5=tempMemberGroups[p_id2][0].getParent(),dummyCompound=new CoSENode(self2.graphManager);dummyCompound.id=dummyCompoundId,dummyCompound.paddingLeft=parent5.paddingLeft||0,dummyCompound.paddingRight=parent5.paddingRight||0,dummyCompound.paddingBottom=parent5.paddingBottom||0,dummyCompound.paddingTop=parent5.paddingTop||0,self2.idToDummyNode[dummyCompoundId]=dummyCompound;var dummyParentGraph=self2.getGraphManager().add(self2.newGraph(),dummyCompound),parentGraph=parent5.getChild();parentGraph.add(dummyCompound);for(var i3=0;i3<tempMemberGroups[p_id2].length;i3++){var node3=tempMemberGroups[p_id2][i3];parentGraph.remove(node3),dummyParentGraph.add(node3)}}})},CoSELayout.prototype.clearCompounds=function(){var childGraphMap={},idToNode={};this.performDFSOnCompounds();for(var i2=0;i2<this.compoundOrder.length;i2++)idToNode[this.compoundOrder[i2].id]=this.compoundOrder[i2],childGraphMap[this.compoundOrder[i2].id]=[].concat(this.compoundOrder[i2].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[i2].getChild()),this.compoundOrder[i2].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(childGraphMap,idToNode)},CoSELayout.prototype.clearZeroDegreeMembers=function(){var self2=this,tiledZeroDegreePack=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(id30){var compoundNode=self2.idToDummyNode[id30];if(tiledZeroDegreePack[id30]=self2.tileNodes(self2.memberGroups[id30],compoundNode.paddingLeft+compoundNode.paddingRight),compoundNode.rect.width=tiledZeroDegreePack[id30].width,compoundNode.rect.height=tiledZeroDegreePack[id30].height,compoundNode.setCenter(tiledZeroDegreePack[id30].centerX,tiledZeroDegreePack[id30].centerY),compoundNode.labelMarginLeft=0,compoundNode.labelMarginTop=0,CoSEConstants.NODE_DIMENSIONS_INCLUDE_LABELS){var width3=compoundNode.rect.width,height2=compoundNode.rect.height;compoundNode.labelWidth&&("left"==compoundNode.labelPosHorizontal?(compoundNode.rect.x-=compoundNode.labelWidth,compoundNode.setWidth(width3+compoundNode.labelWidth),compoundNode.labelMarginLeft=compoundNode.labelWidth):"center"==compoundNode.labelPosHorizontal&&compoundNode.labelWidth>width3?(compoundNode.rect.x-=(compoundNode.labelWidth-width3)/2,compoundNode.setWidth(compoundNode.labelWidth),compoundNode.labelMarginLeft=(compoundNode.labelWidth-width3)/2):"right"==compoundNode.labelPosHorizontal&&compoundNode.setWidth(width3+compoundNode.labelWidth)),compoundNode.labelHeight&&("top"==compoundNode.labelPosVertical?(compoundNode.rect.y-=compoundNode.labelHeight,compoundNode.setHeight(height2+compoundNode.labelHeight),compoundNode.labelMarginTop=compoundNode.labelHeight):"center"==compoundNode.labelPosVertical&&compoundNode.labelHeight>height2?(compoundNode.rect.y-=(compoundNode.labelHeight-height2)/2,compoundNode.setHeight(compoundNode.labelHeight),compoundNode.labelMarginTop=(compoundNode.labelHeight-height2)/2):"bottom"==compoundNode.labelPosVertical&&compoundNode.setHeight(height2+compoundNode.labelHeight))}})},CoSELayout.prototype.repopulateCompounds=function(){for(var i2=this.compoundOrder.length-1;i2>=0;i2--){var lCompoundNode=this.compoundOrder[i2],id30=lCompoundNode.id,horizontalMargin=lCompoundNode.paddingLeft,verticalMargin=lCompoundNode.paddingTop,labelMarginLeft=lCompoundNode.labelMarginLeft,labelMarginTop=lCompoundNode.labelMarginTop;this.adjustLocations(this.tiledMemberPack[id30],lCompoundNode.rect.x,lCompoundNode.rect.y,horizontalMargin,verticalMargin,labelMarginLeft,labelMarginTop)}},CoSELayout.prototype.repopulateZeroDegreeMembers=function(){var self2=this,tiledPack=this.tiledZeroDegreePack;Object.keys(tiledPack).forEach(function(id30){var compoundNode=self2.idToDummyNode[id30],horizontalMargin=compoundNode.paddingLeft,verticalMargin=compoundNode.paddingTop,labelMarginLeft=compoundNode.labelMarginLeft,labelMarginTop=compoundNode.labelMarginTop;self2.adjustLocations(tiledPack[id30],compoundNode.rect.x,compoundNode.rect.y,horizontalMargin,verticalMargin,labelMarginLeft,labelMarginTop)})},CoSELayout.prototype.getToBeTiled=function(node2){var id30=node2.id;if(null!=this.toBeTiled[id30])return this.toBeTiled[id30];var childGraph=node2.getChild();if(null==childGraph)return this.toBeTiled[id30]=!1,!1;for(var children2=childGraph.getNodes(),i2=0;i2<children2.length;i2++){var theChild=children2[i2];if(this.getNodeDegree(theChild)>0)return this.toBeTiled[id30]=!1,!1;if(null!=theChild.getChild()){if(!this.getToBeTiled(theChild))return this.toBeTiled[id30]=!1,!1}else this.toBeTiled[theChild.id]=!1}return this.toBeTiled[id30]=!0,!0},CoSELayout.prototype.getNodeDegree=function(node2){node2.id;for(var edges3=node2.getEdges(),degree=0,i2=0;i2<edges3.length;i2++){var edge=edges3[i2];edge.getSource().id!==edge.getTarget().id&&(degree+=1)}return degree},CoSELayout.prototype.getNodeDegreeWithChildren=function(node2){var degree=this.getNodeDegree(node2);if(null==node2.getChild())return degree;for(var children2=node2.getChild().getNodes(),i2=0;i2<children2.length;i2++){var child=children2[i2];degree+=this.getNodeDegreeWithChildren(child)}return degree},CoSELayout.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},CoSELayout.prototype.fillCompexOrderByDFS=function(children2){for(var i2=0;i2<children2.length;i2++){var child=children2[i2];null!=child.getChild()&&this.fillCompexOrderByDFS(child.getChild().getNodes()),this.getToBeTiled(child)&&this.compoundOrder.push(child)}},CoSELayout.prototype.adjustLocations=function(organization,x5,y6,compoundHorizontalMargin,compoundVerticalMargin,compoundLabelMarginLeft,compoundLabelMarginTop){y6+=compoundVerticalMargin+compoundLabelMarginTop;for(var left3=x5+=compoundHorizontalMargin+compoundLabelMarginLeft,i2=0;i2<organization.rows.length;i2++){var row=organization.rows[i2];x5=left3;for(var maxHeight=0,j3=0;j3<row.length;j3++){var lnode=row[j3];lnode.rect.x=x5,lnode.rect.y=y6,x5+=lnode.rect.width+organization.horizontalPadding,lnode.rect.height>maxHeight&&(maxHeight=lnode.rect.height)}y6+=maxHeight+organization.verticalPadding}},CoSELayout.prototype.tileCompoundMembers=function(childGraphMap,idToNode){var self2=this;this.tiledMemberPack=[],Object.keys(childGraphMap).forEach(function(id30){var compoundNode=idToNode[id30];if(self2.tiledMemberPack[id30]=self2.tileNodes(childGraphMap[id30],compoundNode.paddingLeft+compoundNode.paddingRight),compoundNode.rect.width=self2.tiledMemberPack[id30].width,compoundNode.rect.height=self2.tiledMemberPack[id30].height,compoundNode.setCenter(self2.tiledMemberPack[id30].centerX,self2.tiledMemberPack[id30].centerY),compoundNode.labelMarginLeft=0,compoundNode.labelMarginTop=0,CoSEConstants.NODE_DIMENSIONS_INCLUDE_LABELS){var width3=compoundNode.rect.width,height2=compoundNode.rect.height;compoundNode.labelWidth&&("left"==compoundNode.labelPosHorizontal?(compoundNode.rect.x-=compoundNode.labelWidth,compoundNode.setWidth(width3+compoundNode.labelWidth),compoundNode.labelMarginLeft=compoundNode.labelWidth):"center"==compoundNode.labelPosHorizontal&&compoundNode.labelWidth>width3?(compoundNode.rect.x-=(compoundNode.labelWidth-width3)/2,compoundNode.setWidth(compoundNode.labelWidth),compoundNode.labelMarginLeft=(compoundNode.labelWidth-width3)/2):"right"==compoundNode.labelPosHorizontal&&compoundNode.setWidth(width3+compoundNode.labelWidth)),compoundNode.labelHeight&&("top"==compoundNode.labelPosVertical?(compoundNode.rect.y-=compoundNode.labelHeight,compoundNode.setHeight(height2+compoundNode.labelHeight),compoundNode.labelMarginTop=compoundNode.labelHeight):"center"==compoundNode.labelPosVertical&&compoundNode.labelHeight>height2?(compoundNode.rect.y-=(compoundNode.labelHeight-height2)/2,compoundNode.setHeight(compoundNode.labelHeight),compoundNode.labelMarginTop=(compoundNode.labelHeight-height2)/2):"bottom"==compoundNode.labelPosVertical&&compoundNode.setHeight(height2+compoundNode.labelHeight))}})},CoSELayout.prototype.tileNodes=function(nodes5,minWidth){var horizontalOrg=this.tileNodesByFavoringDim(nodes5,minWidth,!0),verticalOrg=this.tileNodesByFavoringDim(nodes5,minWidth,!1),horizontalRatio=this.getOrgRatio(horizontalOrg);return this.getOrgRatio(verticalOrg)<horizontalRatio?verticalOrg:horizontalOrg},CoSELayout.prototype.getOrgRatio=function(organization){var ratio=organization.width/organization.height;return ratio<1&&(ratio=1/ratio),ratio},CoSELayout.prototype.calcIdealRowWidth=function(members,favorHorizontalDim){var verticalPadding=CoSEConstants.TILING_PADDING_VERTICAL,horizontalPadding=CoSEConstants.TILING_PADDING_HORIZONTAL,membersSize=members.length,totalWidth=0,totalHeight=0,maxWidth2=0;members.forEach(function(node2){totalWidth+=node2.getWidth(),totalHeight+=node2.getHeight(),node2.getWidth()>maxWidth2&&(maxWidth2=node2.getWidth())});var horizontalCount,averageWidth=totalWidth/membersSize,averageHeight=totalHeight/membersSize,delta=Math.pow(verticalPadding-horizontalPadding,2)+4*(averageWidth+horizontalPadding)*(averageHeight+verticalPadding)*membersSize,horizontalCountDouble=(horizontalPadding-verticalPadding+Math.sqrt(delta))/(2*(averageWidth+horizontalPadding));favorHorizontalDim?(horizontalCount=Math.ceil(horizontalCountDouble))==horizontalCountDouble&&horizontalCount++:horizontalCount=Math.floor(horizontalCountDouble);var idealWidth=horizontalCount*(averageWidth+horizontalPadding)-horizontalPadding;return maxWidth2>idealWidth&&(idealWidth=maxWidth2),idealWidth+=2*horizontalPadding},CoSELayout.prototype.tileNodesByFavoringDim=function(nodes5,minWidth,favorHorizontalDim){var verticalPadding=CoSEConstants.TILING_PADDING_VERTICAL,horizontalPadding=CoSEConstants.TILING_PADDING_HORIZONTAL,tilingCompareBy=CoSEConstants.TILING_COMPARE_BY,organization={rows:[],rowWidth:[],rowHeight:[],width:0,height:minWidth,verticalPadding:verticalPadding,horizontalPadding:horizontalPadding,centerX:0,centerY:0};tilingCompareBy&&(organization.idealRowWidth=this.calcIdealRowWidth(nodes5,favorHorizontalDim));var getNodeArea=__name(function(n2){return n2.rect.width*n2.rect.height},"getNodeArea"),areaCompareFcn=__name(function(n1,n2){return getNodeArea(n2)-getNodeArea(n1)},"areaCompareFcn");nodes5.sort(function(n1,n2){var cmpBy=areaCompareFcn;return organization.idealRowWidth?(cmpBy=tilingCompareBy)(n1.id,n2.id):cmpBy(n1,n2)});for(var sumCenterX=0,sumCenterY=0,i2=0;i2<nodes5.length;i2++){sumCenterX+=(lNode=nodes5[i2]).getCenterX(),sumCenterY+=lNode.getCenterY()}organization.centerX=sumCenterX/nodes5.length,organization.centerY=sumCenterY/nodes5.length;for(i2=0;i2<nodes5.length;i2++){var lNode=nodes5[i2];if(0==organization.rows.length)this.insertNodeToRow(organization,lNode,0,minWidth);else if(this.canAddHorizontal(organization,lNode.rect.width,lNode.rect.height)){var rowIndex=organization.rows.length-1;organization.idealRowWidth||(rowIndex=this.getShortestRowIndex(organization)),this.insertNodeToRow(organization,lNode,rowIndex,minWidth)}else this.insertNodeToRow(organization,lNode,organization.rows.length,minWidth);this.shiftToLastRow(organization)}return organization},CoSELayout.prototype.insertNodeToRow=function(organization,node2,rowIndex,minWidth){var minCompoundSize=minWidth;if(rowIndex==organization.rows.length){organization.rows.push([]),organization.rowWidth.push(minCompoundSize),organization.rowHeight.push(0)}var w4=organization.rowWidth[rowIndex]+node2.rect.width;organization.rows[rowIndex].length>0&&(w4+=organization.horizontalPadding),organization.rowWidth[rowIndex]=w4,organization.width<w4&&(organization.width=w4);var h3=node2.rect.height;rowIndex>0&&(h3+=organization.verticalPadding);var extraHeight=0;h3>organization.rowHeight[rowIndex]&&(extraHeight=organization.rowHeight[rowIndex],organization.rowHeight[rowIndex]=h3,extraHeight=organization.rowHeight[rowIndex]-extraHeight),organization.height+=extraHeight,organization.rows[rowIndex].push(node2)},CoSELayout.prototype.getShortestRowIndex=function(organization){for(var r2=-1,min9=Number.MAX_VALUE,i2=0;i2<organization.rows.length;i2++)organization.rowWidth[i2]<min9&&(r2=i2,min9=organization.rowWidth[i2]);return r2},CoSELayout.prototype.getLongestRowIndex=function(organization){for(var r2=-1,max10=Number.MIN_VALUE,i2=0;i2<organization.rows.length;i2++)organization.rowWidth[i2]>max10&&(r2=i2,max10=organization.rowWidth[i2]);return r2},CoSELayout.prototype.canAddHorizontal=function(organization,extraWidth,extraHeight){if(organization.idealRowWidth){var lastRowIndex=organization.rows.length-1;return organization.rowWidth[lastRowIndex]+extraWidth+organization.horizontalPadding<=organization.idealRowWidth}var sri=this.getShortestRowIndex(organization);if(sri<0)return!0;var min9=organization.rowWidth[sri];if(min9+organization.horizontalPadding+extraWidth<=organization.width)return!0;var add_to_row_ratio,add_new_row_ratio,hDiff=0;return organization.rowHeight[sri]<extraHeight&&sri>0&&(hDiff=extraHeight+organization.verticalPadding-organization.rowHeight[sri]),add_to_row_ratio=organization.width-min9>=extraWidth+organization.horizontalPadding?(organization.height+hDiff)/(min9+extraWidth+organization.horizontalPadding):(organization.height+hDiff)/organization.width,hDiff=extraHeight+organization.verticalPadding,(add_new_row_ratio=organization.width<extraWidth?(organization.height+hDiff)/extraWidth:(organization.height+hDiff)/organization.width)<1&&(add_new_row_ratio=1/add_new_row_ratio),add_to_row_ratio<1&&(add_to_row_ratio=1/add_to_row_ratio),add_to_row_ratio<add_new_row_ratio},CoSELayout.prototype.shiftToLastRow=function(organization){var longest=this.getLongestRowIndex(organization),last3=organization.rowWidth.length-1,row=organization.rows[longest],node2=row[row.length-1],diff2=node2.width+organization.horizontalPadding;if(organization.width-organization.rowWidth[last3]>diff2&&longest!=last3){row.splice(-1,1),organization.rows[last3].push(node2),organization.rowWidth[longest]=organization.rowWidth[longest]-diff2,organization.rowWidth[last3]=organization.rowWidth[last3]+diff2,organization.width=organization.rowWidth[instance.getLongestRowIndex(organization)];for(var maxHeight=Number.MIN_VALUE,i2=0;i2<row.length;i2++)row[i2].height>maxHeight&&(maxHeight=row[i2].height);longest>0&&(maxHeight+=organization.verticalPadding);var prevTotal=organization.rowHeight[longest]+organization.rowHeight[last3];organization.rowHeight[longest]=maxHeight,organization.rowHeight[last3]<node2.height+organization.verticalPadding&&(organization.rowHeight[last3]=node2.height+organization.verticalPadding);var finalTotal=organization.rowHeight[longest]+organization.rowHeight[last3];organization.height+=finalTotal-prevTotal,this.shiftToLastRow(organization)}},CoSELayout.prototype.tilingPreLayout=function(){CoSEConstants.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},CoSELayout.prototype.tilingPostLayout=function(){CoSEConstants.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},CoSELayout.prototype.reduceTrees=function(){for(var node2,prunedNodesAll=[],containsLeaf=!0;containsLeaf;){var allNodes=this.graphManager.getAllNodes(),prunedNodesInStepTemp=[];containsLeaf=!1;for(var i2=0;i2<allNodes.length;i2++)if(1==(node2=allNodes[i2]).getEdges().length&&!node2.getEdges()[0].isInterGraph&&null==node2.getChild()){if(CoSEConstants.PURE_INCREMENTAL){var otherEnd=node2.getEdges()[0].getOtherEnd(node2),relativePosition2=new DimensionD2(node2.getCenterX()-otherEnd.getCenterX(),node2.getCenterY()-otherEnd.getCenterY());prunedNodesInStepTemp.push([node2,node2.getEdges()[0],node2.getOwner(),relativePosition2])}else prunedNodesInStepTemp.push([node2,node2.getEdges()[0],node2.getOwner()]);containsLeaf=!0}if(1==containsLeaf){for(var prunedNodesInStep=[],j3=0;j3<prunedNodesInStepTemp.length;j3++)1==prunedNodesInStepTemp[j3][0].getEdges().length&&(prunedNodesInStep.push(prunedNodesInStepTemp[j3]),prunedNodesInStepTemp[j3][0].getOwner().remove(prunedNodesInStepTemp[j3][0]));prunedNodesAll.push(prunedNodesInStep),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=prunedNodesAll},CoSELayout.prototype.growTree=function(prunedNodesAll){for(var nodeData2,prunedNodesInStep=prunedNodesAll[prunedNodesAll.length-1],i2=0;i2<prunedNodesInStep.length;i2++)nodeData2=prunedNodesInStep[i2],this.findPlaceforPrunedNode(nodeData2),nodeData2[2].add(nodeData2[0]),nodeData2[2].add(nodeData2[1],nodeData2[1].source,nodeData2[1].target);prunedNodesAll.splice(prunedNodesAll.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},CoSELayout.prototype.findPlaceforPrunedNode=function(nodeData2){var gridForPrunedNode,nodeToConnect,prunedNode=nodeData2[0];if(nodeToConnect=prunedNode==nodeData2[1].source?nodeData2[1].target:nodeData2[1].source,CoSEConstants.PURE_INCREMENTAL)prunedNode.setCenter(nodeToConnect.getCenterX()+nodeData2[3].getWidth(),nodeToConnect.getCenterY()+nodeData2[3].getHeight());else{var startGridX=nodeToConnect.startX,finishGridX=nodeToConnect.finishX,startGridY=nodeToConnect.startY,finishGridY=nodeToConnect.finishY,controlRegions=[0,0,0,0];if(startGridY>0)for(var i2=startGridX;i2<=finishGridX;i2++)controlRegions[0]+=this.grid[i2][startGridY-1].length+this.grid[i2][startGridY].length-1;if(finishGridX<this.grid.length-1)for(i2=startGridY;i2<=finishGridY;i2++)controlRegions[1]+=this.grid[finishGridX+1][i2].length+this.grid[finishGridX][i2].length-1;if(finishGridY<this.grid[0].length-1)for(i2=startGridX;i2<=finishGridX;i2++)controlRegions[2]+=this.grid[i2][finishGridY+1].length+this.grid[i2][finishGridY].length-1;if(startGridX>0)for(i2=startGridY;i2<=finishGridY;i2++)controlRegions[3]+=this.grid[startGridX-1][i2].length+this.grid[startGridX][i2].length-1;for(var minCount,minIndex,min9=Integer.MAX_VALUE,j3=0;j3<controlRegions.length;j3++)controlRegions[j3]<min9?(min9=controlRegions[j3],minCount=1,minIndex=j3):controlRegions[j3]==min9&&minCount++;if(3==minCount&&0==min9)0==controlRegions[0]&&0==controlRegions[1]&&0==controlRegions[2]?gridForPrunedNode=1:0==controlRegions[0]&&0==controlRegions[1]&&0==controlRegions[3]?gridForPrunedNode=0:0==controlRegions[0]&&0==controlRegions[2]&&0==controlRegions[3]?gridForPrunedNode=3:0==controlRegions[1]&&0==controlRegions[2]&&0==controlRegions[3]&&(gridForPrunedNode=2);else if(2==minCount&&0==min9){var random2=Math.floor(2*Math.random());gridForPrunedNode=0==controlRegions[0]&&0==controlRegions[1]?0==random2?0:1:0==controlRegions[0]&&0==controlRegions[2]?0==random2?0:2:0==controlRegions[0]&&0==controlRegions[3]?0==random2?0:3:0==controlRegions[1]&&0==controlRegions[2]?0==random2?1:2:0==controlRegions[1]&&0==controlRegions[3]?0==random2?1:3:0==random2?2:3}else if(4==minCount&&0==min9){gridForPrunedNode=random2=Math.floor(4*Math.random())}else gridForPrunedNode=minIndex;0==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX(),nodeToConnect.getCenterY()-nodeToConnect.getHeight()/2-FDLayoutConstants.DEFAULT_EDGE_LENGTH-prunedNode.getHeight()/2):1==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX()+nodeToConnect.getWidth()/2+FDLayoutConstants.DEFAULT_EDGE_LENGTH+prunedNode.getWidth()/2,nodeToConnect.getCenterY()):2==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX(),nodeToConnect.getCenterY()+nodeToConnect.getHeight()/2+FDLayoutConstants.DEFAULT_EDGE_LENGTH+prunedNode.getHeight()/2):prunedNode.setCenter(nodeToConnect.getCenterX()-nodeToConnect.getWidth()/2-FDLayoutConstants.DEFAULT_EDGE_LENGTH-prunedNode.getWidth()/2,nodeToConnect.getCenterY())}},module3.exports=CoSELayout},991:(module3,__unused_webpack_exports,__webpack_require__2)=>{var FDLayoutNode=__webpack_require__2(551).FDLayoutNode,IMath=__webpack_require__2(551).IMath;function CoSENode(gm,loc,size4,vNode){FDLayoutNode.call(this,gm,loc,size4,vNode)}for(var prop in __name(CoSENode,"CoSENode"),CoSENode.prototype=Object.create(FDLayoutNode.prototype),FDLayoutNode)CoSENode[prop]=FDLayoutNode[prop];CoSENode.prototype.calculateDisplacement=function(){var layout6=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=layout6.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=layout6.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=layout6.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=layout6.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>layout6.coolingFactor*layout6.maxNodeDisplacement&&(this.displacementX=layout6.coolingFactor*layout6.maxNodeDisplacement*IMath.sign(this.displacementX)),Math.abs(this.displacementY)>layout6.coolingFactor*layout6.maxNodeDisplacement&&(this.displacementY=layout6.coolingFactor*layout6.maxNodeDisplacement*IMath.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},CoSENode.prototype.propogateDisplacementToChildren=function(dX,dY){for(var node2,nodes5=this.getChild().getNodes(),i2=0;i2<nodes5.length;i2++)null==(node2=nodes5[i2]).getChild()?(node2.displacementX+=dX,node2.displacementY+=dY):node2.propogateDisplacementToChildren(dX,dY)},CoSENode.prototype.move=function(){var layout6=this.graphManager.getLayout();null!=this.child&&0!=this.child.getNodes().length||(this.moveBy(this.displacementX,this.displacementY),layout6.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},CoSENode.prototype.setPred1=function(pred12){this.pred1=pred12},CoSENode.prototype.getPred1=function(){return pred1},CoSENode.prototype.getPred2=function(){return pred2},CoSENode.prototype.setNext=function(next3){this.next=next3},CoSENode.prototype.getNext=function(){return next},CoSENode.prototype.setProcessed=function(processed2){this.processed=processed2},CoSENode.prototype.isProcessed=function(){return processed},module3.exports=CoSENode},902:(module3,__unused_webpack_exports,__webpack_require__2)=>{function _toConsumableArray2(arr){if(Array.isArray(arr)){for(var i2=0,arr2=Array(arr.length);i2<arr.length;i2++)arr2[i2]=arr[i2];return arr2}return Array.from(arr)}__name(_toConsumableArray2,"_toConsumableArray");var CoSEConstants=__webpack_require__2(806),LinkedList=__webpack_require__2(551).LinkedList,Matrix=__webpack_require__2(551).Matrix,SVD=__webpack_require__2(551).SVD;function ConstraintHandler(){}__name(ConstraintHandler,"ConstraintHandler"),ConstraintHandler.handleConstraints=function(layout6){var constraints={};constraints.fixedNodeConstraint=layout6.constraints.fixedNodeConstraint,constraints.alignmentConstraint=layout6.constraints.alignmentConstraint,constraints.relativePlacementConstraint=layout6.constraints.relativePlacementConstraint;for(var idToNodeMap=new Map,nodeIndexes=new Map,xCoords=[],yCoords=[],allNodes=layout6.getAllNodes(),index=0,i2=0;i2<allNodes.length;i2++){var node2=allNodes[i2];null==node2.getChild()&&(nodeIndexes.set(node2.id,index++),xCoords.push(node2.getCenterX()),yCoords.push(node2.getCenterY()),idToNodeMap.set(node2.id,node2))}constraints.relativePlacementConstraint&&constraints.relativePlacementConstraint.forEach(function(constraint){constraint.gap||0==constraint.gap||(constraint.left?constraint.gap=CoSEConstants.DEFAULT_EDGE_LENGTH+idToNodeMap.get(constraint.left).getWidth()/2+idToNodeMap.get(constraint.right).getWidth()/2:constraint.gap=CoSEConstants.DEFAULT_EDGE_LENGTH+idToNodeMap.get(constraint.top).getHeight()/2+idToNodeMap.get(constraint.bottom).getHeight()/2)});var calculatePositionDiff=__name(function(pos1,pos2){return{x:pos1.x-pos2.x,y:pos1.y-pos2.y}},"calculatePositionDiff"),calculateAvgPosition=__name(function(nodeIdSet){var xPosSum=0,yPosSum=0;return nodeIdSet.forEach(function(nodeId){xPosSum+=xCoords[nodeIndexes.get(nodeId)],yPosSum+=yCoords[nodeIndexes.get(nodeId)]}),{x:xPosSum/nodeIdSet.size,y:yPosSum/nodeIdSet.size}},"calculateAvgPosition"),findAppropriatePositionForRelativePlacement=__name(function(graph,direction,fixedNodes2,dummyPositions,componentSources){function setUnion(setA,setB){var union2=new Set(setA),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=setB[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var elem=_step.value;union2.add(elem)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return union2}__name(setUnion,"setUnion");var inDegrees=new Map;graph.forEach(function(value2,key){inDegrees.set(key,0)}),graph.forEach(function(value2,key){value2.forEach(function(adjacent){inDegrees.set(adjacent.id,inDegrees.get(adjacent.id)+1)})});var positionMap=new Map,pastMap=new Map,queue=new LinkedList;inDegrees.forEach(function(value2,key){0==value2?(queue.push(key),fixedNodes2||("horizontal"==direction?positionMap.set(key,nodeIndexes.has(key)?xCoords[nodeIndexes.get(key)]:dummyPositions.get(key)):positionMap.set(key,nodeIndexes.has(key)?yCoords[nodeIndexes.get(key)]:dummyPositions.get(key)))):positionMap.set(key,Number.NEGATIVE_INFINITY),fixedNodes2&&pastMap.set(key,new Set([key]))}),fixedNodes2&&componentSources.forEach(function(component2){var fixedIds=[];if(component2.forEach(function(nodeId){fixedNodes2.has(nodeId)&&fixedIds.push(nodeId)}),fixedIds.length>0){var position5=0;fixedIds.forEach(function(fixedId){"horizontal"==direction?(positionMap.set(fixedId,nodeIndexes.has(fixedId)?xCoords[nodeIndexes.get(fixedId)]:dummyPositions.get(fixedId)),position5+=positionMap.get(fixedId)):(positionMap.set(fixedId,nodeIndexes.has(fixedId)?yCoords[nodeIndexes.get(fixedId)]:dummyPositions.get(fixedId)),position5+=positionMap.get(fixedId))}),position5/=fixedIds.length,component2.forEach(function(nodeId){fixedNodes2.has(nodeId)||positionMap.set(nodeId,position5)})}else{var _position=0;component2.forEach(function(nodeId){_position+="horizontal"==direction?nodeIndexes.has(nodeId)?xCoords[nodeIndexes.get(nodeId)]:dummyPositions.get(nodeId):nodeIndexes.has(nodeId)?yCoords[nodeIndexes.get(nodeId)]:dummyPositions.get(nodeId)}),_position/=component2.length,component2.forEach(function(nodeId){positionMap.set(nodeId,_position)})}});for(var _loop=__name(function(){var currentNode=queue.shift();graph.get(currentNode).forEach(function(neighbor){if(positionMap.get(neighbor.id)<positionMap.get(currentNode)+neighbor.gap)if(fixedNodes2&&fixedNodes2.has(neighbor.id)){var fixedPosition=void 0;if(fixedPosition="horizontal"==direction?nodeIndexes.has(neighbor.id)?xCoords[nodeIndexes.get(neighbor.id)]:dummyPositions.get(neighbor.id):nodeIndexes.has(neighbor.id)?yCoords[nodeIndexes.get(neighbor.id)]:dummyPositions.get(neighbor.id),positionMap.set(neighbor.id,fixedPosition),fixedPosition<positionMap.get(currentNode)+neighbor.gap){var diff2=positionMap.get(currentNode)+neighbor.gap-fixedPosition;pastMap.get(currentNode).forEach(function(nodeId){positionMap.set(nodeId,positionMap.get(nodeId)-diff2)})}}else positionMap.set(neighbor.id,positionMap.get(currentNode)+neighbor.gap);inDegrees.set(neighbor.id,inDegrees.get(neighbor.id)-1),0==inDegrees.get(neighbor.id)&&queue.push(neighbor.id),fixedNodes2&&pastMap.set(neighbor.id,setUnion(pastMap.get(currentNode),pastMap.get(neighbor.id)))})},"_loop");0!=queue.length;)_loop();if(fixedNodes2){var sinkNodes=new Set;graph.forEach(function(value2,key){0==value2.length&&sinkNodes.add(key)});var _components=[];pastMap.forEach(function(value2,key){if(sinkNodes.has(key)){var isFixedComponent=!1,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=value2[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var nodeId=_step2.value;fixedNodes2.has(nodeId)&&(isFixedComponent=!0)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}if(!isFixedComponent){var isExist=!1,existAt=void 0;_components.forEach(function(component2,index2){component2.has([].concat(_toConsumableArray2(value2))[0])&&(isExist=!0,existAt=index2)}),isExist?value2.forEach(function(ele){_components[existAt].add(ele)}):_components.push(new Set(value2))}}}),_components.forEach(function(component2,index2){var minBefore=Number.POSITIVE_INFINITY,minAfter=Number.POSITIVE_INFINITY,maxBefore=Number.NEGATIVE_INFINITY,maxAfter=Number.NEGATIVE_INFINITY,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=component2[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var nodeId=_step3.value,posBefore=void 0;posBefore="horizontal"==direction?nodeIndexes.has(nodeId)?xCoords[nodeIndexes.get(nodeId)]:dummyPositions.get(nodeId):nodeIndexes.has(nodeId)?yCoords[nodeIndexes.get(nodeId)]:dummyPositions.get(nodeId);var posAfter=positionMap.get(nodeId);posBefore<minBefore&&(minBefore=posBefore),posBefore>maxBefore&&(maxBefore=posBefore),posAfter<minAfter&&(minAfter=posAfter),posAfter>maxAfter&&(maxAfter=posAfter)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var diff2=(minBefore+maxBefore)/2-(minAfter+maxAfter)/2,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=component2[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _nodeId=_step4.value;positionMap.set(_nodeId,positionMap.get(_nodeId)+diff2)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}})}return positionMap},"findAppropriatePositionForRelativePlacement"),applyReflectionForRelativePlacement=__name(function(relativePlacementConstraints){var reflectOnY=0,notReflectOnY=0,reflectOnX=0,notReflectOnX=0;if(relativePlacementConstraints.forEach(function(constraint){constraint.left?xCoords[nodeIndexes.get(constraint.left)]-xCoords[nodeIndexes.get(constraint.right)]>=0?reflectOnY++:notReflectOnY++:yCoords[nodeIndexes.get(constraint.top)]-yCoords[nodeIndexes.get(constraint.bottom)]>=0?reflectOnX++:notReflectOnX++}),reflectOnY>notReflectOnY&&reflectOnX>notReflectOnX)for(var _i=0;_i<nodeIndexes.size;_i++)xCoords[_i]=-1*xCoords[_i],yCoords[_i]=-1*yCoords[_i];else if(reflectOnY>notReflectOnY)for(var _i2=0;_i2<nodeIndexes.size;_i2++)xCoords[_i2]=-1*xCoords[_i2];else if(reflectOnX>notReflectOnX)for(var _i3=0;_i3<nodeIndexes.size;_i3++)yCoords[_i3]=-1*yCoords[_i3]},"applyReflectionForRelativePlacement"),findComponents=__name(function(graph){var components4=[],queue=new LinkedList,visited=new Set,count2=0;return graph.forEach(function(value2,key){if(!visited.has(key)){components4[count2]=[];var _currentNode=key;for(queue.push(_currentNode),visited.add(_currentNode),components4[count2].push(_currentNode);0!=queue.length;){_currentNode=queue.shift(),graph.get(_currentNode).forEach(function(neighbor){visited.has(neighbor.id)||(queue.push(neighbor.id),visited.add(neighbor.id),components4[count2].push(neighbor.id))})}count2++}}),components4},"findComponents"),dagToUndirected=__name(function(dag2){var undirected=new Map;return dag2.forEach(function(value2,key){undirected.set(key,[])}),dag2.forEach(function(value2,key){value2.forEach(function(adjacent){undirected.get(key).push(adjacent),undirected.get(adjacent.id).push({id:key,gap:adjacent.gap,direction:adjacent.direction})})}),undirected},"dagToUndirected"),dagToReversed=__name(function(dag2){var reversed=new Map;return dag2.forEach(function(value2,key){reversed.set(key,[])}),dag2.forEach(function(value2,key){value2.forEach(function(adjacent){reversed.get(adjacent.id).push({id:key,gap:adjacent.gap,direction:adjacent.direction})})}),reversed},"dagToReversed"),targetMatrix=[],sourceMatrix=[],standardTransformation=!1,reflectionType=!1,fixedNodes=new Set,dag=new Map,dagUndirected=new Map,components3=[];if(constraints.fixedNodeConstraint&&constraints.fixedNodeConstraint.forEach(function(nodeData2){fixedNodes.add(nodeData2.nodeId)}),constraints.relativePlacementConstraint&&(constraints.relativePlacementConstraint.forEach(function(constraint){constraint.left?(dag.has(constraint.left)?dag.get(constraint.left).push({id:constraint.right,gap:constraint.gap,direction:"horizontal"}):dag.set(constraint.left,[{id:constraint.right,gap:constraint.gap,direction:"horizontal"}]),dag.has(constraint.right)||dag.set(constraint.right,[])):(dag.has(constraint.top)?dag.get(constraint.top).push({id:constraint.bottom,gap:constraint.gap,direction:"vertical"}):dag.set(constraint.top,[{id:constraint.bottom,gap:constraint.gap,direction:"vertical"}]),dag.has(constraint.bottom)||dag.set(constraint.bottom,[]))}),dagUndirected=dagToUndirected(dag),components3=findComponents(dagUndirected)),CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING){if(constraints.fixedNodeConstraint&&constraints.fixedNodeConstraint.length>1)constraints.fixedNodeConstraint.forEach(function(nodeData2,i3){targetMatrix[i3]=[nodeData2.position.x,nodeData2.position.y],sourceMatrix[i3]=[xCoords[nodeIndexes.get(nodeData2.nodeId)],yCoords[nodeIndexes.get(nodeData2.nodeId)]]}),standardTransformation=!0;else if(constraints.alignmentConstraint)!function(){var count2=0;if(constraints.alignmentConstraint.vertical){for(var verticalAlign=constraints.alignmentConstraint.vertical,_loop2=__name(function(_i42){var alignmentSet=new Set;verticalAlign[_i42].forEach(function(nodeId){alignmentSet.add(nodeId)});var intersection4=new Set([].concat(_toConsumableArray2(alignmentSet)).filter(function(x5){return fixedNodes.has(x5)})),xPos=void 0;xPos=intersection4.size>0?xCoords[nodeIndexes.get(intersection4.values().next().value)]:calculateAvgPosition(alignmentSet).x,verticalAlign[_i42].forEach(function(nodeId){targetMatrix[count2]=[xPos,yCoords[nodeIndexes.get(nodeId)]],sourceMatrix[count2]=[xCoords[nodeIndexes.get(nodeId)],yCoords[nodeIndexes.get(nodeId)]],count2++})},"_loop2"),_i4=0;_i4<verticalAlign.length;_i4++)_loop2(_i4);standardTransformation=!0}if(constraints.alignmentConstraint.horizontal){for(var horizontalAlign=constraints.alignmentConstraint.horizontal,_loop3=__name(function(_i52){var alignmentSet=new Set;horizontalAlign[_i52].forEach(function(nodeId){alignmentSet.add(nodeId)});var intersection4=new Set([].concat(_toConsumableArray2(alignmentSet)).filter(function(x5){return fixedNodes.has(x5)})),yPos=void 0;yPos=intersection4.size>0?xCoords[nodeIndexes.get(intersection4.values().next().value)]:calculateAvgPosition(alignmentSet).y,horizontalAlign[_i52].forEach(function(nodeId){targetMatrix[count2]=[xCoords[nodeIndexes.get(nodeId)],yPos],sourceMatrix[count2]=[xCoords[nodeIndexes.get(nodeId)],yCoords[nodeIndexes.get(nodeId)]],count2++})},"_loop3"),_i5=0;_i5<horizontalAlign.length;_i5++)_loop3(_i5);standardTransformation=!0}constraints.relativePlacementConstraint&&(reflectionType=!0)}();else if(constraints.relativePlacementConstraint){for(var largestComponentSize=0,largestComponentIndex=0,_i6=0;_i6<components3.length;_i6++)components3[_i6].length>largestComponentSize&&(largestComponentSize=components3[_i6].length,largestComponentIndex=_i6);if(largestComponentSize<dagUndirected.size/2)applyReflectionForRelativePlacement(constraints.relativePlacementConstraint),standardTransformation=!1,reflectionType=!1;else{var subGraphOnHorizontal=new Map,subGraphOnVertical=new Map,constraintsInlargestComponent=[];components3[largestComponentIndex].forEach(function(nodeId){dag.get(nodeId).forEach(function(adjacent){"horizontal"==adjacent.direction?(subGraphOnHorizontal.has(nodeId)?subGraphOnHorizontal.get(nodeId).push(adjacent):subGraphOnHorizontal.set(nodeId,[adjacent]),subGraphOnHorizontal.has(adjacent.id)||subGraphOnHorizontal.set(adjacent.id,[]),constraintsInlargestComponent.push({left:nodeId,right:adjacent.id})):(subGraphOnVertical.has(nodeId)?subGraphOnVertical.get(nodeId).push(adjacent):subGraphOnVertical.set(nodeId,[adjacent]),subGraphOnVertical.has(adjacent.id)||subGraphOnVertical.set(adjacent.id,[]),constraintsInlargestComponent.push({top:nodeId,bottom:adjacent.id}))})}),applyReflectionForRelativePlacement(constraintsInlargestComponent),reflectionType=!1;var positionMapHorizontal=findAppropriatePositionForRelativePlacement(subGraphOnHorizontal,"horizontal"),positionMapVertical=findAppropriatePositionForRelativePlacement(subGraphOnVertical,"vertical");components3[largestComponentIndex].forEach(function(nodeId,i3){sourceMatrix[i3]=[xCoords[nodeIndexes.get(nodeId)],yCoords[nodeIndexes.get(nodeId)]],targetMatrix[i3]=[],positionMapHorizontal.has(nodeId)?targetMatrix[i3][0]=positionMapHorizontal.get(nodeId):targetMatrix[i3][0]=xCoords[nodeIndexes.get(nodeId)],positionMapVertical.has(nodeId)?targetMatrix[i3][1]=positionMapVertical.get(nodeId):targetMatrix[i3][1]=yCoords[nodeIndexes.get(nodeId)]}),standardTransformation=!0}}if(standardTransformation){for(var transformationMatrix,targetMatrixTranspose=Matrix.transpose(targetMatrix),sourceMatrixTranspose=Matrix.transpose(sourceMatrix),_i7=0;_i7<targetMatrixTranspose.length;_i7++)targetMatrixTranspose[_i7]=Matrix.multGamma(targetMatrixTranspose[_i7]),sourceMatrixTranspose[_i7]=Matrix.multGamma(sourceMatrixTranspose[_i7]);var tempMatrix=Matrix.multMat(targetMatrixTranspose,Matrix.transpose(sourceMatrixTranspose)),SVDResult=SVD.svd(tempMatrix);transformationMatrix=Matrix.multMat(SVDResult.V,Matrix.transpose(SVDResult.U));for(var _i8=0;_i8<nodeIndexes.size;_i8++){var temp1=[xCoords[_i8],yCoords[_i8]],temp2=[transformationMatrix[0][0],transformationMatrix[1][0]],temp3=[transformationMatrix[0][1],transformationMatrix[1][1]];xCoords[_i8]=Matrix.dotProduct(temp1,temp2),yCoords[_i8]=Matrix.dotProduct(temp1,temp3)}reflectionType&&applyReflectionForRelativePlacement(constraints.relativePlacementConstraint)}}if(CoSEConstants.ENFORCE_CONSTRAINTS){if(constraints.fixedNodeConstraint&&constraints.fixedNodeConstraint.length>0){var translationAmount={x:0,y:0};constraints.fixedNodeConstraint.forEach(function(nodeData2,i3){var posInTheory={x:xCoords[nodeIndexes.get(nodeData2.nodeId)],y:yCoords[nodeIndexes.get(nodeData2.nodeId)]},posDesired=nodeData2.position,posDiff=calculatePositionDiff(posDesired,posInTheory);translationAmount.x+=posDiff.x,translationAmount.y+=posDiff.y}),translationAmount.x/=constraints.fixedNodeConstraint.length,translationAmount.y/=constraints.fixedNodeConstraint.length,xCoords.forEach(function(value2,i3){xCoords[i3]+=translationAmount.x}),yCoords.forEach(function(value2,i3){yCoords[i3]+=translationAmount.y}),constraints.fixedNodeConstraint.forEach(function(nodeData2){xCoords[nodeIndexes.get(nodeData2.nodeId)]=nodeData2.position.x,yCoords[nodeIndexes.get(nodeData2.nodeId)]=nodeData2.position.y})}if(constraints.alignmentConstraint){if(constraints.alignmentConstraint.vertical)for(var xAlign=constraints.alignmentConstraint.vertical,_loop4=__name(function(_i92){var alignmentSet=new Set;xAlign[_i92].forEach(function(nodeId){alignmentSet.add(nodeId)});var intersection4=new Set([].concat(_toConsumableArray2(alignmentSet)).filter(function(x5){return fixedNodes.has(x5)})),xPos=void 0;xPos=intersection4.size>0?xCoords[nodeIndexes.get(intersection4.values().next().value)]:calculateAvgPosition(alignmentSet).x,alignmentSet.forEach(function(nodeId){fixedNodes.has(nodeId)||(xCoords[nodeIndexes.get(nodeId)]=xPos)})},"_loop4"),_i9=0;_i9<xAlign.length;_i9++)_loop4(_i9);if(constraints.alignmentConstraint.horizontal)for(var yAlign=constraints.alignmentConstraint.horizontal,_loop5=__name(function(_i102){var alignmentSet=new Set;yAlign[_i102].forEach(function(nodeId){alignmentSet.add(nodeId)});var intersection4=new Set([].concat(_toConsumableArray2(alignmentSet)).filter(function(x5){return fixedNodes.has(x5)})),yPos=void 0;yPos=intersection4.size>0?yCoords[nodeIndexes.get(intersection4.values().next().value)]:calculateAvgPosition(alignmentSet).y,alignmentSet.forEach(function(nodeId){fixedNodes.has(nodeId)||(yCoords[nodeIndexes.get(nodeId)]=yPos)})},"_loop5"),_i10=0;_i10<yAlign.length;_i10++)_loop5(_i10)}constraints.relativePlacementConstraint&&function(){var nodeToDummyForVerticalAlignment=new Map,nodeToDummyForHorizontalAlignment=new Map,dummyToNodeForVerticalAlignment=new Map,dummyToNodeForHorizontalAlignment=new Map,dummyPositionsForVerticalAlignment=new Map,dummyPositionsForHorizontalAlignment=new Map,fixedNodesOnHorizontal=new Set,fixedNodesOnVertical=new Set;if(fixedNodes.forEach(function(nodeId2){fixedNodesOnHorizontal.add(nodeId2),fixedNodesOnVertical.add(nodeId2)}),constraints.alignmentConstraint){if(constraints.alignmentConstraint.vertical)for(var verticalAlignment2=constraints.alignmentConstraint.vertical,_loop6=__name(function(_i112){dummyToNodeForVerticalAlignment.set("dummy"+_i112,[]),verticalAlignment2[_i112].forEach(function(nodeId2){nodeToDummyForVerticalAlignment.set(nodeId2,"dummy"+_i112),dummyToNodeForVerticalAlignment.get("dummy"+_i112).push(nodeId2),fixedNodes.has(nodeId2)&&fixedNodesOnHorizontal.add("dummy"+_i112)}),dummyPositionsForVerticalAlignment.set("dummy"+_i112,xCoords[nodeIndexes.get(verticalAlignment2[_i112][0])])},"_loop6"),_i11=0;_i11<verticalAlignment2.length;_i11++)_loop6(_i11);if(constraints.alignmentConstraint.horizontal)for(var horizontalAlignment=constraints.alignmentConstraint.horizontal,_loop7=__name(function(_i122){dummyToNodeForHorizontalAlignment.set("dummy"+_i122,[]),horizontalAlignment[_i122].forEach(function(nodeId2){nodeToDummyForHorizontalAlignment.set(nodeId2,"dummy"+_i122),dummyToNodeForHorizontalAlignment.get("dummy"+_i122).push(nodeId2),fixedNodes.has(nodeId2)&&fixedNodesOnVertical.add("dummy"+_i122)}),dummyPositionsForHorizontalAlignment.set("dummy"+_i122,yCoords[nodeIndexes.get(horizontalAlignment[_i122][0])])},"_loop7"),_i12=0;_i12<horizontalAlignment.length;_i12++)_loop7(_i12)}var dagOnHorizontal=new Map,dagOnVertical=new Map,_loop8=__name(function(nodeId2){dag.get(nodeId2).forEach(function(adjacent){var sourceId=void 0,targetNode=void 0;"horizontal"==adjacent.direction?(sourceId=nodeToDummyForVerticalAlignment.get(nodeId2)?nodeToDummyForVerticalAlignment.get(nodeId2):nodeId2,targetNode=nodeToDummyForVerticalAlignment.get(adjacent.id)?{id:nodeToDummyForVerticalAlignment.get(adjacent.id),gap:adjacent.gap,direction:adjacent.direction}:adjacent,dagOnHorizontal.has(sourceId)?dagOnHorizontal.get(sourceId).push(targetNode):dagOnHorizontal.set(sourceId,[targetNode]),dagOnHorizontal.has(targetNode.id)||dagOnHorizontal.set(targetNode.id,[])):(sourceId=nodeToDummyForHorizontalAlignment.get(nodeId2)?nodeToDummyForHorizontalAlignment.get(nodeId2):nodeId2,targetNode=nodeToDummyForHorizontalAlignment.get(adjacent.id)?{id:nodeToDummyForHorizontalAlignment.get(adjacent.id),gap:adjacent.gap,direction:adjacent.direction}:adjacent,dagOnVertical.has(sourceId)?dagOnVertical.get(sourceId).push(targetNode):dagOnVertical.set(sourceId,[targetNode]),dagOnVertical.has(targetNode.id)||dagOnVertical.set(targetNode.id,[]))})},"_loop8"),_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=dag.keys()[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_loop8(_step5.value)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}var undirectedOnHorizontal=dagToUndirected(dagOnHorizontal),undirectedOnVertical=dagToUndirected(dagOnVertical),componentsOnHorizontal=findComponents(undirectedOnHorizontal),componentsOnVertical=findComponents(undirectedOnVertical),reversedDagOnHorizontal=dagToReversed(dagOnHorizontal),reversedDagOnVertical=dagToReversed(dagOnVertical),componentSourcesOnHorizontal=[],componentSourcesOnVertical=[];componentsOnHorizontal.forEach(function(component2,index2){componentSourcesOnHorizontal[index2]=[],component2.forEach(function(nodeId2){0==reversedDagOnHorizontal.get(nodeId2).length&&componentSourcesOnHorizontal[index2].push(nodeId2)})}),componentsOnVertical.forEach(function(component2,index2){componentSourcesOnVertical[index2]=[],component2.forEach(function(nodeId2){0==reversedDagOnVertical.get(nodeId2).length&&componentSourcesOnVertical[index2].push(nodeId2)})});var positionMapHorizontal2=findAppropriatePositionForRelativePlacement(dagOnHorizontal,"horizontal",fixedNodesOnHorizontal,dummyPositionsForVerticalAlignment,componentSourcesOnHorizontal),positionMapVertical2=findAppropriatePositionForRelativePlacement(dagOnVertical,"vertical",fixedNodesOnVertical,dummyPositionsForHorizontalAlignment,componentSourcesOnVertical),_loop9=__name(function(key2){dummyToNodeForVerticalAlignment.get(key2)?dummyToNodeForVerticalAlignment.get(key2).forEach(function(nodeId2){xCoords[nodeIndexes.get(nodeId2)]=positionMapHorizontal2.get(key2)}):xCoords[nodeIndexes.get(key2)]=positionMapHorizontal2.get(key2)},"_loop9"),_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=positionMapHorizontal2.keys()[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){_loop9(_step6.value)}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}var _loop10=__name(function(key2){dummyToNodeForHorizontalAlignment.get(key2)?dummyToNodeForHorizontalAlignment.get(key2).forEach(function(nodeId2){yCoords[nodeIndexes.get(nodeId2)]=positionMapVertical2.get(key2)}):yCoords[nodeIndexes.get(key2)]=positionMapVertical2.get(key2)},"_loop10"),_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=positionMapVertical2.keys()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_loop10(_step7.value)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}()}for(var _i13=0;_i13<allNodes.length;_i13++){var _node=allNodes[_i13];null==_node.getChild()&&_node.setCenter(xCoords[nodeIndexes.get(_node.id)],yCoords[nodeIndexes.get(_node.id)])}},module3.exports=ConstraintHandler},551:module3=>{module3.exports=__WEBPACK_EXTERNAL_MODULE__551__}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module3=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module3,module3.exports,__webpack_require__),module3.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__(45)})()})}}),require_cytoscape_fcose=__commonJS({"../../node_modules/.pnpm/cytoscape-fcose@2.2.0_cytoscape@3.33.1/node_modules/cytoscape-fcose/cytoscape-fcose.js"(exports2,module2){__name(function(root3,factory){"object"==typeof exports2&&"object"==typeof module2?module2.exports=factory(require_cose_base2()):"function"==typeof define&&define.amd?define(["cose-base"],factory):"object"==typeof exports2?exports2.cytoscapeFcose=factory(require_cose_base2()):root3.cytoscapeFcose=factory(root3.coseBase)},"webpackUniversalModuleDefinition")(exports2,function(__WEBPACK_EXTERNAL_MODULE__140__){return(()=>{var __webpack_modules__={658:module3=>{module3.exports=null!=Object.assign?Object.assign.bind(Object):function(tgt){for(var _len=arguments.length,srcs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)srcs[_key-1]=arguments[_key];return srcs.forEach(function(src){Object.keys(src).forEach(function(k2){return tgt[k2]=src[k2]})}),tgt}},548:(module3,__unused_webpack_exports,__webpack_require__2)=>{var _slicedToArray2=function(){function sliceIterator(arr,i2){var _arr=[],_n=!0,_d=!1,_e2=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i2||_arr.length!==i2);_n=!0);}catch(err){_d=!0,_e2=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e2}}return _arr}return __name(sliceIterator,"sliceIterator"),function(arr,i2){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i2);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),LinkedList=__webpack_require__2(140).layoutBase.LinkedList,auxiliary={getTopMostNodes:function(nodes5){for(var nodesMap2={},i2=0;i2<nodes5.length;i2++)nodesMap2[nodes5[i2].id()]=!0;return nodes5.filter(function(ele,i3){"number"==typeof ele&&(ele=i3);for(var parent4=ele.parent()[0];null!=parent4;){if(nodesMap2[parent4.id()])return!1;parent4=parent4.parent()[0]}return!0})},connectComponents:function(cy,eles,topMostNodes,dummyNodes){var queue=new LinkedList,visited=new Set,visitedTopMostNodes=[],currentNeighbor=void 0,minDegreeNode=void 0,minDegree=void 0,isConnected=!1,count2=1,nodesConnectedToDummy=[],components3=[],_loop=__name(function(){var cmpt=cy.collection();components3.push(cmpt);var currentNode=topMostNodes[0],childrenOfCurrentNode=cy.collection();childrenOfCurrentNode.merge(currentNode).merge(currentNode.descendants().intersection(eles)),visitedTopMostNodes.push(currentNode),childrenOfCurrentNode.forEach(function(node2){queue.push(node2),visited.add(node2),cmpt.merge(node2)});for(var _loop22=__name(function(){currentNode=queue.shift();var neighborNodes=cy.collection();currentNode.neighborhood().nodes().forEach(function(node2){eles.intersection(currentNode.edgesWith(node2)).length>0&&neighborNodes.merge(node2)});for(var i2=0;i2<neighborNodes.length;i2++){var neighborNode=neighborNodes[i2];if(null!=(currentNeighbor=topMostNodes.intersection(neighborNode.union(neighborNode.ancestors())))&&!visited.has(currentNeighbor[0]))currentNeighbor.union(currentNeighbor.descendants()).forEach(function(node2){queue.push(node2),visited.add(node2),cmpt.merge(node2),topMostNodes.has(node2)&&visitedTopMostNodes.push(node2)})}},"_loop2");0!=queue.length;)_loop22();if(cmpt.forEach(function(node2){eles.intersection(node2.connectedEdges()).forEach(function(e3){cmpt.has(e3.source())&&cmpt.has(e3.target())&&cmpt.merge(e3)})}),visitedTopMostNodes.length==topMostNodes.length&&(isConnected=!0),!isConnected||isConnected&&count2>1){minDegreeNode=visitedTopMostNodes[0],minDegree=minDegreeNode.connectedEdges().length,visitedTopMostNodes.forEach(function(node2){node2.connectedEdges().length<minDegree&&(minDegree=node2.connectedEdges().length,minDegreeNode=node2)}),nodesConnectedToDummy.push(minDegreeNode.id());var temp=cy.collection();temp.merge(visitedTopMostNodes[0]),visitedTopMostNodes.forEach(function(node2){temp.merge(node2)}),visitedTopMostNodes=[],topMostNodes=topMostNodes.difference(temp),count2++}},"_loop");do{_loop()}while(!isConnected);return dummyNodes&&nodesConnectedToDummy.length>0&&dummyNodes.set("dummy"+(dummyNodes.size+1),nodesConnectedToDummy),components3},relocateComponent:function(originalCenter,componentResult,options2){if(!options2.fixedNodeConstraint){var minXCoord=Number.POSITIVE_INFINITY,maxXCoord=Number.NEGATIVE_INFINITY,minYCoord=Number.POSITIVE_INFINITY,maxYCoord=Number.NEGATIVE_INFINITY;if("draft"==options2.quality){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=componentResult.nodeIndexes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=_slicedToArray2(_ref,2),key=_ref2[0],value2=_ref2[1],cyNode=options2.cy.getElementById(key);if(cyNode){var nodeBB=cyNode.boundingBox(),leftX=componentResult.xCoords[value2]-nodeBB.w/2,rightX=componentResult.xCoords[value2]+nodeBB.w/2,topY=componentResult.yCoords[value2]-nodeBB.h/2,bottomY=componentResult.yCoords[value2]+nodeBB.h/2;leftX<minXCoord&&(minXCoord=leftX),rightX>maxXCoord&&(maxXCoord=rightX),topY<minYCoord&&(minYCoord=topY),bottomY>maxYCoord&&(maxYCoord=bottomY)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var diffOnX=originalCenter.x-(maxXCoord+minXCoord)/2,diffOnY=originalCenter.y-(maxYCoord+minYCoord)/2;componentResult.xCoords=componentResult.xCoords.map(function(x5){return x5+diffOnX}),componentResult.yCoords=componentResult.yCoords.map(function(y6){return y6+diffOnY})}else{Object.keys(componentResult).forEach(function(item){var node2=componentResult[item],leftX2=node2.getRect().x,rightX2=node2.getRect().x+node2.getRect().width,topY2=node2.getRect().y,bottomY2=node2.getRect().y+node2.getRect().height;leftX2<minXCoord&&(minXCoord=leftX2),rightX2>maxXCoord&&(maxXCoord=rightX2),topY2<minYCoord&&(minYCoord=topY2),bottomY2>maxYCoord&&(maxYCoord=bottomY2)});var _diffOnX=originalCenter.x-(maxXCoord+minXCoord)/2,_diffOnY=originalCenter.y-(maxYCoord+minYCoord)/2;Object.keys(componentResult).forEach(function(item){var node2=componentResult[item];node2.setCenter(node2.getCenterX()+_diffOnX,node2.getCenterY()+_diffOnY)})}}},calcBoundingBox:function(parentNode,xCoords,yCoords,nodeIndexes){for(var left3=Number.MAX_SAFE_INTEGER,right3=Number.MIN_SAFE_INTEGER,top2=Number.MAX_SAFE_INTEGER,bottom2=Number.MIN_SAFE_INTEGER,nodeLeft=void 0,nodeRight=void 0,nodeTop=void 0,nodeBottom=void 0,nodes5=parentNode.descendants().not(":parent"),s2=nodes5.length,i2=0;i2<s2;i2++){var node2=nodes5[i2];left3>(nodeLeft=xCoords[nodeIndexes.get(node2.id())]-node2.width()/2)&&(left3=nodeLeft),right3<(nodeRight=xCoords[nodeIndexes.get(node2.id())]+node2.width()/2)&&(right3=nodeRight),top2>(nodeTop=yCoords[nodeIndexes.get(node2.id())]-node2.height()/2)&&(top2=nodeTop),bottom2<(nodeBottom=yCoords[nodeIndexes.get(node2.id())]+node2.height()/2)&&(bottom2=nodeBottom)}var boundingBox3={};return boundingBox3.topLeftX=left3,boundingBox3.topLeftY=top2,boundingBox3.width=right3-left3,boundingBox3.height=bottom2-top2,boundingBox3},calcParentsWithoutChildren:function(cy,eles){var parentsWithoutChildren=cy.collection();return eles.nodes(":parent").forEach(function(parent4){var check=!1;parent4.children().forEach(function(child){"none"!=child.css("display")&&(check=!0)}),check||parentsWithoutChildren.merge(parent4)}),parentsWithoutChildren}};module3.exports=auxiliary},816:(module3,__unused_webpack_exports,__webpack_require__2)=>{var aux=__webpack_require__2(548),CoSELayout=__webpack_require__2(140).CoSELayout,CoSENode=__webpack_require__2(140).CoSENode,PointD=__webpack_require__2(140).layoutBase.PointD,DimensionD2=__webpack_require__2(140).layoutBase.DimensionD,LayoutConstants=__webpack_require__2(140).layoutBase.LayoutConstants,FDLayoutConstants=__webpack_require__2(140).layoutBase.FDLayoutConstants,CoSEConstants=__webpack_require__2(140).CoSEConstants,coseLayout=__name(function(options2,spectralResult){var cy=options2.cy,eles=options2.eles,nodes5=eles.nodes(),edges3=eles.edges(),nodeIndexes=void 0,xCoords=void 0,yCoords=void 0,idToLNode={};options2.randomize&&(nodeIndexes=spectralResult.nodeIndexes,xCoords=spectralResult.xCoords,yCoords=spectralResult.yCoords);var isFn=__name(function(fn3){return"function"==typeof fn3},"isFn"),optFn=__name(function(opt,ele){return isFn(opt)?opt(ele):opt},"optFn"),parentsWithoutChildren=aux.calcParentsWithoutChildren(cy,eles),processChildrenList=__name(function processChildrenList2(parent4,children2,layout6,options3){for(var size4=children2.length,i2=0;i2<size4;i2++){var theChild=children2[i2],children_of_children=null;0==theChild.intersection(parentsWithoutChildren).length&&(children_of_children=theChild.children());var theNode=void 0,dimensions2=theChild.layoutDimensions({nodeDimensionsIncludeLabels:options3.nodeDimensionsIncludeLabels});if(null!=theChild.outerWidth()&&null!=theChild.outerHeight())if(options3.randomize)if(theChild.isParent()){var parentInfo=aux.calcBoundingBox(theChild,xCoords,yCoords,nodeIndexes);theNode=0==theChild.intersection(parentsWithoutChildren).length?parent4.add(new CoSENode(layout6.graphManager,new PointD(parentInfo.topLeftX,parentInfo.topLeftY),new DimensionD2(parentInfo.width,parentInfo.height))):parent4.add(new CoSENode(layout6.graphManager,new PointD(parentInfo.topLeftX,parentInfo.topLeftY),new DimensionD2(parseFloat(dimensions2.w),parseFloat(dimensions2.h))))}else theNode=parent4.add(new CoSENode(layout6.graphManager,new PointD(xCoords[nodeIndexes.get(theChild.id())]-dimensions2.w/2,yCoords[nodeIndexes.get(theChild.id())]-dimensions2.h/2),new DimensionD2(parseFloat(dimensions2.w),parseFloat(dimensions2.h))));else theNode=parent4.add(new CoSENode(layout6.graphManager,new PointD(theChild.position("x")-dimensions2.w/2,theChild.position("y")-dimensions2.h/2),new DimensionD2(parseFloat(dimensions2.w),parseFloat(dimensions2.h))));else theNode=parent4.add(new CoSENode(this.graphManager));if(theNode.id=theChild.data("id"),theNode.nodeRepulsion=optFn(options3.nodeRepulsion,theChild),theNode.paddingLeft=parseInt(theChild.css("padding")),theNode.paddingTop=parseInt(theChild.css("padding")),theNode.paddingRight=parseInt(theChild.css("padding")),theNode.paddingBottom=parseInt(theChild.css("padding")),options3.nodeDimensionsIncludeLabels&&(theNode.labelWidth=theChild.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,theNode.labelHeight=theChild.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,theNode.labelPosVertical=theChild.css("text-valign"),theNode.labelPosHorizontal=theChild.css("text-halign")),idToLNode[theChild.data("id")]=theNode,isNaN(theNode.rect.x)&&(theNode.rect.x=0),isNaN(theNode.rect.y)&&(theNode.rect.y=0),null!=children_of_children&&children_of_children.length>0){processChildrenList2(layout6.getGraphManager().add(layout6.newGraph(),theNode),children_of_children,layout6,options3)}}},"processChildrenList"),processEdges=__name(function(layout6,gm2,edges4){for(var idealLengthTotal=0,edgeCount3=0,i2=0;i2<edges4.length;i2++){var edge=edges4[i2],sourceNode=idToLNode[edge.data("source")],targetNode=idToLNode[edge.data("target")];if(sourceNode&&targetNode&&sourceNode!==targetNode&&0==sourceNode.getEdgesBetween(targetNode).length){var e1=gm2.add(layout6.newEdge(),sourceNode,targetNode);e1.id=edge.id(),e1.idealLength=optFn(options2.idealEdgeLength,edge),e1.edgeElasticity=optFn(options2.edgeElasticity,edge),idealLengthTotal+=e1.idealLength,edgeCount3++}}null!=options2.idealEdgeLength&&(edgeCount3>0?CoSEConstants.DEFAULT_EDGE_LENGTH=FDLayoutConstants.DEFAULT_EDGE_LENGTH=idealLengthTotal/edgeCount3:isFn(options2.idealEdgeLength)?CoSEConstants.DEFAULT_EDGE_LENGTH=FDLayoutConstants.DEFAULT_EDGE_LENGTH=50:CoSEConstants.DEFAULT_EDGE_LENGTH=FDLayoutConstants.DEFAULT_EDGE_LENGTH=options2.idealEdgeLength,CoSEConstants.MIN_REPULSION_DIST=FDLayoutConstants.MIN_REPULSION_DIST=FDLayoutConstants.DEFAULT_EDGE_LENGTH/10,CoSEConstants.DEFAULT_RADIAL_SEPARATION=FDLayoutConstants.DEFAULT_EDGE_LENGTH)},"processEdges"),processConstraints=__name(function(layout6,options3){options3.fixedNodeConstraint&&(layout6.constraints.fixedNodeConstraint=options3.fixedNodeConstraint),options3.alignmentConstraint&&(layout6.constraints.alignmentConstraint=options3.alignmentConstraint),options3.relativePlacementConstraint&&(layout6.constraints.relativePlacementConstraint=options3.relativePlacementConstraint)},"processConstraints");null!=options2.nestingFactor&&(CoSEConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=options2.nestingFactor),null!=options2.gravity&&(CoSEConstants.DEFAULT_GRAVITY_STRENGTH=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=options2.gravity),null!=options2.numIter&&(CoSEConstants.MAX_ITERATIONS=FDLayoutConstants.MAX_ITERATIONS=options2.numIter),null!=options2.gravityRange&&(CoSEConstants.DEFAULT_GRAVITY_RANGE_FACTOR=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=options2.gravityRange),null!=options2.gravityCompound&&(CoSEConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=options2.gravityCompound),null!=options2.gravityRangeCompound&&(CoSEConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=options2.gravityRangeCompound),null!=options2.initialEnergyOnIncremental&&(CoSEConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=options2.initialEnergyOnIncremental),null!=options2.tilingCompareBy&&(CoSEConstants.TILING_COMPARE_BY=options2.tilingCompareBy),"proof"==options2.quality?LayoutConstants.QUALITY=2:LayoutConstants.QUALITY=0,CoSEConstants.NODE_DIMENSIONS_INCLUDE_LABELS=FDLayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=options2.nodeDimensionsIncludeLabels,CoSEConstants.DEFAULT_INCREMENTAL=FDLayoutConstants.DEFAULT_INCREMENTAL=LayoutConstants.DEFAULT_INCREMENTAL=!options2.randomize,CoSEConstants.ANIMATE=FDLayoutConstants.ANIMATE=LayoutConstants.ANIMATE=options2.animate,CoSEConstants.TILE=options2.tile,CoSEConstants.TILING_PADDING_VERTICAL="function"==typeof options2.tilingPaddingVertical?options2.tilingPaddingVertical.call():options2.tilingPaddingVertical,CoSEConstants.TILING_PADDING_HORIZONTAL="function"==typeof options2.tilingPaddingHorizontal?options2.tilingPaddingHorizontal.call():options2.tilingPaddingHorizontal,CoSEConstants.DEFAULT_INCREMENTAL=FDLayoutConstants.DEFAULT_INCREMENTAL=LayoutConstants.DEFAULT_INCREMENTAL=!0,CoSEConstants.PURE_INCREMENTAL=!options2.randomize,LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES=options2.uniformNodeDimensions,"transformed"==options2.step&&(CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,CoSEConstants.ENFORCE_CONSTRAINTS=!1,CoSEConstants.APPLY_LAYOUT=!1),"enforced"==options2.step&&(CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,CoSEConstants.ENFORCE_CONSTRAINTS=!0,CoSEConstants.APPLY_LAYOUT=!1),"cose"==options2.step&&(CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,CoSEConstants.ENFORCE_CONSTRAINTS=!1,CoSEConstants.APPLY_LAYOUT=!0),"all"==options2.step&&(options2.randomize?CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:CoSEConstants.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,CoSEConstants.ENFORCE_CONSTRAINTS=!0,CoSEConstants.APPLY_LAYOUT=!0),options2.fixedNodeConstraint||options2.alignmentConstraint||options2.relativePlacementConstraint?CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL=!1:CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL=!0;var coseLayout3=new CoSELayout,gm=coseLayout3.newGraphManager();return processChildrenList(gm.addRoot(),aux.getTopMostNodes(nodes5),coseLayout3,options2),processEdges(coseLayout3,gm,edges3),processConstraints(coseLayout3,options2),coseLayout3.runLayout(),idToLNode},"coseLayout");module3.exports={coseLayout:coseLayout}},212:(module3,__unused_webpack_exports,__webpack_require__2)=>{var _createClass2=function(){function defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return __name(defineProperties,"defineProperties"),function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck2(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck2,"_classCallCheck");var assign7=__webpack_require__2(658),aux=__webpack_require__2(548),spectralLayout=__webpack_require__2(657).spectralLayout,coseLayout=__webpack_require__2(816).coseLayout,defaults4=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:__name(function(node2){return 4500},"nodeRepulsion"),idealEdgeLength:__name(function(edge){return 50},"idealEdgeLength"),edgeElasticity:__name(function(edge){return.45},"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:__name(function(){},"ready"),stop:__name(function(){},"stop")}),Layout2=function(){function Layout3(options2){_classCallCheck2(this,Layout3),this.options=assign7({},defaults4,options2)}return __name(Layout3,"Layout"),_createClass2(Layout3,[{key:"run",value:__name(function(){var options2=this.options,cy=options2.cy,eles=options2.eles,spectralResult=[],coseResult=[],components3=void 0,componentCenters=[];!options2.fixedNodeConstraint||Array.isArray(options2.fixedNodeConstraint)&&0!=options2.fixedNodeConstraint.length||(options2.fixedNodeConstraint=void 0),options2.alignmentConstraint&&(!options2.alignmentConstraint.vertical||Array.isArray(options2.alignmentConstraint.vertical)&&0!=options2.alignmentConstraint.vertical.length||(options2.alignmentConstraint.vertical=void 0),!options2.alignmentConstraint.horizontal||Array.isArray(options2.alignmentConstraint.horizontal)&&0!=options2.alignmentConstraint.horizontal.length||(options2.alignmentConstraint.horizontal=void 0)),!options2.relativePlacementConstraint||Array.isArray(options2.relativePlacementConstraint)&&0!=options2.relativePlacementConstraint.length||(options2.relativePlacementConstraint=void 0),(options2.fixedNodeConstraint||options2.alignmentConstraint||options2.relativePlacementConstraint)&&(options2.tile=!1,options2.packComponents=!1);var layUtil=void 0,packingEnabled=!1;if(cy.layoutUtilities&&options2.packComponents&&((layUtil=cy.layoutUtilities("get"))||(layUtil=cy.layoutUtilities()),packingEnabled=!0),eles.nodes().length>0)if(packingEnabled){var topMostNodes=aux.getTopMostNodes(options2.eles.nodes());if((components3=aux.connectComponents(cy,options2.eles,topMostNodes)).forEach(function(component2){var boundingBox4=component2.boundingBox();componentCenters.push({x:boundingBox4.x1+boundingBox4.w/2,y:boundingBox4.y1+boundingBox4.h/2})}),options2.randomize&&components3.forEach(function(component2){options2.eles=component2,spectralResult.push(spectralLayout(options2))}),"default"==options2.quality||"proof"==options2.quality){var toBeTiledNodes=cy.collection();if(options2.tile){var count2=0,tempSpectralResult={nodeIndexes:new Map,xCoords:[],yCoords:[]},indexesToBeDeleted=[];if(components3.forEach(function(component2,index){0==component2.edges().length&&(component2.nodes().forEach(function(node2,i3){toBeTiledNodes.merge(component2.nodes()[i3]),node2.isParent()||(tempSpectralResult.nodeIndexes.set(component2.nodes()[i3].id(),count2++),tempSpectralResult.xCoords.push(component2.nodes()[0].position().x),tempSpectralResult.yCoords.push(component2.nodes()[0].position().y))}),indexesToBeDeleted.push(index))}),toBeTiledNodes.length>1){var _boundingBox=toBeTiledNodes.boundingBox();componentCenters.push({x:_boundingBox.x1+_boundingBox.w/2,y:_boundingBox.y1+_boundingBox.h/2}),components3.push(toBeTiledNodes),spectralResult.push(tempSpectralResult);for(var i2=indexesToBeDeleted.length-1;i2>=0;i2--)components3.splice(indexesToBeDeleted[i2],1),spectralResult.splice(indexesToBeDeleted[i2],1),componentCenters.splice(indexesToBeDeleted[i2],1)}}components3.forEach(function(component2,index){options2.eles=component2,coseResult.push(coseLayout(options2,spectralResult[index])),aux.relocateComponent(componentCenters[index],coseResult[index],options2)})}else components3.forEach(function(component2,index){aux.relocateComponent(componentCenters[index],spectralResult[index],options2)});var componentsEvaluated=new Set;if(components3.length>1){var subgraphs=[],hiddenEles=eles.filter(function(ele){return"none"==ele.css("display")});components3.forEach(function(component2,index){var nodeIndexes2=void 0;if("draft"==options2.quality&&(nodeIndexes2=spectralResult[index].nodeIndexes),component2.nodes().not(hiddenEles).length>0){var subgraph={edges:[],nodes:[]},nodeIndex=void 0;component2.nodes().not(hiddenEles).forEach(function(node2){if("draft"==options2.quality)if(node2.isParent()){var parentInfo=aux.calcBoundingBox(node2,spectralResult[index].xCoords,spectralResult[index].yCoords,nodeIndexes2);subgraph.nodes.push({x:parentInfo.topLeftX,y:parentInfo.topLeftY,width:parentInfo.width,height:parentInfo.height})}else nodeIndex=nodeIndexes2.get(node2.id()),subgraph.nodes.push({x:spectralResult[index].xCoords[nodeIndex]-node2.boundingbox().w/2,y:spectralResult[index].yCoords[nodeIndex]-node2.boundingbox().h/2,width:node2.boundingbox().w,height:node2.boundingbox().h});else coseResult[index][node2.id()]&&subgraph.nodes.push({x:coseResult[index][node2.id()].getLeft(),y:coseResult[index][node2.id()].getTop(),width:coseResult[index][node2.id()].getWidth(),height:coseResult[index][node2.id()].getHeight()})}),component2.edges().forEach(function(edge){var source=edge.source(),target=edge.target();if("none"!=source.css("display")&&"none"!=target.css("display"))if("draft"==options2.quality){var sourceNodeIndex=nodeIndexes2.get(source.id()),targetNodeIndex=nodeIndexes2.get(target.id()),sourceCenter=[],targetCenter=[];if(source.isParent()){var parentInfo=aux.calcBoundingBox(source,spectralResult[index].xCoords,spectralResult[index].yCoords,nodeIndexes2);sourceCenter.push(parentInfo.topLeftX+parentInfo.width/2),sourceCenter.push(parentInfo.topLeftY+parentInfo.height/2)}else sourceCenter.push(spectralResult[index].xCoords[sourceNodeIndex]),sourceCenter.push(spectralResult[index].yCoords[sourceNodeIndex]);if(target.isParent()){var _parentInfo=aux.calcBoundingBox(target,spectralResult[index].xCoords,spectralResult[index].yCoords,nodeIndexes2);targetCenter.push(_parentInfo.topLeftX+_parentInfo.width/2),targetCenter.push(_parentInfo.topLeftY+_parentInfo.height/2)}else targetCenter.push(spectralResult[index].xCoords[targetNodeIndex]),targetCenter.push(spectralResult[index].yCoords[targetNodeIndex]);subgraph.edges.push({startX:sourceCenter[0],startY:sourceCenter[1],endX:targetCenter[0],endY:targetCenter[1]})}else coseResult[index][source.id()]&&coseResult[index][target.id()]&&subgraph.edges.push({startX:coseResult[index][source.id()].getCenterX(),startY:coseResult[index][source.id()].getCenterY(),endX:coseResult[index][target.id()].getCenterX(),endY:coseResult[index][target.id()].getCenterY()})}),subgraph.nodes.length>0&&(subgraphs.push(subgraph),componentsEvaluated.add(index))}});var shiftResult=layUtil.packComponents(subgraphs,options2.randomize).shifts;if("draft"==options2.quality)spectralResult.forEach(function(result2,index){var newXCoords=result2.xCoords.map(function(x5){return x5+shiftResult[index].dx}),newYCoords=result2.yCoords.map(function(y6){return y6+shiftResult[index].dy});result2.xCoords=newXCoords,result2.yCoords=newYCoords});else{var _count=0;componentsEvaluated.forEach(function(index){Object.keys(coseResult[index]).forEach(function(item){var nodeRectangle=coseResult[index][item];nodeRectangle.setCenter(nodeRectangle.getCenterX()+shiftResult[_count].dx,nodeRectangle.getCenterY()+shiftResult[_count].dy)}),_count++})}}}else{var boundingBox3=options2.eles.boundingBox();if(componentCenters.push({x:boundingBox3.x1+boundingBox3.w/2,y:boundingBox3.y1+boundingBox3.h/2}),options2.randomize){var result=spectralLayout(options2);spectralResult.push(result)}"default"==options2.quality||"proof"==options2.quality?(coseResult.push(coseLayout(options2,spectralResult[0])),aux.relocateComponent(componentCenters[0],coseResult[0],options2)):aux.relocateComponent(componentCenters[0],spectralResult[0],options2)}var getPositions=__name(function(ele,i3){if("default"==options2.quality||"proof"==options2.quality){"number"==typeof ele&&(ele=i3);var pos=void 0,node2=void 0,theId=ele.data("id");return coseResult.forEach(function(result2){theId in result2&&(pos={x:result2[theId].getRect().getCenterX(),y:result2[theId].getRect().getCenterY()},node2=result2[theId])}),options2.nodeDimensionsIncludeLabels&&(node2.labelWidth&&("left"==node2.labelPosHorizontal?pos.x+=node2.labelWidth/2:"right"==node2.labelPosHorizontal&&(pos.x-=node2.labelWidth/2)),node2.labelHeight&&("top"==node2.labelPosVertical?pos.y+=node2.labelHeight/2:"bottom"==node2.labelPosVertical&&(pos.y-=node2.labelHeight/2))),null==pos&&(pos={x:ele.position("x"),y:ele.position("y")}),{x:pos.x,y:pos.y}}var _pos=void 0;return spectralResult.forEach(function(result2){var index=result2.nodeIndexes.get(ele.id());null!=index&&(_pos={x:result2.xCoords[index],y:result2.yCoords[index]})}),null==_pos&&(_pos={x:ele.position("x"),y:ele.position("y")}),{x:_pos.x,y:_pos.y}},"getPositions");if("default"==options2.quality||"proof"==options2.quality||options2.randomize){var parentsWithoutChildren=aux.calcParentsWithoutChildren(cy,eles),_hiddenEles=eles.filter(function(ele){return"none"==ele.css("display")});options2.eles=eles.not(_hiddenEles),eles.nodes().not(":parent").not(_hiddenEles).layoutPositions(this,options2,getPositions),parentsWithoutChildren.length>0&&parentsWithoutChildren.forEach(function(ele){ele.position(getPositions(ele))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")},"run")}]),Layout3}();module3.exports=Layout2},657:(module3,__unused_webpack_exports,__webpack_require__2)=>{var aux=__webpack_require__2(548),Matrix=__webpack_require__2(140).layoutBase.Matrix,SVD=__webpack_require__2(140).layoutBase.SVD,spectralLayout=__name(function(options2){var cy=options2.cy,eles=options2.eles,nodes5=eles.nodes(),parentNodes=eles.nodes(":parent"),dummyNodes=new Map,nodeIndexes=new Map,parentChildMap=new Map,allNodesNeighborhood=[],xCoords=[],yCoords=[],samplesColumn=[],minDistancesColumn=[],C3=[],PHI=[],INV=[],nodeSize=void 0,piTol=options2.piTol,samplingType=options2.samplingType,nodeSeparation=options2.nodeSeparation,sampleSize=void 0,randomSampleCR=__name(function(){for(var sample2=0,count2=0,flag=!1;count2<sampleSize;){sample2=Math.floor(Math.random()*nodeSize),flag=!1;for(var i3=0;i3<count2;i3++)if(samplesColumn[i3]==sample2){flag=!0;break}flag||(samplesColumn[count2]=sample2,count2++)}},"randomSampleCR"),BFS=__name(function(pivot,index2,samplingMethod){for(var path4=[],front=0,back=0,current=0,temp=void 0,distance2=[],max_dist=0,max_ind=1,i3=0;i3<nodeSize;i3++)distance2[i3]=1e8;for(path4[back]=pivot,distance2[pivot]=0;back>=front;){current=path4[front++];for(var neighbors=allNodesNeighborhood[current],_i=0;_i<neighbors.length;_i++)1e8==distance2[temp=nodeIndexes.get(neighbors[_i])]&&(distance2[temp]=distance2[current]+1,path4[++back]=temp);C3[current][index2]=distance2[current]*nodeSeparation}if(samplingMethod){for(var _i2=0;_i2<nodeSize;_i2++)C3[_i2][index2]<minDistancesColumn[_i2]&&(minDistancesColumn[_i2]=C3[_i2][index2]);for(var _i3=0;_i3<nodeSize;_i3++)minDistancesColumn[_i3]>max_dist&&(max_dist=minDistancesColumn[_i3],max_ind=_i3)}return max_ind},"BFS"),allBFS=__name(function(samplingMethod){var sample2=void 0;if(samplingMethod){sample2=Math.floor(Math.random()*nodeSize);for(var _i4=0;_i4<nodeSize;_i4++)minDistancesColumn[_i4]=1e8;for(var _i5=0;_i5<sampleSize;_i5++)samplesColumn[_i5]=sample2,sample2=BFS(sample2,_i5,samplingMethod)}else{randomSampleCR();for(var i3=0;i3<sampleSize;i3++)BFS(samplesColumn[i3],i3,samplingMethod,!1)}for(var _i6=0;_i6<nodeSize;_i6++)for(var j3=0;j3<sampleSize;j3++)C3[_i6][j3]*=C3[_i6][j3];for(var _i7=0;_i7<sampleSize;_i7++)PHI[_i7]=[];for(var _i8=0;_i8<sampleSize;_i8++)for(var _j=0;_j<sampleSize;_j++)PHI[_i8][_j]=C3[samplesColumn[_j]][_i8]},"allBFS"),sample=__name(function(){for(var SVDResult=SVD.svd(PHI),a_q=SVDResult.S,a_u=SVDResult.U,a_v=SVDResult.V,max_s=a_q[0]*a_q[0]*a_q[0],a_Sig=[],i3=0;i3<sampleSize;i3++){a_Sig[i3]=[];for(var j3=0;j3<sampleSize;j3++)a_Sig[i3][j3]=0,i3==j3&&(a_Sig[i3][j3]=a_q[i3]/(a_q[i3]*a_q[i3]+max_s/(a_q[i3]*a_q[i3])))}INV=Matrix.multMat(Matrix.multMat(a_v,a_Sig),Matrix.transpose(a_u))},"sample"),powerIteration=__name(function(){for(var theta1=void 0,theta2=void 0,Y1=[],Y22=[],V1=[],V22=[],i3=0;i3<nodeSize;i3++)Y1[i3]=Math.random(),Y22[i3]=Math.random();Y1=Matrix.normalize(Y1),Y22=Matrix.normalize(Y22);for(var current=1e-9,previous=1e-9,temp=void 0;;){0;for(var _i9=0;_i9<nodeSize;_i9++)V1[_i9]=Y1[_i9];if(Y1=Matrix.multGamma(Matrix.multL(Matrix.multGamma(V1),C3,INV)),theta1=Matrix.dotProduct(V1,Y1),Y1=Matrix.normalize(Y1),current=Matrix.dotProduct(V1,Y1),(temp=Math.abs(current/previous))<=1+piTol&&temp>=1)break;previous=current}for(var _i10=0;_i10<nodeSize;_i10++)V1[_i10]=Y1[_i10];for(previous=1e-9;;){0;for(var _i11=0;_i11<nodeSize;_i11++)V22[_i11]=Y22[_i11];if(V22=Matrix.minusOp(V22,Matrix.multCons(V1,Matrix.dotProduct(V1,V22))),Y22=Matrix.multGamma(Matrix.multL(Matrix.multGamma(V22),C3,INV)),theta2=Matrix.dotProduct(V22,Y22),Y22=Matrix.normalize(Y22),current=Matrix.dotProduct(V22,Y22),(temp=Math.abs(current/previous))<=1+piTol&&temp>=1)break;previous=current}for(var _i12=0;_i12<nodeSize;_i12++)V22[_i12]=Y22[_i12];xCoords=Matrix.multCons(V1,Math.sqrt(Math.abs(theta1))),yCoords=Matrix.multCons(V22,Math.sqrt(Math.abs(theta2)))},"powerIteration");aux.connectComponents(cy,eles,aux.getTopMostNodes(nodes5),dummyNodes),parentNodes.forEach(function(ele){aux.connectComponents(cy,eles,aux.getTopMostNodes(ele.descendants().intersection(eles)),dummyNodes)});for(var index=0,i2=0;i2<nodes5.length;i2++)nodes5[i2].isParent()||nodeIndexes.set(nodes5[i2].id(),index++);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=dummyNodes.keys()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;nodeIndexes.set(key,index++)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}for(var _i13=0;_i13<nodeIndexes.size;_i13++)allNodesNeighborhood[_i13]=[];parentNodes.forEach(function(ele){for(var children2=ele.children().intersection(eles);0==children2.nodes(":childless").length;)children2=children2.nodes()[0].children().intersection(eles);var index2=0,min9=children2.nodes(":childless")[0].connectedEdges().length;children2.nodes(":childless").forEach(function(ele2,i3){ele2.connectedEdges().length<min9&&(min9=ele2.connectedEdges().length,index2=i3)}),parentChildMap.set(ele.id(),children2.nodes(":childless")[index2].id())}),nodes5.forEach(function(ele){var eleIndex=void 0;eleIndex=ele.isParent()?nodeIndexes.get(parentChildMap.get(ele.id())):nodeIndexes.get(ele.id()),ele.neighborhood().nodes().forEach(function(node2){eles.intersection(ele.edgesWith(node2)).length>0&&(node2.isParent()?allNodesNeighborhood[eleIndex].push(parentChildMap.get(node2.id())):allNodesNeighborhood[eleIndex].push(node2.id()))})});var _loop=__name(function(_key2){var eleIndex=nodeIndexes.get(_key2),disconnectedId=void 0;dummyNodes.get(_key2).forEach(function(id30){disconnectedId=cy.getElementById(id30).isParent()?parentChildMap.get(id30):id30,allNodesNeighborhood[eleIndex].push(disconnectedId),allNodesNeighborhood[nodeIndexes.get(disconnectedId)].push(_key2)})},"_loop"),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=dummyNodes.keys()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_loop(_step2.value)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var spectralResult=void 0;if((nodeSize=nodeIndexes.size)>2){sampleSize=nodeSize<options2.sampleSize?nodeSize:options2.sampleSize;for(var _i14=0;_i14<nodeSize;_i14++)C3[_i14]=[];for(var _i15=0;_i15<sampleSize;_i15++)INV[_i15]=[];return"draft"==options2.quality||"all"==options2.step?(allBFS(samplingType),sample(),powerIteration(),spectralResult={nodeIndexes:nodeIndexes,xCoords:xCoords,yCoords:yCoords}):(nodeIndexes.forEach(function(value2,key2){xCoords.push(cy.getElementById(key2).position("x")),yCoords.push(cy.getElementById(key2).position("y"))}),spectralResult={nodeIndexes:nodeIndexes,xCoords:xCoords,yCoords:yCoords}),spectralResult}var iterator=nodeIndexes.keys(),firstNode=cy.getElementById(iterator.next().value),firstNodePos=firstNode.position(),firstNodeWidth=firstNode.outerWidth();if(xCoords.push(firstNodePos.x),yCoords.push(firstNodePos.y),2==nodeSize){var secondNodeWidth=cy.getElementById(iterator.next().value).outerWidth();xCoords.push(firstNodePos.x+firstNodeWidth/2+secondNodeWidth/2+options2.idealEdgeLength),yCoords.push(firstNodePos.y)}return spectralResult={nodeIndexes:nodeIndexes,xCoords:xCoords,yCoords:yCoords}},"spectralLayout");module3.exports={spectralLayout:spectralLayout}},579:(module3,__unused_webpack_exports,__webpack_require__2)=>{var impl2=__webpack_require__2(212),register=__name(function(cytoscape4){cytoscape4&&cytoscape4("layout","fcose",impl2)},"register");"undefined"!=typeof cytoscape&&register(cytoscape),module3.exports=register},140:module3=>{module3.exports=__WEBPACK_EXTERNAL_MODULE__140__}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module3=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module3,module3.exports,__webpack_require__),module3.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__(579)})()})}}),init_architectureIcons=__esm({"src/diagrams/architecture/architectureIcons.ts"(){init_icons(),architectureIcons={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:(wrapIcon=__name(icon2=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${icon2}</g>`,"wrapIcon"))('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:wrapIcon('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:wrapIcon('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:wrapIcon('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:wrapIcon('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:unknownIcon,blank:{body:wrapIcon("")}}}}}),init_svgDraw5=__esm({"src/diagrams/architecture/svgDraw.ts"(){init_diagramAPI(),init_createText(),init_icons(),init_common(),init_architectureIcons(),init_architectureTypes(),init_utils2(),drawEdges=__name(async function(edgesEl,cy,db7){const padding2=db7.getConfigField("padding"),iconSize=db7.getConfigField("iconSize"),halfIconSize=iconSize/2,arrowSize=iconSize/6,halfArrowSize=arrowSize/2;await Promise.all(cy.edges().map(async edge=>{const{source:source,sourceDir:sourceDir,sourceArrow:sourceArrow,sourceGroup:sourceGroup,target:target,targetDir:targetDir,targetArrow:targetArrow,targetGroup:targetGroup,label:label}=edgeData(edge);let{x:startX2,y:startY2}=edge[0].sourceEndpoint();const{x:midX,y:midY}=edge[0].midpoint();let{x:endX,y:endY}=edge[0].targetEndpoint();const groupEdgeShift=padding2+4;if(sourceGroup&&(isArchitectureDirectionX(sourceDir)?startX2+="L"===sourceDir?-groupEdgeShift:groupEdgeShift:startY2+="T"===sourceDir?-groupEdgeShift:groupEdgeShift+18),targetGroup&&(isArchitectureDirectionX(targetDir)?endX+="L"===targetDir?-groupEdgeShift:groupEdgeShift:endY+="T"===targetDir?-groupEdgeShift:groupEdgeShift+18),sourceGroup||"junction"!==db7.getNode(source)?.type||(isArchitectureDirectionX(sourceDir)?startX2+="L"===sourceDir?halfIconSize:-halfIconSize:startY2+="T"===sourceDir?halfIconSize:-halfIconSize),targetGroup||"junction"!==db7.getNode(target)?.type||(isArchitectureDirectionX(targetDir)?endX+="L"===targetDir?halfIconSize:-halfIconSize:endY+="T"===targetDir?halfIconSize:-halfIconSize),edge[0]._private.rscratch){const g2=edgesEl.insert("g");if(g2.insert("path").attr("d",`M ${startX2},${startY2} L ${midX},${midY} L${endX},${endY} `).attr("class","edge").attr("id",getEdgeId(source,target,{prefix:"L"})),sourceArrow){const xShift=isArchitectureDirectionX(sourceDir)?ArchitectureDirectionArrowShift[sourceDir](startX2,arrowSize):startX2-halfArrowSize,yShift=isArchitectureDirectionY(sourceDir)?ArchitectureDirectionArrowShift[sourceDir](startY2,arrowSize):startY2-halfArrowSize;g2.insert("polygon").attr("points",ArchitectureDirectionArrow[sourceDir](arrowSize)).attr("transform",`translate(${xShift},${yShift})`).attr("class","arrow")}if(targetArrow){const xShift=isArchitectureDirectionX(targetDir)?ArchitectureDirectionArrowShift[targetDir](endX,arrowSize):endX-halfArrowSize,yShift=isArchitectureDirectionY(targetDir)?ArchitectureDirectionArrowShift[targetDir](endY,arrowSize):endY-halfArrowSize;g2.insert("polygon").attr("points",ArchitectureDirectionArrow[targetDir](arrowSize)).attr("transform",`translate(${xShift},${yShift})`).attr("class","arrow")}if(label){const axis2=isArchitectureDirectionXY(sourceDir,targetDir)?"XY":isArchitectureDirectionX(sourceDir)?"X":"Y";let width3=0;width3="X"===axis2?Math.abs(startX2-endX):"Y"===axis2?Math.abs(startY2-endY)/1.5:Math.abs(startX2-endX)/2;const textElem=g2.append("g");if(await createText(textElem,label,{useHtmlLabels:!1,width:width3,classes:"architecture-service-label"},getConfig2()),textElem.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===axis2)textElem.attr("transform","translate("+midX+", "+midY+")");else if("Y"===axis2)textElem.attr("transform","translate("+midX+", "+midY+") rotate(-90)");else if("XY"===axis2){const pair=getArchitectureDirectionPair(sourceDir,targetDir);if(pair&&isArchitecturePairXY(pair)){const bboxOrig=textElem.node().getBoundingClientRect(),[x5,y6]=getArchitectureDirectionXYFactors(pair);textElem.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*x5*y6*45})`);const bboxNew=textElem.node().getBoundingClientRect();textElem.attr("transform",`\n                translate(${midX}, ${midY-bboxOrig.height/2})\n                translate(${x5*bboxNew.width/2}, ${y6*bboxNew.height/2})\n                rotate(${-1*x5*y6*45}, 0, ${bboxOrig.height/2})\n              `)}}}}}))},"drawEdges"),drawGroups=__name(async function(groupsEl,cy,db7){const groupIconSize=.75*db7.getConfigField("padding"),fontSize=db7.getConfigField("fontSize"),halfIconSize=db7.getConfigField("iconSize")/2;await Promise.all(cy.nodes().map(async node2=>{const data5=nodeData(node2);if("group"===data5.type){const{h:h3,w:w4,x1:x1,y1:y1}=node2.boundingBox(),groupsNode=groupsEl.append("rect");groupsNode.attr("id",`group-${data5.id}`).attr("x",x1+halfIconSize).attr("y",y1+halfIconSize).attr("width",w4).attr("height",h3).attr("class","node-bkg");const groupLabelContainer=groupsEl.append("g");let shiftedX1=x1,shiftedY1=y1;if(data5.icon){const bkgElem=groupLabelContainer.append("g");bkgElem.html(`<g>${await getIconSVG(data5.icon,{height:groupIconSize,width:groupIconSize,fallbackPrefix:architectureIcons.prefix})}</g>`),bkgElem.attr("transform","translate("+(shiftedX1+halfIconSize+1)+", "+(shiftedY1+halfIconSize+1)+")"),shiftedX1+=groupIconSize,shiftedY1+=fontSize/2-1-2}if(data5.label){const textElem=groupLabelContainer.append("g");await createText(textElem,data5.label,{useHtmlLabels:!1,width:w4,classes:"architecture-service-label"},getConfig2()),textElem.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),textElem.attr("transform","translate("+(shiftedX1+halfIconSize+4)+", "+(shiftedY1+halfIconSize+2)+")")}db7.setElementForId(data5.id,groupsNode)}}))},"drawGroups"),drawServices=__name(async function(db7,elem,services){const config5=getConfig2();for(const service of services){const serviceElem=elem.append("g"),iconSize=db7.getConfigField("iconSize");if(service.title){const textElem=serviceElem.append("g");await createText(textElem,service.title,{useHtmlLabels:!1,width:1.5*iconSize,classes:"architecture-service-label"},config5),textElem.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),textElem.attr("transform","translate("+iconSize/2+", "+iconSize+")")}const bkgElem=serviceElem.append("g");if(service.icon)bkgElem.html(`<g>${await getIconSVG(service.icon,{height:iconSize,width:iconSize,fallbackPrefix:architectureIcons.prefix})}</g>`);else if(service.iconText){bkgElem.html(`<g>${await getIconSVG("blank",{height:iconSize,width:iconSize,fallbackPrefix:architectureIcons.prefix})}</g>`);const divElem=bkgElem.append("g").append("foreignObject").attr("width",iconSize).attr("height",iconSize).append("div").attr("class","node-icon-text").attr("style",`height: ${iconSize}px;`).append("div").html(sanitizeText(service.iconText,config5)),fontSize=parseInt(window.getComputedStyle(divElem.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;divElem.attr("style",`-webkit-line-clamp: ${Math.floor((iconSize-2)/fontSize)};`)}else bkgElem.append("path").attr("class","node-bkg").attr("id","node-"+service.id).attr("d",`M0 ${iconSize} v${-iconSize} q0,-5 5,-5 h${iconSize} q5,0 5,5 v${iconSize} H0 Z`);serviceElem.attr("id",`service-${service.id}`).attr("class","architecture-service");const{width:width3,height:height2}=serviceElem.node().getBBox();service.width=width3,service.height=height2,db7.setElementForId(service.id,serviceElem)}return 0},"drawServices"),drawJunctions=__name(function(db7,elem,junctions){junctions.forEach(junction=>{const junctionElem=elem.append("g"),iconSize=db7.getConfigField("iconSize");junctionElem.append("g").append("rect").attr("id","node-"+junction.id).attr("fill-opacity","0").attr("width",iconSize).attr("height",iconSize),junctionElem.attr("class","architecture-junction");const{width:width3,height:height2}=junctionElem._groups[0][0].getBBox();junctionElem.width=width3,junctionElem.height=height2,db7.setElementForId(junction.id,junctionElem)})},"drawJunctions")}});function addServices(services,cy,db7){services.forEach(service=>{cy.add({group:"nodes",data:{type:"service",id:service.id,icon:service.icon,label:service.title,parent:service.in,width:db7.getConfigField("iconSize"),height:db7.getConfigField("iconSize")},classes:"node-service"})})}function addJunctions(junctions,cy,db7){junctions.forEach(junction=>{cy.add({group:"nodes",data:{type:"junction",id:junction.id,parent:junction.in,width:db7.getConfigField("iconSize"),height:db7.getConfigField("iconSize")},classes:"node-junction"})})}function positionNodes(db7,cy){cy.nodes().map(node2=>{const data5=nodeData(node2);if("group"===data5.type)return;data5.x=node2.position().x,data5.y=node2.position().y;db7.getElementById(data5.id).attr("transform","translate("+(data5.x||0)+","+(data5.y||0)+")")})}function addGroups(groups,cy){groups.forEach(group2=>{cy.add({group:"nodes",data:{type:"group",id:group2.id,icon:group2.icon,label:group2.title,parent:group2.in},classes:"node-group"})})}function addEdges2(edges3,cy){edges3.forEach(parsedEdge=>{const{lhsId:lhsId,rhsId:rhsId,lhsInto:lhsInto,lhsGroup:lhsGroup,rhsInto:rhsInto,lhsDir:lhsDir,rhsDir:rhsDir,rhsGroup:rhsGroup,title:title2}=parsedEdge,edgeType=isArchitectureDirectionXY(parsedEdge.lhsDir,parsedEdge.rhsDir)?"segments":"straight",edge={id:`${lhsId}-${rhsId}`,label:title2,source:lhsId,sourceDir:lhsDir,sourceArrow:lhsInto,sourceGroup:lhsGroup,sourceEndpoint:"L"===lhsDir?"0 50%":"R"===lhsDir?"100% 50%":"T"===lhsDir?"50% 0":"50% 100%",target:rhsId,targetDir:rhsDir,targetArrow:rhsInto,targetGroup:rhsGroup,targetEndpoint:"L"===rhsDir?"0 50%":"R"===rhsDir?"100% 50%":"T"===rhsDir?"50% 0":"50% 100%"};cy.add({group:"edges",data:edge,classes:edgeType})})}function getAlignments(db7,spatialMaps,groupAlignments){const flattenAlignments=__name((alignmentObj,alignmentDir)=>Object.entries(alignmentObj).reduce((prev2,[dir2,alignments2])=>{let cnt4=0;const arr=Object.entries(alignments2);if(1===arr.length)return prev2[dir2]=arr[0][1],prev2;for(let i2=0;i2<arr.length-1;i2++)for(let j3=i2+1;j3<arr.length;j3++){const[aGroupId,aNodeIds]=arr[i2],[bGroupId,bNodeIds]=arr[j3],alignment=groupAlignments[aGroupId]?.[bGroupId];if(alignment===alignmentDir)prev2[dir2]??=[],prev2[dir2]=[...prev2[dir2],...aNodeIds,...bNodeIds];else if("default"===aGroupId||"default"===bGroupId)prev2[dir2]??=[],prev2[dir2]=[...prev2[dir2],...aNodeIds,...bNodeIds];else{prev2[`${dir2}-${cnt4++}`]=aNodeIds;prev2[`${dir2}-${cnt4++}`]=bNodeIds}}return prev2},{}),"flattenAlignments"),alignments=spatialMaps.map(spatialMap=>{const horizontalAlignments={},verticalAlignments={};return Object.entries(spatialMap).forEach(([id30,[x5,y6]])=>{const nodeGroup=db7.getNode(id30)?.in??"default";horizontalAlignments[y6]??={},horizontalAlignments[y6][nodeGroup]??=[],horizontalAlignments[y6][nodeGroup].push(id30),verticalAlignments[x5]??={},verticalAlignments[x5][nodeGroup]??=[],verticalAlignments[x5][nodeGroup].push(id30)}),{horiz:Object.values(flattenAlignments(horizontalAlignments,"horizontal")).filter(arr=>arr.length>1),vert:Object.values(flattenAlignments(verticalAlignments,"vertical")).filter(arr=>arr.length>1)}}),[horizontal,vertical]=alignments.reduce(([prevHoriz,prevVert],{horiz:horiz,vert:vert})=>[[...prevHoriz,...horiz],[...prevVert,...vert]],[[],[]]);return{horizontal:horizontal,vertical:vertical}}function getRelativeConstraints(spatialMaps,db7){const relativeConstraints=[],posToStr=__name(pos=>`${pos[0]},${pos[1]}`,"posToStr"),strToPos=__name(pos=>pos.split(",").map(p3=>parseInt(p3)),"strToPos");return spatialMaps.forEach(spatialMap=>{const invSpatialMap=Object.fromEntries(Object.entries(spatialMap).map(([id30,pos])=>[posToStr(pos),id30])),queue=[posToStr([0,0])],visited={},directions={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;queue.length>0;){const curr=queue.shift();if(curr){visited[curr]=1;const currId=invSpatialMap[curr];if(currId){const currPos=strToPos(curr);Object.entries(directions).forEach(([dir2,shift2])=>{const newPos=posToStr([currPos[0]+shift2[0],currPos[1]+shift2[1]]),newId2=invSpatialMap[newPos];newId2&&!visited[newPos]&&(queue.push(newPos),relativeConstraints.push({[ArchitectureDirectionName[dir2]]:newId2,[ArchitectureDirectionName[getOppositeArchitectureDirection(dir2)]]:currId,gap:1.5*db7.getConfigField("iconSize")}))})}}}}),relativeConstraints}function layoutArchitecture(services,junctions,groups,edges3,db7,{spatialMaps:spatialMaps,groupAlignments:groupAlignments}){return new Promise(resolve2=>{const renderEl=select_default2("body").append("div").attr("id","cy").attr("style","display:none"),cy=cytoscape2({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${db7.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${db7.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});renderEl.remove(),addGroups(groups,cy),addServices(services,cy,db7),addJunctions(junctions,cy,db7),addEdges2(edges3,cy);const alignmentConstraint=getAlignments(db7,spatialMaps,groupAlignments),relativePlacementConstraint=getRelativeConstraints(spatialMaps,db7),layout6=cy.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(edge){const[nodeA,nodeB]=edge.connectedNodes(),{parent:parentA}=nodeData(nodeA),{parent:parentB}=nodeData(nodeB);return parentA===parentB?1.5*db7.getConfigField("iconSize"):.5*db7.getConfigField("iconSize")},edgeElasticity(edge){const[nodeA,nodeB]=edge.connectedNodes(),{parent:parentA}=nodeData(nodeA),{parent:parentB}=nodeData(nodeB);return parentA===parentB?.45:.001},alignmentConstraint:alignmentConstraint,relativePlacementConstraint:relativePlacementConstraint});layout6.one("layoutstop",()=>{function getSegmentWeights(source,target,pointX,pointY){let W3,D4;const{x:sX,y:sY}=source,{x:tX,y:tY}=target;D4=(pointY-sY+(sX-pointX)*(sY-tY)/(sX-tX))/Math.sqrt(1+Math.pow((sY-tY)/(sX-tX),2)),W3=Math.sqrt(Math.pow(pointY-sY,2)+Math.pow(pointX-sX,2)-Math.pow(D4,2));W3/=Math.sqrt(Math.pow(tX-sX,2)+Math.pow(tY-sY,2));let delta1=(tX-sX)*(pointY-sY)-(tY-sY)*(pointX-sX);switch(!0){case delta1>=0:delta1=1;break;case delta1<0:delta1=-1}let delta2=(tX-sX)*(pointX-sX)+(tY-sY)*(pointY-sY);switch(!0){case delta2>=0:delta2=1;break;case delta2<0:delta2=-1}return D4=Math.abs(D4)*delta1,W3*=delta2,{distances:D4,weights:W3}}__name(getSegmentWeights,"getSegmentWeights"),cy.startBatch();for(const edge of Object.values(cy.edges()))if(edge.data?.()){const{x:sX,y:sY}=edge.source().position(),{x:tX,y:tY}=edge.target().position();if(sX!==tX&&sY!==tY){const sEP=edge.sourceEndpoint(),tEP=edge.targetEndpoint(),{sourceDir:sourceDir}=edgeData(edge),[pointX,pointY]=isArchitectureDirectionY(sourceDir)?[sEP.x,tEP.y]:[tEP.x,sEP.y],{weights:weights,distances:distances2}=getSegmentWeights(sEP,tEP,pointX,pointY);edge.style("segment-distances",distances2),edge.style("segment-weights",weights)}}cy.endBatch(),layout6.run()}),layout6.run(),cy.ready(e3=>{log.info("Ready",e3),resolve2(cy)})})}var diagram25,init_architectureRenderer=__esm({"src/diagrams/architecture/architectureRenderer.ts"(){init_cytoscape_esm(),import_cytoscape_fcose=__toESM(require_cytoscape_fcose(),1),init_src32(),init_logger(),init_icons(),init_selectSvgElement(),init_setupGraphViewbox(),init_architectureIcons(),init_architectureTypes(),init_svgDraw5(),registerIconPacks([{name:architectureIcons.prefix,icons:architectureIcons}]),cytoscape2.use(import_cytoscape_fcose.default),__name(addServices,"addServices"),__name(addJunctions,"addJunctions"),__name(positionNodes,"positionNodes"),__name(addGroups,"addGroups"),__name(addEdges2,"addEdges"),__name(getAlignments,"getAlignments"),__name(getRelativeConstraints,"getRelativeConstraints"),__name(layoutArchitecture,"layoutArchitecture"),renderer8={draw:__name(async(text4,id30,_version,diagObj)=>{const db7=diagObj.db,services=db7.getServices(),junctions=db7.getJunctions(),groups=db7.getGroups(),edges3=db7.getEdges(),ds=db7.getDataStructures(),svg2=selectSvgElement(id30),edgesElem=svg2.append("g");edgesElem.attr("class","architecture-edges");const servicesElem=svg2.append("g");servicesElem.attr("class","architecture-services");const groupElem=svg2.append("g");groupElem.attr("class","architecture-groups"),await drawServices(db7,servicesElem,services),drawJunctions(db7,servicesElem,junctions);const cy=await layoutArchitecture(services,junctions,groups,edges3,db7,ds);await drawEdges(edgesElem,cy,db7),await drawGroups(groupElem,cy,db7),positionNodes(db7,cy),setupGraphViewbox(void 0,svg2,db7.getConfigField("padding"),db7.getConfigField("useMaxWidth"))},"draw")}}}),architectureDiagram_exports={};__export(architectureDiagram_exports,{diagram:()=>diagram25});var TreeMapDB,init_architectureDiagram=__esm({"src/diagrams/architecture/architectureDiagram.ts"(){init_architectureParser(),init_architectureDb(),init_architectureStyles(),init_architectureRenderer(),diagram25={parser:parser22,get db(){return new ArchitectureDB},renderer:renderer8,styles:architectureStyles_default}}}),init_db3=__esm({"src/diagrams/treemap/db.ts"(){init_defaultConfig(),init_config(),init_utils2(),init_handDrawnShapeStyles(),init_commonDb(),TreeMapDB=class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=setAccTitle,this.getAccTitle=getAccTitle,this.setDiagramTitle=setDiagramTitle,this.getDiagramTitle=getDiagramTitle,this.getAccDescription=getAccDescription,this.setAccDescription=setAccDescription}static{__name(this,"TreeMapDB")}getNodes(){return this.nodes}getConfig(){const defaultConfig4=defaultConfig_default,userConfig=getConfig();return cleanAndMerge({...defaultConfig4.treemap,...userConfig.treemap??{}})}addNode(node2,level){this.nodes.push(node2),this.levels.set(node2,level),0===level&&(this.outerNodes.push(node2),this.root??=node2)}getRoot(){return{name:"",children:this.outerNodes}}addClass(id30,_style){const styleClass=this.classes.get(id30)??{id:id30,styles:[],textStyles:[]},styles4=_style.replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");styles4&&styles4.forEach(s2=>{isLabelStyle(s2)&&(styleClass?.textStyles?styleClass.textStyles.push(s2):styleClass.textStyles=[s2]),styleClass?.styles?styleClass.styles.push(s2):styleClass.styles=[s2]}),this.classes.set(id30,styleClass)}getClasses(){return this.classes}getStylesForClass(classSelector){return this.classes.get(classSelector)?.styles??[]}clear(){clear(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}}}});function buildHierarchy(items){if(!items.length)return[];const root3=[],stack=[];return items.forEach(item=>{const node2={name:item.name,children:"Leaf"===item.type?void 0:[]};for(node2.classSelector=item?.classSelector,item?.cssCompiledStyles&&(node2.cssCompiledStyles=[item.cssCompiledStyles]),"Leaf"===item.type&&void 0!==item.value&&(node2.value=item.value);stack.length>0&&stack[stack.length-1].level>=item.level;)stack.pop();if(0===stack.length)root3.push(node2);else{const parent4=stack[stack.length-1].node;parent4.children?parent4.children.push(node2):parent4.children=[node2]}"Leaf"!==item.type&&stack.push({node:node2,level:item.level})}),root3}var populate18,getItemName,parser23,draw25,renderer9,defaultTreemapStyleOptions,styles_default17,diagram26,init_utils6=__esm({"src/diagrams/treemap/utils.ts"(){__name(buildHierarchy,"buildHierarchy")}}),init_parser5=__esm({"src/diagrams/treemap/parser.ts"(){init_mermaid_parser_core(),init_logger(),init_populateCommonDb(),init_utils6(),init_db3(),populate18=__name((ast,db7)=>{populateCommonDb(ast,db7);const items=[];for(const row of ast.TreemapRows??[])"ClassDefStatement"===row.$type&&db7.addClass(row.className??"",row.styleText??"");for(const row of ast.TreemapRows??[]){const item=row.item;if(!item)continue;const level=row.indent?parseInt(row.indent):0,name=getItemName(item),styles4=item.classSelector?db7.getStylesForClass(item.classSelector):[],cssCompiledStyles=styles4.length>0?styles4.join(";"):void 0,itemData={level:level,name:name,type:item.$type,value:item.value,classSelector:item.classSelector,cssCompiledStyles:cssCompiledStyles};items.push(itemData)}const hierarchyNodes=buildHierarchy(items),addNodesRecursively=__name((nodes5,level)=>{for(const node2 of nodes5)db7.addNode(node2,level),node2.children&&node2.children.length>0&&addNodesRecursively(node2.children,level+1)},"addNodesRecursively");addNodesRecursively(hierarchyNodes,0)},"populate"),getItemName=__name(item=>item.name?String(item.name):"","getItemName"),parser23={parser:{yy:void 0},parse:__name(async text4=>{try{const parseFunc=parse3,ast=await parseFunc("treemap",text4);log.debug("Treemap AST:",ast);const db7=parser23.parser?.yy;if(!(db7 instanceof TreeMapDB))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");populate18(ast,db7)}catch(error3){throw log.error("Error parsing treemap:",error3),error3}},"parse")}}}),init_renderer3=__esm({"src/diagrams/treemap/renderer.ts"(){init_selectSvgElement(),init_setupViewPortForSVG(),init_setupGraphViewbox(),init_src32(),init_handDrawnShapeStyles(),init_config(),init_logger(),draw25=__name((_text,id30,_version,diagram27)=>{const treemapDb=diagram27.db,config5=treemapDb.getConfig(),treemapInnerPadding=config5.padding??10,title2=treemapDb.getDiagramTitle(),root3=treemapDb.getRoot(),{themeVariables:themeVariables}=getConfig();if(!root3)return;const titleHeight=title2?30:0,svg2=selectSvgElement(id30),width3=config5.nodeWidth?10*config5.nodeWidth:960,height2=config5.nodeHeight?10*config5.nodeHeight:500,svgWidth=width3,svgHeight=height2+titleHeight;let valueFormat;svg2.attr("viewBox",`0 0 ${svgWidth} ${svgHeight}`),configureSvgSize(svg2,svgHeight,svgWidth,config5.useMaxWidth);try{const formatStr=config5.valueFormat||",";if("$0,0"===formatStr)valueFormat=__name(value2=>"$"+format2(",")(value2),"valueFormat");else if(formatStr.startsWith("$")&&formatStr.includes(",")){const precision=/\.\d+/.exec(formatStr),precisionStr=precision?precision[0]:"";valueFormat=__name(value2=>"$"+format2(","+precisionStr)(value2),"valueFormat")}else if(formatStr.startsWith("$")){const restOfFormat=formatStr.substring(1);valueFormat=__name(value2=>"$"+format2(restOfFormat||"")(value2),"valueFormat")}else valueFormat=format2(formatStr)}catch(error3){log.error("Error creating format function:",error3),valueFormat=format2(",")}const colorScale=ordinal().range(["transparent",themeVariables.cScale0,themeVariables.cScale1,themeVariables.cScale2,themeVariables.cScale3,themeVariables.cScale4,themeVariables.cScale5,themeVariables.cScale6,themeVariables.cScale7,themeVariables.cScale8,themeVariables.cScale9,themeVariables.cScale10,themeVariables.cScale11]),colorScalePeer=ordinal().range(["transparent",themeVariables.cScalePeer0,themeVariables.cScalePeer1,themeVariables.cScalePeer2,themeVariables.cScalePeer3,themeVariables.cScalePeer4,themeVariables.cScalePeer5,themeVariables.cScalePeer6,themeVariables.cScalePeer7,themeVariables.cScalePeer8,themeVariables.cScalePeer9,themeVariables.cScalePeer10,themeVariables.cScalePeer11]),colorScaleLabel=ordinal().range([themeVariables.cScaleLabel0,themeVariables.cScaleLabel1,themeVariables.cScaleLabel2,themeVariables.cScaleLabel3,themeVariables.cScaleLabel4,themeVariables.cScaleLabel5,themeVariables.cScaleLabel6,themeVariables.cScaleLabel7,themeVariables.cScaleLabel8,themeVariables.cScaleLabel9,themeVariables.cScaleLabel10,themeVariables.cScaleLabel11]);title2&&svg2.append("text").attr("x",svgWidth/2).attr("y",titleHeight/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(title2);const g2=svg2.append("g").attr("transform",`translate(0, ${titleHeight})`).attr("class","treemapContainer"),hierarchyRoot=hierarchy(root3).sum(d3=>d3.value??0).sort((a2,b3)=>(b3.value??0)-(a2.value??0)),treemapData=treemap_default().size([width3,height2]).paddingTop(d3=>d3.children&&d3.children.length>0?35:0).paddingInner(treemapInnerPadding).paddingLeft(d3=>d3.children&&d3.children.length>0?10:0).paddingRight(d3=>d3.children&&d3.children.length>0?10:0).paddingBottom(d3=>d3.children&&d3.children.length>0?10:0).round(!0)(hierarchyRoot),branchNodes=treemapData.descendants().filter(d3=>d3.children&&d3.children.length>0),sections6=g2.selectAll(".treemapSection").data(branchNodes).enter().append("g").attr("class","treemapSection").attr("transform",d3=>`translate(${d3.x0},${d3.y0})`);sections6.append("rect").attr("width",d3=>d3.x1-d3.x0).attr("height",25).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",d3=>0===d3.depth?"display: none;":""),sections6.append("clipPath").attr("id",(_d,i2)=>`clip-section-${id30}-${i2}`).append("rect").attr("width",d3=>Math.max(0,d3.x1-d3.x0-12)).attr("height",25),sections6.append("rect").attr("width",d3=>d3.x1-d3.x0).attr("height",d3=>d3.y1-d3.y0).attr("class",(_d,i2)=>`treemapSection section${i2}`).attr("fill",d3=>colorScale(d3.data.name)).attr("fill-opacity",.6).attr("stroke",d3=>colorScalePeer(d3.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",d3=>{if(0===d3.depth)return"display: none;";const styles4=styles2String({cssCompiledStyles:d3.data.cssCompiledStyles});return styles4.nodeStyles+";"+styles4.borderStyles.join(";")}),sections6.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",12.5).attr("dominant-baseline","middle").text(d3=>0===d3.depth?"":d3.data.name).attr("font-weight","bold").attr("style",d3=>{if(0===d3.depth)return"display: none;";return"dominant-baseline: middle; font-size: 12px; fill:"+colorScaleLabel(d3.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+styles2String({cssCompiledStyles:d3.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")}).each(function(d3){if(0===d3.depth)return;const self2=select_default2(this),originalText=d3.data.name;self2.text(originalText);const totalHeaderWidth=d3.x1-d3.x0;let spaceForTextContent;if(!1!==config5.showValues&&d3.value){spaceForTextContent=totalHeaderWidth-10-30-10-6}else{spaceForTextContent=totalHeaderWidth-6-6}const actualAvailableWidth=Math.max(15,spaceForTextContent),textNode=self2.node();if(textNode.getComputedTextLength()>actualAvailableWidth){const ellipsis="...";let currentTruncatedText=originalText;for(;currentTruncatedText.length>0;){if(currentTruncatedText=originalText.substring(0,currentTruncatedText.length-1),0===currentTruncatedText.length){self2.text(ellipsis),textNode.getComputedTextLength()>actualAvailableWidth&&self2.text("");break}if(self2.text(currentTruncatedText+ellipsis),textNode.getComputedTextLength()<=actualAvailableWidth)break}}}),!1!==config5.showValues&&sections6.append("text").attr("class","treemapSectionValue").attr("x",d3=>d3.x1-d3.x0-10).attr("y",12.5).attr("text-anchor","end").attr("dominant-baseline","middle").text(d3=>d3.value?valueFormat(d3.value):"").attr("font-style","italic").attr("style",d3=>{if(0===d3.depth)return"display: none;";return"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+colorScaleLabel(d3.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+styles2String({cssCompiledStyles:d3.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")});const leafNodes=treemapData.leaves(),cell=g2.selectAll(".treemapLeafGroup").data(leafNodes).enter().append("g").attr("class",(d3,i2)=>`treemapNode treemapLeafGroup leaf${i2}${d3.data.classSelector?` ${d3.data.classSelector}`:""}x`).attr("transform",d3=>`translate(${d3.x0},${d3.y0})`);cell.append("rect").attr("width",d3=>d3.x1-d3.x0).attr("height",d3=>d3.y1-d3.y0).attr("class","treemapLeaf").attr("fill",d3=>d3.parent?colorScale(d3.parent.data.name):colorScale(d3.data.name)).attr("style",d3=>styles2String({cssCompiledStyles:d3.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",d3=>d3.parent?colorScale(d3.parent.data.name):colorScale(d3.data.name)).attr("stroke-width",3),cell.append("clipPath").attr("id",(_d,i2)=>`clip-${id30}-${i2}`).append("rect").attr("width",d3=>Math.max(0,d3.x1-d3.x0-4)).attr("height",d3=>Math.max(0,d3.y1-d3.y0-4));const leafLabels=cell.append("text").attr("class","treemapLabel").attr("x",d3=>(d3.x1-d3.x0)/2).attr("y",d3=>(d3.y1-d3.y0)/2).attr("style",d3=>"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+colorScaleLabel(d3.data.name)+";"+styles2String({cssCompiledStyles:d3.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(_d,i2)=>`url(#clip-${id30}-${i2})`).text(d3=>d3.data.name);if(leafLabels.each(function(d3){const self2=select_default2(this),nodeWidth=d3.x1-d3.x0,nodeHeight=d3.y1-d3.y0,textNode=self2.node(),availableWidth=nodeWidth-8,availableHeight=nodeHeight-8;if(availableWidth<10||availableHeight<10)return void self2.style("display","none");let currentLabelFontSize=parseInt(self2.style("font-size"),10);for(;textNode.getComputedTextLength()>availableWidth&&currentLabelFontSize>8;)currentLabelFontSize--,self2.style("font-size",`${currentLabelFontSize}px`);let prospectiveValueFontSize=Math.max(6,Math.min(28,Math.round(.6*currentLabelFontSize))),combinedHeight=currentLabelFontSize+2+prospectiveValueFontSize;for(;combinedHeight>availableHeight&&currentLabelFontSize>8&&(currentLabelFontSize--,prospectiveValueFontSize=Math.max(6,Math.min(28,Math.round(.6*currentLabelFontSize))),!(prospectiveValueFontSize<6&&8===currentLabelFontSize));)self2.style("font-size",`${currentLabelFontSize}px`),combinedHeight=currentLabelFontSize+2+prospectiveValueFontSize;self2.style("font-size",`${currentLabelFontSize}px`),(textNode.getComputedTextLength()>availableWidth||currentLabelFontSize<8||availableHeight<currentLabelFontSize)&&self2.style("display","none")}),!1!==config5.showValues){const leafValues=cell.append("text").attr("class","treemapValue").attr("x",d3=>(d3.x1-d3.x0)/2).attr("y",function(d3){return(d3.y1-d3.y0)/2}).attr("style",d3=>"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+colorScaleLabel(d3.data.name)+";"+styles2String({cssCompiledStyles:d3.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(_d,i2)=>`url(#clip-${id30}-${i2})`).text(d3=>d3.value?valueFormat(d3.value):"");leafValues.each(function(d3){const valueTextElement=select_default2(this),parentCellNode=this.parentNode;if(!parentCellNode)return void valueTextElement.style("display","none");const labelElement=select_default2(parentCellNode).select(".treemapLabel");if(labelElement.empty()||"none"===labelElement.style("display"))return void valueTextElement.style("display","none");const finalLabelFontSize=parseFloat(labelElement.style("font-size")),actualValueFontSize=Math.max(6,Math.min(28,Math.round(.6*finalLabelFontSize)));valueTextElement.style("font-size",`${actualValueFontSize}px`);const valueTopActualY=(d3.y1-d3.y0)/2+finalLabelFontSize/2+2;valueTextElement.attr("y",valueTopActualY);const nodeWidth=d3.x1-d3.x0,maxValueBottomY=d3.y1-d3.y0-4,availableWidthForValue=nodeWidth-8;valueTextElement.node().getComputedTextLength()>availableWidthForValue||valueTopActualY+actualValueFontSize>maxValueBottomY||actualValueFontSize<6?valueTextElement.style("display","none"):valueTextElement.style("display",null)})}const diagramPadding=config5.diagramPadding??8;setupViewPortForSVG(svg2,diagramPadding,"flowchart",config5?.useMaxWidth||!1)},"draw"),renderer9={draw:draw25,getClasses:__name(function(_text,diagramObj){return diagramObj.db.getClasses()},"getClasses")}}}),init_styles19=__esm({"src/diagrams/treemap/styles.ts"(){init_utils2(),defaultTreemapStyleOptions={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},styles_default17=__name(({treemap:treemap2}={})=>{const options2=cleanAndMerge(defaultTreemapStyleOptions,treemap2);return`\n  .treemapNode.section {\n    stroke: ${options2.sectionStrokeColor};\n    stroke-width: ${options2.sectionStrokeWidth};\n    fill: ${options2.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${options2.leafStrokeColor};\n    stroke-width: ${options2.leafStrokeWidth};\n    fill: ${options2.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${options2.labelColor};\n    font-size: ${options2.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${options2.valueColor};\n    font-size: ${options2.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${options2.titleColor};\n    font-size: ${options2.titleFontSize};\n  }\n  `},"getStyles")}}),diagram_exports3={};__export(diagram_exports3,{diagram:()=>diagram26});var init_diagram3=__esm({"src/diagrams/treemap/diagram.ts"(){init_db3(),init_parser5(),init_renderer3(),init_styles19(),diagram26={parser:parser23,get db(){return new TreeMapDB},renderer:renderer9,styles:styles_default17}}}),mermaid_exports={};__export(mermaid_exports,{default:()=>mermaid_default}),init_icons(),init_esm(),init_detectType();var c4Detector_default={id:"c4",detector:__name(txt=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_c4Diagram2(),c4Diagram_exports));return{id:"c4",diagram:diagram27}},"loader")},flowDetector_default={id:"flowchart",detector:__name((txt,config5)=>"dagre-wrapper"!==config5?.flowchart?.defaultRenderer&&"elk"!==config5?.flowchart?.defaultRenderer&&/^\s*graph/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_flowDiagram(),flowDiagram_exports));return{id:"flowchart",diagram:diagram27}},"loader")},id5="flowchart-v2",flowDetector_v2_default={id:id5,detector:__name((txt,config5)=>"dagre-d3"!==config5?.flowchart?.defaultRenderer&&("elk"===config5?.flowchart?.defaultRenderer&&(config5.layout="elk"),!(!/^\s*graph/.test(txt)||"dagre-wrapper"!==config5?.flowchart?.defaultRenderer)||/^\s*flowchart/.test(txt)),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_flowDiagram(),flowDiagram_exports));return{id:id5,diagram:diagram27}},"loader")},erDetector_default={id:"er",detector:__name(txt=>/^\s*erDiagram/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_erDiagram2(),erDiagram_exports));return{id:"er",diagram:diagram27}},"loader")},gitGraphDetector_default={id:"gitGraph",detector:__name(txt=>/^\s*gitGraph/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_gitGraphDiagram(),gitGraphDiagram_exports));return{id:"gitGraph",diagram:diagram27}},"loader")},ganttDetector_default={id:"gantt",detector:__name(txt=>/^\s*gantt/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_ganttDiagram(),ganttDiagram_exports));return{id:"gantt",diagram:diagram27}},"loader")},info={id:"info",detector:__name(txt=>/^\s*info/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_infoDiagram(),infoDiagram_exports));return{id:"info",diagram:diagram27}},"loader")},pie={id:"pie",detector:__name(txt=>/^\s*pie/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_pieDiagram(),pieDiagram_exports));return{id:"pie",diagram:diagram27}},"loader")},id11="quadrantChart",quadrantDetector_default={id:id11,detector:__name(txt=>/^\s*quadrantChart/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_quadrantDiagram(),quadrantDiagram_exports));return{id:id11,diagram:diagram27}},"loader")},xychartDetector_default={id:"xychart",detector:__name(txt=>/^\s*xychart(-beta)?/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_xychartDiagram(),xychartDiagram_exports));return{id:"xychart",diagram:diagram27}},"loader")},requirementDetector_default={id:"requirement",detector:__name(txt=>/^\s*requirement(Diagram)?/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_requirementDiagram2(),requirementDiagram_exports));return{id:"requirement",diagram:diagram27}},"loader")},sequenceDetector_default={id:"sequence",detector:__name(txt=>/^\s*sequenceDiagram/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_sequenceDiagram2(),sequenceDiagram_exports));return{id:"sequence",diagram:diagram27}},"loader")},classDetector_default={id:"class",detector:__name((txt,config5)=>"dagre-wrapper"!==config5?.class?.defaultRenderer&&/^\s*classDiagram/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_classDiagram2(),classDiagram_exports));return{id:"class",diagram:diagram27}},"loader")},classDetector_V2_default={id:"classDiagram",detector:__name((txt,config5)=>!(!/^\s*classDiagram/.test(txt)||"dagre-wrapper"!==config5?.class?.defaultRenderer)||/^\s*classDiagram-v2/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_classDiagram_v2(),classDiagram_v2_exports));return{id:"classDiagram",diagram:diagram27}},"loader")},stateDetector_default={id:"state",detector:__name((txt,config5)=>"dagre-wrapper"!==config5?.state?.defaultRenderer&&/^\s*stateDiagram/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_stateDiagram2(),stateDiagram_exports));return{id:"state",diagram:diagram27}},"loader")},stateDetector_V2_default={id:"stateDiagram",detector:__name((txt,config5)=>!!/^\s*stateDiagram-v2/.test(txt)||!(!/^\s*stateDiagram/.test(txt)||"dagre-wrapper"!==config5?.state?.defaultRenderer),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_stateDiagram_v2(),stateDiagram_v2_exports));return{id:"stateDiagram",diagram:diagram27}},"loader")},journeyDetector_default={id:"journey",detector:__name(txt=>/^\s*journey/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_journeyDiagram(),journeyDiagram_exports));return{id:"journey",diagram:diagram27}},"loader")};init_logger(),init_selectSvgElement(),init_setupGraphViewbox();var renderer5={draw:__name((_text,id30,version3)=>{log.debug("rendering svg for syntax error\n");const svg2=selectSvgElement(id30),g2=svg2.append("g");svg2.attr("viewBox","0 0 2412 512"),configureSvgSize(svg2,100,512,!0),g2.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),g2.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),g2.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),g2.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),g2.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),g2.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),g2.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),g2.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${version3}`)},"draw")},errorRenderer_default=renderer5,errorDiagram_default={db:{},renderer:renderer5,parser:{parse:__name(()=>{},"parse")}},id20="flowchart-elk",detector_default={id:id20,detector:__name((txt,config5={})=>!!(/^\s*flowchart-elk/.test(txt)||/^\s*(flowchart|graph)/.test(txt)&&"elk"===config5?.flowchart?.defaultRenderer)&&(config5.layout="elk",!0),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_flowDiagram(),flowDiagram_exports));return{id:id20,diagram:diagram27}},"loader")},detector_default2={id:"timeline",detector:__name(txt=>/^\s*timeline/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_timeline_definition(),timeline_definition_exports));return{id:"timeline",diagram:diagram27}},"loader")},detector_default3={id:"mindmap",detector:__name(txt=>/^\s*mindmap/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_mindmap_definition(),mindmap_definition_exports));return{id:"mindmap",diagram:diagram27}},"loader")},detector_default4={id:"kanban",detector:__name(txt=>/^\s*kanban/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_kanban_definition(),kanban_definition_exports));return{id:"kanban",diagram:diagram27}},"loader")},sankeyDetector_default={id:"sankey",detector:__name(txt=>/^\s*sankey(-beta)?/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_sankeyDiagram(),sankeyDiagram_exports));return{id:"sankey",diagram:diagram27}},"loader")},packet={id:"packet",detector:__name(txt=>/^\s*packet(-beta)?/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_diagram(),diagram_exports));return{id:"packet",diagram:diagram27}},"loader")},radar={id:"radar",detector:__name(txt=>/^\s*radar-beta/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_diagram2(),diagram_exports2));return{id:"radar",diagram:diagram27}},"loader")},blockDetector_default={id:"block",detector:__name(txt=>/^\s*block(-beta)?/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_blockDiagram(),blockDiagram_exports));return{id:"block",diagram:diagram27}},"loader")},architectureDetector_default={id:"architecture",detector:__name(txt=>/^\s*architecture/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_architectureDiagram(),architectureDiagram_exports));return{id:"architecture",diagram:diagram27}},"loader")};init_detectType(),init_diagramAPI();var treemap={id:"treemap",detector:__name(txt=>/^\s*treemap/.test(txt),"detector"),loader:__name(async()=>{const{diagram:diagram27}=await Promise.resolve().then(()=>(init_diagram3(),diagram_exports3));return{id:"treemap",diagram:diagram27}},"loader")},hasLoadedDiagrams=!1,addDiagrams=__name(()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerDiagram("error",errorDiagram_default,text4=>"error"===text4.toLowerCase().trim()),registerDiagram("---",{db:{clear:__name(()=>{},"clear")},styles:{},renderer:{draw:__name(()=>{},"draw")},parser:{parse:__name(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:__name(()=>null,"init")},text4=>text4.toLowerCase().trimStart().startsWith("---")),registerLazyLoadedDiagrams(detector_default,detector_default3,architectureDetector_default),registerLazyLoadedDiagrams(c4Detector_default,detector_default4,classDetector_V2_default,classDetector_default,erDetector_default,ganttDetector_default,info,pie,requirementDetector_default,sequenceDetector_default,flowDetector_v2_default,flowDetector_default,detector_default2,gitGraphDetector_default,stateDetector_V2_default,stateDetector_default,journeyDetector_default,quadrantDetector_default,sankeyDetector_default,packet,xychartDetector_default,blockDetector_default,radar,treemap))},"addDiagrams");init_logger(),init_detectType(),init_diagramAPI();var loadRegisteredDiagrams=__name(async()=>{log.debug("Loading registered diagrams");const failed=(await Promise.allSettled(Object.entries(detectors).map(async([key,{detector:detector28,loader:loader29}])=>{if(loader29)try{getDiagram(key)}catch{try{const{diagram:diagram27,id:id30}=await loader29();registerDiagram(id30,diagram27,detector28)}catch(err){throw log.error(`Failed to load external diagram with key ${key}. Removing from detectors.`),delete detectors[key],err}}}))).filter(result=>"rejected"===result.status);if(failed.length>0){log.error(`Failed to load ${failed.length} external diagrams`);for(const res of failed)log.error(res);throw new Error(`Failed to load ${failed.length} external diagrams`)}},"loadRegisteredDiagrams");init_logger(),init_src32();var abs3=Math.abs,from=String.fromCharCode;function trim(value2){return value2.trim()}function replace(value2,pattern,replacement){return value2.replace(pattern,replacement)}function indexof(value2,search,position5){return value2.indexOf(search,position5)}function charat(value2,index){return 0|value2.charCodeAt(index)}function substr(value2,begin,end2){return value2.slice(begin,end2)}function strlen(value2){return value2.length}function sizeof(value2){return value2.length}function append2(value2,array4){return array4.push(value2),value2}__name(trim,"trim"),__name(replace,"replace"),__name(indexof,"indexof"),__name(charat,"charat"),__name(substr,"substr"),__name(strlen,"strlen"),__name(sizeof,"sizeof"),__name(append2,"append");var line=1,column=1,length=0,position4=0,character=0,characters="";function node(value2,root3,parent4,type3,props,children2,length2,siblings2){return{value:value2,root:root3,parent:parent4,type:type3,props:props,children:children2,line:line,column:column,length:length2,return:"",siblings:siblings2}}function char(){return character}function prev(){return character=position4>0?charat(characters,--position4):0,column--,10===character&&(column=1,line--),character}function next2(){return character=position4<length?charat(characters,position4++):0,column++,10===character&&(column=1,line++),character}function peek(){return charat(characters,position4)}function caret(){return position4}function slice4(begin,end2){return substr(characters,begin,end2)}function token(type3){switch(type3){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(value2){return line=column=1,length=strlen(characters=value2),position4=0,[]}function dealloc(value2){return characters="",value2}function delimit(type3){return trim(slice4(position4-1,delimiter2(91===type3?type3+2:40===type3?type3+1:type3)))}function whitespace(type3){for(;(character=peek())&&character<33;)next2();return token(type3)>2||token(character)>3?"":" "}function escaping(index,count2){for(;--count2&&next2()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice4(index,caret()+(count2<6&&32==peek()&&32==next2()))}function delimiter2(type3){for(;next2();)switch(character){case type3:return position4;case 34:case 39:34!==type3&&39!==type3&&delimiter2(character);break;case 40:41===type3&&delimiter2(type3);break;case 92:next2()}return position4}function commenter(type3,index){for(;next2()&&type3+character!==57&&(type3+character!==84||47!==peek()););return"/*"+slice4(index,position4-1)+"*"+from(47===type3?type3:next2())}function identifier(index){for(;!token(peek());)next2();return slice4(index,position4)}function compile(value2){return dealloc(parse4("",null,null,null,[""],value2=alloc(value2),0,[0],value2))}function parse4(value2,root3,parent4,rule,rules,rulesets,pseudo,points,declarations){for(var index=0,offset=0,length2=pseudo,atrule=0,property2=0,previous=0,variable=1,scanning=1,ampersand=1,character2=0,type3="",props=rules,children2=rulesets,reference=rule,characters2=type3;scanning;)switch(previous=character2,character2=next2()){case 40:if(108!=previous&&58==charat(characters2,length2-1)){-1!=indexof(characters2+=replace(delimit(character2),"&","&\f"),"&\f",abs3(index?points[index-1]:0))&&(ampersand=-1);break}case 34:case 39:case 91:characters2+=delimit(character2);break;case 9:case 10:case 13:case 32:characters2+=whitespace(previous);break;case 92:characters2+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append2(comment(commenter(next2(),caret()),root3,parent4,declarations),declarations),5!=token(previous||1)&&5!=token(peek()||1)||!strlen(characters2)||" "===substr(characters2,-1,void 0)||(characters2+=" ");break;default:characters2+="/"}break;case 123*variable:points[index++]=strlen(characters2)*ampersand;case 125*variable:case 59:case 0:switch(character2){case 0:case 125:scanning=0;case 59+offset:-1==ampersand&&(characters2=replace(characters2,/\f/g,"")),property2>0&&(strlen(characters2)-length2||0===variable&&47===previous)&&append2(property2>32?declaration(characters2+";",rule,parent4,length2-1,declarations):declaration(replace(characters2," ","")+";",rule,parent4,length2-2,declarations),declarations);break;case 59:characters2+=";";default:if(append2(reference=ruleset(characters2,root3,parent4,index,offset,rules,points,type3,props=[],children2=[],length2,rulesets),rulesets),123===character2)if(0===offset)parse4(characters2,root3,reference,reference,props,rulesets,length2,points,children2);else{switch(atrule){case 99:if(110===charat(characters2,3))break;case 108:if(97===charat(characters2,2))break;default:offset=0;case 100:case 109:case 115:}offset?parse4(value2,reference,reference,rule&&append2(ruleset(value2,reference,reference,0,0,rules,points,type3,rules,props=[],length2,children2),children2),rules,children2,length2,points,rule?props:children2):parse4(characters2,reference,reference,reference,[""],children2,0,points,children2)}}index=offset=property2=0,variable=ampersand=1,type3=characters2="",length2=pseudo;break;case 58:length2=1+strlen(characters2),property2=previous;default:if(variable<1)if(123==character2)--variable;else if(125==character2&&0==variable++&&125==prev())continue;switch(characters2+=from(character2),character2*variable){case 38:ampersand=offset>0?1:(characters2+="\f",-1);break;case 44:points[index++]=(strlen(characters2)-1)*ampersand,ampersand=1;break;case 64:45===peek()&&(characters2+=delimit(next2())),atrule=peek(),offset=length2=strlen(type3=characters2+=identifier(caret())),character2++;break;case 45:45===previous&&2==strlen(characters2)&&(variable=0)}}return rulesets}function ruleset(value2,root3,parent4,index,offset,rules,points,type3,props,children2,length2,siblings2){for(var post=offset-1,rule=0===offset?rules:[""],size4=sizeof(rule),i2=0,j3=0,k2=0;i2<index;++i2)for(var x5=0,y6=substr(value2,post+1,post=abs3(j3=points[i2])),z3=value2;x5<size4;++x5)(z3=trim(j3>0?rule[x5]+" "+y6:replace(y6,/&\f/g,rule[x5])))&&(props[k2++]=z3);return node(value2,root3,parent4,0===offset?"rule":type3,props,children2,length2,siblings2)}function comment(value2,root3,parent4,siblings2){return node(value2,root3,parent4,"comm",from(char()),substr(value2,2,-2),0,siblings2)}function declaration(value2,root3,parent4,length2,siblings2){return node(value2,root3,parent4,"decl",substr(value2,0,length2),substr(value2,length2+1,-1),length2,siblings2)}function serialize(children2,callback){for(var output2="",i2=0;i2<children2.length;i2++)output2+=callback(children2[i2],i2,children2,callback)||"";return output2}function stringify(element3,index,children2,callback){switch(element3.type){case"@layer":if(element3.children.length)break;case"@import":case"@namespace":case"decl":return element3.return=element3.return||element3.value;case"comm":return"";case"@keyframes":return element3.return=element3.value+"{"+serialize(element3.children,callback)+"}";case"rule":if(!strlen(element3.value=element3.props.join(",")))return""}return strlen(children2=serialize(element3.children,callback))?element3.return=element3.value+"{"+children2+"}":""}__name(node,"node"),__name(char,"char"),__name(prev,"prev"),__name(next2,"next"),__name(peek,"peek"),__name(caret,"caret"),__name(slice4,"slice"),__name(token,"token"),__name(alloc,"alloc"),__name(dealloc,"dealloc"),__name(delimit,"delimit"),__name(whitespace,"whitespace"),__name(escaping,"escaping"),__name(delimiter2,"delimiter"),__name(commenter,"commenter"),__name(identifier,"identifier"),__name(compile,"compile"),__name(parse4,"parse"),__name(ruleset,"ruleset"),__name(comment,"comment"),__name(declaration,"declaration"),__name(serialize,"serialize"),__name(stringify,"stringify"),init_purify_es(),init_isEmpty(),init_package();function setA11yDiagramInfo(svg2,diagramType){svg2.attr("role","graphics-document document"),""!==diagramType&&svg2.attr("aria-roledescription",diagramType)}function addSVGa11yTitleDescription(svg2,a11yTitle,a11yDesc,baseId){if(void 0!==svg2.insert){if(a11yDesc){const descId=`chart-desc-${baseId}`;svg2.attr("aria-describedby",descId),svg2.insert("desc",":first-child").attr("id",descId).text(a11yDesc)}if(a11yTitle){const titleId=`chart-title-${baseId}`;svg2.attr("aria-labelledby",titleId),svg2.insert("title",":first-child").attr("id",titleId).text(a11yTitle)}}}__name(setA11yDiagramInfo,"setA11yDiagramInfo"),__name(addSVGa11yTitleDescription,"addSVGa11yTitleDescription"),init_assignWithDepth(),init_config(),init_config(),init_diagramAPI(),init_detectType(),init_errors(),init_utils2();var Diagram=class _Diagram{constructor(type3,text4,db7,parser24,renderer10){this.type=type3,this.text=text4,this.db=db7,this.parser=parser24,this.renderer=renderer10}static{__name(this,"Diagram")}static async fromText(text4,metadata={}){const config5=getConfig(),type3=detectType(text4,config5);text4=encodeEntities(text4)+"\n";try{getDiagram(type3)}catch{const loader29=getDiagramLoader(type3);if(!loader29)throw new UnknownDiagramError(`Diagram ${type3} not found.`);const{id:id30,diagram:diagram27}=await loader29();registerDiagram(id30,diagram27)}const{db:db7,parser:parser24,renderer:renderer10,init:init3}=getDiagram(type3);return parser24.parser&&(parser24.parser.yy=db7),db7.clear?.(),init3?.(config5),metadata.title&&db7.setDiagramTitle?.(metadata.title),await parser24.parse(text4),new _Diagram(type3,text4,db7,parser24,renderer10)}async render(id30,version3){await this.renderer.draw(this.text,id30,version3,this)}getParser(){return this.parser}getType(){return this.type}};init_common();var interactionFunctions=[],attachFunctions=__name(()=>{interactionFunctions.forEach(f2=>{f2()}),interactionFunctions=[]},"attachFunctions");init_logger();var cleanupComments=__name(text4=>text4.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function extractFrontMatter(text4){const matches33=text4.match(frontMatterRegex);if(!matches33)return{text:text4,metadata:{}};let parsed=load(matches33[1],{schema:JSON_SCHEMA})??{};parsed="object"!=typeof parsed||Array.isArray(parsed)?{}:parsed;const metadata={};return parsed.displayMode&&(metadata.displayMode=parsed.displayMode.toString()),parsed.title&&(metadata.title=parsed.title.toString()),parsed.config&&(metadata.config=parsed.config),{text:text4.slice(matches33[0].length),metadata:metadata}}init_regexes(),init_js_yaml(),__name(extractFrontMatter,"extractFrontMatter"),init_utils2();var cleanupText=__name(code=>code.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(match2,tag,attributes)=>"<"+tag+attributes.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),processFrontmatter=__name(code=>{const{text:text4,metadata:metadata}=extractFrontMatter(code),{displayMode:displayMode2,title:title2,config:config5={}}=metadata;return displayMode2&&(config5.gantt||(config5.gantt={}),config5.gantt.displayMode=displayMode2),{title:title2,config:config5,text:text4}},"processFrontmatter"),processDirectives=__name(code=>{const initDirective=utils_default2.detectInit(code)??{},wrapDirectives=utils_default2.detectDirective(code,"wrap");return Array.isArray(wrapDirectives)?initDirective.wrap=wrapDirectives.some(({type:type3})=>"wrap"===type3):"wrap"===wrapDirectives?.type&&(initDirective.wrap=!0),{text:removeDirectives(code),directive:initDirective}},"processDirectives");function preprocessDiagram(code){const cleanedCode=cleanupText(code),frontMatterResult=processFrontmatter(cleanedCode),directiveResult=processDirectives(frontMatterResult.text),config5=cleanAndMerge(frontMatterResult.config,directiveResult.directive);return{code:code=cleanupComments(directiveResult.text),title:frontMatterResult.title,config:config5}}function toBase64(str2){const utf8Bytes=(new TextEncoder).encode(str2),utf8Str=Array.from(utf8Bytes,byte=>String.fromCodePoint(byte)).join("");return btoa(utf8Str)}__name(preprocessDiagram,"preprocessDiagram"),init_styles(),init_themes(),init_utils2(),__name(toBase64,"toBase64");var DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function processAndSetConfigs(text4){const processed2=preprocessDiagram(text4);return reset(),addDirective(processed2.config??{}),processed2}async function parse5(text4,parseOptions){addDiagrams();try{const{code:code,config:config5}=processAndSetConfigs(text4);return{diagramType:(await getDiagramFromText(code)).type,config:config5}}catch(error3){if(parseOptions?.suppressErrors)return!1;throw error3}}__name(processAndSetConfigs,"processAndSetConfigs"),__name(parse5,"parse");var cssImportantStyles=__name((cssClass,element3,cssClasses=[])=>`\n.${cssClass} ${element3} { ${cssClasses.join(" !important; ")} !important; }`,"cssImportantStyles"),createCssStyles=__name((config5,classDefs=new Map)=>{let cssStyles="";if(void 0!==config5.themeCSS&&(cssStyles+=`\n${config5.themeCSS}`),void 0!==config5.fontFamily&&(cssStyles+=`\n:root { --mermaid-font-family: ${config5.fontFamily}}`),void 0!==config5.altFontFamily&&(cssStyles+=`\n:root { --mermaid-alt-font-family: ${config5.altFontFamily}}`),classDefs instanceof Map){const cssElements=config5.htmlLabels??config5.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];classDefs.forEach(styleClassDef=>{isEmpty_default(styleClassDef.styles)||cssElements.forEach(cssElement=>{cssStyles+=cssImportantStyles(styleClassDef.id,cssElement,styleClassDef.styles)}),isEmpty_default(styleClassDef.textStyles)||(cssStyles+=cssImportantStyles(styleClassDef.id,"tspan",(styleClassDef?.textStyles||[]).map(s2=>s2.replace("color","fill"))))})}return cssStyles},"createCssStyles"),createUserStyles=__name((config5,graphType,classDefs,svgId)=>{const userCSSstyles=createCssStyles(config5,classDefs);return serialize(compile(`${svgId}{${styles_default(graphType,userCSSstyles,config5.themeVariables)}}`),stringify)},"createUserStyles"),cleanUpSvgCode=__name((svgCode="",inSandboxMode,useArrowMarkerUrls)=>{let cleanedUpSvg=svgCode;return useArrowMarkerUrls||inSandboxMode||(cleanedUpSvg=cleanedUpSvg.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),cleanedUpSvg=decodeEntities(cleanedUpSvg),cleanedUpSvg=cleanedUpSvg.replace(/<br>/g,"<br/>"),cleanedUpSvg},"cleanUpSvgCode"),putIntoIFrame=__name((svgCode="",svgElement)=>`<iframe style="width:100%;height:${svgElement?.viewBox?.baseVal?.height?svgElement.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${toBase64(`<body style="margin:0">${svgCode}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`,"putIntoIFrame"),appendDivSvgG=__name((parentRoot,id30,enclosingDivId,divStyle,svgXlink)=>{const enclosingDiv=parentRoot.append("div");enclosingDiv.attr("id",enclosingDivId),divStyle&&enclosingDiv.attr("style",divStyle);const svgNode2=enclosingDiv.append("svg").attr("id",id30).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return svgXlink&&svgNode2.attr("xmlns:xlink",svgXlink),svgNode2.append("g"),parentRoot},"appendDivSvgG");function sandboxedIframe(parentNode,iFrameId){return parentNode.append("iframe").attr("id",iFrameId).attr("style","width: 100%; height: 100%;").attr("sandbox","")}__name(sandboxedIframe,"sandboxedIframe");var removeExistingElements=__name((doc,id30,divId,iFrameId)=>{doc.getElementById(id30)?.remove(),doc.getElementById(divId)?.remove(),doc.getElementById(iFrameId)?.remove()},"removeExistingElements"),render7=__name(async function(id30,text4,svgContainingElement){addDiagrams();const processed2=processAndSetConfigs(text4);text4=processed2.code;const config5=getConfig();log.debug(config5),text4.length>(config5?.maxTextSize??5e4)&&(text4="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const idSelector="#"+id30,iFrameID="i"+id30,iFrameID_selector="#"+iFrameID,enclosingDivID="d"+id30,enclosingDivID_selector="#"+enclosingDivID,removeTempElements=__name(()=>{const node2=select_default2(isSandboxed?iFrameID_selector:enclosingDivID_selector).node();node2&&"remove"in node2&&node2.remove()},"removeTempElements");let root3=select_default2("body");const isSandboxed="sandbox"===config5.securityLevel,isLooseSecurityLevel="loose"===config5.securityLevel,fontFamily=config5.fontFamily;if(void 0!==svgContainingElement){if(svgContainingElement&&(svgContainingElement.innerHTML=""),isSandboxed){const iframe=sandboxedIframe(select_default2(svgContainingElement),iFrameID);root3=select_default2(iframe.nodes()[0].contentDocument.body),root3.node().style.margin=0}else root3=select_default2(svgContainingElement);appendDivSvgG(root3,id30,enclosingDivID,`font-family: ${fontFamily}`,"http://www.w3.org/1999/xlink")}else{if(removeExistingElements(document,id30,enclosingDivID,iFrameID),isSandboxed){const iframe=sandboxedIframe(select_default2("body"),iFrameID);root3=select_default2(iframe.nodes()[0].contentDocument.body),root3.node().style.margin=0}else root3=select_default2("body");appendDivSvgG(root3,id30,enclosingDivID)}let diag,parseEncounteredException;try{diag=await Diagram.fromText(text4,{title:processed2.title})}catch(error3){if(config5.suppressErrorRendering)throw removeTempElements(),error3;diag=await Diagram.fromText("error"),parseEncounteredException=error3}const element3=root3.select(enclosingDivID_selector).node(),diagramType=diag.type,svg2=element3.firstChild,firstChild=svg2.firstChild,diagramClassDefs=diag.renderer.getClasses?.(text4,diag),rules=createUserStyles(config5,diagramType,diagramClassDefs,idSelector),style1=document.createElement("style");style1.innerHTML=rules,svg2.insertBefore(style1,firstChild);try{await diag.renderer.draw(text4,id30,package_default.version,diag)}catch(e3){throw config5.suppressErrorRendering?removeTempElements():errorRenderer_default.draw(text4,id30,package_default.version),e3}const svgNode2=root3.select(`${enclosingDivID_selector} svg`),a11yTitle=diag.db.getAccTitle?.(),a11yDescr=diag.db.getAccDescription?.();addA11yInfo(diagramType,svgNode2,a11yTitle,a11yDescr),root3.select(`[id="${id30}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let svgCode=root3.select(enclosingDivID_selector).node().innerHTML;if(log.debug("config.arrowMarkerAbsolute",config5.arrowMarkerAbsolute),svgCode=cleanUpSvgCode(svgCode,isSandboxed,evaluate(config5.arrowMarkerAbsolute)),isSandboxed){const svgEl=root3.select(enclosingDivID_selector+" svg").node();svgCode=putIntoIFrame(svgCode,svgEl)}else isLooseSecurityLevel||(svgCode=purify.sanitize(svgCode,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(attachFunctions(),parseEncounteredException)throw parseEncounteredException;return removeTempElements(),{diagramType:diagramType,svg:svgCode,bindFunctions:diag.db.bindFunctions}},"render");function initialize(userOptions={}){const options2=assignWithDepth_default({},userOptions);options2?.fontFamily&&!options2.themeVariables?.fontFamily&&(options2.themeVariables||(options2.themeVariables={}),options2.themeVariables.fontFamily=options2.fontFamily),saveConfigFromInitialize(options2),options2?.theme&&options2.theme in themes_default?options2.themeVariables=themes_default[options2.theme].getThemeVariables(options2.themeVariables):options2&&(options2.themeVariables=themes_default.default.getThemeVariables(options2.themeVariables));const config5="object"==typeof options2?setSiteConfig(options2):getSiteConfig();setLogLevel(config5.logLevel),addDiagrams()}__name(initialize,"initialize");var getDiagramFromText=__name((text4,metadata={})=>{const{code:code}=preprocessDiagram(text4);return Diagram.fromText(code,metadata)},"getDiagramFromText");function addA11yInfo(diagramType,svgNode2,a11yTitle,a11yDescr){setA11yDiagramInfo(svgNode2,diagramType),addSVGa11yTitleDescription(svgNode2,a11yTitle,a11yDescr,svgNode2.attr("id"))}__name(addA11yInfo,"addA11yInfo");var mermaidAPI=Object.freeze({render:render7,parse:parse5,getDiagramFromText:getDiagramFromText,initialize:initialize,getConfig:getConfig,setConfig:setConfig,getSiteConfig:getSiteConfig,updateSiteConfig:updateSiteConfig,reset:__name(()=>{reset()},"reset"),globalReset:__name(()=>{reset(defaultConfig)},"globalReset"),defaultConfig:defaultConfig});setLogLevel(getConfig().logLevel),reset(getConfig()),init_render2(),init_utils2();var handleError=__name((error3,errors,parseError)=>{log.warn(error3),isDetailedError(error3)?(parseError&&parseError(error3.str,error3.hash),errors.push({...error3,message:error3.str,error:error3})):(parseError&&parseError(error3),error3 instanceof Error&&errors.push({str:error3.message,message:error3.message,hash:error3.name,error:error3}))},"handleError"),run4=__name(async function(options2={querySelector:".mermaid"}){try{await runThrowsErrors(options2)}catch(e3){if(isDetailedError(e3)&&log.error(e3.str),mermaid.parseError&&mermaid.parseError(e3),!options2.suppressErrors)throw log.error("Use the suppressErrors option to suppress these errors"),e3}},"run"),runThrowsErrors=__name(async function({postRenderCallback:postRenderCallback,querySelector:querySelector,nodes:nodes5}={querySelector:".mermaid"}){const conf5=mermaidAPI.getConfig();let nodesToProcess;if(log.debug((postRenderCallback?"":"No ")+"Callback function found"),nodes5)nodesToProcess=nodes5;else{if(!querySelector)throw new Error("Nodes and querySelector are both undefined");nodesToProcess=document.querySelectorAll(querySelector)}log.debug(`Found ${nodesToProcess.length} diagrams`),void 0!==conf5?.startOnLoad&&(log.debug("Start On Load: "+conf5?.startOnLoad),mermaidAPI.updateSiteConfig({startOnLoad:conf5?.startOnLoad}));const idGenerator=new utils_default2.InitIDGenerator(conf5.deterministicIds,conf5.deterministicIDSeed);let txt;const errors=[];for(const element3 of Array.from(nodesToProcess)){if(log.info("Rendering diagram: "+element3.id),element3.getAttribute("data-processed"))continue;element3.setAttribute("data-processed","true");const id30=`mermaid-${idGenerator.next()}`;txt=element3.innerHTML,txt=dedent(utils_default2.entityDecode(txt)).trim().replace(/<br\s*\/?>/gi,"<br/>");const init3=utils_default2.detectInit(txt);init3&&log.debug("Detected early reinit: ",init3);try{const{svg:svg2,bindFunctions:bindFunctions2}=await render8(id30,txt,element3);element3.innerHTML=svg2,postRenderCallback&&await postRenderCallback(id30),bindFunctions2&&bindFunctions2(element3)}catch(error3){handleError(error3,errors,mermaid.parseError)}}if(errors.length>0)throw errors[0]},"runThrowsErrors"),initialize2=__name(function(config5){mermaidAPI.initialize(config5)},"initialize"),init2=__name(async function(config5,nodes5,callback){log.warn("mermaid.init is deprecated. Please use run instead."),config5&&initialize2(config5);const runOptions={postRenderCallback:callback,querySelector:".mermaid"};"string"==typeof nodes5?runOptions.querySelector=nodes5:nodes5&&(nodes5 instanceof HTMLElement?runOptions.nodes=[nodes5]:runOptions.nodes=nodes5),await run4(runOptions)},"init"),registerExternalDiagrams=__name(async(diagrams2,{lazyLoad:lazyLoad=!0}={})=>{addDiagrams(),registerLazyLoadedDiagrams(...diagrams2),!1===lazyLoad&&await loadRegisteredDiagrams()},"registerExternalDiagrams"),contentLoaded=__name(function(){if(mermaid.startOnLoad){const{startOnLoad:startOnLoad}=mermaidAPI.getConfig();startOnLoad&&mermaid.run().catch(err=>log.error("Mermaid failed to initialize",err))}},"contentLoaded");"undefined"!=typeof document&&window.addEventListener("load",contentLoaded,!1);var mod,setParseErrorHandler=__name(function(parseErrorHandler){mermaid.parseError=parseErrorHandler},"setParseErrorHandler"),executionQueue=[],executionQueueRunning=!1,executeQueue=__name(async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const f2=executionQueue.shift();if(f2)try{await f2()}catch(e3){log.error("Error executing queue",e3)}}executionQueueRunning=!1}},"executeQueue"),parse6=__name(async(text4,parseOptions)=>new Promise((resolve2,reject3)=>{const performCall=__name(()=>new Promise((res,rej)=>{mermaidAPI.parse(text4,parseOptions).then(r2=>{res(r2),resolve2(r2)},e3=>{log.error("Error parsing",e3),mermaid.parseError?.(e3),rej(e3),reject3(e3)})}),"performCall");executionQueue.push(performCall),executeQueue().catch(reject3)}),"parse"),render8=__name((id30,text4,container2)=>new Promise((resolve2,reject3)=>{const performCall=__name(()=>new Promise((res,rej)=>{mermaidAPI.render(id30,text4,container2).then(r2=>{res(r2),resolve2(r2)},e3=>{log.error("Error parsing",e3),mermaid.parseError?.(e3),rej(e3),reject3(e3)})}),"performCall");executionQueue.push(performCall),executeQueue().catch(reject3)}),"render"),mermaid={startOnLoad:!0,mermaidAPI:mermaidAPI,parse:parse6,render:render8,init:init2,run:run4,registerExternalDiagrams:registerExternalDiagrams,registerLayoutLoaders:registerLayoutLoaders,initialize:initialize2,parseError:void 0,contentLoaded:contentLoaded,setParseErrorHandler:setParseErrorHandler,detectType:detectType,registerIconPacks:registerIconPacks,getRegisteredDiagramsMetadata:__name(()=>Object.keys(detectors).map(id30=>({id:id30})),"getRegisteredDiagramsMetadata")},mermaid_default=mermaid;return mod=mermaid_exports,__copyProps(__defProp({},"__esModule",{value:!0}),mod)})(),
/*! Check if previously processed */
/*!
 * Wait for document loaded before starting the execution
 */
/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/
globalThis.mermaid=globalThis.__esbuild_esm_mermaid_nm.mermaid.default;